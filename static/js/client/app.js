var requirejs, require, define;
(function(global) {
    function isFunction(e) {
        return ostring.call(e) === "[object Function]"
    }

    function isArray(e) {
        return ostring.call(e) === "[object Array]"
    }

    function each(e, t) {
        if (e) {
            var n;
            for (n = 0; n < e.length; n += 1)
                if (e[n] && t(e[n], n, e)) break
        }
    }

    function eachReverse(e, t) {
        if (e) {
            var n;
            for (n = e.length - 1; n > -1; n -= 1)
                if (e[n] && t(e[n], n, e)) break
        }
    }

    function hasProp(e, t) {
        return hasOwn.call(e, t)
    }

    function getOwn(e, t) {
        return hasProp(e, t) && e[t]
    }

    function eachProp(e, t) {
        var n;
        for (n in e)
            if (hasProp(e, n) && t(e[n], n)) break
    }

    function mixin(e, t, n, r) {
        return t && eachProp(t, function(t, i) {
            if (n || !hasProp(e, i)) r && typeof t == "object" && t && !isArray(t) && !isFunction(t) && !(t instanceof RegExp) ? (e[i] || (e[i] = {}), mixin(e[i], t, n, r)) : e[i] = t
        }), e
    }

    function bind(e, t) {
        return function() {
            return t.apply(e, arguments)
        }
    }

    function scripts() {
        return document.getElementsByTagName("script")
    }

    function defaultOnError(e) {
        throw e
    }

    function getGlobal(e) {
        if (!e) return e;
        var t = global;
        return each(e.split("."), function(e) {
            t = t[e]
        }), t
    }

    function makeError(e, t, n, r) {
        var i = new Error(t + "\nhttp://requirejs.org/docs/errors.html#" + e);
        return i.requireType = e, i.requireModules = r, n && (i.originalError = n), i
    }

    function newContext(e) {
        function m(e) {
            var t, n;
            for (t = 0; t < e.length; t++) {
                n = e[t];
                if (n === ".") e.splice(t, 1), t -= 1;
                else if (n === "..") {
                    if (t === 0 || t == 1 && e[2] === ".." || e[t - 1] === "..") continue;
                    t > 0 && (e.splice(t - 1, 2), t -= 2)
                }
            }
        }

        function g(e, t, n) {
            var r, i, s, u, a, f, l, c, h, p, d, v, g = t && t.split("/"),
                y = o.map,
                b = y && y["*"];
            e && (e = e.split("/"), l = e.length - 1, o.nodeIdCompat && jsSuffixRegExp.test(e[l]) && (e[l] = e[l].replace(jsSuffixRegExp, "")), e[0].charAt(0) === "." && g && (v = g.slice(0, g.length - 1), e = v.concat(e)), m(e), e = e.join("/"));
            if (n && y && (g || b)) {
                s = e.split("/");
                e: for (u = s.length; u > 0; u -= 1) {
                    f = s.slice(0, u).join("/");
                    if (g)
                        for (a = g.length; a > 0; a -= 1) {
                            i = getOwn(y, g.slice(0, a).join("/"));
                            if (i) {
                                i = getOwn(i, f);
                                if (i) {
                                    c = i, h = u;
                                    break e
                                }
                            }
                        }!p && b && getOwn(b, f) && (p = getOwn(b, f), d = u)
                }!c && p && (c = p, h = d), c && (s.splice(0, h, c), e = s.join("/"))
            }
            return r = getOwn(o.pkgs, e), r ? r : e
        }

        function y(e) {
            isBrowser && each(scripts(), function(t) {
                if (t.getAttribute("data-requiremodule") === e && t.getAttribute("data-requirecontext") === r.contextName) return t.parentNode.removeChild(t), !0
            })
        }

        function b(e) {
            var t = getOwn(o.paths, e);
            if (t && isArray(t) && t.length > 1) return t.shift(), r.require.undef(e), r.makeRequire(null, {
                skipMap: !0
            })([e]), !0
        }

        function w(e) {
            var t, n = e ? e.indexOf("!") : -1;
            return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)), [t, e]
        }

        function E(e, t, n, i) {
            var s, o, u, a, f = null,
                l = t ? t.name : null,
                h = e,
                p = !0,
                m = "";
            return e || (p = !1, e = "_@r" + (d += 1)), a = w(e), f = a[0], e = a[1], f && (f = g(f, l, i), o = getOwn(c, f)), e && (f ? o && o.normalize ? m = o.normalize(e, function(e) {
                return g(e, l, i)
            }) : m = e.indexOf("!") === -1 ? g(e, l, i) : e : (m = g(e, l, i), a = w(m), f = a[0], m = a[1], n = !0, s = r.nameToUrl(m))), u = f && !o && !n ? "_unnormalized" + (v += 1) : "", {
                prefix: f,
                name: m,
                parentMap: t,
                unnormalized: !!u,
                url: s,
                originalName: h,
                isDefine: p,
                id: (f ? f + "!" + m : m) + u
            }
        }

        function S(e) {
            var t = e.id,
                n = getOwn(u, t);
            return n || (n = u[t] = new r.Module(e)), n
        }

        function x(e, t, n) {
            var r = e.id,
                i = getOwn(u, r);
            hasProp(c, r) && (!i || i.defineEmitComplete) ? t === "defined" && n(c[r]) : (i = S(e), i.error && t === "error" ? n(i.error) : i.on(t, n))
        }

        function T(e, t) {
            var n = e.requireModules,
                r = !1;
            t ? t(e) : (each(n, function(t) {
                var n = getOwn(u, t);
                n && (n.error = e, n.events.error && (r = !0, n.emit("error", e)))
            }), r || req.onError(e))
        }

        function N() {
            globalDefQueue.length && (apsp.apply(l, [l.length, 0].concat(globalDefQueue)), globalDefQueue = [])
        }

        function C(e) {
            delete u[e], delete a[e]
        }

        function k(e, t, n) {
            var r = e.map.id;
            e.error ? e.emit("error", e.error) : (t[r] = !0, each(e.depMaps, function(r, i) {
                var s = r.id,
                    o = getOwn(u, s);
                o && !e.depMatched[i] && !n[s] && (getOwn(t, s) ? (e.defineDep(i, c[s]), e.check()) : k(o, t, n))
            }), n[r] = !0)
        }

        function L() {
            var e, n, i = o.waitSeconds * 1e3,
                u = i && r.startTime + i < (new Date).getTime(),
                f = [],
                l = [],
                c = !1,
                h = !0;
            if (t) return;
            t = !0, eachProp(a, function(e) {
                var t = e.map,
                    r = t.id;
                if (!e.enabled) return;
                t.isDefine || l.push(e);
                if (!e.error)
                    if (!e.inited && u) b(r) ? (n = !0, c = !0) : (f.push(r), y(r));
                    else if (!e.inited && e.fetched && t.isDefine) {
                    c = !0;
                    if (!t.prefix) return h = !1
                }
            });
            if (u && f.length) return e = makeError("timeout", "Load timeout for modules: " + f, null, f), e.contextName = r.contextName, T(e);
            h && each(l, function(e) {
                k(e, {}, {})
            }), (!u || n) && c && (isBrowser || isWebWorker) && !s && (s = setTimeout(function() {
                s = 0, L()
            }, 50)), t = !1
        }

        function A(e) {
            hasProp(c, e[0]) || S(E(e[0], null, !0)).init(e[1], e[2])
        }

        function O(e, t, n, r) {
            e.detachEvent && !isOpera ? r && e.detachEvent(r, t) : e.removeEventListener(n, t, !1)
        }

        function M(e) {
            var t = e.currentTarget || e.srcElement;
            return O(t, r.onScriptLoad, "load", "onreadystatechange"), O(t, r.onScriptError, "error"), {
                node: t,
                id: t && t.getAttribute("data-requiremodule")
            }
        }

        function _() {
            var e;
            N();
            while (l.length) {
                e = l.shift();
                if (e[0] === null) return T(makeError("mismatch", "Mismatched anonymous define() module: " + e[e.length - 1]));
                A(e)
            }
        }
        var t, n, r, i, s, o = {
                waitSeconds: 7,
                baseUrl: "./",
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            },
            u = {},
            a = {},
            f = {},
            l = [],
            c = {},
            h = {},
            p = {},
            d = 1,
            v = 1;
        return i = {
            require: function(e) {
                return e.require ? e.require : e.require = r.makeRequire(e.map)
            },
            exports: function(e) {
                e.usingExports = !0;
                if (e.map.isDefine) return e.exports ? c[e.map.id] = e.exports : e.exports = c[e.map.id] = {}
            },
            module: function(e) {
                return e.module ? e.module : e.module = {
                    id: e.map.id,
                    uri: e.map.url,
                    config: function() {
                        return getOwn(o.config, e.map.id) || {}
                    },
                    exports: e.exports || (e.exports = {})
                }
            }
        }, n = function(e) {
            this.events = getOwn(f, e.id) || {}, this.map = e, this.shim = getOwn(o.shim, e.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
        }, n.prototype = {
            init: function(e, t, n, r) {
                r = r || {};
                if (this.inited) return;
                this.factory = t, n ? this.on("error", n) : this.events.error && (n = bind(this, function(e) {
                    this.emit("error", e)
                })), this.depMaps = e && e.slice(0), this.errback = n, this.inited = !0, this.ignore = r.ignore, r.enabled || this.enabled ? this.enable() : this.check()
            },
            defineDep: function(e, t) {
                this.depMatched[e] || (this.depMatched[e] = !0, this.depCount -= 1, this.depExports[e] = t)
            },
            fetch: function() {
                if (this.fetched) return;
                this.fetched = !0, r.startTime = (new Date).getTime();
                var e = this.map;
                if (!this.shim) return e.prefix ? this.callPlugin() : this.load();
                r.makeRequire(this.map, {
                    enableBuildCallback: !0
                })(this.shim.deps || [], bind(this, function() {
                    return e.prefix ? this.callPlugin() : this.load()
                }))
            },
            load: function() {
                var e = this.map.url;
                h[e] || (h[e] = !0, r.load(this.map.id, e))
            },
            check: function() {
                if (!this.enabled || this.enabling) return;
                var e, t, n = this.map.id,
                    i = this.depExports,
                    s = this.exports,
                    o = this.factory;
                if (!this.inited) this.fetch();
                else if (this.error) this.emit("error", this.error);
                else if (!this.defining) {
                    this.defining = !0;
                    if (this.depCount < 1 && !this.defined) {
                        if (isFunction(o)) {
                            if (this.events.error && this.map.isDefine || req.onError !== defaultOnError) try {
                                s = r.execCb(n, o, i, s)
                            } catch (u) {
                                e = u
                            } else s = r.execCb(n, o, i, s);
                            this.map.isDefine && s === undefined && (t = this.module, t ? s = t.exports : this.usingExports && (s = this.exports));
                            if (e) return e.requireMap = this.map, e.requireModules = this.map.isDefine ? [this.map.id] : null, e.requireType = this.map.isDefine ? "define" : "require", T(this.error = e)
                        } else s = o;
                        this.exports = s, this.map.isDefine && !this.ignore && (c[n] = s, req.onResourceLoad && req.onResourceLoad(r, this.map, this.depMaps)), C(n), this.defined = !0
                    }
                    this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                }
            },
            callPlugin: function() {
                var e = this.map,
                    t = e.id,
                    n = E(e.prefix);
                this.depMaps.push(n), x(n, "defined", bind(this, function(n) {
                    var i, s, a, f = getOwn(p, this.map.id),
                        l = this.map.name,
                        c = this.map.parentMap ? this.map.parentMap.name : null,
                        h = r.makeRequire(e.parentMap, {
                            enableBuildCallback: !0
                        });
                    if (this.map.unnormalized) {
                        n.normalize && (l = n.normalize(l, function(e) {
                            return g(e, c, !0)
                        }) || ""), s = E(e.prefix + "!" + l, this.map.parentMap), x(s, "defined", bind(this, function(e) {
                            this.init([], function() {
                                return e
                            }, null, {
                                enabled: !0,
                                ignore: !0
                            })
                        })), a = getOwn(u, s.id), a && (this.depMaps.push(s), this.events.error && a.on("error", bind(this, function(e) {
                            this.emit("error", e)
                        })), a.enable());
                        return
                    }
                    if (f) {
                        this.map.url = r.nameToUrl(f), this.load();
                        return
                    }
                    i = bind(this, function(e) {
                        this.init([], function() {
                            return e
                        }, null, {
                            enabled: !0
                        })
                    }), i.error = bind(this, function(e) {
                        this.inited = !0, this.error = e, e.requireModules = [t], eachProp(u, function(e) {
                            e.map.id.indexOf(t + "_unnormalized") === 0 && C(e.map.id)
                        }), T(e)
                    }), i.fromText = bind(this, function(n, s) {
                        var u = e.name,
                            a = E(u),
                            f = useInteractive;
                        s && (n = s), f && (useInteractive = !1), S(a), hasProp(o.config, t) && (o.config[u] = o.config[t]);
                        try {
                            req.exec(n)
                        } catch (l) {
                            return T(makeError("fromtexteval", "fromText eval for " + t + " failed: " + l, l, [t]))
                        }
                        f && (useInteractive = !0), this.depMaps.push(a), r.completeLoad(u), h([u], i)
                    }), n.load(e.name, h, i, o)
                })), r.enable(n, this), this.pluginMaps[n.id] = n
            },
            enable: function() {
                a[this.map.id] = this, this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function(e, t) {
                    var n, s, o;
                    if (typeof e == "string") {
                        e = E(e, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[t] = e, o = getOwn(i, e.id);
                        if (o) {
                            this.depExports[t] = o(this);
                            return
                        }
                        this.depCount += 1, x(e, "defined", bind(this, function(e) {
                            this.defineDep(t, e), this.check()
                        })), this.errback && x(e, "error", bind(this, this.errback))
                    }
                    n = e.id, s = u[n], !hasProp(i, n) && s && !s.enabled && r.enable(e, this)
                })), eachProp(this.pluginMaps, bind(this, function(e) {
                    var t = getOwn(u, e.id);
                    t && !t.enabled && r.enable(e, this)
                })), this.enabling = !1, this.check()
            },
            on: function(e, t) {
                var n = this.events[e];
                n || (n = this.events[e] = []), n.push(t)
            },
            emit: function(e, t) {
                each(this.events[e], function(e) {
                    e(t)
                }), e === "error" && delete this.events[e]
            }
        }, r = {
            config: o,
            contextName: e,
            registry: u,
            defined: c,
            urlFetched: h,
            defQueue: l,
            Module: n,
            makeModuleMap: E,
            nextTick: req.nextTick,
            onError: T,
            configure: function(e) {
                e.baseUrl && e.baseUrl.charAt(e.baseUrl.length - 1) !== "/" && (e.baseUrl += "/");
                var t = o.shim,
                    n = {
                        paths: !0,
                        bundles: !0,
                        config: !0,
                        map: !0
                    };
                eachProp(e, function(e, t) {
                    n[t] ? (o[t] || (o[t] = {}), mixin(o[t], e, !0, !0)) : o[t] = e
                }), e.bundles && eachProp(e.bundles, function(e, t) {
                    each(e, function(e) {
                        e !== t && (p[e] = t)
                    })
                }), e.shim && (eachProp(e.shim, function(e, n) {
                    isArray(e) && (e = {
                        deps: e
                    }), (e.exports || e.init) && !e.exportsFn && (e.exportsFn = r.makeShimExports(e)), t[n] = e
                }), o.shim = t), e.packages && each(e.packages, function(e) {
                    var t, n;
                    e = typeof e == "string" ? {
                        name: e
                    } : e, n = e.name, t = e.location, t && (o.paths[n] = e.location), o.pkgs[n] = e.name + "/" + (e.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                }), eachProp(u, function(e, t) {
                    !e.inited && !e.map.unnormalized && (e.map = E(t))
                }), (e.deps || e.callback) && r.require(e.deps || [], e.callback)
            },
            makeShimExports: function(e) {
                function t() {
                    var t;
                    return e.init && (t = e.init.apply(global, arguments)), t || e.exports && getGlobal(e.exports)
                }
                return t
            },
            makeRequire: function(t, n) {
                function s(o, a, f) {
                    var l, h, p;
                    return n.enableBuildCallback && a && isFunction(a) && (a.__requireJsBuild = !0), typeof o == "string" ? isFunction(a) ? T(makeError("requireargs", "Invalid require call"), f) : t && hasProp(i, o) ? i[o](u[t.id]) : req.get ? req.get(r, o, t, s) : (h = E(o, t, !1, !0), l = h.id, hasProp(c, l) ? c[l] : T(makeError("notloaded", 'Module name "' + l + '" has not been loaded yet for context: ' + e + (t ? "" : ". Use require([])")))) : (_(), r.nextTick(function() {
                        _(), p = S(E(null, t)), p.skipMap = n.skipMap, p.init(o, a, f, {
                            enabled: !0
                        }), L()
                    }), s)
                }
                return n = n || {}, mixin(s, {
                    isBrowser: isBrowser,
                    toUrl: function(e) {
                        var n, i = e.lastIndexOf("."),
                            s = e.split("/")[0],
                            o = s === "." || s === "..";
                        return i !== -1 && (!o || i > 1) && (n = e.substring(i, e.length), e = e.substring(0, i)), r.nameToUrl(g(e, t && t.id, !0), n, !0)
                    },
                    defined: function(e) {
                        return hasProp(c, E(e, t, !1, !0).id)
                    },
                    specified: function(e) {
                        return e = E(e, t, !1, !0).id, hasProp(c, e) || hasProp(u, e)
                    }
                }), t || (s.undef = function(e) {
                    N();
                    var n = E(e, t, !0),
                        r = getOwn(u, e);
                    y(e), delete c[e], delete h[n.url], delete f[e], eachReverse(l, function(t, n) {
                        t[0] === e && l.splice(n, 1)
                    }), r && (r.events.defined && (f[e] = r.events), C(e))
                }), s
            },
            enable: function(e) {
                var t = getOwn(u, e.id);
                t && S(e).enable()
            },
            completeLoad: function(e) {
                var t, n, r, i = getOwn(o.shim, e) || {},
                    s = i.exports;
                N();
                while (l.length) {
                    n = l.shift();
                    if (n[0] === null) {
                        n[0] = e;
                        if (t) break;
                        t = !0
                    } else n[0] === e && (t = !0);
                    A(n)
                }
                r = getOwn(u, e);
                if (!t && !hasProp(c, e) && r && !r.inited) {
                    if (o.enforceDefine && (!s || !getGlobal(s))) {
                        if (b(e)) return;
                        return T(makeError("nodefine", "No define call for " + e, null, [e]))
                    }
                    A([e, i.deps || [], i.exportsFn])
                }
                L()
            },
            nameToUrl: function(e, t, n) {
                var i, s, u, a, f, l, c, h = getOwn(o.pkgs, e);
                h && (e = h), c = getOwn(p, e);
                if (c) return r.nameToUrl(c, t, n);
                if (req.jsExtRegExp.test(e)) f = e + (t || "");
                else {
                    i = o.paths, s = e.split("/");
                    for (u = s.length; u > 0; u -= 1) {
                        a = s.slice(0, u).join("/"), l = getOwn(i, a);
                        if (l) {
                            isArray(l) && (l = l[0]), s.splice(0, u, l);
                            break
                        }
                    }
                    f = s.join("/"), f += t || (/^data\:|\?/.test(f) || n ? "" : ".js"), f = (f.charAt(0) === "/" || f.match(/^[\w\+\.\-]+:/) ? "" : o.baseUrl) + f
                }
                return o.urlArgs ? f + ((f.indexOf("?") === -1 ? "?" : "&") + o.urlArgs) : f
            },
            load: function(e, t) {
                req.load(r, e, t)
            },
            execCb: function(e, t, n, r) {
                return t.apply(r, n)
            },
            onScriptLoad: function(e) {
                if (e.type === "load" || readyRegExp.test((e.currentTarget || e.srcElement).readyState)) {
                    interactiveScript = null;
                    var t = M(e);
                    r.completeLoad(t.id)
                }
            },
            onScriptError: function(e) {
                var t = M(e);
                if (!b(t.id)) return T(makeError("scripterror", "Script error for: " + t.id, e, [t.id]))
            }
        }, r.require = r.makeRequire(), r
    }

    function getInteractiveScript() {
        return interactiveScript && interactiveScript.readyState === "interactive" ? interactiveScript : (eachReverse(scripts(), function(e) {
            if (e.readyState === "interactive") return interactiveScript = e
        }), interactiveScript)
    }
    var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.14",
        commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,
        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
        jsSuffixRegExp = /\.js$/,
        currDirRegExp = /^\.\//,
        op = Object.prototype,
        ostring = op.toString,
        hasOwn = op.hasOwnProperty,
        ap = Array.prototype,
        apsp = ap.splice,
        isBrowser = typeof window != "undefined" && typeof navigator != "undefined" && !!window.document,
        isWebWorker = !isBrowser && typeof importScripts != "undefined",
        readyRegExp = isBrowser && navigator.platform === "PLAYSTATION 3" ? /^complete$/ : /^(complete|loaded)$/,
        defContextName = "_",
        isOpera = typeof opera != "undefined" && opera.toString() === "[object Opera]",
        contexts = {},
        cfg = {},
        globalDefQueue = [],
        useInteractive = !1;
    if (typeof define != "undefined") return;
    if (typeof requirejs != "undefined") {
        if (isFunction(requirejs)) return;
        cfg = requirejs, requirejs = undefined
    }
    typeof require != "undefined" && !isFunction(require) && (cfg = require, require = undefined), req = requirejs = function(e, t, n, r) {
        var i, s, o = defContextName;
        return !isArray(e) && typeof e != "string" && (s = e, isArray(t) ? (e = t, t = n, n = r) : e = []), s && s.context && (o = s.context), i = getOwn(contexts, o), i || (i = contexts[o] = req.s.newContext(o)), s && i.configure(s), i.require(e, t, n)
    }, req.config = function(e) {
        return req(e)
    }, req.nextTick = typeof setTimeout != "undefined" ? function(e) {
        setTimeout(e, 4)
    } : function(e) {
        e()
    }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
        contexts: contexts,
        newContext: newContext
    }, req({}), each(["toUrl", "undef", "defined", "specified"], function(e) {
        req[e] = function() {
            var t = contexts[defContextName];
            return t.require[e].apply(t, arguments)
        }
    }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = defaultOnError, req.createNode = function(e, t, n) {
        var r = e.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
        return r.type = e.scriptType || "text/javascript", r.charset = "utf-8", r.async = !0, r
    }, req.load = function(e, t, n) {
        var r = e && e.config || {},
            i;
        if (isBrowser) return i = req.createNode(r, t, n), i.setAttribute("data-requirecontext", e.contextName), i.setAttribute("data-requiremodule", t), i.attachEvent && !(i.attachEvent.toString && i.attachEvent.toString().indexOf("[native code") < 0) && !isOpera ? (useInteractive = !0, i.attachEvent("onreadystatechange", e.onScriptLoad)) : (i.addEventListener("load", e.onScriptLoad, !1), i.addEventListener("error", e.onScriptError, !1)), i.src = n, currentlyAddingScript = i, baseElement ? head.insertBefore(i, baseElement) : head.appendChild(i), currentlyAddingScript = null, i;
        if (isWebWorker) try {
            importScripts(n), e.completeLoad(t)
        } catch (s) {
            e.onError(makeError("importscripts", "importScripts failed for " + t + " at " + n, s, [t]))
        }
    }, isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(e) {
        head || (head = e.parentNode), dataMain = e.getAttribute("data-main");
        if (dataMain) return mainScript = dataMain, cfg.baseUrl || (src = mainScript.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath), mainScript = mainScript.replace(jsSuffixRegExp, ""), req.jsExtRegExp.test(mainScript) && (mainScript = dataMain), cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript], !0
    }), define = function(e, t, n) {
        var r, i;
        typeof e != "string" && (n = t, t = e, e = null), isArray(t) || (n = t, t = null), !t && isFunction(n) && (t = [], n.length && (n.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(e, n) {
            t.push(n)
        }), t = (n.length === 1 ? ["require"] : ["require", "exports", "module"]).concat(t))), useInteractive && (r = currentlyAddingScript || getInteractiveScript(), r && (e || (e = r.getAttribute("data-requiremodule")), i = contexts[r.getAttribute("data-requirecontext")])), (i ? i.defQueue : globalDefQueue).push([e, t, n])
    }, define.amd = {
        jQuery: !0
    }, req.exec = function(text) {
        return eval(text)
    }, req(cfg)
})(this), define("bower_components/requirejs/require.js", function() {}),
    function(e, t) {
        typeof module == "object" && typeof module.exports == "object" ? module.exports = e.document ? t(e, !0) : function(e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return t(e)
        } : t(e)
    }(typeof window != "undefined" ? window : this, function(window, noGlobal) {
        function isArraylike(e) {
            var t = e.length,
                n = jQuery.type(e);
            return n === "function" || jQuery.isWindow(e) ? !1 : e.nodeType === 1 && t ? !0 : n === "array" || t === 0 || typeof t == "number" && t > 0 && t - 1 in e
        }

        function winnow(e, t, n) {
            if (jQuery.isFunction(t)) return jQuery.grep(e, function(e, r) {
                return !!t.call(e, r, e) !== n
            });
            if (t.nodeType) return jQuery.grep(e, function(e) {
                return e === t !== n
            });
            if (typeof t == "string") {
                if (risSimple.test(t)) return jQuery.filter(t, e, n);
                t = jQuery.filter(t, e)
            }
            return jQuery.grep(e, function(e) {
                return indexOf.call(t, e) >= 0 !== n
            })
        }

        function sibling(e, t) {
            while ((e = e[t]) && e.nodeType !== 1);
            return e
        }

        function createOptions(e) {
            var t = optionsCache[e] = {};
            return jQuery.each(e.match(rnotwhite) || [], function(e, n) {
                t[n] = !0
            }), t
        }

        function completed() {
            document.removeEventListener("DOMContentLoaded", completed, !1), window.removeEventListener("load", completed, !1), jQuery.ready()
        }

        function Data() {
            Object.defineProperty(this.cache = {}, 0, {
                get: function() {
                    return {}
                }
            }), this.expando = jQuery.expando + Math.random()
        }

        function dataAttr(e, t, n) {
            var r;
            if (n === undefined && e.nodeType === 1) {
                r = "data-" + t.replace(rmultiDash, "-$1").toLowerCase(), n = e.getAttribute(r);
                if (typeof n == "string") {
                    try {
                        n = n === "true" ? !0 : n === "false" ? !1 : n === "null" ? null : +n + "" === n ? +n : rbrace.test(n) ? jQuery.parseJSON(n) : n
                    } catch (i) {}
                    data_user.set(e, t, n)
                } else n = undefined
            }
            return n
        }

        function returnTrue() {
            return !0
        }

        function returnFalse() {
            return !1
        }

        function safeActiveElement() {
            try {
                return document.activeElement
            } catch (e) {}
        }

        function manipulationTarget(e, t) {
            return jQuery.nodeName(e, "table") && jQuery.nodeName(t.nodeType !== 11 ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }

        function disableScript(e) {
            return e.type = (e.getAttribute("type") !== null) + "/" + e.type, e
        }

        function restoreScript(e) {
            var t = rscriptTypeMasked.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"), e
        }

        function setGlobalEval(e, t) {
            var n = 0,
                r = e.length;
            for (; n < r; n++) data_priv.set(e[n], "globalEval", !t || data_priv.get(t[n], "globalEval"))
        }

        function cloneCopyEvent(e, t) {
            var n, r, i, s, o, u, a, f;
            if (t.nodeType !== 1) return;
            if (data_priv.hasData(e)) {
                s = data_priv.access(e), o = data_priv.set(t, s), f = s.events;
                if (f) {
                    delete o.handle, o.events = {};
                    for (i in f)
                        for (n = 0, r = f[i].length; n < r; n++) jQuery.event.add(t, i, f[i][n])
                }
            }
            data_user.hasData(e) && (u = data_user.access(e), a = jQuery.extend({}, u), data_user.set(t, a))
        }

        function getAll(e, t) {
            var n = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return t === undefined || t && jQuery.nodeName(e, t) ? jQuery.merge([e], n) : n
        }

        function fixInput(e, t) {
            var n = t.nodeName.toLowerCase();
            if (n === "input" && rcheckableType.test(e.type)) t.checked = e.checked;
            else if (n === "input" || n === "textarea") t.defaultValue = e.defaultValue
        }

        function actualDisplay(e, t) {
            var n = jQuery(t.createElement(e)).appendTo(t.body),
                r = window.getDefaultComputedStyle ? window.getDefaultComputedStyle(n[0]).display : jQuery.css(n[0], "display");
            return n.detach(), r
        }

        function defaultDisplay(e) {
            var t = document,
                n = elemdisplay[e];
            if (!n) {
                n = actualDisplay(e, t);
                if (n === "none" || !n) iframe = (iframe || jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = iframe[0].contentDocument, t.write(), t.close(), n = actualDisplay(e, t), iframe.detach();
                elemdisplay[e] = n
            }
            return n
        }

        function curCSS(e, t, n) {
            var r, i, s, o, u = e.style;
            return n = n || getStyles(e), n && (o = n.getPropertyValue(t) || n[t]), n && (o === "" && !jQuery.contains(e.ownerDocument, e) && (o = jQuery.style(e, t)), rnumnonpx.test(o) && rmargin.test(t) && (r = u.width, i = u.minWidth, s = u.maxWidth, u.minWidth = u.maxWidth = u.width = o, o = n.width, u.width = r, u.minWidth = i, u.maxWidth = s)), o !== undefined ? o + "" : o
        }

        function addGetHookIf(e, t) {
            return {
                get: function() {
                    if (e()) {
                        delete this.get;
                        return
                    }
                    return (this.get = t).apply(this, arguments)
                }
            }
        }

        function vendorPropName(e, t) {
            if (t in e) return t;
            var n = t[0].toUpperCase() + t.slice(1),
                r = t,
                i = cssPrefixes.length;
            while (i--) {
                t = cssPrefixes[i] + n;
                if (t in e) return t
            }
            return r
        }

        function setPositiveNumber(e, t, n) {
            var r = rnumsplit.exec(t);
            return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
        }

        function augmentWidthOrHeight(e, t, n, r, i) {
            var s = n === (r ? "border" : "content") ? 4 : t === "width" ? 1 : 0,
                o = 0;
            for (; s < 4; s += 2) n === "margin" && (o += jQuery.css(e, n + cssExpand[s], !0, i)), r ? (n === "content" && (o -= jQuery.css(e, "padding" + cssExpand[s], !0, i)), n !== "margin" && (o -= jQuery.css(e, "border" + cssExpand[s] + "Width", !0, i))) : (o += jQuery.css(e, "padding" + cssExpand[s], !0, i), n !== "padding" && (o += jQuery.css(e, "border" + cssExpand[s] + "Width", !0, i)));
            return o
        }

        function getWidthOrHeight(e, t, n) {
            var r = !0,
                i = t === "width" ? e.offsetWidth : e.offsetHeight,
                s = getStyles(e),
                o = jQuery.css(e, "boxSizing", !1, s) === "border-box";
            if (i <= 0 || i == null) {
                i = curCSS(e, t, s);
                if (i < 0 || i == null) i = e.style[t];
                if (rnumnonpx.test(i)) return i;
                r = o && (support.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0
            }
            return i + augmentWidthOrHeight(e, t, n || (o ? "border" : "content"), r, s) + "px"
        }

        function showHide(e, t) {
            var n, r, i, s = [],
                o = 0,
                u = e.length;
            for (; o < u; o++) {
                r = e[o];
                if (!r.style) continue;
                s[o] = data_priv.get(r, "olddisplay"), n = r.style.display, t ? (!s[o] && n === "none" && (r.style.display = ""), r.style.display === "" && isHidden(r) && (s[o] = data_priv.access(r, "olddisplay", defaultDisplay(r.nodeName)))) : s[o] || (i = isHidden(r), (n && n !== "none" || !i) && data_priv.set(r, "olddisplay", i ? n : jQuery.css(r, "display")))
            }
            for (o = 0; o < u; o++) {
                r = e[o];
                if (!r.style) continue;
                if (!t || r.style.display === "none" || r.style.display === "") r.style.display = t ? s[o] || "" : "none"
            }
            return e
        }

        function Tween(e, t, n, r, i) {
            return new Tween.prototype.init(e, t, n, r, i)
        }

        function createFxNow() {
            return setTimeout(function() {
                fxNow = undefined
            }), fxNow = jQuery.now()
        }

        function genFx(e, t) {
            var n, r = 0,
                i = {
                    height: e
                };
            t = t ? 1 : 0;
            for (; r < 4; r += 2 - t) n = cssExpand[r], i["margin" + n] = i["padding" + n] = e;
            return t && (i.opacity = i.width = e), i
        }

        function createTween(e, t, n) {
            var r, i = (tweeners[t] || []).concat(tweeners["*"]),
                s = 0,
                o = i.length;
            for (; s < o; s++)
                if (r = i[s].call(n, t, e)) return r
        }

        function defaultPrefilter(e, t, n) {
            var r, i, s, o, u, a, f, l = this,
                c = {},
                h = e.style,
                p = e.nodeType && isHidden(e),
                d = data_priv.get(e, "fxshow");
            n.queue || (u = jQuery._queueHooks(e, "fx"), u.unqueued == null && (u.unqueued = 0, a = u.empty.fire, u.empty.fire = function() {
                u.unqueued || a()
            }), u.unqueued++, l.always(function() {
                l.always(function() {
                    u.unqueued--, jQuery.queue(e, "fx").length || u.empty.fire()
                })
            })), e.nodeType === 1 && ("height" in t || "width" in t) && (n.overflow = [h.overflow, h.overflowX, h.overflowY], f = jQuery.css(e, "display"), f === "none" && (f = defaultDisplay(e.nodeName)), f === "inline" && jQuery.css(e, "float") === "none" && (h.display = "inline-block")), n.overflow && (h.overflow = "hidden", l.always(function() {
                h.overflow = n.overflow[0], h.overflowX = n.overflow[1], h.overflowY = n.overflow[2]
            }));
            for (r in t) {
                i = t[r];
                if (rfxtypes.exec(i)) {
                    delete t[r], s = s || i === "toggle";
                    if (i === (p ? "hide" : "show")) {
                        if (i !== "show" || !d || d[r] === undefined) continue;
                        p = !0
                    }
                    c[r] = d && d[r] || jQuery.style(e, r)
                }
            }
            if (!jQuery.isEmptyObject(c)) {
                d ? "hidden" in d && (p = d.hidden) : d = data_priv.access(e, "fxshow", {}), s && (d.hidden = !p), p ? jQuery(e).show() : l.done(function() {
                    jQuery(e).hide()
                }), l.done(function() {
                    var t;
                    data_priv.remove(e, "fxshow");
                    for (t in c) jQuery.style(e, t, c[t])
                });
                for (r in c) o = createTween(p ? d[r] : 0, r, l), r in d || (d[r] = o.start, p && (o.end = o.start, o.start = r === "width" || r === "height" ? 1 : 0))
            }
        }

        function propFilter(e, t) {
            var n, r, i, s, o;
            for (n in e) {
                r = jQuery.camelCase(n), i = t[r], s = e[n], jQuery.isArray(s) && (i = s[1], s = e[n] = s[0]), n !== r && (e[r] = s, delete e[n]), o = jQuery.cssHooks[r];
                if (o && "expand" in o) {
                    s = o.expand(s), delete e[r];
                    for (n in s) n in e || (e[n] = s[n], t[n] = i)
                } else t[r] = i
            }
        }

        function Animation(e, t, n) {
            var r, i, s = 0,
                o = animationPrefilters.length,
                u = jQuery.Deferred().always(function() {
                    delete a.elem
                }),
                a = function() {
                    if (i) return !1;
                    var t = fxNow || createFxNow(),
                        n = Math.max(0, f.startTime + f.duration - t),
                        r = n / f.duration || 0,
                        s = 1 - r,
                        o = 0,
                        a = f.tweens.length;
                    for (; o < a; o++) f.tweens[o].run(s);
                    return u.notifyWith(e, [f, s, n]), s < 1 && a ? n : (u.resolveWith(e, [f]), !1)
                },
                f = u.promise({
                    elem: e,
                    props: jQuery.extend({}, t),
                    opts: jQuery.extend(!0, {
                        specialEasing: {}
                    }, n),
                    originalProperties: t,
                    originalOptions: n,
                    startTime: fxNow || createFxNow(),
                    duration: n.duration,
                    tweens: [],
                    createTween: function(t, n) {
                        var r = jQuery.Tween(e, f.opts, t, n, f.opts.specialEasing[t] || f.opts.easing);
                        return f.tweens.push(r), r
                    },
                    stop: function(t) {
                        var n = 0,
                            r = t ? f.tweens.length : 0;
                        if (i) return this;
                        i = !0;
                        for (; n < r; n++) f.tweens[n].run(1);
                        return t ? u.resolveWith(e, [f, t]) : u.rejectWith(e, [f, t]), this
                    }
                }),
                l = f.props;
            propFilter(l, f.opts.specialEasing);
            for (; s < o; s++) {
                r = animationPrefilters[s].call(f, e, l, f.opts);
                if (r) return r
            }
            return jQuery.map(l, createTween, f), jQuery.isFunction(f.opts.start) && f.opts.start.call(e, f), jQuery.fx.timer(jQuery.extend(a, {
                elem: e,
                anim: f,
                queue: f.opts.queue
            })), f.progress(f.opts.progress).done(f.opts.done, f.opts.complete).fail(f.opts.fail).always(f.opts.always)
        }

        function addToPrefiltersOrTransports(e) {
            return function(t, n) {
                typeof t != "string" && (n = t, t = "*");
                var r, i = 0,
                    s = t.toLowerCase().match(rnotwhite) || [];
                if (jQuery.isFunction(n))
                    while (r = s[i++]) r[0] === "+" ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
            }
        }

        function inspectPrefiltersOrTransports(e, t, n, r) {
            function o(u) {
                var a;
                return i[u] = !0, jQuery.each(e[u] || [], function(e, u) {
                    var f = u(t, n, r);
                    if (typeof f == "string" && !s && !i[f]) return t.dataTypes.unshift(f), o(f), !1;
                    if (s) return !(a = f)
                }), a
            }
            var i = {},
                s = e === transports;
            return o(t.dataTypes[0]) || !i["*"] && o("*")
        }

        function ajaxExtend(e, t) {
            var n, r, i = jQuery.ajaxSettings.flatOptions || {};
            for (n in t) t[n] !== undefined && ((i[n] ? e : r || (r = {}))[n] = t[n]);
            return r && jQuery.extend(!0, e, r), e
        }

        function ajaxHandleResponses(e, t, n) {
            var r, i, s, o, u = e.contents,
                a = e.dataTypes;
            while (a[0] === "*") a.shift(), r === undefined && (r = e.mimeType || t.getResponseHeader("Content-Type"));
            if (r)
                for (i in u)
                    if (u[i] && u[i].test(r)) {
                        a.unshift(i);
                        break
                    }
            if (a[0] in n) s = a[0];
            else {
                for (i in n) {
                    if (!a[0] || e.converters[i + " " + a[0]]) {
                        s = i;
                        break
                    }
                    o || (o = i)
                }
                s = s || o
            }
            if (s) return s !== a[0] && a.unshift(s), n[s]
        }

        function ajaxConvert(e, t, n, r) {
            var i, s, o, u, a, f = {},
                l = e.dataTypes.slice();
            if (l[1])
                for (o in e.converters) f[o.toLowerCase()] = e.converters[o];
            s = l.shift();
            while (s) {
                e.responseFields[s] && (n[e.responseFields[s]] = t), !a && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), a = s, s = l.shift();
                if (s)
                    if (s === "*") s = a;
                    else if (a !== "*" && a !== s) {
                    o = f[a + " " + s] || f["* " + s];
                    if (!o)
                        for (i in f) {
                            u = i.split(" ");
                            if (u[1] === s) {
                                o = f[a + " " + u[0]] || f["* " + u[0]];
                                if (o) {
                                    o === !0 ? o = f[i] : f[i] !== !0 && (s = u[0], l.unshift(u[1]));
                                    break
                                }
                            }
                        }
                    if (o !== !0)
                        if (o && e["throws"]) t = o(t);
                        else try {
                            t = o(t)
                        } catch (c) {
                            return {
                                state: "parsererror",
                                error: o ? c : "No conversion from " + a + " to " + s
                            }
                        }
                }
            }
            return {
                state: "success",
                data: t
            }
        }

        function buildParams(e, t, n, r) {
            var i;
            if (jQuery.isArray(t)) jQuery.each(t, function(t, i) {
                n || rbracket.test(e) ? r(e, i) : buildParams(e + "[" + (typeof i == "object" ? t : "") + "]", i, n, r)
            });
            else if (!n && jQuery.type(t) === "object")
                for (i in t) buildParams(e + "[" + i + "]", t[i], n, r);
            else r(e, t)
        }

        function getWindow(e) {
            return jQuery.isWindow(e) ? e : e.nodeType === 9 && e.defaultView
        }
        var arr = [],
            slice = arr.slice,
            concat = arr.concat,
            push = arr.push,
            indexOf = arr.indexOf,
            class2type = {},
            toString = class2type.toString,
            hasOwn = class2type.hasOwnProperty,
            trim = "".trim,
            support = {},
            document = window.document,
            version = "2.1.0",
            jQuery = function(e, t) {
                return new jQuery.fn.init(e, t)
            },
            rmsPrefix = /^-ms-/,
            rdashAlpha = /-([\da-z])/gi,
            fcamelCase = function(e, t) {
                return t.toUpperCase()
            };
        jQuery.fn = jQuery.prototype = {
            jquery: version,
            constructor: jQuery,
            selector: "",
            length: 0,
            toArray: function() {
                return slice.call(this)
            },
            get: function(e) {
                return e != null ? e < 0 ? this[e + this.length] : this[e] : slice.call(this)
            },
            pushStack: function(e) {
                var t = jQuery.merge(this.constructor(), e);
                return t.prevObject = this, t.context = this.context, t
            },
            each: function(e, t) {
                return jQuery.each(this, e, t)
            },
            map: function(e) {
                return this.pushStack(jQuery.map(this, function(t, n) {
                    return e.call(t, n, t)
                }))
            },
            slice: function() {
                return this.pushStack(slice.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(e) {
                var t = this.length,
                    n = +e + (e < 0 ? t : 0);
                return this.pushStack(n >= 0 && n < t ? [this[n]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: push,
            sort: arr.sort,
            splice: arr.splice
        }, jQuery.extend = jQuery.fn.extend = function() {
            var e, t, n, r, i, s, o = arguments[0] || {},
                u = 1,
                a = arguments.length,
                f = !1;
            typeof o == "boolean" && (f = o, o = arguments[u] || {}, u++), typeof o != "object" && !jQuery.isFunction(o) && (o = {}), u === a && (o = this, u--);
            for (; u < a; u++)
                if ((e = arguments[u]) != null)
                    for (t in e) {
                        n = o[t], r = e[t];
                        if (o === r) continue;
                        f && r && (jQuery.isPlainObject(r) || (i = jQuery.isArray(r))) ? (i ? (i = !1, s = n && jQuery.isArray(n) ? n : []) : s = n && jQuery.isPlainObject(n) ? n : {}, o[t] = jQuery.extend(f, s, r)) : r !== undefined && (o[t] = r)
                    }
                return o
        }, jQuery.extend({
            expando: "jQuery" + (version + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(e) {
                throw new Error(e)
            },
            noop: function() {},
            isFunction: function(e) {
                return jQuery.type(e) === "function"
            },
            isArray: Array.isArray,
            isWindow: function(e) {
                return e != null && e === e.window
            },
            isNumeric: function(e) {
                return e - parseFloat(e) >= 0
            },
            isPlainObject: function(e) {
                if (jQuery.type(e) !== "object" || e.nodeType || jQuery.isWindow(e)) return !1;
                try {
                    if (e.constructor && !hasOwn.call(e.constructor.prototype, "isPrototypeOf")) return !1
                } catch (t) {
                    return !1
                }
                return !0
            },
            isEmptyObject: function(e) {
                var t;
                for (t in e) return !1;
                return !0
            },
            type: function(e) {
                return e == null ? e + "" : typeof e == "object" || typeof e == "function" ? class2type[toString.call(e)] || "object" : typeof e
            },
            globalEval: function(code) {
                var script, indirect = eval;
                code = jQuery.trim(code), code && (code.indexOf("use strict") === 1 ? (script = document.createElement("script"), script.text = code, document.head.appendChild(script).parentNode.removeChild(script)) : indirect(code))
            },
            camelCase: function(e) {
                return e.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase)
            },
            nodeName: function(e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            },
            each: function(e, t, n) {
                var r, i = 0,
                    s = e.length,
                    o = isArraylike(e);
                if (n)
                    if (o)
                        for (; i < s; i++) {
                            r = t.apply(e[i], n);
                            if (r === !1) break
                        } else
                            for (i in e) {
                                r = t.apply(e[i], n);
                                if (r === !1) break
                            } else if (o)
                                for (; i < s; i++) {
                                    r = t.call(e[i], i, e[i]);
                                    if (r === !1) break
                                } else
                                    for (i in e) {
                                        r = t.call(e[i], i, e[i]);
                                        if (r === !1) break
                                    }
                            return e
            },
            trim: function(e) {
                return e == null ? "" : trim.call(e)
            },
            makeArray: function(e, t) {
                var n = t || [];
                return e != null && (isArraylike(Object(e)) ? jQuery.merge(n, typeof e == "string" ? [e] : e) : push.call(n, e)), n
            },
            inArray: function(e, t, n) {
                return t == null ? -1 : indexOf.call(t, e, n)
            },
            merge: function(e, t) {
                var n = +t.length,
                    r = 0,
                    i = e.length;
                for (; r < n; r++) e[i++] = t[r];
                return e.length = i, e
            },
            grep: function(e, t, n) {
                var r, i = [],
                    s = 0,
                    o = e.length,
                    u = !n;
                for (; s < o; s++) r = !t(e[s], s), r !== u && i.push(e[s]);
                return i
            },
            map: function(e, t, n) {
                var r, i = 0,
                    s = e.length,
                    o = isArraylike(e),
                    u = [];
                if (o)
                    for (; i < s; i++) r = t(e[i], i, n), r != null && u.push(r);
                else
                    for (i in e) r = t(e[i], i, n), r != null && u.push(r);
                return concat.apply([], u)
            },
            guid: 1,
            proxy: function(e, t) {
                var n, r, i;
                return typeof t == "string" && (n = e[t], t = e, e = n), jQuery.isFunction(e) ? (r = slice.call(arguments, 2), i = function() {
                    return e.apply(t || this, r.concat(slice.call(arguments)))
                }, i.guid = e.guid = e.guid || jQuery.guid++, i) : undefined
            },
            now: Date.now,
            support: support
        }), jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
            class2type["[object " + t + "]"] = t.toLowerCase()
        });
        var Sizzle = function(e) {
            function rt(e, t, r, i) {
                var s, o, u, a, f, h, v, m, w, E;
                (t ? t.ownerDocument || t : b) !== c && l(t), t = t || c, r = r || [];
                if (!e || typeof e != "string") return r;
                if ((a = t.nodeType) !== 1 && a !== 9) return [];
                if (p && !i) {
                    if (s = G.exec(e))
                        if (u = s[1]) {
                            if (a === 9) {
                                o = t.getElementById(u);
                                if (!o || !o.parentNode) return r;
                                if (o.id === u) return r.push(o), r
                            } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(u)) && g(t, o) && o.id === u) return r.push(o), r
                        } else {
                            if (s[2]) return _.apply(r, t.getElementsByTagName(e)), r;
                            if ((u = s[3]) && n.getElementsByClassName && t.getElementsByClassName) return _.apply(r, t.getElementsByClassName(u)), r
                        }
                    if (n.qsa && (!d || !d.test(e))) {
                        m = v = y, w = t, E = a === 9 && e;
                        if (a === 1 && t.nodeName.toLowerCase() !== "object") {
                            h = dt(e), (v = t.getAttribute("id")) ? m = v.replace(Z, "\\$&") : t.setAttribute("id", m), m = "[id='" + m + "'] ", f = h.length;
                            while (f--) h[f] = m + vt(h[f]);
                            w = Y.test(e) && ht(t.parentNode) || t, E = h.join(",")
                        }
                        if (E) try {
                            return _.apply(r, w.querySelectorAll(E)), r
                        } catch (S) {} finally {
                            v || t.removeAttribute("id")
                        }
                    }
                }
                return xt(e.replace(R, "$1"), t, r, i)
            }

            function it() {
                function t(n, i) {
                    return e.push(n + " ") > r.cacheLength && delete t[e.shift()], t[n + " "] = i
                }
                var e = [];
                return t
            }

            function st(e) {
                return e[y] = !0, e
            }

            function ot(e) {
                var t = c.createElement("div");
                try {
                    return !!e(t)
                } catch (n) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t), t = null
                }
            }

            function ut(e, t) {
                var n = e.split("|"),
                    i = e.length;
                while (i--) r.attrHandle[n[i]] = t
            }

            function at(e, t) {
                var n = t && e,
                    r = n && e.nodeType === 1 && t.nodeType === 1 && (~t.sourceIndex || k) - (~e.sourceIndex || k);
                if (r) return r;
                if (n)
                    while (n = n.nextSibling)
                        if (n === t) return -1;
                return e ? 1 : -1
            }

            function ft(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return n === "input" && t.type === e
                }
            }

            function lt(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return (n === "input" || n === "button") && t.type === e
                }
            }

            function ct(e) {
                return st(function(t) {
                    return t = +t, st(function(n, r) {
                        var i, s = e([], n.length, t),
                            o = s.length;
                        while (o--) n[i = s[o]] && (n[i] = !(r[i] = n[i]))
                    })
                })
            }

            function ht(e) {
                return e && typeof e.getElementsByTagName !== C && e
            }

            function pt() {}

            function dt(e, t) {
                var n, i, s, o, u, a, f, l = x[e + " "];
                if (l) return t ? 0 : l.slice(0);
                u = e, a = [], f = r.preFilter;
                while (u) {
                    if (!n || (i = U.exec(u))) i && (u = u.slice(i[0].length) || u), a.push(s = []);
                    n = !1;
                    if (i = z.exec(u)) n = i.shift(), s.push({
                        value: n,
                        type: i[0].replace(R, " ")
                    }), u = u.slice(n.length);
                    for (o in r.filter)(i = $[o].exec(u)) && (!f[o] || (i = f[o](i))) && (n = i.shift(), s.push({
                        value: n,
                        type: o,
                        matches: i
                    }), u = u.slice(n.length));
                    if (!n) break
                }
                return t ? u.length : u ? rt.error(e) : x(e, a).slice(0)
            }

            function vt(e) {
                var t = 0,
                    n = e.length,
                    r = "";
                for (; t < n; t++) r += e[t].value;
                return r
            }

            function mt(e, t, n) {
                var r = t.dir,
                    i = n && r === "parentNode",
                    s = E++;
                return t.first ? function(t, n, s) {
                    while (t = t[r])
                        if (t.nodeType === 1 || i) return e(t, n, s)
                } : function(t, n, o) {
                    var u, a, f = [w, s];
                    if (o) {
                        while (t = t[r])
                            if (t.nodeType === 1 || i)
                                if (e(t, n, o)) return !0
                    } else
                        while (t = t[r])
                            if (t.nodeType === 1 || i) {
                                a = t[y] || (t[y] = {});
                                if ((u = a[r]) && u[0] === w && u[1] === s) return f[2] = u[2];
                                a[r] = f;
                                if (f[2] = e(t, n, o)) return !0
                            }
                }
            }

            function gt(e) {
                return e.length > 1 ? function(t, n, r) {
                    var i = e.length;
                    while (i--)
                        if (!e[i](t, n, r)) return !1;
                    return !0
                } : e[0]
            }

            function yt(e, t, n, r, i) {
                var s, o = [],
                    u = 0,
                    a = e.length,
                    f = t != null;
                for (; u < a; u++)
                    if (s = e[u])
                        if (!n || n(s, r, i)) o.push(s), f && t.push(u);
                return o
            }

            function bt(e, t, n, r, i, s) {
                return r && !r[y] && (r = bt(r)), i && !i[y] && (i = bt(i, s)), st(function(s, o, u, a) {
                    var f, l, c, h = [],
                        p = [],
                        d = o.length,
                        v = s || St(t || "*", u.nodeType ? [u] : u, []),
                        m = e && (s || !t) ? yt(v, h, e, u, a) : v,
                        g = n ? i || (s ? e : d || r) ? [] : o : m;
                    n && n(m, g, u, a);
                    if (r) {
                        f = yt(g, p), r(f, [], u, a), l = f.length;
                        while (l--)
                            if (c = f[l]) g[p[l]] = !(m[p[l]] = c)
                    }
                    if (s) {
                        if (i || e) {
                            if (i) {
                                f = [], l = g.length;
                                while (l--)(c = g[l]) && f.push(m[l] = c);
                                i(null, g = [], f, a)
                            }
                            l = g.length;
                            while (l--)(c = g[l]) && (f = i ? P.call(s, c) : h[l]) > -1 && (s[f] = !(o[f] = c))
                        }
                    } else g = yt(g === o ? g.splice(d, g.length) : g), i ? i(null, o, g, a) : _.apply(o, g)
                })
            }

            function wt(e) {
                var t, n, i, s = e.length,
                    o = r.relative[e[0].type],
                    a = o || r.relative[" "],
                    f = o ? 1 : 0,
                    l = mt(function(e) {
                        return e === t
                    }, a, !0),
                    c = mt(function(e) {
                        return P.call(t, e) > -1
                    }, a, !0),
                    h = [function(e, n, r) {
                        return !o && (r || n !== u) || ((t = n).nodeType ? l(e, n, r) : c(e, n, r))
                    }];
                for (; f < s; f++)
                    if (n = r.relative[e[f].type]) h = [mt(gt(h), n)];
                    else {
                        n = r.filter[e[f].type].apply(null, e[f].matches);
                        if (n[y]) {
                            i = ++f;
                            for (; i < s; i++)
                                if (r.relative[e[i].type]) break;
                            return bt(f > 1 && gt(h), f > 1 && vt(e.slice(0, f - 1).concat({
                                value: e[f - 2].type === " " ? "*" : ""
                            })).replace(R, "$1"), n, f < i && wt(e.slice(f, i)), i < s && wt(e = e.slice(i)), i < s && vt(e))
                        }
                        h.push(n)
                    }
                return gt(h)
            }

            function Et(e, t) {
                var n = t.length > 0,
                    i = e.length > 0,
                    s = function(s, o, a, f, l) {
                        var h, p, d, v = 0,
                            m = "0",
                            g = s && [],
                            y = [],
                            b = u,
                            E = s || i && r.find.TAG("*", l),
                            S = w += b == null ? 1 : Math.random() || .1,
                            x = E.length;
                        l && (u = o !== c && o);
                        for (; m !== x && (h = E[m]) != null; m++) {
                            if (i && h) {
                                p = 0;
                                while (d = e[p++])
                                    if (d(h, o, a)) {
                                        f.push(h);
                                        break
                                    }
                                l && (w = S)
                            }
                            n && ((h = !d && h) && v--, s && g.push(h))
                        }
                        v += m;
                        if (n && m !== v) {
                            p = 0;
                            while (d = t[p++]) d(g, y, o, a);
                            if (s) {
                                if (v > 0)
                                    while (m--) !g[m] && !y[m] && (y[m] = O.call(f));
                                y = yt(y)
                            }
                            _.apply(f, y), l && !s && y.length > 0 && v + t.length > 1 && rt.uniqueSort(f)
                        }
                        return l && (w = S, u = b), g
                    };
                return n ? st(s) : s
            }

            function St(e, t, n) {
                var r = 0,
                    i = t.length;
                for (; r < i; r++) rt(e, t[r], n);
                return n
            }

            function xt(e, t, i, s) {
                var u, a, f, l, c, h = dt(e);
                if (!s && h.length === 1) {
                    a = h[0] = h[0].slice(0);
                    if (a.length > 2 && (f = a[0]).type === "ID" && n.getById && t.nodeType === 9 && p && r.relative[a[1].type]) {
                        t = (r.find.ID(f.matches[0].replace(et, tt), t) || [])[0];
                        if (!t) return i;
                        e = e.slice(a.shift().value.length)
                    }
                    u = $.needsContext.test(e) ? 0 : a.length;
                    while (u--) {
                        f = a[u];
                        if (r.relative[l = f.type]) break;
                        if (c = r.find[l])
                            if (s = c(f.matches[0].replace(et, tt), Y.test(a[0].type) && ht(t.parentNode) || t)) {
                                a.splice(u, 1), e = s.length && vt(a);
                                if (!e) return _.apply(i, s), i;
                                break
                            }
                    }
                }
                return o(e, h)(s, t, !p, i, Y.test(e) && ht(t.parentNode) || t), i
            }
            var t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y = "sizzle" + -(new Date),
                b = e.document,
                w = 0,
                E = 0,
                S = it(),
                x = it(),
                T = it(),
                N = function(e, t) {
                    return e === t && (f = !0), 0
                },
                C = typeof undefined,
                k = 1 << 31,
                L = {}.hasOwnProperty,
                A = [],
                O = A.pop,
                M = A.push,
                _ = A.push,
                D = A.slice,
                P = A.indexOf || function(e) {
                    var t = 0,
                        n = this.length;
                    for (; t < n; t++)
                        if (this[t] === e) return t;
                    return -1
                },
                H = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                B = "[\\x20\\t\\r\\n\\f]",
                j = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                F = j.replace("w", "w#"),
                I = "\\[" + B + "*(" + j + ")" + B + "*(?:([*^$|!~]?=)" + B + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + F + ")|)|)" + B + "*\\]",
                q = ":(" + j + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + I.replace(3, 8) + ")*)|.*)\\)|)",
                R = new RegExp("^" + B + "+|((?:^|[^\\\\])(?:\\\\.)*)" + B + "+$", "g"),
                U = new RegExp("^" + B + "*," + B + "*"),
                z = new RegExp("^" + B + "*([>+~]|" + B + ")" + B + "*"),
                W = new RegExp("=" + B + "*([^\\]'\"]*?)" + B + "*\\]", "g"),
                X = new RegExp(q),
                V = new RegExp("^" + F + "$"),
                $ = {
                    ID: new RegExp("^#(" + j + ")"),
                    CLASS: new RegExp("^\\.(" + j + ")"),
                    TAG: new RegExp("^(" + j.replace("w", "w*") + ")"),
                    ATTR: new RegExp("^" + I),
                    PSEUDO: new RegExp("^" + q),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + B + "*(even|odd|(([+-]|)(\\d*)n|)" + B + "*(?:([+-]|)" + B + "*(\\d+)|))" + B + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + H + ")$", "i"),
                    needsContext: new RegExp("^" + B + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + B + "*((?:-\\d)?\\d*)" + B + "*\\)|)(?=[^-]|$)", "i")
                },
                J = /^(?:input|select|textarea|button)$/i,
                K = /^h\d$/i,
                Q = /^[^{]+\{\s*\[native \w/,
                G = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                Y = /[+~]/,
                Z = /'|\\/g,
                et = new RegExp("\\\\([\\da-f]{1,6}" + B + "?|(" + B + ")|.)", "ig"),
                tt = function(e, t, n) {
                    var r = "0x" + t - 65536;
                    return r !== r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, r & 1023 | 56320)
                };
            try {
                _.apply(A = D.call(b.childNodes), b.childNodes), A[b.childNodes.length].nodeType
            } catch (nt) {
                _ = {
                    apply: A.length ? function(e, t) {
                        M.apply(e, D.call(t))
                    } : function(e, t) {
                        var n = e.length,
                            r = 0;
                        while (e[n++] = t[r++]);
                        e.length = n - 1
                    }
                }
            }
            n = rt.support = {}, s = rt.isXML = function(e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return t ? t.nodeName !== "HTML" : !1
            }, l = rt.setDocument = function(e) {
                var t, i = e ? e.ownerDocument || e : b,
                    o = i.defaultView;
                if (i === c || i.nodeType !== 9 || !i.documentElement) return c;
                c = i, h = i.documentElement, p = !s(i), o && o !== o.top && (o.addEventListener ? o.addEventListener("unload", function() {
                    l()
                }, !1) : o.attachEvent && o.attachEvent("onunload", function() {
                    l()
                })), n.attributes = ot(function(e) {
                    return e.className = "i", !e.getAttribute("className")
                }), n.getElementsByTagName = ot(function(e) {
                    return e.appendChild(i.createComment("")), !e.getElementsByTagName("*").length
                }), n.getElementsByClassName = Q.test(i.getElementsByClassName) && ot(function(e) {
                    return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", e.getElementsByClassName("i").length === 2
                }), n.getById = ot(function(e) {
                    return h.appendChild(e).id = y, !i.getElementsByName || !i.getElementsByName(y).length
                }), n.getById ? (r.find.ID = function(e, t) {
                    if (typeof t.getElementById !== C && p) {
                        var n = t.getElementById(e);
                        return n && n.parentNode ? [n] : []
                    }
                }, r.filter.ID = function(e) {
                    var t = e.replace(et, tt);
                    return function(e) {
                        return e.getAttribute("id") === t
                    }
                }) : (delete r.find.ID, r.filter.ID = function(e) {
                    var t = e.replace(et, tt);
                    return function(e) {
                        var n = typeof e.getAttributeNode !== C && e.getAttributeNode("id");
                        return n && n.value === t
                    }
                }), r.find.TAG = n.getElementsByTagName ? function(e, t) {
                    if (typeof t.getElementsByTagName !== C) return t.getElementsByTagName(e)
                } : function(e, t) {
                    var n, r = [],
                        i = 0,
                        s = t.getElementsByTagName(e);
                    if (e === "*") {
                        while (n = s[i++]) n.nodeType === 1 && r.push(n);
                        return r
                    }
                    return s
                }, r.find.CLASS = n.getElementsByClassName && function(e, t) {
                    if (typeof t.getElementsByClassName !== C && p) return t.getElementsByClassName(e)
                }, v = [], d = [];
                if (n.qsa = Q.test(i.querySelectorAll)) ot(function(e) {
                    e.innerHTML = "<select t=''><option selected=''></option></select>", e.querySelectorAll("[t^='']").length && d.push("[*^$]=" + B + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || d.push("\\[" + B + "*(?:value|" + H + ")"), e.querySelectorAll(":checked").length || d.push(":checked")
                }), ot(function(e) {
                    var t = i.createElement("input");
                    t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && d.push("name" + B + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || d.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), d.push(",.*:")
                });
                return (n.matchesSelector = Q.test(m = h.webkitMatchesSelector || h.mozMatchesSelector || h.oMatchesSelector || h.msMatchesSelector)) && ot(function(e) {
                    n.disconnectedMatch = m.call(e, "div"), m.call(e, "[s!='']:x"), v.push("!=", q)
                }), d = d.length && new RegExp(d.join("|")), v = v.length && new RegExp(v.join("|")), t = Q.test(h.compareDocumentPosition), g = t || Q.test(h.contains) ? function(e, t) {
                    var n = e.nodeType === 9 ? e.documentElement : e,
                        r = t && t.parentNode;
                    return e === r || !!r && r.nodeType === 1 && !!(n.contains ? n.contains(r) : e.compareDocumentPosition && e.compareDocumentPosition(r) & 16)
                } : function(e, t) {
                    if (t)
                        while (t = t.parentNode)
                            if (t === e) return !0;
                    return !1
                }, N = t ? function(e, t) {
                    if (e === t) return f = !0, 0;
                    var r = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return r ? r : (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, r & 1 || !n.sortDetached && t.compareDocumentPosition(e) === r ? e === i || e.ownerDocument === b && g(b, e) ? -1 : t === i || t.ownerDocument === b && g(b, t) ? 1 : a ? P.call(a, e) - P.call(a, t) : 0 : r & 4 ? -1 : 1)
                } : function(e, t) {
                    if (e === t) return f = !0, 0;
                    var n, r = 0,
                        s = e.parentNode,
                        o = t.parentNode,
                        u = [e],
                        l = [t];
                    if (!s || !o) return e === i ? -1 : t === i ? 1 : s ? -1 : o ? 1 : a ? P.call(a, e) - P.call(a, t) : 0;
                    if (s === o) return at(e, t);
                    n = e;
                    while (n = n.parentNode) u.unshift(n);
                    n = t;
                    while (n = n.parentNode) l.unshift(n);
                    while (u[r] === l[r]) r++;
                    return r ? at(u[r], l[r]) : u[r] === b ? -1 : l[r] === b ? 1 : 0
                }, i
            }, rt.matches = function(e, t) {
                return rt(e, null, null, t)
            }, rt.matchesSelector = function(e, t) {
                (e.ownerDocument || e) !== c && l(e), t = t.replace(W, "='$1']");
                if (n.matchesSelector && p && (!v || !v.test(t)) && (!d || !d.test(t))) try {
                    var r = m.call(e, t);
                    if (r || n.disconnectedMatch || e.document && e.document.nodeType !== 11) return r
                } catch (i) {}
                return rt(t, c, null, [e]).length > 0
            }, rt.contains = function(e, t) {
                return (e.ownerDocument || e) !== c && l(e), g(e, t)
            }, rt.attr = function(e, t) {
                (e.ownerDocument || e) !== c && l(e);
                var i = r.attrHandle[t.toLowerCase()],
                    s = i && L.call(r.attrHandle, t.toLowerCase()) ? i(e, t, !p) : undefined;
                return s !== undefined ? s : n.attributes || !p ? e.getAttribute(t) : (s = e.getAttributeNode(t)) && s.specified ? s.value : null
            }, rt.error = function(e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }, rt.uniqueSort = function(e) {
                var t, r = [],
                    i = 0,
                    s = 0;
                f = !n.detectDuplicates, a = !n.sortStable && e.slice(0), e.sort(N);
                if (f) {
                    while (t = e[s++]) t === e[s] && (i = r.push(s));
                    while (i--) e.splice(r[i], 1)
                }
                return a = null, e
            }, i = rt.getText = function(e) {
                var t, n = "",
                    r = 0,
                    s = e.nodeType;
                if (!s)
                    while (t = e[r++]) n += i(t);
                else if (s === 1 || s === 9 || s === 11) {
                    if (typeof e.textContent == "string") return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) n += i(e)
                } else if (s === 3 || s === 4) return e.nodeValue;
                return n
            }, r = rt.selectors = {
                cacheLength: 50,
                createPseudo: st,
                match: $,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(e) {
                        return e[1] = e[1].replace(et, tt), e[3] = (e[4] || e[5] || "").replace(et, tt), e[2] === "~=" && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    },
                    CHILD: function(e) {
                        return e[1] = e[1].toLowerCase(), e[1].slice(0, 3) === "nth" ? (e[3] || rt.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * (e[3] === "even" || e[3] === "odd")), e[5] = +(e[7] + e[8] || e[3] === "odd")) : e[3] && rt.error(e[0]), e
                    },
                    PSEUDO: function(e) {
                        var t, n = !e[5] && e[2];
                        return $.CHILD.test(e[0]) ? null : (e[3] && e[4] !== undefined ? e[2] = e[4] : n && X.test(n) && (t = dt(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(e) {
                        var t = e.replace(et, tt).toLowerCase();
                        return e === "*" ? function() {
                            return !0
                        } : function(e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    },
                    CLASS: function(e) {
                        var t = S[e + " "];
                        return t || (t = new RegExp("(^|" + B + ")" + e + "(" + B + "|$)")) && S(e, function(e) {
                            return t.test(typeof e.className == "string" && e.className || typeof e.getAttribute !== C && e.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(e, t, n) {
                        return function(r) {
                            var i = rt.attr(r, e);
                            return i == null ? t === "!=" : t ? (i += "", t === "=" ? i === n : t === "!=" ? i !== n : t === "^=" ? n && i.indexOf(n) === 0 : t === "*=" ? n && i.indexOf(n) > -1 : t === "$=" ? n && i.slice(-n.length) === n : t === "~=" ? (" " + i + " ").indexOf(n) > -1 : t === "|=" ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
                        }
                    },
                    CHILD: function(e, t, n, r, i) {
                        var s = e.slice(0, 3) !== "nth",
                            o = e.slice(-4) !== "last",
                            u = t === "of-type";
                        return r === 1 && i === 0 ? function(e) {
                            return !!e.parentNode
                        } : function(t, n, a) {
                            var f, l, c, h, p, d, v = s !== o ? "nextSibling" : "previousSibling",
                                m = t.parentNode,
                                g = u && t.nodeName.toLowerCase(),
                                b = !a && !u;
                            if (m) {
                                if (s) {
                                    while (v) {
                                        c = t;
                                        while (c = c[v])
                                            if (u ? c.nodeName.toLowerCase() === g : c.nodeType === 1) return !1;
                                        d = v = e === "only" && !d && "nextSibling"
                                    }
                                    return !0
                                }
                                d = [o ? m.firstChild : m.lastChild];
                                if (o && b) {
                                    l = m[y] || (m[y] = {}), f = l[e] || [], p = f[0] === w && f[1], h = f[0] === w && f[2], c = p && m.childNodes[p];
                                    while (c = ++p && c && c[v] || (h = p = 0) || d.pop())
                                        if (c.nodeType === 1 && ++h && c === t) {
                                            l[e] = [w, p, h];
                                            break
                                        }
                                } else if (b && (f = (t[y] || (t[y] = {}))[e]) && f[0] === w) h = f[1];
                                else
                                    while (c = ++p && c && c[v] || (h = p = 0) || d.pop())
                                        if ((u ? c.nodeName.toLowerCase() === g : c.nodeType === 1) && ++h) {
                                            b && ((c[y] || (c[y] = {}))[e] = [w, h]);
                                            if (c === t) break
                                        }
                                return h -= i, h === r || h % r === 0 && h / r >= 0
                            }
                        }
                    },
                    PSEUDO: function(e, t) {
                        var n, i = r.pseudos[e] || r.setFilters[e.toLowerCase()] || rt.error("unsupported pseudo: " + e);
                        return i[y] ? i(t) : i.length > 1 ? (n = [e, e, "", t], r.setFilters.hasOwnProperty(e.toLowerCase()) ? st(function(e, n) {
                            var r, s = i(e, t),
                                o = s.length;
                            while (o--) r = P.call(e, s[o]), e[r] = !(n[r] = s[o])
                        }) : function(e) {
                            return i(e, 0, n)
                        }) : i
                    }
                },
                pseudos: {
                    not: st(function(e) {
                        var t = [],
                            n = [],
                            r = o(e.replace(R, "$1"));
                        return r[y] ? st(function(e, t, n, i) {
                            var s, o = r(e, null, i, []),
                                u = e.length;
                            while (u--)
                                if (s = o[u]) e[u] = !(t[u] = s)
                        }) : function(e, i, s) {
                            return t[0] = e, r(t, null, s, n), !n.pop()
                        }
                    }),
                    has: st(function(e) {
                        return function(t) {
                            return rt(e, t).length > 0
                        }
                    }),
                    contains: st(function(e) {
                        return function(t) {
                            return (t.textContent || t.innerText || i(t)).indexOf(e) > -1
                        }
                    }),
                    lang: st(function(e) {
                        return V.test(e || "") || rt.error("unsupported lang: " + e), e = e.replace(et, tt).toLowerCase(),
                            function(t) {
                                var n;
                                do
                                    if (n = p ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || n.indexOf(e + "-") === 0;
                                while ((t = t.parentNode) && t.nodeType === 1);
                                return !1
                            }
                    }),
                    target: function(t) {
                        var n = e.location && e.location.hash;
                        return n && n.slice(1) === t.id
                    },
                    root: function(e) {
                        return e === h
                    },
                    focus: function(e) {
                        return e === c.activeElement && (!c.hasFocus || c.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function(e) {
                        return e.disabled === !1
                    },
                    disabled: function(e) {
                        return e.disabled === !0
                    },
                    checked: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return t === "input" && !!e.checked || t === "option" && !!e.selected
                    },
                    selected: function(e) {
                        return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                    },
                    empty: function(e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function(e) {
                        return !r.pseudos.empty(e)
                    },
                    header: function(e) {
                        return K.test(e.nodeName)
                    },
                    input: function(e) {
                        return J.test(e.nodeName)
                    },
                    button: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return t === "input" && e.type === "button" || t === "button"
                    },
                    text: function(e) {
                        var t;
                        return e.nodeName.toLowerCase() === "input" && e.type === "text" && ((t = e.getAttribute("type")) == null || t.toLowerCase() === "text")
                    },
                    first: ct(function() {
                        return [0]
                    }),
                    last: ct(function(e, t) {
                        return [t - 1]
                    }),
                    eq: ct(function(e, t, n) {
                        return [n < 0 ? n + t : n]
                    }),
                    even: ct(function(e, t) {
                        var n = 0;
                        for (; n < t; n += 2) e.push(n);
                        return e
                    }),
                    odd: ct(function(e, t) {
                        var n = 1;
                        for (; n < t; n += 2) e.push(n);
                        return e
                    }),
                    lt: ct(function(e, t, n) {
                        var r = n < 0 ? n + t : n;
                        for (; --r >= 0;) e.push(r);
                        return e
                    }),
                    gt: ct(function(e, t, n) {
                        var r = n < 0 ? n + t : n;
                        for (; ++r < t;) e.push(r);
                        return e
                    })
                }
            }, r.pseudos.nth = r.pseudos.eq;
            for (t in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) r.pseudos[t] = ft(t);
            for (t in {
                    submit: !0,
                    reset: !0
                }) r.pseudos[t] = lt(t);
            return pt.prototype = r.filters = r.pseudos, r.setFilters = new pt, o = rt.compile = function(e, t) {
                var n, r = [],
                    i = [],
                    s = T[e + " "];
                if (!s) {
                    t || (t = dt(e)), n = t.length;
                    while (n--) s = wt(t[n]), s[y] ? r.push(s) : i.push(s);
                    s = T(e, Et(i, r))
                }
                return s
            }, n.sortStable = y.split("").sort(N).join("") === y, n.detectDuplicates = !!f, l(), n.sortDetached = ot(function(e) {
                return e.compareDocumentPosition(c.createElement("div")) & 1
            }), ot(function(e) {
                return e.innerHTML = "<a href='#'></a>", e.firstChild.getAttribute("href") === "#"
            }) || ut("type|href|height|width", function(e, t, n) {
                if (!n) return e.getAttribute(t, t.toLowerCase() === "type" ? 1 : 2)
            }), (!n.attributes || !ot(function(e) {
                return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), e.firstChild.getAttribute("value") === ""
            })) && ut("value", function(e, t, n) {
                if (!n && e.nodeName.toLowerCase() === "input") return e.defaultValue
            }), ot(function(e) {
                return e.getAttribute("disabled") == null
            }) || ut(H, function(e, t, n) {
                var r;
                if (!n) return e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
            }), rt
        }(window);
        jQuery.find = Sizzle, jQuery.expr = Sizzle.selectors, jQuery.expr[":"] = jQuery.expr.pseudos, jQuery.unique = Sizzle.uniqueSort, jQuery.text = Sizzle.getText, jQuery.isXMLDoc = Sizzle.isXML, jQuery.contains = Sizzle.contains;
        var rneedsContext = jQuery.expr.match.needsContext,
            rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            risSimple = /^.[^:#\[\.,]*$/;
        jQuery.filter = function(e, t, n) {
            var r = t[0];
            return n && (e = ":not(" + e + ")"), t.length === 1 && r.nodeType === 1 ? jQuery.find.matchesSelector(r, e) ? [r] : [] : jQuery.find.matches(e, jQuery.grep(t, function(e) {
                return e.nodeType === 1
            }))
        }, jQuery.fn.extend({
            find: function(e) {
                var t, n = this.length,
                    r = [],
                    i = this;
                if (typeof e != "string") return this.pushStack(jQuery(e).filter(function() {
                    for (t = 0; t < n; t++)
                        if (jQuery.contains(i[t], this)) return !0
                }));
                for (t = 0; t < n; t++) jQuery.find(e, i[t], r);
                return r = this.pushStack(n > 1 ? jQuery.unique(r) : r), r.selector = this.selector ? this.selector + " " + e : e, r
            },
            filter: function(e) {
                return this.pushStack(winnow(this, e || [], !1))
            },
            not: function(e) {
                return this.pushStack(winnow(this, e || [], !0))
            },
            is: function(e) {
                return !!winnow(this, typeof e == "string" && rneedsContext.test(e) ? jQuery(e) : e || [], !1).length
            }
        });
        var rootjQuery, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
            init = jQuery.fn.init = function(e, t) {
                var n, r;
                if (!e) return this;
                if (typeof e == "string") {
                    e[0] === "<" && e[e.length - 1] === ">" && e.length >= 3 ? n = [null, e, null] : n = rquickExpr.exec(e);
                    if (n && (n[1] || !t)) {
                        if (n[1]) {
                            t = t instanceof jQuery ? t[0] : t, jQuery.merge(this, jQuery.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : document, !0));
                            if (rsingleTag.test(n[1]) && jQuery.isPlainObject(t))
                                for (n in t) jQuery.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]);
                            return this
                        }
                        return r = document.getElementById(n[2]), r && r.parentNode && (this.length = 1, this[0] = r), this.context = document, this.selector = e, this
                    }
                    return !t || t.jquery ? (t || rootjQuery).find(e) : this.constructor(t).find(e)
                }
                return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : jQuery.isFunction(e) ? typeof rootjQuery.ready != "undefined" ? rootjQuery.ready(e) : e(jQuery) : (e.selector !== undefined && (this.selector = e.selector, this.context = e.context), jQuery.makeArray(e, this))
            };
        init.prototype = jQuery.fn, rootjQuery = jQuery(document);
        var rparentsprev = /^(?:parents|prev(?:Until|All))/,
            guaranteedUnique = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        jQuery.extend({
            dir: function(e, t, n) {
                var r = [],
                    i = n !== undefined;
                while ((e = e[t]) && e.nodeType !== 9)
                    if (e.nodeType === 1) {
                        if (i && jQuery(e).is(n)) break;
                        r.push(e)
                    }
                return r
            },
            sibling: function(e, t) {
                var n = [];
                for (; e; e = e.nextSibling) e.nodeType === 1 && e !== t && n.push(e);
                return n
            }
        }), jQuery.fn.extend({
            has: function(e) {
                var t = jQuery(e, this),
                    n = t.length;
                return this.filter(function() {
                    var e = 0;
                    for (; e < n; e++)
                        if (jQuery.contains(this, t[e])) return !0
                })
            },
            closest: function(e, t) {
                var n, r = 0,
                    i = this.length,
                    s = [],
                    o = rneedsContext.test(e) || typeof e != "string" ? jQuery(e, t || this.context) : 0;
                for (; r < i; r++)
                    for (n = this[r]; n && n !== t; n = n.parentNode)
                        if (n.nodeType < 11 && (o ? o.index(n) > -1 : n.nodeType === 1 && jQuery.find.matchesSelector(n, e))) {
                            s.push(n);
                            break
                        }
                return this.pushStack(s.length > 1 ? jQuery.unique(s) : s)
            },
            index: function(e) {
                return e ? typeof e == "string" ? indexOf.call(jQuery(e), this[0]) : indexOf.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                return this.pushStack(jQuery.unique(jQuery.merge(this.get(), jQuery(e, t))))
            },
            addBack: function(e) {
                return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
            }
        }), jQuery.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && t.nodeType !== 11 ? t : null
            },
            parents: function(e) {
                return jQuery.dir(e, "parentNode")
            },
            parentsUntil: function(e, t, n) {
                return jQuery.dir(e, "parentNode", n)
            },
            next: function(e) {
                return sibling(e, "nextSibling")
            },
            prev: function(e) {
                return sibling(e, "previousSibling")
            },
            nextAll: function(e) {
                return jQuery.dir(e, "nextSibling")
            },
            prevAll: function(e) {
                return jQuery.dir(e, "previousSibling")
            },
            nextUntil: function(e, t, n) {
                return jQuery.dir(e, "nextSibling", n)
            },
            prevUntil: function(e, t, n) {
                return jQuery.dir(e, "previousSibling", n)
            },
            siblings: function(e) {
                return jQuery.sibling((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return jQuery.sibling(e.firstChild)
            },
            contents: function(e) {
                return e.contentDocument || jQuery.merge([], e.childNodes)
            }
        }, function(e, t) {
            jQuery.fn[e] = function(n, r) {
                var i = jQuery.map(this, t, n);
                return e.slice(-5) !== "Until" && (r = n), r && typeof r == "string" && (i = jQuery.filter(r, i)), this.length > 1 && (guaranteedUnique[e] || jQuery.unique(i), rparentsprev.test(e) && i.reverse()), this.pushStack(i)
            }
        });
        var rnotwhite = /\S+/g,
            optionsCache = {};
        jQuery.Callbacks = function(e) {
            e = typeof e == "string" ? optionsCache[e] || createOptions(e) : jQuery.extend({}, e);
            var t, n, r, i, s, o, u = [],
                a = !e.once && [],
                f = function(c) {
                    t = e.memory && c, n = !0, o = i || 0, i = 0, s = u.length, r = !0;
                    for (; u && o < s; o++)
                        if (u[o].apply(c[0], c[1]) === !1 && e.stopOnFalse) {
                            t = !1;
                            break
                        }
                    r = !1, u && (a ? a.length && f(a.shift()) : t ? u = [] : l.disable())
                },
                l = {
                    add: function() {
                        if (u) {
                            var n = u.length;
                            (function o(t) {
                                jQuery.each(t, function(t, n) {
                                    var r = jQuery.type(n);
                                    r === "function" ? (!e.unique || !l.has(n)) && u.push(n) : n && n.length && r !== "string" && o(n)
                                })
                            })(arguments), r ? s = u.length : t && (i = n, f(t))
                        }
                        return this
                    },
                    remove: function() {
                        return u && jQuery.each(arguments, function(e, t) {
                            var n;
                            while ((n = jQuery.inArray(t, u, n)) > -1) u.splice(n, 1), r && (n <= s && s--, n <= o && o--)
                        }), this
                    },
                    has: function(e) {
                        return e ? jQuery.inArray(e, u) > -1 : !!u && !!u.length
                    },
                    empty: function() {
                        return u = [], s = 0, this
                    },
                    disable: function() {
                        return u = a = t = undefined, this
                    },
                    disabled: function() {
                        return !u
                    },
                    lock: function() {
                        return a = undefined, t || l.disable(), this
                    },
                    locked: function() {
                        return !a
                    },
                    fireWith: function(e, t) {
                        return u && (!n || a) && (t = t || [], t = [e, t.slice ? t.slice() : t], r ? a.push(t) : f(t)), this
                    },
                    fire: function() {
                        return l.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!n
                    }
                };
            return l
        }, jQuery.extend({
            Deferred: function(e) {
                var t = [
                        ["resolve", "done", jQuery.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", jQuery.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", jQuery.Callbacks("memory")]
                    ],
                    n = "pending",
                    r = {
                        state: function() {
                            return n
                        },
                        always: function() {
                            return i.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var e = arguments;
                            return jQuery.Deferred(function(n) {
                                jQuery.each(t, function(t, s) {
                                    var o = jQuery.isFunction(e[t]) && e[t];
                                    i[s[1]](function() {
                                        var e = o && o.apply(this, arguments);
                                        e && jQuery.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[s[0] + "With"](this === r ? n.promise() : this, o ? [e] : arguments)
                                    })
                                }), e = null
                            }).promise()
                        },
                        promise: function(e) {
                            return e != null ? jQuery.extend(e, r) : r
                        }
                    },
                    i = {};
                return r.pipe = r.then, jQuery.each(t, function(e, s) {
                    var o = s[2],
                        u = s[3];
                    r[s[1]] = o.add, u && o.add(function() {
                        n = u
                    }, t[e ^ 1][2].disable, t[2][2].lock), i[s[0]] = function() {
                        return i[s[0] + "With"](this === i ? r : this, arguments), this
                    }, i[s[0] + "With"] = o.fireWith
                }), r.promise(i), e && e.call(i, i), i
            },
            when: function(e) {
                var t = 0,
                    n = slice.call(arguments),
                    r = n.length,
                    i = r !== 1 || e && jQuery.isFunction(e.promise) ? r : 0,
                    s = i === 1 ? e : jQuery.Deferred(),
                    o = function(e, t, n) {
                        return function(r) {
                            t[e] = this, n[e] = arguments.length > 1 ? slice.call(arguments) : r, n === u ? s.notifyWith(t, n) : --i || s.resolveWith(t, n)
                        }
                    },
                    u, a, f;
                if (r > 1) {
                    u = new Array(r), a = new Array(r), f = new Array(r);
                    for (; t < r; t++) n[t] && jQuery.isFunction(n[t].promise) ? n[t].promise().done(o(t, f, n)).fail(s.reject).progress(o(t, a, u)) : --i
                }
                return i || s.resolveWith(f, n), s.promise()
            }
        });
        var readyList;
        jQuery.fn.ready = function(e) {
            return jQuery.ready.promise().done(e), this
        }, jQuery.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(e) {
                e ? jQuery.readyWait++ : jQuery.ready(!0)
            },
            ready: function(e) {
                if (e === !0 ? --jQuery.readyWait : jQuery.isReady) return;
                jQuery.isReady = !0;
                if (e !== !0 && --jQuery.readyWait > 0) return;
                readyList.resolveWith(document, [jQuery]), jQuery.fn.trigger && jQuery(document).trigger("ready").off("ready")
            }
        }), jQuery.ready.promise = function(e) {
            return readyList || (readyList = jQuery.Deferred(), document.readyState === "complete" ? setTimeout(jQuery.ready) : (document.addEventListener("DOMContentLoaded", completed, !1), window.addEventListener("load", completed, !1))), readyList.promise(e)
        }, jQuery.ready.promise();
        var access = jQuery.access = function(e, t, n, r, i, s, o) {
            var u = 0,
                a = e.length,
                f = n == null;
            if (jQuery.type(n) === "object") {
                i = !0;
                for (u in n) jQuery.access(e, t, u, n[u], !0, s, o)
            } else if (r !== undefined) {
                i = !0, jQuery.isFunction(r) || (o = !0), f && (o ? (t.call(e, r), t = null) : (f = t, t = function(e, t, n) {
                    return f.call(jQuery(e), n)
                }));
                if (t)
                    for (; u < a; u++) t(e[u], n, o ? r : r.call(e[u], u, t(e[u], n)))
            }
            return i ? e : f ? t.call(e) : a ? t(e[0], n) : s
        };
        jQuery.acceptData = function(e) {
            return e.nodeType === 1 || e.nodeType === 9 || !+e.nodeType
        }, Data.uid = 1, Data.accepts = jQuery.acceptData, Data.prototype = {
            key: function(e) {
                if (!Data.accepts(e)) return 0;
                var t = {},
                    n = e[this.expando];
                if (!n) {
                    n = Data.uid++;
                    try {
                        t[this.expando] = {
                            value: n
                        }, Object.defineProperties(e, t)
                    } catch (r) {
                        t[this.expando] = n, jQuery.extend(e, t)
                    }
                }
                return this.cache[n] || (this.cache[n] = {}), n
            },
            set: function(e, t, n) {
                var r, i = this.key(e),
                    s = this.cache[i];
                if (typeof t == "string") s[t] = n;
                else if (jQuery.isEmptyObject(s)) jQuery.extend(this.cache[i], t);
                else
                    for (r in t) s[r] = t[r];
                return s
            },
            get: function(e, t) {
                var n = this.cache[this.key(e)];
                return t === undefined ? n : n[t]
            },
            access: function(e, t, n) {
                var r;
                return t === undefined || t && typeof t == "string" && n === undefined ? (r = this.get(e, t), r !== undefined ? r : this.get(e, jQuery.camelCase(t))) : (this.set(e, t, n), n !== undefined ? n : t)
            },
            remove: function(e, t) {
                var n, r, i, s = this.key(e),
                    o = this.cache[s];
                if (t === undefined) this.cache[s] = {};
                else {
                    jQuery.isArray(t) ? r = t.concat(t.map(jQuery.camelCase)) : (i = jQuery.camelCase(t), t in o ? r = [t, i] : (r = i, r = r in o ? [r] : r.match(rnotwhite) || [])), n = r.length;
                    while (n--) delete o[r[n]]
                }
            },
            hasData: function(e) {
                return !jQuery.isEmptyObject(this.cache[e[this.expando]] || {})
            },
            discard: function(e) {
                e[this.expando] && delete this.cache[e[this.expando]]
            }
        };
        var data_priv = new Data,
            data_user = new Data,
            rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            rmultiDash = /([A-Z])/g;
        jQuery.extend({
            hasData: function(e) {
                return data_user.hasData(e) || data_priv.hasData(e)
            },
            data: function(e, t, n) {
                return data_user.access(e, t, n)
            },
            removeData: function(e, t) {
                data_user.remove(e, t)
            },
            _data: function(e, t, n) {
                return data_priv.access(e, t, n)
            },
            _removeData: function(e, t) {
                data_priv.remove(e, t)
            }
        }), jQuery.fn.extend({
            data: function(e, t) {
                var n, r, i, s = this[0],
                    o = s && s.attributes;
                if (e === undefined) {
                    if (this.length) {
                        i = data_user.get(s);
                        if (s.nodeType === 1 && !data_priv.get(s, "hasDataAttrs")) {
                            n = o.length;
                            while (n--) r = o[n].name, r.indexOf("data-") === 0 && (r = jQuery.camelCase(r.slice(5)), dataAttr(s, r, i[r]));
                            data_priv.set(s, "hasDataAttrs", !0)
                        }
                    }
                    return i
                }
                return typeof e == "object" ? this.each(function() {
                    data_user.set(this, e)
                }) : access(this, function(t) {
                    var n, r = jQuery.camelCase(e);
                    if (s && t === undefined) {
                        n = data_user.get(s, e);
                        if (n !== undefined) return n;
                        n = data_user.get(s, r);
                        if (n !== undefined) return n;
                        n = dataAttr(s, r, undefined);
                        if (n !== undefined) return n;
                        return
                    }
                    this.each(function() {
                        var n = data_user.get(this, r);
                        data_user.set(this, r, t), e.indexOf("-") !== -1 && n !== undefined && data_user.set(this, e, t)
                    })
                }, null, t, arguments.length > 1, null, !0)
            },
            removeData: function(e) {
                return this.each(function() {
                    data_user.remove(this, e)
                })
            }
        }), jQuery.extend({
            queue: function(e, t, n) {
                var r;
                if (e) return t = (t || "fx") + "queue", r = data_priv.get(e, t), n && (!r || jQuery.isArray(n) ? r = data_priv.access(e, t, jQuery.makeArray(n)) : r.push(n)), r || []
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var n = jQuery.queue(e, t),
                    r = n.length,
                    i = n.shift(),
                    s = jQuery._queueHooks(e, t),
                    o = function() {
                        jQuery.dequeue(e, t)
                    };
                i === "inprogress" && (i = n.shift(), r--), i && (t === "fx" && n.unshift("inprogress"), delete s.stop, i.call(e, o, s)), !r && s && s.empty.fire()
            },
            _queueHooks: function(e, t) {
                var n = t + "queueHooks";
                return data_priv.get(e, n) || data_priv.access(e, n, {
                    empty: jQuery.Callbacks("once memory").add(function() {
                        data_priv.remove(e, [t + "queue", n])
                    })
                })
            }
        }), jQuery.fn.extend({
            queue: function(e, t) {
                var n = 2;
                return typeof e != "string" && (t = e, e = "fx", n--), arguments.length < n ? jQuery.queue(this[0], e) : t === undefined ? this : this.each(function() {
                    var n = jQuery.queue(this, e, t);
                    jQuery._queueHooks(this, e), e === "fx" && n[0] !== "inprogress" && jQuery.dequeue(this, e)
                })
            },
            dequeue: function(e) {
                return this.each(function() {
                    jQuery.dequeue(this, e)
                })
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var n, r = 1,
                    i = jQuery.Deferred(),
                    s = this,
                    o = this.length,
                    u = function() {
                        --r || i.resolveWith(s, [s])
                    };
                typeof e != "string" && (t = e, e = undefined), e = e || "fx";
                while (o--) n = data_priv.get(s[o], e + "queueHooks"), n && n.empty && (r++, n.empty.add(u));
                return u(), i.promise(t)
            }
        });
        var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            cssExpand = ["Top", "Right", "Bottom", "Left"],
            isHidden = function(e, t) {
                return e = t || e, jQuery.css(e, "display") === "none" || !jQuery.contains(e.ownerDocument, e)
            },
            rcheckableType = /^(?:checkbox|radio)$/i;
        (function() {
            var e = document.createDocumentFragment(),
                t = e.appendChild(document.createElement("div"));
            t.innerHTML = "<input type='radio' checked='checked' name='t'/>", support.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, t.innerHTML = "<textarea>x</textarea>", support.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
        })();
        var strundefined = typeof undefined;
        support.focusinBubbles = "onfocusin" in window;
        var rkeyEvent = /^key/,
            rmouseEvent = /^(?:mouse|contextmenu)|click/,
            rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
            rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
        jQuery.event = {
            global: {},
            add: function(e, t, n, r, i) {
                var s, o, u, a, f, l, c, h, p, d, v, m = data_priv.get(e);
                if (!m) return;
                n.handler && (s = n, n = s.handler, i = s.selector), n.guid || (n.guid = jQuery.guid++), (a = m.events) || (a = m.events = {}), (o = m.handle) || (o = m.handle = function(t) {
                    return typeof jQuery !== strundefined && jQuery.event.triggered !== t.type ? jQuery.event.dispatch.apply(e, arguments) : undefined
                }), t = (t || "").match(rnotwhite) || [""], f = t.length;
                while (f--) {
                    u = rtypenamespace.exec(t[f]) || [], p = v = u[1], d = (u[2] || "").split(".").sort();
                    if (!p) continue;
                    c = jQuery.event.special[p] || {}, p = (i ? c.delegateType : c.bindType) || p, c = jQuery.event.special[p] || {}, l = jQuery.extend({
                        type: p,
                        origType: v,
                        data: r,
                        handler: n,
                        guid: n.guid,
                        selector: i,
                        needsContext: i && jQuery.expr.match.needsContext.test(i),
                        namespace: d.join(".")
                    }, s), (h = a[p]) || (h = a[p] = [], h.delegateCount = 0, (!c.setup || c.setup.call(e, r, d, o) === !1) && e.addEventListener && e.addEventListener(p, o, !1)), c.add && (c.add.call(e, l), l.handler.guid || (l.handler.guid = n.guid)), i ? h.splice(h.delegateCount++, 0, l) : h.push(l), jQuery.event.global[p] = !0
                }
            },
            remove: function(e, t, n, r, i) {
                var s, o, u, a, f, l, c, h, p, d, v, m = data_priv.hasData(e) && data_priv.get(e);
                if (!m || !(a = m.events)) return;
                t = (t || "").match(rnotwhite) || [""], f = t.length;
                while (f--) {
                    u = rtypenamespace.exec(t[f]) || [], p = v = u[1], d = (u[2] || "").split(".").sort();
                    if (!p) {
                        for (p in a) jQuery.event.remove(e, p + t[f], n, r, !0);
                        continue
                    }
                    c = jQuery.event.special[p] || {}, p = (r ? c.delegateType : c.bindType) || p, h = a[p] || [], u = u[2] && new RegExp("(^|\\.)" + d.join("\\.(?:.*\\.|)") + "(\\.|$)"), o = s = h.length;
                    while (s--) l = h[s], (i || v === l.origType) && (!n || n.guid === l.guid) && (!u || u.test(l.namespace)) && (!r || r === l.selector || r === "**" && l.selector) && (h.splice(s, 1), l.selector && h.delegateCount--, c.remove && c.remove.call(e, l));
                    o && !h.length && ((!c.teardown || c.teardown.call(e, d, m.handle) === !1) && jQuery.removeEvent(e, p, m.handle), delete a[p])
                }
                jQuery.isEmptyObject(a) && (delete m.handle, data_priv.remove(e, "events"))
            },
            trigger: function(e, t, n, r) {
                var i, s, o, u, a, f, l, c = [n || document],
                    h = hasOwn.call(e, "type") ? e.type : e,
                    p = hasOwn.call(e, "namespace") ? e.namespace.split(".") : [];
                s = o = n = n || document;
                if (n.nodeType === 3 || n.nodeType === 8) return;
                if (rfocusMorph.test(h + jQuery.event.triggered)) return;
                h.indexOf(".") >= 0 && (p = h.split("."), h = p.shift(), p.sort()), a = h.indexOf(":") < 0 && "on" + h, e = e[jQuery.expando] ? e : new jQuery.Event(h, typeof e == "object" && e), e.isTrigger = r ? 2 : 3, e.namespace = p.join("."), e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = undefined, e.target || (e.target = n), t = t == null ? [e] : jQuery.makeArray(t, [e]), l = jQuery.event.special[h] || {};
                if (!r && l.trigger && l.trigger.apply(n, t) === !1) return;
                if (!r && !l.noBubble && !jQuery.isWindow(n)) {
                    u = l.delegateType || h, rfocusMorph.test(u + h) || (s = s.parentNode);
                    for (; s; s = s.parentNode) c.push(s), o = s;
                    o === (n.ownerDocument || document) && c.push(o.defaultView || o.parentWindow || window)
                }
                i = 0;
                while ((s = c[i++]) && !e.isPropagationStopped()) e.type = i > 1 ? u : l.bindType || h, f = (data_priv.get(s, "events") || {})[e.type] && data_priv.get(s, "handle"), f && f.apply(s, t), f = a && s[a], f && f.apply && jQuery.acceptData(s) && (e.result = f.apply(s, t), e.result === !1 && e.preventDefault());
                return e.type = h, !r && !e.isDefaultPrevented() && (!l._default || l._default.apply(c.pop(), t) === !1) && jQuery.acceptData(n) && a && jQuery.isFunction(n[h]) && !jQuery.isWindow(n) && (o = n[a], o && (n[a] = null), jQuery.event.triggered = h, n[h](), jQuery.event.triggered = undefined, o && (n[a] = o)), e.result
            },
            dispatch: function(e) {
                e = jQuery.event.fix(e);
                var t, n, r, i, s, o = [],
                    u = slice.call(arguments),
                    a = (data_priv.get(this, "events") || {})[e.type] || [],
                    f = jQuery.event.special[e.type] || {};
                u[0] = e, e.delegateTarget = this;
                if (f.preDispatch && f.preDispatch.call(this, e) === !1) return;
                o = jQuery.event.handlers.call(this, e, a), t = 0;
                while ((i = o[t++]) && !e.isPropagationStopped()) {
                    e.currentTarget = i.elem, n = 0;
                    while ((s = i.handlers[n++]) && !e.isImmediatePropagationStopped())
                        if (!e.namespace_re || e.namespace_re.test(s.namespace)) e.handleObj = s, e.data = s.data, r = ((jQuery.event.special[s.origType] || {}).handle || s.handler).apply(i.elem, u), r !== undefined && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation())
                }
                return f.postDispatch && f.postDispatch.call(this, e), e.result
            },
            handlers: function(e, t) {
                var n, r, i, s, o = [],
                    u = t.delegateCount,
                    a = e.target;
                if (u && a.nodeType && (!e.button || e.type !== "click"))
                    for (; a !== this; a = a.parentNode || this)
                        if (a.disabled !== !0 || e.type !== "click") {
                            r = [];
                            for (n = 0; n < u; n++) s = t[n], i = s.selector + " ", r[i] === undefined && (r[i] = s.needsContext ? jQuery(i, this).index(a) >= 0 : jQuery.find(i, this, null, [a]).length), r[i] && r.push(s);
                            r.length && o.push({
                                elem: a,
                                handlers: r
                            })
                        }
                return u < t.length && o.push({
                    elem: this,
                    handlers: t.slice(u)
                }), o
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return e.which == null && (e.which = t.charCode != null ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, t) {
                    var n, r, i, s = t.button;
                    return e.pageX == null && t.clientX != null && (n = e.target.ownerDocument || document, r = n.documentElement, i = n.body, e.pageX = t.clientX + (r && r.scrollLeft || i && i.scrollLeft || 0) - (r && r.clientLeft || i && i.clientLeft || 0), e.pageY = t.clientY + (r && r.scrollTop || i && i.scrollTop || 0) - (r && r.clientTop || i && i.clientTop || 0)), !e.which && s !== undefined && (e.which = s & 1 ? 1 : s & 2 ? 3 : s & 4 ? 2 : 0), e
                }
            },
            fix: function(e) {
                if (e[jQuery.expando]) return e;
                var t, n, r, i = e.type,
                    s = e,
                    o = this.fixHooks[i];
                o || (this.fixHooks[i] = o = rmouseEvent.test(i) ? this.mouseHooks : rkeyEvent.test(i) ? this.keyHooks : {}), r = o.props ? this.props.concat(o.props) : this.props, e = new jQuery.Event(s), t = r.length;
                while (t--) n = r[t], e[n] = s[n];
                return e.target || (e.target = document), e.target.nodeType === 3 && (e.target = e.target.parentNode), o.filter ? o.filter(e, s) : e
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        if (this !== safeActiveElement() && this.focus) return this.focus(), !1
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        if (this === safeActiveElement() && this.blur) return this.blur(), !1
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        if (this.type === "checkbox" && this.click && jQuery.nodeName(this, "input")) return this.click(), !1
                    },
                    _default: function(e) {
                        return jQuery.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        e.result !== undefined && (e.originalEvent.returnValue = e.result)
                    }
                }
            },
            simulate: function(e, t, n, r) {
                var i = jQuery.extend(new jQuery.Event, n, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
                r ? jQuery.event.trigger(i, null, t) : jQuery.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
            }
        }, jQuery.removeEvent = function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n, !1)
        }, jQuery.Event = function(e, t) {
            if (!(this instanceof jQuery.Event)) return new jQuery.Event(e, t);
            e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.defaultPrevented === undefined && e.getPreventDefault && e.getPreventDefault() ? returnTrue : returnFalse) : this.type = e, t && jQuery.extend(this, t), this.timeStamp = e && e.timeStamp || jQuery.now(), this[jQuery.expando] = !0
        }, jQuery.Event.prototype = {
            isDefaultPrevented: returnFalse,
            isPropagationStopped: returnFalse,
            isImmediatePropagationStopped: returnFalse,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = returnTrue, e && e.preventDefault && e.preventDefault()
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = returnTrue, e && e.stopPropagation && e.stopPropagation()
            },
            stopImmediatePropagation: function() {
                this.isImmediatePropagationStopped = returnTrue, this.stopPropagation()
            }
        }, jQuery.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        }, function(e, t) {
            jQuery.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, r = this,
                        i = e.relatedTarget,
                        s = e.handleObj;
                    if (!i || i !== r && !jQuery.contains(r, i)) e.type = s.origType, n = s.handler.apply(this, arguments), e.type = t;
                    return n
                }
            }
        }), support.focusinBubbles || jQuery.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var n = function(e) {
                jQuery.event.simulate(t, e.target, jQuery.event.fix(e), !0)
            };
            jQuery.event.special[t] = {
                setup: function() {
                    var r = this.ownerDocument || this,
                        i = data_priv.access(r, t);
                    i || r.addEventListener(e, n, !0), data_priv.access(r, t, (i || 0) + 1)
                },
                teardown: function() {
                    var r = this.ownerDocument || this,
                        i = data_priv.access(r, t) - 1;
                    i ? data_priv.access(r, t, i) : (r.removeEventListener(e, n, !0), data_priv.remove(r, t))
                }
            }
        }), jQuery.fn.extend({
            on: function(e, t, n, r, i) {
                var s, o;
                if (typeof e == "object") {
                    typeof t != "string" && (n = n || t, t = undefined);
                    for (o in e) this.on(o, t, n, e[o], i);
                    return this
                }
                n == null && r == null ? (r = t, n = t = undefined) : r == null && (typeof t == "string" ? (r = n, n = undefined) : (r = n, n = t, t = undefined));
                if (r === !1) r = returnFalse;
                else if (!r) return this;
                return i === 1 && (s = r, r = function(e) {
                    return jQuery().off(e), s.apply(this, arguments)
                }, r.guid = s.guid || (s.guid = jQuery.guid++)), this.each(function() {
                    jQuery.event.add(this, e, r, n, t)
                })
            },
            one: function(e, t, n, r) {
                return this.on(e, t, n, r, 1)
            },
            off: function(e, t, n) {
                var r, i;
                if (e && e.preventDefault && e.handleObj) return r = e.handleObj, jQuery(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
                if (typeof e == "object") {
                    for (i in e) this.off(i, t, e[i]);
                    return this
                }
                if (t === !1 || typeof t == "function") n = t, t = undefined;
                return n === !1 && (n = returnFalse), this.each(function() {
                    jQuery.event.remove(this, e, n, t)
                })
            },
            trigger: function(e, t) {
                return this.each(function() {
                    jQuery.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, t) {
                var n = this[0];
                if (n) return jQuery.event.trigger(e, t, n, !0)
            }
        });
        var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            rtagName = /<([\w:]+)/,
            rhtml = /<|&#?\w+;/,
            rnoInnerhtml = /<(?:script|style|link)/i,
            rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
            rscriptType = /^$|\/(?:java|ecma)script/i,
            rscriptTypeMasked = /^true\/(.*)/,
            rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
            wrapMap = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        wrapMap.optgroup = wrapMap.option, wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead, wrapMap.th = wrapMap.td, jQuery.extend({
            clone: function(e, t, n) {
                var r, i, s, o, u = e.cloneNode(!0),
                    a = jQuery.contains(e.ownerDocument, e);
                if (!support.noCloneChecked && (e.nodeType === 1 || e.nodeType === 11) && !jQuery.isXMLDoc(e)) {
                    o = getAll(u), s = getAll(e);
                    for (r = 0, i = s.length; r < i; r++) fixInput(s[r], o[r])
                }
                if (t)
                    if (n) {
                        s = s || getAll(e), o = o || getAll(u);
                        for (r = 0, i = s.length; r < i; r++) cloneCopyEvent(s[r], o[r])
                    } else cloneCopyEvent(e, u);
                return o = getAll(u, "script"), o.length > 0 && setGlobalEval(o, !a && getAll(e, "script")), u
            },
            buildFragment: function(e, t, n, r) {
                var i, s, o, u, a, f, l = t.createDocumentFragment(),
                    c = [],
                    h = 0,
                    p = e.length;
                for (; h < p; h++) {
                    i = e[h];
                    if (i || i === 0)
                        if (jQuery.type(i) === "object") jQuery.merge(c, i.nodeType ? [i] : i);
                        else if (!rhtml.test(i)) c.push(t.createTextNode(i));
                    else {
                        s = s || l.appendChild(t.createElement("div")), o = (rtagName.exec(i) || ["", ""])[1].toLowerCase(), u = wrapMap[o] || wrapMap._default, s.innerHTML = u[1] + i.replace(rxhtmlTag, "<$1></$2>") + u[2], f = u[0];
                        while (f--) s = s.lastChild;
                        jQuery.merge(c, s.childNodes), s = l.firstChild, s.textContent = ""
                    }
                }
                l.textContent = "", h = 0;
                while (i = c[h++]) {
                    if (r && jQuery.inArray(i, r) !== -1) continue;
                    a = jQuery.contains(i.ownerDocument, i), s = getAll(l.appendChild(i), "script"), a && setGlobalEval(s);
                    if (n) {
                        f = 0;
                        while (i = s[f++]) rscriptType.test(i.type || "") && n.push(i)
                    }
                }
                return l
            },
            cleanData: function(e) {
                var t, n, r, i, s, o, u = jQuery.event.special,
                    a = 0;
                for (;
                    (n = e[a]) !== undefined; a++) {
                    if (jQuery.acceptData(n)) {
                        s = n[data_priv.expando];
                        if (s && (t = data_priv.cache[s])) {
                            r = Object.keys(t.events || {});
                            if (r.length)
                                for (o = 0;
                                    (i = r[o]) !== undefined; o++) u[i] ? jQuery.event.remove(n, i) : jQuery.removeEvent(n, i, t.handle);
                            data_priv.cache[s] && delete data_priv.cache[s]
                        }
                    }
                    delete data_user.cache[n[data_user.expando]]
                }
            }
        }), jQuery.fn.extend({
            text: function(e) {
                return access(this, function(e) {
                    return e === undefined ? jQuery.text(this) : this.empty().each(function() {
                        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) this.textContent = e
                    })
                }, null, e, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(e) {
                    if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                        var t = manipulationTarget(this, e);
                        t.appendChild(e)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(e) {
                    if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                        var t = manipulationTarget(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            remove: function(e, t) {
                var n, r = e ? jQuery.filter(e, this) : this,
                    i = 0;
                for (;
                    (n = r[i]) != null; i++) !t && n.nodeType === 1 && jQuery.cleanData(getAll(n)), n.parentNode && (t && jQuery.contains(n.ownerDocument, n) && setGlobalEval(getAll(n, "script")), n.parentNode.removeChild(n));
                return this
            },
            empty: function() {
                var e, t = 0;
                for (;
                    (e = this[t]) != null; t++) e.nodeType === 1 && (jQuery.cleanData(getAll(e, !1)), e.textContent = "");
                return this
            },
            clone: function(e, t) {
                return e = e == null ? !1 : e, t = t == null ? e : t, this.map(function() {
                    return jQuery.clone(this, e, t)
                })
            },
            html: function(e) {
                return access(this, function(e) {
                    var t = this[0] || {},
                        n = 0,
                        r = this.length;
                    if (e === undefined && t.nodeType === 1) return t.innerHTML;
                    if (typeof e == "string" && !rnoInnerhtml.test(e) && !wrapMap[(rtagName.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = e.replace(rxhtmlTag, "<$1></$2>");
                        try {
                            for (; n < r; n++) t = this[n] || {}, t.nodeType === 1 && (jQuery.cleanData(getAll(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (i) {}
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function() {
                var e = arguments[0];
                return this.domManip(arguments, function(t) {
                    e = this.parentNode, jQuery.cleanData(getAll(this)), e && e.replaceChild(t, this)
                }), e && (e.length || e.nodeType) ? this : this.remove()
            },
            detach: function(e) {
                return this.remove(e, !0)
            },
            domManip: function(e, t) {
                e = concat.apply([], e);
                var n, r, i, s, o, u, a = 0,
                    f = this.length,
                    l = this,
                    c = f - 1,
                    h = e[0],
                    p = jQuery.isFunction(h);
                if (p || f > 1 && typeof h == "string" && !support.checkClone && rchecked.test(h)) return this.each(function(n) {
                    var r = l.eq(n);
                    p && (e[0] = h.call(this, n, r.html())), r.domManip(e, t)
                });
                if (f) {
                    n = jQuery.buildFragment(e, this[0].ownerDocument, !1, this), r = n.firstChild, n.childNodes.length === 1 && (n = r);
                    if (r) {
                        i = jQuery.map(getAll(n, "script"), disableScript), s = i.length;
                        for (; a < f; a++) o = n, a !== c && (o = jQuery.clone(o, !0, !0), s && jQuery.merge(i, getAll(o, "script"))), t.call(this[a], o, a);
                        if (s) {
                            u = i[i.length - 1].ownerDocument, jQuery.map(i, restoreScript);
                            for (a = 0; a < s; a++) o = i[a], rscriptType.test(o.type || "") && !data_priv.access(o, "globalEval") && jQuery.contains(u, o) && (o.src ? jQuery._evalUrl && jQuery._evalUrl(o.src) : jQuery.globalEval(o.textContent.replace(rcleanScript, "")))
                        }
                    }
                }
                return this
            }
        }), jQuery.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(e, t) {
            jQuery.fn[e] = function(e) {
                var n, r = [],
                    i = jQuery(e),
                    s = i.length - 1,
                    o = 0;
                for (; o <= s; o++) n = o === s ? this : this.clone(!0), jQuery(i[o])[t](n), push.apply(r, n.get());
                return this.pushStack(r)
            }
        });
        var iframe, elemdisplay = {},
            rmargin = /^margin/,
            rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i"),
            getStyles = function(e) {
                return e.ownerDocument.defaultView.getComputedStyle(e, null)
            };
        (function() {
            function o() {
                s.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%", r.appendChild(i);
                var n = window.getComputedStyle(s, null);
                e = n.top !== "1%", t = n.width === "4px", r.removeChild(i)
            }
            var e, t, n = "padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",
                r = document.documentElement,
                i = document.createElement("div"),
                s = document.createElement("div");
            s.style.backgroundClip = "content-box", s.cloneNode(!0).style.backgroundClip = "", support.clearCloneStyle = s.style.backgroundClip === "content-box", i.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", i.appendChild(s), window.getComputedStyle && jQuery.extend(support, {
                pixelPosition: function() {
                    return o(), e
                },
                boxSizingReliable: function() {
                    return t == null && o(), t
                },
                reliableMarginRight: function() {
                    var e, t = s.appendChild(document.createElement("div"));
                    return t.style.cssText = s.style.cssText = n, t.style.marginRight = t.style.width = "0", s.style.width = "1px", r.appendChild(i), e = !parseFloat(window.getComputedStyle(t, null).marginRight), r.removeChild(i), s.innerHTML = "", e
                }
            })
        })(), jQuery.swap = function(e, t, n, r) {
            var i, s, o = {};
            for (s in t) o[s] = e.style[s], e.style[s] = t[s];
            i = n.apply(e, r || []);
            for (s in t) e.style[s] = o[s];
            return i
        };
        var rdisplayswap = /^(none|table(?!-c[ea]).+)/,
            rnumsplit = new RegExp("^(" + pnum + ")(.*)$", "i"),
            rrelNum = new RegExp("^([+-])=(" + pnum + ")", "i"),
            cssShow = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            cssNormalTransform = {
                letterSpacing: 0,
                fontWeight: 400
            },
            cssPrefixes = ["Webkit", "O", "Moz", "ms"];
        jQuery.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var n = curCSS(e, "opacity");
                            return n === "" ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": "cssFloat"
            },
            style: function(e, t, n, r) {
                if (!e || e.nodeType === 3 || e.nodeType === 8 || !e.style) return;
                var i, s, o, u = jQuery.camelCase(t),
                    a = e.style;
                t = jQuery.cssProps[u] || (jQuery.cssProps[u] = vendorPropName(a, u)), o = jQuery.cssHooks[t] || jQuery.cssHooks[u];
                if (n === undefined) return o && "get" in o && (i = o.get(e, !1, r)) !== undefined ? i : a[t];
                s = typeof n, s === "string" && (i = rrelNum.exec(n)) && (n = (i[1] + 1) * i[2] + parseFloat(jQuery.css(e, t)), s = "number");
                if (n == null || n !== n) return;
                s === "number" && !jQuery.cssNumber[u] && (n += "px"), !support.clearCloneStyle && n === "" && t.indexOf("background") === 0 && (a[t] = "inherit");
                if (!o || !("set" in o) || (n = o.set(e, n, r)) !== undefined) a[t] = "", a[t] = n
            },
            css: function(e, t, n, r) {
                var i, s, o, u = jQuery.camelCase(t);
                return t = jQuery.cssProps[u] || (jQuery.cssProps[u] = vendorPropName(e.style, u)), o = jQuery.cssHooks[t] || jQuery.cssHooks[u], o && "get" in o && (i = o.get(e, !0, n)), i === undefined && (i = curCSS(e, t, r)), i === "normal" && t in cssNormalTransform && (i = cssNormalTransform[t]), n === "" || n ? (s = parseFloat(i), n === !0 || jQuery.isNumeric(s) ? s || 0 : i) : i
            }
        }), jQuery.each(["height", "width"], function(e, t) {
            jQuery.cssHooks[t] = {
                get: function(e, n, r) {
                    if (n) return e.offsetWidth === 0 && rdisplayswap.test(jQuery.css(e, "display")) ? jQuery.swap(e, cssShow, function() {
                        return getWidthOrHeight(e, t, r)
                    }) : getWidthOrHeight(e, t, r)
                },
                set: function(e, n, r) {
                    var i = r && getStyles(e);
                    return setPositiveNumber(e, n, r ? augmentWidthOrHeight(e, t, r, jQuery.css(e, "boxSizing", !1, i) === "border-box", i) : 0)
                }
            }
        }), jQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight, function(e, t) {
            if (t) return jQuery.swap(e, {
                display: "inline-block"
            }, curCSS, [e, "marginRight"])
        }), jQuery.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(e, t) {
            jQuery.cssHooks[e + t] = {
                expand: function(n) {
                    var r = 0,
                        i = {},
                        s = typeof n == "string" ? n.split(" ") : [n];
                    for (; r < 4; r++) i[e + cssExpand[r] + t] = s[r] || s[r - 2] || s[0];
                    return i
                }
            }, rmargin.test(e) || (jQuery.cssHooks[e + t].set = setPositiveNumber)
        }), jQuery.fn.extend({
            css: function(e, t) {
                return access(this, function(e, t, n) {
                    var r, i, s = {},
                        o = 0;
                    if (jQuery.isArray(t)) {
                        r = getStyles(e), i = t.length;
                        for (; o < i; o++) s[t[o]] = jQuery.css(e, t[o], !1, r);
                        return s
                    }
                    return n !== undefined ? jQuery.style(e, t, n) : jQuery.css(e, t)
                }, e, t, arguments.length > 1)
            },
            show: function() {
                return showHide(this, !0)
            },
            hide: function() {
                return showHide(this)
            },
            toggle: function(e) {
                return typeof e == "boolean" ? e ? this.show() : this.hide() : this.each(function() {
                    isHidden(this) ? jQuery(this).show() : jQuery(this).hide()
                })
            }
        }), jQuery.Tween = Tween, Tween.prototype = {
            constructor: Tween,
            init: function(e, t, n, r, i, s) {
                this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = s || (jQuery.cssNumber[n] ? "" : "px")
            },
            cur: function() {
                var e = Tween.propHooks[this.prop];
                return e && e.get ? e.get(this) : Tween.propHooks._default.get(this)
            },
            run: function(e) {
                var t, n = Tween.propHooks[this.prop];
                return this.options.duration ? this.pos = t = jQuery.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : Tween.propHooks._default.set(this), this
            }
        }, Tween.prototype.init.prototype = Tween.prototype, Tween.propHooks = {
            _default: {
                get: function(e) {
                    var t;
                    return e.elem[e.prop] == null || !!e.elem.style && e.elem.style[e.prop] != null ? (t = jQuery.css(e.elem, e.prop, ""), !t || t === "auto" ? 0 : t) : e.elem[e.prop]
                },
                set: function(e) {
                    jQuery.fx.step[e.prop] ? jQuery.fx.step[e.prop](e) : e.elem.style && (e.elem.style[jQuery.cssProps[e.prop]] != null || jQuery.cssHooks[e.prop]) ? jQuery.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
                }
            }
        }, Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
            set: function(e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        }, jQuery.easing = {
            linear: function(e) {
                return e
            },
            swing: function(e) {
                return .5 - Math.cos(e * Math.PI) / 2
            }
        }, jQuery.fx = Tween.prototype.init, jQuery.fx.step = {};
        var fxNow, timerId, rfxtypes = /^(?:toggle|show|hide)$/,
            rfxnum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i"),
            rrun = /queueHooks$/,
            animationPrefilters = [defaultPrefilter],
            tweeners = {
                "*": [function(e, t) {
                    var n = this.createTween(e, t),
                        r = n.cur(),
                        i = rfxnum.exec(t),
                        s = i && i[3] || (jQuery.cssNumber[e] ? "" : "px"),
                        o = (jQuery.cssNumber[e] || s !== "px" && +r) && rfxnum.exec(jQuery.css(n.elem, e)),
                        u = 1,
                        a = 20;
                    if (o && o[3] !== s) {
                        s = s || o[3], i = i || [], o = +r || 1;
                        do u = u || ".5", o /= u, jQuery.style(n.elem, e, o + s); while (u !== (u = n.cur() / r) && u !== 1 && --a)
                    }
                    return i && (o = n.start = +o || +r || 0, n.unit = s, n.end = i[1] ? o + (i[1] + 1) * i[2] : +i[2]), n
                }]
            };
        jQuery.Animation = jQuery.extend(Animation, {
                tweener: function(e, t) {
                    jQuery.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
                    var n, r = 0,
                        i = e.length;
                    for (; r < i; r++) n = e[r], tweeners[n] = tweeners[n] || [], tweeners[n].unshift(t)
                },
                prefilter: function(e, t) {
                    t ? animationPrefilters.unshift(e) : animationPrefilters.push(e)
                }
            }), jQuery.speed = function(e, t, n) {
                var r = e && typeof e == "object" ? jQuery.extend({}, e) : {
                    complete: n || !n && t || jQuery.isFunction(e) && e,
                    duration: e,
                    easing: n && t || t && !jQuery.isFunction(t) && t
                };
                r.duration = jQuery.fx.off ? 0 : typeof r.duration == "number" ? r.duration : r.duration in jQuery.fx.speeds ? jQuery.fx.speeds[r.duration] : jQuery.fx.speeds._default;
                if (r.queue == null || r.queue === !0) r.queue = "fx";
                return r.old = r.complete, r.complete = function() {
                    jQuery.isFunction(r.old) && r.old.call(this), r.queue && jQuery.dequeue(this, r.queue)
                }, r
            }, jQuery.fn.extend({
                fadeTo: function(e, t, n, r) {
                    return this.filter(isHidden).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, r)
                },
                animate: function(e, t, n, r) {
                    var i = jQuery.isEmptyObject(e),
                        s = jQuery.speed(t, n, r),
                        o = function() {
                            var t = Animation(this, jQuery.extend({}, e), s);
                            (i || data_priv.get(this, "finish")) && t.stop(!0)
                        };
                    return o.finish = o, i || s.queue === !1 ? this.each(o) : this.queue(s.queue, o)
                },
                stop: function(e, t, n) {
                    var r = function(e) {
                        var t = e.stop;
                        delete e.stop, t(n)
                    };
                    return typeof e != "string" && (n = t, t = e, e = undefined), t && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                        var t = !0,
                            i = e != null && e + "queueHooks",
                            s = jQuery.timers,
                            o = data_priv.get(this);
                        if (i) o[i] && o[i].stop && r(o[i]);
                        else
                            for (i in o) o[i] && o[i].stop && rrun.test(i) && r(o[i]);
                        for (i = s.length; i--;) s[i].elem === this && (e == null || s[i].queue === e) && (s[i].anim.stop(n), t = !1, s.splice(i, 1));
                        (t || !n) && jQuery.dequeue(this, e)
                    })
                },
                finish: function(e) {
                    return e !== !1 && (e = e || "fx"), this.each(function() {
                        var t, n = data_priv.get(this),
                            r = n[e + "queue"],
                            i = n[e + "queueHooks"],
                            s = jQuery.timers,
                            o = r ? r.length : 0;
                        n.finish = !0, jQuery.queue(this, e, []), i && i.stop && i.stop.call(this, !0);
                        for (t = s.length; t--;) s[t].elem === this && s[t].queue === e && (s[t].anim.stop(!0), s.splice(t, 1));
                        for (t = 0; t < o; t++) r[t] && r[t].finish && r[t].finish.call(this);
                        delete n.finish
                    })
                }
            }), jQuery.each(["toggle", "show", "hide"], function(e, t) {
                var n = jQuery.fn[t];
                jQuery.fn[t] = function(e, r, i) {
                    return e == null || typeof e == "boolean" ? n.apply(this, arguments) : this.animate(genFx(t, !0), e, r, i)
                }
            }), jQuery.each({
                slideDown: genFx("show"),
                slideUp: genFx("hide"),
                slideToggle: genFx("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(e, t) {
                jQuery.fn[e] = function(e, n, r) {
                    return this.animate(t, e, n, r)
                }
            }), jQuery.timers = [], jQuery.fx.tick = function() {
                var e, t = 0,
                    n = jQuery.timers;
                fxNow = jQuery.now();
                for (; t < n.length; t++) e = n[t], !e() && n[t] === e && n.splice(t--, 1);
                n.length || jQuery.fx.stop(), fxNow = undefined
            }, jQuery.fx.timer = function(e) {
                jQuery.timers.push(e), e() ? jQuery.fx.start() : jQuery.timers.pop()
            }, jQuery.fx.interval = 13, jQuery.fx.start = function() {
                timerId || (timerId = setInterval(jQuery.fx.tick, jQuery.fx.interval))
            }, jQuery.fx.stop = function() {
                clearInterval(timerId), timerId = null
            }, jQuery.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, jQuery.fn.delay = function(e, t) {
                return e = jQuery.fx ? jQuery.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
                    var r = setTimeout(t, e);
                    n.stop = function() {
                        clearTimeout(r)
                    }
                })
            },
            function() {
                var e = document.createElement("input"),
                    t = document.createElement("select"),
                    n = t.appendChild(document.createElement("option"));
                e.type = "checkbox", support.checkOn = e.value !== "", support.optSelected = n.selected, t.disabled = !0, support.optDisabled = !n.disabled, e = document.createElement("input"), e.value = "t", e.type = "radio", support.radioValue = e.value === "t"
            }();
        var nodeHook, boolHook, attrHandle = jQuery.expr.attrHandle;
        jQuery.fn.extend({
            attr: function(e, t) {
                return access(this, jQuery.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each(function() {
                    jQuery.removeAttr(this, e)
                })
            }
        }), jQuery.extend({
            attr: function(e, t, n) {
                var r, i, s = e.nodeType;
                if (!e || s === 3 || s === 8 || s === 2) return;
                if (typeof e.getAttribute === strundefined) return jQuery.prop(e, t, n);
                if (s !== 1 || !jQuery.isXMLDoc(e)) t = t.toLowerCase(), r = jQuery.attrHooks[t] || (jQuery.expr.match.bool.test(t) ? boolHook : nodeHook);
                if (n === undefined) return r && "get" in r && (i = r.get(e, t)) !== null ? i : (i = jQuery.find.attr(e, t), i == null ? undefined : i);
                if (n !== null) return r && "set" in r && (i = r.set(e, n, t)) !== undefined ? i : (e.setAttribute(t, n + ""), n);
                jQuery.removeAttr(e, t)
            },
            removeAttr: function(e, t) {
                var n, r, i = 0,
                    s = t && t.match(rnotwhite);
                if (s && e.nodeType === 1)
                    while (n = s[i++]) r = jQuery.propFix[n] || n, jQuery.expr.match.bool.test(n) && (e[r] = !1), e.removeAttribute(n)
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!support.radioValue && t === "radio" && jQuery.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                }
            }
        }), boolHook = {
            set: function(e, t, n) {
                return t === !1 ? jQuery.removeAttr(e, n) : e.setAttribute(n, n), n
            }
        }, jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(e, t) {
            var n = attrHandle[t] || jQuery.find.attr;
            attrHandle[t] = function(e, t, r) {
                var i, s;
                return r || (s = attrHandle[t], attrHandle[t] = i, i = n(e, t, r) != null ? t.toLowerCase() : null, attrHandle[t] = s), i
            }
        });
        var rfocusable = /^(?:input|select|textarea|button)$/i;
        jQuery.fn.extend({
            prop: function(e, t) {
                return access(this, jQuery.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return this.each(function() {
                    delete this[jQuery.propFix[e] || e]
                })
            }
        }), jQuery.extend({
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(e, t, n) {
                var r, i, s, o = e.nodeType;
                if (!e || o === 3 || o === 8 || o === 2) return;
                return s = o !== 1 || !jQuery.isXMLDoc(e), s && (t = jQuery.propFix[t] || t, i = jQuery.propHooks[t]), n !== undefined ? i && "set" in i && (r = i.set(e, n, t)) !== undefined ? r : e[t] = n : i && "get" in i && (r = i.get(e, t)) !== null ? r : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        return e.hasAttribute("tabindex") || rfocusable.test(e.nodeName) || e.href ? e.tabIndex : -1
                    }
                }
            }
        }), support.optSelected || (jQuery.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex, null
            }
        }), jQuery.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            jQuery.propFix[this.toLowerCase()] = this
        });
        var rclass = /[\t\r\n\f]/g;
        jQuery.fn.extend({
            addClass: function(e) {
                var t, n, r, i, s, o, u = typeof e == "string" && e,
                    a = 0,
                    f = this.length;
                if (jQuery.isFunction(e)) return this.each(function(t) {
                    jQuery(this).addClass(e.call(this, t, this.className))
                });
                if (u) {
                    t = (e || "").match(rnotwhite) || [];
                    for (; a < f; a++) {
                        n = this[a], r = n.nodeType === 1 && (n.className ? (" " + n.className + " ").replace(rclass, " ") : " ");
                        if (r) {
                            s = 0;
                            while (i = t[s++]) r.indexOf(" " + i + " ") < 0 && (r += i + " ");
                            o = jQuery.trim(r), n.className !== o && (n.className = o)
                        }
                    }
                }
                return this
            },
            removeClass: function(e) {
                var t, n, r, i, s, o, u = arguments.length === 0 || typeof e == "string" && e,
                    a = 0,
                    f = this.length;
                if (jQuery.isFunction(e)) return this.each(function(t) {
                    jQuery(this).removeClass(e.call(this, t, this.className))
                });
                if (u) {
                    t = (e || "").match(rnotwhite) || [];
                    for (; a < f; a++) {
                        n = this[a], r = n.nodeType === 1 && (n.className ? (" " + n.className + " ").replace(rclass, " ") : "");
                        if (r) {
                            s = 0;
                            while (i = t[s++])
                                while (r.indexOf(" " + i + " ") >= 0) r = r.replace(" " + i + " ", " ");
                            o = e ? jQuery.trim(r) : "", n.className !== o && (n.className = o)
                        }
                    }
                }
                return this
            },
            toggleClass: function(e, t) {
                var n = typeof e;
                return typeof t == "boolean" && n === "string" ? t ? this.addClass(e) : this.removeClass(e) : jQuery.isFunction(e) ? this.each(function(n) {
                    jQuery(this).toggleClass(e.call(this, n, this.className, t), t)
                }) : this.each(function() {
                    if (n === "string") {
                        var t, r = 0,
                            i = jQuery(this),
                            s = e.match(rnotwhite) || [];
                        while (t = s[r++]) i.hasClass(t) ? i.removeClass(t) : i.addClass(t)
                    } else if (n === strundefined || n === "boolean") this.className && data_priv.set(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : data_priv.get(this, "__className__") || ""
                })
            },
            hasClass: function(e) {
                var t = " " + e + " ",
                    n = 0,
                    r = this.length;
                for (; n < r; n++)
                    if (this[n].nodeType === 1 && (" " + this[n].className + " ").replace(rclass, " ").indexOf(t) >= 0) return !0;
                return !1
            }
        });
        var rreturn = /\r/g;
        jQuery.fn.extend({
            val: function(e) {
                var t, n, r, i = this[0];
                if (!arguments.length) {
                    if (i) return t = jQuery.valHooks[i.type] || jQuery.valHooks[i.nodeName.toLowerCase()], t && "get" in t && (n = t.get(i, "value")) !== undefined ? n : (n = i.value, typeof n == "string" ? n.replace(rreturn, "") : n == null ? "" : n);
                    return
                }
                return r = jQuery.isFunction(e), this.each(function(n) {
                    var i;
                    if (this.nodeType !== 1) return;
                    r ? i = e.call(this, n, jQuery(this).val()) : i = e, i == null ? i = "" : typeof i == "number" ? i += "" : jQuery.isArray(i) && (i = jQuery.map(i, function(e) {
                        return e == null ? "" : e + ""
                    })), t = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];
                    if (!t || !("set" in t) || t.set(this, i, "value") === undefined) this.value = i
                })
            }
        }), jQuery.extend({
            valHooks: {
                select: {
                    get: function(e) {
                        var t, n, r = e.options,
                            i = e.selectedIndex,
                            s = e.type === "select-one" || i < 0,
                            o = s ? null : [],
                            u = s ? i + 1 : r.length,
                            a = i < 0 ? u : s ? i : 0;
                        for (; a < u; a++) {
                            n = r[a];
                            if ((n.selected || a === i) && (support.optDisabled ? !n.disabled : n.getAttribute("disabled") === null) && (!n.parentNode.disabled || !jQuery.nodeName(n.parentNode, "optgroup"))) {
                                t = jQuery(n).val();
                                if (s) return t;
                                o.push(t)
                            }
                        }
                        return o
                    },
                    set: function(e, t) {
                        var n, r, i = e.options,
                            s = jQuery.makeArray(t),
                            o = i.length;
                        while (o--) {
                            r = i[o];
                            if (r.selected = jQuery.inArray(jQuery(r).val(), s) >= 0) n = !0
                        }
                        return n || (e.selectedIndex = -1), s
                    }
                }
            }
        }), jQuery.each(["radio", "checkbox"], function() {
            jQuery.valHooks[this] = {
                set: function(e, t) {
                    if (jQuery.isArray(t)) return e.checked = jQuery.inArray(jQuery(e).val(), t) >= 0
                }
            }, support.checkOn || (jQuery.valHooks[this].get = function(e) {
                return e.getAttribute("value") === null ? "on" : e.value
            })
        }), jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
            jQuery.fn[t] = function(e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }), jQuery.fn.extend({
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            },
            bind: function(e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, n, r) {
                return this.on(t, e, n, r)
            },
            undelegate: function(e, t, n) {
                return arguments.length === 1 ? this.off(e, "**") : this.off(t, e || "**", n)
            }
        });
        var nonce = jQuery.now(),
            rquery = /\?/;
        jQuery.parseJSON = function(e) {
            return JSON.parse(e + "")
        }, jQuery.parseXML = function(e) {
            var t, n;
            if (!e || typeof e != "string") return null;
            try {
                n = new DOMParser, t = n.parseFromString(e, "text/xml")
            } catch (r) {
                t = undefined
            }
            return (!t || t.getElementsByTagName("parsererror").length) && jQuery.error("Invalid XML: " + e), t
        };
        var ajaxLocParts, ajaxLocation, rhash = /#.*$/,
            rts = /([?&])_=[^&]*/,
            rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
            rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            rnoContent = /^(?:GET|HEAD)$/,
            rprotocol = /^\/\//,
            rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
            prefilters = {},
            transports = {},
            allTypes = "*/".concat("*");
        try {
            ajaxLocation = location.href
        } catch (e) {
            ajaxLocation = document.createElement("a"), ajaxLocation.href = "", ajaxLocation = ajaxLocation.href
        }
        ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [], jQuery.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: ajaxLocation,
                type: "GET",
                isLocal: rlocalProtocol.test(ajaxLocParts[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": allTypes,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": jQuery.parseJSON,
                    "text xml": jQuery.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? ajaxExtend(ajaxExtend(e, jQuery.ajaxSettings), t) : ajaxExtend(jQuery.ajaxSettings, e)
            },
            ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
            ajaxTransport: addToPrefiltersOrTransports(transports),
            ajax: function(e, t) {
                function S(e, t, s, u) {
                    var f, m, g, b, E, S = t;
                    if (y === 2) return;
                    y = 2, o && clearTimeout(o), n = undefined, i = u || "", w.readyState = e > 0 ? 4 : 0, f = e >= 200 && e < 300 || e === 304, s && (b = ajaxHandleResponses(l, w, s)), b = ajaxConvert(l, b, w, f);
                    if (f) l.ifModified && (E = w.getResponseHeader("Last-Modified"), E && (jQuery.lastModified[r] = E), E = w.getResponseHeader("etag"), E && (jQuery.etag[r] = E)), e === 204 || l.type === "HEAD" ? S = "nocontent" : e === 304 ? S = "notmodified" : (S = b.state, m = b.data, g = b.error, f = !g);
                    else {
                        g = S;
                        if (e || !S) S = "error", e < 0 && (e = 0)
                    }
                    w.status = e, w.statusText = (t || S) + "", f ? p.resolveWith(c, [m, S, w]) : p.rejectWith(c, [w, S, g]), w.statusCode(v), v = undefined, a && h.trigger(f ? "ajaxSuccess" : "ajaxError", [w, l, f ? m : g]), d.fireWith(c, [w, S]), a && (h.trigger("ajaxComplete", [w, l]), --jQuery.active || jQuery.event.trigger("ajaxStop"))
                }
                typeof e == "object" && (t = e, e = undefined), t = t || {};
                var n, r, i, s, o, u, a, f, l = jQuery.ajaxSetup({}, t),
                    c = l.context || l,
                    h = l.context && (c.nodeType || c.jquery) ? jQuery(c) : jQuery.event,
                    p = jQuery.Deferred(),
                    d = jQuery.Callbacks("once memory"),
                    v = l.statusCode || {},
                    m = {},
                    g = {},
                    y = 0,
                    b = "canceled",
                    w = {
                        readyState: 0,
                        getResponseHeader: function(e) {
                            var t;
                            if (y === 2) {
                                if (!s) {
                                    s = {};
                                    while (t = rheaders.exec(i)) s[t[1].toLowerCase()] = t[2]
                                }
                                t = s[e.toLowerCase()]
                            }
                            return t == null ? null : t
                        },
                        getAllResponseHeaders: function() {
                            return y === 2 ? i : null
                        },
                        setRequestHeader: function(e, t) {
                            var n = e.toLowerCase();
                            return y || (e = g[n] = g[n] || e, m[e] = t), this
                        },
                        overrideMimeType: function(e) {
                            return y || (l.mimeType = e), this
                        },
                        statusCode: function(e) {
                            var t;
                            if (e)
                                if (y < 2)
                                    for (t in e) v[t] = [v[t], e[t]];
                                else w.always(e[w.status]);
                            return this
                        },
                        abort: function(e) {
                            var t = e || b;
                            return n && n.abort(t), S(0, t), this
                        }
                    };
                p.promise(w).complete = d.add, w.success = w.done, w.error = w.fail, l.url = ((e || l.url || ajaxLocation) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//"), l.type = t.method || t.type || l.method || l.type, l.dataTypes = jQuery.trim(l.dataType || "*").toLowerCase().match(rnotwhite) || [""], l.crossDomain == null && (u = rurl.exec(l.url.toLowerCase()), l.crossDomain = !(!u || u[1] === ajaxLocParts[1] && u[2] === ajaxLocParts[2] && (u[3] || (u[1] === "http:" ? "80" : "443")) === (ajaxLocParts[3] || (ajaxLocParts[1] === "http:" ? "80" : "443")))), l.data && l.processData && typeof l.data != "string" && (l.data = jQuery.param(l.data, l.traditional)), inspectPrefiltersOrTransports(prefilters, l, t, w);
                if (y === 2) return w;
                a = l.global, a && jQuery.active++ === 0 && jQuery.event.trigger("ajaxStart"), l.type = l.type.toUpperCase(), l.hasContent = !rnoContent.test(l.type), r = l.url, l.hasContent || (l.data && (r = l.url += (rquery.test(r) ? "&" : "?") + l.data, delete l.data), l.cache === !1 && (l.url = rts.test(r) ? r.replace(rts, "$1_=" + nonce++) : r + (rquery.test(r) ? "&" : "?") + "_=" + nonce++)), l.ifModified && (jQuery.lastModified[r] && w.setRequestHeader("If-Modified-Since", jQuery.lastModified[r]), jQuery.etag[r] && w.setRequestHeader("If-None-Match", jQuery.etag[r])), (l.data && l.hasContent && l.contentType !== !1 || t.contentType) && w.setRequestHeader("Content-Type", l.contentType), w.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + (l.dataTypes[0] !== "*" ? ", " + allTypes + "; q=0.01" : "") : l.accepts["*"]);
                for (f in l.headers) w.setRequestHeader(f, l.headers[f]);
                if (!l.beforeSend || l.beforeSend.call(c, w, l) !== !1 && y !== 2) {
                    b = "abort";
                    for (f in {
                            success: 1,
                            error: 1,
                            complete: 1
                        }) w[f](l[f]);
                    n = inspectPrefiltersOrTransports(transports, l, t, w);
                    if (!n) S(-1, "No Transport");
                    else {
                        w.readyState = 1, a && h.trigger("ajaxSend", [w, l]), l.async && l.timeout > 0 && (o = setTimeout(function() {
                            w.abort("timeout")
                        }, l.timeout));
                        try {
                            y = 1, n.send(m, S)
                        } catch (E) {
                            if (!(y < 2)) throw E;
                            S(-1, E)
                        }
                    }
                    return w
                }
                return w.abort()
            },
            getJSON: function(e, t, n) {
                return jQuery.get(e, t, n, "json")
            },
            getScript: function(e, t) {
                return jQuery.get(e, undefined, t, "script")
            }
        }), jQuery.each(["get", "post"], function(e, t) {
            jQuery[t] = function(e, n, r, i) {
                return jQuery.isFunction(n) && (i = i || r, r = n, n = undefined), jQuery.ajax({
                    url: e,
                    type: t,
                    dataType: i,
                    data: n,
                    success: r
                })
            }
        }), jQuery.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
            jQuery.fn[t] = function(e) {
                return this.on(t, e)
            }
        }), jQuery._evalUrl = function(e) {
            return jQuery.ajax({
                url: e,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            })
        }, jQuery.fn.extend({
            wrapAll: function(e) {
                var t;
                return jQuery.isFunction(e) ? this.each(function(t) {
                    jQuery(this).wrapAll(e.call(this, t))
                }) : (this[0] && (t = jQuery(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    var e = this;
                    while (e.firstElementChild) e = e.firstElementChild;
                    return e
                }).append(this)), this)
            },
            wrapInner: function(e) {
                return jQuery.isFunction(e) ? this.each(function(t) {
                    jQuery(this).wrapInner(e.call(this, t))
                }) : this.each(function() {
                    var t = jQuery(this),
                        n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            },
            wrap: function(e) {
                var t = jQuery.isFunction(e);
                return this.each(function(n) {
                    jQuery(this).wrapAll(t ? e.call(this, n) : e)
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    jQuery.nodeName(this, "body") || jQuery(this).replaceWith(this.childNodes)
                }).end()
            }
        }), jQuery.expr.filters.hidden = function(e) {
            return e.offsetWidth <= 0 && e.offsetHeight <= 0
        }, jQuery.expr.filters.visible = function(e) {
            return !jQuery.expr.filters.hidden(e)
        };
        var r20 = /%20/g,
            rbracket = /\[\]$/,
            rCRLF = /\r?\n/g,
            rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
            rsubmittable = /^(?:input|select|textarea|keygen)/i;
        jQuery.param = function(e, t) {
            var n, r = [],
                i = function(e, t) {
                    t = jQuery.isFunction(t) ? t() : t == null ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
                };
            t === undefined && (t = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional);
            if (jQuery.isArray(e) || e.jquery && !jQuery.isPlainObject(e)) jQuery.each(e, function() {
                i(this.name, this.value)
            });
            else
                for (n in e) buildParams(n, e[n], t, i);
            return r.join("&").replace(r20, "+")
        }, jQuery.fn.extend({
            serialize: function() {
                return jQuery.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var e = jQuery.prop(this, "elements");
                    return e ? jQuery.makeArray(e) : this
                }).filter(function() {
                    var e = this.type;
                    return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(e) && (this.checked || !rcheckableType.test(e))
                }).map(function(e, t) {
                    var n = jQuery(this).val();
                    return n == null ? null : jQuery.isArray(n) ? jQuery.map(n, function(e) {
                        return {
                            name: t.name,
                            value: e.replace(rCRLF, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(rCRLF, "\r\n")
                    }
                }).get()
            }
        }), jQuery.ajaxSettings.xhr = function() {
            try {
                return new XMLHttpRequest
            } catch (e) {}
        };
        var xhrId = 0,
            xhrCallbacks = {},
            xhrSuccessStatus = {
                0: 200,
                1223: 204
            },
            xhrSupported = jQuery.ajaxSettings.xhr();
        window.ActiveXObject && jQuery(window).on("unload", function() {
            for (var e in xhrCallbacks) xhrCallbacks[e]()
        }), support.cors = !!xhrSupported && "withCredentials" in xhrSupported, support.ajax = xhrSupported = !!xhrSupported, jQuery.ajaxTransport(function(e) {
            var t;
            if (support.cors || xhrSupported && !e.crossDomain) return {
                send: function(n, r) {
                    var i, s = e.xhr(),
                        o = ++xhrId;
                    s.open(e.type, e.url, e.async, e.username, e.password);
                    if (e.xhrFields)
                        for (i in e.xhrFields) s[i] = e.xhrFields[i];
                    e.mimeType && s.overrideMimeType && s.overrideMimeType(e.mimeType), !e.crossDomain && !n["X-Requested-With"] && (n["X-Requested-With"] = "XMLHttpRequest");
                    for (i in n) s.setRequestHeader(i, n[i]);
                    t = function(e) {
                        return function() {
                            t && (delete xhrCallbacks[o], t = s.onload = s.onerror = null, e === "abort" ? s.abort() : e === "error" ? r(s.status, s.statusText) : r(xhrSuccessStatus[s.status] || s.status, s.statusText, typeof s.responseText == "string" ? {
                                text: s.responseText
                            } : undefined, s.getAllResponseHeaders()))
                        }
                    }, s.onload = t(), s.onerror = t("error"), t = xhrCallbacks[o] = t("abort"), s.send(e.hasContent && e.data || null)
                },
                abort: function() {
                    t && t()
                }
            }
        }), jQuery.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(e) {
                    return jQuery.globalEval(e), e
                }
            }
        }), jQuery.ajaxPrefilter("script", function(e) {
            e.cache === undefined && (e.cache = !1), e.crossDomain && (e.type = "GET")
        }), jQuery.ajaxTransport("script", function(e) {
            if (e.crossDomain) {
                var t, n;
                return {
                    send: function(r, i) {
                        t = jQuery("<script>").prop({
                            async: !0,
                            charset: e.scriptCharset,
                            src: e.url
                        }).on("load error", n = function(e) {
                            t.remove(), n = null, e && i(e.type === "error" ? 404 : 200, e.type)
                        }), document.head.appendChild(t[0])
                    },
                    abort: function() {
                        n && n()
                    }
                }
            }
        });
        var oldCallbacks = [],
            rjsonp = /(=)\?(?=&|$)|\?\?/;
        jQuery.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = oldCallbacks.pop() || jQuery.expando + "_" + nonce++;
                return this[e] = !0, e
            }
        }), jQuery.ajaxPrefilter("json jsonp", function(e, t, n) {
            var r, i, s, o = e.jsonp !== !1 && (rjsonp.test(e.url) ? "url" : typeof e.data == "string" && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && rjsonp.test(e.data) && "data");
            if (o || e.dataTypes[0] === "jsonp") return r = e.jsonpCallback = jQuery.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, o ? e[o] = e[o].replace(rjsonp, "$1" + r) : e.jsonp !== !1 && (e.url += (rquery.test(e.url) ? "&" : "?") + e.jsonp + "=" + r), e.converters["script json"] = function() {
                return s || jQuery.error(r + " was not called"), s[0]
            }, e.dataTypes[0] = "json", i = window[r], window[r] = function() {
                s = arguments
            }, n.always(function() {
                window[r] = i, e[r] && (e.jsonpCallback = t.jsonpCallback, oldCallbacks.push(r)), s && jQuery.isFunction(i) && i(s[0]), s = i = undefined
            }), "script"
        }), jQuery.parseHTML = function(e, t, n) {
            if (!e || typeof e != "string") return null;
            typeof t == "boolean" && (n = t, t = !1), t = t || document;
            var r = rsingleTag.exec(e),
                i = !n && [];
            return r ? [t.createElement(r[1])] : (r = jQuery.buildFragment([e], t, i), i && i.length && jQuery(i).remove(), jQuery.merge([], r.childNodes))
        };
        var _load = jQuery.fn.load;
        jQuery.fn.load = function(e, t, n) {
            if (typeof e != "string" && _load) return _load.apply(this, arguments);
            var r, i, s, o = this,
                u = e.indexOf(" ");
            return u >= 0 && (r = e.slice(u), e = e.slice(0, u)), jQuery.isFunction(t) ? (n = t, t = undefined) : t && typeof t == "object" && (i = "POST"), o.length > 0 && jQuery.ajax({
                url: e,
                type: i,
                dataType: "html",
                data: t
            }).done(function(e) {
                s = arguments, o.html(r ? jQuery("<div>").append(jQuery.parseHTML(e)).find(r) : e)
            }).complete(n && function(e, t) {
                o.each(n, s || [e.responseText, t, e])
            }), this
        }, jQuery.expr.filters.animated = function(e) {
            return jQuery.grep(jQuery.timers, function(t) {
                return e === t.elem
            }).length
        };
        var docElem = window.document.documentElement;
        jQuery.offset = {
            setOffset: function(e, t, n) {
                var r, i, s, o, u, a, f, l = jQuery.css(e, "position"),
                    c = jQuery(e),
                    h = {};
                l === "static" && (e.style.position = "relative"), u = c.offset(), s = jQuery.css(e, "top"), a = jQuery.css(e, "left"), f = (l === "absolute" || l === "fixed") && (s + a).indexOf("auto") > -1, f ? (r = c.position(), o = r.top, i = r.left) : (o = parseFloat(s) || 0, i = parseFloat(a) || 0), jQuery.isFunction(t) && (t = t.call(e, n, u)), t.top != null && (h.top = t.top - u.top + o), t.left != null && (h.left = t.left - u.left + i), "using" in t ? t.using.call(e, h) : c.css(h)
            }
        }, jQuery.fn.extend({
            offset: function(e) {
                if (arguments.length) return e === undefined ? this : this.each(function(t) {
                    jQuery.offset.setOffset(this, e, t)
                });
                var t, n, r = this[0],
                    i = {
                        top: 0,
                        left: 0
                    },
                    s = r && r.ownerDocument;
                if (!s) return;
                return t = s.documentElement, jQuery.contains(t, r) ? (typeof r.getBoundingClientRect !== strundefined && (i = r.getBoundingClientRect()), n = getWindow(s), {
                    top: i.top + n.pageYOffset - t.clientTop,
                    left: i.left + n.pageXOffset - t.clientLeft
                }) : i
            },
            position: function() {
                if (!this[0]) return;
                var e, t, n = this[0],
                    r = {
                        top: 0,
                        left: 0
                    };
                return jQuery.css(n, "position") === "fixed" ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), jQuery.nodeName(e[0], "html") || (r = e.offset()), r.top += jQuery.css(e[0], "borderTopWidth", !0), r.left += jQuery.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - r.top - jQuery.css(n, "marginTop", !0),
                    left: t.left - r.left - jQuery.css(n, "marginLeft", !0)
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    var e = this.offsetParent || docElem;
                    while (e && !jQuery.nodeName(e, "html") && jQuery.css(e, "position") === "static") e = e.offsetParent;
                    return e || docElem
                })
            }
        }), jQuery.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(e, t) {
            var n = "pageYOffset" === t;
            jQuery.fn[e] = function(r) {
                return access(this, function(e, r, i) {
                    var s = getWindow(e);
                    if (i === undefined) return s ? s[t] : e[r];
                    s ? s.scrollTo(n ? window.pageXOffset : i, n ? i : window.pageYOffset) : e[r] = i
                }, e, r, arguments.length, null)
            }
        }), jQuery.each(["top", "left"], function(e, t) {
            jQuery.cssHooks[t] = addGetHookIf(support.pixelPosition, function(e, n) {
                if (n) return n = curCSS(e, t), rnumnonpx.test(n) ? jQuery(e).position()[t] + "px" : n
            })
        }), jQuery.each({
            Height: "height",
            Width: "width"
        }, function(e, t) {
            jQuery.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, function(n, r) {
                jQuery.fn[r] = function(r, i) {
                    var s = arguments.length && (n || typeof r != "boolean"),
                        o = n || (r === !0 || i === !0 ? "margin" : "border");
                    return access(this, function(t, n, r) {
                        var i;
                        return jQuery.isWindow(t) ? t.document.documentElement["client" + e] : t.nodeType === 9 ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : r === undefined ? jQuery.css(t, n, o) : jQuery.style(t, n, r, o)
                    }, t, s ? r : undefined, s, null)
                }
            })
        }), jQuery.fn.size = function() {
            return this.length
        }, jQuery.fn.andSelf = jQuery.fn.addBack, typeof define == "function" && define.amd && define("jquery", [], function() {
            return jQuery
        });
        var _jQuery = window.jQuery,
            _$ = window.$;
        return jQuery.noConflict = function(e) {
            return window.$ === jQuery && (window.$ = _$), e && window.jQuery === jQuery && (window.jQuery = _jQuery), jQuery
        }, typeof noGlobal === strundefined && (window.jQuery = window.$ = jQuery), jQuery
    }),
    function() {
        function x(e) {
            function t(t, n, r, i, s, o) {
                for (; s >= 0 && s < o; s += e) {
                    var u = i ? i[s] : s;
                    r = n(r, t[u], u, t)
                }
                return r
            }
            return function(n, r, i, s) {
                r = v(r, s, 4);
                var o = !S(n) && d.keys(n),
                    u = (o || n).length,
                    a = e > 0 ? 0 : u - 1;
                return arguments.length < 3 && (i = n[o ? o[a] : a], a += e), t(n, r, i, o, a, u)
            }
        }

        function C(e) {
            return function(t, n, r) {
                n = m(n, r);
                var i = E(t),
                    s = e > 0 ? 0 : i - 1;
                for (; s >= 0 && s < i; s += e)
                    if (n(t[s], s, t)) return s;
                return -1
            }
        }

        function k(e, t, n) {
            return function(r, i, s) {
                var u = 0,
                    a = E(r);
                if (typeof s == "number") e > 0 ? u = s >= 0 ? s : Math.max(s + a, u) : a = s >= 0 ? Math.min(s + 1, a) : s + a + 1;
                else if (n && s && a) return s = n(r, i), r[s] === i ? s : -1;
                if (i !== i) return s = t(o.call(r, u, a), d.isNaN), s >= 0 ? s + u : -1;
                for (s = e > 0 ? u : a - 1; s >= 0 && s < a; s += e)
                    if (r[s] === i) return s;
                return -1
            }
        }

        function M(e, t) {
            var n = O.length,
                i = e.constructor,
                s = d.isFunction(i) && i.prototype || r,
                o = "constructor";
            d.has(e, o) && !d.contains(t, o) && t.push(o);
            while (n--) o = O[n], o in e && e[o] !== s[o] && !d.contains(t, o) && t.push(o)
        }
        var e = this,
            t = e._,
            n = Array.prototype,
            r = Object.prototype,
            i = Function.prototype,
            s = n.push,
            o = n.slice,
            u = r.toString,
            a = r.hasOwnProperty,
            f = Array.isArray,
            l = Object.keys,
            c = i.bind,
            h = Object.create,
            p = function() {},
            d = function(e) {
                if (e instanceof d) return e;
                if (!(this instanceof d)) return new d(e);
                this._wrapped = e
            };
        typeof exports != "undefined" ? (typeof module != "undefined" && module.exports && (exports = module.exports = d), exports._ = d) : e._ = d, d.VERSION = "1.8.3";
        var v = function(e, t, n) {
                if (t === void 0) return e;
                switch (n == null ? 3 : n) {
                    case 1:
                        return function(n) {
                            return e.call(t, n)
                        };
                    case 2:
                        return function(n, r) {
                            return e.call(t, n, r)
                        };
                    case 3:
                        return function(n, r, i) {
                            return e.call(t, n, r, i)
                        };
                    case 4:
                        return function(n, r, i, s) {
                            return e.call(t, n, r, i, s)
                        }
                }
                return function() {
                    return e.apply(t, arguments)
                }
            },
            m = function(e, t, n) {
                return e == null ? d.identity : d.isFunction(e) ? v(e, t, n) : d.isObject(e) ? d.matcher(e) : d.property(e)
            };
        d.iteratee = function(e, t) {
            return m(e, t, Infinity)
        };
        var g = function(e, t) {
                return function(n) {
                    var r = arguments.length;
                    if (r < 2 || n == null) return n;
                    for (var i = 1; i < r; i++) {
                        var s = arguments[i],
                            o = e(s),
                            u = o.length;
                        for (var a = 0; a < u; a++) {
                            var f = o[a];
                            if (!t || n[f] === void 0) n[f] = s[f]
                        }
                    }
                    return n
                }
            },
            y = function(e) {
                if (!d.isObject(e)) return {};
                if (h) return h(e);
                p.prototype = e;
                var t = new p;
                return p.prototype = null, t
            },
            b = function(e) {
                return function(t) {
                    return t == null ? void 0 : t[e]
                }
            },
            w = Math.pow(2, 53) - 1,
            E = b("length"),
            S = function(e) {
                var t = E(e);
                return typeof t == "number" && t >= 0 && t <= w
            };
        d.each = d.forEach = function(e, t, n) {
            t = v(t, n);
            var r, i;
            if (S(e))
                for (r = 0, i = e.length; r < i; r++) t(e[r], r, e);
            else {
                var s = d.keys(e);
                for (r = 0, i = s.length; r < i; r++) t(e[s[r]], s[r], e)
            }
            return e
        }, d.map = d.collect = function(e, t, n) {
            t = m(t, n);
            var r = !S(e) && d.keys(e),
                i = (r || e).length,
                s = Array(i);
            for (var o = 0; o < i; o++) {
                var u = r ? r[o] : o;
                s[o] = t(e[u], u, e)
            }
            return s
        }, d.reduce = d.foldl = d.inject = x(1), d.reduceRight = d.foldr = x(-1), d.find = d.detect = function(e, t, n) {
            var r;
            S(e) ? r = d.findIndex(e, t, n) : r = d.findKey(e, t, n);
            if (r !== void 0 && r !== -1) return e[r]
        }, d.filter = d.select = function(e, t, n) {
            var r = [];
            return t = m(t, n), d.each(e, function(e, n, i) {
                t(e, n, i) && r.push(e)
            }), r
        }, d.reject = function(e, t, n) {
            return d.filter(e, d.negate(m(t)), n)
        }, d.every = d.all = function(e, t, n) {
            t = m(t, n);
            var r = !S(e) && d.keys(e),
                i = (r || e).length;
            for (var s = 0; s < i; s++) {
                var o = r ? r[s] : s;
                if (!t(e[o], o, e)) return !1
            }
            return !0
        }, d.some = d.any = function(e, t, n) {
            t = m(t, n);
            var r = !S(e) && d.keys(e),
                i = (r || e).length;
            for (var s = 0; s < i; s++) {
                var o = r ? r[s] : s;
                if (t(e[o], o, e)) return !0
            }
            return !1
        }, d.contains = d.includes = d.include = function(e, t, n, r) {
            S(e) || (e = d.values(e));
            if (typeof n != "number" || r) n = 0;
            return d.indexOf(e, t, n) >= 0
        }, d.invoke = function(e, t) {
            var n = o.call(arguments, 2),
                r = d.isFunction(t);
            return d.map(e, function(e) {
                var i = r ? t : e[t];
                return i == null ? i : i.apply(e, n)
            })
        }, d.pluck = function(e, t) {
            return d.map(e, d.property(t))
        }, d.where = function(e, t) {
            return d.filter(e, d.matcher(t))
        }, d.findWhere = function(e, t) {
            return d.find(e, d.matcher(t))
        }, d.max = function(e, t, n) {
            var r = -Infinity,
                i = -Infinity,
                s, o;
            if (t == null && e != null) {
                e = S(e) ? e : d.values(e);
                for (var u = 0, a = e.length; u < a; u++) s = e[u], s > r && (r = s)
            } else t = m(t, n), d.each(e, function(e, n, s) {
                o = t(e, n, s);
                if (o > i || o === -Infinity && r === -Infinity) r = e, i = o
            });
            return r
        }, d.min = function(e, t, n) {
            var r = Infinity,
                i = Infinity,
                s, o;
            if (t == null && e != null) {
                e = S(e) ? e : d.values(e);
                for (var u = 0, a = e.length; u < a; u++) s = e[u], s < r && (r = s)
            } else t = m(t, n), d.each(e, function(e, n, s) {
                o = t(e, n, s);
                if (o < i || o === Infinity && r === Infinity) r = e, i = o
            });
            return r
        }, d.shuffle = function(e) {
            var t = S(e) ? e : d.values(e),
                n = t.length,
                r = Array(n);
            for (var i = 0, s; i < n; i++) s = d.random(0, i), s !== i && (r[i] = r[s]), r[s] = t[i];
            return r
        }, d.sample = function(e, t, n) {
            return t == null || n ? (S(e) || (e = d.values(e)), e[d.random(e.length - 1)]) : d.shuffle(e).slice(0, Math.max(0, t))
        }, d.sortBy = function(e, t, n) {
            return t = m(t, n), d.pluck(d.map(e, function(e, n, r) {
                return {
                    value: e,
                    index: n,
                    criteria: t(e, n, r)
                }
            }).sort(function(e, t) {
                var n = e.criteria,
                    r = t.criteria;
                if (n !== r) {
                    if (n > r || n === void 0) return 1;
                    if (n < r || r === void 0) return -1
                }
                return e.index - t.index
            }), "value")
        };
        var T = function(e) {
            return function(t, n, r) {
                var i = {};
                return n = m(n, r), d.each(t, function(r, s) {
                    var o = n(r, s, t);
                    e(i, r, o)
                }), i
            }
        };
        d.groupBy = T(function(e, t, n) {
            d.has(e, n) ? e[n].push(t) : e[n] = [t]
        }), d.indexBy = T(function(e, t, n) {
            e[n] = t
        }), d.countBy = T(function(e, t, n) {
            d.has(e, n) ? e[n]++ : e[n] = 1
        }), d.toArray = function(e) {
            return e ? d.isArray(e) ? o.call(e) : S(e) ? d.map(e, d.identity) : d.values(e) : []
        }, d.size = function(e) {
            return e == null ? 0 : S(e) ? e.length : d.keys(e).length
        }, d.partition = function(e, t, n) {
            t = m(t, n);
            var r = [],
                i = [];
            return d.each(e, function(e, n, s) {
                (t(e, n, s) ? r : i).push(e)
            }), [r, i]
        }, d.first = d.head = d.take = function(e, t, n) {
            return e == null ? void 0 : t == null || n ? e[0] : d.initial(e, e.length - t)
        }, d.initial = function(e, t, n) {
            return o.call(e, 0, Math.max(0, e.length - (t == null || n ? 1 : t)))
        }, d.last = function(e, t, n) {
            return e == null ? void 0 : t == null || n ? e[e.length - 1] : d.rest(e, Math.max(0, e.length - t))
        }, d.rest = d.tail = d.drop = function(e, t, n) {
            return o.call(e, t == null || n ? 1 : t)
        }, d.compact = function(e) {
            return d.filter(e, d.identity)
        };
        var N = function(e, t, n, r) {
            var i = [],
                s = 0;
            for (var o = r || 0, u = E(e); o < u; o++) {
                var a = e[o];
                if (S(a) && (d.isArray(a) || d.isArguments(a))) {
                    t || (a = N(a, t, n));
                    var f = 0,
                        l = a.length;
                    i.length += l;
                    while (f < l) i[s++] = a[f++]
                } else n || (i[s++] = a)
            }
            return i
        };
        d.flatten = function(e, t) {
            return N(e, t, !1)
        }, d.without = function(e) {
            return d.difference(e, o.call(arguments, 1))
        }, d.uniq = d.unique = function(e, t, n, r) {
            d.isBoolean(t) || (r = n, n = t, t = !1), n != null && (n = m(n, r));
            var i = [],
                s = [];
            for (var o = 0, u = E(e); o < u; o++) {
                var a = e[o],
                    f = n ? n(a, o, e) : a;
                t ? ((!o || s !== f) && i.push(a), s = f) : n ? d.contains(s, f) || (s.push(f), i.push(a)) : d.contains(i, a) || i.push(a)
            }
            return i
        }, d.union = function() {
            return d.uniq(N(arguments, !0, !0))
        }, d.intersection = function(e) {
            var t = [],
                n = arguments.length;
            for (var r = 0, i = E(e); r < i; r++) {
                var s = e[r];
                if (d.contains(t, s)) continue;
                for (var o = 1; o < n; o++)
                    if (!d.contains(arguments[o], s)) break;
                o === n && t.push(s)
            }
            return t
        }, d.difference = function(e) {
            var t = N(arguments, !0, !0, 1);
            return d.filter(e, function(e) {
                return !d.contains(t, e)
            })
        }, d.zip = function() {
            return d.unzip(arguments)
        }, d.unzip = function(e) {
            var t = e && d.max(e, E).length || 0,
                n = Array(t);
            for (var r = 0; r < t; r++) n[r] = d.pluck(e, r);
            return n
        }, d.object = function(e, t) {
            var n = {};
            for (var r = 0, i = E(e); r < i; r++) t ? n[e[r]] = t[r] : n[e[r][0]] = e[r][1];
            return n
        }, d.findIndex = C(1), d.findLastIndex = C(-1), d.sortedIndex = function(e, t, n, r) {
            n = m(n, r, 1);
            var i = n(t),
                s = 0,
                o = E(e);
            while (s < o) {
                var u = Math.floor((s + o) / 2);
                n(e[u]) < i ? s = u + 1 : o = u
            }
            return s
        }, d.indexOf = k(1, d.findIndex, d.sortedIndex), d.lastIndexOf = k(-1, d.findLastIndex), d.range = function(e, t, n) {
            t == null && (t = e || 0, e = 0), n = n || 1;
            var r = Math.max(Math.ceil((t - e) / n), 0),
                i = Array(r);
            for (var s = 0; s < r; s++, e += n) i[s] = e;
            return i
        };
        var L = function(e, t, n, r, i) {
            if (r instanceof t) {
                var s = y(e.prototype),
                    o = e.apply(s, i);
                return d.isObject(o) ? o : s
            }
            return e.apply(n, i)
        };
        d.bind = function(e, t) {
            if (c && e.bind === c) return c.apply(e, o.call(arguments, 1));
            if (!d.isFunction(e)) throw new TypeError("Bind must be called on a function");
            var n = o.call(arguments, 2),
                r = function() {
                    return L(e, r, t, this, n.concat(o.call(arguments)))
                };
            return r
        }, d.partial = function(e) {
            var t = o.call(arguments, 1),
                n = function() {
                    var r = 0,
                        i = t.length,
                        s = Array(i);
                    for (var o = 0; o < i; o++) s[o] = t[o] === d ? arguments[r++] : t[o];
                    while (r < arguments.length) s.push(arguments[r++]);
                    return L(e, n, this, this, s)
                };
            return n
        }, d.bindAll = function(e) {
            var t, n = arguments.length,
                r;
            if (n <= 1) throw new Error("bindAll must be passed function names");
            for (t = 1; t < n; t++) r = arguments[t], e[r] = d.bind(e[r], e);
            return e
        }, d.memoize = function(e, t) {
            var n = function(r) {
                var i = n.cache,
                    s = "" + (t ? t.apply(this, arguments) : r);
                return d.has(i, s) || (i[s] = e.apply(this, arguments)), i[s]
            };
            return n.cache = {}, n
        }, d.delay = function(e, t) {
            var n = o.call(arguments, 2);
            return setTimeout(function() {
                return e.apply(null, n)
            }, t)
        }, d.defer = d.partial(d.delay, d, 1), d.throttle = function(e, t, n) {
            var r, i, s, o = null,
                u = 0;
            n || (n = {});
            var a = function() {
                u = n.leading === !1 ? 0 : d.now(), o = null, s = e.apply(r, i), o || (r = i = null)
            };
            return function() {
                var f = d.now();
                !u && n.leading === !1 && (u = f);
                var l = t - (f - u);
                return r = this, i = arguments, l <= 0 || l > t ? (o && (clearTimeout(o), o = null), u = f, s = e.apply(r, i), o || (r = i = null)) : !o && n.trailing !== !1 && (o = setTimeout(a, l)), s
            }
        }, d.debounce = function(e, t, n) {
            var r, i, s, o, u, a = function() {
                var f = d.now() - o;
                f < t && f >= 0 ? r = setTimeout(a, t - f) : (r = null, n || (u = e.apply(s, i), r || (s = i = null)))
            };
            return function() {
                s = this, i = arguments, o = d.now();
                var f = n && !r;
                return r || (r = setTimeout(a, t)), f && (u = e.apply(s, i), s = i = null), u
            }
        }, d.wrap = function(e, t) {
            return d.partial(t, e)
        }, d.negate = function(e) {
            return function() {
                return !e.apply(this, arguments)
            }
        }, d.compose = function() {
            var e = arguments,
                t = e.length - 1;
            return function() {
                var n = t,
                    r = e[t].apply(this, arguments);
                while (n--) r = e[n].call(this, r);
                return r
            }
        }, d.after = function(e, t) {
            return function() {
                if (--e < 1) return t.apply(this, arguments)
            }
        }, d.before = function(e, t) {
            var n;
            return function() {
                return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = null), n
            }
        }, d.once = d.partial(d.before, 2);
        var A = !{
                toString: null
            }.propertyIsEnumerable("toString"),
            O = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        d.keys = function(e) {
            if (!d.isObject(e)) return [];
            if (l) return l(e);
            var t = [];
            for (var n in e) d.has(e, n) && t.push(n);
            return A && M(e, t), t
        }, d.allKeys = function(e) {
            if (!d.isObject(e)) return [];
            var t = [];
            for (var n in e) t.push(n);
            return A && M(e, t), t
        }, d.values = function(e) {
            var t = d.keys(e),
                n = t.length,
                r = Array(n);
            for (var i = 0; i < n; i++) r[i] = e[t[i]];
            return r
        }, d.mapObject = function(e, t, n) {
            t = m(t, n);
            var r = d.keys(e),
                i = r.length,
                s = {},
                o;
            for (var u = 0; u < i; u++) o = r[u], s[o] = t(e[o], o, e);
            return s
        }, d.pairs = function(e) {
            var t = d.keys(e),
                n = t.length,
                r = Array(n);
            for (var i = 0; i < n; i++) r[i] = [t[i], e[t[i]]];
            return r
        }, d.invert = function(e) {
            var t = {},
                n = d.keys(e);
            for (var r = 0, i = n.length; r < i; r++) t[e[n[r]]] = n[r];
            return t
        }, d.functions = d.methods = function(e) {
            var t = [];
            for (var n in e) d.isFunction(e[n]) && t.push(n);
            return t.sort()
        }, d.extend = g(d.allKeys), d.extendOwn = d.assign = g(d.keys), d.findKey = function(e, t, n) {
            t = m(t, n);
            var r = d.keys(e),
                i;
            for (var s = 0, o = r.length; s < o; s++) {
                i = r[s];
                if (t(e[i], i, e)) return i
            }
        }, d.pick = function(e, t, n) {
            var r = {},
                i = e,
                s, o;
            if (i == null) return r;
            d.isFunction(t) ? (o = d.allKeys(i), s = v(t, n)) : (o = N(arguments, !1, !1, 1), s = function(e, t, n) {
                return t in n
            }, i = Object(i));
            for (var u = 0, a = o.length; u < a; u++) {
                var f = o[u],
                    l = i[f];
                s(l, f, i) && (r[f] = l)
            }
            return r
        }, d.omit = function(e, t, n) {
            if (d.isFunction(t)) t = d.negate(t);
            else {
                var r = d.map(N(arguments, !1, !1, 1), String);
                t = function(e, t) {
                    return !d.contains(r, t)
                }
            }
            return d.pick(e, t, n)
        }, d.defaults = g(d.allKeys, !0), d.create = function(e, t) {
            var n = y(e);
            return t && d.extendOwn(n, t), n
        }, d.clone = function(e) {
            return d.isObject(e) ? d.isArray(e) ? e.slice() : d.extend({}, e) : e
        }, d.tap = function(e, t) {
            return t(e), e
        }, d.isMatch = function(e, t) {
            var n = d.keys(t),
                r = n.length;
            if (e == null) return !r;
            var i = Object(e);
            for (var s = 0; s < r; s++) {
                var o = n[s];
                if (t[o] !== i[o] || !(o in i)) return !1
            }
            return !0
        };
        var _ = function(e, t, n, r) {
            if (e === t) return e !== 0 || 1 / e === 1 / t;
            if (e == null || t == null) return e === t;
            e instanceof d && (e = e._wrapped), t instanceof d && (t = t._wrapped);
            var i = u.call(e);
            if (i !== u.call(t)) return !1;
            switch (i) {
                case "[object RegExp]":
                case "[object String]":
                    return "" + e == "" + t;
                case "[object Number]":
                    if (+e !== +e) return +t !== +t;
                    return +e === 0 ? 1 / +e === 1 / t : +e === +t;
                case "[object Date]":
                case "[object Boolean]":
                    return +e === +t
            }
            var s = i === "[object Array]";
            if (!s) {
                if (typeof e != "object" || typeof t != "object") return !1;
                var o = e.constructor,
                    a = t.constructor;
                if (o !== a && !(d.isFunction(o) && o instanceof o && d.isFunction(a) && a instanceof a) && "constructor" in e && "constructor" in t) return !1
            }
            n = n || [], r = r || [];
            var f = n.length;
            while (f--)
                if (n[f] === e) return r[f] === t;
            n.push(e), r.push(t);
            if (s) {
                f = e.length;
                if (f !== t.length) return !1;
                while (f--)
                    if (!_(e[f], t[f], n, r)) return !1
            } else {
                var l = d.keys(e),
                    c;
                f = l.length;
                if (d.keys(t).length !== f) return !1;
                while (f--) {
                    c = l[f];
                    if (!d.has(t, c) || !_(e[c], t[c], n, r)) return !1
                }
            }
            return n.pop(), r.pop(), !0
        };
        d.isEqual = function(e, t) {
            return _(e, t)
        }, d.isEmpty = function(e) {
            return e == null ? !0 : S(e) && (d.isArray(e) || d.isString(e) || d.isArguments(e)) ? e.length === 0 : d.keys(e).length === 0
        }, d.isElement = function(e) {
            return !!e && e.nodeType === 1
        }, d.isArray = f || function(e) {
            return u.call(e) === "[object Array]"
        }, d.isObject = function(e) {
            var t = typeof e;
            return t === "function" || t === "object" && !!e
        }, d.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(e) {
            d["is" + e] = function(t) {
                return u.call(t) === "[object " + e + "]"
            }
        }), d.isArguments(arguments) || (d.isArguments = function(e) {
            return d.has(e, "callee")
        }), typeof /./ != "function" && typeof Int8Array != "object" && (d.isFunction = function(e) {
            return typeof e == "function" || !1
        }), d.isFinite = function(e) {
            return isFinite(e) && !isNaN(parseFloat(e))
        }, d.isNaN = function(e) {
            return d.isNumber(e) && e !== +e
        }, d.isBoolean = function(e) {
            return e === !0 || e === !1 || u.call(e) === "[object Boolean]"
        }, d.isNull = function(e) {
            return e === null
        }, d.isUndefined = function(e) {
            return e === void 0
        }, d.has = function(e, t) {
            return e != null && a.call(e, t)
        }, d.noConflict = function() {
            return e._ = t, this
        }, d.identity = function(e) {
            return e
        }, d.constant = function(e) {
            return function() {
                return e
            }
        }, d.noop = function() {}, d.property = b, d.propertyOf = function(e) {
            return e == null ? function() {} : function(t) {
                return e[t]
            }
        }, d.matcher = d.matches = function(e) {
            return e = d.extendOwn({}, e),
                function(t) {
                    return d.isMatch(t, e)
                }
        }, d.times = function(e, t, n) {
            var r = Array(Math.max(0, e));
            t = v(t, n, 1);
            for (var i = 0; i < e; i++) r[i] = t(i);
            return r
        }, d.random = function(e, t) {
            return t == null && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1))
        }, d.now = Date.now || function() {
            return (new Date).getTime()
        };
        var D = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            },
            P = d.invert(D),
            H = function(e) {
                var t = function(t) {
                        return e[t]
                    },
                    n = "(?:" + d.keys(e).join("|") + ")",
                    r = RegExp(n),
                    i = RegExp(n, "g");
                return function(e) {
                    return e = e == null ? "" : "" + e, r.test(e) ? e.replace(i, t) : e
                }
            };
        d.escape = H(D), d.unescape = H(P), d.result = function(e, t, n) {
            var r = e == null ? void 0 : e[t];
            return r === void 0 && (r = n), d.isFunction(r) ? r.call(e) : r
        };
        var B = 0;
        d.uniqueId = function(e) {
            var t = ++B + "";
            return e ? e + t : t
        }, d.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var j = /(.)^/,
            F = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            I = /\\|'|\r|\n|\u2028|\u2029/g,
            q = function(e) {
                return "\\" + F[e]
            };
        d.template = function(e, t, n) {
            !t && n && (t = n), t = d.defaults({}, t, d.templateSettings);
            var r = RegExp([(t.escape || j).source, (t.interpolate || j).source, (t.evaluate || j).source].join("|") + "|$", "g"),
                i = 0,
                s = "__p+='";
            e.replace(r, function(t, n, r, o, u) {
                return s += e.slice(i, u).replace(I, q), i = u + t.length, n ? s += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : r ? s += "'+\n((__t=(" + r + "))==null?'':__t)+\n'" : o && (s += "';\n" + o + "\n__p+='"), t
            }), s += "';\n", t.variable || (s = "with(obj||{}){\n" + s + "}\n"), s = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + s + "return __p;\n";
            try {
                var o = new Function(t.variable || "obj", "_", s)
            } catch (u) {
                throw u.source = s, u
            }
            var a = function(e) {
                    return o.call(this, e, d)
                },
                f = t.variable || "obj";
            return a.source = "function(" + f + "){\n" + s + "}", a
        }, d.chain = function(e) {
            var t = d(e);
            return t._chain = !0, t
        };
        var R = function(e, t) {
            return e._chain ? d(t).chain() : t
        };
        d.mixin = function(e) {
            d.each(d.functions(e), function(t) {
                var n = d[t] = e[t];
                d.prototype[t] = function() {
                    var e = [this._wrapped];
                    return s.apply(e, arguments), R(this, n.apply(d, e))
                }
            })
        }, d.mixin(d), d.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(e) {
            var t = n[e];
            d.prototype[e] = function() {
                var n = this._wrapped;
                return t.apply(n, arguments), (e === "shift" || e === "splice") && n.length === 0 && delete n[0], R(this, n)
            }
        }), d.each(["concat", "join", "slice"], function(e) {
            var t = n[e];
            d.prototype[e] = function() {
                return R(this, t.apply(this._wrapped, arguments))
            }
        }), d.prototype.value = function() {
            return this._wrapped
        }, d.prototype.valueOf = d.prototype.toJSON = d.prototype.value, d.prototype.toString = function() {
            return "" + this._wrapped
        }, typeof define == "function" && define.amd && define("underscore", [], function() {
            return d
        })
    }.call(this),
    function(e, t) {
        if (typeof define == "function" && define.amd) define("backbone", ["underscore", "jquery", "exports"], function(n, r, i) {
            e.Backbone = t(e, i, n, r)
        });
        else if (typeof exports != "undefined") {
            var n = require("underscore");
            t(e, exports, n)
        } else e.Backbone = t(e, {}, e._, e.jQuery || e.Zepto || e.ender || e.$)
    }(this, function(e, t, n, r) {
        var i = e.Backbone,
            s = [],
            o = s.push,
            u = s.slice,
            a = s.splice;
        t.VERSION = "1.1.2", t.$ = r, t.noConflict = function() {
            return e.Backbone = i, this
        }, t.emulateHTTP = !1, t.emulateJSON = !1;
        var f = t.Events = {
                on: function(e, t, n) {
                    if (!c(this, "on", e, [t, n]) || !t) return this;
                    this._events || (this._events = {});
                    var r = this._events[e] || (this._events[e] = []);
                    return r.push({
                        callback: t,
                        context: n,
                        ctx: n || this
                    }), this
                },
                once: function(e, t, r) {
                    if (!c(this, "once", e, [t, r]) || !t) return this;
                    var i = this,
                        s = n.once(function() {
                            i.off(e, s), t.apply(this, arguments)
                        });
                    return s._callback = t, this.on(e, s, r)
                },
                off: function(e, t, r) {
                    var i, s, o, u, a, f, l, h;
                    if (!this._events || !c(this, "off", e, [t, r])) return this;
                    if (!e && !t && !r) return this._events = void 0, this;
                    u = e ? [e] : n.keys(this._events);
                    for (a = 0, f = u.length; a < f; a++) {
                        e = u[a];
                        if (o = this._events[e]) {
                            this._events[e] = i = [];
                            if (t || r)
                                for (l = 0, h = o.length; l < h; l++) s = o[l], (t && t !== s.callback && t !== s.callback._callback || r && r !== s.context) && i.push(s);
                            i.length || delete this._events[e]
                        }
                    }
                    return this
                },
                trigger: function(e) {
                    if (!this._events) return this;
                    var t = u.call(arguments, 1);
                    if (!c(this, "trigger", e, t)) return this;
                    var n = this._events[e],
                        r = this._events.all;
                    return n && h(n, t), r && h(r, arguments), this
                },
                stopListening: function(e, t, r) {
                    var i = this._listeningTo;
                    if (!i) return this;
                    var s = !t && !r;
                    !r && typeof t == "object" && (r = this), e && ((i = {})[e._listenId] = e);
                    for (var o in i) e = i[o], e.off(t, r, this), (s || n.isEmpty(e._events)) && delete this._listeningTo[o];
                    return this
                }
            },
            l = /\s+/,
            c = function(e, t, n, r) {
                if (!n) return !0;
                if (typeof n == "object") {
                    for (var i in n) e[t].apply(e, [i, n[i]].concat(r));
                    return !1
                }
                if (l.test(n)) {
                    var s = n.split(l);
                    for (var o = 0, u = s.length; o < u; o++) e[t].apply(e, [s[o]].concat(r));
                    return !1
                }
                return !0
            },
            h = function(e, t) {
                var n, r = -1,
                    i = e.length,
                    s = t[0],
                    o = t[1],
                    u = t[2];
                switch (t.length) {
                    case 0:
                        while (++r < i)(n = e[r]).callback.call(n.ctx);
                        return;
                    case 1:
                        while (++r < i)(n = e[r]).callback.call(n.ctx, s);
                        return;
                    case 2:
                        while (++r < i)(n = e[r]).callback.call(n.ctx, s, o);
                        return;
                    case 3:
                        while (++r < i)(n = e[r]).callback.call(n.ctx, s, o, u);
                        return;
                    default:
                        while (++r < i)(n = e[r]).callback.apply(n.ctx, t);
                        return
                }
            },
            p = {
                listenTo: "on",
                listenToOnce: "once"
            };
        n.each(p, function(e, t) {
            f[t] = function(t, r, i) {
                var s = this._listeningTo || (this._listeningTo = {}),
                    o = t._listenId || (t._listenId = n.uniqueId("l"));
                return s[o] = t, !i && typeof r == "object" && (i = this), t[e](r, i, this), this
            }
        }), f.bind = f.on, f.unbind = f.off, n.extend(t, f);
        var d = t.Model = function(e, t) {
            var r = e || {};
            t || (t = {}), this.cid = n.uniqueId("c"), this.attributes = {}, t.collection && (this.collection = t.collection), t.parse && (r = this.parse(r, t) || {}), r = n.defaults({}, r, n.result(this, "defaults")), this.set(r, t), this.changed = {}, this.initialize.apply(this, arguments)
        };
        n.extend(d.prototype, f, {
            changed: null,
            validationError: null,
            idAttribute: "id",
            initialize: function() {},
            toJSON: function(e) {
                return n.clone(this.attributes)
            },
            sync: function() {
                return t.sync.apply(this, arguments)
            },
            get: function(e) {
                return this.attributes[e]
            },
            escape: function(e) {
                return n.escape(this.get(e))
            },
            has: function(e) {
                return this.get(e) != null
            },
            set: function(e, t, r) {
                var i, s, o, u, a, f, l, c;
                if (e == null) return this;
                typeof e == "object" ? (s = e, r = t) : (s = {})[e] = t, r || (r = {});
                if (!this._validate(s, r)) return !1;
                o = r.unset, a = r.silent, u = [], f = this._changing, this._changing = !0, f || (this._previousAttributes = n.clone(this.attributes), this.changed = {}), c = this.attributes, l = this._previousAttributes, this.idAttribute in s && (this.id = s[this.idAttribute]);
                for (i in s) t = s[i], n.isEqual(c[i], t) || u.push(i), n.isEqual(l[i], t) ? delete this.changed[i] : this.changed[i] = t, o ? delete c[i] : c[i] = t;
                if (!a) {
                    u.length && (this._pending = r);
                    for (var h = 0, p = u.length; h < p; h++) this.trigger("change:" + u[h], this, c[u[h]], r)
                }
                if (f) return this;
                if (!a)
                    while (this._pending) r = this._pending, this._pending = !1, this.trigger("change", this, r);
                return this._pending = !1, this._changing = !1, this
            },
            unset: function(e, t) {
                return this.set(e, void 0, n.extend({}, t, {
                    unset: !0
                }))
            },
            clear: function(e) {
                var t = {};
                for (var r in this.attributes) t[r] = void 0;
                return this.set(t, n.extend({}, e, {
                    unset: !0
                }))
            },
            hasChanged: function(e) {
                return e == null ? !n.isEmpty(this.changed) : n.has(this.changed, e)
            },
            changedAttributes: function(e) {
                if (!e) return this.hasChanged() ? n.clone(this.changed) : !1;
                var t, r = !1,
                    i = this._changing ? this._previousAttributes : this.attributes;
                for (var s in e) {
                    if (n.isEqual(i[s], t = e[s])) continue;
                    (r || (r = {}))[s] = t
                }
                return r
            },
            previous: function(e) {
                return e == null || !this._previousAttributes ? null : this._previousAttributes[e]
            },
            previousAttributes: function() {
                return n.clone(this._previousAttributes)
            },
            fetch: function(e) {
                e = e ? n.clone(e) : {}, e.parse === void 0 && (e.parse = !0);
                var t = this,
                    r = e.success;
                return e.success = function(n) {
                    if (!t.set(t.parse(n, e), e)) return !1;
                    r && r(t, n, e), t.trigger("sync", t, n, e)
                }, I(this, e), this.sync("read", this, e)
            },
            save: function(e, t, r) {
                var i, s, o, u = this.attributes;
                e == null || typeof e == "object" ? (i = e, r = t) : (i = {})[e] = t, r = n.extend({
                    validate: !0
                }, r);
                if (i && !r.wait) {
                    if (!this.set(i, r)) return !1
                } else if (!this._validate(i, r)) return !1;
                i && r.wait && (this.attributes = n.extend({}, u, i)), r.parse === void 0 && (r.parse = !0);
                var a = this,
                    f = r.success;
                return r.success = function(e) {
                    a.attributes = u;
                    var t = a.parse(e, r);
                    r.wait && (t = n.extend(i || {}, t));
                    if (n.isObject(t) && !a.set(t, r)) return !1;
                    f && f(a, e, r), a.trigger("sync", a, e, r)
                }, I(this, r), s = this.isNew() ? "create" : r.patch ? "patch" : "update", s === "patch" && (r.attrs = i), o = this.sync(s, this, r), i && r.wait && (this.attributes = u), o
            },
            destroy: function(e) {
                e = e ? n.clone(e) : {};
                var t = this,
                    r = e.success,
                    i = function() {
                        t.trigger("destroy", t, t.collection, e)
                    };
                e.success = function(n) {
                    (e.wait || t.isNew()) && i(), r && r(t, n, e), t.isNew() || t.trigger("sync", t, n, e)
                };
                if (this.isNew()) return e.success(), !1;
                I(this, e);
                var s = this.sync("delete", this, e);
                return e.wait || i(), s
            },
            url: function() {
                var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || F();
                return this.isNew() ? e : e.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id)
            },
            parse: function(e, t) {
                return e
            },
            clone: function() {
                return new this.constructor(this.attributes)
            },
            isNew: function() {
                return !this.has(this.idAttribute)
            },
            isValid: function(e) {
                return this._validate({}, n.extend(e || {}, {
                    validate: !0
                }))
            },
            _validate: function(e, t) {
                if (!t.validate || !this.validate) return !0;
                e = n.extend({}, this.attributes, e);
                var r = this.validationError = this.validate(e, t) || null;
                return r ? (this.trigger("invalid", this, r, n.extend(t, {
                    validationError: r
                })), !1) : !0
            }
        });
        var v = ["keys", "values", "pairs", "invert", "pick", "omit"];
        n.each(v, function(e) {
            d.prototype[e] = function() {
                var t = u.call(arguments);
                return t.unshift(this.attributes), n[e].apply(n, t)
            }
        });
        var m = t.Collection = function(e, t) {
                t || (t = {}), t.model && (this.model = t.model), t.comparator !== void 0 && (this.comparator = t.comparator), this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, n.extend({
                    silent: !0
                }, t))
            },
            g = {
                add: !0,
                remove: !0,
                merge: !0
            },
            y = {
                add: !0,
                remove: !1
            };
        n.extend(m.prototype, f, {
            model: d,
            initialize: function() {},
            toJSON: function(e) {
                return this.map(function(t) {
                    return t.toJSON(e)
                })
            },
            sync: function() {
                return t.sync.apply(this, arguments)
            },
            add: function(e, t) {
                return this.set(e, n.extend({
                    merge: !1
                }, t, y))
            },
            remove: function(e, t) {
                var r = !n.isArray(e);
                e = r ? [e] : n.clone(e), t || (t = {});
                var i, s, o, u;
                for (i = 0, s = e.length; i < s; i++) {
                    u = e[i] = this.get(e[i]);
                    if (!u) continue;
                    delete this._byId[u.id], delete this._byId[u.cid], o = this.indexOf(u), this.models.splice(o, 1), this.length--, t.silent || (t.index = o, u.trigger("remove", u, this, t)), this._removeReference(u, t)
                }
                return r ? e[0] : e
            },
            set: function(e, t) {
                t = n.defaults({}, t, g), t.parse && (e = this.parse(e, t));
                var r = !n.isArray(e);
                e = r ? e ? [e] : [] : n.clone(e);
                var i, s, o, u, a, f, l, c = t.at,
                    h = this.model,
                    p = this.comparator && c == null && t.sort !== !1,
                    v = n.isString(this.comparator) ? this.comparator : null,
                    m = [],
                    y = [],
                    b = {},
                    w = t.add,
                    E = t.merge,
                    S = t.remove,
                    x = !p && w && S ? [] : !1;
                for (i = 0, s = e.length; i < s; i++) {
                    a = e[i] || {}, a instanceof d ? o = u = a : o = a[h.prototype.idAttribute || "id"];
                    if (f = this.get(o)) S && (b[f.cid] = !0), E && (a = a === u ? u.attributes : a, t.parse && (a = f.parse(a, t)), f.set(a, t), p && !l && f.hasChanged(v) && (l = !0)), e[i] = f;
                    else if (w) {
                        u = e[i] = this._prepareModel(a, t);
                        if (!u) continue;
                        m.push(u), this._addReference(u, t)
                    }
                    u = f || u, x && (u.isNew() || !b[u.id]) && x.push(u), b[u.id] = !0
                }
                if (S) {
                    for (i = 0, s = this.length; i < s; ++i) b[(u = this.models[i]).cid] || y.push(u);
                    y.length && this.remove(y, t)
                }
                if (m.length || x && x.length) {
                    p && (l = !0), this.length += m.length;
                    if (c != null)
                        for (i = 0, s = m.length; i < s; i++) this.models.splice(c + i, 0, m[i]);
                    else {
                        x && (this.models.length = 0);
                        var T = x || m;
                        for (i = 0, s = T.length; i < s; i++) this.models.push(T[i])
                    }
                }
                l && this.sort({
                    silent: !0
                });
                if (!t.silent) {
                    for (i = 0, s = m.length; i < s; i++)(u = m[i]).trigger("add", u, this, t);
                    (l || x && x.length) && this.trigger("sort", this, t)
                }
                return r ? e[0] : e
            },
            reset: function(e, t) {
                t || (t = {});
                for (var r = 0, i = this.models.length; r < i; r++) this._removeReference(this.models[r], t);
                return t.previousModels = this.models, this._reset(), e = this.add(e, n.extend({
                    silent: !0
                }, t)), t.silent || this.trigger("reset", this, t), e
            },
            push: function(e, t) {
                return this.add(e, n.extend({
                    at: this.length
                }, t))
            },
            pop: function(e) {
                var t = this.at(this.length - 1);
                return this.remove(t, e), t
            },
            unshift: function(e, t) {
                return this.add(e, n.extend({
                    at: 0
                }, t))
            },
            shift: function(e) {
                var t = this.at(0);
                return this.remove(t, e), t
            },
            slice: function() {
                return u.apply(this.models, arguments)
            },
            get: function(e) {
                return e == null ? void 0 : this._byId[e] || this._byId[e.id] || this._byId[e.cid]
            },
            at: function(e) {
                return this.models[e]
            },
            where: function(e, t) {
                return n.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function(t) {
                    for (var n in e)
                        if (e[n] !== t.get(n)) return !1;
                    return !0
                })
            },
            findWhere: function(e) {
                return this.where(e, !0)
            },
            sort: function(e) {
                if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                return e || (e = {}), n.isString(this.comparator) || this.comparator.length === 1 ? this.models = this.sortBy(this.comparator, this) : this.models.sort(n.bind(this.comparator, this)), e.silent || this.trigger("sort", this, e), this
            },
            pluck: function(e) {
                return n.invoke(this.models, "get", e)
            },
            fetch: function(e) {
                e = e ? n.clone(e) : {}, e.parse === void 0 && (e.parse = !0);
                var t = e.success,
                    r = this;
                return e.success = function(n) {
                    var i = e.reset ? "reset" : "set";
                    r[i](n, e), t && t(r, n, e), r.trigger("sync", r, n, e)
                }, I(this, e), this.sync("read", this, e)
            },
            create: function(e, t) {
                t = t ? n.clone(t) : {};
                if (!(e = this._prepareModel(e, t))) return !1;
                t.wait || this.add(e, t);
                var r = this,
                    i = t.success;
                return t.success = function(e, n) {
                    t.wait && r.add(e, t), i && i(e, n, t)
                }, e.save(null, t), e
            },
            parse: function(e, t) {
                return e
            },
            clone: function() {
                return new this.constructor(this.models)
            },
            _reset: function() {
                this.length = 0, this.models = [], this._byId = {}
            },
            _prepareModel: function(e, t) {
                if (e instanceof d) return e;
                t = t ? n.clone(t) : {}, t.collection = this;
                var r = new this.model(e, t);
                return r.validationError ? (this.trigger("invalid", this, r.validationError, t), !1) : r
            },
            _addReference: function(e, t) {
                this._byId[e.cid] = e, e.id != null && (this._byId[e.id] = e), e.collection || (e.collection = this), e.on("all", this._onModelEvent, this)
            },
            _removeReference: function(e, t) {
                this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this)
            },
            _onModelEvent: function(e, t, n, r) {
                if ((e === "add" || e === "remove") && n !== this) return;
                e === "destroy" && this.remove(t, r), t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], t.id != null && (this._byId[t.id] = t)), this.trigger.apply(this, arguments)
            }
        });
        var b = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample"];
        n.each(b, function(e) {
            m.prototype[e] = function() {
                var t = u.call(arguments);
                return t.unshift(this.models), n[e].apply(n, t)
            }
        });
        var w = ["groupBy", "countBy", "sortBy", "indexBy"];
        n.each(w, function(e) {
            m.prototype[e] = function(t, r) {
                var i = n.isFunction(t) ? t : function(e) {
                    return e.get(t)
                };
                return n[e](this.models, i, r)
            }
        });
        var E = t.View = function(e) {
                this.cid = n.uniqueId("view"), e || (e = {}), n.extend(this, n.pick(e, x)), this._ensureElement(), this.initialize.apply(this, arguments), this.delegateEvents()
            },
            S = /^(\S+)\s*(.*)$/,
            x = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
        n.extend(E.prototype, f, {
            tagName: "div",
            $: function(e) {
                return this.$el.find(e)
            },
            initialize: function() {},
            render: function() {
                return this
            },
            remove: function() {
                return this.$el.remove(), this.stopListening(), this
            },
            setElement: function(e, n) {
                return this.$el && this.undelegateEvents(), this.$el = e instanceof t.$ ? e : t.$(e), this.el = this.$el[0], n !== !1 && this.delegateEvents(), this
            },
            delegateEvents: function(e) {
                if (!e && !(e = n.result(this, "events"))) return this;
                this.undelegateEvents();
                for (var t in e) {
                    var r = e[t];
                    n.isFunction(r) || (r = this[e[t]]);
                    if (!r) continue;
                    var i = t.match(S),
                        s = i[1],
                        o = i[2];
                    r = n.bind(r, this), s += ".delegateEvents" + this.cid, o === "" ? this.$el.on(s, r) : this.$el.on(s, o, r)
                }
                return this
            },
            undelegateEvents: function() {
                return this.$el.off(".delegateEvents" + this.cid), this
            },
            _ensureElement: function() {
                if (!this.el) {
                    var e = n.extend({}, n.result(this, "attributes"));
                    this.id && (e.id = n.result(this, "id")), this.className && (e["class"] = n.result(this, "className"));
                    var r = t.$("<" + n.result(this, "tagName") + ">").attr(e);
                    this.setElement(r, !1)
                } else this.setElement(n.result(this, "el"), !1)
            }
        }), t.sync = function(e, r, i) {
            var s = N[e];
            n.defaults(i || (i = {}), {
                emulateHTTP: t.emulateHTTP,
                emulateJSON: t.emulateJSON
            });
            var o = {
                type: s,
                dataType: "json"
            };
            i.url || (o.url = n.result(r, "url") || F()), i.data == null && r && (e === "create" || e === "update" || e === "patch") && (o.contentType = "application/json", o.data = JSON.stringify(i.attrs || r.toJSON(i))), i.emulateJSON && (o.contentType = "application/x-www-form-urlencoded", o.data = o.data ? {
                model: o.data
            } : {});
            if (i.emulateHTTP && (s === "PUT" || s === "DELETE" || s === "PATCH")) {
                o.type = "POST", i.emulateJSON && (o.data._method = s);
                var u = i.beforeSend;
                i.beforeSend = function(e) {
                    e.setRequestHeader("X-HTTP-Method-Override", s);
                    if (u) return u.apply(this, arguments)
                }
            }
            o.type !== "GET" && !i.emulateJSON && (o.processData = !1), o.type === "PATCH" && T && (o.xhr = function() {
                return new ActiveXObject("Microsoft.XMLHTTP")
            });
            var a = i.xhr = t.ajax(n.extend(o, i));
            return r.trigger("request", r, a, i), a
        };
        var T = typeof window != "undefined" && !!window.ActiveXObject && (!window.XMLHttpRequest || !(new XMLHttpRequest).dispatchEvent),
            N = {
                create: "POST",
                update: "PUT",
                patch: "PATCH",
                "delete": "DELETE",
                read: "GET"
            };
        t.ajax = function() {
            return t.$.ajax.apply(t.$, arguments)
        };
        var C = t.Router = function(e) {
                e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
            },
            k = /\((.*?)\)/g,
            L = /(\(\?)?:\w+/g,
            A = /\*\w+/g,
            O = /[\-{}\[\]+?.,\\\^$|#\s]/g;
        n.extend(C.prototype, f, {
            initialize: function() {},
            route: function(e, r, i) {
                n.isRegExp(e) || (e = this._routeToRegExp(e)), n.isFunction(r) && (i = r, r = ""), i || (i = this[r]);
                var s = this;
                return t.history.route(e, function(n) {
                    var o = s._extractParameters(e, n);
                    s.execute(i, o), s.trigger.apply(s, ["route:" + r].concat(o)), s.trigger("route", r, o), t.history.trigger("route", s, r, o)
                }), this
            },
            execute: function(e, t) {
                e && e.apply(this, t)
            },
            navigate: function(e, n) {
                return t.history.navigate(e, n), this
            },
            _bindRoutes: function() {
                if (!this.routes) return;
                this.routes = n.result(this, "routes");
                var e, t = n.keys(this.routes);
                while ((e = t.pop()) != null) this.route(e, this.routes[e])
            },
            _routeToRegExp: function(e) {
                return e = e.replace(O, "\\$&").replace(k, "(?:$1)?").replace(L, function(e, t) {
                    return t ? e : "([^/?]+)"
                }).replace(A, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$")
            },
            _extractParameters: function(e, t) {
                var r = e.exec(t).slice(1);
                return n.map(r, function(e, t) {
                    return t === r.length - 1 ? e || null : e ? decodeURIComponent(e) : null
                })
            }
        });
        var M = t.History = function() {
                this.handlers = [], n.bindAll(this, "checkUrl"), typeof window != "undefined" && (this.location = window.location, this.history = window.history)
            },
            _ = /^[#\/]|\s+$/g,
            D = /^\/+|\/+$/g,
            P = /msie [\w.]+/,
            H = /\/$/,
            B = /#.*$/;
        M.started = !1, n.extend(M.prototype, f, {
            interval: 50,
            atRoot: function() {
                return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root
            },
            getHash: function(e) {
                var t = (e || this).location.href.match(/#(.*)$/);
                return t ? t[1] : ""
            },
            getFragment: function(e, t) {
                if (e == null)
                    if (this._hasPushState || !this._wantsHashChange || t) {
                        e = decodeURI(this.location.pathname + this.location.search);
                        var n = this.root.replace(H, "");
                        e.indexOf(n) || (e = e.slice(n.length))
                    } else e = this.getHash();
                return e.replace(_, "")
            },
            start: function(e) {
                if (M.started) throw new Error("Backbone.history has already been started");
                M.started = !0, this.options = n.extend({
                    root: "/"
                }, this.options, e), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
                var r = this.getFragment(),
                    i = document.documentMode,
                    s = P.exec(navigator.userAgent.toLowerCase()) && (!i || i <= 7);
                this.root = ("/" + this.root + "/").replace(D, "/");
                if (s && this._wantsHashChange) {
                    var o = t.$('<iframe src="javascript:0" tabindex="-1">');
                    this.iframe = o.hide().appendTo("body")[0].contentWindow, this.navigate(r)
                }
                this._hasPushState ? t.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !s ? t.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), this.fragment = r;
                var u = this.location;
                if (this._wantsHashChange && this._wantsPushState) {
                    if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), this.location.replace(this.root + "#" + this.fragment), !0;
                    this._hasPushState && this.atRoot() && u.hash && (this.fragment = this.getHash().replace(_, ""), this.history.replaceState({}, document.title, this.root + this.fragment))
                }
                if (!this.options.silent) return this.loadUrl()
            },
            stop: function() {
                t.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), M.started = !1
            },
            route: function(e, t) {
                this.handlers.unshift({
                    route: e,
                    callback: t
                })
            },
            checkUrl: function(e) {
                var t = this.getFragment();
                t === this.fragment && this.iframe && (t = this.getFragment(this.getHash(this.iframe)));
                if (t === this.fragment) return !1;
                this.iframe && this.navigate(t), this.loadUrl()
            },
            loadUrl: function(e) {
                return e = this.fragment = this.getFragment(e), n.any(this.handlers, function(t) {
                    if (t.route.test(e)) return t.callback(e), !0
                })
            },
            navigate: function(e, t) {
                if (!M.started) return !1;
                if (!t || t === !0) t = {
                    trigger: !!t
                };
                var n = this.root + (e = this.getFragment(e || ""));
                e = e.replace(B, "");
                if (this.fragment === e) return;
                this.fragment = e, e === "" && n !== "/" && (n = n.slice(0, -1));
                if (this._hasPushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, n);
                else {
                    if (!this._wantsHashChange) return this.location.assign(n);
                    this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getFragment(this.getHash(this.iframe)) && (t.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, e, t.replace))
                }
                if (t.trigger) return this.loadUrl(e)
            },
            _updateHash: function(e, t, n) {
                if (n) {
                    var r = e.href.replace(/(javascript:|#).*$/, "");
                    e.replace(r + "#" + t)
                } else e.hash = "#" + t
            }
        }), t.history = new M;
        var j = function(e, t) {
            var r = this,
                i;
            e && n.has(e, "constructor") ? i = e.constructor : i = function() {
                return r.apply(this, arguments)
            }, n.extend(i, r, t);
            var s = function() {
                this.constructor = i
            };
            return s.prototype = r.prototype, i.prototype = new s, e && n.extend(i.prototype, e), i.__super__ = r.prototype, i
        };
        d.extend = m.extend = C.extend = E.extend = M.extend = j;
        var F = function() {
                throw new Error('A "url" property or function must be specified')
            },
            I = function(e, t) {
                var n = t.error;
                t.error = function(r) {
                    n && n(e, r, t), e.trigger("error", e, r, t)
                }
            };
        return t
    }),
    function(e, t) {
        if (typeof define == "function" && define.amd) define("marionette", ["backbone", "underscore"], function(n, r) {
            return e.Marionette = t(e, n, r)
        });
        else if (typeof exports != "undefined") {
            var n = require("backbone"),
                r = require("underscore");
            module.exports = t(e, n, r)
        } else e.Marionette = t(e, e.Backbone, e._)
    }(this, function(e, t, n) {
        "use strict";

        function o(e, t) {
            var n = new Error(e);
            throw n.name = t || "Error", n
        }(function(e, t) {
            var n = e.ChildViewContainer;
            return e.ChildViewContainer = function(e, t) {
                var n = function(e) {
                    this._views = {}, this._indexByModel = {}, this._indexByCustom = {}, this._updateLength(), t.each(e, this.add, this)
                };
                t.extend(n.prototype, {
                    add: function(e, t) {
                        var n = e.cid;
                        return this._views[n] = e, e.model && (this._indexByModel[e.model.cid] = n), t && (this._indexByCustom[t] = n), this._updateLength(), this
                    },
                    findByModel: function(e) {
                        return this.findByModelCid(e.cid)
                    },
                    findByModelCid: function(e) {
                        var t = this._indexByModel[e];
                        return this.findByCid(t)
                    },
                    findByCustom: function(e) {
                        var t = this._indexByCustom[e];
                        return this.findByCid(t)
                    },
                    findByIndex: function(e) {
                        return t.values(this._views)[e]
                    },
                    findByCid: function(e) {
                        return this._views[e]
                    },
                    remove: function(e) {
                        var n = e.cid;
                        return e.model && delete this._indexByModel[e.model.cid], t.any(this._indexByCustom, function(e, t) {
                            if (e === n) return delete this._indexByCustom[t], !0
                        }, this), delete this._views[n], this._updateLength(), this
                    },
                    call: function(e) {
                        this.apply(e, t.tail(arguments))
                    },
                    apply: function(e, n) {
                        t.each(this._views, function(r) {
                            t.isFunction(r[e]) && r[e].apply(r, n || [])
                        })
                    },
                    _updateLength: function() {
                        this.length = t.size(this._views)
                    }
                });
                var r = ["forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck"];
                return t.each(r, function(e) {
                    n.prototype[e] = function() {
                        var n = t.values(this._views),
                            r = [n].concat(t.toArray(arguments));
                        return t[e].apply(t, r)
                    }
                }), n
            }(e, t), e.ChildViewContainer.VERSION = "0.1.4", e.ChildViewContainer.noConflict = function() {
                return e.ChildViewContainer = n, this
            }, e.ChildViewContainer
        })(t, n),
        function(e, t) {
            var n = e.Wreqr,
                r = e.Wreqr = {};
            return e.Wreqr.VERSION = "1.3.1", e.Wreqr.noConflict = function() {
                return e.Wreqr = n, this
            }, r.Handlers = function(e, t) {
                var n = function(e) {
                    this.options = e, this._wreqrHandlers = {}, t.isFunction(this.initialize) && this.initialize(e)
                };
                return n.extend = e.Model.extend, t.extend(n.prototype, e.Events, {
                    setHandlers: function(e) {
                        t.each(e, function(e, n) {
                            var r = null;
                            t.isObject(e) && !t.isFunction(e) && (r = e.context, e = e.callback), this.setHandler(n, e, r)
                        }, this)
                    },
                    setHandler: function(e, t, n) {
                        var r = {
                            callback: t,
                            context: n
                        };
                        this._wreqrHandlers[e] = r, this.trigger("handler:add", e, t, n)
                    },
                    hasHandler: function(e) {
                        return !!this._wreqrHandlers[e]
                    },
                    getHandler: function(e) {
                        var t = this._wreqrHandlers[e];
                        if (!t) return;
                        return function() {
                            var e = Array.prototype.slice.apply(arguments);
                            return t.callback.apply(t.context, e)
                        }
                    },
                    removeHandler: function(e) {
                        delete this._wreqrHandlers[e]
                    },
                    removeAllHandlers: function() {
                        this._wreqrHandlers = {}
                    }
                }), n
            }(e, t), r.CommandStorage = function() {
                var n = function(e) {
                    this.options = e, this._commands = {}, t.isFunction(this.initialize) && this.initialize(e)
                };
                return t.extend(n.prototype, e.Events, {
                    getCommands: function(e) {
                        var t = this._commands[e];
                        return t || (t = {
                            command: e,
                            instances: []
                        }, this._commands[e] = t), t
                    },
                    addCommand: function(e, t) {
                        var n = this.getCommands(e);
                        n.instances.push(t)
                    },
                    clearCommands: function(e) {
                        var t = this.getCommands(e);
                        t.instances = []
                    }
                }), n
            }(), r.Commands = function(e) {
                return e.Handlers.extend({
                    storageType: e.CommandStorage,
                    constructor: function(t) {
                        this.options = t || {}, this._initializeStorage(this.options), this.on("handler:add", this._executeCommands, this);
                        var n = Array.prototype.slice.call(arguments);
                        e.Handlers.prototype.constructor.apply(this, n)
                    },
                    execute: function(e, t) {
                        e = arguments[0], t = Array.prototype.slice.call(arguments, 1), this.hasHandler(e) ? this.getHandler(e).apply(this, t) : this.storage.addCommand(e, t)
                    },
                    _executeCommands: function(e, n, r) {
                        var i = this.storage.getCommands(e);
                        t.each(i.instances, function(e) {
                            n.apply(r, e)
                        }), this.storage.clearCommands(e)
                    },
                    _initializeStorage: function(e) {
                        var n, r = e.storageType || this.storageType;
                        t.isFunction(r) ? n = new r : n = r, this.storage = n
                    }
                })
            }(r), r.RequestResponse = function(e) {
                return e.Handlers.extend({
                    request: function() {
                        var e = arguments[0],
                            t = Array.prototype.slice.call(arguments, 1);
                        if (this.hasHandler(e)) return this.getHandler(e).apply(this, t)
                    }
                })
            }(r), r.EventAggregator = function(e, t) {
                var n = function() {};
                return n.extend = e.Model.extend, t.extend(n.prototype, e.Events), n
            }(e, t), r.Channel = function(n) {
                var r = function(t) {
                    this.vent = new e.Wreqr.EventAggregator, this.reqres = new e.Wreqr.RequestResponse, this.commands = new e.Wreqr.Commands, this.channelName = t
                };
                return t.extend(r.prototype, {
                    reset: function() {
                        return this.vent.off(), this.vent.stopListening(), this.reqres.removeAllHandlers(), this.commands.removeAllHandlers(), this
                    },
                    connectEvents: function(e, t) {
                        return this._connect("vent", e, t), this
                    },
                    connectCommands: function(e, t) {
                        return this._connect("commands", e, t), this
                    },
                    connectRequests: function(e, t) {
                        return this._connect("reqres", e, t), this
                    },
                    _connect: function(e, n, r) {
                        if (!n) return;
                        r = r || this;
                        var i = e === "vent" ? "on" : "setHandler";
                        t.each(n, function(n, s) {
                            this[e][i](s, t.bind(n, r))
                        }, this)
                    }
                }), r
            }(r), r.radio = function(e) {
                var n = function() {
                    this._channels = {}, this.vent = {}, this.commands = {}, this.reqres = {}, this._proxyMethods()
                };
                t.extend(n.prototype, {
                    channel: function(e) {
                        if (!e) throw new Error("Channel must receive a name");
                        return this._getChannel(e)
                    },
                    _getChannel: function(t) {
                        var n = this._channels[t];
                        return n || (n = new e.Channel(t), this._channels[t] = n), n
                    },
                    _proxyMethods: function() {
                        t.each(["vent", "commands", "reqres"], function(e) {
                            t.each(r[e], function(t) {
                                this[e][t] = i(this, e, t)
                            }, this)
                        }, this)
                    }
                });
                var r = {
                        vent: ["on", "off", "trigger", "once", "stopListening", "listenTo", "listenToOnce"],
                        commands: ["execute", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers"],
                        reqres: ["request", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers"]
                    },
                    i = function(e, t, n) {
                        return function(r) {
                            var i = e._getChannel(r)[t],
                                s = Array.prototype.slice.call(arguments, 1);
                            return i[n].apply(i, s)
                        }
                    };
                return new n
            }(r), e.Wreqr
        }(t, n);
        var r = e.Marionette,
            i = t.Marionette = {};
        i.VERSION = "2.1.0", i.noConflict = function() {
            return e.Marionette = r, this
        }, t.Marionette = i, i.Deferred = t.$.Deferred;
        var s = Array.prototype.slice;
        return i.extend = t.Model.extend, i.getOption = function(e, t) {
                if (!e || !t) return;
                var n;
                return e.options && e.options[t] !== undefined ? n = e.options[t] : n = e[t], n
            }, i.proxyGetOption = function(e) {
                return i.getOption(this, e)
            }, i.normalizeMethods = function(e) {
                var t = {};
                return n.each(e, function(e, r) {
                    n.isFunction(e) || (e = this[e]);
                    if (!e) return;
                    t[r] = e
                }, this), t
            }, i.normalizeUIKeys = function(e, t) {
                if (typeof e == "undefined") return;
                return n.each(n.keys(e), function(n) {
                    var r = /@ui\.[a-zA-Z_$0-9]*/g;
                    n.match(r) && (e[n.replace(r, function(e) {
                        return t[e.slice(4)]
                    })] = e[n], delete e[n])
                }), e
            }, i.actAsCollection = function(e, t) {
                var r = ["forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck"];
                n.each(r, function(r) {
                    e[r] = function() {
                        var e = n.values(n.result(this, t)),
                            i = [e].concat(n.toArray(arguments));
                        return n[r].apply(n, i)
                    }
                })
            }, i.triggerMethod = function() {
                function t(e, t, n) {
                    return n.toUpperCase()
                }
                var e = /(^|:)(\w)/gi,
                    r = function(r) {
                        var i = "on" + r.replace(e, t),
                            s = this[i],
                            o;
                        return n.isFunction(s) && (o = s.apply(this, n.tail(arguments))), n.isFunction(this.trigger) && this.trigger.apply(this, arguments), o
                    };
                return r
            }(), i.MonitorDOMRefresh = function(e) {
                function r(e) {
                    e._isShown = !0, s(e)
                }

                function i(e) {
                    e._isRendered = !0, s(e)
                }

                function s(e) {
                    e._isShown && e._isRendered && o(e) && n.isFunction(e.triggerMethod) && e.triggerMethod("dom:refresh")
                }

                function o(n) {
                    return t.$.contains(e, n.el)
                }
                return function(e) {
                    e.listenTo(e, "show", function() {
                        r(e)
                    }), e.listenTo(e, "render", function() {
                        i(e)
                    })
                }
            }(document.documentElement),
            function(e) {
                function t(e, t, r, i) {
                    var s = i.split(/\s+/);
                    n.each(s, function(n) {
                        var i = e[n];
                        i || o('Method "' + n + '" was configured as an event handler, but does not exist.'), e.listenTo(t, r, i)
                    })
                }

                function r(e, t, n, r) {
                    e.listenTo(t, n, r)
                }

                function i(e, t, r, i) {
                    var s = i.split(/\s+/);
                    n.each(s, function(n) {
                        var i = e[n];
                        e.stopListening(t, r, i)
                    })
                }

                function s(e, t, n, r) {
                    e.stopListening(t, n, r)
                }

                function u(e, t, r, i, s) {
                    if (!t || !r) return;
                    n.isFunction(r) && (r = r.call(e)), n.each(r, function(r, o) {
                        n.isFunction(r) ? i(e, t, o, r) : s(e, t, o, r)
                    })
                }
                e.bindEntityEvents = function(e, n, i) {
                    u(e, n, i, r, t)
                }, e.unbindEntityEvents = function(e, t, n) {
                    u(e, t, n, s, i)
                }, e.proxyBindEntityEvents = function(t, n) {
                    return e.bindEntityEvents(this, t, n)
                }, e.proxyUnbindEntityEvents = function(t, n) {
                    return e.unbindEntityEvents(this, t, n)
                }
            }(i), i.Callbacks = function() {
                this._deferred = i.Deferred(), this._callbacks = []
            }, n.extend(i.Callbacks.prototype, {
                add: function(e, t) {
                    var r = n.result(this._deferred, "promise");
                    this._callbacks.push({
                        cb: e,
                        ctx: t
                    }), r.then(function(n) {
                        t && (n.context = t), e.call(n.context, n.options)
                    })
                },
                run: function(e, t) {
                    this._deferred.resolve({
                        options: e,
                        context: t
                    })
                },
                reset: function() {
                    var e = this._callbacks;
                    this._deferred = i.Deferred(), this._callbacks = [], n.each(e, function(e) {
                        this.add(e.cb, e.ctx)
                    }, this)
                }
            }), i.Controller = function(e) {
                this.options = e || {}, n.isFunction(this.initialize) && this.initialize(this.options)
            }, i.Controller.extend = i.extend, n.extend(i.Controller.prototype, t.Events, {
                destroy: function() {
                    var e = s.call(arguments);
                    return this.triggerMethod.apply(this, ["before:destroy"].concat(e)), this.triggerMethod.apply(this, ["destroy"].concat(e)), this.stopListening(), this.off(), this
                },
                triggerMethod: i.triggerMethod,
                getOption: i.proxyGetOption
            }), i.Object = function(e) {
                this.options = n.extend({}, n.result(this, "options"), e), this.initialize(this.options)
            }, i.Object.extend = i.extend, n.extend(i.Object.prototype, {
                initialize: function() {},
                destroy: function() {
                    this.triggerMethod("before:destroy"), this.triggerMethod("destroy"), this.stopListening()
                },
                triggerMethod: i.triggerMethod,
                getOption: i.proxyGetOption,
                bindEntityEvents: i.proxyBindEntityEvents,
                unbindEntityEvents: i.proxyUnbindEntityEvents
            }), n.extend(i.Object.prototype, t.Events), i.Region = function(e) {
                this.options = e || {}, this.el = this.getOption("el"), this.el = this.el instanceof t.$ ? this.el[0] : this.el, this.el || o('An "el" must be specified for a region.', "NoElError"), this.$el = this.getEl(this.el);
                if (this.initialize) {
                    var n = s.apply(arguments);
                    this.initialize.apply(this, n)
                }
            }, n.extend(i.Region, {
                buildRegion: function(e, t) {
                    if (n.isString(e)) return this._buildRegionFromSelector(e, t);
                    if (e.selector || e.el || e.regionClass) return this._buildRegionFromObject(e, t);
                    if (n.isFunction(e)) return this._buildRegionFromRegionClass(e);
                    o("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")
                },
                _buildRegionFromSelector: function(e, t) {
                    return new t({
                        el: e
                    })
                },
                _buildRegionFromObject: function(e, r) {
                    var i = e.regionClass || r,
                        s = n.omit(e, "selector", "regionClass");
                    e.selector && !s.el && (s.el = e.selector);
                    var o = new i(s);
                    return e.parentEl && (o.getEl = function(r) {
                        if (n.isObject(r)) return t.$(r);
                        var i = e.parentEl;
                        return n.isFunction(i) && (i = i()), i.find(r)
                    }), o
                },
                _buildRegionFromRegionClass: function(e) {
                    return new e
                }
            }), n.extend(i.Region.prototype, t.Events, {
                show: function(e, t) {
                    this._ensureElement();
                    var r = t || {},
                        i = e !== this.currentView,
                        s = !!r.preventDestroy,
                        o = !!r.forceShow,
                        u = !!this.currentView,
                        a = !s && i;
                    a && this.empty();
                    var f = i || o;
                    return f ? (e.once("destroy", n.bind(this.empty, this)), e.render(), u && this.triggerMethod("before:swap", e), this.triggerMethod("before:show", e), n.isFunction(e.triggerMethod) ? e.triggerMethod("before:show") : this.triggerMethod.call(e, "before:show"), this.attachHtml(e), this.currentView = e, u && this.triggerMethod("swap", e), this.triggerMethod("show", e), n.isFunction(e.triggerMethod) ? e.triggerMethod("show") : this.triggerMethod.call(e, "show"), this) : this
                },
                _ensureElement: function() {
                    n.isObject(this.el) || (this.$el = this.getEl(this.el), this.el = this.$el[0]), (!this.$el || this.$el.length === 0) && o('An "el" ' + this.$el.selector + " must exist in DOM")
                },
                getEl: function(e) {
                    return t.$(e)
                },
                attachHtml: function(e) {
                    this.el.innerHTML = "", this.el.appendChild(e.el)
                },
                empty: function() {
                    var e = this.currentView;
                    if (!e) return;
                    return this.triggerMethod("before:empty", e), this._destroyView(), this.triggerMethod("empty", e), delete this.currentView, this
                },
                _destroyView: function() {
                    var e = this.currentView;
                    e.destroy && !e.isDestroyed ? e.destroy() : e.remove && e.remove()
                },
                attachView: function(e) {
                    return this.currentView = e, this
                },
                hasView: function() {
                    return !!this.currentView
                },
                reset: function() {
                    return this.empty(), this.$el && (this.el = this.$el.selector), delete this.$el, this
                },
                getOption: i.proxyGetOption,
                triggerMethod: i.triggerMethod
            }), i.Region.extend = i.extend, i.RegionManager = function(e) {
                var t = e.Controller.extend({
                    constructor: function(t) {
                        this._regions = {}, e.Controller.call(this, t)
                    },
                    addRegions: function(e, t) {
                        n.isFunction(e) && (e = e.apply(this, arguments));
                        var r = {};
                        return n.each(e, function(e, i) {
                            n.isString(e) && (e = {
                                selector: e
                            }), e.selector && (e = n.defaults({}, e, t));
                            var s = this.addRegion(i, e);
                            r[i] = s
                        }, this), r
                    },
                    addRegion: function(t, r) {
                        var i, s = n.isObject(r),
                            o = n.isString(r),
                            u = !!r.selector;
                        return o || s && u ? i = e.Region.buildRegion(r, e.Region) : n.isFunction(r) ? i = e.Region.buildRegion(r, e.Region) : i = r, this.triggerMethod("before:add:region", t, i), this._store(t, i), this.triggerMethod("add:region", t, i), i
                    },
                    get: function(e) {
                        return this._regions[e]
                    },
                    getRegions: function() {
                        return n.clone(this._regions)
                    },
                    removeRegion: function(e) {
                        var t = this._regions[e];
                        return this._remove(e, t), t
                    },
                    removeRegions: function() {
                        var e = this.getRegions();
                        return n.each(this._regions, function(e, t) {
                            this._remove(t, e)
                        }, this), e
                    },
                    emptyRegions: function() {
                        var e = this.getRegions();
                        return n.each(e, function(e) {
                            e.empty()
                        }, this), e
                    },
                    destroy: function() {
                        return this.removeRegions(), e.Controller.prototype.destroy.apply(this, arguments)
                    },
                    _store: function(e, t) {
                        this._regions[e] = t, this._setLength()
                    },
                    _remove: function(e, t) {
                        this.triggerMethod("before:remove:region", e, t), t.empty(), t.stopListening(), delete this._regions[e], this._setLength(), this.triggerMethod("remove:region", e, t)
                    },
                    _setLength: function() {
                        this.length = n.size(this._regions)
                    }
                });
                return e.actAsCollection(t.prototype, "_regions"), t
            }(i), i.TemplateCache = function(e) {
                this.templateId = e
            }, n.extend(i.TemplateCache, {
                templateCaches: {},
                get: function(e) {
                    var t = this.templateCaches[e];
                    return t || (t = new i.TemplateCache(e), this.templateCaches[e] = t), t.load()
                },
                clear: function() {
                    var e, t = s.call(arguments),
                        n = t.length;
                    if (n > 0)
                        for (e = 0; e < n; e++) delete this.templateCaches[t[e]];
                    else this.templateCaches = {}
                }
            }), n.extend(i.TemplateCache.prototype, {
                load: function() {
                    if (this.compiledTemplate) return this.compiledTemplate;
                    var e = this.loadTemplate(this.templateId);
                    return this.compiledTemplate = this.compileTemplate(e), this.compiledTemplate
                },
                loadTemplate: function(e) {
                    var n = t.$(e).html();
                    return (!n || n.length === 0) && o('Could not find template: "' + e + '"', "NoTemplateError"), n
                },
                compileTemplate: function(e) {
                    return n.template(e)
                }
            }), i.Renderer = {
                render: function(e, t) {
                    e || o("Cannot render the template since its false, null or undefined.", "TemplateNotFoundError");
                    var n;
                    return typeof e == "function" ? n = e : n = i.TemplateCache.get(e), n(t)
                }
            }, i.View = t.View.extend({
                constructor: function(e) {
                    n.bindAll(this, "render"), this.options = n.extend({}, n.result(this, "options"), n.isFunction(e) ? e.call(this) : e), this.events = this.normalizeUIKeys(n.result(this, "events")), n.isObject(this.behaviors) && new i.Behaviors(this), t.View.apply(this, arguments), i.MonitorDOMRefresh(this), this.listenTo(this, "show", this.onShowCalled)
                },
                getTemplate: function() {
                    return this.getOption("template")
                },
                serializeModel: function(e) {
                    return e.toJSON.apply(e, s.call(arguments, 1))
                },
                mixinTemplateHelpers: function(e) {
                    e = e || {};
                    var t = this.getOption("templateHelpers");
                    return n.isFunction(t) && (t = t.call(this)), n.extend(e, t)
                },
                normalizeUIKeys: function(e) {
                    var t = n.result(this, "ui"),
                        r = n.result(this, "_uiBindings");
                    return i.normalizeUIKeys(e, r || t)
                },
                configureTriggers: function() {
                    if (!this.triggers) return;
                    var e = {},
                        t = this.normalizeUIKeys(n.result(this, "triggers"));
                    return n.each(t, function(t, r) {
                        var i = n.isObject(t),
                            s = i ? t.event : t;
                        e[r] = function(e) {
                            if (e) {
                                var n = e.preventDefault,
                                    r = e.stopPropagation,
                                    o = i ? t.preventDefault : n,
                                    u = i ? t.stopPropagation : r;
                                o && n && n.apply(e), u && r && r.apply(e)
                            }
                            var a = {
                                view: this,
                                model: this.model,
                                collection: this.collection
                            };
                            this.triggerMethod(s, a)
                        }
                    }, this), e
                },
                delegateEvents: function(e) {
                    return this._delegateDOMEvents(e), this.bindEntityEvents(this.model, this.getOption("modelEvents")), this.bindEntityEvents(this.collection, this.getOption("collectionEvents")), this
                },
                _delegateDOMEvents: function(e) {
                    e = e || this.events, n.isFunction(e) && (e = e.call(this)), e = this.normalizeUIKeys(e);
                    var r = {},
                        i = n.result(this, "behaviorEvents") || {},
                        s = this.configureTriggers();
                    n.extend(r, i, e, s), t.View.prototype.delegateEvents.call(this, r)
                },
                undelegateEvents: function() {
                    var e = s.call(arguments);
                    return t.View.prototype.undelegateEvents.apply(this, e), this.unbindEntityEvents(this.model, this.getOption("modelEvents")), this.unbindEntityEvents(this.collection, this.getOption("collectionEvents")), this
                },
                onShowCalled: function() {},
                _ensureViewIsIntact: function() {
                    if (this.isDestroyed) {
                        var e = new Error("Cannot use a view thats already been destroyed.");
                        throw e.name = "ViewDestroyedError", e
                    }
                },
                destroy: function() {
                    if (this.isDestroyed) return;
                    var e = s.call(arguments);
                    return this.triggerMethod.apply(this, ["before:destroy"].concat(e)), this.isDestroyed = !0, this.triggerMethod.apply(this, ["destroy"].concat(e)), this.unbindUIElements(), this.remove(), this
                },
                bindUIElements: function() {
                    if (!this.ui) return;
                    this._uiBindings || (this._uiBindings = this.ui);
                    var e = n.result(this, "_uiBindings");
                    this.ui = {}, n.each(n.keys(e), function(t) {
                        var n = e[t];
                        this.ui[t] = this.$(n)
                    }, this)
                },
                unbindUIElements: function() {
                    if (!this.ui || !this._uiBindings) return;
                    n.each(this.ui, function(e, t) {
                        delete this.ui[t]
                    }, this), this.ui = this._uiBindings, delete this._uiBindings
                },
                triggerMethod: i.triggerMethod,
                normalizeMethods: i.normalizeMethods,
                getOption: i.proxyGetOption,
                bindEntityEvents: i.proxyBindEntityEvents,
                unbindEntityEvents: i.proxyUnbindEntityEvents
            }), i.ItemView = i.View.extend({
                constructor: function() {
                    i.View.apply(this, arguments)
                },
                serializeData: function() {
                    var e = {};
                    return this.model ? e = n.partial(this.serializeModel, this.model).apply(this, arguments) : this.collection && (e = {
                        items: n.partial(this.serializeCollection, this.collection).apply(this, arguments)
                    }), e
                },
                serializeCollection: function(e) {
                    return e.toJSON.apply(e, s.call(arguments, 1))
                },
                render: function() {
                    return this._ensureViewIsIntact(), this.triggerMethod("before:render", this), this._renderTemplate(), this.bindUIElements(), this.triggerMethod("render", this), this
                },
                _renderTemplate: function() {
                    var e = this.getTemplate();
                    if (e === !1) return;
                    e || o("Cannot render the template since it is null or undefined.", "UndefinedTemplateError");
                    var t = this.serializeData();
                    t = this.mixinTemplateHelpers(t);
                    var n = i.Renderer.render(e, t, this);
                    return this.attachElContent(n), this
                },
                attachElContent: function(e) {
                    return this.$el.html(e), this
                },
                destroy: function() {
                    if (this.isDestroyed) return;
                    return i.View.prototype.destroy.apply(this, arguments)
                }
            }), i.CollectionView = i.View.extend({
                childViewEventPrefix: "childview",
                constructor: function(e) {
                    var t = e || {};
                    this.sort = n.isUndefined(t.sort) ? !0 : t.sort, this._initChildViewStorage(), i.View.apply(this, arguments), this._initialEvents(), this.initRenderBuffer()
                },
                initRenderBuffer: function() {
                    this.elBuffer = document.createDocumentFragment(), this._bufferedChildren = []
                },
                startBuffering: function() {
                    this.initRenderBuffer(), this.isBuffering = !0
                },
                endBuffering: function() {
                    this.isBuffering = !1, this._triggerBeforeShowBufferedChildren(), this.attachBuffer(this, this.elBuffer), this._triggerShowBufferedChildren(), this.initRenderBuffer()
                },
                _triggerBeforeShowBufferedChildren: function() {
                    this._isShown && n.invoke(this._bufferedChildren, "triggerMethod", "before:show")
                },
                _triggerShowBufferedChildren: function() {
                    this._isShown && (n.each(this._bufferedChildren, function(e) {
                        n.isFunction(e.triggerMethod) ? e.triggerMethod("show") : i.triggerMethod.call(e, "show")
                    }), this._bufferedChildren = [])
                },
                _initialEvents: function() {
                    this.collection && (this.listenTo(this.collection, "add", this._onCollectionAdd), this.listenTo(this.collection, "remove", this._onCollectionRemove), this.listenTo(this.collection, "reset", this.render), this.sort && this.listenTo(this.collection, "sort", this._sortViews))
                },
                _onCollectionAdd: function(e) {
                    this.destroyEmptyView();
                    var t = this.getChildView(e),
                        n = this.collection.indexOf(e);
                    this.addChild(e, t, n)
                },
                _onCollectionRemove: function(e) {
                    var t = this.children.findByModel(e);
                    this.removeChildView(t), this.checkEmpty()
                },
                onShowCalled: function() {
                    this.children.each(function(e) {
                        n.isFunction(e.triggerMethod) ? e.triggerMethod("show") : i.triggerMethod.call(e, "show")
                    })
                },
                render: function() {
                    return this._ensureViewIsIntact(), this.triggerMethod("before:render", this), this._renderChildren(), this.triggerMethod("render", this), this
                },
                resortView: function() {
                    this.render()
                },
                _sortViews: function() {
                    var e = this.collection.find(function(e, t) {
                        var n = this.children.findByModel(e);
                        return !n || n._index !== t
                    }, this);
                    e && this.resortView()
                },
                _renderChildren: function() {
                    this.destroyEmptyView(), this.destroyChildren(), this.isEmpty(this.collection) ? this.showEmptyView() : (this.triggerMethod("before:render:collection", this), this.startBuffering(), this.showCollection(), this.endBuffering(), this.triggerMethod("render:collection", this))
                },
                showCollection: function() {
                    var e;
                    this.collection.each(function(t, n) {
                        e = this.getChildView(t), this.addChild(t, e, n)
                    }, this)
                },
                showEmptyView: function() {
                    var e = this.getEmptyView();
                    if (e && !this._showingEmptyView) {
                        this.triggerMethod("before:render:empty"), this._showingEmptyView = !0;
                        var n = new t.Model;
                        this.addEmptyView(n, e), this.triggerMethod("render:empty")
                    }
                },
                destroyEmptyView: function() {
                    this._showingEmptyView && (this.destroyChildren(), delete this._showingEmptyView)
                },
                getEmptyView: function() {
                    return this.getOption("emptyView")
                },
                addEmptyView: function(e, t) {
                    var r = this.getOption("emptyViewOptions") || this.getOption("childViewOptions");
                    n.isFunction(r) && (r = r.call(this));
                    var i = this.buildChildView(e, t, r);
                    this._isShown && this.triggerMethod.call(i, "before:show"), this.children.add(i), this.renderChildView(i, -1), this._isShown && this.triggerMethod.call(i, "show")
                },
                getChildView: function(e) {
                    var t = this.getOption("childView");
                    return t || o('A "childView" must be specified', "NoChildViewError"), t
                },
                addChild: function(e, t, r) {
                    var i = this.getOption("childViewOptions");
                    n.isFunction(i) && (i = i.call(this, e, r));
                    var s = this.buildChildView(e, t, i);
                    return this._updateIndices(s, !0, r), this._addChildView(s, r), s
                },
                _updateIndices: function(e, t, n) {
                    if (!this.sort) return;
                    t ? (e._index = n, this.children.each(function(t) {
                        t._index >= e._index && t._index++
                    })) : this.children.each(function(t) {
                        t._index >= e._index && t._index--
                    })
                },
                _addChildView: function(e, t) {
                    this.proxyChildEvents(e), this.triggerMethod("before:add:child", e), this.children.add(e), this.renderChildView(e, t), this._isShown && !this.isBuffering && (n.isFunction(e.triggerMethod) ? e.triggerMethod("show") : i.triggerMethod.call(e, "show")), this.triggerMethod("add:child", e)
                },
                renderChildView: function(e, t) {
                    return e.render(), this.attachHtml(this, e, t), e
                },
                buildChildView: function(e, t, r) {
                    var i = n.extend({
                        model: e
                    }, r);
                    return new t(i)
                },
                removeChildView: function(e) {
                    return e && (this.triggerMethod("before:remove:child", e), e.destroy ? e.destroy() : e.remove && e.remove(), this.stopListening(e), this.children.remove(e), this.triggerMethod("remove:child", e), this._updateIndices(e, !1)), e
                },
                isEmpty: function(e) {
                    return !this.collection || this.collection.length === 0
                },
                checkEmpty: function() {
                    this.isEmpty(this.collection) && this.showEmptyView()
                },
                attachBuffer: function(e, t) {
                    e.$el.append(t)
                },
                attachHtml: function(e, t, n) {
                    e.isBuffering ? (e.elBuffer.appendChild(t.el), e._bufferedChildren.push(t)) : e._insertBefore(t, n) || e._insertAfter(t)
                },
                _insertBefore: function(e, t) {
                    var n, r = this.sort && t < this.children.length - 1;
                    return r && (n = this.children.find(function(e) {
                        return e._index === t + 1
                    })), n ? (n.$el.before(e.el), !0) : !1
                },
                _insertAfter: function(e) {
                    this.$el.append(e.el)
                },
                _initChildViewStorage: function() {
                    this.children = new t.ChildViewContainer
                },
                destroy: function() {
                    if (this.isDestroyed) return;
                    return this.triggerMethod("before:destroy:collection"), this.destroyChildren(), this.triggerMethod("destroy:collection"), i.View.prototype.destroy.apply(this, arguments)
                },
                destroyChildren: function() {
                    var e = this.children.map(n.identity);
                    return this.children.each(this.removeChildView, this), this.checkEmpty(), e
                },
                proxyChildEvents: function(e) {
                    var t = this.getOption("childViewEventPrefix");
                    this.listenTo(e, "all", function() {
                        var r = s.call(arguments),
                            i = r[0],
                            o = this.normalizeMethods(n.result(this, "childEvents"));
                        r[0] = t + ":" + i, r.splice(1, 0, e), typeof o != "undefined" && n.isFunction(o[i]) && o[i].apply(this, r.slice(1)), this.triggerMethod.apply(this, r)
                    }, this)
                }
            }), i.CompositeView = i.CollectionView.extend({
                constructor: function() {
                    i.CollectionView.apply(this, arguments)
                },
                _initialEvents: function() {
                    this.once("render", function() {
                        this.collection && (this.listenTo(this.collection, "add", this._onCollectionAdd), this.listenTo(this.collection, "remove", this._onCollectionRemove), this.listenTo(this.collection, "reset", this._renderChildren), this.sort && this.listenTo(this.collection, "sort", this._sortViews))
                    })
                },
                getChildView: function(e) {
                    var t = this.getOption("childView") || this.constructor;
                    return t || o('A "childView" must be specified', "NoChildViewError"), t
                },
                serializeData: function() {
                    var e = {};
                    return this.model && (e = n.partial(this.serializeModel, this.model).apply(this, arguments)), e
                },
                render: function() {
                    return this._ensureViewIsIntact(), this.isRendered = !0, this.resetChildViewContainer(), this.triggerMethod("before:render", this), this._renderTemplate(), this._renderChildren(), this.triggerMethod("render", this), this
                },
                _renderChildren: function() {
                    this.isRendered && i.CollectionView.prototype._renderChildren.call(this)
                },
                _renderTemplate: function() {
                    var e = {};
                    e = this.serializeData(), e = this.mixinTemplateHelpers(e), this.triggerMethod("before:render:template");
                    var t = this.getTemplate(),
                        n = i.Renderer.render(t, e, this);
                    this.attachElContent(n), this.bindUIElements(), this.triggerMethod("render:template")
                },
                attachElContent: function(e) {
                    return this.$el.html(e), this
                },
                attachBuffer: function(e, t) {
                    var n = this.getChildViewContainer(e);
                    n.append(t)
                },
                _insertAfter: function(e) {
                    var t = this.getChildViewContainer(this);
                    t.append(e.el)
                },
                getChildViewContainer: function(e) {
                    if ("$childViewContainer" in e) return e.$childViewContainer;
                    var t, r = i.getOption(e, "childViewContainer");
                    if (r) {
                        var s = n.isFunction(r) ? r.call(e) : r;
                        s.charAt(0) === "@" && e.ui ? t = e.ui[s.substr(4)] : t = e.$(s), t.length <= 0 && o('The specified "childViewContainer" was not found: ' + e.childViewContainer, "ChildViewContainerMissingError")
                    } else t = e.$el;
                    return e.$childViewContainer = t, t
                },
                resetChildViewContainer: function() {
                    this.$childViewContainer && delete this.$childViewContainer
                }
            }), i.LayoutView = i.ItemView.extend({
                regionClass: i.Region,
                constructor: function(e) {
                    e = e || {}, this._firstRender = !0, this._initializeRegions(e), i.ItemView.call(this, e)
                },
                render: function() {
                    return this._ensureViewIsIntact(), this._firstRender ? this._firstRender = !1 : this._reInitializeRegions(), i.ItemView.prototype.render.apply(this, arguments)
                },
                destroy: function() {
                    return this.isDestroyed ? this : (this.regionManager.destroy(), i.ItemView.prototype.destroy.apply(this, arguments))
                },
                addRegion: function(e, t) {
                    this.triggerMethod("before:region:add", e);
                    var n = {};
                    return n[e] = t, this._buildRegions(n)[e]
                },
                addRegions: function(e) {
                    return this.regions = n.extend({}, this.regions, e), this._buildRegions(e)
                },
                removeRegion: function(e) {
                    return this.triggerMethod("before:region:remove", e), delete this.regions[e], this.regionManager.removeRegion(e)
                },
                getRegion: function(e) {
                    return this.regionManager.get(e)
                },
                getRegions: function() {
                    return this.regionManager.getRegions()
                },
                _buildRegions: function(e) {
                    var t = this,
                        n = {
                            regionClass: this.getOption("regionClass"),
                            parentEl: function() {
                                return t.$el
                            }
                        };
                    return this.regionManager.addRegions(e, n)
                },
                _initializeRegions: function(e) {
                    var t;
                    this._initRegionManager(), n.isFunction(this.regions) ? t = this.regions(e) : t = this.regions || {};
                    var r = this.getOption.call(e, "regions");
                    n.isFunction(r) && (r = r.call(this, e)), n.extend(t, r), this.addRegions(t)
                },
                _reInitializeRegions: function() {
                    this.regionManager.emptyRegions(), this.regionManager.each(function(e) {
                        e.reset()
                    })
                },
                getRegionManager: function() {
                    return new i.RegionManager
                },
                _initRegionManager: function() {
                    this.regionManager = this.getRegionManager(), this.listenTo(this.regionManager, "before:add:region", function(e) {
                        this.triggerMethod("before:add:region", e)
                    }), this.listenTo(this.regionManager, "add:region", function(e, t) {
                        this[e] = t, this.triggerMethod("add:region", e, t)
                    }), this.listenTo(this.regionManager, "before:remove:region", function(e) {
                        this.triggerMethod("before:remove:region", e)
                    }), this.listenTo(this.regionManager, "remove:region", function(e, t) {
                        delete this[e], this.triggerMethod("remove:region", e, t)
                    })
                }
            }), i.Behavior = function(e, t) {
                function n(t, n) {
                    this.view = n, this.defaults = e.result(this, "defaults") || {}, this.options = e.extend({}, this.defaults, t), this.$ = function() {
                        return this.view.$.apply(this.view, arguments)
                    }, this.initialize.apply(this, arguments)
                }
                return e.extend(n.prototype, t.Events, {
                    initialize: function() {},
                    destroy: function() {
                        this.stopListening()
                    },
                    triggerMethod: i.triggerMethod,
                    getOption: i.proxyGetOption,
                    bindEntityEvents: i.proxyBindEntityEvents,
                    unbindEntityEvents: i.proxyUnbindEntityEvents
                }), n.extend = i.extend, n
            }(n, t), i.Behaviors = function(e, t) {
                function n(e, i) {
                    i = n.parseBehaviors(e, i || t.result(e, "behaviors")), n.wrap(e, i, t.keys(r))
                }
                var r = {
                    setElement: function(e, n) {
                        return e.apply(this, t.tail(arguments, 2)), t.each(n, function(e) {
                            e.$el = this.$el, e.el = this.el
                        }, this), this
                    },
                    destroy: function(e, n) {
                        var r = t.tail(arguments, 2);
                        return e.apply(this, r), t.invoke(n, "destroy", r), this
                    },
                    bindUIElements: function(e, n) {
                        e.apply(this), t.invoke(n, e)
                    },
                    unbindUIElements: function(e, n) {
                        e.apply(this), t.invoke(n, e)
                    },
                    triggerMethod: function(e, n) {
                        var r = t.tail(arguments, 2);
                        e.apply(this, r), t.each(n, function(t) {
                            e.apply(t, r)
                        })
                    },
                    delegateEvents: function(n, r) {
                        var i = t.tail(arguments, 2);
                        return n.apply(this, i), t.each(r, function(t) {
                            e.bindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.bindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"))
                        }, this), this
                    },
                    undelegateEvents: function(n, r) {
                        var i = t.tail(arguments, 2);
                        return n.apply(this, i), t.each(r, function(t) {
                            e.unbindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.unbindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"))
                        }, this), this
                    },
                    behaviorEvents: function(n, r) {
                        var i = {},
                            s = t.result(this, "ui");
                        return t.each(r, function(n, r) {
                            var o = {},
                                u = t.clone(t.result(n, "events")) || {},
                                a = t.result(n, "ui"),
                                f = t.extend({}, s, a);
                            u = e.normalizeUIKeys(u, f), t.each(t.keys(u), function(e) {
                                var i = (new Array(r + 2)).join(" "),
                                    s = e + i,
                                    a = t.isFunction(u[e]) ? u[e] : n[u[e]];
                                o[s] = t.bind(a, n)
                            }), i = t.extend(i, o)
                        }), i
                    }
                };
                return t.extend(n, {
                    behaviorsLookup: function() {
                        throw new Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")
                    },
                    getBehaviorClass: function(e, r) {
                        return e.behaviorClass ? e.behaviorClass : t.isFunction(n.behaviorsLookup) ? n.behaviorsLookup.apply(this, arguments)[r] : n.behaviorsLookup[r]
                    },
                    parseBehaviors: function(e, r) {
                        return t.chain(r).map(function(r, i) {
                            var s = n.getBehaviorClass(r, i),
                                o = new s(r, e),
                                u = n.parseBehaviors(e, t.result(o, "behaviors"));
                            return [o].concat(u)
                        }).flatten().value()
                    },
                    wrap: function(e, n, i) {
                        t.each(i, function(i) {
                            e[i] = t.partial(r[i], e[i], n)
                        })
                    }
                }), n
            }(i, n), i.AppRouter = t.Router.extend({
                constructor: function(e) {
                    t.Router.apply(this, arguments), this.options = e || {};
                    var n = this.getOption("appRoutes"),
                        r = this._getController();
                    this.processAppRoutes(r, n), this.on("route", this._processOnRoute, this)
                },
                appRoute: function(e, t) {
                    var n = this._getController();
                    this._addAppRoute(n, e, t)
                },
                _processOnRoute: function(e, t) {
                    var r = n.invert(this.getOption("appRoutes"))[e];
                    n.isFunction(this.onRoute) && this.onRoute(e, r, t)
                },
                processAppRoutes: function(e, t) {
                    if (!t) return;
                    var r = n.keys(t).reverse();
                    n.each(r, function(n) {
                        this._addAppRoute(e, n, t[n])
                    }, this)
                },
                _getController: function() {
                    return this.getOption("controller")
                },
                _addAppRoute: function(e, t, r) {
                    var i = e[r];
                    i || o('Method "' + r + '" was not found on the controller'), this.route(t, r, n.bind(i, e))
                },
                getOption: i.proxyGetOption
            }), i.Application = function(e) {
                this._initializeRegions(e), this._initCallbacks = new i.Callbacks, this.submodules = {}, n.extend(this, e), this._initChannel()
            }, n.extend(i.Application.prototype, t.Events, {
                execute: function() {
                    this.commands.execute.apply(this.commands, arguments)
                },
                request: function() {
                    return this.reqres.request.apply(this.reqres, arguments)
                },
                addInitializer: function(e) {
                    this._initCallbacks.add(e)
                },
                start: function(e) {
                    this.triggerMethod("before:start", e), this._initCallbacks.run(e, this), this.triggerMethod("start", e)
                },
                addRegions: function(e) {
                    return this._regionManager.addRegions(e)
                },
                emptyRegions: function() {
                    return this._regionManager.emptyRegions()
                },
                removeRegion: function(e) {
                    return this._regionManager.removeRegion(e)
                },
                getRegion: function(e) {
                    return this._regionManager.get(e)
                },
                getRegions: function() {
                    return this._regionManager.getRegions()
                },
                module: function(e, t) {
                    var n = i.Module.getClass(t),
                        r = s.call(arguments);
                    return r.unshift(this), n.create.apply(n, r)
                },
                getRegionManager: function() {
                    return new i.RegionManager
                },
                _initializeRegions: function(e) {
                    var t = n.isFunction(this.regions) ? this.regions(e) : this.regions || {};
                    this._initRegionManager();
                    var r = i.getOption(e, "regions");
                    return n.isFunction(r) && (r = r.call(this, e)), n.extend(t, r), this.addRegions(t), this
                },
                _initRegionManager: function() {
                    this._regionManager = this.getRegionManager(), this.listenTo(this._regionManager, "before:add:region", function(e) {
                        this.triggerMethod("before:add:region", e)
                    }), this.listenTo(this._regionManager, "add:region", function(e, t) {
                        this[e] = t, this.triggerMethod("add:region", e, t)
                    }), this.listenTo(this._regionManager, "before:remove:region", function(e) {
                        this.triggerMethod("before:remove:region", e)
                    }), this.listenTo(this._regionManager, "remove:region", function(e, t) {
                        delete this[e], this.triggerMethod("remove:region", e, t)
                    })
                },
                _initChannel: function() {
                    this.channelName = n.result(this, "channelName") || "global", this.channel = n.result(this, "channel") || t.Wreqr.radio.channel(this.channelName), this.vent = n.result(this, "vent") || this.channel.vent, this.commands = n.result(this, "commands") || this.channel.commands, this.reqres = n.result(this, "reqres") || this.channel.reqres
                },
                triggerMethod: i.triggerMethod,
                getOption: i.proxyGetOption
            }), i.Application.extend = i.extend, i.Module = function(e, t, r) {
                this.moduleName = e, this.options = n.extend({}, this.options, r), this.initialize = r.initialize || this.initialize, this.submodules = {}, this._setupInitializersAndFinalizers(), this.app = t, this.startWithParent = !0, n.isFunction(this.initialize) && this.initialize(e, t, this.options)
            }, i.Module.extend = i.extend, n.extend(i.Module.prototype, t.Events, {
                initialize: function() {},
                addInitializer: function(e) {
                    this._initializerCallbacks.add(e)
                },
                addFinalizer: function(e) {
                    this._finalizerCallbacks.add(e)
                },
                start: function(e) {
                    if (this._isInitialized) return;
                    n.each(this.submodules, function(t) {
                        t.startWithParent && t.start(e)
                    }), this.triggerMethod("before:start", e), this._initializerCallbacks.run(e, this), this._isInitialized = !0, this.triggerMethod("start", e)
                },
                stop: function() {
                    if (!this._isInitialized) return;
                    this._isInitialized = !1, this.triggerMethod("before:stop"), n.each(this.submodules, function(e) {
                        e.stop()
                    }), this._finalizerCallbacks.run(undefined, this), this._initializerCallbacks.reset(), this._finalizerCallbacks.reset(), this.triggerMethod("stop")
                },
                addDefinition: function(e, t) {
                    this._runModuleDefinition(e, t)
                },
                _runModuleDefinition: function(e, r) {
                    if (!e) return;
                    var s = n.flatten([this, this.app, t, i, t.$, n, r]);
                    e.apply(this, s)
                },
                _setupInitializersAndFinalizers: function() {
                    this._initializerCallbacks = new i.Callbacks, this._finalizerCallbacks = new i.Callbacks
                },
                triggerMethod: i.triggerMethod
            }), n.extend(i.Module, {
                create: function(e, t, r) {
                    var i = e,
                        o = s.call(arguments);
                    o.splice(0, 3), t = t.split(".");
                    var u = t.length,
                        a = [];
                    return a[u - 1] = r, n.each(t, function(t, n) {
                        var s = i;
                        i = this._getModule(s, t, e, r), this._addModuleDefinition(s, i, a[n], o)
                    }, this), i
                },
                _getModule: function(e, t, r, i, s) {
                    var o = n.extend({}, i),
                        u = this.getClass(i),
                        a = e[t];
                    return a || (a = new u(t, r, o), e[t] = a, e.submodules[t] = a), a
                },
                getClass: function(e) {
                    var t = i.Module;
                    return e ? e.prototype instanceof t ? e : e.moduleClass || t : t
                },
                _addModuleDefinition: function(e, t, n, r) {
                    var i = this._getDefine(n),
                        s = this._getStartWithParent(n, t);
                    i && t.addDefinition(i, r), this._addStartWithParent(e, t, s)
                },
                _getStartWithParent: function(e, t) {
                    var r;
                    return n.isFunction(e) && e.prototype instanceof i.Module ? (r = t.constructor.prototype.startWithParent, n.isUndefined(r) ? !0 : r) : n.isObject(e) ? (r = e.startWithParent, n.isUndefined(r) ? !0 : r) : !0
                },
                _getDefine: function(e) {
                    return !n.isFunction(e) || e.prototype instanceof i.Module ? n.isObject(e) ? e.define : null : e
                },
                _addStartWithParent: function(e, t, n) {
                    t.startWithParent = t.startWithParent && n;
                    if (!t.startWithParent || !!t.startWithParentIsConfigured) return;
                    t.startWithParentIsConfigured = !0, e.addInitializer(function(e) {
                        t.startWithParent && t.start(e)
                    })
                }
            }), i
    }), define("modules/logger", ["underscore"], function(e) {
        var t = {
                log: function() {},
                info: function() {},
                debug: function() {},
                warn: function() {},
                error: function() {}
            },
            n = {
                log: function(e) {
                    console.log("LOG: ", e)
                },
                info: function(e) {
                    console.log("INFO: ", e)
                },
                debug: function(e) {
                    console.table ? console.table(e) : console.log && console.log(e)
                },
                warn: function(e) {
                    console.log("WARN: ", e)
                },
                error: function(e) {
                    console.log("ERROR: ", e)
                }
            };
        return {
            init: function(e) {
                e && (t = n)
            },
            log: function(e) {
                t.log(e)
            },
            info: function(e) {
                t.info(e)
            },
            debug: function(e) {
                t.debug(e)
            },
            warn: function(e) {
                t.warn(e)
            },
            error: function(e) {
                t.error(e)
            }
        }
    }),
    function(e) {
        define("jqueryBrowserMobile", ["jquery"], function() {
            return function() {
                (function(e) {
                    jQuery.uaMatch = function(e) {
                        e = e.toLowerCase();
                        var t = /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [];
                        return {
                            browser: t[1] || "",
                            version: t[2] || "0"
                        }
                    }, jQuery.browser || (matched = jQuery.uaMatch(navigator.userAgent), browser = {}, matched.browser && (browser[matched.browser] = !0, browser.version = matched.version), browser.chrome ? browser.webkit = !0 : browser.webkit && (browser.safari = !0), jQuery.browser = browser), jQuery.browser.mobile = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0, 4))
                })(navigator.userAgent || navigator.vendor || window.opera)
            }.apply(e, arguments)
        })
    }(this), define("components/common/scripts/util/ie", ["jquery", "jqueryBrowserMobile"], function(e) {
        return {
            isIE9orLess: function() {
                return e.browser.msie && e.browser.version <= 9
            }
        }
    }), define("hbs/handlebars", [], function() {
        var e = function() {
            var e = function() {
                    "use strict";

                    function t(e) {
                        this.string = e
                    }
                    var e;
                    return t.prototype.toString = function() {
                        return "" + this.string
                    }, e = t, e
                }(),
                t = function(e) {
                    "use strict";

                    function o(e) {
                        return r[e] || "&amp;"
                    }

                    function u(e, t) {
                        for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n])
                    }

                    function c(e) {
                        return e instanceof n ? e.toString() : !e && e !== 0 ? "" : (e = "" + e, s.test(e) ? e.replace(i, o) : e)
                    }

                    function h(e) {
                        return !e && e !== 0 ? !0 : l(e) && e.length === 0 ? !0 : !1
                    }
                    var t = {},
                        n = e,
                        r = {
                            "&": "&amp;",
                            "<": "&lt;",
                            ">": "&gt;",
                            '"': "&quot;",
                            "'": "&#x27;",
                            "`": "&#x60;"
                        },
                        i = /[&<>"'`]/g,
                        s = /[&<>"'`]/;
                    t.extend = u;
                    var a = Object.prototype.toString;
                    t.toString = a;
                    var f = function(e) {
                        return typeof e == "function"
                    };
                    f(/x/) && (f = function(e) {
                        return typeof e == "function" && a.call(e) === "[object Function]"
                    });
                    var f;
                    t.isFunction = f;
                    var l = Array.isArray || function(e) {
                        return e && typeof e == "object" ? a.call(e) === "[object Array]" : !1
                    };
                    return t.isArray = l, t.escapeExpression = c, t.isEmpty = h, t
                }(e),
                n = function() {
                    "use strict";

                    function n(e, n) {
                        var r;
                        n && n.firstLine && (r = n.firstLine, e += " - " + r + ":" + n.firstColumn);
                        var i = Error.prototype.constructor.call(this, e);
                        for (var s = 0; s < t.length; s++) this[t[s]] = i[t[s]];
                        r && (this.lineNumber = r, this.column = n.firstColumn)
                    }
                    var e, t = ["description", "fileName", "lineNumber", "message", "name", "number", "stack"];
                    return n.prototype = new Error, e = n, e
                }(),
                r = function(e, t) {
                    "use strict";

                    function h(e, t) {
                        this.helpers = e || {}, this.partials = t || {}, p(this)
                    }

                    function p(e) {
                        e.registerHelper("helperMissing", function(e) {
                            if (arguments.length === 2) return undefined;
                            throw new i("Missing helper: '" + e + "'")
                        }), e.registerHelper("blockHelperMissing", function(t, n) {
                            var r = n.inverse || function() {},
                                i = n.fn;
                            return f(t) && (t = t.call(this)), t === !0 ? i(this) : t === !1 || t == null ? r(this) : a(t) ? t.length > 0 ? e.helpers.each(t, n) : r(this) : i(t)
                        }), e.registerHelper("each", function(e, t) {
                            var n = t.fn,
                                r = t.inverse,
                                i = 0,
                                s = "",
                                o;
                            f(e) && (e = e.call(this)), t.data && (o = m(t.data));
                            if (e && typeof e == "object")
                                if (a(e))
                                    for (var u = e.length; i < u; i++) o && (o.index = i, o.first = i === 0, o.last = i === e.length - 1), s += n(e[i], {
                                        data: o
                                    });
                                else
                                    for (var l in e) e.hasOwnProperty(l) && (o && (o.key = l, o.index = i, o.first = i === 0), s += n(e[l], {
                                        data: o
                                    }), i++);
                            return i === 0 && (s = r(this)), s
                        }), e.registerHelper("if", function(e, t) {
                            return f(e) && (e = e.call(this)), !t.hash.includeZero && !e || r.isEmpty(e) ? t.inverse(this) : t.fn(this)
                        }), e.registerHelper("unless", function(t, n) {
                            return e.helpers["if"].call(this, t, {
                                fn: n.inverse,
                                inverse: n.fn,
                                hash: n.hash
                            })
                        }), e.registerHelper("with", function(e, t) {
                            f(e) && (e = e.call(this));
                            if (!r.isEmpty(e)) return t.fn(e)
                        }), e.registerHelper("log", function(t, n) {
                            var r = n.data && n.data.level != null ? parseInt(n.data.level, 10) : 1;
                            e.log(r, t)
                        })
                    }

                    function v(e, t) {
                        d.log(e, t)
                    }
                    var n = {},
                        r = e,
                        i = t,
                        s = "1.3.0";
                    n.VERSION = s;
                    var o = 4;
                    n.COMPILER_REVISION = o;
                    var u = {
                        1: "<= 1.0.rc.2",
                        2: "== 1.0.0-rc.3",
                        3: "== 1.0.0-rc.4",
                        4: ">= 1.0.0"
                    };
                    n.REVISION_CHANGES = u;
                    var a = r.isArray,
                        f = r.isFunction,
                        l = r.toString,
                        c = "[object Object]";
                    n.HandlebarsEnvironment = h, h.prototype = {
                        constructor: h,
                        logger: d,
                        log: v,
                        registerHelper: function(e, t, n) {
                            if (l.call(e) === c) {
                                if (n || t) throw new i("Arg not supported with multiple helpers");
                                r.extend(this.helpers, e)
                            } else n && (t.not = n), this.helpers[e] = t
                        },
                        registerPartial: function(e, t) {
                            l.call(e) === c ? r.extend(this.partials, e) : this.partials[e] = t
                        }
                    };
                    var d = {
                        methodMap: {
                            0: "debug",
                            1: "info",
                            2: "warn",
                            3: "error"
                        },
                        DEBUG: 0,
                        INFO: 1,
                        WARN: 2,
                        ERROR: 3,
                        level: 3,
                        log: function(e, t) {
                            if (d.level <= e) {
                                var n = d.methodMap[e];
                                typeof console != "undefined" && console[n] && console[n].call(console, t)
                            }
                        }
                    };
                    n.logger = d, n.log = v;
                    var m = function(e) {
                        var t = {};
                        return r.extend(t, e), t
                    };
                    return n.createFrame = m, n
                }(t, n),
                i = function(e, t, n) {
                    "use strict";

                    function a(e) {
                        var t = e && e[0] || 1,
                            n = o;
                        if (t !== n) {
                            if (t < n) {
                                var r = u[n],
                                    i = u[t];
                                throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + r + ") or downgrade your runtime to an older version (" + i + ").")
                            }
                            throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + e[1] + ").")
                        }
                    }

                    function f(e, t) {
                        if (!t) throw new s("No environment passed to template");
                        var n = function(e, n, r, i, o, u) {
                                var a = t.VM.invokePartial.apply(this, arguments);
                                if (a != null) return a;
                                if (t.compile) {
                                    var f = {
                                        helpers: i,
                                        partials: o,
                                        data: u
                                    };
                                    return o[n] = t.compile(e, {
                                        data: u !== undefined
                                    }, t), o[n](r, f)
                                }
                                throw new s("The partial " + n + " could not be compiled when running in runtime-only mode")
                            },
                            r = {
                                escapeExpression: i.escapeExpression,
                                invokePartial: n,
                                programs: [],
                                program: function(e, t, n) {
                                    var r = this.programs[e];
                                    return n ? r = c(e, t, n) : r || (r = this.programs[e] = c(e, t)), r
                                },
                                merge: function(e, t) {
                                    var n = e || t;
                                    return e && t && e !== t && (n = {}, i.extend(n, t), i.extend(n, e)), n
                                },
                                programWithDepth: t.VM.programWithDepth,
                                noop: t.VM.noop,
                                compilerInfo: null
                            };
                        return function(n, i) {
                            i = i || {};
                            var s = i.partial ? i : t,
                                o, u;
                            i.partial || (o = i.helpers, u = i.partials);
                            var a = e.call(r, s, n, o, u, i.data);
                            return i.partial || t.VM.checkRevision(r.compilerInfo), a
                        }
                    }

                    function l(e, t, n) {
                        var r = Array.prototype.slice.call(arguments, 3),
                            i = function(e, i) {
                                return i = i || {}, t.apply(this, [e, i.data || n].concat(r))
                            };
                        return i.program = e, i.depth = r.length, i
                    }

                    function c(e, t, n) {
                        var r = function(e, r) {
                            return r = r || {}, t(e, r.data || n)
                        };
                        return r.program = e, r.depth = 0, r
                    }

                    function h(e, t, n, r, i, o) {
                        var u = {
                            partial: !0,
                            helpers: r,
                            partials: i,
                            data: o
                        };
                        if (e === undefined) throw new s("The partial " + t + " could not be found");
                        if (e instanceof Function) return e(n, u)
                    }

                    function p() {
                        return ""
                    }
                    var r = {},
                        i = e,
                        s = t,
                        o = n.COMPILER_REVISION,
                        u = n.REVISION_CHANGES;
                    return r.checkRevision = a, r.template = f, r.programWithDepth = l, r.program = c, r.invokePartial = h, r.noop = p, r
                }(t, n, r),
                s = function(e, t, n, r, i) {
                    "use strict";
                    var s, o = e,
                        u = t,
                        a = n,
                        f = r,
                        l = i,
                        c = function() {
                            var e = new o.HandlebarsEnvironment;
                            return f.extend(e, o), e.SafeString = u, e.Exception = a, e.Utils = f, e.VM = l, e.template = function(t) {
                                return l.template(t, e)
                            }, e
                        },
                        h = c();
                    return h.create = c, s = h, s
                }(r, e, n, t, i),
                o = function(e) {
                    "use strict";

                    function r(e) {
                        e = e || {}, this.firstLine = e.first_line, this.firstColumn = e.first_column, this.lastColumn = e.last_column, this.lastLine = e.last_line
                    }
                    var t, n = e,
                        i = {
                            ProgramNode: function(e, t, n, s) {
                                var o, u;
                                arguments.length === 3 ? (s = n, n = null) : arguments.length === 2 && (s = t, t = null), r.call(this, s), this.type = "program", this.statements = e, this.strip = {}, n ? (u = n[0], u ? (o = {
                                    first_line: u.firstLine,
                                    last_line: u.lastLine,
                                    last_column: u.lastColumn,
                                    first_column: u.firstColumn
                                }, this.inverse = new i.ProgramNode(n, t, o)) : this.inverse = new i.ProgramNode(n, t), this.strip.right = t.left) : t && (this.strip.left = t.right)
                            },
                            MustacheNode: function(e, t, n, s, o) {
                                r.call(this, o), this.type = "mustache", this.strip = s;
                                if (n != null && n.charAt) {
                                    var u = n.charAt(3) || n.charAt(2);
                                    this.escaped = u !== "{" && u !== "&"
                                } else this.escaped = !!n;
                                e instanceof i.SexprNode ? this.sexpr = e : this.sexpr = new i.SexprNode(e, t), this.sexpr.isRoot = !0, this.id = this.sexpr.id, this.params = this.sexpr.params, this.hash = this.sexpr.hash, this.eligibleHelper = this.sexpr.eligibleHelper, this.isHelper = this.sexpr.isHelper
                            },
                            SexprNode: function(e, t, n) {
                                r.call(this, n), this.type = "sexpr", this.hash = t;
                                var i = this.id = e[0],
                                    s = this.params = e.slice(1),
                                    o = this.eligibleHelper = i.isSimple;
                                this.isHelper = o && (s.length || t)
                            },
                            PartialNode: function(e, t, n, i) {
                                r.call(this, i), this.type = "partial", this.partialName = e, this.context = t, this.strip = n
                            },
                            BlockNode: function(e, t, i, s, o) {
                                r.call(this, o);
                                if (e.sexpr.id.original !== s.path.original) throw new n(e.sexpr.id.original + " doesn't match " + s.path.original, this);
                                this.type = "block", this.mustache = e, this.program = t, this.inverse = i, this.strip = {
                                    left: e.strip.left,
                                    right: s.strip.right
                                }, (t || i).strip.left = e.strip.right, (i || t).strip.right = s.strip.left, i && !t && (this.isInverse = !0)
                            },
                            ContentNode: function(e, t) {
                                r.call(this, t), this.type = "content", this.string = e
                            },
                            HashNode: function(e, t) {
                                r.call(this, t), this.type = "hash", this.pairs = e
                            },
                            IdNode: function(e, t) {
                                r.call(this, t), this.type = "ID";
                                var i = "",
                                    s = [],
                                    o = 0;
                                for (var u = 0, a = e.length; u < a; u++) {
                                    var f = e[u].part;
                                    i += (e[u].separator || "") + f;
                                    if (f === ".." || f === "." || f === "this") {
                                        if (s.length > 0) throw new n("Invalid path: " + i, this);
                                        f === ".." ? o++ : this.isScoped = !0
                                    } else s.push(f)
                                }
                                this.original = i, this.parts = s, this.string = s.join("."), this.depth = o, this.isSimple = e.length === 1 && !this.isScoped && o === 0, this.stringModeValue = this.string
                            },
                            PartialNameNode: function(e, t) {
                                r.call(this, t), this.type = "PARTIAL_NAME", this.name = e.original
                            },
                            DataNode: function(e, t) {
                                r.call(this, t), this.type = "DATA", this.id = e
                            },
                            StringNode: function(e, t) {
                                r.call(this, t), this.type = "STRING", this.original = this.string = this.stringModeValue = e
                            },
                            IntegerNode: function(e, t) {
                                r.call(this, t), this.type = "INTEGER", this.original = this.integer = e, this.stringModeValue = Number(e)
                            },
                            BooleanNode: function(e, t) {
                                r.call(this, t), this.type = "BOOLEAN", this.bool = e, this.stringModeValue = e === "true"
                            },
                            CommentNode: function(e, t) {
                                r.call(this, t), this.type = "comment", this.comment = e
                            }
                        };
                    return t = i, t
                }(n),
                u = function() {
                    "use strict";
                    var e, t = function() {
                        function t(e, t) {
                            return {
                                left: e.charAt(2) === "~",
                                right: t.charAt(0) === "~" || t.charAt(1) === "~"
                            }
                        }

                        function r() {
                            this.yy = {}
                        }
                        var e = {
                                trace: function() {},
                                yy: {},
                                symbols_: {
                                    error: 2,
                                    root: 3,
                                    statements: 4,
                                    EOF: 5,
                                    program: 6,
                                    simpleInverse: 7,
                                    statement: 8,
                                    openInverse: 9,
                                    closeBlock: 10,
                                    openBlock: 11,
                                    mustache: 12,
                                    partial: 13,
                                    CONTENT: 14,
                                    COMMENT: 15,
                                    OPEN_BLOCK: 16,
                                    sexpr: 17,
                                    CLOSE: 18,
                                    OPEN_INVERSE: 19,
                                    OPEN_ENDBLOCK: 20,
                                    path: 21,
                                    OPEN: 22,
                                    OPEN_UNESCAPED: 23,
                                    CLOSE_UNESCAPED: 24,
                                    OPEN_PARTIAL: 25,
                                    partialName: 26,
                                    partial_option0: 27,
                                    sexpr_repetition0: 28,
                                    sexpr_option0: 29,
                                    dataName: 30,
                                    param: 31,
                                    STRING: 32,
                                    INTEGER: 33,
                                    BOOLEAN: 34,
                                    OPEN_SEXPR: 35,
                                    CLOSE_SEXPR: 36,
                                    hash: 37,
                                    hash_repetition_plus0: 38,
                                    hashSegment: 39,
                                    ID: 40,
                                    EQUALS: 41,
                                    DATA: 42,
                                    pathSegments: 43,
                                    SEP: 44,
                                    $accept: 0,
                                    $end: 1
                                },
                                terminals_: {
                                    2: "error",
                                    5: "EOF",
                                    14: "CONTENT",
                                    15: "COMMENT",
                                    16: "OPEN_BLOCK",
                                    18: "CLOSE",
                                    19: "OPEN_INVERSE",
                                    20: "OPEN_ENDBLOCK",
                                    22: "OPEN",
                                    23: "OPEN_UNESCAPED",
                                    24: "CLOSE_UNESCAPED",
                                    25: "OPEN_PARTIAL",
                                    32: "STRING",
                                    33: "INTEGER",
                                    34: "BOOLEAN",
                                    35: "OPEN_SEXPR",
                                    36: "CLOSE_SEXPR",
                                    40: "ID",
                                    41: "EQUALS",
                                    42: "DATA",
                                    44: "SEP"
                                },
                                productions_: [0, [3, 2],
                                    [3, 1],
                                    [6, 2],
                                    [6, 3],
                                    [6, 2],
                                    [6, 1],
                                    [6, 1],
                                    [6, 0],
                                    [4, 1],
                                    [4, 2],
                                    [8, 3],
                                    [8, 3],
                                    [8, 1],
                                    [8, 1],
                                    [8, 1],
                                    [8, 1],
                                    [11, 3],
                                    [9, 3],
                                    [10, 3],
                                    [12, 3],
                                    [12, 3],
                                    [13, 4],
                                    [7, 2],
                                    [17, 3],
                                    [17, 1],
                                    [31, 1],
                                    [31, 1],
                                    [31, 1],
                                    [31, 1],
                                    [31, 1],
                                    [31, 3],
                                    [37, 1],
                                    [39, 3],
                                    [26, 1],
                                    [26, 1],
                                    [26, 1],
                                    [30, 2],
                                    [21, 1],
                                    [43, 3],
                                    [43, 1],
                                    [27, 0],
                                    [27, 1],
                                    [28, 0],
                                    [28, 2],
                                    [29, 0],
                                    [29, 1],
                                    [38, 1],
                                    [38, 2]
                                ],
                                performAction: function(n, r, i, s, o, u, a) {
                                    var f = u.length - 1;
                                    switch (o) {
                                        case 1:
                                            return new s.ProgramNode(u[f - 1], this._$);
                                        case 2:
                                            return new s.ProgramNode([], this._$);
                                        case 3:
                                            this.$ = new s.ProgramNode([], u[f - 1], u[f], this._$);
                                            break;
                                        case 4:
                                            this.$ = new s.ProgramNode(u[f - 2], u[f - 1], u[f], this._$);
                                            break;
                                        case 5:
                                            this.$ = new s.ProgramNode(u[f - 1], u[f], [], this._$);
                                            break;
                                        case 6:
                                            this.$ = new s.ProgramNode(u[f], this._$);
                                            break;
                                        case 7:
                                            this.$ = new s.ProgramNode([], this._$);
                                            break;
                                        case 8:
                                            this.$ = new s.ProgramNode([], this._$);
                                            break;
                                        case 9:
                                            this.$ = [u[f]];
                                            break;
                                        case 10:
                                            u[f - 1].push(u[f]), this.$ = u[f - 1];
                                            break;
                                        case 11:
                                            this.$ = new s.BlockNode(u[f - 2], u[f - 1].inverse, u[f - 1], u[f], this._$);
                                            break;
                                        case 12:
                                            this.$ = new s.BlockNode(u[f - 2], u[f - 1], u[f - 1].inverse, u[f], this._$);
                                            break;
                                        case 13:
                                            this.$ = u[f];
                                            break;
                                        case 14:
                                            this.$ = u[f];
                                            break;
                                        case 15:
                                            this.$ = new s.ContentNode(u[f], this._$);
                                            break;
                                        case 16:
                                            this.$ = new s.CommentNode(u[f], this._$);
                                            break;
                                        case 17:
                                            this.$ = new s.MustacheNode(u[f - 1], null, u[f - 2], t(u[f - 2], u[f]), this._$);
                                            break;
                                        case 18:
                                            this.$ = new s.MustacheNode(u[f - 1], null, u[f - 2], t(u[f - 2], u[f]), this._$);
                                            break;
                                        case 19:
                                            this.$ = {
                                                path: u[f - 1],
                                                strip: t(u[f - 2], u[f])
                                            };
                                            break;
                                        case 20:
                                            this.$ = new s.MustacheNode(u[f - 1], null, u[f - 2], t(u[f - 2], u[f]), this._$);
                                            break;
                                        case 21:
                                            this.$ = new s.MustacheNode(u[f - 1], null, u[f - 2], t(u[f - 2], u[f]), this._$);
                                            break;
                                        case 22:
                                            this.$ = new s.PartialNode(u[f - 2], u[f - 1], t(u[f - 3], u[f]), this._$);
                                            break;
                                        case 23:
                                            this.$ = t(u[f - 1], u[f]);
                                            break;
                                        case 24:
                                            this.$ = new s.SexprNode([u[f - 2]].concat(u[f - 1]), u[f], this._$);
                                            break;
                                        case 25:
                                            this.$ = new s.SexprNode([u[f]], null, this._$);
                                            break;
                                        case 26:
                                            this.$ = u[f];
                                            break;
                                        case 27:
                                            this.$ = new s.StringNode(u[f], this._$);
                                            break;
                                        case 28:
                                            this.$ = new s.IntegerNode(u[f], this._$);
                                            break;
                                        case 29:
                                            this.$ = new s.BooleanNode(u[f], this._$);
                                            break;
                                        case 30:
                                            this.$ = u[f];
                                            break;
                                        case 31:
                                            u[f - 1].isHelper = !0, this.$ = u[f - 1];
                                            break;
                                        case 32:
                                            this.$ = new s.HashNode(u[f], this._$);
                                            break;
                                        case 33:
                                            this.$ = [u[f - 2], u[f]];
                                            break;
                                        case 34:
                                            this.$ = new s.PartialNameNode(u[f], this._$);
                                            break;
                                        case 35:
                                            this.$ = new s.PartialNameNode(new s.StringNode(u[f], this._$), this._$);
                                            break;
                                        case 36:
                                            this.$ = new s.PartialNameNode(new s.IntegerNode(u[f], this._$));
                                            break;
                                        case 37:
                                            this.$ = new s.DataNode(u[f], this._$);
                                            break;
                                        case 38:
                                            this.$ = new s.IdNode(u[f], this._$);
                                            break;
                                        case 39:
                                            u[f - 2].push({
                                                part: u[f],
                                                separator: u[f - 1]
                                            }), this.$ = u[f - 2];
                                            break;
                                        case 40:
                                            this.$ = [{
                                                part: u[f]
                                            }];
                                            break;
                                        case 43:
                                            this.$ = [];
                                            break;
                                        case 44:
                                            u[f - 1].push(u[f]);
                                            break;
                                        case 47:
                                            this.$ = [u[f]];
                                            break;
                                        case 48:
                                            u[f - 1].push(u[f])
                                    }
                                },
                                table: [{
                                    3: 1,
                                    4: 2,
                                    5: [1, 3],
                                    8: 4,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    1: [3]
                                }, {
                                    5: [1, 16],
                                    8: 17,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    1: [2, 2]
                                }, {
                                    5: [2, 9],
                                    14: [2, 9],
                                    15: [2, 9],
                                    16: [2, 9],
                                    19: [2, 9],
                                    20: [2, 9],
                                    22: [2, 9],
                                    23: [2, 9],
                                    25: [2, 9]
                                }, {
                                    4: 20,
                                    6: 18,
                                    7: 19,
                                    8: 4,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 21],
                                    20: [2, 8],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    4: 20,
                                    6: 22,
                                    7: 19,
                                    8: 4,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 21],
                                    20: [2, 8],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    5: [2, 13],
                                    14: [2, 13],
                                    15: [2, 13],
                                    16: [2, 13],
                                    19: [2, 13],
                                    20: [2, 13],
                                    22: [2, 13],
                                    23: [2, 13],
                                    25: [2, 13]
                                }, {
                                    5: [2, 14],
                                    14: [2, 14],
                                    15: [2, 14],
                                    16: [2, 14],
                                    19: [2, 14],
                                    20: [2, 14],
                                    22: [2, 14],
                                    23: [2, 14],
                                    25: [2, 14]
                                }, {
                                    5: [2, 15],
                                    14: [2, 15],
                                    15: [2, 15],
                                    16: [2, 15],
                                    19: [2, 15],
                                    20: [2, 15],
                                    22: [2, 15],
                                    23: [2, 15],
                                    25: [2, 15]
                                }, {
                                    5: [2, 16],
                                    14: [2, 16],
                                    15: [2, 16],
                                    16: [2, 16],
                                    19: [2, 16],
                                    20: [2, 16],
                                    22: [2, 16],
                                    23: [2, 16],
                                    25: [2, 16]
                                }, {
                                    17: 23,
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    17: 29,
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    17: 30,
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    17: 31,
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    21: 33,
                                    26: 32,
                                    32: [1, 34],
                                    33: [1, 35],
                                    40: [1, 28],
                                    43: 26
                                }, {
                                    1: [2, 1]
                                }, {
                                    5: [2, 10],
                                    14: [2, 10],
                                    15: [2, 10],
                                    16: [2, 10],
                                    19: [2, 10],
                                    20: [2, 10],
                                    22: [2, 10],
                                    23: [2, 10],
                                    25: [2, 10]
                                }, {
                                    10: 36,
                                    20: [1, 37]
                                }, {
                                    4: 38,
                                    8: 4,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    20: [2, 7],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    7: 39,
                                    8: 17,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 21],
                                    20: [2, 6],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    17: 23,
                                    18: [1, 40],
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    10: 41,
                                    20: [1, 37]
                                }, {
                                    18: [1, 42]
                                }, {
                                    18: [2, 43],
                                    24: [2, 43],
                                    28: 43,
                                    32: [2, 43],
                                    33: [2, 43],
                                    34: [2, 43],
                                    35: [2, 43],
                                    36: [2, 43],
                                    40: [2, 43],
                                    42: [2, 43]
                                }, {
                                    18: [2, 25],
                                    24: [2, 25],
                                    36: [2, 25]
                                }, {
                                    18: [2, 38],
                                    24: [2, 38],
                                    32: [2, 38],
                                    33: [2, 38],
                                    34: [2, 38],
                                    35: [2, 38],
                                    36: [2, 38],
                                    40: [2, 38],
                                    42: [2, 38],
                                    44: [1, 44]
                                }, {
                                    21: 45,
                                    40: [1, 28],
                                    43: 26
                                }, {
                                    18: [2, 40],
                                    24: [2, 40],
                                    32: [2, 40],
                                    33: [2, 40],
                                    34: [2, 40],
                                    35: [2, 40],
                                    36: [2, 40],
                                    40: [2, 40],
                                    42: [2, 40],
                                    44: [2, 40]
                                }, {
                                    18: [1, 46]
                                }, {
                                    18: [1, 47]
                                }, {
                                    24: [1, 48]
                                }, {
                                    18: [2, 41],
                                    21: 50,
                                    27: 49,
                                    40: [1, 28],
                                    43: 26
                                }, {
                                    18: [2, 34],
                                    40: [2, 34]
                                }, {
                                    18: [2, 35],
                                    40: [2, 35]
                                }, {
                                    18: [2, 36],
                                    40: [2, 36]
                                }, {
                                    5: [2, 11],
                                    14: [2, 11],
                                    15: [2, 11],
                                    16: [2, 11],
                                    19: [2, 11],
                                    20: [2, 11],
                                    22: [2, 11],
                                    23: [2, 11],
                                    25: [2, 11]
                                }, {
                                    21: 51,
                                    40: [1, 28],
                                    43: 26
                                }, {
                                    8: 17,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    20: [2, 3],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    4: 52,
                                    8: 4,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    20: [2, 5],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    14: [2, 23],
                                    15: [2, 23],
                                    16: [2, 23],
                                    19: [2, 23],
                                    20: [2, 23],
                                    22: [2, 23],
                                    23: [2, 23],
                                    25: [2, 23]
                                }, {
                                    5: [2, 12],
                                    14: [2, 12],
                                    15: [2, 12],
                                    16: [2, 12],
                                    19: [2, 12],
                                    20: [2, 12],
                                    22: [2, 12],
                                    23: [2, 12],
                                    25: [2, 12]
                                }, {
                                    14: [2, 18],
                                    15: [2, 18],
                                    16: [2, 18],
                                    19: [2, 18],
                                    20: [2, 18],
                                    22: [2, 18],
                                    23: [2, 18],
                                    25: [2, 18]
                                }, {
                                    18: [2, 45],
                                    21: 56,
                                    24: [2, 45],
                                    29: 53,
                                    30: 60,
                                    31: 54,
                                    32: [1, 57],
                                    33: [1, 58],
                                    34: [1, 59],
                                    35: [1, 61],
                                    36: [2, 45],
                                    37: 55,
                                    38: 62,
                                    39: 63,
                                    40: [1, 64],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    40: [1, 65]
                                }, {
                                    18: [2, 37],
                                    24: [2, 37],
                                    32: [2, 37],
                                    33: [2, 37],
                                    34: [2, 37],
                                    35: [2, 37],
                                    36: [2, 37],
                                    40: [2, 37],
                                    42: [2, 37]
                                }, {
                                    14: [2, 17],
                                    15: [2, 17],
                                    16: [2, 17],
                                    19: [2, 17],
                                    20: [2, 17],
                                    22: [2, 17],
                                    23: [2, 17],
                                    25: [2, 17]
                                }, {
                                    5: [2, 20],
                                    14: [2, 20],
                                    15: [2, 20],
                                    16: [2, 20],
                                    19: [2, 20],
                                    20: [2, 20],
                                    22: [2, 20],
                                    23: [2, 20],
                                    25: [2, 20]
                                }, {
                                    5: [2, 21],
                                    14: [2, 21],
                                    15: [2, 21],
                                    16: [2, 21],
                                    19: [2, 21],
                                    20: [2, 21],
                                    22: [2, 21],
                                    23: [2, 21],
                                    25: [2, 21]
                                }, {
                                    18: [1, 66]
                                }, {
                                    18: [2, 42]
                                }, {
                                    18: [1, 67]
                                }, {
                                    8: 17,
                                    9: 5,
                                    11: 6,
                                    12: 7,
                                    13: 8,
                                    14: [1, 9],
                                    15: [1, 10],
                                    16: [1, 12],
                                    19: [1, 11],
                                    20: [2, 4],
                                    22: [1, 13],
                                    23: [1, 14],
                                    25: [1, 15]
                                }, {
                                    18: [2, 24],
                                    24: [2, 24],
                                    36: [2, 24]
                                }, {
                                    18: [2, 44],
                                    24: [2, 44],
                                    32: [2, 44],
                                    33: [2, 44],
                                    34: [2, 44],
                                    35: [2, 44],
                                    36: [2, 44],
                                    40: [2, 44],
                                    42: [2, 44]
                                }, {
                                    18: [2, 46],
                                    24: [2, 46],
                                    36: [2, 46]
                                }, {
                                    18: [2, 26],
                                    24: [2, 26],
                                    32: [2, 26],
                                    33: [2, 26],
                                    34: [2, 26],
                                    35: [2, 26],
                                    36: [2, 26],
                                    40: [2, 26],
                                    42: [2, 26]
                                }, {
                                    18: [2, 27],
                                    24: [2, 27],
                                    32: [2, 27],
                                    33: [2, 27],
                                    34: [2, 27],
                                    35: [2, 27],
                                    36: [2, 27],
                                    40: [2, 27],
                                    42: [2, 27]
                                }, {
                                    18: [2, 28],
                                    24: [2, 28],
                                    32: [2, 28],
                                    33: [2, 28],
                                    34: [2, 28],
                                    35: [2, 28],
                                    36: [2, 28],
                                    40: [2, 28],
                                    42: [2, 28]
                                }, {
                                    18: [2, 29],
                                    24: [2, 29],
                                    32: [2, 29],
                                    33: [2, 29],
                                    34: [2, 29],
                                    35: [2, 29],
                                    36: [2, 29],
                                    40: [2, 29],
                                    42: [2, 29]
                                }, {
                                    18: [2, 30],
                                    24: [2, 30],
                                    32: [2, 30],
                                    33: [2, 30],
                                    34: [2, 30],
                                    35: [2, 30],
                                    36: [2, 30],
                                    40: [2, 30],
                                    42: [2, 30]
                                }, {
                                    17: 68,
                                    21: 24,
                                    30: 25,
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    18: [2, 32],
                                    24: [2, 32],
                                    36: [2, 32],
                                    39: 69,
                                    40: [1, 70]
                                }, {
                                    18: [2, 47],
                                    24: [2, 47],
                                    36: [2, 47],
                                    40: [2, 47]
                                }, {
                                    18: [2, 40],
                                    24: [2, 40],
                                    32: [2, 40],
                                    33: [2, 40],
                                    34: [2, 40],
                                    35: [2, 40],
                                    36: [2, 40],
                                    40: [2, 40],
                                    41: [1, 71],
                                    42: [2, 40],
                                    44: [2, 40]
                                }, {
                                    18: [2, 39],
                                    24: [2, 39],
                                    32: [2, 39],
                                    33: [2, 39],
                                    34: [2, 39],
                                    35: [2, 39],
                                    36: [2, 39],
                                    40: [2, 39],
                                    42: [2, 39],
                                    44: [2, 39]
                                }, {
                                    5: [2, 22],
                                    14: [2, 22],
                                    15: [2, 22],
                                    16: [2, 22],
                                    19: [2, 22],
                                    20: [2, 22],
                                    22: [2, 22],
                                    23: [2, 22],
                                    25: [2, 22]
                                }, {
                                    5: [2, 19],
                                    14: [2, 19],
                                    15: [2, 19],
                                    16: [2, 19],
                                    19: [2, 19],
                                    20: [2, 19],
                                    22: [2, 19],
                                    23: [2, 19],
                                    25: [2, 19]
                                }, {
                                    36: [1, 72]
                                }, {
                                    18: [2, 48],
                                    24: [2, 48],
                                    36: [2, 48],
                                    40: [2, 48]
                                }, {
                                    41: [1, 71]
                                }, {
                                    21: 56,
                                    30: 60,
                                    31: 73,
                                    32: [1, 57],
                                    33: [1, 58],
                                    34: [1, 59],
                                    35: [1, 61],
                                    40: [1, 28],
                                    42: [1, 27],
                                    43: 26
                                }, {
                                    18: [2, 31],
                                    24: [2, 31],
                                    32: [2, 31],
                                    33: [2, 31],
                                    34: [2, 31],
                                    35: [2, 31],
                                    36: [2, 31],
                                    40: [2, 31],
                                    42: [2, 31]
                                }, {
                                    18: [2, 33],
                                    24: [2, 33],
                                    36: [2, 33],
                                    40: [2, 33]
                                }],
                                defaultActions: {
                                    3: [2, 2],
                                    16: [2, 1],
                                    50: [2, 42]
                                },
                                parseError: function(t, n) {
                                    throw new Error(t)
                                },
                                parse: function(t) {
                                    function v(e) {
                                        r.length = r.length - 2 * e, i.length = i.length - e, s.length = s.length - e
                                    }

                                    function m() {
                                        var e;
                                        return e = n.lexer.lex() || 1, typeof e != "number" && (e = n.symbols_[e] || e), e
                                    }
                                    var n = this,
                                        r = [0],
                                        i = [null],
                                        s = [],
                                        o = this.table,
                                        u = "",
                                        a = 0,
                                        f = 0,
                                        l = 0,
                                        c = 2,
                                        h = 1;
                                    this.lexer.setInput(t), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, this.yy.parser = this, typeof this.lexer.yylloc == "undefined" && (this.lexer.yylloc = {});
                                    var p = this.lexer.yylloc;
                                    s.push(p);
                                    var d = this.lexer.options && this.lexer.options.ranges;
                                    typeof this.yy.parseError == "function" && (this.parseError = this.yy.parseError);
                                    var g, y, b, w, E, S, x = {},
                                        T, N, C, k;
                                    for (;;) {
                                        b = r[r.length - 1];
                                        if (this.defaultActions[b]) w = this.defaultActions[b];
                                        else {
                                            if (g === null || typeof g == "undefined") g = m();
                                            w = o[b] && o[b][g]
                                        }
                                        if (typeof w == "undefined" || !w.length || !w[0]) {
                                            var L = "";
                                            if (!l) {
                                                k = [];
                                                for (T in o[b]) this.terminals_[T] && T > 2 && k.push("'" + this.terminals_[T] + "'");
                                                this.lexer.showPosition ? L = "Parse error on line " + (a + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + k.join(", ") + ", got '" + (this.terminals_[g] || g) + "'" : L = "Parse error on line " + (a + 1) + ": Unexpected " + (g == 1 ? "end of input" : "'" + (this.terminals_[g] || g) + "'"), this.parseError(L, {
                                                    text: this.lexer.match,
                                                    token: this.terminals_[g] || g,
                                                    line: this.lexer.yylineno,
                                                    loc: p,
                                                    expected: k
                                                })
                                            }
                                        }
                                        if (w[0] instanceof Array && w.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + b + ", token: " + g);
                                        switch (w[0]) {
                                            case 1:
                                                r.push(g), i.push(this.lexer.yytext), s.push(this.lexer.yylloc), r.push(w[1]), g = null, y ? (g = y, y = null) : (f = this.lexer.yyleng, u = this.lexer.yytext, a = this.lexer.yylineno, p = this.lexer.yylloc, l > 0 && l--);
                                                break;
                                            case 2:
                                                N = this.productions_[w[1]][1], x.$ = i[i.length - N], x._$ = {
                                                    first_line: s[s.length - (N || 1)].first_line,
                                                    last_line: s[s.length - 1].last_line,
                                                    first_column: s[s.length - (N || 1)].first_column,
                                                    last_column: s[s.length - 1].last_column
                                                }, d && (x._$.range = [s[s.length - (N || 1)].range[0], s[s.length - 1].range[1]]), S = this.performAction.call(x, u, f, a, this.yy, w[1], i, s);
                                                if (typeof S != "undefined") return S;
                                                N && (r = r.slice(0, -1 * N * 2), i = i.slice(0, -1 * N), s = s.slice(0, -1 * N)), r.push(this.productions_[w[1]][0]), i.push(x.$), s.push(x._$), C = o[r[r.length - 2]][r[r.length - 1]], r.push(C);
                                                break;
                                            case 3:
                                                return !0
                                        }
                                    }
                                    return !0
                                }
                            },
                            n = function() {
                                var e = {
                                    EOF: 1,
                                    parseError: function(t, n) {
                                        if (!this.yy.parser) throw new Error(t);
                                        this.yy.parser.parseError(t, n)
                                    },
                                    setInput: function(e) {
                                        return this._input = e, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = "", this.conditionStack = ["INITIAL"], this.yylloc = {
                                            first_line: 1,
                                            first_column: 0,
                                            last_line: 1,
                                            last_column: 0
                                        }, this.options.ranges && (this.yylloc.range = [0, 0]), this.offset = 0, this
                                    },
                                    input: function() {
                                        var e = this._input[0];
                                        this.yytext += e, this.yyleng++, this.offset++, this.match += e, this.matched += e;
                                        var t = e.match(/(?:\r\n?|\n).*/g);
                                        return t ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), e
                                    },
                                    unput: function(e) {
                                        var t = e.length,
                                            n = e.split(/(?:\r\n?|\n)/g);
                                        this._input = e + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - t - 1), this.offset -= t;
                                        var r = this.match.split(/(?:\r\n?|\n)/g);
                                        this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), n.length - 1 && (this.yylineno -= n.length - 1);
                                        var i = this.yylloc.range;
                                        return this.yylloc = {
                                            first_line: this.yylloc.first_line,
                                            last_line: this.yylineno + 1,
                                            first_column: this.yylloc.first_column,
                                            last_column: n ? (n.length === r.length ? this.yylloc.first_column : 0) + r[r.length - n.length].length - n[0].length : this.yylloc.first_column - t
                                        }, this.options.ranges && (this.yylloc.range = [i[0], i[0] + this.yyleng - t]), this
                                    },
                                    more: function() {
                                        return this._more = !0, this
                                    },
                                    less: function(e) {
                                        this.unput(this.match.slice(e))
                                    },
                                    pastInput: function() {
                                        var e = this.matched.substr(0, this.matched.length - this.match.length);
                                        return (e.length > 20 ? "..." : "") + e.substr(-20).replace(/\n/g, "")
                                    },
                                    upcomingInput: function() {
                                        var e = this.match;
                                        return e.length < 20 && (e += this._input.substr(0, 20 - e.length)), (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(/\n/g, "")
                                    },
                                    showPosition: function() {
                                        var e = this.pastInput(),
                                            t = (new Array(e.length + 1)).join("-");
                                        return e + this.upcomingInput() + "\n" + t + "^"
                                    },
                                    next: function() {
                                        if (this.done) return this.EOF;
                                        this._input || (this.done = !0);
                                        var e, t, n, r, i, s;
                                        this._more || (this.yytext = "", this.match = "");
                                        var o = this._currentRules();
                                        for (var u = 0; u < o.length; u++) {
                                            n = this._input.match(this.rules[o[u]]);
                                            if (n && (!t || n[0].length > t[0].length)) {
                                                t = n, r = u;
                                                if (!this.options.flex) break
                                            }
                                        }
                                        if (t) {
                                            s = t[0].match(/(?:\r\n?|\n).*/g), s && (this.yylineno += s.length), this.yylloc = {
                                                first_line: this.yylloc.last_line,
                                                last_line: this.yylineno + 1,
                                                first_column: this.yylloc.last_column,
                                                last_column: s ? s[s.length - 1].length - s[s.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + t[0].length
                                            }, this.yytext += t[0], this.match += t[0], this.matches = t, this.yyleng = this.yytext.length, this.options.ranges && (this.yylloc.range = [this.offset, this.offset += this.yyleng]), this._more = !1, this._input = this._input.slice(t[0].length), this.matched += t[0], e = this.performAction.call(this, this.yy, this, o[r], this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1);
                                            if (e) return e;
                                            return
                                        }
                                        return this._input === "" ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                                            text: "",
                                            token: null,
                                            line: this.yylineno
                                        })
                                    },
                                    lex: function() {
                                        var t = this.next();
                                        return typeof t != "undefined" ? t : this.lex()
                                    },
                                    begin: function(t) {
                                        this.conditionStack.push(t)
                                    },
                                    popState: function() {
                                        return this.conditionStack.pop()
                                    },
                                    _currentRules: function() {
                                        return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules
                                    },
                                    topState: function() {
                                        return this.conditionStack[this.conditionStack.length - 2]
                                    },
                                    pushState: function(t) {
                                        this.begin(t)
                                    }
                                };
                                return e.options = {}, e.performAction = function(t, n, r, i) {
                                    function s(e, t) {
                                        return n.yytext = n.yytext.substr(e, n.yyleng - t)
                                    }
                                    var o = i;
                                    switch (r) {
                                        case 0:
                                            n.yytext.slice(-2) === "\\\\" ? (s(0, 1), this.begin("mu")) : n.yytext.slice(-1) === "\\" ? (s(0, 1), this.begin("emu")) : this.begin("mu");
                                            if (n.yytext) return 14;
                                            break;
                                        case 1:
                                            return 14;
                                        case 2:
                                            return this.popState(), 14;
                                        case 3:
                                            return s(0, 4), this.popState(), 15;
                                        case 4:
                                            return 35;
                                        case 5:
                                            return 36;
                                        case 6:
                                            return 25;
                                        case 7:
                                            return 16;
                                        case 8:
                                            return 20;
                                        case 9:
                                            return 19;
                                        case 10:
                                            return 19;
                                        case 11:
                                            return 23;
                                        case 12:
                                            return 22;
                                        case 13:
                                            this.popState(), this.begin("com");
                                            break;
                                        case 14:
                                            return s(3, 5), this.popState(), 15;
                                        case 15:
                                            return 22;
                                        case 16:
                                            return 41;
                                        case 17:
                                            return 40;
                                        case 18:
                                            return 40;
                                        case 19:
                                            return 44;
                                        case 20:
                                            break;
                                        case 21:
                                            return this.popState(), 24;
                                        case 22:
                                            return this.popState(), 18;
                                        case 23:
                                            return n.yytext = s(1, 2).replace(/\\"/g, '"'), 32;
                                        case 24:
                                            return n.yytext = s(1, 2).replace(/\\'/g, "'"), 32;
                                        case 25:
                                            return 42;
                                        case 26:
                                            return 34;
                                        case 27:
                                            return 34;
                                        case 28:
                                            return 33;
                                        case 29:
                                            return 40;
                                        case 30:
                                            return n.yytext = s(1, 2), 40;
                                        case 31:
                                            return "INVALID";
                                        case 32:
                                            return 5
                                    }
                                }, e.rules = [/^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/, /^(?:[\s\S]*?--\}\})/, /^(?:\()/, /^(?:\))/, /^(?:\{\{(~)?>)/, /^(?:\{\{(~)?#)/, /^(?:\{\{(~)?\/)/, /^(?:\{\{(~)?\^)/, /^(?:\{\{(~)?\s*else\b)/, /^(?:\{\{(~)?\{)/, /^(?:\{\{(~)?&)/, /^(?:\{\{!--)/, /^(?:\{\{![\s\S]*?\}\})/, /^(?:\{\{(~)?)/, /^(?:=)/, /^(?:\.\.)/, /^(?:\.(?=([=~}\s\/.)])))/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}(~)?\}\})/, /^(?:(~)?\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=([~}\s)])))/, /^(?:false(?=([~}\s)])))/, /^(?:-?[0-9]+(?=([~}\s)])))/, /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/, /^(?:\[[^\]]*\])/, /^(?:.)/, /^(?:$)/], e.conditions = {
                                    mu: {
                                        rules: [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32],
                                        inclusive: !1
                                    },
                                    emu: {
                                        rules: [2],
                                        inclusive: !1
                                    },
                                    com: {
                                        rules: [3],
                                        inclusive: !1
                                    },
                                    INITIAL: {
                                        rules: [0, 1, 32],
                                        inclusive: !0
                                    }
                                }, e
                            }();
                        return e.lexer = n, r.prototype = e, e.Parser = r, new r
                    }();
                    return e = t, e
                }(),
                a = function(e, t) {
                    "use strict";

                    function s(e) {
                        return e.constructor === i.ProgramNode ? e : (r.yy = i, r.parse(e))
                    }
                    var n = {},
                        r = e,
                        i = t;
                    return n.parser = r, n.parse = s, n
                }(u, o),
                f = function(e) {
                    "use strict";

                    function r() {}

                    function i(e, t, r) {
                        if (e == null || typeof e != "string" && e.constructor !== r.AST.ProgramNode) throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + e);
                        t = t || {}, "data" in t || (t.data = !0);
                        var i = r.parse(e),
                            s = (new r.Compiler).compile(i, t);
                        return (new r.JavaScriptCompiler).compile(s, t)
                    }

                    function s(e, t, r) {
                        function s() {
                            var n = r.parse(e),
                                i = (new r.Compiler).compile(n, t),
                                s = (new r.JavaScriptCompiler).compile(i, t, undefined, !0);
                            return r.template(s)
                        }
                        if (e == null || typeof e != "string" && e.constructor !== r.AST.ProgramNode) throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + e);
                        t = t || {}, "data" in t || (t.data = !0);
                        var i;
                        return function(e, t) {
                            return i || (i = s()), i.call(this, e, t)
                        }
                    }
                    var t = {},
                        n = e;
                    return t.Compiler = r, r.prototype = {
                        compiler: r,
                        disassemble: function() {
                            var e = this.opcodes,
                                t, n = [],
                                r, i;
                            for (var s = 0, o = e.length; s < o; s++) {
                                t = e[s];
                                if (t.opcode === "DECLARE") n.push("DECLARE " + t.name + "=" + t.value);
                                else {
                                    r = [];
                                    for (var u = 0; u < t.args.length; u++) i = t.args[u], typeof i == "string" && (i = '"' + i.replace("\n", "\\n") + '"'), r.push(i);
                                    n.push(t.opcode + " " + r.join(" "))
                                }
                            }
                            return n.join("\n")
                        },
                        equals: function(e) {
                            var t = this.opcodes.length;
                            if (e.opcodes.length !== t) return !1;
                            for (var n = 0; n < t; n++) {
                                var r = this.opcodes[n],
                                    i = e.opcodes[n];
                                if (r.opcode !== i.opcode || r.args.length !== i.args.length) return !1;
                                for (var s = 0; s < r.args.length; s++)
                                    if (r.args[s] !== i.args[s]) return !1
                            }
                            t = this.children.length;
                            if (e.children.length !== t) return !1;
                            for (n = 0; n < t; n++)
                                if (!this.children[n].equals(e.children[n])) return !1;
                            return !0
                        },
                        guid: 0,
                        compile: function(e, t) {
                            this.opcodes = [], this.children = [], this.depths = {
                                list: []
                            }, this.options = t;
                            var n = this.options.knownHelpers;
                            this.options.knownHelpers = {
                                helperMissing: !0,
                                blockHelperMissing: !0,
                                each: !0,
                                "if": !0,
                                unless: !0,
                                "with": !0,
                                log: !0
                            };
                            if (n)
                                for (var r in n) this.options.knownHelpers[r] = n[r];
                            return this.accept(e)
                        },
                        accept: function(e) {
                            var t = e.strip || {},
                                n;
                            return t.left && this.opcode("strip"), n = this[e.type](e), t.right && this.opcode("strip"), n
                        },
                        program: function(e) {
                            var t = e.statements;
                            for (var n = 0, r = t.length; n < r; n++) this.accept(t[n]);
                            return this.isSimple = r === 1, this.depths.list = this.depths.list.sort(function(e, t) {
                                return e - t
                            }), this
                        },
                        compileProgram: function(e) {
                            var t = (new this.compiler).compile(e, this.options),
                                n = this.guid++,
                                r;
                            this.usePartial = this.usePartial || t.usePartial, this.children[n] = t;
                            for (var i = 0, s = t.depths.list.length; i < s; i++) {
                                r = t.depths.list[i];
                                if (r < 2) continue;
                                this.addDepth(r - 1)
                            }
                            return n
                        },
                        block: function(e) {
                            var t = e.mustache,
                                n = e.program,
                                r = e.inverse;
                            n && (n = this.compileProgram(n)), r && (r = this.compileProgram(r));
                            var i = t.sexpr,
                                s = this.classifySexpr(i);
                            s === "helper" ? this.helperSexpr(i, n, r) : s === "simple" ? (this.simpleSexpr(i), this.opcode("pushProgram", n), this.opcode("pushProgram", r), this.opcode("emptyHash"), this.opcode("blockValue")) : (this.ambiguousSexpr(i, n, r), this.opcode("pushProgram", n), this.opcode("pushProgram", r), this.opcode("emptyHash"), this.opcode("ambiguousBlockValue")), this.opcode("append")
                        },
                        hash: function(e) {
                            var t = e.pairs,
                                n, r;
                            this.opcode("pushHash");
                            for (var i = 0, s = t.length; i < s; i++) n = t[i], r = n[1], this.options.stringParams ? (r.depth && this.addDepth(r.depth), this.opcode("getContext", r.depth || 0), this.opcode("pushStringParam", r.stringModeValue, r.type), r.type === "sexpr" && this.sexpr(r)) : this.accept(r), this.opcode("assignToHash", n[0]);
                            this.opcode("popHash")
                        },
                        partial: function(e) {
                            var t = e.partialName;
                            this.usePartial = !0, e.context ? this.ID(e.context) : this.opcode("push", "depth0"), this.opcode("invokePartial", t.name), this.opcode("append")
                        },
                        content: function(e) {
                            this.opcode("appendContent", e.string)
                        },
                        mustache: function(e) {
                            this.sexpr(e.sexpr), e.escaped && !this.options.noEscape ? this.opcode("appendEscaped") : this.opcode("append")
                        },
                        ambiguousSexpr: function(e, t, n) {
                            var r = e.id,
                                i = r.parts[0],
                                s = t != null || n != null;
                            this.opcode("getContext", r.depth), this.opcode("pushProgram", t), this.opcode("pushProgram", n), this.opcode("invokeAmbiguous", i, s)
                        },
                        simpleSexpr: function(e) {
                            var t = e.id;
                            t.type === "DATA" ? this.DATA(t) : t.parts.length ? this.ID(t) : (this.addDepth(t.depth), this.opcode("getContext", t.depth), this.opcode("pushContext")), this.opcode("resolvePossibleLambda")
                        },
                        helperSexpr: function(e, t, r) {
                            var i = this.setupFullMustacheParams(e, t, r),
                                s = e.id.parts[0];
                            if (this.options.knownHelpers[s]) this.opcode("invokeKnownHelper", i.length, s);
                            else {
                                if (this.options.knownHelpersOnly) throw new n("You specified knownHelpersOnly, but used the unknown helper " + s, e);
                                this.opcode("invokeHelper", i.length, s, e.isRoot)
                            }
                        },
                        sexpr: function(e) {
                            var t = this.classifySexpr(e);
                            t === "simple" ? this.simpleSexpr(e) : t === "helper" ? this.helperSexpr(e) : this.ambiguousSexpr(e)
                        },
                        ID: function(e) {
                            this.addDepth(e.depth), this.opcode("getContext", e.depth);
                            var t = e.parts[0];
                            t ? this.opcode("lookupOnContext", e.parts[0]) : this.opcode("pushContext");
                            for (var n = 1, r = e.parts.length; n < r; n++) this.opcode("lookup", e.parts[n])
                        },
                        DATA: function(e) {
                            this.options.data = !0;
                            if (e.id.isScoped || e.id.depth) throw new n("Scoped data references are not supported: " + e.original, e);
                            this.opcode("lookupData");
                            var t = e.id.parts;
                            for (var r = 0, i = t.length; r < i; r++) this.opcode("lookup", t[r])
                        },
                        STRING: function(e) {
                            this.opcode("pushString", e.string)
                        },
                        INTEGER: function(e) {
                            this.opcode("pushLiteral", e.integer)
                        },
                        BOOLEAN: function(e) {
                            this.opcode("pushLiteral", e.bool)
                        },
                        comment: function() {},
                        opcode: function(e) {
                            this.opcodes.push({
                                opcode: e,
                                args: [].slice.call(arguments, 1)
                            })
                        },
                        declare: function(e, t) {
                            this.opcodes.push({
                                opcode: "DECLARE",
                                name: e,
                                value: t
                            })
                        },
                        addDepth: function(e) {
                            if (e === 0) return;
                            this.depths[e] || (this.depths[e] = !0, this.depths.list.push(e))
                        },
                        classifySexpr: function(e) {
                            var t = e.isHelper,
                                n = e.eligibleHelper,
                                r = this.options;
                            if (n && !t) {
                                var i = e.id.parts[0];
                                r.knownHelpers[i] ? t = !0 : r.knownHelpersOnly && (n = !1)
                            }
                            return t ? "helper" : n ? "ambiguous" : "simple"
                        },
                        pushParams: function(e) {
                            var t = e.length,
                                n;
                            while (t--) n = e[t], this.options.stringParams ? (n.depth && this.addDepth(n.depth), this.opcode("getContext", n.depth || 0), this.opcode("pushStringParam", n.stringModeValue, n.type), n.type === "sexpr" && this.sexpr(n)) : this[n.type](n)
                        },
                        setupFullMustacheParams: function(e, t, n) {
                            var r = e.params;
                            return this.pushParams(r), this.opcode("pushProgram", t), this.opcode("pushProgram", n), e.hash ? this.hash(e.hash) : this.opcode("emptyHash"), r
                        }
                    }, t.precompile = i, t.compile = s, t
                }(n),
                l = function(e, t) {
                    "use strict";

                    function u(e) {
                        this.value = e
                    }

                    function a() {}
                    var n, r = e.COMPILER_REVISION,
                        i = e.REVISION_CHANGES,
                        s = e.log,
                        o = t;
                    a.prototype = {
                        nameLookup: function(e, t) {
                            var n, r;
                            return e.indexOf("depth") === 0 && (n = !0), /^[0-9]+$/.test(t) ? r = e + "[" + t + "]" : a.isValidJavaScriptVariableName(t) ? r = e + "." + t : r = e + "['" + t + "']", n ? "(" + e + " && " + r + ")" : r
                        },
                        compilerInfo: function() {
                            var e = r,
                                t = i[e];
                            return "this.compilerInfo = [" + e + ",'" + t + "'];\n"
                        },
                        appendToBuffer: function(e) {
                            return this.environment.isSimple ? "return " + e + ";" : {
                                appendToBuffer: !0,
                                content: e,
                                toString: function() {
                                    return "buffer += " + e + ";"
                                }
                            }
                        },
                        initializeBuffer: function() {
                            return this.quotedString("")
                        },
                        namespace: "Handlebars",
                        compile: function(e, t, n, r) {
                            this.environment = e, this.options = t || {}, s("debug", this.environment.disassemble() + "\n\n"), this.name = this.environment.name, this.isChild = !!n, this.context = n || {
                                programs: [],
                                environments: [],
                                aliases: {}
                            }, this.preamble(), this.stackSlot = 0, this.stackVars = [], this.registers = {
                                list: []
                            }, this.hashes = [], this.compileStack = [], this.inlineStack = [], this.compileChildren(e, t);
                            var i = e.opcodes,
                                u;
                            this.i = 0;
                            for (var a = i.length; this.i < a; this.i++) u = i[this.i], u.opcode === "DECLARE" ? this[u.name] = u.value : this[u.opcode].apply(this, u.args), u.opcode !== this.stripNext && (this.stripNext = !1);
                            this.pushSource("");
                            if (this.stackSlot || this.inlineStack.length || this.compileStack.length) throw new o("Compile completed with content left on stack");
                            return this.createFunctionContext(r)
                        },
                        preamble: function() {
                            var e = [];
                            if (!this.isChild) {
                                var t = this.namespace,
                                    n = "helpers = this.merge(helpers, " + t + ".helpers);";
                                this.environment.usePartial && (n = n + " partials = this.merge(partials, " + t + ".partials);"), this.options.data && (n += " data = data || {};"), e.push(n)
                            } else e.push("");
                            this.environment.isSimple ? e.push("") : e.push(", buffer = " + this.initializeBuffer()), this.lastContext = 0, this.source = e
                        },
                        createFunctionContext: function(e) {
                            var t = this.stackVars.concat(this.registers.list);
                            t.length > 0 && (this.source[1] = this.source[1] + ", " + t.join(", "));
                            if (!this.isChild)
                                for (var n in this.context.aliases) this.context.aliases.hasOwnProperty(n) && (this.source[1] = this.source[1] + ", " + n + "=" + this.context.aliases[n]);
                            this.source[1] && (this.source[1] = "var " + this.source[1].substring(2) + ";"), this.isChild || (this.source[1] += "\n" + this.context.programs.join("\n") + "\n"), this.environment.isSimple || this.pushSource("return buffer;");
                            var r = this.isChild ? ["depth0", "data"] : ["Handlebars", "depth0", "helpers", "partials", "data"];
                            for (var i = 0, o = this.environment.depths.list.length; i < o; i++) r.push("depth" + this.environment.depths.list[i]);
                            var u = this.mergeSource();
                            this.isChild || (u = this.compilerInfo() + u);
                            if (e) return r.push(u), Function.apply(this, r);
                            var a = "function " + (this.name || "") + "(" + r.join(",") + ") {\n  " + u + "}";
                            return s("debug", a + "\n\n"), a
                        },
                        mergeSource: function() {
                            var e = "",
                                t;
                            for (var n = 0, r = this.source.length; n < r; n++) {
                                var i = this.source[n];
                                i.appendToBuffer ? t ? t = t + "\n    + " + i.content : t = i.content : (t && (e += "buffer += " + t + ";\n  ", t = undefined), e += i + "\n  ")
                            }
                            return e
                        },
                        blockValue: function() {
                            this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
                            var e = ["depth0"];
                            this.setupParams(0, e), this.replaceStack(function(t) {
                                return e.splice(1, 0, t), "blockHelperMissing.call(" + e.join(", ") + ")"
                            })
                        },
                        ambiguousBlockValue: function() {
                            this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
                            var e = ["depth0"];
                            this.setupParams(0, e);
                            var t = this.topStack();
                            e.splice(1, 0, t), this.pushSource("if (!" + this.lastHelper + ") { " + t + " = blockHelperMissing.call(" + e.join(", ") + "); }")
                        },
                        appendContent: function(e) {
                            this.pendingContent && (e = this.pendingContent + e), this.stripNext && (e = e.replace(/^\s+/, "")), this.pendingContent = e
                        },
                        strip: function() {
                            this.pendingContent && (this.pendingContent = this.pendingContent.replace(/\s+$/, "")), this.stripNext = "strip"
                        },
                        append: function() {
                            this.flushInline();
                            var e = this.popStack();
                            this.pushSource("if(" + e + " || " + e + " === 0) { " + this.appendToBuffer(e) + " }"), this.environment.isSimple && this.pushSource("else { " + this.appendToBuffer("''") + " }")
                        },
                        appendEscaped: function() {
                            this.context.aliases.escapeExpression = "this.escapeExpression", this.pushSource(this.appendToBuffer("escapeExpression(" + this.popStack() + ")"))
                        },
                        getContext: function(e) {
                            this.lastContext !== e && (this.lastContext = e)
                        },
                        lookupOnContext: function(e) {
                            this.push(this.nameLookup("depth" + this.lastContext, e, "context"))
                        },
                        pushContext: function() {
                            this.pushStackLiteral("depth" + this.lastContext)
                        },
                        resolvePossibleLambda: function() {
                            this.context.aliases.functionType = '"function"', this.replaceStack(function(e) {
                                return "typeof " + e + " === functionType ? " + e + ".apply(depth0) : " + e
                            })
                        },
                        lookup: function(e) {
                            this.replaceStack(function(t) {
                                return t + " == null || " + t + " === false ? " + t + " : " + this.nameLookup(t, e, "context")
                            })
                        },
                        lookupData: function() {
                            this.pushStackLiteral("data")
                        },
                        pushStringParam: function(e, t) {
                            this.pushStackLiteral("depth" + this.lastContext), this.pushString(t), t !== "sexpr" && (typeof e == "string" ? this.pushString(e) : this.pushStackLiteral(e))
                        },
                        emptyHash: function() {
                            this.pushStackLiteral("{}"), this.options.stringParams && (this.push("{}"), this.push("{}"))
                        },
                        pushHash: function() {
                            this.hash && this.hashes.push(this.hash), this.hash = {
                                values: [],
                                types: [],
                                contexts: []
                            }
                        },
                        popHash: function() {
                            var e = this.hash;
                            this.hash = this.hashes.pop(), this.options.stringParams && (this.push("{" + e.contexts.join(",") + "}"), this.push("{" + e.types.join(",") + "}")), this.push("{\n    " + e.values.join(",\n    ") + "\n  }")
                        },
                        pushString: function(e) {
                            this.pushStackLiteral(this.quotedString(e))
                        },
                        push: function(e) {
                            return this.inlineStack.push(e), e
                        },
                        pushLiteral: function(e) {
                            this.pushStackLiteral(e)
                        },
                        pushProgram: function(e) {
                            e != null ? this.pushStackLiteral(this.programExpression(e)) : this.pushStackLiteral(null)
                        },
                        invokeHelper: function(e, t, n) {
                            this.context.aliases.helperMissing = "helpers.helperMissing", this.useRegister("helper");
                            var r = this.lastHelper = this.setupHelper(e, t, !0),
                                i = this.nameLookup("depth" + this.lastContext, t, "context"),
                                s = "helper = " + r.name + " || " + i;
                            r.paramsInit && (s += "," + r.paramsInit), this.push("(" + s + ",helper " + "? helper.call(" + r.callParams + ") " + ": helperMissing.call(" + r.helperMissingParams + "))"), n || this.flushInline()
                        },
                        invokeKnownHelper: function(e, t) {
                            var n = this.setupHelper(e, t);
                            this.push(n.name + ".call(" + n.callParams + ")")
                        },
                        invokeAmbiguous: function(e, t) {
                            this.context.aliases.functionType = '"function"', this.useRegister("helper"), this.emptyHash();
                            var n = this.setupHelper(0, e, t),
                                r = this.lastHelper = this.nameLookup("helpers", e, "helper"),
                                i = this.nameLookup("depth" + this.lastContext, e, "context"),
                                s = this.nextStack();
                            n.paramsInit && this.pushSource(n.paramsInit), this.pushSource("if (helper = " + r + ") { " + s + " = helper.call(" + n.callParams + "); }"), this.pushSource("else { helper = " + i + "; " + s + " = typeof helper === functionType ? helper.call(" + n.callParams + ") : helper; }")
                        },
                        invokePartial: function(e) {
                            var t = [this.nameLookup("partials", e, "partial"), "'" + e + "'", this.popStack(), "helpers", "partials"];
                            this.options.data && t.push("data"), this.context.aliases.self = "this", this.push("self.invokePartial(" + t.join(", ") + ")")
                        },
                        assignToHash: function(e) {
                            var t = this.popStack(),
                                n, r;
                            this.options.stringParams && (r = this.popStack(), n = this.popStack());
                            var i = this.hash;
                            n && i.contexts.push("'" + e + "': " + n), r && i.types.push("'" + e + "': " + r), i.values.push("'" + e + "': (" + t + ")")
                        },
                        compiler: a,
                        compileChildren: function(e, t) {
                            var n = e.children,
                                r, i;
                            for (var s = 0, o = n.length; s < o; s++) {
                                r = n[s], i = new this.compiler;
                                var u = this.matchExistingProgram(r);
                                u == null ? (this.context.programs.push(""), u = this.context.programs.length, r.index = u, r.name = "program" + u, this.context.programs[u] = i.compile(r, t, this.context), this.context.environments[u] = r) : (r.index = u, r.name = "program" + u)
                            }
                        },
                        matchExistingProgram: function(e) {
                            for (var t = 0, n = this.context.environments.length; t < n; t++) {
                                var r = this.context.environments[t];
                                if (r && r.equals(e)) return t
                            }
                        },
                        programExpression: function(e) {
                            this.context.aliases.self = "this";
                            if (e == null) return "self.noop";
                            var t = this.environment.children[e],
                                n = t.depths.list,
                                r, i = [t.index, t.name, "data"];
                            for (var s = 0, o = n.length; s < o; s++) r = n[s], r === 1 ? i.push("depth0") : i.push("depth" + (r - 1));
                            return (n.length === 0 ? "self.program(" : "self.programWithDepth(") + i.join(", ") + ")"
                        },
                        register: function(e, t) {
                            this.useRegister(e), this.pushSource(e + " = " + t + ";")
                        },
                        useRegister: function(e) {
                            this.registers[e] || (this.registers[e] = !0, this.registers.list.push(e))
                        },
                        pushStackLiteral: function(e) {
                            return this.push(new u(e))
                        },
                        pushSource: function(e) {
                            this.pendingContent && (this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))), this.pendingContent = undefined), e && this.source.push(e)
                        },
                        pushStack: function(e) {
                            this.flushInline();
                            var t = this.incrStack();
                            return e && this.pushSource(t + " = " + e + ";"), this.compileStack.push(t), t
                        },
                        replaceStack: function(e) {
                            var t = "",
                                n = this.isInline(),
                                r, i, s;
                            if (n) {
                                var o = this.popStack(!0);
                                if (o instanceof u) r = o.value, s = !0;
                                else {
                                    i = !this.stackSlot;
                                    var a = i ? this.incrStack() : this.topStackName();
                                    t = "(" + this.push(a) + " = " + o + "),", r = this.topStack()
                                }
                            } else r = this.topStack();
                            var f = e.call(this, r);
                            return n ? (s || this.popStack(), i && this.stackSlot--, this.push("(" + t + f + ")")) : (/^stack/.test(r) || (r = this.nextStack()), this.pushSource(r + " = (" + t + f + ");")), r
                        },
                        nextStack: function() {
                            return this.pushStack()
                        },
                        incrStack: function() {
                            return this.stackSlot++, this.stackSlot > this.stackVars.length && this.stackVars.push("stack" + this.stackSlot), this.topStackName()
                        },
                        topStackName: function() {
                            return "stack" + this.stackSlot
                        },
                        flushInline: function() {
                            var e = this.inlineStack;
                            if (e.length) {
                                this.inlineStack = [];
                                for (var t = 0, n = e.length; t < n; t++) {
                                    var r = e[t];
                                    r instanceof u ? this.compileStack.push(r) : this.pushStack(r)
                                }
                            }
                        },
                        isInline: function() {
                            return this.inlineStack.length
                        },
                        popStack: function(e) {
                            var t = this.isInline(),
                                n = (t ? this.inlineStack : this.compileStack).pop();
                            if (!e && n instanceof u) return n.value;
                            if (!t) {
                                if (!this.stackSlot) throw new o("Invalid stack pop");
                                this.stackSlot--
                            }
                            return n
                        },
                        topStack: function(e) {
                            var t = this.isInline() ? this.inlineStack : this.compileStack,
                                n = t[t.length - 1];
                            return !e && n instanceof u ? n.value : n
                        },
                        quotedString: function(e) {
                            return '"' + e.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") + '"'
                        },
                        setupHelper: function(e, t, n) {
                            var r = [],
                                i = this.setupParams(e, r, n),
                                s = this.nameLookup("helpers", t, "helper");
                            return {
                                params: r,
                                paramsInit: i,
                                name: s,
                                callParams: ["depth0"].concat(r).join(", "),
                                helperMissingParams: n && ["depth0", this.quotedString(t)].concat(r).join(", ")
                            }
                        },
                        setupOptions: function(e, t) {
                            var n = [],
                                r = [],
                                i = [],
                                s, o, u;
                            n.push("hash:" + this.popStack()), this.options.stringParams && (n.push("hashTypes:" + this.popStack()), n.push("hashContexts:" + this.popStack())), o = this.popStack(), u = this.popStack();
                            if (u || o) u || (this.context.aliases.self = "this", u = "self.noop"), o || (this.context.aliases.self = "this", o = "self.noop"), n.push("inverse:" + o), n.push("fn:" + u);
                            for (var a = 0; a < e; a++) s = this.popStack(), t.push(s), this.options.stringParams && (i.push(this.popStack()), r.push(this.popStack()));
                            return this.options.stringParams && (n.push("contexts:[" + r.join(",") + "]"), n.push("types:[" + i.join(",") + "]")), this.options.data && n.push("data:data"), n
                        },
                        setupParams: function(e, t, n) {
                            var r = "{" + this.setupOptions(e, t).join(",") + "}";
                            return n ? (this.useRegister("options"), t.push("options"), "options=" + r) : (t.push(r), "")
                        }
                    };
                    var f = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
                        l = a.RESERVED_WORDS = {};
                    for (var c = 0, h = f.length; c < h; c++) l[f[c]] = !0;
                    return a.isValidJavaScriptVariableName = function(e) {
                        return !a.RESERVED_WORDS[e] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e) ? !0 : !1
                    }, n = a, n
                }(r, n),
                c = function(e, t, n, r, i) {
                    "use strict";
                    var s, o = e,
                        u = t,
                        a = n.parser,
                        f = n.parse,
                        l = r.Compiler,
                        c = r.compile,
                        h = r.precompile,
                        p = i,
                        d = o.create,
                        v = function() {
                            var e = d();
                            return e.compile = function(t, n) {
                                return c(t, n, e)
                            }, e.precompile = function(t, n) {
                                return h(t, n, e)
                            }, e.AST = u, e.Compiler = l, e.JavaScriptCompiler = p, e.Parser = a, e.parse = f, e
                        };
                    return o = v(), o.create = v, s = o, s
                }(s, o, a, f, l);
            return c
        }();
        return e
    }), define("components/common/scripts/util/handlebarsHelpers", ["underscore", "hbs/handlebars"], function(e, t) {
        return {
            e: function(e) {
                return t.Utils.escapeExpression(e)
            },
            s: function(e) {
                return new t.SafeString(e)
            },
            join: function(t, n) {
                return this.s(e.map(t, function(e) {
                    return this.e(e)
                }, this).join(this.e(n)))
            }
        }
    }), define("hbs/underscore", [], function() {
        function T(e, t, n) {
            if (e === t) return e !== 0 || 1 / e == 1 / t;
            if (e == null || t == null) return e === t;
            e._chain && (e = e._wrapped), t._chain && (t = t._wrapped);
            if (e.isEqual && w.isFunction(e.isEqual)) return e.isEqual(t);
            if (t.isEqual && w.isFunction(t.isEqual)) return t.isEqual(e);
            var r = o.call(e);
            if (r != o.call(t)) return !1;
            switch (r) {
                case "[object String]":
                    return e == String(t);
                case "[object Number]":
                    return e != +e ? t != +t : e == 0 ? 1 / e == 1 / t : e == +t;
                case "[object Date]":
                case "[object Boolean]":
                    return +e == +t;
                case "[object RegExp]":
                    return e.source == t.source && e.global == t.global && e.multiline == t.multiline && e.ignoreCase == t.ignoreCase
            }
            if (typeof e != "object" || typeof t != "object") return !1;
            var i = n.length;
            while (i--)
                if (n[i] == e) return !0;
            n.push(e);
            var s = 0,
                u = !0;
            if (r == "[object Array]") {
                s = e.length, u = s == t.length;
                if (u)
                    while (s--)
                        if (!(u = s in e == s in t && T(e[s], t[s], n))) break
            } else {
                if ("constructor" in e != "constructor" in t || e.constructor != t.constructor) return !1;
                for (var a in e)
                    if (w.has(e, a)) {
                        s++;
                        if (!(u = w.has(t, a) && T(e[a], t[a], n))) break
                    }
                if (u) {
                    for (a in t)
                        if (w.has(t, a) && !(s--)) break;
                    u = !s
                }
            }
            return n.pop(), u
        }
        var e = {},
            t = Array.prototype,
            n = Object.prototype,
            r = Function.prototype,
            i = t.slice,
            s = t.unshift,
            o = n.toString,
            u = n.hasOwnProperty,
            a = t.forEach,
            f = t.map,
            l = t.reduce,
            c = t.reduceRight,
            h = t.filter,
            p = t.every,
            d = t.some,
            v = t.indexOf,
            m = t.lastIndexOf,
            g = Array.isArray,
            y = Object.keys,
            b = r.bind,
            w = function(e) {
                return new _(e)
            };
        w.VERSION = "1.3.3";
        var E = w.each = w.forEach = function(t, n, r) {
            if (t == null) return;
            if (a && t.forEach === a) t.forEach(n, r);
            else if (t.length === +t.length) {
                for (var i = 0, s = t.length; i < s; i++)
                    if (i in t && n.call(r, t[i], i, t) === e) return
            } else
                for (var o in t)
                    if (w.has(t, o) && n.call(r, t[o], o, t) === e) return
        };
        w.map = w.collect = function(e, t, n) {
            var r = [];
            return e == null ? r : f && e.map === f ? e.map(t, n) : (E(e, function(e, i, s) {
                r[r.length] = t.call(n, e, i, s)
            }), e.length === +e.length && (r.length = e.length), r)
        }, w.reduce = w.foldl = w.inject = function(e, t, n, r) {
            var i = arguments.length > 2;
            e == null && (e = []);
            if (l && e.reduce === l) return r && (t = w.bind(t, r)), i ? e.reduce(t, n) : e.reduce(t);
            E(e, function(e, s, o) {
                i ? n = t.call(r, n, e, s, o) : (n = e, i = !0)
            });
            if (!i) throw new TypeError("Reduce of empty array with no initial value");
            return n
        }, w.reduceRight = w.foldr = function(e, t, n, r) {
            var i = arguments.length > 2;
            e == null && (e = []);
            if (c && e.reduceRight === c) return r && (t = w.bind(t, r)), i ? e.reduceRight(t, n) : e.reduceRight(t);
            var s = w.toArray(e).reverse();
            return r && !i && (t = w.bind(t, r)), i ? w.reduce(s, t, n, r) : w.reduce(s, t)
        }, w.find = w.detect = function(e, t, n) {
            var r;
            return S(e, function(e, i, s) {
                if (t.call(n, e, i, s)) return r = e, !0
            }), r
        }, w.filter = w.select = function(e, t, n) {
            var r = [];
            return e == null ? r : h && e.filter === h ? e.filter(t, n) : (E(e, function(e, i, s) {
                t.call(n, e, i, s) && (r[r.length] = e)
            }), r)
        }, w.reject = function(e, t, n) {
            var r = [];
            return e == null ? r : (E(e, function(e, i, s) {
                t.call(n, e, i, s) || (r[r.length] = e)
            }), r)
        }, w.every = w.all = function(t, n, r) {
            var i = !0;
            return t == null ? i : p && t.every === p ? t.every(n, r) : (E(t, function(t, s, o) {
                if (!(i = i && n.call(r, t, s, o))) return e
            }), !!i)
        };
        var S = w.some = w.any = function(t, n, r) {
            n || (n = w.identity);
            var i = !1;
            return t == null ? i : d && t.some === d ? t.some(n, r) : (E(t, function(t, s, o) {
                if (i || (i = n.call(r, t, s, o))) return e
            }), !!i)
        };
        w.include = w.contains = function(e, t) {
            var n = !1;
            return e == null ? n : v && e.indexOf === v ? e.indexOf(t) != -1 : (n = S(e, function(e) {
                return e === t
            }), n)
        }, w.invoke = function(e, t) {
            var n = i.call(arguments, 2);
            return w.map(e, function(e) {
                return (w.isFunction(t) ? t || e : e[t]).apply(e, n)
            })
        }, w.pluck = function(e, t) {
            return w.map(e, function(e) {
                return e[t]
            })
        }, w.max = function(e, t, n) {
            if (!t && w.isArray(e) && e[0] === +e[0]) return Math.max.apply(Math, e);
            if (!t && w.isEmpty(e)) return -Infinity;
            var r = {
                computed: -Infinity
            };
            return E(e, function(e, i, s) {
                var o = t ? t.call(n, e, i, s) : e;
                o >= r.computed && (r = {
                    value: e,
                    computed: o
                })
            }), r.value
        }, w.min = function(e, t, n) {
            if (!t && w.isArray(e) && e[0] === +e[0]) return Math.min.apply(Math, e);
            if (!t && w.isEmpty(e)) return Infinity;
            var r = {
                computed: Infinity
            };
            return E(e, function(e, i, s) {
                var o = t ? t.call(n, e, i, s) : e;
                o < r.computed && (r = {
                    value: e,
                    computed: o
                })
            }), r.value
        }, w.shuffle = function(e) {
            var t = [],
                n;
            return E(e, function(e, r, i) {
                n = Math.floor(Math.random() * (r + 1)), t[r] = t[n], t[n] = e
            }), t
        }, w.sortBy = function(e, t, n) {
            var r = w.isFunction(t) ? t : function(e) {
                return e[t]
            };
            return w.pluck(w.map(e, function(e, t, i) {
                return {
                    value: e,
                    criteria: r.call(n, e, t, i)
                }
            }).sort(function(e, t) {
                var n = e.criteria,
                    r = t.criteria;
                return n === void 0 ? 1 : r === void 0 ? -1 : n < r ? -1 : n > r ? 1 : 0
            }), "value")
        }, w.groupBy = function(e, t) {
            var n = {},
                r = w.isFunction(t) ? t : function(e) {
                    return e[t]
                };
            return E(e, function(e, t) {
                var i = r(e, t);
                (n[i] || (n[i] = [])).push(e)
            }), n
        }, w.sortedIndex = function(e, t, n) {
            n || (n = w.identity);
            var r = 0,
                i = e.length;
            while (r < i) {
                var s = r + i >> 1;
                n(e[s]) < n(t) ? r = s + 1 : i = s
            }
            return r
        }, w.toArray = function(e) {
            return e ? w.isArray(e) ? i.call(e) : w.isArguments(e) ? i.call(e) : e.toArray && w.isFunction(e.toArray) ? e.toArray() : w.values(e) : []
        }, w.size = function(e) {
            return w.isArray(e) ? e.length : w.keys(e).length
        }, w.first = w.head = w.take = function(e, t, n) {
            return t != null && !n ? i.call(e, 0, t) : e[0]
        }, w.initial = function(e, t, n) {
            return i.call(e, 0, e.length - (t == null || n ? 1 : t))
        }, w.last = function(e, t, n) {
            return t != null && !n ? i.call(e, Math.max(e.length - t, 0)) : e[e.length - 1]
        }, w.rest = w.tail = function(e, t, n) {
            return i.call(e, t == null || n ? 1 : t)
        }, w.compact = function(e) {
            return w.filter(e, function(e) {
                return !!e
            })
        }, w.flatten = function(e, t) {
            return w.reduce(e, function(e, n) {
                return w.isArray(n) ? e.concat(t ? n : w.flatten(n)) : (e[e.length] = n, e)
            }, [])
        }, w.without = function(e) {
            return w.difference(e, i.call(arguments, 1))
        }, w.uniq = w.unique = function(e, t, n) {
            var r = n ? w.map(e, n) : e,
                i = [];
            return e.length < 3 && (t = !0), w.reduce(r, function(n, r, s) {
                if (t ? w.last(n) !== r || !n.length : !w.include(n, r)) n.push(r), i.push(e[s]);
                return n
            }, []), i
        }, w.union = function() {
            return w.uniq(w.flatten(arguments, !0))
        }, w.intersection = w.intersect = function(e) {
            var t = i.call(arguments, 1);
            return w.filter(w.uniq(e), function(e) {
                return w.every(t, function(t) {
                    return w.indexOf(t, e) >= 0
                })
            })
        }, w.difference = function(e) {
            var t = w.flatten(i.call(arguments, 1), !0);
            return w.filter(e, function(e) {
                return !w.include(t, e)
            })
        }, w.zip = function() {
            var e = i.call(arguments),
                t = w.max(w.pluck(e, "length")),
                n = new Array(t);
            for (var r = 0; r < t; r++) n[r] = w.pluck(e, "" + r);
            return n
        }, w.indexOf = function(e, t, n) {
            if (e == null) return -1;
            var r, i;
            if (n) return r = w.sortedIndex(e, t), e[r] === t ? r : -1;
            if (v && e.indexOf === v) return e.indexOf(t);
            for (r = 0, i = e.length; r < i; r++)
                if (r in e && e[r] === t) return r;
            return -1
        }, w.lastIndexOf = function(e, t) {
            if (e == null) return -1;
            if (m && e.lastIndexOf === m) return e.lastIndexOf(t);
            var n = e.length;
            while (n--)
                if (n in e && e[n] === t) return n;
            return -1
        }, w.range = function(e, t, n) {
            arguments.length <= 1 && (t = e || 0, e = 0), n = arguments[2] || 1;
            var r = Math.max(Math.ceil((t - e) / n), 0),
                i = 0,
                s = new Array(r);
            while (i < r) s[i++] = e, e += n;
            return s
        };
        var x = function() {};
        w.bind = function(t, n) {
            var r, s;
            if (t.bind === b && b) return b.apply(t, i.call(arguments, 1));
            if (!w.isFunction(t)) throw new TypeError;
            return s = i.call(arguments, 2), r = function() {
                if (this instanceof r) {
                    x.prototype = t.prototype;
                    var e = new x,
                        o = t.apply(e, s.concat(i.call(arguments)));
                    return Object(o) === o ? o : e
                }
                return t.apply(n, s.concat(i.call(arguments)))
            }
        }, w.bindAll = function(e) {
            var t = i.call(arguments, 1);
            return t.length == 0 && (t = w.functions(e)), E(t, function(t) {
                e[t] = w.bind(e[t], e)
            }), e
        }, w.memoize = function(e, t) {
            var n = {};
            return t || (t = w.identity),
                function() {
                    var r = t.apply(this, arguments);
                    return w.has(n, r) ? n[r] : n[r] = e.apply(this, arguments)
                }
        }, w.delay = function(e, t) {
            var n = i.call(arguments, 2);
            return setTimeout(function() {
                return e.apply(null, n)
            }, t)
        }, w.defer = function(e) {
            return w.delay.apply(w, [e, 1].concat(i.call(arguments, 1)))
        }, w.throttle = function(e, t) {
            var n, r, i, s, o, u, a = w.debounce(function() {
                o = s = !1
            }, t);
            return function() {
                n = this, r = arguments;
                var f = function() {
                    i = null, o && e.apply(n, r), a()
                };
                return i || (i = setTimeout(f, t)), s ? o = !0 : u = e.apply(n, r), a(), s = !0, u
            }
        }, w.debounce = function(e, t, n) {
            var r;
            return function() {
                var i = this,
                    s = arguments,
                    o = function() {
                        r = null, n || e.apply(i, s)
                    };
                n && !r && e.apply(i, s), clearTimeout(r), r = setTimeout(o, t)
            }
        }, w.once = function(e) {
            var t = !1,
                n;
            return function() {
                return t ? n : (t = !0, n = e.apply(this, arguments))
            }
        }, w.wrap = function(e, t) {
            return function() {
                var n = [e].concat(i.call(arguments, 0));
                return t.apply(this, n)
            }
        }, w.compose = function() {
            var e = arguments;
            return function() {
                var t = arguments;
                for (var n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];
                return t[0]
            }
        }, w.after = function(e, t) {
            return e <= 0 ? t() : function() {
                if (--e < 1) return t.apply(this, arguments)
            }
        }, w.keys = y || function(e) {
            if (e !== Object(e)) throw new TypeError("Invalid object");
            var t = [];
            for (var n in e) w.has(e, n) && (t[t.length] = n);
            return t
        }, w.values = function(e) {
            return w.map(e, w.identity)
        }, w.functions = w.methods = function(e) {
            var t = [];
            for (var n in e) w.isFunction(e[n]) && t.push(n);
            return t.sort()
        }, w.extend = function(e) {
            return E(i.call(arguments, 1), function(t) {
                for (var n in t) e[n] = t[n]
            }), e
        }, w.pick = function(e) {
            var t = {};
            return E(w.flatten(i.call(arguments, 1)), function(n) {
                n in e && (t[n] = e[n])
            }), t
        }, w.defaults = function(e) {
            return E(i.call(arguments, 1), function(t) {
                for (var n in t) e[n] == null && (e[n] = t[n])
            }), e
        }, w.clone = function(e) {
            return w.isObject(e) ? w.isArray(e) ? e.slice() : w.extend({}, e) : e
        }, w.tap = function(e, t) {
            return t(e), e
        }, w.isEqual = function(e, t) {
            return T(e, t, [])
        }, w.isEmpty = function(e) {
            if (e == null) return !0;
            if (w.isArray(e) || w.isString(e)) return e.length === 0;
            for (var t in e)
                if (w.has(e, t)) return !1;
            return !0
        }, w.isElement = function(e) {
            return !!e && e.nodeType == 1
        }, w.isArray = g || function(e) {
            return o.call(e) == "[object Array]"
        }, w.isObject = function(e) {
            return e === Object(e)
        }, w.isArguments = function(e) {
            return o.call(e) == "[object Arguments]"
        }, w.isArguments(arguments) || (w.isArguments = function(e) {
            return !!e && !!w.has(e, "callee")
        }), w.isFunction = function(e) {
            return o.call(e) == "[object Function]"
        }, w.isString = function(e) {
            return o.call(e) == "[object String]"
        }, w.isNumber = function(e) {
            return o.call(e) == "[object Number]"
        }, w.isFinite = function(e) {
            return w.isNumber(e) && isFinite(e)
        }, w.isNaN = function(e) {
            return e !== e
        }, w.isBoolean = function(e) {
            return e === !0 || e === !1 || o.call(e) == "[object Boolean]"
        }, w.isDate = function(e) {
            return o.call(e) == "[object Date]"
        }, w.isRegExp = function(e) {
            return o.call(e) == "[object RegExp]"
        }, w.isNull = function(e) {
            return e === null
        }, w.isUndefined = function(e) {
            return e === void 0
        }, w.has = function(e, t) {
            return u.call(e, t)
        }, w.noConflict = function() {
            return root._ = previousUnderscore, this
        }, w.identity = function(e) {
            return e
        }, w.times = function(e, t, n) {
            for (var r = 0; r < e; r++) t.call(n, r)
        }, w.escape = function(e) {
            return ("" + e).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/\//g, "&#x2F;")
        }, w.result = function(e, t) {
            if (e == null) return null;
            var n = e[t];
            return w.isFunction(n) ? n.call(e) : n
        }, w.mixin = function(e) {
            E(w.functions(e), function(t) {
                P(t, w[t] = e[t])
            })
        };
        var N = 0;
        w.uniqueId = function(e) {
            var t = N++;
            return e ? e + t : t
        }, w.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var C = /.^/,
            k = {
                "\\": "\\",
                "'": "'",
                r: "\r",
                n: "\n",
                t: "	",
                u2028: "\u2028",
                u2029: "\u2029"
            };
        for (var L in k) k[k[L]] = L;
        var A = /\\|'|\r|\n|\t|\u2028|\u2029/g,
            O = /\\(\\|'|r|n|t|u2028|u2029)/g,
            M = function(e) {
                return e.replace(O, function(e, t) {
                    return k[t]
                })
            };
        w.template = function(e, t, n) {
            n = w.defaults(n || {}, w.templateSettings);
            var r = "__p+='" + e.replace(A, function(e) {
                return "\\" + k[e]
            }).replace(n.escape || C, function(e, t) {
                return "'+\n_.escape(" + M(t) + ")+\n'"
            }).replace(n.interpolate || C, function(e, t) {
                return "'+\n(" + M(t) + ")+\n'"
            }).replace(n.evaluate || C, function(e, t) {
                return "';\n" + M(t) + "\n;__p+='"
            }) + "';\n";
            n.variable || (r = "with(obj||{}){\n" + r + "}\n"), r = "var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n" + r + "return __p;\n";
            var i = new Function(n.variable || "obj", "_", r);
            if (t) return i(t, w);
            var s = function(e) {
                return i.call(this, e, w)
            };
            return s.source = "function(" + (n.variable || "obj") + "){\n" + r + "}", s
        }, w.chain = function(e) {
            return w(e).chain()
        };
        var _ = function(e) {
            this._wrapped = e
        };
        w.prototype = _.prototype;
        var D = function(e, t) {
                return t ? w(e).chain() : e
            },
            P = function(e, t) {
                _.prototype[e] = function() {
                    var e = i.call(arguments);
                    return s.call(e, this._wrapped), D(t.apply(w, e), this._chain)
                }
            };
        return w.mixin(w), E(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(e) {
            var n = t[e];
            _.prototype[e] = function() {
                var t = this._wrapped;
                n.apply(t, arguments);
                var r = t.length;
                return (e == "shift" || e == "splice") && r === 0 && delete t[0], D(t, this._chain)
            }
        }), E(["concat", "join", "slice"], function(e) {
            var n = t[e];
            _.prototype[e] = function() {
                return D(n.apply(this._wrapped, arguments), this._chain)
            }
        }), _.prototype.chain = function() {
            return this._chain = !0, this
        }, _.prototype.value = function() {
            return this._wrapped
        }, w
    }), define("hbs/i18nprecompile", ["hbs/handlebars", "hbs/underscore"], function(e, t) {
        function n(r, i, s) {
            return s = s || {}, i = i || {}, r && r.type === "program" && r.statements && (t(r.statements).forEach(function(t, o) {
                var u = "<!-- i18n error -->";
                if (t.type === "mustache" && t.id && t.id.original === "$") {
                    if (t.params.length && t.params[0].string) {
                        var a = t.params[0].string;
                        u = i[a] || (s.originalKeyFallback ? a : u)
                    }
                    r.statements[o] = new e.AST.ContentNode(u)
                } else t.program && (t.program = n(t.program, i, s))
            }), r.inverse && n(r.inverse, i, s)), r
        }
        return function(t, r, i) {
            i = i || {};
            var s, o;
            return s = e.parse(t), r !== !1 && (s = n(s, r, i)), o = (new e.Compiler).compile(s, i), (new e.JavaScriptCompiler).compile(o, i)
        }
    }),
    function(window) {
        var JSON = window.JSON || {};
        (function() {
            "use strict";

            function f(e) {
                return e < 10 ? "0" + e : e
            }

            function quote(e) {
                return escapable.lastIndex = 0, escapable.test(e) ? '"' + e.replace(escapable, function(e) {
                    var t = meta[e];
                    return typeof t == "string" ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
                }) + '"' : '"' + e + '"'
            }

            function str(e, t) {
                var n, r, i, s, o = gap,
                    u, a = t[e];
                a && typeof a == "object" && typeof a.toJSON == "function" && (a = a.toJSON(e)), typeof rep == "function" && (a = rep.call(t, e, a));
                switch (typeof a) {
                    case "string":
                        return quote(a);
                    case "number":
                        return isFinite(a) ? String(a) : "null";
                    case "boolean":
                    case "null":
                        return String(a);
                    case "object":
                        if (!a) return "null";
                        gap += indent, u = [];
                        if (Object.prototype.toString.apply(a) === "[object Array]") {
                            s = a.length;
                            for (n = 0; n < s; n += 1) u[n] = str(n, a) || "null";
                            return i = u.length === 0 ? "[]" : gap ? "[\n" + gap + u.join(",\n" + gap) + "\n" + o + "]" : "[" + u.join(",") + "]", gap = o, i
                        }
                        if (rep && typeof rep == "object") {
                            s = rep.length;
                            for (n = 0; n < s; n += 1) typeof rep[n] == "string" && (r = rep[n], i = str(r, a), i && u.push(quote(r) + (gap ? ": " : ":") + i))
                        } else
                            for (r in a) Object.prototype.hasOwnProperty.call(a, r) && (i = str(r, a), i && u.push(quote(r) + (gap ? ": " : ":") + i));
                        return i = u.length === 0 ? "{}" : gap ? "{\n" + gap + u.join(",\n" + gap) + "\n" + o + "}" : "{" + u.join(",") + "}", gap = o, i
                }
            }
            typeof Date.prototype.toJSON != "function" && (Date.prototype.toJSON = function(e) {
                return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
            }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(e) {
                return this.valueOf()
            });
            var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
                gap, indent, meta = {
                    "\b": "\\b",
                    "	": "\\t",
                    "\n": "\\n",
                    "\f": "\\f",
                    "\r": "\\r",
                    '"': '\\"',
                    "\\": "\\\\"
                },
                rep;
            typeof JSON.stringify != "function" && (JSON.stringify = function(e, t, n) {
                var r;
                gap = "", indent = "";
                if (typeof n == "number")
                    for (r = 0; r < n; r += 1) indent += " ";
                else typeof n == "string" && (indent = n);
                rep = t;
                if (!t || typeof t == "function" || typeof t == "object" && typeof t.length == "number") return str("", {
                    "": e
                });
                throw new Error("JSON.stringify")
            }), typeof JSON.parse != "function" && (JSON.parse = function(text, reviver) {
                function walk(e, t) {
                    var n, r, i = e[t];
                    if (i && typeof i == "object")
                        for (n in i) Object.prototype.hasOwnProperty.call(i, n) && (r = walk(i, n), r !== undefined ? i[n] = r : delete i[n]);
                    return reviver.call(e, t, i)
                }
                var j;
                text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(e) {
                    return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4)
                }));
                if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), typeof reviver == "function" ? walk({
                    "": j
                }, "") : j;
                throw new SyntaxError("JSON.parse")
            })
        })(), define("hbs/json2", [], function() {
            return JSON
        })
    }.call(this, this), define("hbs", ["hbs/handlebars", "hbs/underscore", "hbs/i18nprecompile", "hbs/json2"], function(e, t, n, r) {
        var i, s, o = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
            u = function() {
                throw new Error("Environment unsupported.")
            },
            a = [],
            f = "w+",
            l = "hbs",
            c = "@hbs",
            h = "/styles/",
            p = "/demo-build/styles/",
            d = "templates/helpers/",
            v = "templates/i18n/",
            m = "screen.build.css",
            g = "onHbsRead";
        e.registerHelper("$", function() {}), typeof window != "undefined" && window.navigator && window.document && !window.navigator.userAgent.match(/Node.js/) ? (s = function() {
            var e, t, n;
            if (typeof XMLHttpRequest != "undefined") return arguments[0] === !0 ? new XDomainRequest : new XMLHttpRequest;
            for (t = 0; t < 3; t++) {
                n = o[t];
                try {
                    e = new ActiveXObject(n)
                } catch (r) {}
                if (e) {
                    o = [n];
                    break
                }
            }
            if (!e) throw new Error("getXhr(): XMLHttpRequest not available");
            return e
        }, getIEVersion = function() {
            var e = -1;
            if (navigator.appName == "Microsoft Internet Explorer") {
                var t = navigator.userAgent,
                    n = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
                n.exec(t) != null && (e = parseFloat(RegExp.$1))
            }
            return e
        }, u = function(e, t) {
            var n = !1;
            if (e.indexOf("http") != 0) n = !1;
            else {
                var r = e.substr(0, 5) === "https" ? 8 : 7,
                    i = window.location.href.substr(0, 5) === "https" ? 8 : 7,
                    o = e.substr(r).split("/").shift(),
                    u = getIEVersion();
                n = o != window.location.href.substr(i).split("/").shift() && u >= 7
            }
            if (n) {
                var a = s(!0);
                a.open("GET", e), a.onload = function() {
                    t(a.responseText, e)
                }, a.onprogress = function() {}, a.ontimeout = function() {}, a.onerror = function() {}, setTimeout(function() {
                    a.send()
                }, 0)
            } else {
                var f = s();
                f.open("GET", e, !0), f.onreadystatechange = function(n) {
                    f.readyState === 4 && t(f.responseText, e)
                }, f.send(null)
            }
        }) : typeof process != "undefined" && process.versions && !!process.versions.node ? (i = require.nodeRequire("fs"), u = function(e, t) {
            var n = i.readFileSync(e, "utf8") || "";
            n = n.replace(/^\uFEFF/, ""), t(n, e)
        }) : typeof java != "undefined" && typeof java.io != "undefined" && (u = function(e, t) {
            var n = new java.io.FileInputStream(e),
                r = new java.io.InputStreamReader(n, "UTF-8"),
                i = new java.io.BufferedReader(r),
                s, o = "";
            while ((s = i.readLine()) !== null) o += new String(s) + "\n";
            i.close(), t(o, e)
        });
        var y = {},
            b = function(e, t) {
                y[e] ? t(y[e]) : u(e, function(e, n) {
                    y[n] = e, t.call(this, e)
                })
            },
            w = [],
            E = {};
        return {
            get: function() {
                return e
            },
            write: function(e, t, n) {
                if (t + c in a) {
                    var r = a[t + c];
                    n.asModule(e + "!" + t, r)
                }
            },
            version: "0.5.0",
            load: function(s, o, y, S) {
                function L(e, n) {
                    return t(e).forEach(function(e) {
                        e && e.type && e.type === "partial" && n.push(e.partialName.name), e && e.program && e.program.statements && L(e.program.statements, n), e && e.program && e.program.inverse && e.program.inverse.statements && L(e.program.inverse.statements, n)
                    }), n
                }

                function A(e) {
                    var n = [];
                    return e && e.statements && (n = L(e.statements, [])), t(n).unique()
                }

                function O(e) {
                    var t, n, i;
                    if (e && e.statements) {
                        t = e.statements[0];
                        if (t && t.type === "comment") try {
                            return n = t.comment.replace(new RegExp("^[\\s]+|[\\s]+$", "g"), ""), i = r.parse(n), n
                        } catch (s) {
                            return r.stringify({
                                description: n
                            })
                        }
                    }
                    return "{}"
                }

                function M(e) {
                    if (!e) return [];
                    var t = [e[0]],
                        n = e[0],
                        r;
                    for (r = 1; r < e.length; ++r) e.hasOwnProperty(r) && (n += "." + e[r], t.push(n));
                    return t
                }

                function D(n, r, i, s) {
                    i = i ? i + "." : "";
                    var o = "",
                        u = !1;
                    return t(n).forEach(function(n) {
                        var u, a, f;
                        if (n && n.type && n.type === "mustache") {
                            if (!n.params || !n.params.length) {
                                u = M(n.id.parts);
                                for (a in u) u[a] && (o = u[a] || o, r.push(i + u[a]));
                                r.push(i + n.id.string)
                            }
                            var l = ["this", ".", "..", "./..", "../..", "../../.."];
                            n.params && typeof e.helpers[n.id.string] == "undefined" && t(n.params).forEach(function(a) {
                                (t(l).contains(a.original) || a instanceof e.AST.StringNode || a instanceof e.AST.IntegerNode || a instanceof e.AST.BooleanNode) && s.push(n.id.string), u = M(a.parts);
                                for (var f in u) u[f] && (o = u[f] || o, s.push(n.id.string), r.push(i + u[f]))
                            })
                        }
                        n && n.mustache && D([n.mustache], r, i + o, s), n && n.program && n.program.statements && (f = D([n.mustache], [], "", s)[0] || "", n.program.inverse && n.program.inverse.statements && D(n.program.inverse.statements, r, i + o + (f ? i + o ? "." + f : f : ""), s), D(n.program.statements, r, i + o + (f ? i + o ? "." + f : f : ""), s))
                    }), r
                }

                function P(e) {
                    var n = [],
                        r = [];
                    e && e.statements && (n = D(e.statements, [], undefined, r));
                    var i = ["helperMissing", "blockHelperMissing", "each", "if", "unless", "with"];
                    return {
                        vars: t(n).chain().unique().map(function(e) {
                            return e === "" ? "." : e.length && e[e.length - 1] === "." ? e.substr(0, e.length - 1) + "[]" : e
                        }).value(),
                        helpers: t(r).chain().unique().map(function(e) {
                            return t(i).contains(e) ? undefined : e
                        }).compact().value()
                    }
                }

                function H(e) {
                    var t = e.split("/");
                    for (var n = 0; n < t.length; n++) t[n] == ".." && (delete t[n - 1], delete t[n]);
                    return t.join("/").replace(/\/\/+/g, "/")
                }

                function B(l) {
                    u(j, function(u, c) {
                        var v = S.isBuild && S[g] ? S[g] : function(e, t, n) {
                                return n
                            },
                            b = e.parse(v(s, c, u)),
                            k = A(b),
                            L = O(b),
                            M = P(b),
                            D = M.vars,
                            B = M.helpers || [],
                            j = "",
                            F = "",
                            I = "",
                            q = [],
                            R, U, z, W, X, V = s.substr(0, s.lastIndexOf("/") + 1);
                        require.config.hbs = require.config.hbs || {}, require.config.hbs._partials = require.config.hbs._partials || {};
                        if (L !== "{}") try {
                            z = r.parse(L)
                        } catch ($) {
                            console.log("couldn't parse meta for %s", c)
                        }
                        for (var J in k)
                            if (k.hasOwnProperty(J) && typeof k[J] == "string") {
                                var K = k[J],
                                    c;
                                K.match(/^(\.|\/)+/) ? c = H(V + K) : c = H(C + K), require.config.hbs._partials[c] = require.config.hbs._partials[c] || [], require.config.hbs._partials[c].references = require.config.hbs._partials[c].references || [], require.config.hbs._partials[c].references.push(K), require.config.hbs._loadedDeps = require.config.hbs._loadedDeps || {}, q[J] = "hbs!" + c
                            }
                        R = q.join("', '"), B = B.concat(z && z.helpers ? z.helpers : []), U = N ? "" : function() {
                            var e, t = [],
                                n = S.hbs && S.hbs.helperPathCallback ? S.hbs.helperPathCallback : function(e) {
                                    return (S.hbs && S.hbs.helperDirectory ? S.hbs.helperDirectory : d) + e
                                };
                            for (e = 0; e < B.length; e++) t[e] = "'" + n(B[e], c) + "'";
                            return t
                        }().join(","), U && (U = "," + U);
                        if (z) try {
                            z.styles && (w = t.union(w, z.styles), require.isBrowser && !S.isBuild ? (W = document.head || document.getElementsByTagName("head")[0], t(z.styles).forEach(function(e) {
                                E[e] || (X = document.createElement("link"), X.href = S.baseUrl + h + e + ".css", X.media = "all", X.rel = "stylesheet", X.type = "text/css", W.appendChild(X), E[e] = X)
                            })) : S.isBuild && function() {
                                var e = require.nodeRequire("fs"),
                                    n = t(z.styles).map(function(e) {
                                        return E[e] ? "" : (E[e] = !0, "@import url(" + e + ".css);\n")
                                    }).join("\n");
                                e.open(__dirname + p + m, f, "0666", function(t, r) {
                                    e.writeSync(r, n, null, encoding = "utf8"), e.close(r)
                                }), f = "a"
                            }())
                        } catch ($) {
                            console.log("error injecting styles")
                        }!S.isBuild && !S.serverRender && (j = "<!-- START - " + s + " -->", F = "<!-- END - " + s + " -->", I = "t.meta = " + L + ";\n" + "t.helpers = " + r.stringify(B) + ";\n" + "t.deps = " + r.stringify(q) + ";\n" + "t.vars = " + r.stringify(D) + ";\n");
                        var Q = T ? !1 : t.extend(l, S.localeMapping),
                            G = S.hbs || {},
                            Y = t.extend(G.compileOptions || {}, {
                                originalKeyFallback: G.originalKeyFallback
                            }),
                            Z = n(u, Q, Y),
                            et = S.isBuild ? "" : "'" + s + "',";
                        R && (R = ", '" + R + "'");
                        var tt = [];
                        require.config.hbs._partials[s] && (tt = require.config.hbs._partials[s].references), u = "/* START_TEMPLATE */\ndefine(" + et + "['hbs','hbs/handlebars'" + R + U + "], function( hbs, Handlebars ){ \n" + "var t = Handlebars.template(" + Z + ");\n" + "Handlebars.registerPartial('" + s + "', t);\n";
                        for (var J = 0; J < tt.length; J++) u += "Handlebars.registerPartial('" + tt[J] + "', t);\n";
                        u += I + "return t;\n" + "});\n" + "/* END_TEMPLATE */\n", S.isBuild && (a[x] = u), S.isBuild || (u += "\r\n//@ sourceURL=" + c), S.isBuild ? (y.fromText(s, u), o([s], function(e) {
                            y(e)
                        })) : require(q, function() {
                            y.fromText(u), o([s], function(e) {
                                y(e)
                            })
                        }), S.removeCombined && c && i.unlinkSync(c)
                    })
                }
                var x = s + c;
                S.hbs = S.hbs || {};
                var T = S.hbs.i18n != 1,
                    N = S.hbs.helpers == 0,
                    C = "";
                S.hbs.partialsUrl && (C = S.hbs.partialsUrl, C.match(/\/$/) || (C += "/"));
                var k = [],
                    j, F = S.hbs && S.hbs.templateExtension === !1;
                F ? j = o.toUrl(s) : j = o.toUrl(s + "." + (S.hbs && S.hbs.templateExtension ? S.hbs.templateExtension : l));
                if (T) B(!1);
                else {
                    var I = (S.hbs && S.hbs.i18nDirectory ? S.hbs.i18nDirectory : v) + (S.locale || "en_us") + ".json";
                    try {
                        b(o.toUrl(I), function(e) {
                            B(r.parse(e))
                        })
                    } catch (q) {
                        if (!!S.hbs) throw q;
                        console.warn("hbs: Error reading " + I + ", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"), S.hbs = {
                            i18n: !1,
                            helpers: !0
                        }, B(!1)
                    }
                }
            }
        }
    }), define("hbs!components/common/scripts/templates/blockSpinner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var n = "";
                return n += '\n        <svg class="svg-circle-spinner" viewBox="0 0 70 70">\n            <circle cx="35" cy="35" r="20" stroke-width="2.5" class="loading-spinner"></circle>\n        </svg>\n    ', n
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = this,
                f = "function",
                l = this.escapeExpression;
            s += '<div class="spinner-bg">\n    ', o = n.unless.call(t, t && t.hideSpinner, {
                hash: {},
                inverse: a.noop,
                fn: a.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    <div class="', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '"></div>\n    <div class="speedometer-for-ie"></div>\n</div>', s
        });
        return t.registerPartial("components/common/scripts/templates/blockSpinner", n), n
    }),
    function(e, t) {
        function o(e) {
            return !!(e === "" || e && e.charCodeAt && e.substr)
        }

        function u(e) {
            return i ? i(e) : s.call(e) === "[object Array]"
        }

        function a(e) {
            return e && s.call(e) === "[object Object]"
        }

        function f(e, t) {
            var n;
            e = e || {}, t = t || {};
            for (n in t) t.hasOwnProperty(n) && e[n] == null && (e[n] = t[n]);
            return e
        }

        function l(e, t, n) {
            var i = [],
                s, o;
            if (!e) return i;
            if (r && e.map === r) return e.map(t, n);
            for (s = 0, o = e.length; s < o; s++) i[s] = t.call(n, e[s], s, e);
            return i
        }

        function c(e, t) {
            return e = Math.round(Math.abs(e)), isNaN(e) ? t : e
        }

        function h(e) {
            var t = n.settings.currency.format;
            return typeof e == "function" && (e = e()), o(e) && e.match("%v") ? {
                pos: e,
                neg: e.replace("-", "").replace("%v", "-%v"),
                zero: e
            } : !e || !e.pos || !e.pos.match("%v") ? o(t) ? n.settings.currency.format = {
                pos: t,
                neg: t.replace("%v", "-%v"),
                zero: t
            } : t : e
        }
        var n = {};
        n.version = "0.3.2", n.settings = {
            currency: {
                symbol: "$",
                format: "%s%v",
                decimal: ".",
                thousand: ",",
                precision: 2,
                grouping: 3
            },
            number: {
                precision: 0,
                grouping: 3,
                thousand: ",",
                decimal: "."
            }
        };
        var r = Array.prototype.map,
            i = Array.isArray,
            s = Object.prototype.toString,
            p = n.unformat = n.parse = function(e, t) {
                if (u(e)) return l(e, function(e) {
                    return p(e, t)
                });
                e = e || 0;
                if (typeof e == "number") return e;
                t = t || n.settings.number.decimal;
                var r = new RegExp("[^0-9-" + t + "]", ["g"]),
                    i = parseFloat(("" + e).replace(/\((.*)\)/, "-$1").replace(r, "").replace(t, "."));
                return isNaN(i) ? 0 : i
            },
            d = n.toFixed = function(e, t) {
                t = c(t, n.settings.number.precision);
                var r = Math.pow(10, t);
                return (Math.round(n.unformat(e) * r) / r).toFixed(t)
            },
            v = n.formatNumber = function(e, t, r, i) {
                if (u(e)) return l(e, function(e) {
                    return v(e, t, r, i)
                });
                e = p(e);
                var s = f(a(t) ? t : {
                        precision: t,
                        thousand: r,
                        decimal: i
                    }, n.settings.number),
                    o = c(s.precision),
                    h = e < 0 ? "-" : "",
                    m = parseInt(d(Math.abs(e || 0), o), 10) + "",
                    g = m.length > 3 ? m.length % 3 : 0;
                return h + (g ? m.substr(0, g) + s.thousand : "") + m.substr(g).replace(/(\d{3})(?=\d)/g, "$1" + s.thousand) + (o ? s.decimal + d(Math.abs(e), o).split(".")[1] : "")
            },
            m = n.formatMoney = function(e, t, r, i, s, o) {
                if (u(e)) return l(e, function(e) {
                    return m(e, t, r, i, s, o)
                });
                e = p(e);
                var d = f(a(t) ? t : {
                        symbol: t,
                        precision: r,
                        thousand: i,
                        decimal: s,
                        format: o
                    }, n.settings.currency),
                    g = h(d.format),
                    y = e > 0 ? g.pos : e < 0 ? g.neg : g.zero;
                return y.replace("%s", d.symbol).replace("%v", v(Math.abs(e), c(d.precision), d.thousand, d.decimal))
            };
        n.formatColumn = function(e, t, r, i, s, d) {
            if (!e) return [];
            var m = f(a(t) ? t : {
                    symbol: t,
                    precision: r,
                    thousand: i,
                    decimal: s,
                    format: d
                }, n.settings.currency),
                g = h(m.format),
                y = g.pos.indexOf("%s") < g.pos.indexOf("%v") ? !0 : !1,
                b = 0,
                w = l(e, function(e, t) {
                    if (u(e)) return n.formatColumn(e, m);
                    e = p(e);
                    var r = e > 0 ? g.pos : e < 0 ? g.neg : g.zero,
                        i = r.replace("%s", m.symbol).replace("%v", v(Math.abs(e), c(m.precision), m.thousand, m.decimal));
                    return i.length > b && (b = i.length), i
                });
            return l(w, function(e, t) {
                return o(e) && e.length < b ? y ? e.replace(m.symbol, m.symbol + (new Array(b - e.length + 1)).join(" ")) : (new Array(b - e.length + 1)).join(" ") + e : e
            })
        }, typeof exports != "undefined" ? (typeof module != "undefined" && module.exports && (exports = module.exports = n), exports.accounting = n) : typeof define == "function" && define.amd ? define("accounting", [], function() {
            return n
        }) : (n.noConflict = function(r) {
            return function() {
                return e.accounting = r, n.noConflict = t, n
            }
        }(e.accounting), e.accounting = n)
    }(this), Date.CultureInfo = {
        name: "en-US",
        englishName: "English (United States)",
        nativeName: "English (United States)",
        dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        abbreviatedDayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        shortestDayNames: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
        firstLetterDayNames: ["S", "M", "T", "W", "T", "F", "S"],
        monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        abbreviatedMonthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        amDesignator: "AM",
        pmDesignator: "PM",
        firstDayOfWeek: 0,
        twoDigitYearMax: 2029,
        dateElementOrder: "mdy",
        formatPatterns: {
            shortDate: "M/d/yyyy",
            longDate: "dddd, MMMM dd, yyyy",
            shortTime: "h:mm tt",
            longTime: "h:mm:ss tt",
            fullDateTime: "dddd, MMMM dd, yyyy h:mm:ss tt",
            sortableDateTime: "yyyy-MM-ddTHH:mm:ss",
            universalSortableDateTime: "yyyy-MM-dd HH:mm:ssZ",
            rfc1123: "ddd, dd MMM yyyy HH:mm:ss GMT",
            monthDay: "MMMM dd",
            yearMonth: "MMMM, yyyy"
        },
        regexPatterns: {
            jan: /^jan(uary)?/i,
            feb: /^feb(ruary)?/i,
            mar: /^mar(ch)?/i,
            apr: /^apr(il)?/i,
            may: /^may/i,
            jun: /^jun(e)?/i,
            jul: /^jul(y)?/i,
            aug: /^aug(ust)?/i,
            sep: /^sep(t(ember)?)?/i,
            oct: /^oct(ober)?/i,
            nov: /^nov(ember)?/i,
            dec: /^dec(ember)?/i,
            sun: /^su(n(day)?)?/i,
            mon: /^mo(n(day)?)?/i,
            tue: /^tu(e(s(day)?)?)?/i,
            wed: /^we(d(nesday)?)?/i,
            thu: /^th(u(r(s(day)?)?)?)?/i,
            fri: /^fr(i(day)?)?/i,
            sat: /^sa(t(urday)?)?/i,
            future: /^next/i,
            past: /^last|past|prev(ious)?/i,
            add: /^(\+|after|from)/i,
            subtract: /^(\-|before|ago)/i,
            yesterday: /^yesterday/i,
            today: /^t(oday)?/i,
            tomorrow: /^tomorrow/i,
            now: /^n(ow)?/i,
            millisecond: /^ms|milli(second)?s?/i,
            second: /^sec(ond)?s?/i,
            minute: /^min(ute)?s?/i,
            hour: /^h(ou)?rs?/i,
            week: /^w(ee)?k/i,
            month: /^m(o(nth)?s?)?/i,
            day: /^d(ays?)?/i,
            year: /^y((ea)?rs?)?/i,
            shortMeridian: /^(a|p)/i,
            longMeridian: /^(a\.?m?\.?|p\.?m?\.?)/i,
            timezone: /^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,
            ordinalSuffix: /^\s*(st|nd|rd|th)/i,
            timeContext: /^\s*(\:|a|p)/i
        },
        abbreviatedTimeZoneStandard: {
            GMT: "-000",
            EST: "-0400",
            CST: "-0500",
            MST: "-0600",
            PST: "-0700"
        },
        abbreviatedTimeZoneDST: {
            GMT: "-000",
            EDT: "-0500",
            CDT: "-0600",
            MDT: "-0700",
            PDT: "-0800"
        }
    }, Date.getMonthNumberFromName = function(e) {
        var t = Date.CultureInfo.monthNames,
            n = Date.CultureInfo.abbreviatedMonthNames,
            r = e.toLowerCase();
        for (var i = 0; i < t.length; i++)
            if (t[i].toLowerCase() == r || n[i].toLowerCase() == r) return i;
        return -1
    }, Date.getDayNumberFromName = function(e) {
        var t = Date.CultureInfo.dayNames,
            n = Date.CultureInfo.abbreviatedDayNames,
            r = Date.CultureInfo.shortestDayNames,
            i = e.toLowerCase();
        for (var s = 0; s < t.length; s++)
            if (t[s].toLowerCase() == i || n[s].toLowerCase() == i) return s;
        return -1
    }, Date.isLeapYear = function(e) {
        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
    }, Date.getDaysInMonth = function(e, t) {
        return [31, Date.isLeapYear(e) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][t]
    }, Date.getTimezoneOffset = function(e, t) {
        return t || !1 ? Date.CultureInfo.abbreviatedTimeZoneDST[e.toUpperCase()] : Date.CultureInfo.abbreviatedTimeZoneStandard[e.toUpperCase()]
    }, Date.getTimezoneAbbreviation = function(e, t) {
        var n = t || !1 ? Date.CultureInfo.abbreviatedTimeZoneDST : Date.CultureInfo.abbreviatedTimeZoneStandard,
            r;
        for (r in n)
            if (n[r] === e) return r;
        return null
    }, Date.prototype.clone = function() {
        return new Date(this.getTime())
    }, Date.prototype.compareTo = function(e) {
        if (isNaN(this)) throw new Error(this);
        if (e instanceof Date && !isNaN(e)) return this > e ? 1 : this < e ? -1 : 0;
        throw new TypeError(e)
    }, Date.prototype.equals = function(e) {
        return this.compareTo(e) === 0
    }, Date.prototype.between = function(e, t) {
        var n = this.getTime();
        return n >= e.getTime() && n <= t.getTime()
    }, Date.prototype.addMilliseconds = function(e) {
        return this.setMilliseconds(this.getMilliseconds() + e), this
    }, Date.prototype.addSeconds = function(e) {
        return this.addMilliseconds(e * 1e3)
    }, Date.prototype.addMinutes = function(e) {
        return this.addMilliseconds(e * 6e4)
    }, Date.prototype.addHours = function(e) {
        return this.addMilliseconds(e * 36e5)
    }, Date.prototype.addDays = function(e) {
        return this.addMilliseconds(e * 864e5)
    }, Date.prototype.addWeeks = function(e) {
        return this.addMilliseconds(e * 6048e5)
    }, Date.prototype.addMonths = function(e) {
        var t = this.getDate();
        return this.setDate(1), this.setMonth(this.getMonth() + e), this.setDate(Math.min(t, this.getDaysInMonth())), this
    }, Date.prototype.addYears = function(e) {
        return this.addMonths(e * 12)
    }, Date.prototype.add = function(e) {
        if (typeof e == "number") return this._orient = e, this;
        var t = e;
        return (t.millisecond || t.milliseconds) && this.addMilliseconds(t.millisecond || t.milliseconds), (t.second || t.seconds) && this.addSeconds(t.second || t.seconds), (t.minute || t.minutes) && this.addMinutes(t.minute || t.minutes), (t.hour || t.hours) && this.addHours(t.hour || t.hours), (t.month || t.months) && this.addMonths(t.month || t.months), (t.year || t.years) && this.addYears(t.year || t.years), (t.day || t.days) && this.addDays(t.day || t.days), this
    }, Date._validate = function(e, t, n, r) {
        if (typeof e != "number") throw new TypeError(e + " is not a Number.");
        if (e < t || e > n) throw new RangeError(e + " is not a valid value for " + r + ".");
        return !0
    }, Date.validateMillisecond = function(e) {
        return Date._validate(e, 0, 999, "milliseconds")
    }, Date.validateSecond = function(e) {
        return Date._validate(e, 0, 59, "seconds")
    }, Date.validateMinute = function(e) {
        return Date._validate(e, 0, 59, "minutes")
    }, Date.validateHour = function(e) {
        return Date._validate(e, 0, 23, "hours")
    }, Date.validateDay = function(e, t, n) {
        return Date._validate(e, 1, Date.getDaysInMonth(t, n), "days")
    }, Date.validateMonth = function(e) {
        return Date._validate(e, 0, 11, "months")
    }, Date.validateYear = function(e) {
        return Date._validate(e, 1, 9999, "seconds")
    }, Date.prototype.set = function(e) {
        var t = e;
        return !t.millisecond && t.millisecond !== 0 && (t.millisecond = -1), !t.second && t.second !== 0 && (t.second = -1), !t.minute && t.minute !== 0 && (t.minute = -1), !t.hour && t.hour !== 0 && (t.hour = -1), !t.day && t.day !== 0 && (t.day = -1), !t.month && t.month !== 0 && (t.month = -1), !t.year && t.year !== 0 && (t.year = -1), t.millisecond != -1 && Date.validateMillisecond(t.millisecond) && this.addMilliseconds(t.millisecond - this.getMilliseconds()), t.second != -1 && Date.validateSecond(t.second) && this.addSeconds(t.second - this.getSeconds()), t.minute != -1 && Date.validateMinute(t.minute) && this.addMinutes(t.minute - this.getMinutes()), t.hour != -1 && Date.validateHour(t.hour) && this.addHours(t.hour - this.getHours()), t.month !== -1 && Date.validateMonth(t.month) && this.addMonths(t.month - this.getMonth()), t.year != -1 && Date.validateYear(t.year) && this.addYears(t.year - this.getFullYear()), t.day != -1 && Date.validateDay(t.day, this.getFullYear(), this.getMonth()) && this.addDays(t.day - this.getDate()), t.timezone && this.setTimezone(t.timezone), t.timezoneOffset && this.setTimezoneOffset(t.timezoneOffset), this
    }, Date.prototype.clearTime = function() {
        return this.setHours(0), this.setMinutes(0), this.setSeconds(0), this.setMilliseconds(0), this
    }, Date.prototype.isLeapYear = function() {
        var e = this.getFullYear();
        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
    }, Date.prototype.isWeekday = function() {
        return !this.is().sat() && !this.is().sun()
    }, Date.prototype.getDaysInMonth = function() {
        return Date.getDaysInMonth(this.getFullYear(), this.getMonth())
    }, Date.prototype.moveToFirstDayOfMonth = function() {
        return this.set({
            day: 1
        })
    }, Date.prototype.moveToLastDayOfMonth = function() {
        return this.set({
            day: this.getDaysInMonth()
        })
    }, Date.prototype.moveToDayOfWeek = function(e, t) {
        var n = (e - this.getDay() + 7 * (t || 1)) % 7;
        return this.addDays(n === 0 ? n += 7 * (t || 1) : n)
    }, Date.prototype.moveToMonth = function(e, t) {
        var n = (e - this.getMonth() + 12 * (t || 1)) % 12;
        return this.addMonths(n === 0 ? n += 12 * (t || 1) : n)
    }, Date.prototype.getDayOfYear = function() {
        return Math.floor((this - new Date(this.getFullYear(), 0, 1)) / 864e5)
    }, Date.prototype.getWeekOfYear = function(e) {
        var t = this.getFullYear(),
            n = this.getMonth(),
            r = this.getDate(),
            i = e || Date.CultureInfo.firstDayOfWeek,
            s = 8 - (new Date(t, 0, 1)).getDay();
        s == 8 && (s = 1);
        var o = (Date.UTC(t, n, r, 0, 0, 0) - Date.UTC(t, 0, 1, 0, 0, 0)) / 864e5 + 1,
            u = Math.floor((o - s + 7) / 7);
        if (u === i) {
            t--;
            var a = 8 - (new Date(t, 0, 1)).getDay();
            a == 2 || a == 8 ? u = 53 : u = 52
        }
        return u
    }, Date.prototype.isDST = function() {
        var e = this.toString();
        try {
            var t = e.match(/(E|C|M|P)(S|D)T/);
            return !!(t && t[2] == "D" || e.match(/daylight/i))
        } catch (n) {
            return !1
        }
    }, Date.prototype.getTimezone = function() {
        return Date.getTimezoneAbbreviation(this.getUTCOffset, this.isDST())
    }, Date.prototype.setTimezoneOffset = function(e) {
        var t = this.getTimezoneOffset(),
            n = Number(e) * -6 / 10;
        return this.addMinutes(n - t), this
    }, Date.prototype.setTimezone = function(e) {
        return this.setTimezoneOffset(Date.getTimezoneOffset(e))
    }, Date.prototype.getUTCOffset = function() {
        var e = this.getTimezoneOffset() * -10 / 6,
            t;
        return e < 0 ? (t = (e - 1e4).toString(), t[0] + t.substr(2)) : (t = (e + 1e4).toString(), "+" + t.substr(1))
    }, Date.prototype.getDayName = function(e) {
        return e ? Date.CultureInfo.abbreviatedDayNames[this.getDay()] : Date.CultureInfo.dayNames[this.getDay()]
    }, Date.prototype.getMonthName = function(e) {
        return e ? Date.CultureInfo.abbreviatedMonthNames[this.getMonth()] : Date.CultureInfo.monthNames[this.getMonth()]
    }, Date.prototype._toString = Date.prototype.toString, Date.prototype.toString = function(e) {
        var t = this,
            n = function(t) {
                return t.toString().length == 1 ? "0" + t : t
            };
        return e ? e.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g, function(e) {
            switch (e) {
                case "hh":
                    return n(t.getHours() < 13 ? t.getHours() : t.getHours() - 12);
                case "h":
                    return t.getHours() < 13 ? t.getHours() : t.getHours() - 12;
                case "HH":
                    return n(t.getHours());
                case "H":
                    return t.getHours();
                case "mm":
                    return n(t.getMinutes());
                case "m":
                    return t.getMinutes();
                case "ss":
                    return n(t.getSeconds());
                case "s":
                    return t.getSeconds();
                case "yyyy":
                    return t.getFullYear();
                case "yy":
                    return t.getFullYear().toString().substring(2, 4);
                case "dddd":
                    return t.getDayName();
                case "ddd":
                    return t.getDayName(!0);
                case "dd":
                    return n(t.getDate());
                case "d":
                    return t.getDate().toString();
                case "MMMM":
                    return t.getMonthName();
                case "MMM":
                    return t.getMonthName(!0);
                case "MM":
                    return n(t.getMonth() + 1);
                case "M":
                    return t.getMonth() + 1;
                case "t":
                    return t.getHours() < 12 ? Date.CultureInfo.amDesignator.substring(0, 1) : Date.CultureInfo.pmDesignator.substring(0, 1);
                case "tt":
                    return t.getHours() < 12 ? Date.CultureInfo.amDesignator : Date.CultureInfo.pmDesignator;
                case "zzz":
                case "zz":
                case "z":
                    return ""
            }
        }) : this._toString()
    }, Date.now = function() {
        return new Date
    }, Date.today = function() {
        return Date.now().clearTime()
    }, Date.prototype._orient = 1, Date.prototype.next = function() {
        return this._orient = 1, this
    }, Date.prototype.last = Date.prototype.prev = Date.prototype.previous = function() {
        return this._orient = -1, this
    }, Date.prototype._is = !1, Date.prototype.is = function() {
        return this._is = !0, this
    }, Number.prototype._dateElement = "day", Number.prototype.fromNow = function() {
        var e = {};
        return e[this._dateElement] = this, Date.now().add(e)
    }, Number.prototype.ago = function() {
        var e = {};
        return e[this._dateElement] = this * -1, Date.now().add(e)
    },
    function() {
        var e = Date.prototype,
            t = Number.prototype,
            n = "sunday monday tuesday wednesday thursday friday saturday".split(/\s/),
            r = "january february march april may june july august september october november december".split(/\s/),
            i = "Millisecond Second Minute Hour Day Week Month Year".split(/\s/),
            s, o = function(e) {
                return function() {
                    return this._is ? (this._is = !1, this.getDay() == e) : this.moveToDayOfWeek(e, this._orient)
                }
            };
        for (var u = 0; u < n.length; u++) e[n[u]] = e[n[u].substring(0, 3)] = o(u);
        var a = function(e) {
            return function() {
                return this._is ? (this._is = !1, this.getMonth() === e) : this.moveToMonth(e, this._orient)
            }
        };
        for (var f = 0; f < r.length; f++) e[r[f]] = e[r[f].substring(0, 3)] = a(f);
        var l = function(e) {
                return function() {
                    return e.substring(e.length - 1) != "s" && (e += "s"), this["add" + e](this._orient)
                }
            },
            c = function(e) {
                return function() {
                    return this._dateElement = e, this
                }
            };
        for (var h = 0; h < i.length; h++) s = i[h].toLowerCase(), e[s] = e[s + "s"] = l(i[h]), t[s] = t[s + "s"] = c(s)
    }(), Date.prototype.toJSONString = function() {
        return this.toString("yyyy-MM-ddThh:mm:ssZ")
    }, Date.prototype.toShortDateString = function() {
        return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)
    }, Date.prototype.toLongDateString = function() {
        return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)
    }, Date.prototype.toShortTimeString = function() {
        return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)
    }, Date.prototype.toLongTimeString = function() {
        return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)
    }, Date.prototype.getOrdinal = function() {
        switch (this.getDate()) {
            case 1:
            case 21:
            case 31:
                return "st";
            case 2:
            case 22:
                return "nd";
            case 3:
            case 23:
                return "rd";
            default:
                return "th"
        }
    },
    function() {
        Date.Parsing = {
            Exception: function(e) {
                this.message = "Parse error at '" + e.substring(0, 10) + " ...'"
            }
        };
        var e = Date.Parsing,
            t = e.Operators = {
                rtoken: function(t) {
                    return function(n) {
                        var i = n.match(t);
                        if (i) return [i[0], n.substring(i[0].length)];
                        throw new e.Exception(n)
                    }
                },
                token: function(e) {
                    return function(e) {
                        return t.rtoken(new RegExp("^s*" + e + "s*"))(e)
                    }
                },
                stoken: function(e) {
                    return t.rtoken(new RegExp("^" + e))
                },
                until: function(e) {
                    return function(t) {
                        var n = [],
                            r = null;
                        while (t.length) {
                            try {
                                r = e.call(this, t)
                            } catch (i) {
                                n.push(r[0]), t = r[1];
                                continue
                            }
                            break
                        }
                        return [n, t]
                    }
                },
                many: function(e) {
                    return function(t) {
                        var n = [],
                            r = null;
                        while (t.length) {
                            try {
                                r = e.call(this, t)
                            } catch (i) {
                                return [n, t]
                            }
                            n.push(r[0]), t = r[1]
                        }
                        return [n, t]
                    }
                },
                optional: function(e) {
                    return function(t) {
                        var n = null;
                        try {
                            n = e.call(this, t)
                        } catch (r) {
                            return [null, t]
                        }
                        return [n[0], n[1]]
                    }
                },
                not: function(t) {
                    return function(n) {
                        try {
                            t.call(this, n)
                        } catch (r) {
                            return [null, n]
                        }
                        throw new e.Exception(n)
                    }
                },
                ignore: function(e) {
                    return e ? function(t) {
                        var n = null;
                        return n = e.call(this, t), [null, n[1]]
                    } : null
                },
                product: function() {
                    var e = arguments[0],
                        n = Array.prototype.slice.call(arguments, 1),
                        r = [];
                    for (var i = 0; i < e.length; i++) r.push(t.each(e[i], n));
                    return r
                },
                cache: function(t) {
                    var n = {},
                        r = null;
                    return function(i) {
                        try {
                            r = n[i] = n[i] || t.call(this, i)
                        } catch (s) {
                            r = n[i] = s
                        }
                        if (r instanceof e.Exception) throw r;
                        return r
                    }
                },
                any: function() {
                    var t = arguments;
                    return function(n) {
                        var r = null;
                        for (var i = 0; i < t.length; i++) {
                            if (t[i] == null) continue;
                            try {
                                r = t[i].call(this, n)
                            } catch (s) {
                                r = null
                            }
                            if (r) return r
                        }
                        throw new e.Exception(n)
                    }
                },
                each: function() {
                    var t = arguments;
                    return function(n) {
                        var r = [],
                            i = null;
                        for (var s = 0; s < t.length; s++) {
                            if (t[s] == null) continue;
                            try {
                                i = t[s].call(this, n)
                            } catch (o) {
                                throw new e.Exception(n)
                            }
                            r.push(i[0]), n = i[1]
                        }
                        return [r, n]
                    }
                },
                all: function() {
                    var e = arguments,
                        t = t;
                    return t.each(t.optional(e))
                },
                sequence: function(n, r, i) {
                    return r = r || t.rtoken(/^\s*/), i = i || null, n.length == 1 ? n[0] : function(t) {
                        var s = null,
                            o = null,
                            u = [];
                        for (var a = 0; a < n.length; a++) {
                            try {
                                s = n[a].call(this, t)
                            } catch (f) {
                                break
                            }
                            u.push(s[0]);
                            try {
                                o = r.call(this, s[1])
                            } catch (l) {
                                o = null;
                                break
                            }
                            t = o[1]
                        }
                        if (!s) throw new e.Exception(t);
                        if (o) throw new e.Exception(o[1]);
                        if (i) try {
                            s = i.call(this, s[1])
                        } catch (h) {
                            throw new e.Exception(s[1])
                        }
                        return [u, s ? s[1] : t]
                    }
                },
                between: function(e, n, i) {
                    i = i || e;
                    var s = t.each(t.ignore(e), n, t.ignore(i));
                    return function(e) {
                        var t = s.call(this, e);
                        return [
                            [t[0][0], r[0][2]], t[1]
                        ]
                    }
                },
                list: function(e, n, r) {
                    return n = n || t.rtoken(/^\s*/), r = r || null, e instanceof Array ? t.each(t.product(e.slice(0, -1), t.ignore(n)), e.slice(-1), t.ignore(r)) : t.each(t.many(t.each(e, t.ignore(n))), px, t.ignore(r))
                },
                set: function(n, r, i) {
                    return r = r || t.rtoken(/^\s*/), i = i || null,
                        function(s) {
                            var o = null,
                                u = null,
                                a = null,
                                f = null,
                                l = [
                                    [], s
                                ],
                                h = !1;
                            for (var p = 0; p < n.length; p++) {
                                a = null, u = null, o = null, h = n.length == 1;
                                try {
                                    o = n[p].call(this, s)
                                } catch (v) {
                                    continue
                                }
                                f = [
                                    [o[0]], o[1]
                                ];
                                if (o[1].length > 0 && !h) try {
                                    a = r.call(this, o[1])
                                } catch (m) {
                                    h = !0
                                } else h = !0;
                                !h && a[1].length === 0 && (h = !0);
                                if (!h) {
                                    var g = [];
                                    for (var y = 0; y < n.length; y++) p != y && g.push(n[y]);
                                    u = t.set(g, r).call(this, a[1]), u[0].length > 0 && (f[0] = f[0].concat(u[0]), f[1] = u[1])
                                }
                                f[1].length < l[1].length && (l = f);
                                if (l[1].length === 0) break
                            }
                            if (l[0].length === 0) return l;
                            if (i) {
                                try {
                                    a = i.call(this, l[1])
                                } catch (b) {
                                    throw new e.Exception(l[1])
                                }
                                l[1] = a[1]
                            }
                            return l
                        }
                },
                forward: function(e, t) {
                    return function(n) {
                        return e[t].call(this, n)
                    }
                },
                replace: function(e, t) {
                    return function(n) {
                        var r = e.call(this, n);
                        return [t, r[1]]
                    }
                },
                process: function(e, t) {
                    return function(n) {
                        var r = e.call(this, n);
                        return [t.call(this, r[0]), r[1]]
                    }
                },
                min: function(t, n) {
                    return function(r) {
                        var i = n.call(this, r);
                        if (i[0].length < t) throw new e.Exception(r);
                        return i
                    }
                }
            },
            n = function(e) {
                return function() {
                    var t = null,
                        n = [];
                    arguments.length > 1 ? t = Array.prototype.slice.call(arguments) : arguments[0] instanceof Array && (t = arguments[0]);
                    if (!t) return e.apply(null, arguments);
                    for (var r = 0, i = t.shift(); r < i.length; r++) return t.unshift(i[r]), n.push(e.apply(null, t)), t.shift(), n
                }
            },
            i = "optional not ignore cache".split(/\s/);
        for (var s = 0; s < i.length; s++) t[i[s]] = n(t[i[s]]);
        var o = function(e) {
                return function() {
                    return arguments[0] instanceof Array ? e.apply(null, arguments[0]) : e.apply(null, arguments)
                }
            },
            u = "each any all".split(/\s/);
        for (var a = 0; a < u.length; a++) t[u[a]] = o(t[u[a]])
    }(),
    function() {
        var e = function(t) {
            var n = [];
            for (var r = 0; r < t.length; r++) t[r] instanceof Array ? n = n.concat(e(t[r])) : t[r] && n.push(t[r]);
            return n
        };
        Date.Grammar = {}, Date.Translator = {
            hour: function(e) {
                return function() {
                    this.hour = Number(e)
                }
            },
            minute: function(e) {
                return function() {
                    this.minute = Number(e)
                }
            },
            second: function(e) {
                return function() {
                    this.second = Number(e)
                }
            },
            meridian: function(e) {
                return function() {
                    this.meridian = e.slice(0, 1).toLowerCase()
                }
            },
            timezone: function(e) {
                return function() {
                    var t = e.replace(/[^\d\+\-]/g, "");
                    t.length ? this.timezoneOffset = Number(t) : this.timezone = e.toLowerCase()
                }
            },
            day: function(e) {
                var t = e[0];
                return function() {
                    this.day = Number(t.match(/\d+/)[0])
                }
            },
            month: function(e) {
                return function() {
                    this.month = e.length == 3 ? Date.getMonthNumberFromName(e) : Number(e) - 1
                }
            },
            year: function(e) {
                return function() {
                    var t = Number(e);
                    this.year = e.length > 2 ? t : t + (t + 2e3 < Date.CultureInfo.twoDigitYearMax ? 2e3 : 1900)
                }
            },
            rday: function(e) {
                return function() {
                    switch (e) {
                        case "yesterday":
                            this.days = -1;
                            break;
                        case "tomorrow":
                            this.days = 1;
                            break;
                        case "today":
                            this.days = 0;
                            break;
                        case "now":
                            this.days = 0, this.now = !0
                    }
                }
            },
            finishExact: function(e) {
                e = e instanceof Array ? e : [e];
                var t = new Date;
                this.year = t.getFullYear(), this.month = t.getMonth(), this.day = 1, this.hour = 0, this.minute = 0, this.second = 0;
                for (var n = 0; n < e.length; n++) e[n] && e[n].call(this);
                this.hour = this.meridian == "p" && this.hour < 13 ? this.hour + 12 : this.hour;
                if (this.day > Date.getDaysInMonth(this.year, this.month)) throw new RangeError(this.day + " is not a valid value for days.");
                var r = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second);
                return this.timezone ? r.set({
                    timezone: this.timezone
                }) : this.timezoneOffset && r.set({
                    timezoneOffset: this.timezoneOffset
                }), r
            },
            finish: function(t) {
                t = t instanceof Array ? e(t) : [t];
                if (t.length === 0) return null;
                for (var n = 0; n < t.length; n++) typeof t[n] == "function" && t[n].call(this);
                if (this.now) return new Date;
                var r = Date.today(),
                    i = null,
                    s = this.days != null || !!this.orient || !!this.operator;
                if (s) {
                    var o, u, a;
                    a = this.orient == "past" || this.operator == "subtract" ? -1 : 1, this.weekday && (this.unit = "day", o = Date.getDayNumberFromName(this.weekday) - r.getDay(), u = 7, this.days = o ? (o + a * u) % u : a * u), this.month && (this.unit = "month", o = this.month - r.getMonth(), u = 12, this.months = o ? (o + a * u) % u : a * u, this.month = null), this.unit || (this.unit = "day");
                    if (this[this.unit + "s"] == null || this.operator != null) this.value || (this.value = 1), this.unit == "week" && (this.unit = "day", this.value = this.value * 7), this[this.unit + "s"] = this.value * a;
                    return r.add(this)
                }
                return this.meridian && this.hour && (this.hour = this.hour < 13 && this.meridian == "p" ? this.hour + 12 : this.hour), this.weekday && !this.day && (this.day = r.addDays(Date.getDayNumberFromName(this.weekday) - r.getDay()).getDate()), this.month && !this.day && (this.day = 1), r.set(this)
            }
        };
        var t = Date.Parsing.Operators,
            n = Date.Grammar,
            r = Date.Translator,
            i;
        n.datePartDelimiter = t.rtoken(/^([\s\-\.\,\/']+)/), n.timePartDelimiter = t.stoken(":"), n.whiteSpace = t.rtoken(/^\s*/), n.generalDelimiter = t.rtoken(/^(([\s\,]|at|on)+)/);
        var s = {};
        n.ctoken = function(e) {
            var n = s[e];
            if (!n) {
                var r = Date.CultureInfo.regexPatterns,
                    i = e.split(/\s+/),
                    o = [];
                for (var u = 0; u < i.length; u++) o.push(t.replace(t.rtoken(r[i[u]]), i[u]));
                n = s[e] = t.any.apply(null, o)
            }
            return n
        }, n.ctoken2 = function(e) {
            return t.rtoken(Date.CultureInfo.regexPatterns[e])
        }, n.h = t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/), r.hour)), n.hh = t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/), r.hour)), n.H = t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/), r.hour)), n.HH = t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/), r.hour)), n.m = t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/), r.minute)), n.mm = t.cache(t.process(t.rtoken(/^[0-5][0-9]/), r.minute)), n.s = t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/), r.second)), n.ss = t.cache(t.process(t.rtoken(/^[0-5][0-9]/), r.second)), n.hms = t.cache(t.sequence([n.H, n.mm, n.ss], n.timePartDelimiter)), n.t = t.cache(t.process(n.ctoken2("shortMeridian"), r.meridian)), n.tt = t.cache(t.process(n.ctoken2("longMeridian"), r.meridian)), n.z = t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/), r.timezone)), n.zz = t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/), r.timezone)), n.zzz = t.cache(t.process(n.ctoken2("timezone"), r.timezone)), n.timeSuffix = t.each(t.ignore(n.whiteSpace), t.set([n.tt, n.zzz])), n.time = t.each(t.optional(t.ignore(t.stoken("T"))), n.hms, n.timeSuffix), n.d = t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/), t.optional(n.ctoken2("ordinalSuffix"))), r.day)), n.dd = t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/), t.optional(n.ctoken2("ordinalSuffix"))), r.day)), n.ddd = n.dddd = t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"), function(e) {
            return function() {
                this.weekday = e
            }
        })), n.M = t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/), r.month)), n.MM = t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/), r.month)), n.MMM = n.MMMM = t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"), r.month)), n.y = t.cache(t.process(t.rtoken(/^(\d\d?)/), r.year)), n.yy = t.cache(t.process(t.rtoken(/^(\d\d)/), r.year)), n.yyy = t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/), r.year)), n.yyyy = t.cache(t.process(t.rtoken(/^(\d\d\d\d)/), r.year)), i = function() {
            return t.each(t.any.apply(null, arguments), t.not(n.ctoken2("timeContext")))
        }, n.day = i(n.d, n.dd), n.month = i(n.M, n.MMM), n.year = i(n.yyyy, n.yy), n.orientation = t.process(n.ctoken("past future"), function(e) {
            return function() {
                this.orient = e
            }
        }), n.operator = t.process(n.ctoken("add subtract"), function(e) {
            return function() {
                this.operator = e
            }
        }), n.rday = t.process(n.ctoken("yesterday tomorrow today now"), r.rday), n.unit = t.process(n.ctoken("minute hour day week month year"), function(e) {
            return function() {
                this.unit = e
            }
        }), n.value = t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/), function(e) {
            return function() {
                this.value = e.replace(/\D/g, "")
            }
        }), n.expression = t.set([n.rday, n.operator, n.value, n.unit, n.orientation, n.ddd, n.MMM]), i = function() {
            return t.set(arguments, n.datePartDelimiter)
        }, n.mdy = i(n.ddd, n.month, n.day, n.year), n.ymd = i(n.ddd, n.year, n.month, n.day), n.dmy = i(n.ddd, n.day, n.month, n.year), n.date = function(e) {
            return (n[Date.CultureInfo.dateElementOrder] || n.mdy).call(this, e)
        }, n.format = t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/), function(e) {
            if (n[e]) return n[e];
            throw Date.Parsing.Exception(e)
        }), t.process(t.rtoken(/^[^dMyhHmstz]+/), function(e) {
            return t.ignore(t.stoken(e))
        }))), function(e) {
            return t.process(t.each.apply(null, e), r.finishExact)
        });
        var o = {},
            u = function(e) {
                return o[e] = o[e] || n.format(e)[0]
            };
        n.formats = function(e) {
            if (e instanceof Array) {
                var n = [];
                for (var r = 0; r < e.length; r++) n.push(u(e[r]));
                return t.any.apply(null, n)
            }
            return u(e)
        }, n._formats = n.formats(["yyyy-MM-ddTHH:mm:ss", "ddd, MMM dd, yyyy H:mm:ss tt", "ddd MMM d yyyy HH:mm:ss zzz", "d"]), n._start = t.process(t.set([n.date, n.time, n.expression], n.generalDelimiter, n.whiteSpace), r.finish), n.start = function(e) {
            try {
                var t = n._formats.call({}, e);
                if (t[1].length === 0) return t
            } catch (r) {}
            return n._start.call({}, e)
        }
    }(), Date._parse = Date.parse, Date.parse = function(e) {
        var t = null;
        if (!e) return null;
        try {
            t = Date.Grammar.start.call({}, e)
        } catch (n) {
            return null
        }
        return t[1].length === 0 ? t[0] : null
    }, Date.getParseFunction = function(e) {
        var t = Date.Grammar.formats(e);
        return function(e) {
            var n = null;
            try {
                n = t.call({}, e)
            } catch (r) {
                return null
            }
            return n[1].length === 0 ? n[0] : null
        }
    }, Date.parseExact = function(e, t) {
        return Date.getParseFunction(t)(e)
    }, define("datejs", function() {}), define("components/common/scripts/util/formatter", ["underscore", "jquery", "accounting", "datejs"], function(e, t, n) {
        return {
            money: function(e, t) {
                return n.formatMoney.call(this, e, {
                    symbol: "$",
                    precision: t,
                    format: {
                        pos: "%s%v",
                        neg: "-%s%v",
                        zero: "%s%v"
                    }
                })
            },
            moneyCents: function(e, t) {
                var n = (e / 100).round(2);
                return this.money(n, t)
            },
            integer: function(e) {
                return this.number(e, 0)
            },
            decimal: function(e) {
                return this.number(e, 2)
            },
            number: function(e, t, r) {
                return n.formatNumber.call(this, e, t, r)
            },
            pct: function(e, t) {
                return this._pct(e, t) + "%"
            },
            pctTrimZeros: function(e, t) {
                return parseFloat(this._pct(e, t)) + "%"
            },
            _pct: function(e, t) {
                this._badNum(e) && (e = 0);
                var n = (parseFloat(e) * 100).toFixed(t || 0);
                return parseFloat(n) === 0 && (n = 0..toFixed(t || 0)), n
            },
            removeCommas: function(e) {
                return e.replace(/,/g, "")
            },
            pctFromBasis: function(e, t) {
                return this.pct(parseFloat(e) / 1e4, t || 2)
            },
            monthYear: function(e) {
                return this.formatDate("MM yy", e)
            },
            monthDate: function(e) {
                return this.formatDate("M d", e)
            },
            dayMonthDateYear: function(e) {
                return this.formatDate("DD MM d, yy", e)
            },
            formatDate: function(e, n) {
                return t.datepicker.formatDate(e, n)
            },
            formatTitle: function(e, t) {
                var n = e.toLowerCase().replace(/[^\s_]*/g, function(e) {
                    return e.capitalize()
                });
                return t ? n.replace(/[_]/g, " ") : n
            },
            ordinalSuffix: function(e) {
                switch (e % 10) {
                    case 1:
                        return e % 100 === 11 ? "th" : "st";
                    case 2:
                        return e % 100 === 12 ? "th" : "nd";
                    case 3:
                        return e % 100 === 13 ? "th" : "rd";
                    default:
                        return "th"
                }
            },
            _badNum: function(e) {
                return isNaN(e) || e === Infinity || e === -Infinity
            },
            commaList: function(e) {
                return e.join(", ")
            },
            dasherize: function(e) {
                return e.replace(/\s+/g, "-").replace(/[-_\s]+/g, "-")
            }
        }
    }), define("components/common/scripts/util/moneyHandler", ["underscore", "accounting"], function(e, t) {
        function n(t) {
            if (e.isNumber(t)) return t;
            if (!e.isString(t)) throw new Error("Unable to convert value to number. type: " + typeof t + " value: " + t);
            return t = t.replace(/[^\d\.]/g, ""), parseFloat(t)
        }

        function r(e) {
            return t.formatNumber(e, 2, ",", ".")
        }
        return {
            toNumber: n,
            fromNumber: r
        }
    }), define("components/common/scripts/modules/async", ["jquery", "underscore"], function(e, t) {
        return {
            every: function(n, r, i) {
                i = i || {}, t.isArray(n) || (n = n.objects, r = n.forEach, i = n);
                var s = n.length,
                    o = 0,
                    u = !0,
                    a = new e.Deferred;
                return s === 0 ? a.resolve() : t.each(n, function(n) {
                    var f = r(n),
                        l;
                    t.isBoolean(f) ? (l = new e.Deferred, l[f ? "resolve" : "reject"]()) : t.isArray(f) ? l = e.when(f) : l = f, l.fail(function() {
                        u = !1, i.fail && i.fail(n)
                    }), i.done && l.done(function() {
                        i.done(n)
                    }), l.always(function() {
                        ++o === s && (u ? a.resolve() : a.reject())
                    })
                }), a.promise()
            },
            chain: function(n, r, i) {
                i = i || {}, t.isArray(n) || (i = n, n = i.objects, r = i.forEach);
                var s = null,
                    o = null,
                    u = new e.Deferred,
                    a = function(e) {
                        return function() {
                            o = o || e
                        }
                    },
                    f = function(e) {
                        return function() {
                            var t = r(e);
                            return t.fail(a(e)), t
                        }
                    },
                    l = function(e) {
                        var t = i.stopOnFail !== !1;
                        return t ? function() {} : f(e)
                    };
                return t.each(n, function(e) {
                    s ? s = s.pipe(f(e), l(e)) : s = f(e)()
                }), s ? s.always(function() {
                    o ? u.reject(o) : u.resolve()
                }) : u.resolve(), u.promise()
            },
            chainFunctions: function() {
                if (!arguments.length || !t.isFunction(arguments[0])) {
                    var n = new e.Deferred;
                    return n.resolve(), n.promise()
                }
                var r = Array.prototype.slice.call(arguments),
                    i = [],
                    s, o = {};
                while ((s = r.shift()) && t.isFunction(s)) i.push(s);
                return !t.isFunction(s) && t.isObject(s) && (o = s), this.chain(i, function(e) {
                    var t = o.context || null;
                    return e.apply(t)
                }, o)
            },
            whenAll: function(n) {
                var r = new e.Deferred,
                    i = n.length,
                    s = new Array(i),
                    o = 0,
                    u = !0,
                    a = function(e, t) {
                        s[e] = t, this.state() === "rejected" && (u = !1), o++, o === i && (u ? r.resolve.apply(this, s) : r.reject.apply(this, s))
                    };
                return n.length === 0 ? r.resolve() : t.each(n, function(e, t) {
                    e.always(a.bind(e, t))
                }), r.promise()
            }
        }
    }), define("components/common/scripts/modules/conversation", ["jquery", "underscore", "components/common/scripts/modules/async"], function(e, t, n) {
        function r(r) {
            function o(t) {
                s.setTarget(e(t.currentTarget), t)
            }

            function u(t) {
                var n = a(e(t.currentTarget), t);
                n.fail(function(e) {
                    e.suppressValidationMessage || s.showMessages(e)
                }), n.done(function(e) {
                    e.skippedValidation || s.showMessages(e)
                }), n.always(function() {
                    var n = !t.relatedTarget || !e(t.relatedTarget).closest(s.exchangeSelector).length;
                    n && s.checkShowingMessages()
                })
            }

            function a(t, n) {
                var r = new i({
                        target: t
                    }),
                    s = r.set("$promise", new e.Deferred);
                return l(t, n) ? (t.closest(".input-area").hasClass("suppress-live-validation-messages") && r.set("suppressValidationMessage", !0), f(r)) : (r.set("skippedValidation", !0), s.resolve(r)), s.promise()
            }

            function f(t) {
                var r = t.target.closest(s.exchangeSelector),
                    i = {};
                r.find(s.bindTo).each(function() {
                    var t = e(this),
                        n = t.attr("name"),
                        r = t.is(":radio") || t.is(":checkbox");
                    if (r && !t.is(":checked")) {
                        i[n] || (i[n] = "");
                        return
                    }
                    i[n] = s.transform(n, t.val())
                }), r.data("group") && (i = s.transform(r.data("group"), i)), t.set({
                    values: i,
                    options: r.data()
                });
                var o = (r.data("strategy") || "default").split(" "),
                    u = n.chain(o, function(e) {
                        return N[e](t)
                    });
                return u.done(function() {
                    t.$promise.resolve(t)
                }), u.fail(function() {
                    t.$promise.reject(t)
                }), t.$promise.promise()
            }

            function l(e, t) {
                var n = e.closest(s.exchangeSelector);
                if (!n.find(s.bindTo).not(e).length) return !0;
                var r = t && t.relatedTarget,
                    i = !r || !n.has(r).length;
                return i
            }

            function c(e) {
                var t = e.closest("[data-validation-model]");
                if (t.length) {
                    var n = t.data("validation-model");
                    if (s.validationModels && s.validationModels[n]) return s.validationModels[n]
                }
                return s.model || s.view.model
            }

            function h(e) {
                return e.is(s.exchangeSelector) || (e = e.closest(s.exchangeSelector)), e.find(s.messageSelector)
            }

            function p(e, t) {
                var n = h(e);
                n.children().hide(), n.find("." + t).show()
            }

            function d(e) {
                var n = {
                        good: "green-check",
                        bad: "red-x",
                        working: "small-spinner"
                    },
                    r = e.target.closest(s.exchangeSelector).find(".feedback-icon");
                r.removeClass(t.values(n).join(" ")), r.addClass(n[e.mode])
            }

            function v(e, t, n) {
                h(e).find("." + t).html(n)
            }

            function m(t, n, r, i, o) {
                var u = s.messages && s.messages[t] || {},
                    a = u && u[n];
                return a ? e.isFunction(a) ? a.call(s, r, i, o) : a : i
            }

            function g(e) {
                var t = e.closest(s.exchangeSelector),
                    n = t.data("group");
                return n && s.messages && s.messages[n] ? n : e.attr("name") ? e.attr("name") : t.find("[name]:input").first().attr("name")
            }

            function y(e, t) {
                var n = h(e);
                p(e, t), n.is(":visible") || n.slideDown()
            }

            function b(e) {
                var t = e.target.closest(s.exchangeSelector);
                t.data("valid", e.mode === "good"), s.view.trigger("conversation:updated")
            }

            function w(e) {
                var t = g(e.target),
                    n = m(t, e.mode, e.values, e.error, e);
                E(e.target, e.mode, n)
            }

            function E(e, t, n) {
                n ? (v(e, t, n), y(e, t)) : h(e).slideUp()
            }

            function S(e, t) {
                x(t).not(e).not(x("working")).slideUp()
            }

            function x(e) {
                return s.view.$(s.messageSelector).has("." + e + ":visible")
            }

            function T(e) {
                var e = h(e);
                return e.has(".bad:visible").length !== 0
            }
            var s = t.extend(this, {
                bindTo: ":input",
                exchangeSelector: ".exchange",
                messageSelector: ".conversation-text"
            }, r);
            s.view.$(s.bindTo).on("focus", o), s.view.$(s.bindTo).on("blur", u), s.view.$("input[type=radio], select, input[type=checkbox]").on("change", u), s.view.$(s.messageSelector).each(function() {
                var n = e(this),
                    r = n.children();
                t.each(["prompt", "good", "bad", "working"], function(e) {
                    r.is("." + e) || n.append('<span class="' + e + '"></span>')
                })
            }), s.validate = function(t) {
                var t = t || {},
                    r = t.silent || !1,
                    o = t.selector,
                    u = this.view.$(this.exchangeSelector);
                o && (u = u.filter(o));
                var a = [];
                return u.each(function() {
                    a.push(new i({
                        target: e(this),
                        $promise: new e.Deferred,
                        silent: r
                    }))
                }), n.every(a, f, {
                    fail: function(e) {
                        r || s.showMessages(e)
                    },
                    done: function(e) {
                        e.mode = "good", e.silent ? b(e) : s.showMessages(e)
                    }
                })
            }, s.resume = function(t) {
                var r = this.view.$(this.exchangeSelector),
                    s = e.Deferred(),
                    o = [];
                r.each(function() {
                    o.push(new i({
                        target: e(this),
                        $promise: new e.Deferred,
                        silent: !0
                    }))
                });
                var u = this.view,
                    a = n.chain(o, f);
                return a.fail(function(n) {
                    var r = n.target;
                    u.unlockSection && u.unlockSection(), r.qtip({
                        content: {
                            text: t
                        },
                        position: {
                            my: "center right",
                            at: "center left",
                            adjust: {
                                x: -20
                            }
                        },
                        style: {
                            classes: "conversation-tooltip"
                        },
                        show: {
                            ready: !0
                        },
                        hide: {
                            event: "blur change"
                        },
                        events: {
                            hide: function() {
                                e(this).qtip("destroy", !0)
                            }
                        }
                    }), s.resolve()
                }), a.done(function() {
                    s.reject()
                }), s
            }, s.serialize = function() {
                var n = this.view.$(this.exchangeSelector),
                    r = {};
                return n.each(function() {
                    var n = {},
                        i = e(this);
                    i.find(s.bindTo).each(function() {
                        var t = e(this),
                            r = t.attr("name");
                        if (t.is(":radio") && !t.is(":checked")) return;
                        if (t.is(":checkbox") && !t.is(":checked")) return;
                        n[r] = s.transform(r, t.val())
                    }), i.data("group") && (n = s.transform(i.data("group"), n)), t.extend(r, n)
                }), r
            }, s.setTarget = function(t, n) {
                var r = h(t);
                T(r) || w({
                    target: t,
                    mode: "prompt"
                }), S(r, "prompt");
                var i = h(n && n.relatedTarget ? e(n.relatedTarget) : t.closest(s.exchangeSelector).prev());
                return S(i, "good"), this
            }, s.showMessages = function(e) {
                e.set("mode", e.mode || (e.error ? "bad" : "good")), d(e), w(e), b(e)
            }, s.forceShowError = function(e, t) {
                var n = s.view.$("[name=" + e + "]");
                E(n, "bad", t), d(new i({
                    target: n,
                    mode: "bad"
                }))
            }, s.showError = function(e, n, r, o) {
                o = o || {};
                var u = s.view.$("[name=" + e + "]");
                return w(t.extend(o, {
                    target: u,
                    mode: "bad",
                    value: n,
                    error: r
                })), d(new i({
                    target: u,
                    mode: "bad"
                })), this
            }, s.checkShowingMessages = function() {
                var t = s.view.$(".good:visible");
                return t.not(t.last()).each(function() {
                    e(this).parent().slideUp()
                }), this
            }, s.addValidationStrategy = function(e, t) {
                N[e] = t
            }, s.transform = function(e, n, r) {
                var i = s.transformers && s.transformers[e],
                    r = r || "send";
                return i && (t.isFunction(i) || (i = i[r]), n = i.call(s, n)), n
            };
            var N = {
                "default": function(t) {
                    var n = t.values,
                        r = new e.Deferred,
                        i = t.target,
                        s = !0;
                    return t.error = "", e.each(n, function(e, n) {
                        t.error = c(i).preValidate(e, n);
                        if (t.error) return s = !1, !1
                    }), s ? r.resolve(t) : r.reject(t), r.promise()
                },
                remote: function(n) {
                    var r = new e.Deferred,
                        i = {};
                    return n.set("mode", "working"), n.silent || w(n), i.format = "exists", i = t.extend(i, n.values), e.ajax({
                        url: n.options.remote,
                        type: "GET",
                        data: i,
                        success: function(e) {
                            e.exists || e.error ? (n.set("mode", "bad"), e.exists && n.set("exists", !0), r.reject(n)) : (n.set("mode", "good"), r.resolve(n))
                        },
                        error: function() {
                            n.set("mode", "bad"), n.set("error", "There was an error while checking your answer."), r.reject(n)
                        }
                    }), r.promise()
                }
            }
        }
        var i = function(e) {
            this.set = function(e, n) {
                if (t.isObject(e)) {
                    var r = this;
                    return t.each(e, function(e, t) {
                        r[t] = e
                    }), e
                }
                return this[e] = n, n
            }, this.get = function(e, t) {
                return this[e] || t
            }, this.unset = function(e) {
                delete this[e]
            }, t.extend(this, e)
        };
        return r
    }), define("components/common/scripts/services/dateService", [], function() {
        function e() {
            return new Date(undefined)
        }
        var t = {
            parseServerDate: function(t) {
                if (t) {
                    var n = t.substring(0, 4),
                        r = parseInt(t.substring(4, 6), 10) - 1,
                        i = t.substring(6, 8),
                        s = t.substring(8, 10),
                        o = t.substring(10, 12),
                        u = t.substring(12, 14);
                    return new Date(n, r, i, s, o, u)
                }
                return e()
            },
            parseDateFieldValue: function(n) {
                var r = n.match(/^(\d{2})\/(\d{2})\/(\d{4})$/),
                    i;
                if (!r) return e();
                var s = r[1],
                    o = r[2],
                    u = r[3];
                return i = t.buildDateFromParts(u, s, o), i
            },
            buildDateFromParts: function(t, n, r) {
                if (!t || !n || !r) return e();
                var t = parseInt(t, 10),
                    n = parseInt(n, 10),
                    r = parseInt(r, 10);
                if (n < 1 || n > 12 || r < 1 || r > 31) return e();
                var i = n - 1,
                    s = new Date(t, i, r);
                return s.getMonth() === i ? s : e()
            },
            isValidServerFormattedDate: function(e) {
                return e && !/^\d{14}$/.test(e)
            }
        };
        return t
    }), define("components/common/scripts/models/modelMixins", ["underscore", "backbone", "components/common/scripts/services/dateService"], function(e, t, n) {
        return {
            num: function(e) {
                return parseFloat(this.get(e))
            },
            date: function(e) {
                return n.parseServerDate(this.get(e))
            },
            is: function(e) {
                return !!this.get(e)
            },
            not: function(e) {
                return !this.is(e)
            },
            plusEquals: function(e, t) {
                this.set(e, (this.num(e) || 0) + t)
            },
            sync: function(n, r, i) {
                var s = i.success,
                    o = i.error;
                return i.success = function(e) {
                    s && s(e);
                    var t = n === "patch" ? "update" : n;
                    r.trigger("sync:" + t, r, e, i)
                }, i.error = function(t) {
                    o && o(t), e.contains([400, 422, 409], t.status) ? (t.responseJSON && t.responseJSON.errorMessages && (r.errors = t.responseJSON.errorMessages), r.trigger("sync:invalid", t)) : r.trigger("sync:error", t)
                }, t.sync.call(this, n, r, i)
            },
            validateAttr: function(e, t) {
                var n = this.preValidate(e, t);
                return n ? this.trigger("invalid:" + e, n) : this.trigger("valid:" + e), n
            },
            _handleSaveArguments: function(t, n, r) {
                var i, s;
                return e.isObject(t) || e.isNull(t) || e.isUndefined(t) ? (i = t, s = n) : (i = {}, i[t] = n), s = e.extend({}, s, r), {
                    attrs: i,
                    options: s
                }
            }
        }
    }),
    function(e, t) {
        typeof define == "function" && define.amd ? define("backboneRelational", ["exports", "backbone", "underscore"], t) : typeof exports != "undefined" ? t(exports, require("backbone"), require("underscore")) : t(e, e.Backbone, e._)
    }(this, function(e, t, n) {
        "use strict";
        t.Relational = {
            showWarnings: !0
        }, t.Semaphore = {
            _permitsAvailable: null,
            _permitsUsed: 0,
            acquire: function() {
                if (this._permitsAvailable && this._permitsUsed >= this._permitsAvailable) throw new Error("Max permits acquired");
                this._permitsUsed++
            },
            release: function() {
                if (this._permitsUsed === 0) throw new Error("All permits released");
                this._permitsUsed--
            },
            isLocked: function() {
                return this._permitsUsed > 0
            },
            setAvailablePermits: function(e) {
                if (this._permitsUsed > e) throw new Error("Available permits cannot be less than used permits");
                this._permitsAvailable = e
            }
        }, t.BlockingQueue = function() {
            this._queue = []
        }, n.extend(t.BlockingQueue.prototype, t.Semaphore, {
            _queue: null,
            add: function(e) {
                this.isBlocked() ? this._queue.push(e) : e()
            },
            process: function() {
                var e = this._queue;
                this._queue = [];
                while (e && e.length) e.shift()()
            },
            block: function() {
                this.acquire()
            },
            unblock: function() {
                this.release(), this.isBlocked() || this.process()
            },
            isBlocked: function() {
                return this.isLocked()
            }
        }), t.Relational.eventQueue = new t.BlockingQueue, t.Store = function() {
            this._collections = [], this._reverseRelations = [], this._orphanRelations = [], this._subModels = [], this._modelScopes = [e]
        }, n.extend(t.Store.prototype, t.Events, {
            initializeRelation: function(e, r, i) {
                var s = n.isString(r.type) ? t[r.type] || this.getObjectByName(r.type) : r.type;
                s && s.prototype instanceof t.Relation ? new s(e, r, i) : t.Relational.showWarnings && typeof console != "undefined" && console.warn("Relation=%o; missing or invalid relation type!", r)
            },
            addModelScope: function(e) {
                this._modelScopes.push(e)
            },
            removeModelScope: function(e) {
                this._modelScopes = n.without(this._modelScopes, e)
            },
            addSubModels: function(e, t) {
                this._subModels.push({
                    superModelType: t,
                    subModels: e
                })
            },
            setupSuperModel: function(e) {
                n.find(this._subModels, function(t) {
                    return n.filter(t.subModels || [], function(n, r) {
                        var i = this.getObjectByName(n);
                        if (e === i) return t.superModelType._subModels[r] = e, e._superModel = t.superModelType, e._subModelTypeValue = r, e._subModelTypeAttribute = t.superModelType.prototype.subModelTypeAttribute, !0
                    }, this).length
                }, this)
            },
            addReverseRelation: function(e) {
                var t = n.any(this._reverseRelations, function(t) {
                    return n.all(e || [], function(e, n) {
                        return e === t[n]
                    })
                });
                !t && e.model && e.type && (this._reverseRelations.push(e), this._addRelation(e.model, e), this.retroFitRelation(e))
            },
            addOrphanRelation: function(e) {
                var t = n.any(this._orphanRelations, function(t) {
                    return n.all(e || [], function(e, n) {
                        return e === t[n]
                    })
                });
                !t && e.model && e.type && this._orphanRelations.push(e)
            },
            processOrphanRelations: function() {
                n.each(this._orphanRelations.slice(0), function(e) {
                    var r = t.Relational.store.getObjectByName(e.relatedModel);
                    r && (this.initializeRelation(null, e), this._orphanRelations = n.without(this._orphanRelations, e))
                }, this)
            },
            _addRelation: function(e, t) {
                e.prototype.relations || (e.prototype.relations = []), e.prototype.relations.push(t), n.each(e._subModels || [], function(e) {
                    this._addRelation(e, t)
                }, this)
            },
            retroFitRelation: function(e) {
                var t = this.getCollection(e.model, !1);
                t && t.each(function(t) {
                    if (!(t instanceof e.model)) return;
                    new e.type(t, e)
                }, this)
            },
            getCollection: function(e, r) {
                e instanceof t.RelationalModel && (e = e.constructor);
                var i = e;
                while (i._superModel) i = i._superModel;
                var s = n.find(this._collections, function(e) {
                    return e.model === i
                });
                return !s && r !== !1 && (s = this._createCollection(i)), s
            },
            getObjectByName: function(e) {
                var t = e.split("."),
                    r = null;
                return n.find(this._modelScopes, function(e) {
                    r = n.reduce(t || [], function(e, t) {
                        return e ? e[t] : undefined
                    }, e);
                    if (r && r !== e) return !0
                }, this), r
            },
            _createCollection: function(e) {
                var n;
                return e instanceof t.RelationalModel && (e = e.constructor), e.prototype instanceof t.RelationalModel && (n = new t.Collection, n.model = e, this._collections.push(n)), n
            },
            resolveIdForItem: function(e, r) {
                var i = n.isString(r) || n.isNumber(r) ? r : null;
                return i === null && (r instanceof t.RelationalModel ? i = r.id : n.isObject(r) && (i = r[e.prototype.idAttribute])), !i && i !== 0 && (i = null), i
            },
            find: function(e, t) {
                var n = this.resolveIdForItem(e, t),
                    r = this.getCollection(e);
                if (r) {
                    var i = r.get(n);
                    if (i instanceof e) return i
                }
                return null
            },
            register: function(e) {
                var t = this.getCollection(e);
                if (t) {
                    var n = e.collection;
                    t.add(e), e.collection = n
                }
            },
            checkId: function(e, n) {
                var r = this.getCollection(e),
                    i = r && r.get(n);
                if (i && e !== i) throw t.Relational.showWarnings && typeof console != "undefined" && console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o", i, e), new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")
            },
            update: function(e) {
                var t = this.getCollection(e);
                t.contains(e) || this.register(e), t._onModelEvent("change:" + e.idAttribute, e, t), e.trigger("relational:change:id", e, t)
            },
            unregister: function(e) {
                var r, i;
                e instanceof t.Model ? (r = this.getCollection(e), i = [e]) : e instanceof t.Collection ? (r = this.getCollection(e.model), i = n.clone(e.models)) : (r = this.getCollection(e), i = n.clone(r.models)), n.each(i, function(e) {
                    this.stopListening(e), n.invoke(e.getRelations(), "stopListening")
                }, this), n.contains(this._collections, e) ? r.reset([]) : n.each(i, function(e) {
                    r.get(e) ? r.remove(e) : r.trigger("relational:remove", e, r)
                }, this)
            },
            reset: function() {
                this.stopListening(), n.each(this._collections, function(e) {
                    this.unregister(e)
                }, this), this._collections = [], this._subModels = [], this._modelScopes = [e]
            }
        }), t.Relational.store = new t.Store, t.Relation = function(e, r, i) {
            this.instance = e, r = n.isObject(r) ? r : {}, this.reverseRelation = n.defaults(r.reverseRelation || {}, this.options.reverseRelation), this.options = n.defaults(r, this.options, t.Relation.prototype.options), this.reverseRelation.type = n.isString(this.reverseRelation.type) ? t[this.reverseRelation.type] || t.Relational.store.getObjectByName(this.reverseRelation.type) : this.reverseRelation.type, this.key = this.options.key, this.keySource = this.options.keySource || this.key, this.keyDestination = this.options.keyDestination || this.keySource || this.key, this.model = this.options.model || this.instance.constructor, this.relatedModel = this.options.relatedModel, n.isFunction(this.relatedModel) && !(this.relatedModel.prototype instanceof t.RelationalModel) && (this.relatedModel = n.result(this, "relatedModel")), n.isString(this.relatedModel) && (this.relatedModel = t.Relational.store.getObjectByName(this.relatedModel));
            if (!this.checkPreconditions()) return;
            !this.options.isAutoRelation && this.reverseRelation.type && this.reverseRelation.key && t.Relational.store.addReverseRelation(n.defaults({
                isAutoRelation: !0,
                model: this.relatedModel,
                relatedModel: this.model,
                reverseRelation: this.options
            }, this.reverseRelation));
            if (e) {
                var s = this.keySource;
                s !== this.key && typeof this.instance.get(this.key) == "object" && (s = this.key), this.setKeyContents(this.instance.get(s)), this.relatedCollection = t.Relational.store.getCollection(this.relatedModel), this.keySource !== this.key && delete this.instance.attributes[this.keySource], this.instance._relations[this.key] = this, this.initialize(i), this.options.autoFetch && this.instance.fetchRelated(this.key, n.isObject(this.options.autoFetch) ? this.options.autoFetch : {}), this.listenTo(this.instance, "destroy", this.destroy).listenTo(this.relatedCollection, "relational:add relational:change:id", this.tryAddRelated).listenTo(this.relatedCollection, "relational:remove", this.removeRelated)
            }
        }, t.Relation.extend = t.Model.extend, n.extend(t.Relation.prototype, t.Events, t.Semaphore, {
            options: {
                createModels: !0,
                includeInJSON: !0,
                isAutoRelation: !1,
                autoFetch: !1,
                parse: !1
            },
            instance: null,
            key: null,
            keyContents: null,
            relatedModel: null,
            relatedCollection: null,
            reverseRelation: null,
            related: null,
            checkPreconditions: function() {
                var e = this.instance,
                    r = this.key,
                    i = this.model,
                    s = this.relatedModel,
                    o = t.Relational.showWarnings && typeof console != "undefined";
                if (!i || !r || !s) return o && console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).", this, i, r, s), !1;
                if (i.prototype instanceof t.RelationalModel) {
                    if (s.prototype instanceof t.RelationalModel) {
                        if (this instanceof t.HasMany && this.reverseRelation.type === t.HasMany) return o && console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.", this), !1;
                        if (e && n.keys(e._relations).length) {
                            var u = n.find(e._relations, function(e) {
                                return e.key === r
                            }, this);
                            if (u) return o && console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.", this, r, e, u), !1
                        }
                        return !0
                    }
                    return o && console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).", this, s), !1
                }
                return o && console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).", this, e), !1
            },
            setRelated: function(e) {
                this.related = e, this.instance.attributes[this.key] = e
            },
            _isReverseRelation: function(e) {
                return e.instance instanceof this.relatedModel && this.reverseRelation.key === e.key && this.key === e.reverseRelation.key
            },
            getReverseRelations: function(e) {
                var t = [],
                    r = n.isUndefined(e) ? this.related && (this.related.models || [this.related]) : [e];
                return n.each(r || [], function(e) {
                    n.each(e.getRelations() || [], function(e) {
                        this._isReverseRelation(e) && t.push(e)
                    }, this)
                }, this), t
            },
            destroy: function() {
                this.stopListening(), this instanceof t.HasOne ? this.setRelated(null) : this instanceof t.HasMany && this.setRelated(this._prepareCollection()), n.each(this.getReverseRelations(), function(e) {
                    e.removeRelated(this.instance)
                }, this)
            }
        }), t.HasOne = t.Relation.extend({
            options: {
                reverseRelation: {
                    type: "HasMany"
                }
            },
            initialize: function(e) {
                this.listenTo(this.instance, "relational:change:" + this.key, this.onChange);
                var t = this.findRelated(e);
                this.setRelated(t), n.each(this.getReverseRelations(), function(t) {
                    t.addRelated(this.instance, e)
                }, this)
            },
            findRelated: function(e) {
                var t = null;
                e = n.defaults({
                    parse: this.options.parse
                }, e);
                if (this.keyContents instanceof this.relatedModel) t = this.keyContents;
                else if (this.keyContents || this.keyContents === 0) {
                    var r = n.defaults({
                        create: this.options.createModels
                    }, e);
                    t = this.relatedModel.findOrCreate(this.keyContents, r)
                }
                return t && (this.keyId = null), t
            },
            setKeyContents: function(e) {
                this.keyContents = e, this.keyId = t.Relational.store.resolveIdForItem(this.relatedModel, this.keyContents)
            },
            onChange: function(e, r, i) {
                if (this.isLocked()) return;
                this.acquire(), i = i ? n.clone(i) : {};
                var s = n.isUndefined(i.__related),
                    o = s ? this.related : i.__related;
                if (s) {
                    this.setKeyContents(r);
                    var u = this.findRelated(i);
                    this.setRelated(u)
                }
                o && this.related !== o && n.each(this.getReverseRelations(o), function(e) {
                    e.removeRelated(this.instance, null, i)
                }, this), n.each(this.getReverseRelations(), function(e) {
                    e.addRelated(this.instance, i)
                }, this);
                if (!i.silent && this.related !== o) {
                    var a = this;
                    this.changed = !0, t.Relational.eventQueue.add(function() {
                        a.instance.trigger("change:" + a.key, a.instance, a.related, i, !0), a.changed = !1
                    })
                }
                this.release()
            },
            tryAddRelated: function(e, t, n) {
                (this.keyId || this.keyId === 0) && e.id === this.keyId && (this.addRelated(e, n), this.keyId = null)
            },
            addRelated: function(e, t) {
                var r = this;
                e.queue(function() {
                    if (e !== r.related) {
                        var i = r.related || null;
                        r.setRelated(e), r.onChange(r.instance, e, n.defaults({
                            __related: i
                        }, t))
                    }
                })
            },
            removeRelated: function(e, t, r) {
                if (!this.related) return;
                if (e === this.related) {
                    var i = this.related || null;
                    this.setRelated(null), this.onChange(this.instance, e, n.defaults({
                        __related: i
                    }, r))
                }
            }
        }), t.HasMany = t.Relation.extend({
            collectionType: null,
            options: {
                reverseRelation: {
                    type: "HasOne"
                },
                collectionType: t.Collection,
                collectionKey: !0,
                collectionOptions: {}
            },
            initialize: function(e) {
                this.listenTo(this.instance, "relational:change:" + this.key, this.onChange), this.collectionType = this.options.collectionType, n.isFunction(this.collectionType) && this.collectionType !== t.Collection && !(this.collectionType.prototype instanceof t.Collection) && (this.collectionType = n.result(this, "collectionType")), n.isString(this.collectionType) && (this.collectionType = t.Relational.store.getObjectByName(this.collectionType));
                if (!(this.collectionType === t.Collection || this.collectionType.prototype instanceof t.Collection)) throw new Error("`collectionType` must inherit from Backbone.Collection");
                var r = this.findRelated(e);
                this.setRelated(r)
            },
            _prepareCollection: function(e) {
                this.related && this.stopListening(this.related);
                if (!e || !(e instanceof t.Collection)) {
                    var r = n.isFunction(this.options.collectionOptions) ? this.options.collectionOptions(this.instance) : this.options.collectionOptions;
                    e = new this.collectionType(null, r)
                }
                e.model = this.relatedModel;
                if (this.options.collectionKey) {
                    var i = this.options.collectionKey === !0 ? this.options.reverseRelation.key : this.options.collectionKey;
                    e[i] && e[i] !== this.instance ? t.Relational.showWarnings && typeof console != "undefined" && console.warn("Relation=%o; collectionKey=%s already exists on collection=%o", this, i, this.options.collectionKey) : i && (e[i] = this.instance)
                }
                return this.listenTo(e, "relational:add", this.handleAddition).listenTo(e, "relational:remove", this.handleRemoval).listenTo(e, "relational:reset", this.handleReset), e
            },
            findRelated: function(e) {
                var r = null;
                e = n.defaults({
                    parse: this.options.parse
                }, e);
                if (this.keyContents instanceof t.Collection) this._prepareCollection(this.keyContents), r = this.keyContents;
                else {
                    var i = [];
                    n.each(this.keyContents, function(t) {
                        if (t instanceof this.relatedModel) var r = t;
                        else r = this.relatedModel.findOrCreate(t, n.extend({
                            merge: !0
                        }, e, {
                            create: this.options.createModels
                        }));
                        r && i.push(r)
                    }, this), this.related instanceof t.Collection ? r = this.related : r = this._prepareCollection(), r.set(i, n.defaults({
                        merge: !1,
                        parse: !1
                    }, e))
                }
                return this.keyIds = n.difference(this.keyIds, n.pluck(r.models, "id")), r
            },
            setKeyContents: function(e) {
                this.keyContents = e instanceof t.Collection ? e : null, this.keyIds = [], !this.keyContents && (e || e === 0) && (this.keyContents = n.isArray(e) ? e : [e], n.each(this.keyContents, function(e) {
                    var n = t.Relational.store.resolveIdForItem(this.relatedModel, e);
                    (n || n === 0) && this.keyIds.push(n)
                }, this))
            },
            onChange: function(e, r, i) {
                i = i ? n.clone(i) : {}, this.setKeyContents(r), this.changed = !1;
                var s = this.findRelated(i);
                this.setRelated(s);
                if (!i.silent) {
                    var o = this;
                    t.Relational.eventQueue.add(function() {
                        o.changed && (o.instance.trigger("change:" + o.key, o.instance, o.related, i, !0), o.changed = !1)
                    })
                }
            },
            handleAddition: function(e, r, i) {
                i = i ? n.clone(i) : {}, this.changed = !0, n.each(this.getReverseRelations(e), function(e) {
                    e.addRelated(this.instance, i)
                }, this);
                var s = this;
                !i.silent && t.Relational.eventQueue.add(function() {
                    s.instance.trigger("add:" + s.key, e, s.related, i)
                })
            },
            handleRemoval: function(e, r, i) {
                i = i ? n.clone(i) : {}, this.changed = !0, n.each(this.getReverseRelations(e), function(e) {
                    e.removeRelated(this.instance, null, i)
                }, this);
                var s = this;
                !i.silent && t.Relational.eventQueue.add(function() {
                    s.instance.trigger("remove:" + s.key, e, s.related, i)
                })
            },
            handleReset: function(e, r) {
                var i = this;
                r = r ? n.clone(r) : {}, !r.silent && t.Relational.eventQueue.add(function() {
                    i.instance.trigger("reset:" + i.key, i.related, r)
                })
            },
            tryAddRelated: function(e, t, r) {
                var i = n.contains(this.keyIds, e.id);
                i && (this.addRelated(e, r), this.keyIds = n.without(this.keyIds, e.id))
            },
            addRelated: function(e, t) {
                var r = this;
                e.queue(function() {
                    r.related && !r.related.get(e) && r.related.add(e, n.defaults({
                        parse: !1
                    }, t))
                })
            },
            removeRelated: function(e, t, n) {
                this.related.get(e) && this.related.remove(e, n)
            }
        }), t.RelationalModel = t.Model.extend({
            relations: null,
            _relations: null,
            _isInitialized: !1,
            _deferProcessing: !1,
            _queue: null,
            _attributeChangeFired: !1,
            subModelTypeAttribute: "type",
            subModelTypes: null,
            constructor: function(e, r) {
                if (r && r.collection) {
                    var i = this,
                        s = this.collection = r.collection;
                    delete r.collection, this._deferProcessing = !0;
                    var o = function(e) {
                        e === i && (i._deferProcessing = !1, i.processQueue(), s.off("relational:add", o))
                    };
                    s.on("relational:add", o), n.defer(function() {
                        o(i)
                    })
                }
                t.Relational.store.processOrphanRelations(), t.Relational.store.listenTo(this, "relational:unregister", t.Relational.store.unregister), this._queue = new t.BlockingQueue, this._queue.block(), t.Relational.eventQueue.block();
                try {
                    t.Model.apply(this, arguments)
                } finally {
                    t.Relational.eventQueue.unblock()
                }
            },
            trigger: function(e) {
                if (e.length > 5 && e.indexOf("change") === 0) {
                    var n = this,
                        r = arguments;
                    t.Relational.eventQueue.isLocked() ? t.Relational.eventQueue.add(function() {
                        var i = !0;
                        if (e === "change") i = n.hasChanged() || n._attributeChangeFired, n._attributeChangeFired = !1;
                        else {
                            var s = e.slice(7),
                                o = n.getRelation(s);
                            o ? (i = r[4] === !0, i ? n.changed[s] = r[2] : o.changed || delete n.changed[s]) : i && (n._attributeChangeFired = !0)
                        }
                        i && t.Model.prototype.trigger.apply(n, r)
                    }) : t.Model.prototype.trigger.apply(n, r)
                } else e === "destroy" ? (t.Model.prototype.trigger.apply(this, arguments), t.Relational.store.unregister(this)) : t.Model.prototype.trigger.apply(this, arguments);
                return this
            },
            initializeRelations: function(e) {
                this.acquire(), this._relations = {}, n.each(this.relations || [], function(n) {
                    t.Relational.store.initializeRelation(this, n, e)
                }, this), this._isInitialized = !0, this.release(), this.processQueue()
            },
            updateRelations: function(e, t) {
                this._isInitialized && !this.isLocked() && n.each(this._relations, function(n) {
                    if (!e || n.keySource in e || n.key in e) {
                        var r = this.attributes[n.keySource] || this.attributes[n.key],
                            i = e && (e[n.keySource] || e[n.key]);
                        (n.related !== r || r === null && i === null) && this.trigger("relational:change:" + n.key, this, r, t || {})
                    }
                    n.keySource !== n.key && delete this.attributes[n.keySource]
                }, this)
            },
            queue: function(e) {
                this._queue.add(e)
            },
            processQueue: function() {
                this._isInitialized && !this._deferProcessing && this._queue.isBlocked() && this._queue.unblock()
            },
            getRelation: function(e) {
                return this._relations[e]
            },
            getRelations: function() {
                return n.values(this._relations)
            },
            fetchRelated: function(e, r, i) {
                r = n.extend({
                    update: !0,
                    remove: !1
                }, r);
                var s, o, u = [],
                    a = this.getRelation(e),
                    f = a && (a.keyIds && a.keyIds.slice(0) || (a.keyId || a.keyId === 0 ? [a.keyId] : []));
                i && (s = a.related instanceof t.Collection ? a.related.models : [a.related], n.each(s, function(e) {
                    (e.id || e.id === 0) && f.push(e.id)
                }));
                if (f && f.length) {
                    var l = [];
                    s = n.map(f, function(e) {
                        var t = a.relatedModel.findModel(e);
                        if (!t) {
                            var n = {};
                            n[a.relatedModel.prototype.idAttribute] = e, t = a.relatedModel.findOrCreate(n, r), l.push(t)
                        }
                        return t
                    }, this), a.related instanceof t.Collection && n.isFunction(a.related.url) && (o = a.related.url(s));
                    if (o && o !== a.related.url()) {
                        var c = n.defaults({
                            error: function() {
                                var e = arguments;
                                n.each(l, function(t) {
                                    t.trigger("destroy", t, t.collection, r), r.error && r.error.apply(t, e)
                                })
                            },
                            url: o
                        }, r);
                        u = [a.related.fetch(c)]
                    } else u = n.map(s, function(e) {
                        var t = n.defaults({
                            error: function() {
                                n.contains(l, e) && (e.trigger("destroy", e, e.collection, r), r.error && r.error.apply(e, arguments))
                            }
                        }, r);
                        return e.fetch(t)
                    }, this)
                }
                return u
            },
            get: function(e) {
                var r = t.Model.prototype.get.call(this, e);
                if (!this.dotNotation || e.indexOf(".") === -1) return r;
                var i = e.split("."),
                    s = n.reduce(i, function(e, r) {
                        if (n.isNull(e) || n.isUndefined(e)) return undefined;
                        if (e instanceof t.Model) return t.Model.prototype.get.call(e, r);
                        if (e instanceof t.Collection) return t.Collection.prototype.at.call(e, r);
                        throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: " + e + ", currentSplit: " + r)
                    }, this);
                if (r !== undefined && s !== undefined) throw new Error("Ambiguous result for '" + e + "'. direct result: " + r + ", dotNotation: " + s);
                return r || s
            },
            set: function(e, r, i) {
                t.Relational.eventQueue.block();
                var s;
                n.isObject(e) || e == null ? (s = e, i = r) : (s = {}, s[e] = r);
                try {
                    var o = this.id,
                        u = s && this.idAttribute in s && s[this.idAttribute];
                    t.Relational.store.checkId(this, u);
                    var a = t.Model.prototype.set.apply(this, arguments);
                    !this._isInitialized && !this.isLocked() ? (this.constructor.initializeModelHierarchy(), (u || u === 0) && t.Relational.store.register(this), this.initializeRelations(i)) : u && u !== o && t.Relational.store.update(this), s && this.updateRelations(s, i)
                } finally {
                    t.Relational.eventQueue.unblock()
                }
                return a
            },
            clone: function() {
                var e = n.clone(this.attributes);
                return n.isUndefined(e[this.idAttribute]) || (e[this.idAttribute] = null), n.each(this.getRelations(), function(t) {
                    delete e[t.key]
                }), new this.constructor(e)
            },
            toJSON: function(e) {
                if (this.isLocked()) return this.id;
                this.acquire();
                var r = t.Model.prototype.toJSON.call(this, e);
                return this.constructor._superModel && !(this.constructor._subModelTypeAttribute in r) && (r[this.constructor._subModelTypeAttribute] = this.constructor._subModelTypeValue), n.each(this._relations, function(i) {
                    var s = r[i.key],
                        o = i.options.includeInJSON,
                        u = null;
                    o === !0 ? s && n.isFunction(s.toJSON) && (u = s.toJSON(e)) : n.isString(o) ? (s instanceof t.Collection ? u = s.pluck(o) : s instanceof t.Model && (u = s.get(o)), o === i.relatedModel.prototype.idAttribute && (i instanceof t.HasMany ? u = u.concat(i.keyIds) : i instanceof t.HasOne && (u = u || i.keyId, !u && !n.isObject(i.keyContents) && (u = i.keyContents || null)))) : n.isArray(o) ? s instanceof t.Collection ? (u = [], s.each(function(e) {
                        var t = {};
                        n.each(o, function(n) {
                            t[n] = e.get(n)
                        }), u.push(t)
                    })) : s instanceof t.Model && (u = {}, n.each(o, function(e) {
                        u[e] = s.get(e)
                    })) : delete r[i.key], o && (r[i.keyDestination] = u), i.keyDestination !== i.key && delete r[i.key]
                }), this.release(), r
            }
        }, {
            setup: function(e) {
                return this.prototype.relations = (this.prototype.relations || []).slice(0), this._subModels = {}, this._superModel = null, this.prototype.hasOwnProperty("subModelTypes") ? t.Relational.store.addSubModels(this.prototype.subModelTypes, this) : this.prototype.subModelTypes = null, n.each(this.prototype.relations || [], function(e) {
                    e.model || (e.model = this);
                    if (e.reverseRelation && e.model === this) {
                        var r = !0;
                        if (n.isString(e.relatedModel)) {
                            var i = t.Relational.store.getObjectByName(e.relatedModel);
                            r = i && i.prototype instanceof t.RelationalModel
                        }
                        r ? t.Relational.store.initializeRelation(null, e) : n.isString(e.relatedModel) && t.Relational.store.addOrphanRelation(e)
                    }
                }, this), this
            },
            build: function(e, t) {
                this.initializeModelHierarchy();
                var n = this._findSubModelType(this, e) || this;
                return new n(e, t)
            },
            _findSubModelType: function(e, t) {
                if (e._subModels && e.prototype.subModelTypeAttribute in t) {
                    var n = t[e.prototype.subModelTypeAttribute],
                        r = e._subModels[n];
                    if (r) return r;
                    for (n in e._subModels) {
                        r = this._findSubModelType(e._subModels[n], t);
                        if (r) return r
                    }
                }
                return null
            },
            initializeModelHierarchy: function() {
                this.inheritRelations();
                if (this.prototype.subModelTypes) {
                    var e = n.keys(this._subModels),
                        r = n.omit(this.prototype.subModelTypes, e);
                    n.each(r, function(e) {
                        var n = t.Relational.store.getObjectByName(e);
                        n && n.initializeModelHierarchy()
                    })
                }
            },
            inheritRelations: function() {
                if (!n.isUndefined(this._superModel) && !n.isNull(this._superModel)) return;
                t.Relational.store.setupSuperModel(this);
                if (this._superModel) {
                    this._superModel.inheritRelations();
                    if (this._superModel.prototype.relations) {
                        var e = n.filter(this._superModel.prototype.relations || [], function(e) {
                            return !n.any(this.prototype.relations || [], function(t) {
                                return e.relatedModel === t.relatedModel && e.key === t.key
                            }, this)
                        }, this);
                        this.prototype.relations = e.concat(this.prototype.relations)
                    }
                } else this._superModel = !1
            },
            findOrCreate: function(e, t) {
                t || (t = {});
                var r = n.isObject(e) && t.parse && this.prototype.parse ? this.prototype.parse(n.clone(e)) : e,
                    i = this.findModel(r);
                return n.isObject(e) && (i && t.merge !== !1 ? (delete t.collection, delete t.url, i.set(r, t)) : !i && t.create !== !1 && (i = this.build(r, n.defaults({
                    parse: !1
                }, t)))), i
            },
            find: function(e, t) {
                return t || (t = {}), t.create = !1, this.findOrCreate(e, t)
            },
            findModel: function(e) {
                return t.Relational.store.find(this, e)
            }
        }), n.extend(t.RelationalModel.prototype, t.Semaphore), t.Collection.prototype.__prepareModel = t.Collection.prototype._prepareModel, t.Collection.prototype._prepareModel = function(e, r) {
            var i;
            return e instanceof t.Model ? (e.collection || (e.collection = this), i = e) : (r = r ? n.clone(r) : {}, r.collection = this, typeof this.model.findOrCreate != "undefined" ? i = this.model.findOrCreate(e, r) : i = new this.model(e, r), i && i.validationError && (this.trigger("invalid", this, e, r), i = !1)), i
        };
        var r = t.Collection.prototype.__set = t.Collection.prototype.set;
        t.Collection.prototype.set = function(e, i) {
            if (this.model.prototype instanceof t.RelationalModel) {
                i && i.parse && (e = this.parse(e, i));
                var s = !n.isArray(e),
                    o = [],
                    u = [];
                e = s ? e ? [e] : [] : n.clone(e), n.each(e, function(e) {
                    e instanceof t.Model || (e = t.Collection.prototype._prepareModel.call(this, e, i)), e && (u.push(e), !this.get(e) && !this.get(e.cid) ? o.push(e) : e.id != null && (this._byId[e.id] = e))
                }, this), u = s ? u.length ? u[0] : null : u;
                var a = r.call(this, u, n.defaults({
                    parse: !1
                }, i));
                return n.each(o, function(e) {
                    (this.get(e) || this.get(e.cid)) && this.trigger("relational:add", e, this, i)
                }, this), a
            }
            return r.apply(this, arguments)
        };
        var i = t.Collection.prototype.__remove = t.Collection.prototype.remove;
        t.Collection.prototype.remove = function(e, r) {
            if (this.model.prototype instanceof t.RelationalModel) {
                var s = !n.isArray(e),
                    o = [];
                e = s ? e ? [e] : [] : n.clone(e), r || (r = {}), n.each(e, function(e) {
                    e = this.get(e) || e && this.get(e.cid), e && o.push(e)
                }, this);
                var u = i.call(this, s ? o.length ? o[0] : null : o, r);
                return n.each(o, function(e) {
                    this.trigger("relational:remove", e, this, r)
                }, this), u
            }
            return i.apply(this, arguments)
        };
        var s = t.Collection.prototype.__reset = t.Collection.prototype.reset;
        t.Collection.prototype.reset = function(e, r) {
            r = n.extend({
                merge: !0
            }, r);
            var i = s.call(this, e, r);
            return this.model.prototype instanceof t.RelationalModel && this.trigger("relational:reset", this, r), i
        };
        var o = t.Collection.prototype.__sort = t.Collection.prototype.sort;
        t.Collection.prototype.sort = function(e) {
            var n = o.call(this, e);
            return this.model.prototype instanceof t.RelationalModel && this.trigger("relational:reset", this, e), n
        };
        var u = t.Collection.prototype.__trigger = t.Collection.prototype.trigger;
        t.Collection.prototype.trigger = function(e) {
            if (this.model.prototype instanceof t.RelationalModel) {
                if (e === "add" || e === "remove" || e === "reset" || e === "sort") {
                    var r = this,
                        i = arguments;
                    n.isObject(i[3]) && (i = n.toArray(i), i[3] = n.clone(i[3])), t.Relational.eventQueue.add(function() {
                        u.apply(r, i)
                    })
                } else u.apply(this, arguments);
                return this
            }
            return u.apply(this, arguments)
        }, t.RelationalModel.extend = function(e, n) {
            var r = t.Model.extend.apply(this, arguments);
            return r.setup(this), r
        }
    }),
    function(e) {
        typeof exports == "object" ? module.exports = e(require("backbone"), require("underscore")) : typeof define == "function" && define.amd && define("backboneValidation", ["backbone", "underscore"], e)
    }(function(e, t) {
        return e.Validation = function(t) {
            "use strict";
            var n = {
                    forceUpdate: !1,
                    selector: "name",
                    labelFormatter: "sentenceCase",
                    valid: Function.prototype,
                    invalid: Function.prototype
                },
                r = {
                    formatLabel: function(e, t) {
                        return f[n.labelFormatter](e, t)
                    },
                    format: function() {
                        var e = Array.prototype.slice.call(arguments),
                            t = e.shift();
                        return t.replace(/\{(\d+)\}/g, function(t, n) {
                            return typeof e[n] != "undefined" ? e[n] : t
                        })
                    }
                },
                i = function(n, r, s) {
                    return r = r || {}, s = s || "", t.each(n, function(t, o) {
                        n.hasOwnProperty(o) && (!t || typeof t != "object" || t instanceof Array || t instanceof Date || t instanceof RegExp || t instanceof e.Model || t instanceof e.Collection ? r[s + o] = t : i(t, r, s + o + "."))
                    }), r
                },
                s = function() {
                    var e = function(e) {
                            return t.reduce(t.keys(t.result(e, "validation") || {}), function(e, t) {
                                return e[t] = void 0, e
                            }, {})
                        },
                        s = function(e, n) {
                            var r = e.validation ? t.result(e, "validation")[n] || {} : {};
                            if (t.isFunction(r) || t.isString(r)) r = {
                                fn: r
                            };
                            return t.isArray(r) || (r = [r]), t.reduce(r, function(e, n) {
                                return t.each(t.without(t.keys(n), "msg"), function(t) {
                                    e.push({
                                        fn: l[t],
                                        val: n[t],
                                        msg: n.msg
                                    })
                                }), e
                            }, [])
                        },
                        u = function(e, n, i, o) {
                            return t.reduce(s(e, n), function(s, u) {
                                var a = t.extend({}, r, l),
                                    f = u.fn.call(a, i, n, u.val, e, o);
                                return f === !1 || s === !1 ? !1 : f && !s ? t.result(u, "msg") || f : s
                            }, "")
                        },
                        a = function(e, n) {
                            var r, s = {},
                                o = !0,
                                a = t.clone(n),
                                f = i(n);
                            return t.each(f, function(t, n) {
                                r = u(e, n, t, a), r && (s[n] = r, o = !1)
                            }), {
                                invalidAttrs: s,
                                isValid: o
                            }
                        },
                        f = function(n, r) {
                            return {
                                preValidate: function(e, n) {
                                    var r = this,
                                        i = {},
                                        s;
                                    return t.isObject(e) ? (t.each(e, function(e, t) {
                                        s = r.preValidate(t, e), s && (i[t] = s)
                                    }), t.isEmpty(i) ? undefined : i) : u(this, e, n, t.extend({}, this.attributes))
                                },
                                isValid: function(e) {
                                    var n = i(this.attributes);
                                    return t.isString(e) ? !u(this, e, n[e], t.extend({}, this.attributes)) : t.isArray(e) ? t.reduce(e, function(e, r) {
                                        return e && !u(this, r, n[r], t.extend({}, this.attributes))
                                    }, !0, this) : (e === !0 && this.validate(), this.validation ? this._isValid : !0)
                                },
                                validate: function(s, o) {
                                    var u = this,
                                        f = !s,
                                        l = t.extend({}, r, o),
                                        c = e(u),
                                        h = t.extend({}, c, u.attributes, s),
                                        p = i(s || h),
                                        d = a(u, h);
                                    u._isValid = d.isValid, t.each(c, function(e, t) {
                                        var r = d.invalidAttrs.hasOwnProperty(t);
                                        r || l.valid(n, t, l.selector)
                                    }), t.each(c, function(e, t) {
                                        var r = d.invalidAttrs.hasOwnProperty(t),
                                            i = p.hasOwnProperty(t);
                                        r && (i || f) && l.invalid(n, t, d.invalidAttrs[t], l.selector)
                                    }), t.defer(function() {
                                        u.trigger("validated", u._isValid, u, d.invalidAttrs), u.trigger("validated:" + (u._isValid ? "valid" : "invalid"), u, d.invalidAttrs)
                                    });
                                    if (!l.forceUpdate && t.intersection(t.keys(d.invalidAttrs), t.keys(p)).length > 0) return d.invalidAttrs
                                }
                            }
                        },
                        c = function(e, n, r) {
                            t.extend(n, f(e, r))
                        },
                        h = function(e) {
                            delete e.validate, delete e.preValidate, delete e.isValid
                        },
                        p = function(e) {
                            c(this.view, e, this.options)
                        },
                        d = function(e) {
                            h(e)
                        };
                    return {
                        version: "0.9.1",
                        configure: function(e) {
                            t.extend(n, e)
                        },
                        bind: function(e, r) {
                            r = t.extend({}, n, o, r);
                            var i = r.model || e.model,
                                s = r.collection || e.collection;
                            if (typeof i == "undefined" && typeof s == "undefined") throw "Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";
                            i ? c(e, i, r) : s && (s.each(function(t) {
                                c(e, t, r)
                            }), s.bind("add", p, {
                                view: e,
                                options: r
                            }), s.bind("remove", d))
                        },
                        unbind: function(e, n) {
                            n = t.extend({}, n);
                            var r = n.model || e.model,
                                i = n.collection || e.collection;
                            r ? h(r) : i && (i.each(function(e) {
                                h(e)
                            }), i.unbind("add", p), i.unbind("remove", d))
                        },
                        mixin: f(null, n)
                    }
                }(),
                o = s.callbacks = {
                    valid: function(e, t, n) {
                        e.$("[" + n + '~="' + t + '"]').removeClass("invalid").removeAttr("data-error")
                    },
                    invalid: function(e, t, n, r) {
                        e.$("[" + r + '~="' + t + '"]').addClass("invalid").attr("data-error", n)
                    }
                },
                u = s.patterns = {
                    digits: /^\d+$/,
                    number: /^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,
                    email: /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,
                    url: /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i
                },
                a = s.messages = {
                    required: "{0} is required",
                    acceptance: "{0} must be accepted",
                    min: "{0} must be greater than or equal to {1}",
                    max: "{0} must be less than or equal to {1}",
                    range: "{0} must be between {1} and {2}",
                    length: "{0} must be {1} characters",
                    minLength: "{0} must be at least {1} characters",
                    maxLength: "{0} must be at most {1} characters",
                    rangeLength: "{0} must be between {1} and {2} characters",
                    oneOf: "{0} must be one of: {1}",
                    equalTo: "{0} must be the same as {1}",
                    digits: "{0} must only contain digits",
                    number: "{0} must be a number",
                    email: "{0} must be a valid email",
                    url: "{0} must be a valid url",
                    inlinePattern: "{0} is invalid"
                },
                f = s.labelFormatters = {
                    none: function(e) {
                        return e
                    },
                    sentenceCase: function(e) {
                        return e.replace(/(?:^\w|[A-Z]|\b\w)/g, function(e, t) {
                            return t === 0 ? e.toUpperCase() : " " + e.toLowerCase()
                        }).replace(/_/g, " ")
                    },
                    label: function(e, t) {
                        return t.labels && t.labels[e] || f.sentenceCase(e, t)
                    }
                },
                l = s.validators = function() {
                    var e = String.prototype.trim ? function(e) {
                            return e === null ? "" : String.prototype.trim.call(e)
                        } : function(e) {
                            var t = /^\s+/,
                                n = /\s+$/;
                            return e === null ? "" : e.toString().replace(t, "").replace(n, "")
                        },
                        n = function(e) {
                            return t.isNumber(e) || t.isString(e) && e.match(u.number)
                        },
                        r = function(n) {
                            return !(t.isNull(n) || t.isUndefined(n) || t.isString(n) && e(n) === "" || t.isArray(n) && t.isEmpty(n))
                        };
                    return {
                        fn: function(e, n, r, i, s) {
                            return t.isString(r) && (r = i[r]), r.call(i, e, n, s)
                        },
                        required: function(e, n, i, s, o) {
                            var u = t.isFunction(i) ? i.call(s, e, n, o) : i;
                            if (!u && !r(e)) return !1;
                            if (u && !r(e)) return this.format(a.required, this.formatLabel(n, s))
                        },
                        acceptance: function(e, n, r, i) {
                            if (e !== "true" && (!t.isBoolean(e) || e === !1)) return this.format(a.acceptance, this.formatLabel(n, i))
                        },
                        min: function(e, t, r, i) {
                            if (!n(e) || e < r) return this.format(a.min, this.formatLabel(t, i), r)
                        },
                        max: function(e, t, r, i) {
                            if (!n(e) || e > r) return this.format(a.max, this.formatLabel(t, i), r)
                        },
                        range: function(e, t, r, i) {
                            if (!n(e) || e < r[0] || e > r[1]) return this.format(a.range, this.formatLabel(t, i), r[0], r[1])
                        },
                        length: function(e, n, r, i) {
                            if (!t.isString(e) || e.length !== r) return this.format(a.length, this.formatLabel(n, i), r)
                        },
                        minLength: function(e, n, r, i) {
                            if (!t.isString(e) || e.length < r) return this.format(a.minLength, this.formatLabel(n, i), r)
                        },
                        maxLength: function(e, n, r, i) {
                            if (!t.isString(e) || e.length > r) return this.format(a.maxLength, this.formatLabel(n, i), r)
                        },
                        rangeLength: function(e, n, r, i) {
                            if (!t.isString(e) || e.length < r[0] || e.length > r[1]) return this.format(a.rangeLength, this.formatLabel(n, i), r[0], r[1])
                        },
                        oneOf: function(e, n, r, i) {
                            if (!t.include(r, e)) return this.format(a.oneOf, this.formatLabel(n, i), r.join(", "))
                        },
                        equalTo: function(e, t, n, r, i) {
                            if (e !== i[n]) return this.format(a.equalTo, this.formatLabel(t, r), this.formatLabel(n, r))
                        },
                        pattern: function(e, t, n, i) {
                            if (!r(e) || !e.toString().match(u[n] || n)) return this.format(a[n] || a.inlinePattern, this.formatLabel(t, i), n)
                        }
                    }
                }();
            return t.each(l, function(e, n) {
                l[n] = t.bind(l[n], t.extend({}, r, l))
            }), s
        }(t), e.Validation
    }), define("components/common/scripts/models/baseModels", ["jquery", "underscore", "backbone", "components/common/scripts/models/modelMixins", "backboneRelational", "backboneValidation"], function(e, t, n, r) {
        var i = {
                initialize: function() {
                    this.onInitialize && this.onInitialize.apply(this, arguments)
                },
                endpoint: function() {
                    throw new Error("endpoint must be implemented or given a value")
                },
                getEndpoint: function() {
                    var e = t.isFunction(this.endpoint) ? this.endpoint() : this.endpoint;
                    return this.isNew() || this.isSingularResource ? e : e + "/" + encodeURIComponent(this.id)
                },
                toJSON: function(e) {
                    var r = {};
                    return this.isRelationalModel() ? r = n.RelationalModel.prototype.toJSON.call(this, e) : r = n.Model.prototype.toJSON.call(this, e), this.relatedModels && this.relatedModels.length && t.each(this.relatedModels, function(e) {
                        r.hasOwnProperty(e) && delete r[e]
                    }, this), r
                },
                sync: function(e, t, n) {
                    return n.contentType = "application/json; charset=utf-8", r.sync.call(this, e, t, n)
                },
                isRelationalModel: function() {
                    return this instanceof n.RelationalModel
                },
                restoreDefaults: function() {
                    var e = t.result(this, "defaults", {});
                    return arguments.length ? this.set(t.pick(e, Array.prototype.slice.call(arguments))) : this.set(e)
                },
                labels: {},
                getClass: function() {
                    return e.browser.msie ? this.constructor : this.__proto__.constructor
                },
                getSuperClass: function() {
                    return this.getClass().__super__
                }
            },
            s = {};
        return i = t.extend({}, r, n.Validation.mixin, i), {
            Model: n.Model.extend(i, s),
            RelationalModel: n.RelationalModel.extend(i, s)
        }
    }), define("components/common/scripts/constants/iraConstants", [], function() {
        return {
            MIN_WITHDRAWAL_AGE: 59.5
        }
    }), define("components/common/scripts/models/appData", ["jquery", "underscore", "components/common/scripts/models/baseModels", "components/common/scripts/util/formatter", "components/common/scripts/constants/iraConstants"], function(e, t, n, r, i) {
        var s, o, u = {
                url:"/client/api/appData",
                distributionsForSelect: function(e) {
                    var n = e.age() < i.MIN_WITHDRAWAL_AGE,
                        r = [];
                    return t.each(this.get("distributionTypes"), function(e) {
                        (e.value === "NORM" && !n || e.value === "EARL" && n || e.value !== "NORM" && e.value !== "EARL") && r.push(e)
                    }), r.push({
                        value: "ROLL",
                        label: "Rollover to another institution"
                    }), r
                },
                contributionsForSelect: function(e, n) {
                    var i = t.clone(this.get("contributionTypes"));
                    return t.each(i, function(n, s) {
                        if (s !== "ROLL") {
                            var o = t.clone(i[s]);
                            i[s] = o, o.label += " (" + r.money(e.remainingContributionAmount(s)) + " remaining)"
                        }
                    }, this), n && delete i.ROLL, i
                },
                defaultContributionYear: function() {
                    return Date.now().getFullYear().toString()
                },
                isLocal: function() {
                    return this.get("environment") === "local"
                }
            },
            a = {
                loadInstance: function() {
                    return o ? o.promise() : (o = e.Deferred(), s = new f, s.fetch({
                        skipErrorAlert: !0,
                        success: function() {
                            o.resolve(s)
                        },
                        error: function() {
                            o.reject()
                        }
                    }), o.promise())
                },
                getInstance: function() {
                    return s
                }
            },
            f = n.Model.extend(u, a);
        return f
    }), define("components/common/scripts/services/domainService", ["components/common/scripts/models/appData"], function(e) {
        function t(e) {
            this._searchParts = {}, e && (e.substr(0, 1) === "?" && (e = e.substr(1)), this._searchParts = e.split("&").reduce(function(e, t) {
                if (!t) return e;
                var n = t.split("="),
                    r = n[0],
                    i = n.slice(1).join("=");
                return e[r] ? e[r].push(i) : e[r] = [i], e
            }, {}))
        }
        t.prototype = {
            get: function(e) {
                return this._searchParts[e] ? this._searchParts[e][0] : null
            },
            getAll: function(e) {
                return this._searchParts[e] ? this._searchParts[e].slice() : []
            },
            has: function(e) {
                return this._searchParts[e] !== undefined
            }
        };
        var n = function(e) {
                var n = document.createElement("a");
                e && (n.href = e);
                var r = ["href", "origin", "protocol", "username", "password", "host", "hostname", "port", "pathname", "search", "searchParams", "hash"].reduce(function(e, t) {
                    return e[t] = n[t], e
                }, {});
                return r.searchParams || (r.searchParams = new t(r.search)), r
            },
            r = function(e) {
                var t = n(e),
                    r = t.hostname.match(/\.betasmartz\..+$/),
                    i = r ? r[0] : ".betasmartz.com";
                return i
            };
        return {
            brochureHost: function() {
                return e.getInstance().get("webHost")
            },
            appHost: function() {
                return e.getInstance().get("appHost")
            },
            onboardingHost: function() {
                return e.getInstance().get("onboardingHost")
            },
            cdnHost: function() {
                return "https://d9l6g2vjiqrcr.cloudfront.net"
            },
            getBaseDomain: r,
            getBaseSupportUrl: function() {
                return "http://www.betasmartz.com"
            },
            getNotificationsUrl: function() {
                return e.getInstance().get("notificationsHost")
            },
            getCustomerAgreementUrl: function() {
                return this.brochureHost() + "/customeragreement"
            },
            getMobileSignupUrl: function() {
                return this.appHost() + "/mobile-signup.jsp"
            },
            getResponsiveSignupUrl: function() {
                return this.onboardingHost() + "/signup.html"
            }
        }
    }), define("components/common/scripts/modules/editable", ["underscore", "backbone"], function(e, t) {
        var n = function(n) {
            function l(t) {
                var n = 13,
                    r = 27;
                e.contains([n, r], t.keyCode) && c(t)
            }

            function c(e) {
                var t = a.val();
                e && e.stopImmediatePropagation();
                try {
                    s.removeClass("editable-invalid");
                    if (typeof n.validate != "function" || n.validate.call(n.view, t)) h(t), u.data("current", t), r.trigger("save", t, n), p()
                } catch (i) {
                    s.addClass("editable-invalid"), r.trigger("error", i, n)
                }
            }

            function h(e) {
                var t = n.formatter.out(e, r.originalVal);
                delete r.originalVal, u.hide(), o.show().text(t)
            }

            function p() {
                a.off("keyup")
            }
            e.extend(this, t.Events);
            var r = this,
                i = n.view ? n.view.$ : $,
                s = i(n.section),
                o = s.find("[display]"),
                u = s.find("[editable]"),
                a = u.is(":input") ? u : u.find("input"),
                f = {
                    formatter: {
                        "in": function(e) {
                            return e
                        },
                        out: function(e) {
                            return e
                        }
                    }
                };
            e.defaults(n, f), n.initial && u.data("current", n.initial.apply(n.view)), this.edit = function(e) {
                e || (e = this.currentValue());
                var t = n.formatter.in(e);
                r.originalVal = t, o.hide(), u.show(), a.val(t).focus().select(), a.on("keyup", l), a.on("blur", c), a.on("click", function() {
                    a.select()
                })
            }, this.currentValue = function(e) {
                return e !== undefined ? (h(e), u.data("current", e)) : u.data("current")
            }, this.reset = function() {
                this.currentValue(n.initial.apply(n.view))
            }
        };
        return n
    }), define("components/common/scripts/viewHelpers/customerSupport", ["underscore"], function(e) {
        var t = "support@betaSmartz.com",
            n = "support@betaSmartz.com",
            r = "1800-888-8888",
            i = "1800-888-8888",
            s = "1800-888-8888";
        return {
            getSupportNumber: function(t) {
                var n;
                return "BMT" in window && BMT.user && BMT.user.isAdvised() && (n = i), n = r, e.isString(t) && (n = n.replace(/-/g, t)), n
            },
            getSuspendedSupportNumber: function() {
                return s
            },
            getAdvisedSupportNumber: function() {
                return i
            },
            getSupportEmail: function() {
                return "BMT" in window && BMT.user && BMT.user.is("advisorSession") ? n : t
            }
        }
    }),
    function(e) {
        define("jqueryCaret", ["jquery", "jqueryBrowserMobile"], function() {
            return function() {
                (function(e, t, n, r) {
                    e.fn.caret = function(i, s) {
                        var o, u, a = this[0],
                            f = e.browser.msie;
                        if (typeof i == "object" && typeof i.start == "number" && typeof i.end == "number") o = i.start, u = i.end;
                        else if (typeof i == "number" && typeof s == "number") o = i, u = s;
                        else if (typeof i == "string")(o = a.value.indexOf(i)) > -1 ? u = o + i[t] : o = null;
                        else if (Object.prototype.toString.call(i) === "[object RegExp]") {
                            var l = i.exec(a.value);
                            l != null && (o = l.index, u = o + l[0][t])
                        }
                        if (typeof o != "undefined") {
                            if (f) {
                                var c = this[0].createTextRange();
                                c.collapse(!0), c.moveStart("character", o), c.moveEnd("character", u - o), c.select()
                            } else this[0].selectionStart = o, this[0].selectionEnd = u;
                            return this[0].focus(), this
                        }
                        if (f) {
                            var h = document.selection;
                            if (this[0].tagName.toLowerCase() != "textarea") {
                                var p = this.val(),
                                    d = h[n]()[r]();
                                d.moveEnd("character", p[t]);
                                var v = d.text == "" ? p[t] : p.lastIndexOf(d.text);
                                d = h[n]()[r](), d.moveStart("character", -p[t]);
                                var m = d.text[t]
                            } else {
                                var d = h[n](),
                                    g = d[r]();
                                g.moveToElementText(this[0]), g.setEndPoint("EndToEnd", d);
                                var v = g.text[t] - d.text[t],
                                    m = v + d.text[t]
                            }
                        } else var v = a.selectionStart,
                            m = a.selectionEnd;
                        var y = a.value.substring(v, m);
                        return {
                            start: v,
                            end: m,
                            text: y,
                            replace: function(e) {
                                return a.value.substring(0, v) + e + a.value.substring(m, a.value[t])
                            }
                        }
                    }
                })(jQuery, "length", "createRange", "duplicate")
            }.apply(e, arguments)
        })
    }(this), define("components/common/scripts/views/baseViews", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "backbone", "marionette", "hbs!components/common/scripts/templates/blockSpinner", "components/common/scripts/util/formatter", "components/common/scripts/util/moneyHandler", "components/common/scripts/modules/conversation", "components/common/scripts/services/domainService", "components/common/scripts/modules/editable", "components/common/scripts/viewHelpers/customerSupport", "jqueryCaret"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        function g(e) {
            return e = e || "", e.replace(/^\//, "", e)
        }

        function y(y) {
            var b = y.extend({
                template: function() {
                    return ""
                },
                globalEvents: {
                    "click .open-close": "openCloseClick",
                    "click .btn-group .dropdown-menu li a": "dropdownClick",
                    "touchstart .btn-group .dropdown-menu li a[data-value]": "dropdownClick",
                    "keydown input[money-input]": "formatDecimal",
                    "keydown input[integer-input]": "formatInteger"
                },
                globalTemplateHelpers: {
                    partial: function(e, n) {
                        var r = t.extend({}, this, n || {});
                        return i.Renderer.render(e, r, this.self)
                    },
                    build_dropdown_menu: function(e, r, i) {
                        r = r || {}, i = i || {}, r["class"] = "btn-group " + (r["class"] || "");
                        var s = r.style,
                            o = r.name,
                            u = r.value,
                            a = 0,
                            f, l, c = 0,
                            h = t.map(e, function(r, i) {
                                var s = !1,
                                    o = !1,
                                    h = "",
                                    p = !1,
                                    d;
                                t.isArray(e) ? t.isObject(r) ? (s = r.divider, o = !!r.action, i = r.value, p = r.children, d = r.className, r = r.label) : i = r : t.isObject(r) && (s = r.divider, o = !!r.action, p = r.children, d = r.className, r = r.label), l = l || {
                                    label: r,
                                    value: i
                                };
                                if (c++ === 0 || i === u) f = r;
                                if (t.isArray(p)) var v = t.map(p, function(e) {
                                        return n.s('<li><a href="#" data-value="' + n.e(e.value) + '" data-action="' + !!n.e(e.action) + '">' + n.e(e.label) + "</a></li>")
                                    }),
                                    h = n.s('<ul class="dropdown-menu">' + n.join(v, "") + "</ul>");
                                return a += s ? 1 : 0, n.s((s ? '<li class="divider"></li>' : "") + "<li " + (h ? 'class="dropdown-submenu"' : "") + ">" + '<a href="#" ' + (d ? 'class="' + n.e(d) + '" ' : "") + (h ? "" : 'data-value="' + n.e(i) + '" ') + 'data-action="' + n.e(o) + '">' + n.e(r) + "</a>" + n.e(h) + "</li>")
                            }),
                            p = n.s('<ul class="dropdown-menu" style="' + (t.size(e) + a > 9 ? "overflow-y: scroll;" : "") + '">' + n.join(h, "") + "</ul>");
                        u || (u = l && l.value);
                        var d = "";
                        r.tabindex && (d = n.s(' tabindex="' + n.e(r.tabindex) + '"'));
                        var v = n.s("<div" + n.e(this.build_attributes(r, ["style", "name", "value", "tabindex"])) + ' value="' + n.e(u) + '">' + '<input style="display: none;" type="text" ' + n.e(this.build_attributes({
                            name: o,
                            value: u
                        })) + " />" + '<button type="button" class="btn dropdown-toggle" data-toggle="dropdown"' + n.e(d) + ">" + '<div class="dropdown-label" style="' + n.e(s || "") + '">' + n.e(i.title || f) + "</div>" + '<span class="caret"></span>' + "</button>" + n.e(p) + "</div>");
                        return v
                    },
                    build_select_input: function(e, n) {
                        n = n || {};
                        var r = "<select " + this.build_attributes(n) + ">";
                        return t.each(e, function(i, s) {
                            t.isArray(e) ? t.isObject(i) ? (s = i.value, i = i.label) : s = i : t.isObject(i) && (i = i.label);
                            var o = s === n.value ? " selected" : "";
                            r += '<option value="' + s + '" data-value="' + s + '"' + o + " >" + i + "</option>"
                        }), r += "</select>", r
                    },
                    build_open_close_button: function(e, n) {
                        n = t.extend({
                            state: "open"
                        }, n || {}), e = t.extend({
                            "class": ""
                        }, e || {}), e["class"] += " open-close " + n.state + "-" + (n.small ? "sm" : "lg");
                        var r = "<div" + this.build_attributes(e) + "></div>";
                        return r
                    },
                    build_validated_input: function(e, t) {
                        return t["class"] = "validated-input " + (t["class"] || ""), t["class"] += " " + (t.name || ""), "<span " + this.build_attributes(t) + ">" + "<input " + this.build_attributes(e) + " /   >" + '<span class="red-x"></span>' + '<span class="error"></span>' + "</span>"
                    },
                    build_attributes: function(e, t) {
                        return this.self._build_attributes(e, t)
                    },
                    app_url: function(e) {
                        return f.appHost() + "/app/" + g(e)
                    },
                    brochure_url: function(e) {
                        return f.brochureHost() + "/" + g(e)
                    },
                    supportUrl: function(e) {
                        return f.getBaseSupportUrl() + "/" + g(e)
                    },
                    supportEmail: function() {
                        return c.getSupportEmail()
                    },
                    supportPhone: function() {
                        return c.getSupportNumber()
                    },
                    user: function() {
                        return BMT.user
                    }
                },
                initialize: function() {
                    y.prototype.initialize.apply(this, arguments), t.each(t.functions(this), function(e) {
                        this[e] = t.bind(this[e], this)
                    }, this), this.formatter = o;
                    var n = this;
                    this.on("render", this.renderHandler = function() {
                        this.$("form").on("submit", function() {
                            return !1
                        }), this.$(".btn-group").each(function() {
                            var t = e(this);
                            t.attr("value") && t.val(t.attr("value"))
                        }), this.toolTips = this.toolTips || this.options.toolTips, this.toolTips && t.each(this.toolTips, function(e, t) {
                            this.build_tooltip(t, e)
                        }, this)
                    }), this.on("show", function() {
                        n.validation && n.applyValidation(n.validation), n.conversation && (n.conversation = new a(n.conversation), n.options.disableFocusConversation || n.$(n.conversation.bindTo).first().focus()), n.initializeEditable(), n.on("render", n.initializeEditable)
                    }), this.events = t.extend({}, this.globalEvents, this.events || {}), this.templateHelpers = t.extend({
                        self: n
                    }, this.globalTemplateHelpers, this.formatter, this.templateHelpers || {}, this.options.templateHelpers || {}), delete this.options.templateHelpers, this.onInitialize ? this.onInitialize.call(this) : this.options.onInitialize && this.options.onInitialize.call(this), this.onRoute && this.listenTo(r.history, "route", function(e, t, n) {
                        var r = n[0] || t;
                        this.onRoute(r, t, e)
                    })
                },
                reRender: function() {
                    this.render()
                },
                initializeEditable: function() {
                    this.editable && (this.editables = t.reduce(this.editable, function(e, t, n) {
                        return t.view = this, e[n] = new l(t), e
                    }.bind(this), {}))
                },
                build_tooltip: function(n, r) {
                    var i = this,
                        s;
                    t.isString(n) ? s = this.$(n) : s = n, s.each(function() {
                        var n = e(this),
                            s = n.find(".help-content"),
                            o = !1,
                            u = !1,
                            a;
                        s.length ? (o = !0, a = s.html().trim()) : n.data("help-content") ? a = n.data("help-content") : (u = !r.content, a = n.html()), n.qtip("destroy");
                        var f = e.extend(!0, {
                            content: a || " ",
                            show: "mouseover",
                            hide: "mouseout",
                            style: {
                                tip: {
                                    width: 10,
                                    height: 10
                                }
                            }
                        }, r || {});
                        f.position && t.isFunction(f.position.target) && (f.position.target = f.position.target.call(i));
                        var l = n.qtip(f);
                        return r.preserveInside || (o ? s.css("display", "none") : u && n.html("")), l
                    })
                },
                _build_attributes: function(e, r) {
                    r = r || [];
                    var i = t.map(e, function(e, i) {
                        if (!t.include(r, i)) return n.s(n.e(i) + '="' + n.e(e) + '"')
                    });
                    return n.s(" " + n.join(i, " ") + " ")
                },
                applyValidation: function(n) {
                    n = n || {}, n.labels = n.labels || {}, n.before = n.before || function() {
                        return !0
                    }, n.extraFields = n.extraFields || [], n.extraModels = n.extraModels || {}, n.transformers = n.transformers || {}, n.ignore = n.ignore || [], n.view = this;
                    var r = this,
                        i = function(e) {
                            var i = e && n.extraModels[e.data("validation-model")];
                            return i ? i.call(r) : t.result(n, "model") || r.model
                        },
                        s = function(e) {
                            var t = e.attr("name"),
                                r = n.transformers[t];
                            return r && r.attr_name || t
                        },
                        o = function(e) {
                            var t = e.attr("name"),
                                i = n.transformers[t],
                                s;
                            return e.is(":checkbox") ? s = e.is(":checked") : e.is("[money-input]") ? s = u.toNumber(e.val()) : s = e.val(), i && i.transform ? i.transform.call(r, s) : s
                        },
                        a = function(t, u) {
                            var a = e(this);
                            if (n.before.call(r, u, t)) {
                                var f, l, c, h;
                                f = i(a), l = s(a), c = o(a), h = f.preValidate(l, c, u), h = h ? n.labels[name] || h : h, e.isFunction(h) && (h = h(f, l, c)), r.updateFieldValidation(a, h, n)
                            } else r.updateFieldValidation(a, undefined, n)
                        },
                        f = n.callback || a,
                        l = t.union(n.extraFields, t.keys(i().validation || {}));
                    t.each(l, function(e) {
                        this.$("[name=" + e + "]").on("blur", f)
                    }, this)
                },
                updateFieldValidation: function(e, n, r) {
                    var i = e.attr("name"),
                        s = r && r.ignore && r.ignore.indexOf(i) !== -1,
                        o = e.parent().is(".validated-input");
                    o && (e = e.parent());
                    var u = "validation-tooltip";
                    if (n && !s) e.addClass("invalid"), e.hasClass("better-spinner-input") && e.siblings(".spinner-buttons").addClass("invalid"), o ? e.find(".error").html(n) : e.qtip(t.extend({
                        content: n,
                        show: {
                            event: !1,
                            ready: !0
                        },
                        hide: !1,
                        style: {
                            classes: u
                        },
                        position: {
                            my: e.data("tiploc-my") || "top left",
                            at: e.data("tiploc-at") || "bottom left",
                            container: this.$el
                        },
                        events: {
                            render: function(t, n) {
                                var r = e.qtip().elements.tooltip;
                                r.on("click", function() {
                                    e.qtip("hide")
                                })
                            }
                        }
                    }, r || {})).qtip("show");
                    else if (!s) {
                        e.removeClass("invalid"), e.hasClass("better-spinner-input") && e.siblings(".spinner-buttons").removeClass("invalid");
                        var a = e.data("qtip");
                        !o && a && a.elements.tooltip && a.elements.tooltip.hasClass(u) && e.qtip("destroy")
                    }
                },
                triggerValidation: function(e, n) {
                    t.each(e, function(e) {
                        this.$('[name="' + e + '"]:visible').trigger("blur", n)
                    }, this)
                },
                triggerAllValidation: function(t) {
                    this.$("[name]:visible").each(function() {
                        e(this).trigger("blur", t)
                    })
                },
                hideAllValidation: function(t) {
                    var n = this;
                    this.$("[name]" + (t ? "" : ":visible")).each(function() {
                        n.updateFieldValidation(e(this))
                    })
                },
                serializeModel: function(e) {
                    var t = e.toViewJSON ? e.toViewJSON : e.toJSON;
                    return t.apply(e, Array.prototype.slice.call(arguments, 1))
                },
                _toggle_map: {
                    "close-lg": "open-lg",
                    "open-lg": "close-lg",
                    "close-sm": "open-sm",
                    "open-sm": "close-sm"
                },
                allowOpenCloseClick: function() {
                    return !0
                },
                openCloseClick: function(t) {
                    t.stopImmediatePropagation(), this.allowOpenCloseClick() && this.toggleOpenCloseButton(e(t.currentTarget), t)
                },
                toggleOpenCloseButton: function(e, n) {
                    var r = n && n.shiftKey;
                    t.all(this._toggle_map, function(t, n) {
                        return e.hasClass(n) ? (e.data("sticky") || (e.removeClass(n), e.addClass(t)), e.trigger(/open/.test(t) ? "closed" : "opened", {
                            slow: r,
                            $button: e
                        }), !1) : !0
                    }, this)
                },
                dropdownClick: function(t) {
                    t.preventDefault(), t.stopImmediatePropagation();
                    var n = e(t.currentTarget);
                    if (n.data("value") !== undefined) {
                        var r = n.closest(".btn-group");
                        this.setDropdownVal(r, n, n.data("value")), r.removeClass("open"), n.trigger("change")
                    }
                },
                setDropdownVal: function(e, t, n) {
                    var r;
                    e.val(n), e.find("input[type=text]").val(n);
                    var r = t.data("action") ? !1 : t.html();
                    r && e.find(".dropdown-label").html(r)
                },
                getClass: function() {
                    return e.browser.msie ? this.constructor : this.__proto__.constructor
                },
                block: function(e, t, n) {
                    if (!this.blocking) {
                        this.blocking = !0, r.View.prototype.undelegateEvents.call(this), this.blockedEl = e || this.$el;
                        var i = this.blockedEl.css("position");
                        i !== "relative" && i !== "absolute" && this.blockedEl.css("position", "relative");
                        var o = s({
                            className: t,
                            hideSpinner: n
                        });
                        this.blockedEl.append(o)
                    }
                },
                unblock: function(e) {
                    this.blocking && (this.blockedEl.find(".spinner-bg, .svg-circle-spinner").remove(), this.blockedEl.css("position", "auto"), this._delegateDOMEvents(), this.blocking = !1, delete this.blockedEl)
                },
                preloadStart: function() {
                    if (e(".initial-loader").length || !this.$el) return;
                    var t = e(".page-loader");
                    t.children(".spinner-bg").length === 0 && t.append(s), this.$el.hide(), e(".page-loader").show()
                },
                preloadComplete: function() {
                    this.$el.show(), e(".page-loader").hide()
                },
                slider: function(n, r) {
                    var i = this,
                        s = r.showOriginal,
                        o = r.tooltip,
                        u = r.create,
                        a = r.start,
                        f = r.stop,
                        l = r.slide;
                    delete r.tooltip, delete r.create, delete r.start, delete r.stop, delete r.slide;
                    var c = {
                        "class": "",
                        sticky: !0
                    };
                    o === !0 ? o = c : o !== !1 && (o = t.extend({}, c, o));
                    var h = function(n, i) {
                            var u = e(this);
                            if (o && (!!i.value || i.value === 0)) {
                                var a = u.find(".tooltip");
                                p(a, i.value);
                                var f = u.find(".ui-slider-handle"),
                                    l = 24,
                                    c = parseInt(f.css("left"), 10) - a.outerWidth() / 2 + l;
                                a.css({
                                    left: c + "px"
                                })
                            }
                            if (s && t.isNumber(u.data("original-value"))) {
                                u.find(".slider-markers-container").length || u.append('<div class="slider-markers-container"></div>');
                                var h = u.find(".slider-markers-container");
                                h.html("");
                                var d = u.data("original-value");
                                if (d !== u.slider("value")) {
                                    var v = u.width(),
                                        m = r.max - r.min,
                                        g = (d - r.min) / m;
                                    e('<div class="slider-marker original-value"></div>').css({
                                        left: v * g
                                    }).appendTo(h)
                                }
                            }
                            r.draw && r.draw.call(this, n, i)
                        },
                        p = function(e, t) {
                            var n = e.find(".tooltip-inner");
                            n.html(o.formatter ? o.formatter(t) : t)
                        },
                        d = this.$(n).slider(t.extend({
                            start: function(e, t) {
                                h.call(this, e, t), a && a.call(this, e, t)
                            },
                            slide: function(e, t) {
                                h.call(this, e, t), l && l.call(this, e, t)
                            },
                            change: function(t, n) {
                                h.call(this, t, n), i.stopped && (i.stopped = !1, o.sticky || e(this).find(".tooltip").fadeOut(100))
                            },
                            stop: function(e, t) {
                                f && f.call(this, e, t), i.stopped = !0
                            },
                            create: function(e, t) {
                                u && u.call(this, e, t), h.call(this, e, t)
                            }
                        }, r));
                    return o && (d.append('<div class="tooltip top slider-tooltip ' + o["class"] + '">' + '<div class="tooltip-arrow"></div>' + '<div class="tooltip-inner"></div>' + "</div>"), p(d.find(".tooltip"), r.value)), d
                },
                restrictNumeric: function(e) {
                    return this.restrictRegex(e, /^\d+$/)
                },
                restrictDecimal: function(t) {
                    var n = this._normalizedCode(t);
                    return this._allowSpecialKeys(t) || this.restrictNumeric(t) || n === m && !/\./.test(e(t.currentTarget).val())
                },
                formatInteger: function(e) {
                    e.stopImmediatePropagation();
                    if (!this.restrictDecimal(e)) return !1
                },
                formatDecimal: function(t) {
                    t.stopImmediatePropagation();
                    var n = this._normalizedCode(t),
                        r = n === p,
                        i = n === h,
                        s = r || i;
                    if (!this.restrictDecimal(t)) return !1;
                    if (!s && this._allowSpecialKeys(t)) return !0;
                    var o, u, a = n === m ? "." : String.fromCharCode(n),
                        f = e(t.currentTarget),
                        l = f.caret(),
                        c = f.val(),
                        d = l.start,
                        v = l.end;
                    l.start === l.end && s && (r && c.charAt(v) === "," ? v += 2 : r ? v += 1 : i && c.charAt(d - 1) === "," ? d -= 2 : i && (d -= 1));
                    var g = c.substring(0, d),
                        y = c.substring(v),
                        b = g + (s ? "" : a),
                        w = b.length;
                    c = b + y, o = /\..*$/.exec(c);
                    var E, S = "",
                        x = w;
                    for (E = 0; E < c.length; E++) /[0-9.]/.exec(c[E]) ? S += c[E] : E < w && x--;
                    if (/e/.exec(Math.abs(S))) return !1;
                    u = this.formatter.integer((S || "").split(".")[0]) + (o ? o[0] || "" : "");
                    var T = 0,
                        N = 0;
                    for (E = 0; E < u.length; E++) T < x && /[0-9.]/.exec(u[E]) && (T++, N = E + 1);
                    return f.val(s && u === "0" ? "" : u), f.caret({
                        start: N,
                        end: N
                    }), !1
                },
                restrictSignedDecimal: function(t) {
                    var n = this._normalizedCode(t),
                        r = e(t.currentTarget);
                    return this.restrictDecimal(t) || n === v && r.caret().start === 0 && !/\-/.test(r.val())
                },
                restrictLength: function(t, n) {
                    var r = e(t.currentTarget),
                        i = this._allowSpecialKeys(t) || r.val().length < n;
                    if (r.attr("type") !== "number") {
                        var s = r.caret();
                        i = i || s.end - s.start > 0
                    }
                    return i
                },
                restrictRegex: function(e, t) {
                    var n = this._normalizedCode(e);
                    return this._allowSpecialKeys(e) || t.test(String.fromCharCode(n))
                },
                _allowSpecialKeys: function(e) {
                    var n = this._normalizedCode(e);
                    return n === h || n === d || n === p ? !0 : e.type === "keydown" && (t.include([13, 37, 38, 39, 40], n) || e.metaKey || e.ctrlKey || e.altKey)
                },
                _normalizedCode: function(e) {
                    var t = e.keyCode || e.which;
                    if (e.type === "keydown") {
                        t >= 96 && t <= 105 && (t -= 48), t === 110 && (t = m);
                        if (t === 173 || t === 109) t = v
                    }
                    return e.type === "keypress" && (t === 46 && (t = m), t === 45 && (t = v)), t
                },
                validateAmount: function(t, n) {
                    var r = String.fromCharCode(this._normalizedCode(t)),
                        i = parseFloat(e(t.currentTarget).val() + r);
                    if (i && i > n) return t.stopImmediatePropagation(), !1
                }
            });
            return b
        }
        var h = 8,
            p = 46,
            d = 9,
            v = 189,
            m = 190,
            b = y(i.LayoutView),
            w = y(i.CollectionView),
            E = y(i.CompositeView);
        return {
            View: b,
            CollectionView: w,
            CompositeView: E
        }
    }), define("common/betterment.views", ["underscore", "components/common/scripts/util/handlebarsHelpers", "components/common/scripts/views/baseViews", "components/common/scripts/models/appData"], function(e, t, n, r) {
        var i = {
                globalEvents: e.defaults({
                    mousedown: "refreshSession"
                }, n.View.prototype.globalEvents),
                globalTemplateHelpers: e.defaults({
                    taxYear: function() {
                        return (new Date).addYears(-1)
                    },
                    isTaxSeason: function() {
                        return Date.now().isBefore(r.getInstance().date("taxDay"))
                    },
                    lastYear: function() {
                        return (new Date).getFullYear() - 1
                    },
                    truncateToLength: function(e, t) {
                        return e.length <= t ? e : e.substring(0, t) + "..."
                    }
                }, n.View.prototype.globalTemplateHelpers),
                refreshSession: function(e) {
                    BMT.hasSession() && BMT.refreshSession(), e.stopImmediatePropagation()
                }
            },
            s = n.View.extend(i),
            o = s.extend({
                initialize: function() {
                    s.prototype.initialize.apply(this, arguments), this.fadeIn = this.fadeIn || this.options.fadeIn, this.fadeOut = this.fadeOut || this.options.fadeOut
                },
                globalTemplateHelpers: e.extend({}, s.prototype.globalTemplateHelpers, {
                    build_button: function(t) {
                        var n = "<button id='" + t.id + "'";
                        return e.each(t.attributes || {}, function(e, t) {
                            n += " " + t + "='" + e + "'"
                        }), n += ">" + t.title + "</button>", n
                    },
                    build_wizard_controls: function(n) {
                        var r = this;
                        return t.s('<div class="wizard-buttons">' + (n.back ? '<a class="left back" href="#">' + (n.back.title || "Back") + "</a>" : "") + (n.buttons ? e.reduce(n.buttons, function(e, t) {
                            return e + r.build_button(t)
                        }, "") : "") + (n.count ? '<h2 class="right pager">' + n.count[0] + " of " + n.count[1] + "</h2>" : "") + "</div>")
                    },
                    build_high_fade: function(e) {
                        e = e || {};
                        var t = "high-fade";
                        e.iconText && (t += " with-icon"), e.subHeader && (t += " with-sub-header"), e.className && (t += " " + e.className);
                        var n = '<div class="' + t + '">';
                        return n += "<h2>" + e.title + "</h2>", e.subHeader && (n += "<p>" + e.subHeader + "</p>"), e.iconText && (n += '<div class="modern-icon">' + e.iconText + "</div>"), n += "</div>", n
                    }
                }),
                block: function(e, t) {
                    s.prototype.block.call(this, e || this.$el.closest(".modal-panel"), t)
                }
            });
        return o.show = function(e) {
            var t = new this.prototype.constructor(e);
            return BMT.modal.show(t, e), t
        }, {
            View: s,
            CollectionView: n.CollectionView.extend(i),
            CompositeView: n.CompositeView.extend(i),
            ModalView: o
        }
    }), define("hbs!views/login/login", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel card horizontal-center logged-out">\n    <div class="inner">\n        <h1 class="tab-header">Log in to your account</h1>\n        <form method="POST" class="login-form" action="#">\n            <section>\n                <article>\n                    <label>Email</label>\n                    <input type="email" name="userName" tabindex="1" />\n                </article>\n                <article>\n                    <label style="float:left">Password</label>\n                    <div style="float:right">\n                        <a href="#forgotPassword" id="forgotPasswordLink" style="margin:3px 0 0;font-size:12px;display:inline-block" tabindex="4">Forgot your password?</a>\n                    </div>\n                    <div class="clearfix"></div>\n                    <input type="password" name="password" tabindex="2" />\n                </article>\n                <article>\n                    <input name="rememberEmail" type="checkbox" style="width:12px" id="rememberEmail" />\n                    <label for="rememberEmail" style="width:150px;font-size:12px;font-weight:400;display:inline-block">Remember my email</label>\n                </article>\n                <article style="margin:20px 0 0">\n                    <button id="submitLogin" class="blue" tabindex="3" style="display:inline-block;width:100px;margin:0 10px 0 0">Log in</button>\n                    <span style="font-size:13px" class="unadvised-user-only">\n                        or <a href="#" class="goToSignup">create an account</a>\n                    </span>\n                    <div class="clearfix"></div>\n                </article>\n            </section>\n        </form>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/login/login", n), n
    }), define("models/modelMixins", ["underscore", "components/common/scripts/models/modelMixins"], function(e, t) {
        return e.extend(t, {
            handleErrors: function() {
                this.on("error", function(e, t, n) {
                    (!n || !n.skipErrorAlert) && BMT.vent.trigger("error", e, t, n)
                })
            }
        })
    }), define("common/betterment.models", ["jquery", "underscore", "backbone", "components/common/scripts/services/dateService", "models/modelMixins", "backboneRelational", "backboneValidation"], function(e, t, n, r, i) {
        function s(s) {
            var o = s.extend(t.extend({}, i, n.Validation.mixin, {
                initialize: function() {
                    s.prototype.initialize.apply(this), this.handleErrors(), this.onInitialize && this.onInitialize.apply(this, arguments)
                },
                sync: function(e, r, s) {
                    var o;
                    return n.emulateHTTP = n.emulateJSON = !0, o = i.sync.call(this, e, r, t.extend(s, {
                        beforeSend: function(e) {
                            e.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8")
                        }
                    })), n.emulateHTTP = n.emulateJSON = !1, o
                },
                beforeSave: function(e) {},
                save: function(e, t, n) {
                    var r = this._handleSaveArguments(e, t, n);
                    return this.beforeSave(r.attrs), s.prototype.save.call(this, r.attrs, r.options)
                },
                destroy: function(e) {
                    return e = e || {}, e.data = {
                        model: JSON.stringify(this.toJSON())
                    }, s.prototype.destroy.call(this, e)
                },
                labels: {},
                getClass: function() {
                    return e.browser.msie ? this.constructor : this.__proto__.constructor
                },
                getSuperClass: function() {
                    return this.getClass().__super__
                }
            }), {
                date: function(e) {
                    return r.parseServerDate(e)
                },
                num: function(e) {
                    return parseFloat(e)
                },
                buildGhost: function() {
                    var e = this;
                    return new e
                }
            });
            return o
        }
        var o = s(n.Model),
            u = s(n.RelationalModel),
            a = n.Collection.extend({
                model: o,
                initialize: function() {
                    this.proxy = a.createProxy(this), i.handleErrors.apply(this), this.onInitialize && this.onInitialize.apply(this, arguments)
                },
                save: function(e) {
                    this.proxy.save({}, e)
                },
                toJSON: function() {
                    return this.map(function(e) {
                        return e.toJSON()
                    })
                },
                isEmpty: function() {
                    return this.length === 0
                },
                sum: function(e) {
                    return this.reduce(function(t, n) {
                        return t + n.num(e)
                    }, 0)
                }
            }, {
                createProxy: function(e) {
                    return e.proxy || (e.proxy = t.extend(new o, {
                        url: t.isFunction(e.url) ? e.url() : e.url,
                        toJSON: function() {
                            return e.toJSON()
                        },
                        isNew: function() {
                            return e.all(function(e) {
                                return e.isNew()
                            })
                        }
                    })), e.proxy
                }
            });
        return {
            Model: o,
            RelationalModel: u,
            Collection: a
        }
    }), define("models/session", ["jquery", "underscore", "common/betterment.models"], function(e, t, n) {
        var r = 1e4,
            i = 54e4,
            s = 6e4,
            o = 12e4,
            u = n.Model.extend({
                url: "/session",
                labels: {
                    userName: "Email address"
                },
                validation: {
                    userName: {
                        required: !0,
                        pattern: "email"
                    },
                    password: {
                        required: !0,
                        minLength: 8
                    }
                },
                onInitialize: function() {
                    u.warning && clearInterval(u.warning)
                },
                parse: function(e, t) {
                    return this.set("id", 1), this.unset("password", {
                        silent: !0,
                        forceUpdate: !0
                    }), e
                },
                toJSON: function() {
                    return this.isNew() ? {
                        userName: this.get("userName"),
                        password: this.get("password")
                    } : {
                        userName: this.get("userName")
                    }
                },
                refreshTokens: function() {
                    var t = new e.Deferred;
                    return this.save().then(function() {
                        t.resolve(this.get("tokens"))
                    }.bind(this), function() {
                        var e = "could not refresh fresh tokens";
                        BMT.logError(e), t.reject(e)
                    }), t.promise()
                },
                getToken: function(e) {
                    return this.get("tokens")[e]
                }
            }, {
                clearTimeout: function() {
                    this.warning && clearInterval(this.warning)
                },
                refreshTimeout: function() {
                    var e = this;
                    this.clearTimeout(), this._pingServer(), this.startTime = (new Date).getTime(), this.warning = setInterval(function() {
                        if (BMT.hasSession() && (new Date).getTime() - e.startTime >= i) {
                            var t;
                            e.clearTimeout();
                            var n = BMT.alert({
                                title: "Session Timeout",
                                body: 'As a security measure, BetaSmartz logs you out after a time with little activity.  Click "OK" to stay logged in.',
                                icon: "warning",
                                handler: function(e) {
                                    BMT.analytics.track("AutoLogoutStopped"), clearInterval(t), u.refreshTimeout()
                                }
                            });
                            t = setInterval(function() {
                                clearInterval(t), BMT.vent.trigger("logout", {
                                    timeout: !0,
                                    alert: n
                                })
                            }, s)
                        }
                    }, r)
                },
                _pingServer: t.throttle(function() {
                    BMT.hasSession() && BMT.session.save()
                }, o)
            });
        return u
    }), define("views/login/loginView", ["jquery", "backbone", "common/betterment.views", "hbs!views/login/login", "models/session", "components/common/scripts/services/domainService"], function(e, t, n, r, i, s) {
        return n.View.extend({
            template: r,
            tagName: "div",
            id: "login",
            events: {
                "click button#submitLogin": "login",
                "click input#rememberEmail": "saveEmail",
                "click a.goToSignup": "goToSignup"
            },
            options: {
                errorCode: null,
                setResponsiveLayout: !0
            },
            onInitialize: function() {
                this.model = BMT.session
            },
            onShow: function() {
                this.options.errorCode && BMT.vent.trigger("errorCode", this.options.errorCode), this.applyValidation(), this.form = this.$("form"), this.userName = this.$("input[name=userName]"), this.rememberEmail = this.$("input#rememberEmail");
                var t = e.cookie(BMT.saveEmailCookieKey);
                t && (this.userName.val(t), this.rememberEmail.attr("checked", !0));
                var n = e.cookie(BMT.userNameCookieKey);
                n && this.userName.val(n)
            },
            login: function(n) {
                n && n.preventDefault();
                var r = this,
                    i = t.Syphon.serialize(this);
                this.model.validate(i) || (this.block(this.$(".panel")), this.model.save(i, {
                    silent: !0,
                    success: function() {
                        r.saveEmail(), BMT.user.fetch({
                            success: function() {
                                BMT.vent.trigger("login")
                            }
                        })
                    },
                    error: function() {
                        r.unblock()
                    },
                    complete: function() {
                        e.cookie(BMT.userNameCookieKey, null, {
                            domain: location.host === "localhost" ? "localhost" : "betasmartz.com",
                            path: "/"
                        })
                    }
                }))
            },
            saveEmail: function(t) {
                this.rememberEmail.is(":checked") ? e.cookie(BMT.saveEmailCookieKey, this.userName.val(), {
                    expires: 90,
                    domain: BMT.isProd() ? ".betasmartz.com" : ".betterment.qa",
                    path: "/"
                }) : e.cookie(BMT.saveEmailCookieKey, null)
            },
            goToSignup: function(e) {
                e && e.preventDefault(), window.location.href = s.getResponsiveSignupUrl()
            }
        })
    }), define("hbs!views/summary/summary", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="banner-region"></div>\n<div class="summary-region"></div>\n'
        });
        return t.registerPartial("views/summary/summary", n), n
    }), define("components/common/scripts/analytics/qualaroo", ["jquery"], function(e) {
        function n(e) {
            t.push(["identify", e])
        }

        function r(e) {
            t.push(["set", e])
        }

        function i(e) {
            t.push(["eventHandler", "submit", e])
        }
        var t = window._kiq || [];
        return {
            identify: n,
            setProperties: r,
            setSubmissionHandler: i
        }
    }), define("components/common/scripts/analytics/mixpanelWrapper", [], function() {
        function e() {
            var e = "test";
            try {
                return localStorage.setItem(e, e), localStorage.removeItem(e), !0
            } catch (t) {
                return !1
            }
        }

        function t() {
            return e() ? window.localStorage.mixpanelApiEnabled === "true" ? !0 : window.localStorage.mixpanelApiEnabled === "false" ? !1 : !window.BMT || !window.BMT.isLocal() : !0
        }

        function n() {
            return e() ? window.localStorage.mixpanelConsoleEnabled === "true" : !0
        }

        function r(e, r) {
            if (t()) try {
                mixpanel.track(e, i(r))
            } catch (s) {}
            n() && window.console.debug("MIXPANEL_TRACK: " + e + "-" + JSON.stringify(r))
        }

        function i(e) {
            return e = e || {}, e.Path = window.location.hash, e
        }

        function s(e) {
            if (t()) try {
                mixpanel.identify(e), mixpanel.name_tag("User " + e), mixpanel.people.set("$name", e)
            } catch (r) {}
            n() && window.console.debug("MIXPANEL_IDENTIFY: " + e)
        }

        function o(e) {
            try {
                mixpanel.register(e)
            } catch (t) {}
        }
        return {
            track: r,
            identify: s,
            register: o
        }
    }),
    function(e) {
        define("jqueryCookie", ["jquery"], function() {
            return function() {
                (function(e, t) {
                    function r(e) {
                        return e
                    }

                    function i(e) {
                        return decodeURIComponent(e.replace(n, " "))
                    }
                    var n = /\+/g;
                    e.cookie = function(n, s, o) {
                        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(s)) || s == null)) {
                            o = e.extend({}, e.cookie.defaults, o), s == null && (o.expires = -1);
                            if (typeof o.expires == "number") {
                                var u = o.expires,
                                    a = o.expires = new Date;
                                a.setDate(a.getDate() + u)
                            }
                            return s = String(s), t.cookie = [encodeURIComponent(n), "=", o.raw ? s : encodeURIComponent(s), o.expires ? "; expires=" + o.expires.toUTCString() : "", o.path ? "; path=" + o.path : "", o.domain ? "; domain=" + o.domain : "", o.secure ? "; secure" : ""].join("")
                        }
                        o = s || e.cookie.defaults || {};
                        var f = o.raw ? r : i,
                            l = t.cookie.split("; ");
                        for (var c = 0, h; h = l[c] && l[c].split("="); c++)
                            if (f(h.shift()) === n) return f(h.join("="));
                        return null
                    }, e.cookie.defaults = {}
                })(jQuery, document)
            }.apply(e, arguments)
        })
    }(this), define("components/common/scripts/analytics/analytics", ["underscore", "jquery", "components/common/scripts/analytics/qualaroo", "components/common/scripts/analytics/mixpanelWrapper", "components/common/scripts/services/domainService", "jqueryCookie"], function(e, t, n, r, i) {
        function o(e, t) {
            //r.track(e, t)
        }

        function u(e, t) {
            //var n = a(e.concat(JSON.stringify(t)));
            //s[n] || (s[n] = !0, o(e, t))
        }

        function a(e) {
            /*var t = 0,
                n, r, i;
            if (0 === e.length) return t;
            for (n = 0, i = e.length; n < i; n++) r = e.charCodeAt(n), t = (t << 5) - t + r, t |= 0;
            return t*/
        }

        function f() {/*
            t(document).on("click", "[data-track-event]", function(e) {
                var n = t(e.currentTarget).data();
                if (!n) return;
                var r = n.trackEvent;
                if (!r) return;
                var i = {},
                    s = n.trackLocation;
                s && (i.Location = s);
                var u = n.trackName;
                u && (i.Name = u);
                var a = n.trackModule;
                a && (i.Module = a);
                var f = n.trackType;
                f && (i.Type = f), o(r, i)
            })*/
        }

        function l(e) {/*
            r.identify(e), n.identify(e)*/
        }

        function c(e) {/*
            r.register(e)*/
        }

        function h(t, n) {/*
            try {
                var r = t.getDefaultAccountGroup(),
                    i = r.get("accounts"),
                    s = e.extend({}, n);
                t.has("netWorth") && (s.NW = t.get("netWorth") / 1e3), t.has("annualIncome") && (s.AI = t.get("annualIncome") / 1e3), i.size() && (s.HasIRA = i.hasIRA(), s.HasTaxable = i.hasInvestingAccount()), t.has("gender") && (s.Gender = t.get("gender"));
                if (t.has("type")) {
                    var o = t.is("demo") ? "DEMO" : t.get("type");
                    s.UserType = o
                }
                t.isAdvised() ? (s.IsAdvisedUser = !0, s.AdvisorID = t.get("advisorId")) : s.IsAdvisedUser = !1, t.is("performerSession") ? s.Actor = "Performer" : t.is("advisorSession") ? s.Actor = "Advisor" : s.Actor = "User", s.VisitorKey = t.getVisitorKey(), s.UserID = t.get("id"), l(t.getVisitorKey()), c(s), d()
            } catch (u) {}
        }

        function d() {
            t.extend(p, mixpanel.cookie.props), delete p.mp_lib;
            var e = 90,
                n = i.getBaseDomain(window.location.href.toString()),
                r = window.location.protocol === "https:",
                s = {};
            mixpanel.get_distinct_id() && (s.distinct_id = mixpanel.get_distinct_id(), p.AdvisorID && (s.AdvisorID = p.AdvisorID), s.IsAdvisedUser = p.IsAdvisedUser, s.Platform = p.Platform, s.App = p.App), t.cookie("polaris", JSON.stringify(s), {
                expires: e,
                path: "/",
                domain: n,
                secure: r
            }), t(document).ajaxSend(function(e, n, r) {
                var i = ["POST", "PUT", "PATCH", "DELETE"];
                if (i.indexOf(r.type) > -1) {
                    var s = t.cookie("polaris", {
                        path: "/"
                    });
                    n.setRequestHeader("X-BMT-Polaris", s)
                }
            })*/
        }

        function v() {/*
            setTimeout(d, 0)*/
        }
        var s = {},
            p = {};
        return null, {
            track: o,
            trackOnce: u,
            registerUser: h,
            registerProperties: c,
            attachElementTracking: f
        }
    }), define("hbs!templates/modals", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="modal-wrapper">\n    <div class="modal-content"></div>\n\n    <div class="close"></div>\n</div>\n'
        });
        return t.registerPartial("templates/modals", n), n
    }), define("layouts/modalsLayout", ["common/betterment.views", "hbs!templates/modals"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "modal-layout",
            regions: {
                content: ".modal-content"
            },
            events: {
                "click .close": "close"
            },
            onRender: function() {
                this.listenTo(this.options.view, "close", function() {
                    this.trigger("close")
                }), this.listenTo(this.options.view, "block", this.block), this.listenTo(this.options.view, "unblock", this.unblock), this.content.show(this.options.view)
            },
            close: function() {
                this.options.view.trigger("closeModalLayout"), this.trigger("close")
            }
        })
    }), define("modules/modals", ["marionette", "layouts/modalsLayout"], function(e, t) {
        var n = new e.Region({
                el: ".modals-region"
            }),
            r = 1e5;
        return {
            show: function(e) {
                $.fn.qtip.zindex += r;
                var i = new t({
                    view: e
                });
                i.on("close", this.close.bind(this)), n.show(i), n.$el.show(0, function() {
                    n.$el.addClass("up")
                }), BMT.setResponsiveLayout(!0)
            },
            close: function() {
                $.fn.qtip.zindex -= r, n.$el.removeClass("up"), n.$el.hide(), n.empty(), BMT.setResponsiveLayout(!1)
            }
        }
    }), define("components/common/scripts/templateHelpers/money", ["underscore", "hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t, n) {
        t.registerHelper("money", function(t, r, i) {
            return e.isObject(r) && (r = 2), n.money(t, r)
        })
    }), define("hbs!views/summary/overview", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return 'style="min-height: 200px; height: auto;"'
            }

            function d(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                                <span class="pending-deposits pending-deposits-icon">\n                                    <div class="help-content">Your current balance includes a pending deposit of <strong class="bold-text">', i = (s = n.pendingDeposits || e && e.pendingDeposits, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "pendingDeposits", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</strong>.</div>\n                                </span>\n                            ", r
            }

            function v(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                            <div class="returns-summary returns" style="display: ', i = n["if"].call(e, e && e.expanded, {
                    hash: {},
                    inverse: h.program(8, g, t),
                    fn: h.program(6, m, t)
                });
                if (i || i === 0) r += i;
                r += '">\n                                <h3 class="caps-label inline">Total earnings</h3>\n                                <span class="bold-text ', i = n["if"].call(e, e && e.hasGain, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(10, y, t)
                });
                if (i || i === 0) r += i;
                r += '">', i = (s = n.lifetimeEarned || e && e.lifetimeEarned, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "lifetimeEarned", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</span>\n                                ", i = n["if"].call(e, e && e.showNegativeReturnsToolTip, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(12, b, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                            </div>\n                        ", r
            }

            function m(e, t) {
                return "none"
            }

            function g(e, t) {
                return "block"
            }

            function y(e, t) {
                return "gain"
            }

            function b(e, t) {
                var r = "",
                    i, s;
                return r += "\n                                    ", (s = n.negativeReturnsTooltip) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.negativeReturnsTooltip, i = typeof s === c ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n                                ", r
            }

            function w(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                        <div class="tlh-status">\n                            <p>\n                                <a href="#" class="open-tlh-config">\n                                    <span class="losses-label">\n                                        <span>Tax Loss Harvesting</span>\n                                        <span>', i = n["if"].call(e, e && e.tlhEnabled, {
                    hash: {},
                    inverse: h.program(17, S, t),
                    fn: h.program(15, E, t)
                });
                if (i || i === 0) r += i;
                r += '</span>\n                                    </span>\n                                </a>\n                            </p>\n                            <p class="harvested-losses">Harvested Losses ', i = (s = n.totalLossesHarvested || e && e.totalLossesHarvested, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "totalLossesHarvested", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + '</p>\n\n                            <div class="help-content">\n                                <div style="margin:4px">\n                                    ', i = n["if"].call(e, e && e.tlhEnabled, {
                    hash: {},
                    inverse: h.program(26, L, t),
                    fn: h.program(19, x, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                                </div>\n                            </div>\n                        </div>\n                    ", r
            }

            function E(e, t) {
                return "on"
            }

            function S(e, t) {
                return "off"
            }

            function x(e, t) {
                var r = "",
                    i;
                r += "\n                                        ", i = n["if"].call(e, e && e.noLossesHarvested, {
                    hash: {},
                    inverse: h.program(22, N, t),
                    fn: h.program(20, T, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                                    ", r
            }

            function T(e, t) {
                return '\n                                            <div class="notify" style="width:180px;margin:10px 0 0;">\n                                                Good news, you have no losses worth harvesting. Our algorithm\n                                                will continue to check your account for losses.\n                                            </div>\n                                        '
            }

            function N(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                                            <div class="notify" style="max-width:220px;">\n                                                <p style="margin:10px 0 0">\n                                                    We harvested <span class="bold-text">', i = (s = n.harvestedLossesThisYear || e && e.harvestedLossesThisYear, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "harvestedLossesThisYear", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</span> for you\n                                                    in ", (s = n.currentYear) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.currentYear, i = typeof s === c ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + ' by selling securities with losses and replacing them with similar securities.\n                                                </p>\n                                                <p style="margin: 5px 0 0">\n                                                    At the highest tax rates, this could save you up to\n                                                    <span class="bold-text">', i = (s = n.taxesSaved || e && e.taxesSaved, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "taxesSaved", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</span>\n                                                    in taxes (assumes 39.6% federal, 13.3% state, 3.8% medicare\n                                                    surtax and deductibility of state taxes).\n                                                </p>\n                                                ", i = n["if"].call(e, e && e.hasHarvestedLossesInPriorYears, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(23, C, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                                            </div>\n                                        ", r
            }

            function C(e, t) {
                var r = "",
                    i;
                r += '\n                                                    <p style="margin: 5px 0 0">\n                                                        Harvested losses for prior years: <br />\n                                                        ', i = n.each.call(e, e && e.harvestedLossesPriorYears, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(24, k, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                                                    </p>\n                                                ", r
            }

            function k(e, t) {
                var r = "",
                    i, s, o;
                return r += "\n                                                            <span>", (s = n.taxYear) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.taxYear, i = typeof s === c ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + ':</span>\n                                                            <span class="bold-text">' + l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, e && e.amount, o) : f.call(e, "money", e && e.amount, o))) + "</span>\n                                                            <br />\n                                                        ", r
            }

            function L(e, t) {
                var r = "",
                    i;
                r += '\n                                        <div class="notify" style="width:180px;">\n                                            ', i = n["if"].call(e, e && e.hasUnrealizedLosses, {
                    hash: {},
                    inverse: h.program(29, O, t),
                    fn: h.program(27, A, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                                        </div>\n                                    ", r
            }

            function A(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                                                <p>Save taxes by harvesting <span class="bold-text">', i = (s = n.unrealizedLosses || e && e.unrealizedLosses, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "unrealizedLosses", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</span> of losses currently in your portfolio.</p>\n                                            ", r
            }

            function O(e, t) {
                return "\n                                                <p>Save taxes by automatically harvesting losses in your portfolio.</p>\n                                            "
            }

            function M(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                        <h3 class="caps-label no-tlh">\n                            Total earnings\n                        </h3>\n\n                        <h1 class="balance">\n                            <span class="', i = n["if"].call(e, e && e.hasGain, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(10, y, t)
                });
                if (i || i === 0) r += i;
                r += '">', i = (s = n.lifetimeEarned || e && e.lifetimeEarned, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "lifetimeEarned", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : f.call(e, "money", i, o))) + "</span>\n                            ", i = n["if"].call(e, e && e.showNegativeReturnsToolTip, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(32, _, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                        </h1>\n                    ", r
            }

            function _(e, t) {
                var r = "",
                    i, s;
                return r += "\n                                ", (s = n.negativeReturnsTooltip) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.negativeReturnsTooltip, i = typeof s === c ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n                            ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function",
                h = this;
            s += '<div class="panel overview card">\n    <div class="overview-wrapper" ', o = n["if"].call(t, t && t.expanded, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += ">\n\n        ", (u = n.toggler) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.toggler, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        <div class="clearfix">\n            <div class="left-side">\n                <div class="clearfix">\n                    <div class="left overview-balance">\n                        <h3 class="caps-label">total balance for all goals</h3>\n                        <h1 class="balance">\n                            ', o = (u = n.currentBalance || t && t.currentBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "currentBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "money", o, a))) + "\n                            ", o = n["if"].call(t, t && t.hasPendingDeposits, {
                hash: {},
                inverse: h.noop,
                fn: h.program(3, d, i)
            });
            if (o || o === 0) s += o;
            s += "\n                        </h1>\n\n                        ", o = n["if"].call(t, t && t.tlhAvailable, {
                hash: {},
                inverse: h.noop,
                fn: h.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n                    </div>\n                </div>\n            </div>\n\n            <div class="right-side">\n                <div class="overview-returns">\n                    ', o = n["if"].call(t, t && t.tlhAvailable, {
                hash: {},
                inverse: h.program(31, M, i),
                fn: h.program(14, w, i)
            });
            if (o || o === 0) s += o;
            s += '\n                </div>\n            </div>\n        </div>\n        <div class="details clearfix" style="display: ', o = n["if"].call(t, t && t.expanded, {
                hash: {},
                inverse: h.program(6, m, i),
                fn: h.program(8, g, i)
            });
            if (o || o === 0) s += o;
            return s += '">\n            <div id="accountReturnRegion" class="account-returns"></div>\n            <div class="allocation">\n                <div class="bonds">\n                    <div class="type">\n                        Bonds\n                    </div>\n                    <div class="pct">\n                        ', o = (u = n.averageBondAllocation || t && t.averageBondAllocation, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "averageBondAllocation", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "pct", o, a))) + '\n                    </div>\n                </div>\n                <div id="overviewSpeedometerRegion" class="speedometer-region"></div>\n                <div class="stocks">\n                    <div class="type">\n                        Stocks\n                    </div>\n                    <div class="pct">\n                        ', o = (u = n.averageStockAllocation || t && t.averageStockAllocation, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "averageStockAllocation", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "pct", o, a))) + "\n                    </div>\n                </div>\n                <h2>Overall Allocation</h2>\n            </div>\n        </div>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/summary/overview", n), n
    }), define("components/common/scripts/templateHelpers/brochureUrl", ["hbs/handlebars", "components/common/scripts/util/handlebarsHelpers", "components/common/scripts/services/domainService"], function(e, t, n) {
        e.registerHelper("brochureUrl", function(e) {
            return t.e(n.brochureHost() + "/" + e)
        })
    }), define("hbs!views/tooltips/negativeReturns", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<div class="negative-returns ', (u = n.tooltipClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.tooltipClass, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ' help-icon" >\n    <div class="summary">\n        <h2>\n            Understanding short term returns\n        </h2>\n        <div class="body">\n            ', (u = n.negativeReturnsTipMessage) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.negativeReturnsTipMessage, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </div>\n        <a class="button flat small secondary light-blue link-to-blog" data-track-event="ElementClicked" data-track-location="Summary" data-track-name="NegativeReturnsAnalysis" href="' + l((u = n.brochureUrl || t && t.brochureUrl, a = {
                hash: {}
            }, u ? u.call(t, "resources/investment-strategy/portfolio-management/its-about-time-in-the-market-not-market-timing/", a) : c.call(t, "brochureUrl", "resources/investment-strategy/portfolio-management/its-about-time-in-the-market-not-market-timing/", a))) + '" target="_blank">Learn more</a>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/tooltips/negativeReturns", n), n
    }), define("common/constants/taxRates", [], function() {
        function o(e) {
            return (r + e) * (1 - n) + n
        }
        var e = .396,
            t = .2,
            n = .133,
            r = .038,
            i = o(e),
            s = o(t);
        return {
            LONG_TERM_RATE: s,
            SHORT_TERM_RATE: i
        }
    }), define("services/taxService", ["common/constants/taxRates"], function(e) {
        return {
            taxesSavedFromHarvestedAmount: function(t) {
                var n = e.SHORT_TERM_RATE * t;
                return Math.round(n, 0)
            }
        }
    }), define("components/common/scripts/models/baseCollection", ["underscore", "backbone"], function(e, t) {
        var n = {
            initialize: function(e, n) {
                n = n || {}, this.options = n, this.parentEndpoint = n.parentEndpoint || "", this.onInitialize && this.onInitialize.apply(this, arguments), t.Collection.prototype.initialize.apply(this, arguments)
            },
            endpoint: function() {
                throw new Error("endpoint must be implemented or given a value")
            },
            getEndpoint: function() {
                return e.isFunction(this.endpoint) ? this.endpoint() : this.endpoint
            },
            isEmpty: function() {
                return this.length === 0
            },
            sum: function(e) {
                return this.reduce(function(t, n) {
                    return t + n.num(e)
                }, 0)
            }
        };
        return t.Collection.extend(n)
    }), define("components/common/scripts/models/v1/baseCollection", ["components/common/scripts/models/baseCollection"], function(e) {
        var t = "/client/api",
            n = {
                url: function() {
                    return t + this.getEndpoint()
                }
            },
            r = {
                API_URL: t
            };
        return e.extend(n, r)
    }), define("components/common/scripts/models/v1/baseModels", ["backbone", "components/common/scripts/models/baseModels", "components/common/scripts/models/v1/baseCollection"], function(e, t, n) {
        var r = {
            url: function() {
                return n.API_URL + this.getEndpoint()
            },
            destroy: function(t) {
                return t && t.data && (t.data = JSON.stringify(t.data)), e.RelationalModel.prototype.destroy.call(this, t)
            }
        };
        return {
            Model: t.Model.extend(r),
            RelationalModel: t.RelationalModel.extend(r)
        }
    }), define("models/v1/baseModels", ["underscore", "models/modelMixins", "components/common/scripts/models/v1/baseModels"], function(e, t, n) {
        var r = n.Model.prototype.initialize,
            i = n.Model.prototype.sync,
            s = {
                initialize: function() {
                    this.handleErrors(), r.apply(this, arguments)
                },
                sync: function(e, t, n) {
                    return e !== "read" && (n.url = t.url() + "?accountGroupId=" + BMT.accountGroup.get("id")), i.call(this, e, t, n)
                }
            },
            s = e.extend({}, t, s);
        return e.extend(n.Model.prototype, s), e.extend(n.RelationalModel.prototype, s), n
    }), define("models/v1/tlhStatus", ["models/v1/baseModels"], function(e) {
        var t = {
            relatedModels: ["accountGroup"],
            endpoint: function() {
                return this.get("accountGroup").getEndpoint() + "/tax-loss-harvesting"
            }
        };
        return e.Model.extend(t)
    }), define("services/taxLossHarvestingService", ["underscore", "models/v1/tlhStatus", "components/common/scripts/models/appData"], function(e, t, n) {
        var r = {
                NOT_AVAILABLE: "NOT_AVAILABLE",
                USER_ON: "USER_ON",
                USER_OFF: "USER_OFF"
            },
            i = Date.now().getFullYear(),
            s = {
                isUserOn: function(e) {
                    return e.get("taxLossHarvestingStatus") === r.USER_ON
                },
                isUserOff: function(e) {
                    return e.get("taxLossHarvestingStatus") === r.USER_OFF
                },
                isNotAvailable: function(e) {
                    return e.get("taxLossHarvestingStatus") === r.NOT_AVAILABLE
                },
                lossesHarvested: function(e) {
                    return e.num("totalLossesHarvested") || 0
                },
                lossesHarvestedThisYear: function(t) {
                    var n = e.findWhere(t.get("annualHarvestedLosses"), {
                            taxYear: i
                        }),
                        n = n || {
                            amount: 0
                        };
                    return n.amount
                },
                lossesHarvestedPriorYears: function(t) {
                    return e.chain(t.get("annualHarvestedLosses")).filter(function(e) {
                        return e.taxYear !== i
                    }).sortBy(function(e) {
                        return -1 * parseInt(e.taxYear, 10)
                    }).value()
                },
                unrealizedLosses: function(e) {
                    return e.num("unrealizedLosses") || 0
                },
                consentForAccountGroup: function(e) {
                    return this.createTlhStatus(e).save({
                        taxLossHarvestingStatus: r.USER_ON,
                        taxLossHarvestingConsent: !0
                    }).then(function(t) {
                        e.set("taxLossHarvestingConsent", t.consent), e.set("taxLossHarvestingStatus", t.status)
                    })
                },
                disableForAccountGroup: function(e) {
                    return this.createTlhStatus(e).save({
                        taxLossHarvestingStatus: r.USER_OFF,
                        taxLossHarvestingConsent: !1
                    }).then(function(t) {
                        e.set("taxLossHarvestingConsent", t.consent), e.set("taxLossHarvestingStatus", t.status)
                    })
                },
                createTlhStatus: function(e) {
                    return new t({
                        accountGroup: e
                    })
                }
            };
        return s
    }), define("common/constants/returnsConstants", [], function() {
        return {
            NEGATIVE_RETURNS_PERCENTAGE_THRESHOLD: -1,
            NEGATIVE_RETURNS_AGE_THRESHOLD_IN_YEARS: 2,
            NEGATIVE_RETURNS_TIP_STRING: "Temporary losses are more common in the first few years of investing, and the chance of seeing a loss in a BetaSmartz stock portfolio decreases over time."
        }
    }), define("hbs!views/summary/speedometer", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="speedometer', (u = n.small) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.small, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '"></div>\n<div class="needle', (u = n.small) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.small, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '"></div>\n', s
        });
        return t.registerPartial("views/summary/speedometer", n), n
    }), define("views/summary/speedometerView", ["common/betterment.views", "hbs!views/summary/speedometer"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "speedometer-view",
            templateHelpers: {
                small: function() {
                    return this.self.options.small ? "-small" : ""
                }
            },
            onInitialize: function() {
                if (this.options.onShow) {
                    var e = this;
                    this.onShow = function() {
                        this.options.onShow.call(e)
                    }
                }
            },
            onRender: function() {
                this.snapAllocation(this.options.allocation || 0), this.rendered = !0
            },
            _animate: function(e, t, n) {
                var r = this;
                t = t === 0 ? 0 : t || 1e3, this.$(".needle" + (this.options.small ? "-small" : "")).transition({
                    rotate: e * 200 - 100 + "deg"
                }, t, "out", function() {
                    n && n.call(r)
                })
            },
            snapAllocation: function(e, t) {
                this._animate(e, 0, t)
            },
            animateAllocation: function(e, t) {
                this.snapAllocation(0, function() {
                    this._animate(e, 1e3, t)
                })
            }
        })
    }), define("components/common/scripts/templateHelpers/supportUrl", ["hbs/handlebars", "components/common/scripts/util/handlebarsHelpers", "components/common/scripts/services/domainService"], function(e, t, n) {
        e.registerHelper("supportUrl", function(e) {
            return t.e(n.getBaseSupportUrl() + "/" + e)
        })
    }), define("components/common/scripts/templateHelpers/pct", ["hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t) {
        e.registerHelper("pct", function(e, n) {
            return t.pct(e, n || 0)
        })
    }), define("hbs!views/summary/accountReturn", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money", "components/common/scripts/templateHelpers/supportUrl", "components/common/scripts/templateHelpers/pct", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += "\n            ", (s = n.negativeReturnsTooltip) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.negativeReturnsTooltip, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n        ", r
            }

            function d(e, t) {
                return "gain"
            }

            function v(e, t) {
                return "loss"
            }

            function m(e, t) {
                return "\n                It can sometimes be positive even with negative earnings.\n            "
            }

            function g(e, t) {
                var r = "",
                    i;
                r += "\n                ", i = n["if"].call(e, e && e.timeWeightedNegativePersonalPositive, {
                    hash: {},
                    inverse: c.noop,
                    fn: c.program(10, y, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            ", r
            }

            function y(e, t) {
                return "\n                    It can sometimes be negative even with positive earnings.\n                "
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<li>\n    <div>\n        <span class="caps-label">Period since</span> ', (u = n.dateRangeSelect) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.dateRangeSelect, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "\n    </div>\n    <div></div>\n</li>\n\n<li>\n    <div>\n        ", (u = n.investedToggler) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.investedToggler, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "\n\n        What you&#39;ve invested\n    </div>\n    <div>\n        ", o = (u = n.totalInvested || t && t.totalInvested, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "totalInvested", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, a) : h.call(t, "money", o, a))) + '\n    </div>\n</li>\n\n<li class="sub invested">\n    <div>Deposits</div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.deposits, a) : h.call(t, "money", t && t.deposits, a))) + '</div>\n</li>\n<li class="sub invested">\n    <div>Withdrawals</div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.withdrawals, a) : h.call(t, "money", t && t.withdrawals, a))) + '</div>\n</li>\n<li class="sub invested">\n    <div>Other</div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.otherAdjustments, a) : h.call(t, "money", t && t.otherAdjustments, a))) + "</div>\n</li>\n\n<li>\n    <div>\n        ", (u = n.earnedToggler) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.earnedToggler, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "\n\n        What you&#39;ve earned\n        ", o = n["if"].call(t, t && t.showNegativeReturnsToolTip, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '\n    </div>\n\n    <div class="', o = n["if"].call(t, t && t.hasGain, {
                hash: {},
                inverse: c.program(5, v, i),
                fn: c.program(3, d, i)
            });
            if (o || o === 0) s += o;
            s += '">', o = (u = n.totalEarned || t && t.totalEarned, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "totalEarned", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, a) : h.call(t, "money", o, a))) + '</div>\n</li>\n\n<li class="sub earned">\n    <div>Market changes</div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.marketChanges, a) : h.call(t, "money", t && t.marketChanges, a))) + '</div>\n</li>\n<li class="sub earned">\n    <div>Dividends</div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.dividends, a) : h.call(t, "money", t && t.dividends, a))) + '</div>\n</li>\n<li class="sub earned">\n    <div><span class="unadvised-user-only">Betterment&#39;s fees</span><span class="advised-user-only">Fees</span></div>\n    <div>' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.fees, a) : h.call(t, "money", t && t.fees, a))) + '</div>\n</li>\n\n<hr />\n\n<li class="personal-return">\n    <div>\n        Earnings %\n        <div class="account-returns-help help-icon">\n            Your earnings include the impact of all cash flows, allocation changes and transfers you’ve made over the selected time. Earnings is calculated\n            by dividing your earnings (including market changes, dividends, and fees) by your net deposits or your average balance.\n  This return cannot be compared with other investments since the cashflows will be different.\n        </div>\n    </div>\n    <div>\n        ', o = (u = n.personalReturn || t && t.personalReturn, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "personalReturn", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, 1, a) : h.call(t, "pct", o, 1, a))) + '\n    </div>\n</li>\n\n<li class="investment-return">\n    <div>\n        Time-weighted return\n        <div class="account-returns-help help-icon">\n            The time-weighted return is the return of the BetaSmartz portfolio over the selected time. This is the time-weighted return excluding the impact of your own cashflows and transfers.\n\n            ', o = n["if"].call(t, t && t.timeWeightedPositivePersonalNegative, {
                hash: {},
                inverse: c.program(9, g, i),
                fn: c.program(7, m, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n            If you are comparing returns to other investments you hold, you should use this return.\n        </div>\n    </div>\n    <div>\n        ', o = (u = n.periodReturn || t && t.periodReturn, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "periodReturn", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, 1, a) : h.call(t, "pct", o, 1, a))) + "\n    </div>\n</li>\n", s
        });
        return t.registerPartial("views/summary/accountReturn", n), n
    }), define("models/experience", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
                url: "/dynamicExperience",
                isActualExperience: function() {
                    return this.num("id") > 0
                },
                markViewed: function() {
                    if (!this.get("completedDate")) return this.set("completedDate", "true", {
                        silent: !0
                    })
                },
                markConverted: function() {
                    if (!this.get("conversionDate")) return this.set("conversionDate", "true", {
                        silent: !0
                    })
                },
                save: function(e, n, i) {
                    if (!this.isActualExperience()) BMT.logWarn("splittest_expired Expired experiment: " + this.get("experimentName") + ", variation: " + this.get("variationName") + " code path still Active in WebApp.");
                    else if (this.hasChanged()) return this.trigger("change"), t.isObject(e) || t.isUndefined(e) || t.isNull(e) ? n = t.extend(n || {}, {
                        forceSave: !0
                    }) : i = t.extend(i || {}, {
                        forceSave: !0
                    }), r.RelationalModel.prototype.save.call(this, e, n, i);
                    return !1
                }
            }),
            s = r.Collection.extend({
                model: i,
                getVariationAndMarkViewed: function(e) {
                    var t = this.find(function(t) {
                        return t.get("variationName") === e
                    });
                    return t ? (t.markViewed(), t.save(), t) : !1
                },
                getExperimentAndMarkViewed: function(e, t) {
                    var n = this.find(function(t) {
                        return t.get("experimentName") === e
                    });
                    if (!n) return t && t(), !1;
                    n.markViewed();
                    var r = n.save({}, {
                        complete: t
                    });
                    return r || t && t(), n
                },
                getExperimentAndMarkConverted: function(e) {
                    var t = this.find(function(t) {
                        return t.get("experimentName") === e
                    });
                    return t ? (t.markConverted(), t.save(), t) : !1
                },
                hasVariation: function(e) {
                    return this.find(function(t) {
                        return t.get("variationName") === e
                    })
                }
            });
        return {
            Model: i,
            Collection: s
        }
    }), define("models/visitor", ["jquery", "backbone", "common/betterment.models", "models/experience"], function(e, t, n, r) {
        var i, s, o = n.RelationalModel.extend({
            url: "/client/api/visitor",
            relations: [{
                type: t.HasMany,
                key: "experiences",
                relatedModel: r.Model,
                collectionType: r.Collection
            }]
        });
        return {
            fetch: function() {
                return s ? s : (i = new o, s = i.fetch({
                    skipErrorAlert: !0,
                    success: function(e) {
                        BMT.analytics.registerProperties({
                            VisitorKey: e.get("visitorKey")
                        });
                        var t = e.get("experiences").map(function(e) {
                            return {
                                experimentName: e.get("experimentName"),
                                variationName: e.get("variationName")
                            }
                        });
                        BMT.logDebug("Visitor: " + e.get("visitorKey")), BMT.logDebug(t)
                    }
                }), s)
            },
            instance: function() {
                return i
            },
            hasVariation: function(e) {
                return this.getExperiences().hasVariation(e)
            },
            getExperiences: function() {
                return i ? i.get("experiences") : (BMT.logError("Tried to get experiences before the visitor was fetched."), new r.Collection)
            }
        }
    }), define("views/summary/accountReturnView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/summary/accountReturn", "hbs!views/tooltips/negativeReturns", "common/constants/returnsConstants", "models/visitor", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i, s, o, u, a) {
        return r.View.extend({
            template: i,
            tagName: "ul",
            className: "account-returns",
            events: {
                "opened #investedToggle": "expandInvested",
                "closed #investedToggle": "contractInvested",
                "opened #earnedToggle": "expandEarned",
                "closed #earnedToggle": "contractEarned",
                "change #accountReturnSelect": "updateAccountReturn",
                "mouseover .negative-returns": "fireNegativeReturnsHoverMixpanelEvent"
            },
            toolTips: {
                ".account-returns-help": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            templateHelpers: {
                dateRangeSelect: function() {
                    var e = function(e, t) {
                            return n.s('<span class="lefty">' + n.e(t) + "</span>" + '<span class="righty"> (' + n.e(e) + ")</span>")
                        },
                        r = this,
                        i = Date.now(),
                        s = this.self.model.account().date("createdDate"),
                        o = [{
                            value: "",
                            label: e(this.monthYear(s), "Account opened")
                        }];
                    i.daysBetween(s) > Date.DAYS_IN_YEAR && o.push({
                        value: "a",
                        label: e("Annualized", "Account opened")
                    });
                    var u = i.getDayOfYear(),
                        a = [{
                            value: u.toString(),
                            label: "Year to date"
                        }, {
                            value: "365",
                            label: "Last year"
                        }, {
                            value: "183",
                            label: "Last 6 months"
                        }];
                    return t.each(a, function(t) {
                        var n = i.clone().addDays(-1 * parseInt(t.value));
                        n.isAfter(s) && o.push({
                            value: t.value,
                            label: e(r.monthYear(n), t.label)
                        })
                    }), this.build_dropdown_menu(o, {
                        id: "accountReturnSelect",
                        value: this.self.model.get("annualized") ? "a" : this.self.model.get("startDaysAgo")
                    })
                },
                totalInvested: function() {
                    return this.self.model.invested()
                },
                totalEarned: function() {
                    return this.self.model.earned()
                },
                hasGain: function() {
                    return this.totalEarned() >= 0
                },
                investedToggler: function() {
                    return n.s(this.build_open_close_button({
                        id: "investedToggle"
                    }, {
                        small: !0
                    }))
                },
                earnedToggler: function() {
                    return n.s(this.build_open_close_button({
                        id: "earnedToggle"
                    }, {
                        small: !0
                    }))
                },
                totalPendingDeposits: function() {
                    return this.self.model.account().num("pendingDeposits")
                },
                showReturnsTooltip: function() {
                    return !0
                },
                showNegativeReturnsToolTip: function() {
                    if (!u.hasVariation("negative_returns_tooltip_on")) return !1;
                    var e = o.NEGATIVE_RETURNS_PERCENTAGE_THRESHOLD / 100,
                        t = o.NEGATIVE_RETURNS_AGE_THRESHOLD_IN_YEARS.years().ago(),
                        n = BMT.accountGroup.meetsNegativeReturnsPercentageThreshold(e) && BMT.accountGroup.meetsNegativeReturnsAgeThreshold(t);
                    if (this.self.options.isOverview) return n && BMT.analytics.track("ElementViewed", {
                        Type: "ToolTip",
                        Name: "NegativeReturns",
                        Location: "Overview"
                    }), n;
                    var r = !n && this.self.model.account().meetsNegativeReturnsPercentageThreshold(e) && this.self.model.account().meetsNegativeReturnsAgeThreshold(t);
                    return r && BMT.analytics.track("ElementViewed", {
                        Type: "ToolTip",
                        Name: "NegativeReturns",
                        Location: "GoalPanel"
                    }), r
                },
                negativeReturnsTooltip: function() {
                    return n.s(s({
                        tooltipClass: "account-returns-help",
                        negativeReturnsTipMessage: o.NEGATIVE_RETURNS_TIP_STRING
                    }))
                },
                timeWeightedPositivePersonalNegative: function() {
                    return this.self.model.periodReturn() > 0 && this.self.model.earned() < 0
                },
                timeWeightedNegativePersonalPositive: function() {
                    return this.self.model.periodReturn() < 0 && this.self.model.earned() > 0
                },
                hasPendingDeposits: function() {
                    return this.totalPendingDeposits() > 0
                },
                periodReturn: function() {
                    return this.self.model.periodReturn()
                },
                personalReturn: function() {
                    return this.self.model.personalReturn()
                }
            },
            onRender: function() {
                this.options.investedOpen && (this.$(".sub.invested").show(), this.$("#investedToggle").removeClass("open-sm").addClass("close-sm")), this.options.earnedOpen && (this.$(".sub.earned").show(), this.$("#earnedToggle").removeClass("open-sm").addClass("close-sm"))
            },
            expandInvested: function(e) {
                this.options.investedOpen = !0, this.$(".sub.invested").slideDown(), a.track("ElementClicked", {
                    Name: "SummaryExpand",
                    Type: "GoalDetail",
                    Location: "Summary",
                    Platform: "WebApp"
                })
            },
            contractInvested: function(e) {
                this.options.investedOpen = !1, this.$(".sub.invested").slideUp()
            },
            expandEarned: function(e) {
                this.options.earnedOpen = !0, this.$(".sub.earned").slideDown(), a.track("ElementClicked", {
                    Name: "SummaryExpand",
                    Type: "GoalDetail",
                    Location: "Summary",
                    Platform: "WebApp"
                })
            },
            contractEarned: function(e) {
                this.options.earnedOpen = !1, this.$(".sub.earned").slideUp()
            },
            contractAll: function() {
                this.contractInvested(), this.contractEarned(), this.$("#investedToggle").removeClass("close-sm").addClass("open-sm"), this.$("#earnedToggle").removeClass("close-sm").addClass("open-sm")
            },
            updateAccountReturn: function(t) {
                var n = e(t.currentTarget).val() || "",
                    r = n === "a";
                return r && (n = ""), a.track("ElementClicked", {
                    Name: "PeriodSinceChanged",
                    Type: this.options.isOverview ? "Overview" : "Goal",
                    Location: "Summary",
                    Platform: "WebApp"
                }), this.model.recalculate(n, r).then(function() {
                    this.render()
                }.bind(this))
            },
            fireNegativeReturnsHoverMixpanelEvent: function() {
                this.options.isOverview ? BMT.analytics.track("ElementViewed", {
                    Type: "ToolTip",
                    Name: "NegativeReturnsHover",
                    Location: "Overview"
                }) : BMT.analytics.track("ElementViewed", {
                    Type: "ToolTip",
                    Name: "NegativeReturnsHover",
                    Location: "GoalPanel"
                })
            }
        })
    }), define("views/summary/overviewView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/summary/overview", "hbs!views/tooltips/negativeReturns", "services/taxService", "services/taxLossHarvestingService", "common/constants/returnsConstants", "views/summary/speedometerView", "views/summary/accountReturnView", "components/common/scripts/models/appData", "models/visitor", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        return r.View.extend({
            template: i,
            regions: {
                overviewSpeedometerRegion: "#overviewSpeedometerRegion",
                accountReturnRegion: "#accountReturnRegion"
            },
            events: {
                "opened #overviewToggle": "expand",
                "closed #overviewToggle": "contract",
                "click .open-tlh-config": "openTlhConfig",
                "mouseover .overview-account-returns-help": "fireNegativeReturnsHoverMixpanelEvent"
            },
            templateHelpers: {
                joinDate: function() {
                    var e = this.self.model.get("parentUser").date("memberSince");
                    return this.self.model.is("investingSince") && (e = this.self.model.date("investingSince")), e
                },
                currentBalance: function() {
                    return BMT.accounts().totalBalanceWithPending()
                },
                pendingDeposits: function() {
                    return BMT.accounts().totalPendingDeposits()
                },
                hasPendingDeposits: function() {
                    return this.pendingDeposits() > 0
                },
                lifetimeReturn: function() {
                    return BMT.accountGroup.getAccountReturn().num("lifetimeReturn")
                },
                lifetimeEarned: function() {
                    return BMT.accountGroup.getAccountReturn().earned()
                },
                hasGain: function() {
                    return this.lifetimeEarned() >= 0
                },
                expanded: function() {
                    return this.self.expanded
                },
                tlhEnabled: function() {
                    return this.self.tlhEnabled()
                },
                showNegativeReturnsToolTip: function() {
                    if (!h.hasVariation("negative_returns_tooltip_on")) return !1;
                    var e = BMT.accountGroup.meetsNegativeReturnsPercentageThreshold(a.NEGATIVE_RETURNS_PERCENTAGE_THRESHOLD / 100) && BMT.accountGroup.meetsNegativeReturnsAgeThreshold(a.NEGATIVE_RETURNS_AGE_THRESHOLD_IN_YEARS.years().ago());
                    return e && BMT.analytics.track("ElementViewed", {
                        Type: "ToolTip",
                        Name: "NegativeReturns",
                        Location: "Overview"
                    }), e
                },
                negativeReturnsTooltip: function() {
                    return n.s(s({
                        tooltipClass: "overview-account-returns-help",
                        negativeReturnsTipMessage: a.NEGATIVE_RETURNS_TIP_STRING
                    }))
                },
                tlhAvailable: function() {
                    return !u.isNotAvailable(BMT.accountGroup) && BMT.accounts().hasInvestingAccount()
                },
                totalLossesHarvested: function() {
                    return u.lossesHarvested(BMT.accountGroup)
                },
                harvestedLossesThisYear: function() {
                    return u.lossesHarvestedThisYear(BMT.accountGroup)
                },
                hasHarvestedLossesInPriorYears: function() {
                    return this.harvestedLossesPriorYears() && this.harvestedLossesPriorYears().length > 0
                },
                harvestedLossesPriorYears: function() {
                    return u.lossesHarvestedPriorYears(BMT.accountGroup)
                },
                currentYear: function() {
                    return Date.now().getFullYear()
                },
                unrealizedLosses: function() {
                    return u.unrealizedLosses(BMT.accountGroup)
                },
                hasUnrealizedLosses: function() {
                    return this.unrealizedLosses() > 0
                },
                noLossesHarvested: function() {
                    return this.totalLossesHarvested() === 0
                },
                averageBondAllocation: function() {
                    return 1 - BMT.accountGroup.num("averageAllocation")
                },
                averageStockAllocation: function() {
                    return BMT.accountGroup.num("averageAllocation")
                },
                taxesSaved: function() {
                    return o.taxesSavedFromHarvestedAmount(this.harvestedLossesThisYear()).toFixed(0)
                },
                showReturnsTooltip: function() {
                    return !0
                },
                toggler: function() {
                    return n.s(this.build_open_close_button({
                        id: "overviewToggle",
                        "class": "left"
                    }, {
                        state: this.expanded() ? "close" : "open"
                    }))
                }
            },
            toolTips: {
                ".pending-deposits": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                },
                ".tlh-status": {
                    position: {
                        my: "top center",
                        at: "bottom center"
                    },
                    show: {
                        event: "mouseenter"
                    },
                    hide: {
                        event: "mouseleave click"
                    }
                },
                ".returns-help": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                },
                ".overview-account-returns-help": {
                    position: {
                        my: "top left",
                        at: "bottom center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            onRender: function() {
                this.$overview = this.$(".overview-wrapper"), this.$accountReturns = this.$("#accountReturnRegion"), this.$details = this.$(".details"), this.$returnsSummary = this.$(".returns-summary");
                var e = this;
                this.overviewSpeedometerRegion && this.overviewSpeedometerRegion.show(this.overviewSpeedometer = new f({
                    onShow: function() {
                        e.expanded && this.snapAllocation(e.model.num("averageAllocation"))
                    }
                })), this.accountReturnRegion && this.accountReturnRegion.show(this.accountReturnView = new l({
                    model: this.accountReturnView ? this.accountReturnView.model : BMT.accountGroup.getAccountReturn(),
                    investedOpen: this.accountReturnView && this.accountReturnView.options.investedOpen,
                    earnedOpen: this.accountReturnView && this.accountReturnView.options.earnedOpen,
                    isOverview: !0
                }))
            },
            onShow: function() {
                this.listenTo(this.model.get("accounts"), "change reset", this.render), this.listenTo(BMT.vent, "taxLossHarvesting:update", this.render)
            },
            allowOpenCloseClick: function() {
                return !this.animating
            },
            expand: function(e, t) {
                if (this.animating) return;
                this.originalHeight = this.$overview.height(), this.animating = !0, this.expanded = !0, this.$accountReturns.show(), this.overviewSpeedometer.snapAllocation(0), this.$overview.css({
                    height: this.$overview.height()
                }), this.$returnsSummary.hide(), this.$overview.animate({
                    height: 200
                }, t.slow ? 3e3 : 400, function() {
                    this.$overview.css({
                        height: "auto",
                        "min-height": 200
                    }), this.$details.fadeIn(function() {
                        this.overviewSpeedometer.animateAllocation(this.model.num("averageAllocation")), this.animating = !1
                    }.bind(this))
                }.bind(this)), p.track("ElementClicked", {
                    Name: "SummaryExpand",
                    Type: "Overview",
                    Location: "Summary",
                    Platform: "WebApp"
                })
            },
            contract: function(e, t) {
                if (this.animating) return;
                this.animating = !0, this.expanded = !1, this.$overview.css({
                    "min-height": "0",
                    height: this.$overview.height()
                }), this.$overview.animate({
                    height: this.originalHeight || 45
                }, t.slow ? 3e3 : 400, function() {
                    this.$details.hide(), this.$returnsSummary.fadeIn(), this.$accountReturns.slideUp(), this.animating = !1
                }.bind(this))
            },
            openTlhConfig: function(e) {
                e.preventDefault(), this.tlhEnabled() ? BMT.vent.trigger("openDrawer:showTlhRibbon", "whatToExpect") : BMT.vent.trigger("openDrawer:showTlhRibbon", "learnMore")
            },
            tlhEnabled: function() {
                return u.isUserOn(BMT.accountGroup)
            },
            fireNegativeReturnsHoverMixpanelEvent: function() {
                BMT.analytics.track("ElementViewed", {
                    Type: "ToolTip",
                    Name: "NegativeReturnsHover",
                    Location: "Overview"
                })
            }
        })
    }), define("hbs!views/summary/frontPanel", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <button class="small secondary light-blue goto-retirement-plan">', (s = n.retirementPlanButtonText) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.retirementPlanButtonText, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "</button>\n                ", r
            }

            function d(e, t) {
                return '\n                    <button class="flat secondary green small make-deposit">Deposit</button>\n                '
            }

            function v(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                    <span class="pending-deposits pending-deposits-icon">\n                        <div class="help-content">Your current balance includes a pending deposit of <strong class="bold-text">', i = (s = n.pendingDeposits || e && e.pendingDeposits, o = {
                    hash: {}
                }, s ? s.call(e, o) : c.call(e, "pendingDeposits", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : c.call(e, "money", i, o))) + "</strong>.</div>\n                    </span>\n                ", r
            }

            function m(e, t) {
                return "gain"
            }

            function g(e, t) {
                return "loss"
            }

            function y(e, t) {
                var r = "",
                    i, s;
                r += "\n                    ", (s = n.negativeReturnsTooltip) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.negativeReturnsTooltip, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s);
                if (i || i === 0) r += i;
                return r += "\n                ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += '<div class="left-side">\n    <table>\n        <tr class="no-rule">\n            <th class="goal-name">\n                <input class="left" type="text" name="name" maxlength="64" />\n                <div class="name-text">', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</div>\n                ", o = n["if"].call(t, t && t.showRetirementPlanButton, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '\n            </th>\n            <th class="balance">\n                <h3 class="caps-label">current balance</h3>\n                ', o = n["if"].call(t, t && t.shouldShowDepositButton, {
                hash: {},
                inverse: h.noop,
                fn: h.program(3, d, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n                ", o = n["if"].call(t, t && t.hasPendingDeposits, {
                hash: {},
                inverse: h.noop,
                fn: h.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n                ", o = (u = n.currentBalance || t && t.currentBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "currentBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "money", o, a))) + '\n            </th>\n        </tr>\n        <tr class="no-padding">\n            <td>\n                <div class="account-status-region"></div>\n                <div class="transaction-status-region"></div>\n            </td>\n            <td class="returns">\n                <h3 class="caps-label inline">Earnings</h3>\n                <span class="bold-text ', o = n["if"].call(t, t && t.hasGain, {
                hash: {},
                inverse: h.program(9, g, i),
                fn: h.program(7, m, i)
            });
            if (o || o === 0) s += o;
            s += '">', o = (u = n.lifetimeEarned || t && t.lifetimeEarned, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "lifetimeEarned", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "money", o, a))) + "</span>\n                ", o = n["if"].call(t, t && t.showNegativeReturnsToolTip, {
                hash: {},
                inverse: h.noop,
                fn: h.program(11, y, i)
            });
            if (o || o === 0) s += o;
            return s += '\n            </td>\n        </tr>\n    </table>\n</div>\n\n<div class="right-side">\n    <div class="right allocation">\n        <div class="bonds">\n            <div>Bonds</div>\n            <div class="pct">', o = (u = n.bondAllocation || t && t.bondAllocation, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "bondAllocation", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "pct", o, a))) + '</div>\n        </div>\n\n        <div id="frontSpeedometerRegion" class="speedometer-region"></div>\n\n        <div class="stocks">\n            <div>Stocks</div>\n            <div class="pct">', o = (u = n.stockAllocation || t && t.stockAllocation, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "stockAllocation", a)), s += l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "pct", o, a))) + "</div>\n        </div>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/summary/frontPanel", n), n
    }), define("components/common/scripts/util/errorHandler", ["jquery", "underscore", "components/common/scripts/viewHelpers/customerSupport", "components/common/scripts/util/handlebarsHelpers"], function(e, t, n, r) {
        function s() {
            return ["You don't have permission to perform that action. Please contact us at <a href=\"mailto:    ", n.getSupportEmail(), '">', n.getSupportEmail(), "</a> or give us a call at ", n.getSupportNumber(), "."].join("")
        }

        function o(e) {
            var t = i.errors[e.code] || i.errors.DEFAULT;
            return {
                title: typeof t.title == "function" ? t.title(e) : t.title,
                body: typeof t.body == "function" ? t.body(e) : t.body,
                handler: t.handler,
                buttons: t.buttons,
                noClose: typeof t.noClose != "undefined" ? t.noClose : !1,
                icon: t.icon || "block"
            }
        }
        var i = {
            errors: {
                WRONG_CREDENTIALS: {
                    title: "Username/Password Don't Match",
                    body: "The Username and Password don't match our records, please check them and try logging in again."
                },
                OVER_RESEND_REQUEST_LIMIT: {
                    title: "Resend Email Confirmation Error",
                    body: function() {
                        return ["Your verification email has already been resent. Please check all spam filters or bulk folders. If you still do not receive this email contact us at", n.getSupportEmail(), "or", n.getSupportNumber(), "for further assistance."].join(" ")
                    }
                },
                BAD_PARAMETER: {
                    title: "Invalid Parameter",
                    body: "One of the fields you entered doesn't appear to be formatted correctly. Please check and try again."
                },
                MISSING_PARAMETER: {
                    title: "Missing Parameter",
                    body: "We did not receive one of the fields. Please retype and try again."
                },
                ACCOUNT_DISABLED: {
                    title: "Account Disabled",
                    body: function() {
                        return ["This account has been closed or disabled. If you feel that this is an error, please contact us immediately at ", n.getSupportNumber(), "."].join("")
                    }
                },
                ACCOUNT_LOCKED: {
                    title: "Account Locked",
                    body: function() {
                        return ["For your security, your account has been locked due to multiple failed login attempts. Please use the reset password link, or contact us at ", n.getSupportEmail(), "."].join("")
                    }
                },
                WRONG_SECURITY_ANSWER: {
                    title: "Wrong Security Answer",
                    body: "That is not the correct answer. Please check your answer and try again."
                },
                WRONG_PASSWORD: {
                    title: "Wrong Password",
                    body: "This current password you entered doesn't match our records.  Please try again or contact us if you're having trouble."
                },
                NO_SUCH_USER: {
                    title: "Email Not Found",
                    body: function() {
                        return ["This email was not found in our user database. Please check your email address and verify it was used to set up your account. If you continue to receive this error, please call", n.getSupportNumber(), "for further assistance."].join(" ")
                    }
                },
                NO_SUCH_PASSWORD_RESET_KEY: {
                    title: "Invalid Password Reset Key",
                    body: function() {
                        return ["Please click the forgot password link to try again. If you continue to receive this error, please call", n.getSupportNumber(), "for further assistance."].join(" ")
                    }
                },
                ACCOUNT_NAME_EXISTS: {
                    title: "Choose a different goal name",
                    body: "Looks as though that goal name already exists. Please create a different goal name."
                },
                UNCONFIRMED_BANK_ACCOUNT: {
                    title: "Unconfirmed Bank Account",
                    body: "Your bank account is unconfirmed, please confirm it first before making a transaction."
                },
                DEPOSITS_MISMATCH: {
                    title: "Verification Amount Mismatch",
                    body: "The amounts entered do not match the verification deposits and withdrawals we sent to your linked checking account. Please check and try again."
                },
                PRICING_PLAN_CHANGE_LIMIT_EXCEEDED: {
                    title: "Pricing plan change limit exceeded",
                    body: function() {
                        return ["Pricing plan was NOT updated. You've changed your pricing plan more than twice in the past 30-days. Please contact us at", n.getSupportEmail(), "for assistance."].join(" ")
                    }
                },
                ALREADY_INVITED: {
                    icon: "warning",
                    title: "Already Invited",
                    body: "You have already added that email address! If you want to resend your prior invite to this person, use the resend button in the table below."
                },
                ALREADY_JOINED: {
                    icon: "warning",
                    title: "That person has already joined",
                    body: "You can only get rewarded for new customers. Please try another friend."
                },
                DEMO_USER: {
                    icon: "warning",
                    title: "Disabled In Demo",
                    body: "This function is disabled in the demo."
                },
                BAD_BENEFICIARY_DOB: {
                    title: "Invalid Beneficiary Birth Date",
                    body: "One of the birth dates you entered doesn't appear to be formatted correctly. Please check and try again."
                },
                MAX_TRANSFERS_LIMIT_REACHED: {
                    title: "Cannot Initiate Transfer",
                    body: "We're sorry, we cannot process this transfer today. The SEC's day trading rules do not allow transfers both in and out of an account on the same day. Since you've made a transfer in one direction today, you'll have to wait until tomorrow to transfer in the other direction."
                },
                BANK_ACCOUNT_RECENTLY_ADDED: {
                    title: "Bank Account Recently Added",
                    body: function() {
                        return ["Your bank account was recently added or changed. To protect your account, we restrict the number of times you can change your linked account. To change your linked account please call us at ", n.getSuspendedSupportNumber(), "."].join("")
                    }
                },
                SAME_ALLOCATION: {
                    title: "Same Allocation",
                    body: "Your allocation is already set at that level."
                },
                PENDING_CHANGE: {
                    title: "Pending Allocation Change",
                    body: "You already have an allocation change pending."
                },
                RECENT_CHANGE: {
                    title: "Recent Allocation Change",
                    body: "We're sorry, your allocation has NOT been updated because you have already made an allocation change today. SEC day trading rules require that we limit you to one allocation change per day."
                },
                USER_NAME_EXISTS: {
                    title: "Email Address In Use",
                    body: "This email address belongs to an existing BetaSmartz customer. Please login if that's your address, try another address, or contact us if you're having trouble."
                },
                IRA_HAS_PENDING_RECHARACTERIZATIONS: {
                    title: "Recharacterization Cannot Be Processed",
                    body: "Only one Recharacterization can be processed at a time. Please wait until your other Recharacterization completes, then try again. You can check the status on the Activity tab."
                },
                UNKNOWN_ROUTING_NUMBER: {
                    title: "Invalid Routing Number",
                    body: "We could not confirm your routing number. Please double-check your routing number is correct."
                },
                BANK_ACCOUNT_EXISTS: {
                    title: "Error",
                    body: function() {
                        return ["<p>Uh oh! That function did not work, we are sorry about that. If you continue to have this problem, please contact us at ", n.getSupportEmail(), ".</p>"].join("")
                    }
                },
                UNKNOWN: {
                    title: "Error",
                    body: function() {
                        return ["<p>Uh oh! That function did not work, we are sorry about that. If you continue to have this problem, please contact us at ", n.getSupportEmail(), ".</p>"].join("")
                    }
                },
                TOO_MUCH_RECENT_ACTIVITY: {
                    title: "Daily deposit limit reached",
                    body: function() {
                        return ["You've reached your daily deposit limit. For assistance please call ", n.getSupportNumber(), "."].join("")
                    }
                },
                UNAUTHORIZED: {
                    title: function(e) {
                        return e.title || "You can't do that right now"
                    },
                    body: function(e) {
                        return e.body || s()
                    }
                },
                CSRF_TOKEN_INVALID: {
                    title: "Error",
                    body: ["<p>Uh oh! That function did not work, we are sorry about that. If you continue to have this problem, please contact us at  ", n.getSupportEmail(), ".</p>"].join(""),
                    handler: function() {
                        window.location.reload()
                    }
                },
                DEFAULT: {
                    title: "Error",
                    body: function(e) {
                        return "An Error has occurred. We are sorry for the inconvenience. If you continue to have trouble, please report this Fault Code: " + r.e(e.code)
                    }
                }
            },
            getErrorCodeIfExists: function(t) {
                var n;
                try {
                    var r = e.parseJSON(t.responseText);
                    r && (r.error && r.error.code ? n = r.error.code : r.errorCode && (n = r.errorCode))
                } catch (i) {}
                return n
            },
            getErrorDetailsFromResponse: function(t) {
                var n = "UNKNOWN",
                    r, i;
                try {
                    var s = e.parseJSON(t.responseText);
                    s && (s.error ? (s.error.code && (n = s.error.code), s.error.title && (r = s.error.title), s.error.body && (i = s.error.body)) : s.errorCode && (n = s.errorCode))
                } catch (u) {}
                return o({
                    code: n,
                    title: r,
                    body: i
                })
            },
            getErrorContentForCode: function(e) {
                return o({
                    code: e
                })
            }
        };
        return i
    }), define("common/errorHandler", ["underscore", "common/betterment.models", "components/common/scripts/util/errorHandler", "components/common/scripts/viewHelpers/customerSupport"], function(e, t, n, r) {
        return e.extend(n.errors, {
            NOT_LOGGED_IN: {
                icon: "warning",
                title: "We thought you left!",
                body: "We hadn't heard from you for about 20 minutes, so for your security we logged you out of your account. Log back in to continue.",
                handler: function(e) {
                    BMT.vent.trigger("logout")
                }
            },
            PENDING_CONFIRMATION: {
                title: "Email Address Not Confirmed",
                body: function() {
                    return "For your security, you must confirm your email address before you can continue.  Please check for a confirmation link in your email account" + (BMT.user.isFull() ? " " + BMT.user.get("userName") : "") + "."
                },
                buttons: [{
                    id: "ok",
                    title: "OK"
                }, {
                    id: "resend",
                    title: "Resend"
                }],
                noClose: !0,
                icon: "warning",
                handler: function(e) {
                    if (e === "resend") {
                        var n = this;
                        this.block(), (new(t.Model.extend({
                            url: "/resendRequest"
                        }))).save({}, {
                            forceSave: !0,
                            success: function() {
                                BMT.flash("Your welcome email has been resent. Please check your inbox.")
                            },
                            complete: function() {
                                n.unblock(), BMT.modal.close(n)
                            }
                        })
                    } else BMT.modal.close(this)
                }
            },
            LOCKED_FROM_CHALLENGE_ATTEMPTS: {
                title: "Too many security question attempts",
                body: function() {
                    return ["Unfortunately the answer to your security question does not match what we have on file.  For your security we have locked your account.  Please call customer support at", r.getSupportNumber(), "and we will get you going again."].join(" ")
                },
                handler: function() {
                    BMT.vent.trigger("logout")
                }
            }
        }), n
    }), define("hbs!views/summary/autoWithdrawalIcon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="-344.9 257.3 39.8 34.6" preserveAspectRatio="xMidYMid meet">\n    <path d="M-309.4 268.5l-4.4 7.4 2.5 0c-0.3 3.2-1.7 6.1-4 8.4 -2.6 2.6-6.1 4.1-9.8 4.1 -3.7 0-7.2-1.4-9.8-4.1 -0.7-0.7-1.8-0.7-2.4 0 -0.7 0.7-0.7 1.8 0 2.4 3.3 3.3 7.6 5.1 12.2 5.1 4.6 0 9-1.8 12.2-5.1 2.9-2.9 4.7-6.7 5-10.8l2.7 0L-309.4 268.5 -309.4 268.5z" />\n    <path d="M-338.8 273.5c0.3-3.3 1.7-6.3 4-8.6 2.6-2.6 6.1-4.1 9.8-4.1 3.7 0 7.2 1.4 9.8 4.1 0.7 0.7 1.8 0.7 2.4 0 0.7-0.7 0.7-1.8 0-2.4 -3.3-3.3-7.6-5.1-12.2-5.1 -4.6 0-9 1.8-12.2 5.1 -3 3-4.8 6.9-5 11.1l-2.7 0 4.4 7.4 4.2-7.5L-338.8 273.5 -338.8 273.5z" />\n    <path d="M-331.4 272.7h12.6v3.3h-12.6V272.7z" />\n</svg>'
        });
        return t.registerPartial("views/summary/autoWithdrawalIcon", n), n
    }), define("hbs!views/summary/autoDepositIcon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="-344.8 257.3 39.8 34.6" preserveAspectRatio="xMidYMid meet">\n    <path d="M-309.3 268.5l-4.4 7.4 2.5 0c-0.3 3.2-1.7 6.1-4 8.4 -2.6 2.6-6.1 4.1-9.8 4.1 -3.7 0-7.2-1.4-9.8-4.1 -0.7-0.7-1.8-0.7-2.5 0 -0.7 0.7-0.7 1.8 0 2.4 3.3 3.3 7.6 5.1 12.2 5.1 4.6 0 9-1.8 12.2-5.1 2.9-2.9 4.7-6.7 5-10.8l2.6 0L-309.3 268.5 -309.3 268.5z" />\n    <path d="M-338.7 273.5c0.3-3.3 1.7-6.3 4-8.6 2.6-2.6 6.1-4.1 9.8-4.1 3.7 0 7.2 1.4 9.8 4.1 0.7 0.7 1.8 0.7 2.4 0 0.7-0.7 0.7-1.8 0-2.4 -3.3-3.3-7.6-5.1-12.2-5.1 -4.6 0-9 1.8-12.2 5.1 -3 3-4.8 6.9-5 11.1l-2.6 0 4.4 7.4 4.2-7.5L-338.7 273.5 -338.7 273.5z" />\n</svg>'
        });
        return t.registerPartial("views/summary/autoDepositIcon", n), n
    }), define("hbs!views/summary/smartDepositIcon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="-345 257.3 39.8 34.6" preserveAspectRatio="xMidYMid meet">\n    <path d="M-309.4 268.5l-4.4 7.4 2.5 0c-0.3 3.2-1.7 6.1-4 8.4 -2.6 2.6-6.1 4.1-9.8 4.1 -3.7 0-7.2-1.4-9.8-4.1 -0.7-0.7-1.8-0.7-2.4 0 -0.7 0.7-0.7 1.8 0 2.4 3.3 3.3 7.6 5.1 12.2 5.1 4.6 0 9-1.8 12.2-5.1 2.9-2.9 4.7-6.7 5-10.8l2.7 0L-309.4 268.5 -309.4 268.5z" />\n    <path d="M-338.9 273.5c0.3-3.3 1.7-6.3 4-8.6 2.6-2.6 6.1-4.1 9.8-4.1 3.7 0 7.2 1.4 9.8 4.1 0.7 0.7 1.8 0.7 2.4 0 0.7-0.7 0.7-1.8 0-2.4 -3.3-3.3-7.6-5.1-12.2-5.1 -4.6 0-9 1.8-12.2 5.1 -3 3-4.8 6.9-5 11.1l-2.7 0 4.4 7.4 4.2-7.5L-338.9 273.5 -338.9 273.5z" />\n    <path d="M-318.8 272.7h-5v-5h-3.3v5h-5v3.3h5v5h3.3v-5h5V272.7" />\n</svg>'
        });
        return t.registerPartial("views/summary/smartDepositIcon", n), n
    }), define("components/common/scripts/templateHelpers/autoTransactionIcon", ["hbs/handlebars", "hbs!views/summary/autoWithdrawalIcon", "hbs!views/summary/autoDepositIcon", "hbs!views/summary/smartDepositIcon"], function(e, t, n, r) {
        e.registerHelper("autoTransactionIcon", function(i, s) {
            var o = {
                autoWithdrawal: t,
                autoDeposit: n,
                smartDeposit: r
            };
            return new e.SafeString(o[i]())
        })
    }), define("components/common/scripts/templateHelpers/moneyCents", ["hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t) {
        e.registerHelper("moneyCents", function(e, n) {
            return t.moneyCents(e, n || 2)
        })
    }), define("hbs!views/summary/transactionStatus", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/autoTransactionIcon", "components/common/scripts/templateHelpers/money", "components/common/scripts/templateHelpers/moneyCents"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "on"
            }

            function d(e, t) {
                return "off"
            }

            function v(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n        <div class="copy">Auto-Deposit on <span class="next-transaction">', (s = n.nextAutomaticDepositOn) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.nextAutomaticDepositOn, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '</span></div>\n        <div class="amount">' + l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.automaticDeposit, i == null || i === !1 ? i : i.amount), 2, o) : c.call(e, "money", (i = e && e.automaticDeposit, i == null || i === !1 ? i : i.amount), 2, o))) + "</div>\n    ", r
            }

            function m(e, t) {
                return '\n        <div class="copy">Auto-Deposit off</div>\n    '
            }

            function g(e, t) {
                var r = "",
                    i, s, o;
                r += '\n<div class="auto-withdrawal ', i = n["if"].call(e, e && e.autoWithdrawalEnabled, {
                    hash: {},
                    inverse: h.program(3, d, t),
                    fn: h.program(1, p, t)
                });
                if (i || i === 0) r += i;
                r += ' ">\n    ' + l((s = n.autoTransactionIcon || e && e.autoTransactionIcon, o = {
                    hash: {}
                }, s ? s.call(e, "autoWithdrawal", o) : c.call(e, "autoTransactionIcon", "autoWithdrawal", o))) + "\n    ", i = n["if"].call(e, e && e.autoWithdrawalEnabled, {
                    hash: {},
                    inverse: h.program(12, b, t),
                    fn: h.program(10, y, t)
                });
                if (i || i === 0) r += i;
                return r += "\n</div>\n", r
            }

            function y(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n        <div class="copy">Auto-Withdrawal on <span class="next-transaction">', (s = n.nextAutoWithdrawalOn) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.nextAutoWithdrawalOn, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '</span></div>\n        <div class="amount">' + l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.automaticWithdrawal, i == null || i === !1 ? i : i.amount), 2, o) : c.call(e, "money", (i = e && e.automaticWithdrawal, i == null || i === !1 ? i : i.amount), 2, o))) + "</div>\n    ", r
            }

            function b(e, t) {
                return '\n        <div class="copy">Auto-Withdrawal off</div>\n    '
            }

            function w(e, t) {
                return "";
                var r = "",
                    i, s, o;
                r += '\n<div class="smart-deposit ', i = n["if"].call(e, e && e.smartDepositEnabled, {
                    hash: {},
                    inverse: h.program(3, d, t),
                    fn: h.program(1, p, t)
                });
                if (i || i === 0) r += i;
                r += " ", i = n.unless.call(e, e && e.smartDepositEligible, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(15, E, t)
                });
                if (i || i === 0) r += i;
                r += '">\n    ' + l((s = n.autoTransactionIcon || e && e.autoTransactionIcon, o = {
                    hash: {}
                }, s ? s.call(e, "smartDeposit", o) : c.call(e, "autoTransactionIcon", "smartDeposit", o))) + "\n    ", i = n["if"].call(e, e && e.smartDepositEnabled, {
                    hash: {},
                    inverse: h.program(19, x, t),
                    fn: h.program(17, S, t)
                });
                if (i || i === 0) r += i;
                r += "\n\n    ", i = n.unless.call(e, e && e.smartDepositEnabled, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(21, T, t)
                });
                if (i || i === 0) r += i;
                return r += "\n</div>\n", r
            }

            function E(e, t) {
                return "disabled"
            }

            function S(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n        <div class="copy">SmartDeposit on</div>\n        <div class="amount">Up to ' + l((s = n.moneyCents || e && e.moneyCents, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.smartDepositConfig, i == null || i === !1 ? i : i.max_deposit_cents), 2, o) : c.call(e, "moneyCents", (i = e && e.smartDepositConfig, i == null || i === !1 ? i : i.max_deposit_cents), 2, o))) + "</div>\n    ", r
            }

            function x(e, t) {
                return '\n        <div class="copy">SmartDeposit off</div>\n    '
            }

            function T(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="help-content">\n            ', (s = n.eligibilityMessage) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.eligibilityMessage, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n        </div>\n    ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += '<div class="auto-deposit ', o = n["if"].call(t, t && t.automaticDepositEnabled, {
                hash: {},
                inverse: h.program(3, d, i),
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '">\n    ' + l((u = n.autoTransactionIcon || t && t.autoTransactionIcon, a = {
                hash: {}
            }, u ? u.call(t, "autoDeposit", a) : c.call(t, "autoTransactionIcon", "autoDeposit", a))) + "\n    ", o = n["if"].call(t, t && t.automaticDepositEnabled, {
                hash: {},
                inverse: h.program(7, m, i),
                fn: h.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n    <div class="help-content">\n        <p>Use automatic deposit to set up free recurring transfers from your linked account.</p>\n        <p>You choose the amount and frequency and can change these or discontinue at any time.</p>\n    </div>\n</div>\n\n', o = n["if"].call(t, t && t.autoWithdrawalEligible, {
                hash: {},
                inverse: h.noop,
                fn: h.program(9, g, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n", o = n["if"].call(t, t && t.hasSmartDepositsFeature, {
                hash: {},
                inverse: h.noop,
                fn: h.program(14, w, i)
            });
            if (o || o === 0) s += o;
            return s += "\n\n", s
        });
        return t.registerPartial("views/summary/transactionStatus", n), n
    }), define("components/transaction/scripts/constants/transactionConstants", [], function() {
        var e = 10,
            t = 3e5;
        return {
            MINIMUM: e,
            MINIMUM_CENTS: e * 100,
            DEPOSIT_MAXIMUM: t,
            DEPOSIT_MAXIMUM_CENTS: t * 100,
            ROLLOVER_MINIMUM: .01,
            ROLLOVER_MAXIMUM: 6e5,
            WITHDRAW_ALL_THRESHOLD: .98
        }
    }), define("models/automaticTransaction", ["jquery", "underscore", "backbone", "common/betterment.models", "components/transaction/scripts/constants/transactionConstants", "components/common/scripts/util/formatter"], function(e, t, n, r, i, s) {
        var o = "ANNUALLY",
            u = "FIRST_TUESDAY_OF_THE_MONTH",
            a = "MONTHLY",
            f = "TWICE_A_MONTH",
            l = "EVERY_OTHER_WEEK",
            c = "WEEKLY",
            h = 100,
            p = function(e, t, n) {
                var r = 1,
                    i = parseFloat(t),
                    s = 0;
                switch (e) {
                    case f:
                        r = 2;
                        break;
                    case c:
                        r = 52 / 12;
                        break;
                    case l:
                        r = 52 / 12 / 2;
                        break;
                    case o:
                        r = 1 / 12
                }
                return s = n ? i * r : i / r, s
            },
            d = r.RelationalModel.extend({
                onInitialize: function() {
                    t.extend(this, new n.Memento(this)), this.isNew() && this.set({
                        frequency: this.get("frequency") || "MONTHLY"
                    }, {
                        silent: !0
                    })
                },
                isValidForScheduling: function() {
                    return this._isValidForScheduling(Date.today())
                },
                _isValidForScheduling: function(e) {
                    return e = e || Date.today(), this.hasSameDaySelected() ? !1 : !this.isFrequency([a, f]) && this.isDaySelected(e) && this.isNew() ? !1 : !this.isFrequency(f) && !this.has("transactionDateTime1") ? !1 : this.isFrequency([f, a]) && this.date("transactionDateTime1").getDate() > 28 ? !1 : this.isFrequency([f]) && this.date("transactionDateTime2").getDate() > 28 ? !1 : this.isFrequency([l, c]) && this.date("transactionDateTime1").isWeekend() ? !1 : this.isFrequency([l, c]) && this.date("transactionDateTime1").isBefore(e) && this.isNew() ? !1 : this.isFrequency(o) && this.date("transactionDateTime1").getDate() === 29 && this.date("transactionDateTime1").getMonth() === 1 ? !1 : this.isFrequency(u) || this.hasAnyDateSelected()
                },
                isInstanceOf: function(e) {
                    return this instanceof e
                },
                isAutomaticDeposit: function() {
                    return this.transactionType && this.transactionType === "automaticDeposit"
                },
                isAutomaticWithdrawal: function() {
                    return this.transactionType && this.transactionType === "automaticWithdrawal"
                },
                getAccount: function() {
                    return this.get("account")
                },
                isFrequency: function(e) {
                    return t.isArray(e) ? t.contains(e, this.get("frequency")) : this.get("frequency") === e
                },
                hasBothDatesSelected: function() {
                    return this.has("transactionDateTime1") && this.has("transactionDateTime2")
                },
                hasAnyDateSelected: function() {
                    return this.has("transactionDateTime1") || this.has("transactionDateTime2")
                },
                hasSameDaySelected: function() {
                    return this.hasBothDatesSelected() && this.date("transactionDateTime1").isSameDay(this.date("transactionDateTime2"))
                },
                isDaySelected: function(e) {
                    return this.date("transactionDateTime1").isSameDay(e) || this.date("transactionDateTime2").isSameDay(e)
                },
                getNextTransactionAmount: function() {
                    var e = this.num("amount");
                    return this.willTransactOnSameDate() ? 2 * e : e
                },
                willTransactOnSameDate: function() {
                    if (!this.isFrequency(f) || !this.hasBothDatesSelected()) return !1;
                    var e = new d({
                            frequency: a,
                            transactionDateTime1: this.get("transactionDateTime1")
                        }),
                        t = new d({
                            frequency: a,
                            transactionDateTime1: this.get("transactionDateTime2")
                        });
                    return e.estimatedNextTransactionDate().isSameDay(t.estimatedNextTransactionDate())
                },
                nextTransactionDateOrEstimate: function() {
                    if (this.has("nextTransaction")) return this.date("nextTransaction");
                    var e = this.estimatedNextTransactionDate();
                    return e.isEstimate = !0, e
                },
                estimatedNextTransactionDate: function() {
                    return this.estimatedNextTransactionDateFrom(Date.today(), !0)
                },
                estimatedNextTransactionDateFrom: function(e, n) {
                    if (!this.isValidForScheduling()) return null;
                    var r = this.getBaseProjectionDate(e),
                        i = this.getPossibleDepositDates(r, n),
                        s = t.filter(i, function(e) {
                            return e.isSameDayOrAfter(r)
                        });
                    return t.min(s)
                },
                getPossibleDepositDates: function(e, t) {
                    var n = -7,
                        r = this.isFrequency(o) ? 370 : 35,
                        i = (new Date(e)).addDays(n),
                        s = (new Date(e)).addDays(r),
                        u = [];
                    while (i.addDays(1).isBefore(s)) this.isDepositDate(i) && u.push(new Date(i));
                    return t ? this.respectHolidaysAndWeekends(u) : u
                },
                respectHolidaysAndWeekends: function(e) {
                    var n = this.date("lastPlanChange");
                    return t.chain(e).map(function(e) {
                        if (!n.isInvalid() && e.isBefore(n)) return null;
                        while (e.isHolidayOrWeekend()) e.addDays(1);
                        return e
                    }).compact().value()
                },
                getBaseProjectionDate: function(e) {
                    var n;
                    return this.hasBothDatesSelected() && this.isFrequency(f) ? n = t.chain([this.date("transactionDateTime1"), this.date("transactionDateTime2")]).sortBy(function(e) {
                        return e
                    }).first().value() : this.isFrequency([l, c]) && (n = this.has("transactionDateTime1") ? this.date("transactionDateTime1") : this.date("transactionDateTime2")), n && n.isAfter(e) ? n : e
                },
                isDepositDate: function(e) {
                    return this._isDepositDate(e, Date.today())
                },
                _isDepositDate: function(e, t) {
                    if (!this._isValidForScheduling(t) || e.isAfterTodaysAutomaticDepositCutoff()) return !1;
                    var n = this.date("transactionDateTime1"),
                        r = this.date("transactionDateTime2");
                    if (this.isFrequency([c, l]) && e.isBefore(n)) return !1;
                    if (this.isFrequency(u)) {
                        var i = new Date(e.getFullYear(), e.getMonth(), 1);
                        while (i.getDay() !== 2) i.addDays(1);
                        return e.isSameDay(i)
                    }
                    if (e.isSameDayOfMonth(n)) {
                        if (this.isFrequency([a, f]) && !e.isSameDay(t) || this.isFrequency(o) && e.getMonth() === n.getMonth()) return !0
                    } else {
                        if (e.isSameDayOfMonth(r) && this.isFrequency([f]) && !e.isSameDay(t)) return !0;
                        if (r && e.isSameDayOfMonth(r)) return !0
                    }
                    if (e.getDay() === n.getDay()) {
                        if (this.isFrequency(c)) return !0;
                        if (this.isFrequency(l)) {
                            var s = n.daysBetween(e),
                                h = 14;
                            if (s % h === 0) return !0
                        }
                    }
                    return !1
                },
                displayDate: function() {
                    var e = this.date("nextTransaction");
                    return e.toString("MMM d") + s.ordinalSuffix(e.getDate())
                },
                monthlyAmount: function() {
                    return this.not("enabled") ? 0 : d.monthlyize(this.get("frequency"), this.num("amount"))
                },
                periodicAmount: function() {
                    return this.not("enabled") ? 0 : this.num("amount")
                },
                frequencyText: function() {
                    var e = this.date("transactionDateTime1"),
                        t = this.date("transactionDateTime2"),
                        n = "";
                    if (this.isFrequency(u)) n = "on the " + "First Tuesday".bold() + " of each month";
                    else if (this.isFrequency(a)) n = "on the " + e.dateWithOrdinal().bold() + " of each month";
                    else if (this.isFrequency(f)) {
                        if (this.hasBothDatesSelected()) {
                            var r = e.isBefore(t) ? [e, t] : [t, e];
                            n = "on the " + r[0].dateWithOrdinal().bold() + " &amp; " + r[1].dateWithOrdinal().bold() + " of each month"
                        } else if (this.hasAnyDateSelected()) {
                            var i = this.has("transactionDateTime1") ? this.date("transactionDateTime1") : this.date("transactionDateTime2");
                            n = "on the " + i.dateWithOrdinal().bold() + " of each month"
                        }
                    } else if (this.isFrequency([l, c])) n = "every " + (this.isFrequency(l) ? "other " : "") + e.getDayName().bold();
                    else if (this.isFrequency(o)) {
                        var s = e.getMonthName() + " " + e.dateWithOrdinal();
                        n = "on " + s.bold() + " every year"
                    }
                    return n
                },
                frequencySuffix: function() {
                    if (this.isFrequency(this.getClass().FIRST_TUESDAY_OF_THE_MONTH)) return "on the first Tuesday of each month";
                    if (this.isFrequency(this.getClass().MONTHLY)) return "every month";
                    if (this.isFrequency(this.getClass().TWICE_A_MONTH)) return "twice a month";
                    if (this.isFrequency(this.getClass().EVERY_OTHER_WEEK)) return "every other week";
                    if (this.isFrequency(this.getClass().WEEKLY)) return "every week";
                    if (this.isFrequency(this.getClass().ANNUALLY)) return "once a year"
                },
                validation: {
                    amount: {
                        required: !0,
                        range: [10, i.DEPOSIT_MAXIMUM]
                    },
                    frequency: {
                        required: !0
                    },
                    transactionDateTime1: {
                        required: !0,
                        pattern: /^[0-9]{14}$/,
                        msg: "Pick a date"
                    },
                    transactionDateTime2: function(e, t, n, r) {
                        var i = n.frequency === f && !/^[0-9]{14}$/.exec(n.transactionDateTime2);
                        return i ? "Pick a second date" : !1
                    }
                }
            }, {
                ANNUALLY: o,
                FIRST_TUESDAY_OF_THE_MONTH: u,
                MONTHLY: a,
                TWICE_A_MONTH: f,
                EVERY_OTHER_WEEK: l,
                WEEKLY: c,
                MIN_BUILDER_PLAN_AUTO_DEPOSIT: h,
                monthlyize: function(e, t) {
                    return p(e, t, !0).ceil(2)
                },
                demonthlyize: function(e, t) {
                    return p(e, t, !1).ceil(2)
                }
            });
        return d
    }), define("views/transfer/automaticTransactionSettingsModalView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/automaticTransaction"], function(e, t, n, r, i) {
        var s = r.ModalView.extend({
            template: "transfer/automaticTransactionSettingsModal",
            className: "automatic-transaction-settings",
            regions: {
                settingsRegion: ".settings-region"
            },
            options: {
                hideCloseButton: !0
            },
            events: {
                "click h1 .toggle-switch .switch": "toggleActiveAutomaticTransaction"
            },
            templateHelpers: {
                transactionType: function() {
                    return this.self.options.SettingsViewClass.transactionType === "automaticWithdrawal" ? "Withdrawal" : "Deposit"
                },
                verificationFlow: function() {
                    return !!this.self.options.settingsViewOptions.verificationFlow
                },
                enabledOnInitialize: function() {
                    return this.self.enabledOnInitialize
                }
            },
            onInitialize: function() {
                this.settingsView = new this.options.SettingsViewClass(this.options.settingsViewOptions), this.enabledOnInitialize = this.settingsView.model.get("enabledOnInitialize"), this.baseTemplate = this.settingsView.template
            },
            onRender: function() {
                this.settingsRegion.show(this.settingsView), this.listenTo(this.settingsView, "completeDeposit", function() {
                    BMT.modal.close(this)
                }.bind(this))
            },
            toggleActiveAutomaticTransaction: function() {
                var e = this.$(".toggle-switch .switch");
                e.css("left") === "0px" ? e.animate({
                    left: "-40px"
                }, 200, function() {
                    this.settingsView.model.set("enabled", !0), this.settingsView.template = this.baseTemplate, this.settingsView.render(), this.settingsView.onShow()
                }.bind(this)) : e.animate({
                    left: "0px"
                }, 200, function() {
                    this.settingsView.model.set("enabled", !1), this.settingsView.template = this.options.SettingsViewClass.emptyAutoTransactionTemplate, this.settingsView.render()
                }.bind(this))
            }
        }, {
            openForAccount: function(e, n) {
                var r = n.get(e.transactionType);
                r || (r = e.getModelInstance(), r.set("account", n));
                var o = t.extend({
                        model: r,
                        account: n
                    }, r ? {} : {
                        frequency: i.MONTHLY
                    }),
                    u = new s({
                        SettingsViewClass: e,
                        settingsViewOptions: o
                    });
                return BMT.modal.show(u), u
            }
        });
        return s
    }), define("hbs!views/transfer/automaticDepositSettingsEmpty", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="modal-body">\n    Your automatic deposit is currently off.\n\n    <div class="info-tip clearfix">\n        <div class="arrow"></div>\n        <div class="icon">\n            <div class="lightbulb-tip-icon"></div>\n        </div>\n        <div class="text">\n            Turning on automatic deposit helps you reach your goal faster, and also <a target="_blank" href="http://support.betasmartz.com/customer/portal/articles/987453-how-and-when-is-my-portfolio-rebalanced-">rebalances your portfolio</a> in a tax efficient way.\n        </div>\n    </div>\n</div>\n\n<div class="modal-buttons">\n    <button id="ok">OK</button>\n</div>\n'
        });
        return t.registerPartial("views/transfer/automaticDepositSettingsEmpty", n), n
    }), define("models/automaticDeposit", ["jquery", "underscore", "models/automaticTransaction"], function(e, t, n) {
        var r = 100,
            i = "automaticDeposit",
            s = n.extend({
                url: "/" + i,
                transactionType: i
            }, {
                MIN_BUILDER_PLAN_AUTO_DEPOSIT: r,
                totalMonthlyDeposits: function() {
                    return BMT.accounts().reduce(function(e, t) {
                        return e + t.monthlyDepositAmount()
                    }, 0, this)
                }
            });
        return s
    }), define("components/common/scripts/util/strings", ["underscore"], function(e) {
        return {
            snakeCase: function(e) {
                return e.replace(/([A-Z])/g, "_$1").toLowerCase()
            },
            camelCase: function(e) {
                return e.replace(/[-_\s]+(.)?/g, function(e, t) {
                    return t ? t.toUpperCase() : ""
                })
            },
            snakeCaseKeys: function(t) {
                return e.isObject(t) ? e.reduce(t, function(t, n, r) {
                    var i = this.snakeCase(r);
                    return e.isArray(n) ? t[i] = this.snakeCaseArray(n) : e.isObject(n) ? t[i] = this.snakeCaseKeys(n) : t[i] = n, t
                }, {}, this) : t
            },
            snakeCaseArray: function(t) {
                return e.isArray(t) ? e.map(t, function(t) {
                    return e.isArray(t) ? this.snakeCaseArray(t) : e.isObject(t) ? this.snakeCaseKeys(t) : t
                }, this) : t
            },
            camelCaseKeys: function(t) {
                return e.isObject(t) ? e.reduce(t, function(t, n, r) {
                    var i = this.camelCase(r);
                    return e.isArray(n) ? t[i] = this.camelCaseArray(n) : e.isObject(n) ? t[i] = this.camelCaseKeys(n) : t[i] = n, t
                }, {}, this) : t
            },
            camelCaseArray: function(t) {
                return e.isArray(t) ? e.map(t, function(t) {
                    return e.isArray(t) ? this.camelCaseArray(t) : e.isObject(t) ? this.camelCaseKeys(t) : t
                }, this) : t
            }
        }
    }), define("components/common/scripts/models/v2/baseCollection", ["components/common/scripts/models/baseCollection"], function(e) {
        var t = "/client/api",
            n = {
                url: function() {
                    return t + this.getEndpoint()
                }
            },
            r = {
                API_URL: t
            };
        return e.extend(n, r)
    }), define("components/common/scripts/models/v2/baseModels", ["underscore", "components/common/scripts/util/strings", "components/common/scripts/models/baseModels", "components/common/scripts/models/v2/baseCollection"], function(e, t, n, r) {
        function i(t) {
            var n = e.keys(t)[0],
                r = t[n];
            return /^(bettermentdb|institutional)([A-Z][a-z0-9]+)*Id$/.test(n) ? "f" + r : r
        }

        function s(n) {
            return n.extend({
                _originalIdParams: {},
                url: function() {
                    return r.API_URL + this.getEndpoint()
                },
                destroy: function(t) {
                    return t = e.extend(t || {}, {
                        data: null
                    }), n.prototype.destroy.call(this, t)
                },
                parse: function(e, n) {
                    return t.camelCaseKeys(e)
                },
                toJSON: function() {
                    var e = n.prototype.toJSON.apply(this);
                    return t.snakeCaseKeys(e)
                },
                toViewJSON: function() {
                    return n.prototype.toJSON.apply(this)
                },
                setIdParam: function(e, t) {
                    return this._originalIdParams[e] = t, this.set(e, i(t))
                },
                getIdParamsForKey: function(e) {
                    return this._originalIdParams[e]
                },
                date: function(e, t) {
                    return t ? this.set(e, t.toJSONString()) : new Date(Date._parse(this.get(e)))
                },
                pct: function(e, t) {
                    return this.num(e) / 100
                },
                hasDollars: function(e) {
                    return this.hasCents(e)
                },
                hasCents: function(e) {
                    return this.has(e + "Cents")
                },
                dollars: function(t, n) {
                    return e.isUndefined(n) ? (this.cents(t) / 100).round(2) : e.isNumber(n) ? this.cents(t, Math.round(n * 100)) : this.cents(t, null)
                },
                cents: function(t, n) {
                    return t += "Cents", e.isUndefined(n) ? Math.round(this.num(t)) : e.isNumber(n) ? this.set(t, Math.round(n)) : this.set(t, null)
                },
                toCents: function(t) {
                    return e.isNumber(t) ? Math.round(t * 100) : null
                },
                toDollars: function(t) {
                    return e.isNumber(t) ? (t / 100).round(2) : null
                }
            })
        }
        return {
            Model: s(n.Model),
            RelationalModel: s(n.RelationalModel)
        }
    }), define("models/v2/financialPlanAccount", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("financialPlan").getEndpoint() + "/accounts"
            },
            relatedModels: ["financialPlan"]
        };
        return e.Model.extend(t)
    }),define("models/v2/externalAccountCollection", ["underscore", "components/common/scripts/models/v2/baseCollection", "models/v2/externalAccount", "components/common/scripts/modules/async"], function(e, t, n, r) {
        var i = {
            endpoint: "/external_accounts",
            model: n,
            save: function(e) {
                var t = this.map(function(t) {
                    return t.has("investmentType") || t.set("investmentType", "stocks"), t.has("institutionName") || t.set("institutionName", "no_name"), t.save({}, e)
                });
                return r.whenAll(t)
            },
            getTotalContributions: function() {
                return this.models.reduce(function(e, t) {
                    return e + t.dollars("annualContribution")
                }, 0)
            },
            hasEmployerPlan: function() {
                return this.any(function(e) {
                    return !e.isSpousal() && e.isEmployerPlan() && e.dollars("annualContribution") > 0
                })
            },
            hasSpouseEmployerPlan: function() {
                return this.any(function(e) {
                    return e.isSpousal() && e.isEmployerPlan() && e.dollars("annualContribution") > 0
                })
            }
        };
        return t.extend(i)
    }), define("components/account/scripts/constants/accountConstants", [], function() {
        return {
            MIN_TERM: 1,
            MAX_TERM: 50,
            LOW_BALANCE_THRESHOLD: 10,
            MAX_TARGET_AMOUNT: 1e8
        }
    }), define("components/account/scripts/constants/retirementConstants", ["components/account/scripts/constants/accountConstants"], function(e) {
        var t = 90,
            n = t - e.MAX_TERM,
            r = 18,
            i = 150,
            s = i - 1,
            o = s - 1,
            u = r + 1,
            a = u + 1;
        return {
            RETIREE_DEFAULT_INCOME_AGE: t,
            INCOME_ADVICE_MIN_AGE: n,
            MINIMUM_AGE: r,
            MAXIMUM_LIFE_EXPECTANCY: i,
            MAXIMUM_RETIREMENT_AGE: s,
            MAXIMUM_AGE: o,
            MINIMUM_RETIREMENT_AGE: u,
            MINIMUM_LIFE_EXPECTANCY: a,
            RETIREE_INCOME_MINIMUM_TERM: 10,
            RETIREE_MINIMUM_TERM: 1,
            RETIREMENT_AGE: 67,
            DEFAULT_LIFE_EXPECTANCY: 90,
            DEFAULT_RETIREMENT_AGE: 67,
            ASSUMED_FEE_RATE: .15,
            MINIMUM_SOCIAL_SECURITY_COLLECTION_AGE: 62,
            IRA_CATCHUP_AGE: 50
        }
    }), define("models/v2/financialPlan", ["underscore", "backbone", "components/common/scripts/models/v2/baseModels", "models/v2/financialPlanAccount", "models/v2/externalAccount", "models/v2/externalAccountCollection", "components/account/scripts/constants/retirementConstants"], function(e, t, n, r, i, s, o) {
        var u = {
            endpoint: "/financial_plans",
            defaults: {
                name: "Retirement Plan",
                otherRetirementIncomeCents: 0,
                incomeReplacementRatio: null
            },
            onInitialize: function() {
                this.on("change:user", function() {
                    this.has("retirementZip") || this.set("retirementZip", this.get("user").get("zip"))
                })
            },
            getPlanAccountByIdParams: function(t) {
                if (!this.get("accounts") || this.get("accounts").length === 0) return undefined;
                var n = {};
                return t.id ? n = {
                    id: t.id
                } : (t.bettermentdbAccountId || t.bettermentdb_account_id) && (n = {
                    bettermentdbAccountId: (t.bettermentdbAccountId || t.bettermentdb_account_id)
                }), e.findWhere(this.get("accounts"), n)
            },
            getAnnualContributionByIdParams: function(e) {
                if (!this.hasPlanAccount(e)) return null;
                var t = this.getPlanAccountByIdParams(e);
                if (!t) return null;
                var n = t.annualContributionCents;
                return n === null ? null : n / 100
            },
            getAnnualExternalAccountContributions: function() {
                return this.get("externalAccounts").reduce(function(e, t) {
                    return e + t.dollars("annualContribution")
                }, 0)
            },
            getTotalExternalAccountBalance: function() {
                return this.get("externalAccounts").reduce(function(e, t) {
                    return e + t.dollars("balance")
                }, 0)
            },
            hasPlanAccount: function(e) {
                return !!this.getPlanAccountByIdParams(e)
            },
            hasAnyPlanAccounts: function() {
                return this.has("accounts") && this.get("accounts").length !== 0
            },
            removePlanAccount: function(e) {
                var t = this.getPlanAccountByIdParams(e);
                if (t) {
                    var n = this.get("accounts").indexOf(t);
                    this.get("accounts").splice(n, 1)
                }
            },
            getRetirementAgeOrDefault: function(e) {
                return e = e || this.get("user").getFinancialProfile(), this.num("retirementAge") || Math.max(o.DEFAULT_RETIREMENT_AGE, e.getAge() + 1)
            },
            getSpouseRetirementAgeOrDefault: function(e) {
                return e = e || this.get("user").getFinancialProfile(), e.isMarried() ? this.num("spouseRetirementAge") || Math.max(o.DEFAULT_RETIREMENT_AGE, e.getSpouseAge() + 1) : null
            },
            setComplete: function() {
                var e = this.get("user").getFinancialProfile();
                this.has("retirementAge") || this.set("retirementAge", this.getRetirementAgeOrDefault(e)), e.isMarried() && !this.has("spouseRetirementAge") && this.set("spouseRetirementAge", this.getSpouseRetirementAgeOrDefault(e)), this.set("complete", !0)
            },
            remainingTerm: function() {
                var e = this.get("retirementAge") - this.get("user").getFinancialProfile().getAge();
                return e < 1 ? 1 : e
            }
        };
        return u.relations = [{
            type: t.HasMany,
            key: "externalAccounts",
            includeInJSON: !1,
            relatedModel: i,
            collectionType: s
        }], u.validation = {
            retirementAge: function(e, n, r) {
                if (r.complete || e > 0) return t.Validation.validators.range(e, n, [o.MINIMUM_AGE, o.MAXIMUM_LIFE_EXPECTANCY], this)
            },
            spouseRetirementAge: function(e, n, r) {
                var i = this.get("user").getFinancialProfile();
                if (i.isMarried() && (r.complete || e > 0)) return t.Validation.validators.range(e, n, [o.MINIMUM_AGE, o.MAXIMUM_LIFE_EXPECTANCY], this)
            },
            otherRetirementIncomeCents: {
                min: 0
            },
            savingsAdviceChance: {
                required: !1,
                min: 1,
                max: 99
            }
        }, n.RelationalModel.extend(u)
    }), define("models/automaticWithdrawal", ["jquery", "underscore", "models/automaticTransaction"], function(e, t, n) {
        var r = "automaticWithdrawal";
        return n.extend({
            url: "/" + r,
            transactionType: r
        }, {
            totalMonthlyWithdrawals: function() {
                return t.reduce(BMT.accounts().models, function(e, t) {
                    return e + t.monthlyWithdrawalAmount()
                }, 0, this)
            },
            totalEnabledForAccountGroup: function(e) {
                return e.get("accounts").filter(function(e) {
                    var t = e.get("automaticWithdrawal");
                    return t && t.is("enabled")
                }).length
            }
        })
    }), define("models/accountReturn", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
            urlRoot: "/accountReturns",
            url: function() {
                var e = this.get("startDaysAgo"),
                    t = this.account().get("id"),
                    n = t ? "&account=" + t : "";
                return this.urlRoot + "?startDaysAgo=" + e + n
            },
            recalculate: function(t, n, r) {
                if (this.get("startDaysAgo") === t && this.get("annualized") === n) {
                    var i = new e.Deferred;
                    return i.reject(), i.promise()
                }
                return this.set("startDaysAgo", t), this.set("annualized", n), this.fetch()
            },
            account: function() {
                return this.get("account")
            },
            periodReturn: function() {
                var e = this.num("lifetimeReturn");
                if (this.is("annualized")) {
                    var t = this.account().date("createdDate").daysBetween(Date.today());
                    return Math.pow(1 + e, Date.DAYS_IN_YEAR / t) - 1
                }
                return e
            },
            personalReturn: function() {
                return this.get("annualized") ? this.account().getClass().annualizedReturn(this.num("averageBalance"), this.account().num("currentBalance"), this.earned(), this.account().date("createdDate")) : this.account().getClass().periodReturn(this.num("averageBalance"), this.account().num("currentBalance"), this.earned())
            },
            invested: function() {
                return this.num("deposits") + this.num("withdrawals") + this.num("otherAdjustments")
            },
            earned: function() {
                return this.num("marketChanges") + this.num("dividends") + this.num("fees")
            }
        }, {
            buildGhost: function(e) {
                return e = e || new i, e.set({
                    deposits: 0,
                    withdrawals: 0,
                    otherAdjustments: 0,
                    fees: 0,
                    dividends: 0,
                    marketChanges: 0,
                    averageBalance: 0,
                    lastEndingBalance: 0
                }), e
            }
        });
        return i
    }), define("models/v2/smartDepositConfig", ["underscore", "components/common/scripts/util/strings", "components/common/scripts/util/formatter", "components/common/scripts/models/v2/baseModels", "components/transaction/scripts/constants/transactionConstants"], function(e, t, n, r, i) {
        var s = 1e3,
            o = s * 100,
            u = {
                isSingularResource: !0,
                isNew: function() {
                    return !1
                },
                relatedModels: ["account"],
                endpoint: function() {
                    return "/accounts/f" + this.get("account").id + "/smart_deposit_config"
                },
                validation: {
                    minBankBalanceCents: [{
                        required: !0,
                        msg: "A minimum bank balance is required"
                    }, {
                        pattern: "number",
                        msg: "Minimum balance must be a number"
                    }, {
                        min: o,
                        msg: "Minimum balance must be at least " + n.money(s, 0)
                    }],
                    maxDepositCents: [{
                        required: !0,
                        msg: "A maximum deposit amount is required"
                    }, {
                        pattern: "number",
                        msg: "Maximum deposit must be a number"
                    }, {
                        min: i.MINIMUM_CENTS,
                        msg: "Maximum deposit must be at least " + n.money(i.MINIMUM, 0)
                    }, {
                        max: i.DEPOSIT_MAXIMUM_CENTS,
                        msg: "Maximum deposit cannot exceed " + n.money(i.DEPOSIT_MAXIMUM, 0)
                    }]
                },
                destroy: function(t) {
                    t = t ? e.clone(t) : {};
                    var n = this,
                        r = t.success;
                    return t.success = function(e) {
                        r && r(n, e, t), n.trigger("change"), n.trigger("sync", n, e, t)
                    }, t.data = null, this.sync("delete", this, t)
                }
            },
            a = {
                MIN_BANK_BALANCE: s,
                MIN_BANK_BALANCE_CENTS: o
            };
        return r.RelationalModel.extend(u, a)
    }), define("models/contribution", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({}),
            s = r.Collection.extend({
                model: i,
                comparator: function(e) {
                    return -1 * e.date("completedDate").getTime()
                }
            });
        return {
            Model: i,
            Collection: s
        }
    }), define("models/taxYearContributions", ["jquery", "underscore", "backbone", "common/betterment.models", "models/contribution"], function(e, t, n, r, i) {
        var s = r.RelationalModel.extend({
                relations: [{
                    type: n.HasMany,
                    key: "contributions",
                    relatedModel: i.Model,
                    collectionType: i.Collection
                }],
                calculateAmountWithNetIncome: function(e) {
                    var t = this.get("account").get("distributions")[this.get("year")],
                        n = 0,
                        r, i, s;
                    return e = Math.abs(e), this.get("contributions").each(function(o) {
                        r || (t -= o.num("amount"), t < 0 && (r = o, s = Math.abs(t)));
                        if (r) {
                            var u, a = o === r ? s : o.num("amount");
                            e = parseFloat((e - a).toFixed(2)), u = a - (e > 0 ? 0 : Math.abs(e)), !i && e <= 0 && (i = o), u && u > 0 && (n += u)
                        }
                    }), n + i.num("netIncome") * (n / i.num("amount"))
                }
            }),
            o = r.Collection.extend({
                model: s
            });
        return {
            Model: s,
            Collection: o
        }
    }), define("components/account/scripts/models/position", ["underscore", "components/common/scripts/models/v1/baseModels"], function(e, t) {
        var n = {
                endpoint: function() {
                    return "/accounts/" + this.get("account").id + "/positions"
                },
                calculateTargetAllocation: function() {
                    return this.num("allocation") - this.num("drift")
                },
                getAssetClass: function() {
                    return this.get("assetClass")
                },
                getAssetClassEnum: function() {
                    return this.getAssetClass().assetClass
                },
                getSuperAssetClassEnum: function() {
                    return this.getAssetClass().superAssetClass
                },
                getTickers: function() {
                    return e.map(this.get("tickerPositions"), function(e) {
                        return e.ticker
                    })
                }
            },
            r = t.RelationalModel.extend(n);
        return r
    }), define("components/common/scripts/models/v1/assetClassMetadata", ["underscore", "components/common/scripts/models/v1/baseModels", "components/common/scripts/models/v1/baseCollection"], function(e, t, n) {
        var r = n.extend({
                endpoint: "/asset-classes",
                getDecorations: function(e) {
                    var t = this.findWhere({
                        name: e
                    });
                    return {
                        primaryColor: t.get("primaryColor"),
                        driftColor: t.get("driftColor"),
                        displayOrder: t.get("displayOrder"),
                        donutOrder: t.get("donutOrder")
                    }
                },
                getExplanations: function(e) {
                    var t = this.findWhere({
                        name: e
                    });
                    return {
                        tickersExplanation: t.get("tickersExplanation"),
                        assetClassExplanation: t.get("assetClassExplanation")
                    }
                }
            }),
            i;
        return {
            get: function() {
                return i
            },
            fetch: function() {
                var e = new r;
                return e.fetch().then(function() {
                    return i = e, i
                })
            },
            _collectionClass: r
        }
    }), define("components/account/scripts/models/positionCollection", ["underscore", "components/common/scripts/models/v1/baseCollection", "components/account/scripts/models/position", "components/common/scripts/models/v1/assetClassMetadata"], function(e, t, n, r) {
        return t.extend({
            endpoint: function() {
                return "/accounts/" + this.account.id + "/positions"
            },
            model: n,
            comparator: function(e) {
                var t = e.getAssetClassEnum(),
                    n = r.get().getDecorations(t);
                return n.displayOrder
            },
            totalValue: function() {
                return this.sum("totalValue").round(2)
            },
            drift: function() {
                return this.calculateAbsoluteDriftForRegionGroups(this.groupPositionsByRegion())
            },
            groupPositionsByRegion: function() {
                var n = this.groupBy(function(e) {
                    return e.getSuperAssetClassEnum()
                });
                return e.map(n, function(e) {
                    return new t(e)
                })
            },
            calculateAbsoluteDriftForRegionGroups: function(e) {
                var t = e.reduce(function(e, t) {
                    return e + Math.abs(t.sum("drift"))
                }, 0);
                return (t / 2).round(4)
            }
        })
    }), define("projector", ["underscore"], function(e) {
        return function(e) {
            function n(r) {
                if (t[r]) return t[r].exports;
                var i = t[r] = {
                    exports: {},
                    id: r,
                    loaded: !1
                };
                return e[r].call(i.exports, i, i.exports, n), i.loaded = !0, i.exports
            }
            var t = {};
            return n.m = e, n.c = t, n.p = "", n(0)
        }([function(e, t, n) {
            e.exports = n(1)
        }, function(e, t, n) {
            function v(e) {
                return {
                    single: "single",
                    married_jointly: "marriedJointly",
                    married_separately: "marriedSeparately",
                    head_of_household: "headOfHousehold"
                }[e] || e
            }

            function m(e, t) {
                return v(e || (t ? "marriedJointly" : "single"))
            }

            function g(e) {
                var t = Math.max(1 / (1.8 + e / 12 / 30), 1 / 3);
                return Math.pow(e, t)
            }

            function y(e) {
                var t = r.clone(e);
                return t.annualFeeRate && t.expectedReturn && (t.expectedReturn -= t.annualFeeRate), r.has(t, "inflation") || (t.inflation = 0), !t.monthlyReturns && r.has(t, "expectedReturn") && t.riskFreeRates && (t.monthlyReturns = b(t.expectedReturn, t.riskFreeRates, t.inflation)), !r.has(t, "monthlyVolatility") && r.has(t, "volatility") && (t.monthlyVolatility = w(t.volatility)), t
            }

            function b(e, t, n) {
                return r.map(t, function(t) {
                    var r = Math.log(t / 100 + e / 100 + 1) / 12;
                    return r -= Math.log(n / 100 + 1) / 12, r
                })
            }

            function w(e) {
                return e / 100 / Math.sqrt(12)
            }

            function E(e, t, n, o, a) {
                a = r.isUndefined(a) ? u.z60Pct : a, r.isArray(n) || (n = i.fill(n, e * 12));
                var f = e * 12,
                    n = n.slice(0, f),
                    l = s.sum(n),
                    c = Math.exp(l + a * o * Math.sqrt(f)),
                    t = r.isArray(t) ? t : i.fill(t, f),
                    h = 0,
                    p = 0;
                for (var d = f - 2; d >= 0; d--) h += n[d + 1], p += t[d] * Math.exp(h + a * o * Math.sqrt(f - d - 1).round(6)).round(6);
                return p += t[f - 1], {
                    growthFactor: c,
                    totalGrowth: p
                }
            }

            function S(e, t, n, r, i, s, o) {
                var u = E(t, 1, i, s, o),
                    a = u.growthFactor,
                    f = u.totalGrowth,
                    l = (e - n * a) / f,
                    c = Math.max((e - r * f) / a, 0);
                return {
                    monthly: l.ceil(2),
                    oneTime: Math.max((c - n).ceil(2), 0)
                }
            }

            function x(e, t, n, r, i) {
                var s = E(t, e, n, r, i),
                    o = s.growthFactor,
                    u = s.totalGrowth,
                    a = u / o;
                return a.ceil(2)
            }

            function T(e, t, n, o, a, f, l) {
                l = r.isUndefined(l) ? u.z60Pct : l;
                var c = a.length,
                    h = function(e) {
                        var t = [n].concat(i.fill(o, e)),
                            r = [],
                            u = a.slice(0, e),
                            c = s.sum(u);
                        for (var h = 1; h <= e; h++) r.push(Math.exp(c + l * f * Math.sqrt(e - h + 1))), c -= u.shift();
                        return r.push(1), Q(t, r)
                    },
                    p = n,
                    d = 0,
                    v = 0;
                while (p < e) {
                    d += 1, v += 12;
                    if (v > c) {
                        d = 0;
                        break
                    }
                    p = h(v)
                }
                return Math.max(d, 0)
            }

            function N(e, t, n, o, a, f, l) {
                f = r.isUndefined(f) ? u.z60Pct : f, l = r.isUndefined(l) ? !0 : l, r.isArray(n) || (n = i.fill(n, e));
                var e = Math.floor(e),
                    c = o.slice(0, e),
                    h = s.sum(c),
                    p = l ? g : Math.sqrt,
                    d = t * Math.exp(h + f * a * p(e));
                for (var v = 0; v < e; v++) h -= c.shift(), d += n[v] * Math.exp(h + f * a * p(c.length));
                return d
            }

            function C(e, t, n, s, o, a, f, l) {
                var c = l ? t + 1 : u.points,
                    h = e * t / (c - 1),
                    p = h * 12,
                    d = Math.floor(p);
                r.isArray(s) || (s = i.fill(s, d + 1));
                var v = {
                        x: h * u.millisecondsPerYear,
                        deposit: n + d * s[d]
                    },
                    m = {
                        avg: u.z50Pct,
                        dark0: u.z90Pct,
                        dark1: -u.z90Pct,
                        light0: u.z975Pct,
                        light1: -u.z975Pct,
                        sixty: u.z60Pct
                    };
                return r.each(m, function(e, t) {
                    v[t] = N(p, n, s, o, a, e, f);
                    var r = p % 1;
                    if (r) {
                        var i = N(p + 1, n, s, o, a, e, f);
                        v[t] += r * (i - v[t])
                    }
                    if (isNaN(v[t])) {
                        var u = "Graph point was NaN: months = " + p + ", " + "currentBalance = " + n + ", " + "monthlyDeposit.length = " + s.length + ", " + "monthlyDeposit = " + s + ", " + "monthlyReturns.length = " + o.length + ", " + "monthlyVolatility = " + a + ", " + "Z score = " + e;
                        throw new Error(u)
                    }
                }), v
            }

            function L(e, t) {
                k.push({
                    match: e,
                    fn: t
                })
            }

            function A(e) {
                var t = r.filter(k, function(t) {
                    var n = t.match;
                    for (var r in n)
                        if (e[r] !== n[r]) return !1;
                    return !0
                });
                if (!t.length) throw new Error("No default allocation strategy!");
                if (t.length === 1) return t[0].fn;
                var n = 0,
                    i = [];
                r.each(t, function(e) {
                    var t = r.keys(e.match).length;
                    t > n ? (n = t, i = [e]) : t === n && i.push(e)
                });
                if (i.length !== 1) throw new Error(d + " Did not find exactly one match." + " Matches: " + JSON.stringify(i) + " Context: " + JSON.stringify(e));
                return i[0].fn
            }

            function O(e) {
                e.termYears = Math.floor(e.termYears);
                var t = A(e),
                    n = t(e);
                return {
                    term: e.termYears,
                    allocation: parseFloat(n.toFixed(2))
                }
            }

            function M(e, t) {
                return t = t || a.state, e * (1 - $(e, t))
            }

            function _(e, t, n, i, s, u, f, l, c) {
                n = n || a.retirementAge, i = r.isUndefined(i) ? a.inflation : i, s = r.isUndefined(s) ? a.salaryGrowth : s, u = u || a.state, f = f || a.coli, l = l || f;
                var h = n - t,
                    p = o.futureDollars(e, h, i + s),
                    d = o.futureDollars(e, h, s),
                    v = $(d, u),
                    m = p * (1 - v),
                    g = d * (1 - v),
                    y = r.isUndefined(c) ? U(g, f) : c,
                    b = m * y * l / f;
                return b.round(0)
            }

            function D(e, t, n, r, i, s, o, a, f, l, c, h) {
                function v(e) {
                    var r = p;
                    return e === "taxable" && (r = d), N((n - t) * 12, o[e], (a[e] || 0) / 12, r.monthlyReturns, r.monthlyVolatility, h, !1)
                }
                c = c || 0, h = h || u.z60Pct;
                var p = y({
                        inflation: c,
                        expectedReturn: r,
                        volatility: i,
                        riskFreeRates: s
                    }),
                    d = y({
                        inflation: c,
                        expectedReturn: r - 1,
                        volatility: i,
                        riskFreeRates: s
                    }),
                    m = v("employerPlan") * (1 - f),
                    g = v("rothEmployerPlan"),
                    b = v("traditionalIra") * (1 - f),
                    w = v("rothIra"),
                    E = v("taxable") * (1 - l),
                    S = m + g + b + w + E,
                    x = Math.max(e - S, 0);
                return {
                    shortfall: x,
                    totalFutureBalance: S
                }
            }

            function P(e, t, n, s, o, f, l, c, h, d, v, g, y, E, T, N, C, k, L, A, O, M, _, P, H) {
                N = r.isUndefined(N) ? a.percentSocialSecurity : N, L = r.isUndefined(L) ? a.salaryGrowth : L, A = r.isUndefined(A) ? a.inflation : A, _ = r.isUndefined(_) ? u.z60Pct : _, P = r.isUndefined(P) ? u.z99Pct : P, g = r.isUndefined(g) ? a.retirementAnnualReturn : g, y = r.isUndefined(y) ? a.retirementVolatility : y, n = m(n, s), r.isUndefined(f) && n === "marriedJointly" && (f = a.retirementAge), C = C || a.deathAge, k = k || a.deathAge, H = H || a.year, o = o || a.retirementAge, c = c || 0, t = t || a.state, O = O || 0;
                var B = o - e;
                h = r.defaults(h || {}, {
                    rothIra: 0,
                    traditionalIra: 0,
                    taxable: 0,
                    employerPlan: 0,
                    rothEmployerPlan: 0
                }), d = r.defaults(d || {}, {
                    rothIra: 0,
                    traditionalIra: 0,
                    taxable: 0,
                    employerPlan: 0,
                    rothEmployerPlan: 0
                });
                var j = C - o,
                    F = $(v, t, n, o, f),
                    I = K(v, t, n),
                    q = N * p.calculateAverageYearlySocialSecurity(e, s, o, f, C, k, l, c, L, A, H),
                    R = v - q - O * (1 - F),
                    U = i.fill(Math.max(R, 0) / 12, j * 12),
                    z = b(E, M, A),
                    W = B * 12,
                    X = b(g, M.slice(W), A),
                    V = x(U, j, X, w(y), P),
                    J = D(V, e, o, E, T, M, h, d, F, I, A).shortfall,
                    Q = J / (1 - F),
                    G = S(Q, B, 0, 0, z, w(T), _);
                return {
                    annualContribution: G.monthly * 12,
                    targetBalance: V,
                    targetAdditionalInvestmentBalance: Q,
                    monthlyNeededCashflows: U
                }
            }

            function H(e, t, n, i, s, o, u, f, l, c, h) {
                var h = r.isUndefined(h) ? a.percentSocialSecurity : h,
                    d = i - n,
                    v = _(e, t, n, f, l),
                    m = p.calculateMonthlySocialSecurity(t, e, n, l, f, c),
                    g = v / 12 - h * m;
                return x(g, d, s, o, u)
            }

            function B(e) {
                return Math.round(e / 10) * 10
            }

            function j(e, t, n, i, s, o, u, f, l) {
                function N(n, r) {
                    var i = e.rothLimitPhaseouts[n],
                        s = i[0] || 0,
                        o = i[1] || 0;
                    return t < s ? r : t < o ? Math.max(B(r - (t - s) / (o - s) * r), h) : 0
                }

                function C(n, r, i) {
                    var s = e.employerPlanCovered[n],
                        o = s[0],
                        u = s[1];
                    return i > p ? 0 : t <= o ? r : t < u ? B((u - t) * r / (u - o)) : 0
                }
                l = l || a.year, i = m(i, s), e = r.defaults(e, c[l + ""]);
                var h = 200,
                    p = 70.5,
                    d = 50,
                    v, g = 0,
                    y = 0,
                    b = 0,
                    w = 0,
                    E = 0,
                    S = 0,
                    x = 0,
                    T = 0;
                g = n < d ? e.regularLimit : e.catchupLimit, o && (b = n < d ? e.employerPlanLimit : e.employerPlanCatchupLimit), i === "marriedJointly" && (y = s < d ? e.regularLimit : e.catchupLimit, u && (w = s < d ? e.employerPlanLimit : e.employerPlanCatchupLimit)), i === "single" || i === "headOfHousehold" || i === "marriedSeparately" && !f ? (v = "SINGLE", E = N(v, g), o ? x = C(v, g, n) : x = g) : i === "marriedJointly" || i === "qualifiedWidow" ? (v = "JOINTLY", E = N(v, g), S = N(v, y), o ? (x = C("MARRIED_COVERED", g, n), u ? T = C("MARRIED_COVERED", y, s) : T = C("MARRIED_COVERED_SPOUSE", y, s)) : u ? (x = C("MARRIED_COVERED_SPOUSE", g, n), T = C("MARRIED_COVERED", y, s)) : (n <= p && (x = g), s <= p && (T = y))) : i === "marriedSeparately" && f && (v = "SEPARATELY", E = N(v, g), x = C(v, g, n));
                var k = n <= p ? g : 0,
                    L = s <= p ? y : 0;
                return {
                    iraContributionLimit: g,
                    spouseIraContributionLimit: y,
                    employerPlanContributionLimit: b,
                    spouseEmployerPlanContributionLimit: w,
                    maxRoth: E,
                    spouseMaxRoth: S,
                    maxIraDeduction: x,
                    spouseMaxIraDeduction: T,
                    maxTraditional: k,
                    spouseMaxTraditional: L
                }
            }

            function F(e, t, n, r) {
                function h(e) {
                    var t = Math.min(c, e);
                    return c -= t, t
                }
                var i = 0,
                    s = 0,
                    o = 0,
                    u = 0,
                    a = 0,
                    f = 0,
                    l = 0,
                    c = n;
                return r > 0 ? (i = h(e.maxRoth), s = h(e.spouseMaxRoth), o = h(Math.min(e.maxIraDeduction, Math.min(e.iraContributionLimit, n - s) - i)), u = h(Math.min(e.spouseMaxIraDeduction, Math.min(e.spouseIraContributionLimit, n - i - o) - s)), a = h(Math.max(Math.min(e.iraContributionLimit, n - i - o) - i - o, 0)), f = h(Math.max(Math.min(e.spouseIraContributionLimit, n - i - o - a) - s - u, 0))) : r < 0 ? (o = h(Math.min(e.maxIraDeduction, Math.min(e.iraContributionLimit, n - s) - i)), u = h(Math.min(e.spouseMaxIraDeduction, Math.min(e.spouseIraContributionLimit, n - o))), a = h(Math.max(Math.min(e.iraContributionLimit, n - u) - o, 0)), f = h(Math.max(Math.min(e.spouseIraContributionLimit, n - o - a) - u, 0)), e.maxIraDeduction === o && (c += i + a, i = h(Math.min(i + a, e.maxRoth)), a = h(Math.max(Math.min(e.iraContributionLimit, n - s - u) - i - o, 0))), e.spouseMaxIraDeduction === u && (c += s + f, s = h(Math.min(s + f, e.spouseMaxRoth)), f = h(Math.max(Math.min(e.spouseIraContributionLimit, n - i - o - a) - s - u, 0)))) : (i = h(Math.min(n / 2, Math.min(e.iraContributionLimit / 2, e.maxRoth))), n >= e.iraContributionLimit && (s = h(Math.min((n - e.iraContributionLimit) / 2, Math.min(e.spouseIraContributionLimit / 2, e.spouseMaxRoth)))), o = h(Math.min(e.maxIraDeduction, Math.min(e.iraContributionLimit, n - s) - i)), u = h(Math.min(e.spouseMaxIraDeduction, Math.min(e.spouseIraContributionLimit, n - i - o) - s)), a = h(Math.max(Math.min(e.iraContributionLimit, n - s - u) - i - o, 0)), f = h(Math.max(Math.min(e.spouseIraContributionLimit, n - i - o - a) - s - u, 0)), e.maxIraDeduction === o && (c += i + a, i = h(Math.min(i + a, e.maxRoth)), a = h(Math.max(Math.min(e.iraContributionLimit, n - s - u) - i - o, 0))), e.spouseMaxIraDeduction === u && (c += s + f, s = h(Math.min(s + f, e.spouseMaxRoth)), f = h(Math.max(Math.min(e.spouseIraContributionLimit, n - i - o - a) - s - u, 0)))), o = Math.min(e.maxTraditional, o), u = Math.min(e.spouseMaxTraditional, u), a = Math.min(e.maxTraditional, a), f = Math.min(e.spouseMaxTraditional, f), l = c, {
                    rothIraContribution: i,
                    spouseRothIraContribution: s,
                    traditionalIraDeductibleContribution: o,
                    spouseTraditionalIraDeductibleContribution: u,
                    traditionalIraNonDeductibleContribution: a,
                    spouseTraditionalIraNonDeductibleContribution: f,
                    taxableContribution: l
                }
            }

            function I(e, t, n, r, i, s, o, f, l, c, h, p, d) {
                var v = .2,
                    g = .3;
                i = m(i, s), h = h || a.savingsAdviceChance;
                var y = j(e, n, r, i, s, p, d),
                    b = J(n, f, i),
                    w = o - r,
                    E = S(t, w, 0, 0, l, c, u["z" + h + "Pct"]).monthly,
                    x = E * 12,
                    T = 0;
                b <= v ? T = 1 : b > g && (T = -1);
                var N = F(y, n, x, T);
                return {
                    contributions: N,
                    eligibilities: y,
                    futureTaxRate: T
                }
            }

            function q(e, t, n) {
                var r = M(e),
                    i = U(r),
                    s = r / 12,
                    o = s * i,
                    u = t * o * (1 + n);
                return u
            }

            function R(e, t, n) {
                t = t || a.state, n = n || a.coli;
                var r = M(e, t),
                    i = U(r, n),
                    s = i * r,
                    o = s / 12;
                return Math.ceil(o / 100) * 100
            }

            function U(e, t) {
                if (e < 0) throw new Error("Invalid afterTaxIncome, must be >= 0");
                t = t || a.coli;
                var n;
                if (e < 7e4) n = 41 / 36 - .25 / 45e3 * e;
                else {
                    var r = .808,
                        i = 7.62e-7,
                        s = Math.pow(685e3, 2),
                        o = -0.76035;
                    n = r - i * Math.sqrt(s / o * (r - i * e) + s)
                }
                return t < 100 ? n *= t / 100 : n *= (t + 500) / 600, n = Math.min(Math.max(n, .5), 1), n
            }

            function z(e, t, n, i) {
                var s, o = 0,
                    u = t,
                    a = r.reduce(e, function(e, r) {
                        if (!s) return s = r, e;
                        if (r[n] === -1) return e;
                        u > r[n] ? o = r[n] - s[n] : o = t;
                        var i = o * s.taxRate;
                        return t -= o, s = r, e + i
                    }, 0),
                    f = t;
                return i && s[n] < u && (f = u - s[n]), a + s.taxRate * f
            }

            function W(e, t, n) {
                return t = m(t, !1), n = n || a.year, z(f[n + ""], e, t)
            }

            function X(e, t, r) {
                r = m(r, !1), r === "marriedSeparately" ? r = "single" : r === "headOfHousehold" && (r = "marriedJointly");
                var t = t || a.state,
                    i = n(16),
                    s = i[t],
                    o = s.brackets,
                    u = s.deduction[r],
                    f = s.exemption[r],
                    l = s.credit[r];
                return z(o, e - u - f, r, !0) - l
            }

            function V(e, t, n, r, i, s) {
                r = r || 0, i = i || 0, s = s || a.year, n = m(n, i);
                var o = l[s + ""].federalExemptionMultiple,
                    u = o,
                    f = l[s + ""].extraDeductionMultipleSingle,
                    c = l[s + ""].extraDeductionMultipleMarried,
                    h = 0,
                    p = 0,
                    d = 65,
                    v = 0;
                return n === "marriedJointly" && (u = 2 * o), r >= d && i >= d ? n === "marriedSeparately" ? p = 1 : p = 2 : r < d && (i < d || n === "marriedSeparately") ? p = 0 : p = 1, n === "single" || n === "headOfHousehold" ? h = f : h = c, v = h * p, e - l[s + ""][n] - u - v - X(e, t, n)
            }

            function $(e, t, n, r, i, s) {
                if (e < 0) throw new Error("Invalid grossIncome, must >= 0");
                t = t || a.state, n = m(n, i), s = s || a.year;
                var o = l[s + ""].socialSecurityLimit,
                    u = l[s + ""].socialSecurityRate,
                    f = l[s + ""].medicareRate,
                    c = X(e, t, n),
                    h = V(e, t, n, r, i, s);
                if (h <= 0) return 0;
                var p = W(h, n, s),
                    d = u * Math.min(o, e),
                    v = f * e,
                    g = p + c + d + v,
                    y = g / e;
                return y
            }

            function J(e, t, n, r) {
                r = r || a.year, n = m(n, !1);
                var i = V(e, t, n),
                    s;
                for (var o = 0; o < f[r + ""].length; o++) {
                    var u = f[r + ""][o],
                        s = s || u.taxRate;
                    if (u[n] > i) return s;
                    s = u.taxRate
                }
                return s
            }

            function K(e, t, n, r) {
                r = r || a.year, n = m(n, !1);
                var i = V(e, t, n);
                if (i < 0) return 0;
                for (var s = f[r + ""].length - 1; s >= 0; s--) {
                    var o = f[r + ""][s];
                    if (o[n] <= e) {
                        var u = 0;
                        return e > h.THRESHOLDS[n] && (u += h.RATE), o.longTermGainsRate + u
                    }
                }
                return 0
            }

            function Q(e, t) {
                return r.reduce(r.zip(e, t), function(e, t) {
                    return e + t[0] * t[1]
                }, 0)
            }
            n(2);
            var r = n(3),
                i = n(4),
                s = n(5),
                o = n(6),
                u = n(7),
                a = n(8),
                f = n(9),
                l = n(10),
                c = n(11),
                h = n(12),
                p = n(13);
            r.contains([2014, 2015], a.year) || (a.year = 2015);
            var d = "notify_presto",
                k = [];
            L({
                goalType: "RETIREMENT",
                employmentStatus: "RETIRED"
            }, function(e) {
                var t = e.termYears * 12,
                    n = 30,
                    r = 56,
                    i = .2,
                    s;
                return t <= 0 ? s = n : s = Math.min(Math.max(i * t, n), r), s / 100
            }), L({
                goalType: "RETIREMENT_ETHICAL",
                employmentStatus: "RETIRED"
            }, function(e) {
                var t = e.termYears * 12,
                    n = 30,
                    r = 56,
                    i = .2,
                    s;
                return t <= 0 ? s = n : s = Math.min(Math.max(i * t, n), r), s / 100
            }),L({
                goalType: "BUILD_WEALTH"
            }, function(e) {
                if (!e.age) return .9;
                var t = 65 - e.age,
                    n = (t + 15) * 12,
                    r = 55,
                    i = 90,
                    s = 30,
                    o = .143,
                    u;
                return n <= 0 ? u = r : u = Math.min(Math.max(s + o * n, r), i), u / 100
            }), L({
                goalType: "BUILD_WEALTH_ETHICAL"
            }, function(e) {
                if (!e.age) return .9;
                var t = 65 - e.age,
                    n = (t + 15) * 12,
                    r = 55,
                    i = 90,
                    s = 30,
                    o = .143,
                    u;
                return n <= 0 ? u = r : u = Math.min(Math.max(s + o * n, r), i), u / 100
            }),L({
                goalType: "RETIREMENT_ETHICAL"
            }, function(e) {
                var t = (e.termYears + 15) * 12,
                    n = 30,
                    r = 90,
                    i = n,
                    s = .143,
                    o;
                return t <= 0 ? o = n : o = Math.min(Math.max(i + s * t, n), r), o / 100
            }), L({
                goalType: "RETIREMENT"
            }, function(e) {
                var t = (e.termYears + 15) * 12,
                    n = 30,
                    r = 90,
                    i = n,
                    s = .143,
                    o;
                return t <= 0 ? o = n : o = Math.min(Math.max(i + s * t, n), r), o / 100
            }), L({
                goalType: "EMERGENCY_ETHICAL"
            }, function() {
                return .4
            }),L({
                goalType: "EMERGENCY"
            }, function() {
                return .4
            }), L({}, function(e) {
                var t = e.termYears * 12,
                    n = 5,
                    r = 90,
                    i = 0,
                    s = 9.8,
                    o = .0155,
                    u;
                return t <= 0 ? u = n : u = Math.min(Math.max(i + s * (Math.log(t + 1) + o * t), n), r), u / 100
            }), e.exports = {
                C: u,
                DEFAULTS: a,
                balanceAtGoalDate: function(e) {
                    return e = y(e), C(u.points - 1, e.termYears, e.currentBalance, e.monthlyDeposit, e.monthlyReturns, e.monthlyVolatility)
                },
                suggestedDeposits: function(e) {
                    return e = y(e), S(e.targetBalance, e.termYears, e.currentBalance, e.monthlyDeposit, e.monthlyReturns, e.monthlyVolatility, e.zscore)
                },
                suggestedTerm: function(e) {
                    return e = y(e), T(e.targetBalance, e.termYears, e.currentBalance, e.monthlyDeposit, e.monthlyReturns, e.monthlyVolatility, e.zscore)
                },
                projectedBalanceAtMonth: function(e, t) {
                    return t = y(t), r.has(t, "timeAdjust") || (t.timeAdjust = !0), N(e, t.currentBalance, t.monthlyDeposit, t.monthlyReturns, t.monthlyVolatility, t.zscore, t.timeAdjust)
                },
                recommendedAllocation: function(e) {
                    return O(e)
                },
                recommendedSafetyNetTarget: function(e) {
                    return q(e.grossIncome, e.months, e.buffer)
                },
                recommendedRetirementConsumption: function(e) {
                    return _(e.grossIncome, e.currentAge, e.retirementAge, e.inflation, e.salaryGrowth, e.state, e.costOfLivingIndex, e.retirementCostOfLivingIndex, e.marginalPropensityToConsumeOverride)
                },
                recommendedRetirementAgeAndContribution: function(e) {
                    return P(e.currentAge, e.state, e.maritalStatus, e.spouseAge, e.retirementAge, e.spouseRetirementAge, e.grossIncome, e.spouseGrossIncome, e.accountBalances, e.annualContributions, e.preRetirementConsumption, e.retirementAnnualReturn, e.retirementVolatility, e.expectedReturn, e.volatility, e.percentSocialSecurity, e.deathAge, e.spouseDeathAge, e.salaryGrowth, e.inflation, e.otherRetirementIncome, e.riskFreeRates, e.zscoreAccum, e.zscoreDecum, e.currentYear)
                },
                recommendedRetirementTarget: function(e) {
                    return e = y(e), H(e.grossIncome, e.currentAge, e.retirementAge, e.deathAge, e.monthlyReturns, e.monthlyVolatility, e.zscore, e.inflation, e.salaryGrowth, e.currentYear, e.percentSocialSecurity)
                },
                findTaxAdvantagedEligibility: function(e) {
                    return j(e.contributionLimits, e.adjustedGrossIncome, e.age, e.maritalStatus, e.spouseAge, e.hasEmployerPlan, e.hasSpouseEmployerPlan, e.liveWithSpouse)
                },
                whichIra: function(e) {
                    return F(e.eligibilities, e.adjustedGrossIncome, e.annualSavingsAmount, e.futureTaxRate)
                },
                whichRetirementAccount: function(e) {
                    return e = y(e), I(e.contributionLimits, e.targetRetirementAmount, e.adjustedGrossIncome, e.age, e.maritalStatus, e.spouseAge, e.retirementAge, e.state, e.monthlyReturns, e.monthlyVolatility, e.savingsAdviceChance, e.hasEmployerPlan, e.hasSpouseEmployerPlan)
                },
                calculateMonthlySocialSecurity: function(e) {
                    return p.calculateMonthlySocialSecurity(e.currentAge, e.grossIncome, e.retirementAge, e.salaryGrowth, e.inflation, e.currentYear)
                },
                calculateAverageYearlySocialSecurity: function(e) {
                    return p.calculateAverageYearlySocialSecurity(e.currentAge, e.spouseAge, e.retirementAge, e.spouseRetirementAge, e.deathAge, e.spouseDeathAge, e.grossIncome, e.spouseGrossIncome, e.salaryGrowth, e.inflation, e.currentYear)
                },
                getSocialSecurityCollectionInfo: function(e) {
                    return p.getSocialSecurityCollectionInfo(e.currentAge, e.spouseAge, e.retirementAge, e.spouseRetirementAge, e.grossIncome, e.spouseGrossIncome, e.salaryGrowth, e.inflation, e.currentYear)
                },
                calculateAverageTaxRate: $,
                calculateLongTermGainsRate: K,
                calculateAfterTaxIncome: M,
                calculateMarginalPropensityToConsume: U,
                consumptionPerMonth: R,
                calculateFederalTaxRateBracket: J,
                calculateFinalBalanceShortfall: function(e) {
                    return e.annualFeeRate && (e.expectedReturn -= e.annualFeeRate), D(e.targetBalance, e.age, e.retirementAge, e.expectedReturn, e.volatility, e.riskFreeRates, e.accountBalances, e.annualContributions, e.averageTaxRate, e.longTermGainsRate, e.inflation, e.zscore)
                },
                dataForIndex: function(e, t, n) {
                    return t = y(t), C(e, t.termYears, t.currentBalance, t.monthlyDeposit, t.monthlyReturns, t.monthlyVolatility, t.timeAdjust, n)
                },
                futureDollars: function(e, t, n, r) {
                    return o.futureDollars(e, t, n, r)
                },
                todaysDollars: function(e, t, n, r) {
                    return o.todaysDollars(e, t, n, r)
                },
                timeFactor: g,
                withRateContext: function(e) {
                    e = y(e);
                    var t = {
                        monthlyReturns: e.monthlyReturns,
                        monthlyVolatility: e.monthlyVolatility
                    };
                    return {
                        suggestedDeposits: function(e) {
                            return this.suggestedDeposits(r.extend({}, e, t))
                        }.bind(this),
                        suggestedTerm: function(e) {
                            return this.suggestedTerm(r.extend({}, e, t))
                        }.bind(this),
                        projectedBalanceAtMonth: function(e, n) {
                            return this.projectedBalanceAtMonth(e, r.extend({}, n, t))
                        }.bind(this),
                        dataForIndex: function(e, n) {
                            return this.dataForIndex(e, r.extend({}, n, t))
                        }.bind(this),
                        balanceAtGoalDate: function(e) {
                            return this.balanceAtGoalDate(r.extend({}, e, t))
                        }.bind(this),
                        timeFactor: g
                    }
                }
            }
        }, function(e, t, n) {
            var r = n(3);
            r.extend(Number.prototype, {
                round: function(e) {
                    var t = Math.pow(10, e);
                    return Math.round(this * t) / t
                },
                ceil: function(e) {
                    var t = Math.pow(10, e);
                    return Math.ceil(this * t) / t
                }
            })
        }, function(t, n) {
            t.exports = e
        }, function(e, t) {
            e.exports = {
                fill: function(e, t) {
                    var n = [];
                    for (var r = 0; r < t; r++) n[r] = e;
                    return n
                }
            }
        }, function(e, t, n) {
            var r = n(3);
            n(2), e.exports = {
                roundDownToDime: function(e) {
                    var t = e.round(1);
                    return t > e && (t -= .1), t
                },
                sum: function(e) {
                    return r.reduce(e, function(e, t) {
                        return e + t
                    }, 0)
                }
            }
        }, function(e, t, n) {
            var r = n(3),
                i = n(7),
                s = n(8);
            e.exports = {
                todaysDollars: function(e, t, n, o) {
                    return n = r.isUndefined(n) ? s.inflation : n, o = o || i.periodsPerYear, e / Math.pow(1 + n / o / 100, o * t)
                },
                futureDollars: function(e, t, n, o) {
                    return n = r.isUndefined(n) ? s.inflation : n, o = o || i.periodsPerYear, e * Math.pow(1 + n / o / 100, o * t)
                }
            }
        }, function(e, t) {
            var n = {
                z99Pct: -2.326348,
                z975Pct: -1.959964,
                z90Pct: -1.281552,
                z80Pct: -0.8416212,
                z60Pct: -0.2533471,
                z50Pct: 0,
                z40Pct: .2533471,
                inflation: 2.5,
                points: 50,
                periodsPerYear: 12,
                millisecondsPerYear: 315576e5
            };
            n.zSafePct = n.z99Pct, n.z95Pct = -1 * n.z975Pct, e.exports = n
        }, function(e, t, n) {
            var r = n(7);
            e.exports = {
                inflation: r.inflation,
                state: "SA",
                coli: 100,
                percentSocialSecurity: .75,
                deathAge: 90,
                salaryGrowth: 1,
                year: (new Date).getFullYear(),
                retirementAge: 65,
                beginSocialSecurityCollectionAge: 62,
                maxDeferredSocialSecurityCollectionAge: 70,
                retirementAnnualReturn: 4.6105,
                retirementVolatility: 12.06123,
                savingsAdviceChance: 60
            }
        }, function(e, t) {
            e.exports = {
                2014: [{
                    taxRate: .1,
                    single: 0,
                    marriedJointly: 0,
                    marriedSeparately: 0,
                    headOfHousehold: 0,
                    longTermGainsRate: 0
                }, {
                    taxRate: .15,
                    single: 9075,
                    marriedJointly: 18150,
                    marriedSeparately: 9075,
                    headOfHousehold: 12950,
                    longTermGainsRate: 0
                }, {
                    taxRate: .25,
                    single: 36900,
                    marriedJointly: 73800,
                    marriedSeparately: 36900,
                    headOfHousehold: 49400,
                    longTermGainsRate: .15
                }, {
                    taxRate: .28,
                    single: 89350,
                    marriedJointly: 148850,
                    marriedSeparately: 74425,
                    headOfHousehold: 127550,
                    longTermGainsRate: .15
                }, {
                    taxRate: .33,
                    single: 186350,
                    marriedJointly: 226850,
                    marriedSeparately: 113425,
                    headOfHousehold: 206600,
                    longTermGainsRate: .15
                }, {
                    taxRate: .35,
                    single: 405100,
                    marriedJointly: 405100,
                    marriedSeparately: 202550,
                    headOfHousehold: 405100,
                    longTermGainsRate: .15
                }, {
                    taxRate: .396,
                    single: 406750,
                    marriedJointly: 457600,
                    marriedSeparately: 228800,
                    headOfHousehold: 432200,
                    longTermGainsRate: .2
                }],
                2015: [{
                    taxRate: .1,
                    single: 0,
                    marriedJointly: 0,
                    marriedSeparately: 0,
                    headOfHousehold: 0,
                    longTermGainsRate: 0
                }, {
                    taxRate: .15,
                    single: 9225,
                    marriedJointly: 18450,
                    marriedSeparately: 9225,
                    headOfHousehold: 13150,
                    longTermGainsRate: 0
                }, {
                    taxRate: .25,
                    single: 37450,
                    marriedJointly: 74900,
                    marriedSeparately: 37450,
                    headOfHousehold: 50200,
                    longTermGainsRate: .15
                }, {
                    taxRate: .28,
                    single: 90750,
                    marriedJointly: 151200,
                    marriedSeparately: 75600,
                    headOfHousehold: 129600,
                    longTermGainsRate: .15
                }, {
                    taxRate: .33,
                    single: 189300,
                    marriedJointly: 230450,
                    marriedSeparately: 115225,
                    headOfHousehold: 209850,
                    longTermGainsRate: .15
                }, {
                    taxRate: .35,
                    single: 411500,
                    marriedJointly: 411500,
                    marriedSeparately: 205750,
                    headOfHousehold: 411500,
                    longTermGainsRate: .15
                }, {
                    taxRate: .396,
                    single: 413200,
                    marriedJointly: 464850,
                    marriedSeparately: 232425,
                    headOfHousehold: 439e3,
                    longTermGainsRate: .2
                }]
            }
        }, function(e, t) {
            e.exports = {
                2014: {
                    single: 6200,
                    marriedJointly: 12400,
                    marriedSeparately: 6200,
                    headOfHousehold: 9100,
                    federalExemptionMultiple: 3950,
                    socialSecurityLimit: 117e3,
                    socialSecurityRate: .062,
                    medicareRate: .0145,
                    extraDeductionMultipleSingle: 1550,
                    extraDeductionMultipleMarried: 1200
                },
                2015: {
                    single: 6300,
                    marriedJointly: 12600,
                    marriedSeparately: 6300,
                    headOfHousehold: 9250,
                    federalExemptionMultiple: 4e3,
                    socialSecurityLimit: 118500,
                    socialSecurityRate: .062,
                    medicareRate: .0145,
                    extraDeductionMultipleSingle: 1550,
                    extraDeductionMultipleMarried: 1250
                }
            }
        }, function(e, t) {
            e.exports = {
                2015: {
                    employerPlanLimit: 18e3,
                    employerPlanCatchupLimit: 24e3,
                    employerPlanCovered: {
                        SINGLE: [61e3, 71e3],
                        MARRIED_COVERED: [98e3, 118e3],
                        MARRIED_COVERED_SPOUSE: [183e3, 193e3],
                        SEPARATELY: [0, 1e4]
                    }
                },
                2014: {
                    employerPlanLimit: 17500,
                    employerPlanCatchupLimit: 23e3,
                    employerPlanCovered: {
                        SINGLE: [6e4, 7e4],
                        MARRIED_COVERED: [96e3, 116e3],
                        MARRIED_COVERED_SPOUSE: [181e3, 191e3],
                        SEPARATELY: [0, 1e4]
                    }
                }
            }
        }, function(e, t) {
            e.exports = {
                THRESHOLDS: {
                    single: 2e5,
                    marriedJointly: 25e4,
                    marriedSeparately: 125e3,
                    headOfHousehold: 2e5
                },
                RATE: .038
            }
        }, function(e, t, n) {
            var r = n(3),
                i = n(5),
                s = n(4),
                o = n(6),
                u = n(8),
                a = n(14);
            e.exports = {
                calculateMonthlySocialSecurity: function(e, t, o, f, l, c) {
                    var h = 18,
                        p = o - 70;
                    if (e < h) throw new Error("Invalid age, it must be >= " + h);
                    e > u.maxDeferredSocialSecurityCollectionAge && (e = u.maxDeferredSocialSecurityCollectionAge), o < e && (o = e), o > u.maxDeferredSocialSecurityCollectionAge && (o = u.maxDeferredSocialSecurityCollectionAge);
                    if (o < u.beginSocialSecurityCollectionAge) throw new Error("Invalid retirementAge, it must be >= " + u.beginSocialSecurityCollectionAge);
                    if (f < 0) throw new Error("Invalid salaryGrowth, it must be >= 0");
                    if (l < 0) throw new Error("Invalid inflation, it must be >= 0");
                    c = c || u.year;
                    var d = n(15).generate(),
                        v = [5, 4.9, 4.7, 4.3, 4.1, 4.1, 4, 3.9].concat(s.fill(3.8, 63));
                    r.each(v, function(e) {
                        var t = r.last(d),
                            n = 1 + l / 100,
                            i = 1 + e / 100;
                        d.push({
                            year: t.year + 1,
                            maxEarnings: t.maxEarnings * n,
                            firstBend: t.firstBend * n,
                            secondBend: t.secondBend * n,
                            wageIndex: t.wageIndex * i
                        })
                    });
                    var m = 1 + f / 100 + l / 100,
                        g = h - 1,
                        y = o - g - 1,
                        b = e - g - 1,
                        w = [],
                        E, S;
                    w[b] = {
                        age: e,
                        year: c,
                        nominalEarnings: t
                    }, E = b + 1, S = b - 1;
                    while (E <= y || S >= 0) {
                        if (E <= y) {
                            var x = w[E - 1];
                            w[E] = {
                                age: x.age + 1,
                                year: x.year + 1,
                                nominalEarnings: x.nominalEarnings * m
                            }
                        }
                        if (S >= 0) {
                            var T = w[S + 1];
                            w[S] = {
                                age: T.age - 1,
                                year: T.year - 1,
                                nominalEarnings: T.nominalEarnings / m
                            }
                        }
                        E += 1, S -= 1
                    }
                    var N = r.first(w),
                        C;
                    r.each(d, function(e, t) {
                        e.year === N.year && (C = t)
                    }), r.each(w, function(e) {
                        var t = d[C];
                        e.maxEarnings = t.maxEarnings, e.firstBend = t.firstBend.round(0), e.secondBend = t.secondBend.round(0), e.wageIndex = t.wageIndex, C += 1
                    });
                    var k = c - e + 60,
                        L = r.findWhere(w, {
                            year: k
                        });
                    r.each(w, function(e) {
                        e.indexingFactor = L.wageIndex / e.wageIndex, e.indexedEarnings = Math.min(e.nominalEarnings, e.maxEarnings) * e.indexingFactor
                    });
                    var A = r.sortBy(w, function(e) {
                            return -1 * e.indexedEarnings
                        }),
                        O = 35,
                        M = r.map(r.first(A, O), function(e) {
                            return e.indexedEarnings.round(2)
                        }),
                        D = i.sum(M) / (O * 12),
                        P = r.findWhere(w, {
                            age: u.beginSocialSecurityCollectionAge
                        }),
                        H = P.firstBend,
                        B = P.secondBend,
                        j = .9,
                        F = .32,
                        I = .15,
                        q = i.roundDownToDime(j * Math.min(D, H) + F * Math.max(Math.min(D - H, B - H), 0) + I * Math.max(D - B, 0)),
                        R = Math.min(Math.max(c - e, 1924), 1960),
                        U = a[R + ""],
                        z = i.roundDownToDime(q * U[o] / 100);
                    return p > 0 && (z *= Math.pow(1 + l / 100, p)), z
                },
                getSocialSecurityCollectionInfo: function(e, t, n, r, s, a, f, l, c) {
                    var h = Math.max(u.beginSocialSecurityCollectionAge, n),
                        p = this.calculateMonthlySocialSecurity(e, s, h, f, l, c),
                        d = i.roundDownToDime(o.todaysDollars(p, h - e, l, 1)),
                        v, m, g;
                    return t && (v = Math.max(u.beginSocialSecurityCollectionAge, r), m = this.calculateMonthlySocialSecurity(t, a, v, f, l, c), g = i.roundDownToDime(o.todaysDollars(m, v - t, l, 1))), {
                        beginSocialSecurityCollectionAge: h,
                        spouseBeginSocialSecurityCollectionAge: v,
                        monthlySocialSecurityFutureDollars: p,
                        spouseMonthlySocialSecurityFutureDollars: m,
                        monthlySocialSecurityTodaysDollars: d,
                        spouseMonthlySocialSecurityTodaysDollars: g
                    }
                },
                calculateAverageYearlySocialSecurity: function(e, t, n, r, i, s, o, u, a, f, l) {
                    var c = this.getSocialSecurityCollectionInfo(e, t, n, r, o, u, a, f, l),
                        h = i - n,
                        p = 0;
                    for (var d = 0; d < h; d++) {
                        var v = n + d;
                        v >= c.beginSocialSecurityCollectionAge && (p += c.monthlySocialSecurityTodaysDollars * 12);
                        if (t) {
                            var m = t - e,
                                g = v + m;
                            g >= c.spouseBeginSocialSecurityCollectionAge && g < s && (p += c.spouseMonthlySocialSecurityTodaysDollars * 12)
                        }
                    }
                    return p / h
                }
            }
        }, function(e, t) {
            e.exports = {
                1924: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 103,
                    67: 106,
                    68: 109,
                    69: 112,
                    70: 115
                },
                1925: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 103.5,
                    67: 107,
                    68: 110.5,
                    69: 114,
                    70: 117.5
                },
                1926: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 103.5,
                    67: 107,
                    68: 110.5,
                    69: 114,
                    70: 117.5
                },
                1927: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 104,
                    67: 108,
                    68: 112,
                    69: 116,
                    70: 120
                },
                1928: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 104,
                    67: 108,
                    68: 112,
                    69: 116,
                    70: 120
                },
                1929: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 104.5,
                    67: 109,
                    68: 113.5,
                    69: 118,
                    70: 122.5
                },
                1930: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 104.5,
                    67: 109,
                    68: 113.5,
                    69: 118,
                    70: 122.5
                },
                1931: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 105,
                    67: 110,
                    68: 115,
                    69: 120,
                    70: 125
                },
                1932: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 105,
                    67: 110,
                    68: 115,
                    69: 120,
                    70: 125
                },
                1933: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 105.5,
                    67: 111,
                    68: 116.5,
                    69: 122,
                    70: 127.5
                },
                1934: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 105.5,
                    67: 111,
                    68: 116.5,
                    69: 122,
                    70: 127.5
                },
                1935: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 106,
                    67: 112,
                    68: 118,
                    69: 124,
                    70: 130
                },
                1936: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 106,
                    67: 112,
                    68: 118,
                    69: 124,
                    70: 130
                },
                1937: {
                    62: 80,
                    63: 86.67,
                    64: 93.33333,
                    65: 100,
                    66: 106.5,
                    67: 113,
                    68: 119.5,
                    69: 126,
                    70: 132.5
                },
                1938: {
                    62: 79.16667,
                    63: 85.55556,
                    64: 92.22222,
                    65: 98.88889,
                    66: 105.41667,
                    67: 111.9167,
                    68: 118.4167,
                    69: 124.9167,
                    70: 131.4167
                },
                1939: {
                    62: 78.33333,
                    63: 84.44444,
                    64: 91.11111,
                    65: 97.77778,
                    66: 104.66667,
                    67: 111.6667,
                    68: 118.6667,
                    69: 125.6667,
                    70: 132.6667
                },
                1940: {
                    62: 77.5,
                    63: 83.33333,
                    64: 90,
                    65: 96.66667,
                    66: 103.5,
                    67: 110.5,
                    68: 117.5,
                    69: 124.5,
                    70: 131.5
                },
                1941: {
                    62: 76.66667,
                    63: 82.22222,
                    64: 88.88889,
                    65: 95.55556,
                    66: 102.5,
                    67: 110,
                    68: 117.5,
                    69: 125,
                    70: 132.5
                },
                1942: {
                    62: 75.83333,
                    63: 81.11111,
                    64: 87.77778,
                    65: 94.44444,
                    66: 101.25,
                    67: 108.75,
                    68: 116.25,
                    69: 123.75,
                    70: 131.25
                },
                1943: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1944: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1945: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1946: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1947: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1948: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1949: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1950: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1951: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1952: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1953: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1954: {
                    62: 75,
                    63: 80,
                    64: 86.66667,
                    65: 93.33333,
                    66: 100,
                    67: 108,
                    68: 116,
                    69: 124,
                    70: 132
                },
                1955: {
                    62: 74.16667,
                    63: 79.16667,
                    64: 85.55556,
                    65: 92.22222,
                    66: 98.88889,
                    67: 106.6667,
                    68: 114.6667,
                    69: 122.6667,
                    70: 130.6667
                },
                1956: {
                    62: 73.33333,
                    63: 78.33333,
                    64: 84.44444,
                    65: 91.11111,
                    66: 97.77778,
                    67: 105.3333,
                    68: 113.3333,
                    69: 121.3333,
                    70: 129.3333
                },
                1957: {
                    62: 72.5,
                    63: 77.5,
                    64: 83.33333,
                    65: 90,
                    66: 96.66667,
                    67: 104,
                    68: 112,
                    69: 120,
                    70: 128
                },
                1958: {
                    62: 71.66667,
                    63: 76.66667,
                    64: 82.22222,
                    65: 88.88889,
                    66: 95.55556,
                    67: 102.6667,
                    68: 110.6667,
                    69: 118.6667,
                    70: 126.6667
                },
                1959: {
                    62: 70.83333,
                    63: 75.83333,
                    64: 81.11111,
                    65: 87.77778,
                    66: 94.44444,
                    67: 101.3333,
                    68: 109.3333,
                    69: 117.3333,
                    70: 125.3333
                },
                1960: {
                    62: 70,
                    63: 75,
                    64: 80,
                    65: 86.66667,
                    66: 93.33333,
                    67: 100,
                    68: 108,
                    69: 116,
                    70: 124
                }
            }
        }, function(e, t) {
            e.exports = {
                generate: function() {
                    return [{
                        year: 1951,
                        maxEarnings: 3600,
                        wageIndex: 2799.16,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1952,
                        maxEarnings: 3600,
                        wageIndex: 2973.32,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1953,
                        maxEarnings: 3600,
                        wageIndex: 3139.44,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1954,
                        maxEarnings: 3600,
                        wageIndex: 3155.64,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1955,
                        maxEarnings: 4200,
                        wageIndex: 3301.44,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1956,
                        maxEarnings: 4200,
                        wageIndex: 3532.36,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1957,
                        maxEarnings: 4200,
                        wageIndex: 3641.72,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1958,
                        maxEarnings: 4200,
                        wageIndex: 3673.8,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1959,
                        maxEarnings: 4800,
                        wageIndex: 3855.8,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1960,
                        maxEarnings: 4800,
                        wageIndex: 4007.12,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1961,
                        maxEarnings: 4800,
                        wageIndex: 4086.76,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1962,
                        maxEarnings: 4800,
                        wageIndex: 4291.4,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1963,
                        maxEarnings: 4800,
                        wageIndex: 4396.64,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1964,
                        maxEarnings: 4800,
                        wageIndex: 4576.32,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1965,
                        maxEarnings: 4800,
                        wageIndex: 4658.72,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1966,
                        maxEarnings: 6600,
                        wageIndex: 4938.36,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1967,
                        maxEarnings: 6600,
                        wageIndex: 5213.44,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1968,
                        maxEarnings: 7800,
                        wageIndex: 5571.76,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1969,
                        maxEarnings: 7800,
                        wageIndex: 5893.76,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1970,
                        maxEarnings: 7800,
                        wageIndex: 6186.24,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1971,
                        maxEarnings: 7800,
                        wageIndex: 6497.08,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1972,
                        maxEarnings: 9e3,
                        wageIndex: 7133.8,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1973,
                        maxEarnings: 10800,
                        wageIndex: 7580.16,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1974,
                        maxEarnings: 13200,
                        wageIndex: 8030.76,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1975,
                        maxEarnings: 14100,
                        wageIndex: 8630.92,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1976,
                        maxEarnings: 15300,
                        wageIndex: 9226.48,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1977,
                        maxEarnings: 16500,
                        wageIndex: 9779.44,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1978,
                        maxEarnings: 17700,
                        wageIndex: 10556.03,
                        firstBend: 0,
                        secondBend: 0
                    }, {
                        year: 1979,
                        maxEarnings: 22900,
                        wageIndex: 11479.46,
                        firstBend: 180,
                        secondBend: 1085
                    }, {
                        year: 1980,
                        maxEarnings: 25900,
                        wageIndex: 12513.46,
                        firstBend: 194,
                        secondBend: 1171
                    }, {
                        year: 1981,
                        maxEarnings: 29700,
                        wageIndex: 13773.1,
                        firstBend: 211,
                        secondBend: 1274
                    }, {
                        year: 1982,
                        maxEarnings: 32400,
                        wageIndex: 14531.34,
                        firstBend: 230,
                        secondBend: 1388
                    }, {
                        year: 1983,
                        maxEarnings: 35700,
                        wageIndex: 15239.24,
                        firstBend: 254,
                        secondBend: 1528
                    }, {
                        year: 1984,
                        maxEarnings: 37800,
                        wageIndex: 16135.07,
                        firstBend: 267,
                        secondBend: 1612
                    }, {
                        year: 1985,
                        maxEarnings: 39600,
                        wageIndex: 16822.51,
                        firstBend: 280,
                        secondBend: 1691
                    }, {
                        year: 1986,
                        maxEarnings: 42e3,
                        wageIndex: 17321.82,
                        firstBend: 297,
                        secondBend: 1790
                    }, {
                        year: 1987,
                        maxEarnings: 43800,
                        wageIndex: 18426.51,
                        firstBend: 310,
                        secondBend: 1866
                    }, {
                        year: 1988,
                        maxEarnings: 45e3,
                        wageIndex: 19334.04,
                        firstBend: 319,
                        secondBend: 1922
                    }, {
                        year: 1989,
                        maxEarnings: 48e3,
                        wageIndex: 20099.55,
                        firstBend: 339,
                        secondBend: 2044
                    }, {
                        year: 1990,
                        maxEarnings: 51300,
                        wageIndex: 21027.98,
                        firstBend: 356,
                        secondBend: 2145
                    }, {
                        year: 1991,
                        maxEarnings: 53400,
                        wageIndex: 21811.6,
                        firstBend: 370,
                        secondBend: 2230
                    }, {
                        year: 1992,
                        maxEarnings: 55500,
                        wageIndex: 22935.42,
                        firstBend: 387,
                        secondBend: 2333
                    }, {
                        year: 1993,
                        maxEarnings: 57600,
                        wageIndex: 23132.67,
                        firstBend: 401,
                        secondBend: 2420
                    }, {
                        year: 1994,
                        maxEarnings: 60600,
                        wageIndex: 23753.53,
                        firstBend: 422,
                        secondBend: 2545
                    }, {
                        year: 1995,
                        maxEarnings: 61200,
                        wageIndex: 24705.66,
                        firstBend: 426,
                        secondBend: 2567
                    }, {
                        year: 1996,
                        maxEarnings: 62700,
                        wageIndex: 25913.9,
                        firstBend: 437,
                        secondBend: 2635
                    }, {
                        year: 1997,
                        maxEarnings: 65400,
                        wageIndex: 27426,
                        firstBend: 455,
                        secondBend: 2741
                    }, {
                        year: 1998,
                        maxEarnings: 68400,
                        wageIndex: 28861.44,
                        firstBend: 477,
                        secondBend: 2875
                    }, {
                        year: 1999,
                        maxEarnings: 72600,
                        wageIndex: 30469.84,
                        firstBend: 505,
                        secondBend: 3043
                    }, {
                        year: 2e3,
                        maxEarnings: 76200,
                        wageIndex: 32154.82,
                        firstBend: 531,
                        secondBend: 3202
                    }, {
                        year: 2001,
                        maxEarnings: 80400,
                        wageIndex: 32921.92,
                        firstBend: 561,
                        secondBend: 3381
                    }, {
                        year: 2002,
                        maxEarnings: 84900,
                        wageIndex: 33252.09,
                        firstBend: 592,
                        secondBend: 3567
                    }, {
                        year: 2003,
                        maxEarnings: 87e3,
                        wageIndex: 34064.95,
                        firstBend: 606,
                        secondBend: 3653
                    }, {
                        year: 2004,
                        maxEarnings: 87900,
                        wageIndex: 35648.55,
                        firstBend: 612,
                        secondBend: 3689
                    }, {
                        year: 2005,
                        maxEarnings: 9e4,
                        wageIndex: 36952.94,
                        firstBend: 627,
                        secondBend: 3779
                    }, {
                        year: 2006,
                        maxEarnings: 94200,
                        wageIndex: 38651.41,
                        firstBend: 656,
                        secondBend: 3955
                    }, {
                        year: 2007,
                        maxEarnings: 97500,
                        wageIndex: 40405.48,
                        firstBend: 680,
                        secondBend: 4100
                    }, {
                        year: 2008,
                        maxEarnings: 102e3,
                        wageIndex: 41334.97,
                        firstBend: 711,
                        secondBend: 4288
                    }, {
                        year: 2009,
                        maxEarnings: 106800,
                        wageIndex: 40711.61,
                        firstBend: 744,
                        secondBend: 4483
                    }, {
                        year: 2010,
                        maxEarnings: 106800,
                        wageIndex: 41673.83,
                        firstBend: 761,
                        secondBend: 4586
                    }, {
                        year: 2011,
                        maxEarnings: 106800,
                        wageIndex: 42979.61,
                        firstBend: 749,
                        secondBend: 4517
                    }, {
                        year: 2012,
                        maxEarnings: 110100,
                        wageIndex: 44321.67,
                        firstBend: 767,
                        secondBend: 4624
                    }, {
                        year: 2013,
                        maxEarnings: 113700,
                        wageIndex: 44888.16,
                        firstBend: 791,
                        secondBend: 4768
                    }, {
                        year: 2014,
                        maxEarnings: 117e3,
                        wageIndex: 46549.02,
                        firstBend: 816,
                        secondBend: 4917
                    }, {
                        year: 2015,
                        maxEarnings: 118500,
                        wageIndex: 48829.92,
                        firstBend: 826,
                        secondBend: 4980
                    }]
                }
            }
        }, function(e, t) {
            e.exports = {
                AL: {
                    brackets: [{
                        taxRate: .02,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .04,
                        single: 500,
                        marriedJointly: 1e3
                    }, {
                        taxRate: .05,
                        single: 3e3,
                        marriedJointly: 6e3
                    }],
                    deduction: {
                        single: 2500,
                        marriedJointly: 7500
                    },
                    exemption: {
                        single: 1500,
                        marriedJointly: 3e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AK: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AZ: {
                    brackets: [{
                        taxRate: .0259,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0288,
                        single: 1e4,
                        marriedJointly: 2e4
                    }, {
                        taxRate: .0336,
                        single: 25e3,
                        marriedJointly: 5e4
                    }, {
                        taxRate: .0424,
                        single: 5e4,
                        marriedJointly: 1e5
                    }, {
                        taxRate: .0454,
                        single: 15e4,
                        marriedJointly: 3e5
                    }],
                    deduction: {
                        single: 4945,
                        marriedJointly: 9883
                    },
                    exemption: {
                        single: 2100,
                        marriedJointly: 4200
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AR: {
                    brackets: [{
                        taxRate: .01,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .025,
                        single: 4199,
                        marriedJointly: 4199
                    }, {
                        taxRate: .035,
                        single: 8299,
                        marriedJointly: 8299
                    }, {
                        taxRate: .045,
                        single: 12399,
                        marriedJointly: 12399
                    }, {
                        taxRate: .06,
                        single: 20699,
                        marriedJointly: 20699
                    }, {
                        taxRate: .07,
                        single: 34599,
                        marriedJointly: 34599
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 26,
                        marriedJointly: 52
                    }
                },
                ACT: {
                    brackets: [{
                        taxRate: .01,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .02,
                        single: 7582,
                        marriedJointly: 15164
                    }, {
                        taxRate: .04,
                        single: 17976,
                        marriedJointly: 35952
                    }, {
                        taxRate: .06,
                        single: 28371,
                        marriedJointly: 56742
                    }, {
                        taxRate: .08,
                        single: 39384,
                        marriedJointly: 78768
                    }, {
                        taxRate: .093,
                        single: 49774,
                        marriedJointly: 99548
                    }, {
                        taxRate: .103,
                        single: 254250,
                        marriedJointly: 508500
                    }, {
                        taxRate: .113,
                        single: 305100,
                        marriedJointly: 610200
                    }, {
                        taxRate: .123,
                        single: 508500,
                        marriedJointly: 1e6
                    }, {
                        taxRate: .133,
                        single: 1e6,
                        marriedJointly: 1017e3
                    }],
                    deduction: {
                        single: 3906,
                        marriedJointly: 7812
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 106,
                        marriedJointly: 212
                    }
                },
                NSW: {
                    brackets: [{
                        taxRate: .0463,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NT: {
                    brackets: [{
                        taxRate: .03,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .05,
                        single: 1e4,
                        marriedJointly: 2e4
                    }, {
                        taxRate: .055,
                        single: 5e4,
                        marriedJointly: 1e5
                    }, {
                        taxRate: .06,
                        single: 1e5,
                        marriedJointly: 2e5
                    }, {
                        taxRate: .065,
                        single: 2e5,
                        marriedJointly: 4e5
                    }, {
                        taxRate: .067,
                        single: 25e4,
                        marriedJointly: 5e5
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 14e3,
                        marriedJointly: 24e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                QLD: {
                    brackets: [{
                        taxRate: .022,
                        single: 2e3,
                        marriedJointly: 2e3
                    }, {
                        taxRate: .039,
                        single: 5e3,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .048,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .052,
                        single: 2e4,
                        marriedJointly: 2e4
                    }, {
                        taxRate: .0555,
                        single: 25e3,
                        marriedJointly: 25e3
                    }, {
                        taxRate: .066,
                        single: 6e4,
                        marriedJointly: 6e4
                    }],
                    deduction: {
                        single: 3250,
                        marriedJointly: 6500
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 110,
                        marriedJointly: 220
                    }
                },
                SA: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                TAS: {
                    brackets: [{
                        taxRate: .01,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .02,
                        single: 750,
                        marriedJointly: 1e3
                    }, {
                        taxRate: .03,
                        single: 2250,
                        marriedJointly: 3e3
                    }, {
                        taxRate: .04,
                        single: 3750,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .05,
                        single: 5250,
                        marriedJointly: 7e3
                    }, {
                        taxRate: .06,
                        single: 7e3,
                        marriedJointly: 1e4
                    }],
                    deduction: {
                        single: 2300,
                        marriedJointly: 3e3
                    },
                    exemption: {
                        single: 2700,
                        marriedJointly: 7400
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                VIC: {
                    brackets: [{
                        taxRate: .014,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .032,
                        single: 2400,
                        marriedJointly: 4800
                    }, {
                        taxRate: .055,
                        single: 4800,
                        marriedJointly: 9600
                    }, {
                        taxRate: .064,
                        single: 9600,
                        marriedJointly: 19200
                    }, {
                        taxRate: .068,
                        single: 14400,
                        marriedJointly: 28800
                    }, {
                        taxRate: .072,
                        single: 19200,
                        marriedJointly: 38400
                    }, {
                        taxRate: .076,
                        single: 24e3,
                        marriedJointly: 48e3
                    }, {
                        taxRate: .079,
                        single: 36e3,
                        marriedJointly: 72e3
                    }, {
                        taxRate: .0825,
                        single: 48e3,
                        marriedJointly: 96e3
                    }, {
                        taxRate: .09,
                        single: 15e4,
                        marriedJointly: 3e5
                    }, {
                        taxRate: .1,
                        single: 175e3,
                        marriedJointly: 35e4
                    }, {
                        taxRate: .11,
                        single: 2e5,
                        marriedJointly: 4e5
                    }],
                    deduction: {
                        single: 2200,
                        marriedJointly: 4400
                    },
                    exemption: {
                        single: 1144,
                        marriedJointly: 2288
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                WA: {
                    brackets: [{
                        taxRate: .016,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .036,
                        single: 1408,
                        marriedJointly: 2817
                    }, {
                        taxRate: .041,
                        single: 2817,
                        marriedJointly: 5635
                    }, {
                        taxRate: .051,
                        single: 4226,
                        marriedJointly: 8453
                    }, {
                        taxRate: .061,
                        single: 5635,
                        marriedJointly: 11271
                    }, {
                        taxRate: .071,
                        single: 7044,
                        marriedJointly: 14089
                    }, {
                        taxRate: .074,
                        single: 10567,
                        marriedJointly: 21136
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                IL: {
                    brackets: [{
                        taxRate: .05,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 2125,
                        marriedJointly: 4250
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                IN: {
                    brackets: [{
                        taxRate: .034,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 1e3,
                        marriedJointly: 2e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                IA: {
                    brackets: [{
                        taxRate: .0036,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0072,
                        single: 1515,
                        marriedJointly: 1515
                    }, {
                        taxRate: .0243,
                        single: 3030,
                        marriedJointly: 3030
                    }, {
                        taxRate: .045,
                        single: 6060,
                        marriedJointly: 6060
                    }, {
                        taxRate: .0612,
                        single: 13635,
                        marriedJointly: 13635
                    }, {
                        taxRate: .0648,
                        single: 22725,
                        marriedJointly: 22725
                    }, {
                        taxRate: .068,
                        single: 30300,
                        marriedJointly: 30300
                    }, {
                        taxRate: .0792,
                        single: 45450,
                        marriedJointly: 45450
                    }, {
                        taxRate: .0898,
                        single: 68175,
                        marriedJointly: 68175
                    }],
                    deduction: {
                        single: 1900,
                        marriedJointly: 4670
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 40,
                        marriedJointly: 80
                    }
                },
                KS: {
                    brackets: [{
                        taxRate: .027,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .048,
                        single: 15e3,
                        marriedJointly: 3e4
                    }],
                    deduction: {
                        single: 3e3,
                        marriedJointly: 7500
                    },
                    exemption: {
                        single: 2250,
                        marriedJointly: 4500
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                CO: {
                    brackets: [{
                        taxRate: .02,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .03,
                        single: 3e3,
                        marriedJointly: 3e3
                    }, {
                        taxRate: .04,
                        single: 4e3,
                        marriedJointly: 4e3
                    }, {
                        taxRate: .05,
                        single: 5e3,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .058,
                        single: 8e3,
                        marriedJointly: 8e3
                    }, {
                        taxRate: .06,
                        single: 75e3,
                        marriedJointly: 75e3
                    }],
                    deduction: {
                        single: 2360,
                        marriedJointly: 2360
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 20,
                        marriedJointly: 40
                    }
                },
                LA: {
                    brackets: [{
                        taxRate: .02,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .04,
                        single: 12500,
                        marriedJointly: 25e3
                    }, {
                        taxRate: .06,
                        single: 5e4,
                        marriedJointly: 1e5
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 4500,
                        marriedJointly: 9e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                ME: {
                    brackets: [{
                        taxRate: .065,
                        single: 5200,
                        marriedJointly: 10450
                    }, {
                        taxRate: .0795,
                        single: 20900,
                        marriedJointly: 41850
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MD: {
                    brackets: [{
                        taxRate: .02,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .03,
                        single: 1e3,
                        marriedJointly: 1e3
                    }, {
                        taxRate: .04,
                        single: 2e3,
                        marriedJointly: 2e3
                    }, {
                        taxRate: .0475,
                        single: 3e3,
                        marriedJointly: 3e3
                    }, {
                        taxRate: .05,
                        single: 1e5,
                        marriedJointly: 15e4
                    }, {
                        taxRate: .0525,
                        single: 125e3,
                        marriedJointly: 175e3
                    }, {
                        taxRate: .055,
                        single: 15e4,
                        marriedJointly: 225e3
                    }, {
                        taxRate: .0575,
                        single: 25e4,
                        marriedJointly: 3e5
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 3200,
                        marriedJointly: 6400
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MA: {
                    brackets: [{
                        taxRate: .052,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 4400,
                        marriedJointly: 8800
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MI: {
                    brackets: [{
                        taxRate: .0425,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MN: {
                    brackets: [{
                        taxRate: .0535,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0705,
                        single: 24680,
                        marriedJointly: 36080
                    }, {
                        taxRate: .0785,
                        single: 81080,
                        marriedJointly: 143350
                    }, {
                        taxRate: .0985,
                        single: 152540,
                        marriedJointly: 254240
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MS: {
                    brackets: [{
                        taxRate: .03,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .04,
                        single: 5e3,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .05,
                        single: 1e4,
                        marriedJointly: 1e4
                    }],
                    deduction: {
                        single: 2300,
                        marriedJointly: 4600
                    },
                    exemption: {
                        single: 6e3,
                        marriedJointly: 12e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MO: {
                    brackets: [{
                        taxRate: .015,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .02,
                        single: 1e3,
                        marriedJointly: 1e3
                    }, {
                        taxRate: .025,
                        single: 2e3,
                        marriedJointly: 2e3
                    }, {
                        taxRate: .03,
                        single: 3e3,
                        marriedJointly: 3e3
                    }, {
                        taxRate: .035,
                        single: 4e3,
                        marriedJointly: 4e3
                    }, {
                        taxRate: .04,
                        single: 5e3,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .045,
                        single: 6e3,
                        marriedJointly: 6e3
                    }, {
                        taxRate: .05,
                        single: 7e3,
                        marriedJointly: 7e3
                    }, {
                        taxRate: .055,
                        single: 8e3,
                        marriedJointly: 8e3
                    }, {
                        taxRate: .06,
                        single: 9e3,
                        marriedJointly: 9e3
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 2100,
                        marriedJointly: 4200
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                MT: {
                    brackets: [{
                        taxRate: .01,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .02,
                        single: 2800,
                        marriedJointly: 2800
                    }, {
                        taxRate: .03,
                        single: 4900,
                        marriedJointly: 4900
                    }, {
                        taxRate: .04,
                        single: 7400,
                        marriedJointly: 7400
                    }, {
                        taxRate: .05,
                        single: 10100,
                        marriedJointly: 10100
                    }, {
                        taxRate: .06,
                        single: 13e3,
                        marriedJointly: 13e3
                    }, {
                        taxRate: .069,
                        single: 16700,
                        marriedJointly: 16700
                    }],
                    deduction: {
                        single: 4270,
                        marriedJointly: 8540
                    },
                    exemption: {
                        single: 2280,
                        marriedJointly: 4560
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NE: {
                    brackets: [{
                        taxRate: .0246,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0351,
                        single: 3e3,
                        marriedJointly: 6e3
                    }, {
                        taxRate: .0501,
                        single: 18e3,
                        marriedJointly: 36e3
                    }, {
                        taxRate: .0684,
                        single: 29e3,
                        marriedJointly: 58e3
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 126,
                        marriedJointly: 252
                    }
                },
                NV: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NH: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NJ: {
                    brackets: [{
                        taxRate: .014,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0175,
                        single: 2e4,
                        marriedJointly: 2e4
                    }, {
                        taxRate: .0245,
                        single: -1,
                        marriedJointly: 5e4
                    }, {
                        taxRate: .035,
                        single: 35e3,
                        marriedJointly: 7e4
                    }, {
                        taxRate: .0553,
                        single: 4e4,
                        marriedJointly: 8e4
                    }, {
                        taxRate: .0637,
                        single: 75e3,
                        marriedJointly: 15e4
                    }, {
                        taxRate: .0897,
                        single: 5e5,
                        marriedJointly: 5e5
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 1e3,
                        marriedJointly: 2e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NM: {
                    brackets: [{
                        taxRate: .017,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .032,
                        single: 5500,
                        marriedJointly: 8e3
                    }, {
                        taxRate: .047,
                        single: 11e3,
                        marriedJointly: 16e3
                    }, {
                        taxRate: .049,
                        single: 16e3,
                        marriedJointly: 24e3
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NY: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .045,
                        single: 8200,
                        marriedJointly: 16450
                    }, {
                        taxRate: .0525,
                        single: 11300,
                        marriedJointly: 22600
                    }, {
                        taxRate: .059,
                        single: 13350,
                        marriedJointly: 26750
                    }, {
                        taxRate: .0645,
                        single: 20550,
                        marriedJointly: 41150
                    }, {
                        taxRate: .0665,
                        single: 77150,
                        marriedJointly: 154350
                    }, {
                        taxRate: .0685,
                        single: 205850,
                        marriedJointly: 308750
                    }, {
                        taxRate: .0882,
                        single: 1029250,
                        marriedJointly: 2058550
                    }],
                    deduction: {
                        single: 7700,
                        marriedJointly: 15400
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                NC: {
                    brackets: [{
                        taxRate: .06,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .07,
                        single: 12750,
                        marriedJointly: 21250
                    }, {
                        taxRate: .0775,
                        single: 6e4,
                        marriedJointly: 1e5
                    }],
                    deduction: {
                        single: 3e3,
                        marriedJointly: 6e3
                    },
                    exemption: {
                        single: 2500,
                        marriedJointly: 5e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                ND: {
                    brackets: [{
                        taxRate: .0122,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0227,
                        single: 36900,
                        marriedJointly: 73800
                    }, {
                        taxRate: .0252,
                        single: 89350,
                        marriedJointly: 148850
                    }, {
                        taxRate: .0293,
                        single: 186350,
                        marriedJointly: 226850
                    }, {
                        taxRate: .0322,
                        single: 405100,
                        marriedJointly: 405100
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                OH: {
                    brackets: [{
                        taxRate: .0054,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0107,
                        single: 5200,
                        marriedJointly: 5200
                    }, {
                        taxRate: .0215,
                        single: 10400,
                        marriedJointly: 10400
                    }, {
                        taxRate: .0269,
                        single: 15650,
                        marriedJointly: 15650
                    }, {
                        taxRate: .0322,
                        single: 20900,
                        marriedJointly: 20900
                    }, {
                        taxRate: .0376,
                        single: 41700,
                        marriedJointly: 41700
                    }, {
                        taxRate: .043,
                        single: 83350,
                        marriedJointly: 83350
                    }, {
                        taxRate: .0499,
                        single: 104250,
                        marriedJointly: 104250
                    }, {
                        taxRate: .0539,
                        single: 208500,
                        marriedJointly: 208500
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 1700,
                        marriedJointly: 3400
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                OK: {
                    brackets: [{
                        taxRate: .005,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .01,
                        single: 1e3,
                        marriedJointly: 2e3
                    }, {
                        taxRate: .02,
                        single: 2500,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .03,
                        single: 3750,
                        marriedJointly: 7500
                    }, {
                        taxRate: .04,
                        single: 4900,
                        marriedJointly: 9800
                    }, {
                        taxRate: .05,
                        single: 7200,
                        marriedJointly: 12200
                    }, {
                        taxRate: .0525,
                        single: 8700,
                        marriedJointly: 15e3
                    }],
                    deduction: {
                        single: 5950,
                        marriedJointly: 11900
                    },
                    exemption: {
                        single: 1e3,
                        marriedJointly: 2e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                OR: {
                    brackets: [{
                        taxRate: .05,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .07,
                        single: 3300,
                        marriedJointly: 6500
                    }, {
                        taxRate: .09,
                        single: 8250,
                        marriedJointly: 16300
                    }, {
                        taxRate: .099,
                        single: 125e3,
                        marriedJointly: 25e4
                    }],
                    deduction: {
                        single: 2080,
                        marriedJointly: 4160
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 188,
                        marriedJointly: 376
                    }
                },
                PA: {
                    brackets: [{
                        taxRate: .0307,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                RI: {
                    brackets: [{
                        taxRate: .0375,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0475,
                        single: 58600,
                        marriedJointly: 58600
                    }, {
                        taxRate: .0599,
                        single: 133250,
                        marriedJointly: 133250
                    }],
                    deduction: {
                        single: 8e3,
                        marriedJointly: 16e3
                    },
                    exemption: {
                        single: 3750,
                        marriedJointly: 7500
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                SC: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .03,
                        single: 2880,
                        marriedJointly: 2880
                    }, {
                        taxRate: .04,
                        single: 5760,
                        marriedJointly: 5760
                    }, {
                        taxRate: .05,
                        single: 8640,
                        marriedJointly: 8640
                    }, {
                        taxRate: .06,
                        single: 11520,
                        marriedJointly: 11520
                    }, {
                        taxRate: .07,
                        single: 14400,
                        marriedJointly: 14400
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7500
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                SD: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                TN: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                TX: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                UT: {
                    brackets: [{
                        taxRate: .05,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                VT: {
                    brackets: [{
                        taxRate: .0355,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .068,
                        single: 36900,
                        marriedJointly: 73800
                    }, {
                        taxRate: .078,
                        single: 89350,
                        marriedJointly: 148850
                    }, {
                        taxRate: .088,
                        single: 186350,
                        marriedJointly: 226850
                    }, {
                        taxRate: .0895,
                        single: 405100,
                        marriedJointly: 405100
                    }],
                    deduction: {
                        single: 6200,
                        marriedJointly: 12400
                    },
                    exemption: {
                        single: 3950,
                        marriedJointly: 7900
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                VA: {
                    brackets: [{
                        taxRate: .02,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .03,
                        single: 3e3,
                        marriedJointly: 3e3
                    }, {
                        taxRate: .05,
                        single: 5e3,
                        marriedJointly: 5e3
                    }, {
                        taxRate: .0575,
                        single: 17e3,
                        marriedJointly: 17e3
                    }],
                    deduction: {
                        single: 3e3,
                        marriedJointly: 6e3
                    },
                    exemption: {
                        single: 930,
                        marriedJointly: 1860
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                WA: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                WV: {
                    brackets: [{
                        taxRate: .03,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .04,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .045,
                        single: 25e3,
                        marriedJointly: 25e3
                    }, {
                        taxRate: .06,
                        single: 4e4,
                        marriedJointly: 4e4
                    }, {
                        taxRate: .065,
                        single: 6e4,
                        marriedJointly: 6e4
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                WI: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .0584,
                        single: 10910,
                        marriedJointly: 14540
                    }, {
                        taxRate: .0627,
                        single: 21820,
                        marriedJointly: 29090
                    }, {
                        taxRate: .0765,
                        single: 240190,
                        marriedJointly: 320250
                    }],
                    deduction: {
                        single: 9930,
                        marriedJointly: 17880
                    },
                    exemption: {
                        single: 700,
                        marriedJointly: 1400
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                WY: {
                    brackets: [{
                        taxRate: 0,
                        single: 0,
                        marriedJointly: 0
                    }],
                    deduction: {
                        single: 0,
                        marriedJointly: 0
                    },
                    exemption: {
                        single: 0,
                        marriedJointly: 0
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                DC: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .06,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .085,
                        single: 4e4,
                        marriedJointly: 4e4
                    }, {
                        taxRate: .0895,
                        single: 35e4,
                        marriedJointly: 35e4
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 1675,
                        marriedJointly: 3350
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AA: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .06,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .085,
                        single: 4e4,
                        marriedJointly: 4e4
                    }, {
                        taxRate: .0895,
                        single: 35e4,
                        marriedJointly: 35e4
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 1675,
                        marriedJointly: 3350
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AE: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .06,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .085,
                        single: 4e4,
                        marriedJointly: 4e4
                    }, {
                        taxRate: .0895,
                        single: 35e4,
                        marriedJointly: 35e4
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 1675,
                        marriedJointly: 3350
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                },
                AP: {
                    brackets: [{
                        taxRate: .04,
                        single: 0,
                        marriedJointly: 0
                    }, {
                        taxRate: .06,
                        single: 1e4,
                        marriedJointly: 1e4
                    }, {
                        taxRate: .085,
                        single: 4e4,
                        marriedJointly: 4e4
                    }, {
                        taxRate: .0895,
                        single: 35e4,
                        marriedJointly: 35e4
                    }],
                    deduction: {
                        single: 2e3,
                        marriedJointly: 4e3
                    },
                    exemption: {
                        single: 1675,
                        marriedJointly: 3350
                    },
                    credit: {
                        single: 0,
                        marriedJointly: 0
                    }
                }
            }
        }])
    }), define("components/account/scripts/constants/accountTypes", ["underscore"], function(e) {
        var t = Object.freeze({
                INVESTING: "INVESTING",
                TRADITIONAL_IRA: "TRADITIONAL_IRA",
                ROTH_IRA: "ROTH_IRA",
                SEP_IRA: "SEP_IRA"
            }),
            n = {
                INVESTING: "Investing",
                TRADITIONAL_IRA: "SMSF",
                ROTH_IRA: "SMSF",
                SEP_IRA: "SEP IRA"
            },
            r = e.clone(t);
        return r.getAll = function() {
            return e.values(t)
        }, r.getIRATypes = function() {
            return [t.TRADITIONAL_IRA, t.ROTH_IRA, t.SEP_IRA]
        }, r.isIRA = function(t) {
            return e.contains(r.getIRATypes(), t)
        }, r.isSEPIRA = function(e) {
            return e === t.SEP_IRA
        }, r.isInvesting = function(e) {
            return e === t.INVESTING
        }, r.isValid = function(e) {
            return r.isIRA(e) || r.isInvesting(e)
        }, r.getDisplayName = function(e) {
            return n[e]
        }, r
    }), define("components/account/scripts/services/goalTypeService", ["underscore", "components/account/scripts/constants/retirementConstants", "components/common/scripts/models/appData", "components/account/scripts/constants/accountTypes"], function(e, t, n, r) {
        return {
            getLabelForGoalType: function(e) {
                return this.getGoalTypeByName(e).label
            },
            getLabelForAccount: function(e) {
                return e.isRetirement() && e.isIncome() ? this.getLabelForGoalType("RETIREMENT_INCOME") : this.getLabelForGoalType(e.get("goalType"))
            },
            getGoalTypeByName: function(t) {
                return e.first(e.where(this.goalTypes(), {
                    value: t
                }))
            },
            isRetirement: function(t) {
                var n = ["RETIREMENT", "TRADITIONAL", "ROTH", "SEP", "RETIREMENT_INCOME","RETIREMENT_INCOME_ETHICAL","RETIREMENT_ETHICAL"];
                return e.contains(n, t)
            },
            goalTypes: function() {
                var t = [];
                return e.each(n.getInstance().get("goalTypes"), function(e, n) {
                    t.push({
                        term: parseInt(e.defaultTerm, 10),
                        value: n,
                        label: e.label
                    })
                }), this.displayGoalTypes().concat(t)
            },
            displayGoalTypes: function() {
                var e = n.getInstance().get("goalTypes"),
                    r = e.RETIREMENT.defaultTerm;
                return [{
                    term: r,
                    value: "TRADITIONAL",
                    label: "SMSF"
                }, {
                    term: r,
                    value: "ROTH",
                    label: "SMSF"
                }, {
                    term: r,
                    value: "SEP",
                    label: "SEP IRA"
                }, {
                    term: t.RETIREE_DEFAULT_INCOME_AGE,
                    value: "RETIREMENT_INCOME",
                    label: "Retirement Income"
                }]
            },
            nonRetirementGoalTypes: function() {
                return e.filter(this.goalTypes(), function(e) {
                    return !this.isRetirement(e.value)
                }, this)
            },
            getLabelForAccountType: function(e) {
                return this.getAccountTypeByName(e).label
            },
            getAccountTypeByName: function(t) {
                return e.first(e.where(this.accountTypes(), {
                    value: t
                }))
            },
            accountTypes: function() {
                return [{
                    label: "Regular (Taxable)",
                    value: r.INVESTING
                }, {
                    label: "SMSF",
                    value: r.TRADITIONAL_IRA
                }, {
                    label: "SMSF",
                    value: r.ROTH_IRA
                }, {
                    label: "SEP IRA",
                    value: r.SEP_IRA
                }]
            },
            iraAccountTypes: function() {
                return e.filter(this.accountTypes(), function(e) {
                    return !r.isInvesting(e.value)
                }, this)
            }
        }
    }), define("components/account/scripts/services/retirementService", ["components/account/scripts/services/goalTypeService", "components/account/scripts/constants/retirementConstants", "components/account/scripts/constants/accountConstants"], function(e, t, n) {
        var r = {
            getIncomeGoalRetirementAge: function(e) {
                if (e < t.INCOME_ADVICE_MIN_AGE) return e + n.MAX_TERM;
                var r = e + t.RETIREE_INCOME_MINIMUM_TERM;
                return Math.max(r, t.RETIREE_DEFAULT_INCOME_AGE)
            },
            getDefaultRetirementAge: function(n) {
                var r = e.getGoalTypeByName("RETIREMENT").term,
                    i = n + t.RETIREE_MINIMUM_TERM;
                return Math.max(i, r)
            },
            canGiveRetireeAdvice: function(e) {
                return this.canGiveRetireeAdviceForContext({
                    isRetired: e.isRetired(),
                    age: e.age(!0)
                })
            },
            canGiveRetireeAdviceForContext: function(e) {
                return e.isRetired
            },
            getDefaultTargetAgeForContext: function(e) {
                return e.income && this.canGiveRetireeAdviceForContext(e) ? this.getIncomeGoalRetirementAge(e.age) : this.getDefaultRetirementAge(e.age)
            }
        };
        return r
    }), define("components/common/scripts/constants/colors", [], function() {
        return {
            DRIFT_STATUS: {
                NORMAL: "#45a018",
                HIGH: "#dd0000",
                TRANSITION: "#dd0000"
            },
            RISK_TOLERANCE: {
                TOO_CONSERVATIVE: "#e05923",
                CONSERVATIVE: "#45a018",
                MODERATE: "#0d3866",
                AGGRESSIVE: "#45a018",
                TOO_AGGRESSIVE: "#e05923"
            },
            BASE_GRAPH: {
                FILL: "#ffffff",
                STROKE: "#333333",
                DRIFT: "#f5f5f5"
            },
            DONUT_VIEW: {
                BONDS: "#89c7e9",
                BONDS_TEXT: "#62a7cc",
                STOCKS: "#9dcb4e",
                STOCKS_TEXT: "#74b503"
            },
            ALLOCATION_PIE_GRAPH: {
                LOW_RANGE: "#334782",
                HIGH_RANGE: "#73b571"
            },
            GOAL_STATUS: {
                OFF_TRACK: "#e05923",
                ON_TRACK: "#45a018"
            },
            RETIREMENT_PLAN_SAVINGS: ["#91d071", "#469e19", "#50891e", "#7cc241", "#035d0e"]
        }
    }), define("common/constants/riskTolerance", ["components/common/scripts/constants/colors"], function(e) {
        return {
            TOO_CONSERVATIVE: {
                label: "Too Conservative",
                color: e.RISK_TOLERANCE.TOO_CONSERVATIVE
            },
            CONSERVATIVE: {
                label: "Conservative",
                color: e.RISK_TOLERANCE.CONSERVATIVE
            },
            MODERATE: {
                label: "Moderate",
                color: e.RISK_TOLERANCE.MODERATE
            },
            AGGRESSIVE: {
                label: "Aggressive",
                color: e.RISK_TOLERANCE.AGGRESSIVE
            },
            TOO_AGGRESSIVE: {
                label: "Too Aggressive",
                color: e.RISK_TOLERANCE.TOO_AGGRESSIVE
            }
        }
    }), define("models/account", ["jquery", "underscore", "backbone", "common/betterment.models", "models/v2/financialPlan", "models/automaticDeposit", "models/automaticWithdrawal", "models/accountReturn", "models/v2/smartDepositConfig", "models/taxYearContributions", "components/account/scripts/models/position", "components/account/scripts/models/positionCollection", "components/common/scripts/models/appData", "projector", "components/account/scripts/services/retirementService", "components/account/scripts/services/goalTypeService", "components/account/scripts/constants/accountConstants", "common/constants/riskTolerance", "components/transaction/scripts/constants/transactionConstants", "components/account/scripts/constants/accountTypes", "components/account/scripts/constants/retirementConstants"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w) {
        var E = ["RETIREMENT", "BUILD_WEALTH", "RETIREMENT_ETHICAL", "BUILD_WEALTH_ETHICAL"],
            S = function(e, n, i) {
                var s = (i.goalType === "RETIREMENT")||(i.goalType === "RETIREMENT_ETHICAL"),
                    o = r.Model.date(e);
                if (isNaN(o.getTime())) return (s ? "Age" : "Term") + " is required";
                var u = i.createdDate ? "Must be at least " + m.MIN_TERM + " year from the date you created your goal" : "Must be at least " + m.MIN_TERM + " year from now.",
                    a = "Must be at most " + m.MAX_TERM + " years from now.",
                    f = i.createdDate ? r.Model.date(i.createdDate) : new Date,
                    l = new Date,
                    c = m.MIN_TERM,
                    h = Math.round((o.getTime() - f.getTime()) / Date.MS_PER_YEAR),
                    p = Math.round((o.getTime() - l.getTime()) / Date.MS_PER_YEAR);
                t.contains(E, i.goalType) && (c = Number.NEGATIVE_INFINITY);
                if (h < c) return u;
                if (p > m.MAX_TERM) return a
            },
            x = function(e, t, n) {
                var r = N.convertTermToDate(e).serverFormat();
                return S(r, t, n)
            },
            T = function(e, t, n) {
                var r = N.convertAgeToDate(e).serverFormat();
                return S(r, t, n)
            },
            N = r.RelationalModel.extend({
                methodUrls: {
                    read: "/client/api/accounts",
                    create: "/client/api/accounts",
                    update: function() {
                        return "/client/api/accounts/" + this.id
                    },
                    patch: "/client/api/accounts",
                    "delete": "/client/api/accounts"
                },
                sync: function(e, i, s) {
                    var o = this.methodUrls[e];
                    return t.isFunction(o) ? s.url = o.apply(this) : s.url = o, t.contains(["create", "patch", "delete"], e) ? r.RelationalModel.prototype.sync.call(this, e, i, s) : n.RelationalModel.prototype.sync.call(this, e, i, s)
                },
                getEndpoint: function() {
                    return "/client/api/accounts/" + this.id
                },
                relations: [{
                    type: n.HasOne,
                    key: "automaticDeposit",
                    relatedModel: s,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "account",
                        keyDestination: "account",
                        includeInJSON: "id"
                    }
                }, {
                    type: n.HasOne,
                    key: "automaticWithdrawal",
                    relatedModel: o,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "account",
                        includeInJSON: "id"
                    }
                }, {
                    type: n.HasOne,
                    key: "accountReturn",
                    relatedModel: u,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "account",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "smartDepositConfig",
                    relatedModel: a,
                    parse: !0,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "account",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "financialPlan",
                    keySource: "financialPlanId",
                    relatedModel: i
                }, {
                    type: n.HasMany,
                    key: "taxYearContributions",
                    relatedModel: f.Model,
                    collectionType: f.Collection,
                    reverseRelation: {
                        key: "account",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasMany,
                    key: "positions",
                    relatedModel: l,
                    collectionType: c,
                    includeInJSON: !1,
                    reverseRelation: {
                        key: "account",
                        includeInJSON: !1
                    }
                }],
                validation: {
                    iraAgreement: {
                        required: function(e, t, n) {
                            return b.isIRA(n.accountType)
                        },
                        acceptance: !0
                    },
                    userAgreement: {
                        required: function(e, t, n) {
                            return b.isInvesting(n.accountType) && !BMT.accounts().hasInvestingAccount()
                        },
                        acceptance: !0
                    },
                    iraWithholding: {
                        required: function(e, t, n) {
                            return b.isIRA(n.accountType)
                        },
                        acceptance: !0
                    },
                    sepAgreement: {
                        required: function(e, t, n) {
                            return n.accountType === b.SEP_IRA
                        },
                        acceptance: !0
                    },
                    sepSingleEmployee: {
                        required: function(e, t, n) {
                            return n.accountType === b.SEP_IRA
                        },
                        acceptance: !0
                    },
                    goalAmount: {
                        required: !1,
                        pattern: "number",
                        min: 0,
                        max: m.MAX_TARGET_AMOUNT
                    },
                    name: {
                        required: !0,
                        rangeLength: [1, 64]
                    },
                    accountType: {
                        required: !0,
                        oneOf: b.getAll()
                    },
                    goalCompletionDate: S,
                    term: x,
                    age: T
                },
                labels: {
                    iraAgreement: "IRA agreement",
                    iraWithholding: "IRA Withholding agreement",
                    sepAgreement: "SEP agreement"
                },
                onInitialize: function() {
                    t.extend(this, new n.Memento(this))
                },
                toJSON: function() {
                    var e = this.getSuperClass().toJSON.apply(this);
                    return delete e.accountReturn, delete e.positions, t.isNull(e.goalAmount) && delete e.goalAmount, e
                },
                parse: function(e, n) {
                    if (e) {
                        var r = ["id", "allocation", "availableBalance", "availableBalanceForWithdrawal", "bondBalance", "cashBalance", "currentBalance", "ordering", "stockBalance", "totalInvested", "totalEarned", "pendingDeposits", "averageBalance", "lifetimeAverageBalance"];
                        t.each(r, function(t) {
                            e[t] = parseFloat(e[t])
                        }), BMT.accountGroup.is("demo") && this.attributes && this.has("automaticDeposit") && delete e.automaticDeposit, this.attributes && this.has("accountReturn") && delete e.accountReturn
                    }
                    return e
                },
                getIdOrCid: function() {
                    return BMT.hasSession() ? this.num("id") : this.cid
                },
                getUser: function() {
                    return this.get("accountGroup").get("parentUser")
                },
                getIRADisplayName: function() {
                    if (!this.isIRA()) return;
                    var e = b.getDisplayName(this.get("accountType"));
                    return this.is("inherited") ? "Inherited " + e : e
                },
                isComplete: function() {
                    return this.has("allocation")
                },
                nameIsEditable: function() {
                    return this.has("name") && !this.isIRA() && !this.get("accountGroup").is("demo")
                },
                isAccountType: function(e) {
                    return this.get("accountType") === b[e]
                },
                isInvestingAccount: function() {
                    return b.isInvesting(this.get("accountType"))
                },
                isIRA: function() {
                    return b.isIRA(this.get("accountType"))
                },
                isInheritedIRA: function() {
                    return this.isIRA() && this.is("inherited")
                },
                meetsNegativeReturnsPercentageThreshold: function(e) {
                    return this.get("accountReturn").get("lifetimePersonalReturn") <= e
                },
                meetsNegativeReturnsAgeThreshold: function(e) {
                    return this.date("createdDate").isAfter(e)
                },
                getIdParams: function() {
                    return {
                        bettermentdbAccountId: this.id
                    }
                },
                getGoalTypeLabel: function() {
                    var e;
                    this.isRetirement() && this.isIncome() ? e = "RETIREMENT_INCOME" : this.isIRA() ? e = this.get("accountType").replace(/_IRA$/, "") : e = this.get("goalType");
                    var t = v.getGoalTypeByName(e);
                    return t.label
                },
                isRothIRA: function() {
                    return this.get("accountType") === b.ROTH_IRA
                },
                isSepIRA: function() {
                    return this.get("accountType") === b.SEP_IRA
                },
                isTraditionalIRA: function() {
                    return this.get("accountType") === b.TRADITIONAL_IRA
                },
                isRetirementGoalDisplayedAsAge: function() {
                    return this.isRetirement() && this.get("accountGroup").isPersonal()
                },
                isRetirement: function() {
                    return this._testGoalType("RETIREMENT")|| this._testGoalType("RETIREMENT_ETHICAL")
                },
                isBuildWealth: function() {
                    return this._testGoalType("BUILD_WEALTH")||this._testGoalType("BUILD_WEALTH_ETHICAL")
                },
                isEmergency: function() {
                    return this._testGoalType("EMERGENCY")||this._testGoalType("EMERGENCY_ETHICAL")
                },
                isOther: function() {
                    return this._testGoalType("OTHER")
                },
                _testGoalType: function(e) {
                    return this.get("goalType") === e
                },
                isIncome: function() {
                    return this.is("income")
                },
                isPastGoal: function() {
                    return this.date("goalCompletionDate").getTime() - Date.now().getTime() <= 0
                },
                isAllowedAutoWithdrawals: function() {
                    return this.hasAutoWithdrawal() || this.isIncome()
                },
                hasAutoDeposit: function() {
                    return this._hasAutoTransaction("automaticDeposit")
                },
                hasAutoWithdrawal: function() {
                    return this._hasAutoTransaction("automaticWithdrawal")
                },
                _hasAutoTransaction: function(e) {
                    return this.has(e) && this.get(e).is("enabled") && this.get(e).num("amount") > 0
                },
                isSmartDepositEligible: function() {
                    return !t.any(this.get("smartDepositViolations"), function(e) {
                        return e === "ira" || e === "conflicting_smart_deposit"
                    })
                },
                smartDepositEligibilityMessage: function() {
                    return t.contains(this.get("smartDepositViolations"), "conflicting_smart_deposit") ? "Your goal cannot have a SmartDeposit enabled. A SmartDeposit is already enabled on another goal attached to your bank account." : t.contains(this.get("smartDepositViolations"), "ira") ? "Your goal cannot have a SmartDeposit enabled because it is an IRA. Please select a taxable goal." : "SmartDeposit puts more of your money to work by automatically investing your excess cash. Click to learn more."
                },
                hasSmartDeposit: function() {
                    return this.has("smartDepositConfig") && this.get("smartDepositConfig").is("enabled")
                },
                isInPlan: function() {
                    return this.get("financialPlan") && this.get("financialPlan").is("complete")
                },
                remainingGoalTerm: function() {
                    return this.goalTerm()
                },
                goalTerm: function(e) {
                    return this.isInPlan() ? this.get("financialPlan").remainingTerm() : N.goalTerm(this.date("goalCompletionDate"), e)
                },
                goalAge: function(e) {
                    if (this.isInPlan()) return this.get("financialPlan").num("retirementAge");
                    var t = (this.date("goalCompletionDate").getTime() - this.getUser().dateOfBirth().getTime()) / Date.MS_PER_YEAR;
                    return e ? t : Math.round(t)
                },
                setGoalTerm: function(e, t) {
                    this.set("goalCompletionDate", (new Date).addYears(e).serverFormat(), t)
                },
                updateGoalTerm: function(e, t) {
                    if (!this.date("createdDate").isValid()) throw new Error("Account does not have created date.");
                    var n = this.date("createdDate").clone();
                    this.set("goalCompletionDate", n.addYears(e).serverFormat())
                },
                setGoalAge: function(e, t) {
                    var n = this.getUser();
                    if (!n) throw new Error("Cannot set goal age with no parent user.");
                    if (!n.dateOfBirth()) throw new Error("Cannot set goal age without user age.");
                    var r = n.dateOfBirth().clone();
                    this.set("goalCompletionDate", r.addYears(e).serverFormat(), t)
                },
                hasLowBalance: function() {
                    return this.num("availableBalance") <= m.LOW_BALANCE_THRESHOLD
                },
                getCurrentBalance: function(e) {
                    return (this.num("currentBalance") || 0) + (e ? this.getTotalPendingDeposits() : 0)
                },
                getCurrentBalanceWithPending: function() {
                    return this.getCurrentBalance(!0)
                },
                getTotalPendingDeposits: function() {
                    return this.num("pendingDeposits") || 0
                },
                contributionLimit: function(e) {
                    return this.has("contributionLimits") && this.get("contributionLimits")[String(e)] ? this.get("contributionLimits")[String(e)] : this.defaultContributionLimit(e)
                },
                defaultContributionLimit: function(e) {
                    var t = h.getInstance().get("contributionTypes")[String(e)];
                    if (t) return this.isSepIRA() ? t.sepLimit : e - this.getUser().dateOfBirth().getFullYear() > w.IRA_CATCHUP_AGE ? t.catchupLimit : t.regularLimit;
                    throw new Error("No contribution limit info for " + e)
                },
                remainingContributionAmount: function(e) {
                    var n = t.findWhere(this.get("availableContributions"), {
                        year: String(e)
                    });
                    return n ? Number(n.amount) : Number(this.contributionLimit(e))
                },
                iraContributionMade: function(e) {
                    var t = this.remainingContributionAmount(e),
                        n = this.contributionLimit(e),
                        r = n - t;
                    return r
                },
                availableForConversion: function(e) {
                    var t = this.num("currentBalance") || 0,
                        n = this.num("pendingConversions") || 0,
                        r = this.num("recharacterized") || 0,
                        e = e || 0;
                    return t - e - n - r
                },
                availableForExcessContribution: function(e, t) {
                    if (!this.isIRA() || !parseInt(e) || !t) return this.num("availableBalanceForWithdrawal");
                    var n = this.get("taxYearContributions").where({
                        year: e
                    })[0].get("contributions");
                    return n.sum("amount") - this.get("distributions")[e]
                },
                allocationRecommendation: function(e, t) {
                    return N.getAllocationRecommendation(e || this.goalTerm(), this, t)
                },
                recommendedAllocationRange: function(e) {
                    return N.getAllocationRange(e || this.allocationRecommendation())
                },
                riskToleranceAllocationRange: function(e, t) {
                    return N.getRiskToleranceAllocationRange(t || this.allocationRecommendation(), e)
                },
                defaultMonthlyDepositAmount: function() {
                    var e = this.getUser().num("annualIncome"),
                        t = 50;
                    return e >= 15e4 ? t = 1e3 : e >= 87500 ? t = 500 : e >= 62500 ? t = 300 : e >= 4e4 ? t = 200 : e >= 22500 && (t = 100), t
                },
                monthlyDepositAmount: function() {
                    var e = this.get("automaticDeposit"),
                        t = 0;
                    return !e || (t = e.monthlyAmount()), t
                },
                monthlyWithdrawalAmount: function() {
                    var e = this.get("automaticWithdrawal"),
                        t = 0;
                    return !e || (t = e.monthlyAmount()), t
                },
                netMonthlyTransactionAmount: function() {
                    return this.monthlyDepositAmount() - this.monthlyWithdrawalAmount()
                },
                monthlyDepositIRAProjection: function() {
                    var e = Date.now();
                    e.addDays(e.isWeekend() ? 3 : 7);
                    var t = "" + e.getFullYear(),
                        n = Date.DAYS_IN_YEAR - Math.floor(e.getTime() % Date.MS_PER_YEAR / Date.MS_PER_DAY),
                        r = Math.max(this.remainingContributionAmount(t), 0),
                        i = 52 / 12 * (r / (n / 7));
                    return parseFloat(i.toFixed(2))
                },
                recommendedMonthlyDeposit: function() {
                    var e;
                    return this.isIRA() ? this.isSepIRA() ? e = null : e = this.monthlyDepositIRAProjection() : e = this.defaultMonthlyDepositAmount(), e
                },
                shouldAmountTriggerWithdrawAll: function(e) {
                    return Math.abs(e) >= N.WITHDRAW_ALL_THRESHOLD * this.num("availableBalance")
                },
                getActualWithdrawalAmount: function(e) {
                    return this.shouldAmountTriggerWithdrawAll(e) ? this.num("availableBalance") : e
                },
                isLowBalance: function() {
                    return this.num("availableBalance") <= N.LOW_BALANCE_THRESHOLD
                },
                loadPositions: function() {
                    return this.get("positions").fetch()
                }
            }, {
                STATI: {
                    NO_TARGET: {
                        name: "NO_TARGET",
                        "class": "grey",
                        label: "Target goal balance not set"
                    },
                    ON_TRACK: {
                        name: "ON_TRACK",
                        "class": "green",
                        label: "On Track"
                    },
                    OFF_TRACK: {
                        name: "OFF_TRACK",
                        "class": "orange",
                        label: "Off Track"
                    },
                    TIME_PASSED: {
                        name: "TIME_PASSED",
                        "class": "orange",
                        label: "Target time passed"
                    },
                    FINISHED: {
                        name: "FINISHED",
                        "class": "green",
                        label: "Goal achieved"
                    }
                },
                WITHDRAW_ALL_THRESHOLD: y.WITHDRAW_ALL_THRESHOLD,
                LOW_BALANCE_THRESHOLD: m.LOW_BALANCE_THRESHOLD,
                periodReturn: function(e, t, n) {
                    var r = t - n,
                        i = r > 1.2 * e ? r : e;
                    return n / i || 0
                },
                annualizedReturn: function(e, t, n, r) {
                    var i = this.periodReturn(e, t, n),
                        s = r.daysBetween(Date.today());
                    return s === 0 ? 0 : Math.pow(1 + i, 365 / s) - 1
                },
                getAllocationRecommendation: function(e, t, n) {
                    return p.recommendedAllocation({
                        termYears: e,
                        goalType: t.get("goalType"),
                        employmentStatus: n || BMT.user.get("employmentStatus"),
                        age: BMT.user.getAge()
                    }).allocation
                },
                getAllocationRange: function(e) {
                    var t = Math.round(100 * Math.max(e - .3, 0)) / 100,
                        n = Math.round(100 * Math.min(e + .3, 1)) / 100;
                    return [t, n]
                },
                getRiskToleranceAllocationRange: function(e, t) {
                    var n = this.getAllocationRange(e),
                        r = n[1] - n[0],
                        i;
                    return t === g.MODERATE ? i = n[0] + (e >= .3 ? .2 : (r - .2) / 2) : t === g.AGGRESSIVE ? i = n[0] + (e > .7 ? .2 + (r - .2) / 2 : r - .2) : i = 0, parseFloat(i.toFixed(2))
                },
                getRiskTolerance: function(e, t) {
                    var n = this.getAllocationRange(e),
                        r = this.getRiskToleranceAllocationRange(e, g.MODERATE),
                        i = this.getRiskToleranceAllocationRange(e, g.AGGRESSIVE),
                        s;
                    return t < n[0] ? s = "TOO_CONSERVATIVE" : t < r ? s = "CONSERVATIVE" : t <= i ? s = "MODERATE" : t <= n[1] ? s = "AGGRESSIVE" : s = "TOO_AGGRESSIVE", g[s]
                },
                goalTerm: function(e, t) {
                    var n = (e.getTime() - Date.now().getTime()) / Date.MS_PER_YEAR;
                    return t ? n : this.roundGoalTerm(n)
                },
                roundGoalTerm: function(e) {
                    return e < 1 ? 1 : Math.round(e)
                },
                convertTermToDate: function(e) {
                    var t = new Date;
                    return new Date(t.getTime() + e * Date.MS_PER_YEAR)
                },
                convertAgeToDate: function(e) {
                    var t = BMT.user.dateOfBirth();
                    return new Date(t.getTime() + e * Date.MS_PER_YEAR)
                },
                buildGhost: function(e) {
                    var t = new N;
                    return t.set({
                        accountReturn: u.buildGhost(),
                        createdDate: (new Date).serverFormat(),
                        currentBalance: 0,
                        stockBalance: 0,
                        bondBalance: 0,
                        pendingDeposits: 0,
                        availableBalanceForWithdrawal: 0,
                        portfolioSetId: h.getInstance().get("defaultPortfolioSetID")
                    }), e && t.set(e), t
                },
                buildIRA: function(e, t, n) {
                    return n = this.buildGhost(n), n.set({
                        name: e,
                        accountType: t,
                        goalType: "RETIREMENT"
                    }), n
                }
            }),
            C = r.Collection.extend({
                model: N,
                url: "/client/api/accounts",
                save: function(e) {
                    e = e || {}, e.url = "/accounts", r.Collection.prototype.save.call(this, e)
                },
                getByIdParams: function(e) {
                    return this.get(e.bettermentdbAccountId || e.bettermentdb_account_id)
                },
                comparator: function(e, t) {
                    return e.num("accountGroupId") < t.num("accountGroupId") ? -1 : e.num("accountGroupId") > t.num("accountGroupId") ? 1 : e.num("ordering") < t.num("ordering") ? -1 : e.num("ordering") > t.num("ordering") ? 1 : 0
                },
                sum: function(e) {
                    return this.reduce(function(t, n) {
                        return t + (n.num(e) || 0)
                    }, 0)
                },
                totalCurrentBalance: function(e) {
                    return this.reduce(function(t, n) {
                        return t + n.getCurrentBalance(e)
                    }, 0)
                },
                totalBalance: function() {
                    return this.totalCurrentBalance(!1)
                },
                totalBalanceWithPending: function() {
                    return this.totalCurrentBalance(!0)
                },
                totalPendingDeposits: function() {
                    return this.sum("pendingDeposits")
                },
                forSelect: function() {
                    return this.map(function(e) {
                        return {
                            value: e.getIdOrCid(),
                            label: e.get("name")
                        }
                    })
                },
                findByID: function(e) {
                    return this.find(function(t) {
                        return t.num("id") === Number(e)
                    })
                },
                oldest: function() {
                    return this.min(function(e) {
                        return e.date("createdDate").getTime()
                    })
                },
                firstGoalHasCompletionDate: function() {
                    return this.length > 0 && this.at(0).has("goalCompletionDate")
                },
                hasAccountWithType: function(e) {
                    return this.any(function(t) {
                        return t.isAccountType(e)
                    })
                },
                hasInvestingAccount: function() {
                    return this.hasAccountWithType(b.INVESTING)
                },
                hasTraditionalIRA: function() {
                    return this.getTraditionalIRAs().length > 0
                },
                hasTraditionalIRAIncludingInherited: function() {
                    return this.getTraditionalIRAsIncludingInherited().length > 0
                },
                hasRothIRA: function() {
                    return this.getRothIRAs().length > 0
                },
                hasRothIRAIncludingInherited: function() {
                    return this.getRothIRAsIncludingInherited().length > 0
                },
                hasIRA: function() {
                    return this.any(function(e) {
                        return e.isIRA() && !e.is("inherited")
                    })
                },
                hasIRAIncludingInherited: function() {
                    return this.any(function(e) {
                        return e.isIRA()
                    })
                },
                withSmartDepositEligible: function() {
                    return this.filter(function(e) {
                        return e.isSmartDepositEligible()
                    })
                },
                withSmartDepositEnabled: function() {
                    return this.filter(function(e) {
                        return e.hasSmartDeposit()
                    })
                },
                getIRAsIncludingInherited: function() {
                    return this.filter(function(e) {
                        return e.isIRA()
                    })
                },
                getIRAs: function() {
                    return t.filter(this.getIRAsIncludingInherited(), function(e) {
                        return !e.is("inherited")
                    })
                },
                getTraditionalIRAsIncludingInherited: function() {
                    return this.filter(function(e) {
                        return e.isTraditionalIRA()
                    })
                },
                getTraditionalIRAs: function() {
                    return t.filter(this.getTraditionalIRAsIncludingInherited(), function(e) {
                        return !e.is("inherited")
                    })
                },
                getRothIRAsIncludingInherited: function() {
                    return this.filter(function(e) {
                        return e.isRothIRA()
                    })
                },
                getRothIRAs: function() {
                    return t.filter(this.getRothIRAsIncludingInherited(), function(e) {
                        return !e.is("inherited")
                    })
                },
                numInvestingAccount: function() {
                    return t.size(BMT.accounts().filter(function(e) {
                        return e.isInvestingAccount()
                    }))
                },
                numIRA: function() {
                    return t.size(BMT.accounts().filter(function(e) {
                        return e.isIRA()
                    }))
                },
                maxedOutGoals: function() {
                    return BMT.user.isFull() ? this.size() >= C.MAX_IRAS + C.MAX_GOALS : this.size() > 0
                },
                maxedOutInvestmentGoals: function() {
                    return this.numInvestingAccount() >= C.MAX_GOALS
                },
                hasActiveAccount: function() {
                    return this.some(function(e) {
                        return !e.isNew()
                    })
                }
            }, {
                MAX_IRAS: b.getIRATypes().length,
                MAX_GOALS: 1000000
            });
        return {
            Model: N,
            Collection: C
        }
    }), define("components/portfolio/scripts/models/assetClass", ["underscore", "components/common/scripts/models/v1/baseModels"], function(e, t) {
        var n = {
                getAssetClass: function() {
                    return this.get("assetClass")
                },
                getAssetClassEnum: function() {
                    return this.getAssetClass().assetClass
                },
                getTickers: function() {
                    return e.sortBy(this.get("tickers"), "ordering")
                }
            },
            r = t.Model.extend(n);
        return r
    }), define("components/portfolio/scripts/models/assetClassCollection", ["components/common/scripts/models/v1/baseCollection", "components/portfolio/scripts/models/assetClass"], function(e, t) {
        var n = {
                model: t,
                endpoint: function() {
                    return this.parentEndpoint + "/asset-classes"
                }
            },
            r = e.extend(n);
        return r
    }), define("components/portfolio/scripts/models/portfolio", ["components/common/scripts/models/v1/baseModels"], function(e) {
        var t = {
                getAllocations: function() {
                    return this.get("allocations")
                }
            },
            n = e.Model.extend(t);
        return n
    }), define("components/portfolio/scripts/models/portfolioCollection", ["components/common/scripts/models/v1/baseCollection", "components/portfolio/scripts/models/portfolio"], function(e, t) {
        var n = function(e) {
                return parseInt((e * 100).toFixed(0), 10)
            },
            r = {
                model: t,
                comparator: function(e) {
                    return e.num("risk")
                },
                endpoint: function() {
                    return this.parentEndpoint + "/portfolios"
                },
                getExpectedReturnsForAllocation: function(e) {
                    var t = this.getPortfolio(e);
                    return {
                        expectedReturn: t.num("expectedReturn"),
                        volatility: t.num("volatility")
                    }
                },
                getPortfolio: function(e) {
                    var t = n(e);
                    return this.at(t)
                }
            },
            i = e.extend(r);
        return i
    }), define("components/portfolio/scripts/models/riskFreeRate", ["components/common/scripts/models/v1/baseModels"], function(e) {
        var t = {},
            n = e.Model.extend(t);
        return n
    }), define("components/portfolio/scripts/models/riskFreeRateCollection", ["components/common/scripts/models/v1/baseCollection", "components/portfolio/scripts/models/riskFreeRate"], function(e, t) {
        var n = {
                model: t,
                endpoint: function() {
                    return this.parentEndpoint + "/risk-free-rates"
                }
            },
            r = e.extend(n);
        return r
    }), define("components/portfolio/scripts/models/portfolioSet", ["underscore", "backbone", "components/common/scripts/models/v1/baseModels", "components/portfolio/scripts/models/assetClass", "components/portfolio/scripts/models/assetClassCollection", "components/portfolio/scripts/models/portfolio", "components/portfolio/scripts/models/portfolioCollection", "components/portfolio/scripts/models/riskFreeRate", "components/portfolio/scripts/models/riskFreeRateCollection"], function(e, t, n, r, i, s, o, u, a, f) {
        var l = {
                endpoint: "/portfolio-sets",
                onInitialize: function(e, t) {
                    e = e || {}, this.set({
                        portfolios: this.createChild(o, e.portfolios),
                        assetClasses: this.createChild(i, e.assetClasses),
                        riskFreeRates: this.createChild(a, e.riskFreeRates)
                    })
                },
                createChild: function(e, t) {
                    return new e(t, {
                        parentEndpoint: this.getEndpoint()
                    })
                },
                fetch: function(e) {
                    return $.when(this.get("assetClasses").fetch(e), this.get("portfolios").fetch(e), this.get("riskFreeRates").fetch(e))
                },
                getPortfolio: function(e) {
                    return this.get("portfolios").getPortfolio(e)
                },
                getAssetClasses: function() {
                    return this.get("assetClasses")
                },
                getExpectedReturns: function(e) {
                    return this.get("portfolios").getExpectedReturnsForAllocation(e)
                },
                getBoundingReturns: function() {
                    return {
                        min: this.getExpectedReturns(0),
                        max: this.getExpectedReturns(1)
                    }
                },
                _getRiskFreeRates: function() {
                    if (!this.riskFreeRates) {
                        var t = this.get("riskFreeRates").map(function(e) {
                            return {
                                rate: e.num("rate"),
                                maturity: e.num("maturity")
                            }
                        });
                        this.riskFreeRates = e.chain(t).sortBy(function(e) {
                            return e.maturity
                        }).pluck("rate").value()
                    }
                    return this.riskFreeRates
                },
                getExtendedRiskFreeRates: function(e) {
                    var t = this._getRiskFreeRates();
                    if (t.length >= e) return t;
                    var n = t[t.length - 1],
                        r = Array.fill(n, e - t.length);
                    return t.concat(r)
                }
            },
            c = n.RelationalModel.extend(l);
        return c
    }), define("services/accountService", ["jquery", "models/account", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n) {
        var r = null,
            i = null;
        return {
            loadAccounts: function() {
                if (i) return i;
                r || (r = new t.Collection);
                var n = e.Deferred();
                return i = n, r.fetch({
                    add: !0,
                    remove: !1,
                    forceUpdate: !0
                }).then(function() {
                    r.each(function(e) {
                        e.set("accountGroup", BMT.user.get("accountGroups").get(e.get("accountGroupId")))
                    }), n.resolve(r)
                }, n.reject).always(function() {
                    i = null
                }), n.promise()
            },
            loadDependenciesForAccount: function(t) {
                return e.when(n.loadPortfolioSetForAccount(t), t.loadPositions()).then(function() {
                    return t
                })
            },
            getAllAccounts: function() {
                return r
            }
        }
    }), define("views/transfer/calendarView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/automaticDeposit"], function(e, t, n, r, i) {
        return r.View.extend({
            tagName: "div",
            onRender: function() {
                this.$el.datepicker(t.extend({
                    dayNamesMin: ["S", "M", "T", "W", "T", "F", "S"],
                    beforeShowDay: this.renderDay,
                    onChangeMonthYear: this.monthChanged,
                    onSelect: this.dateSelected,
                    prevText: "&#60;",
                    nextText: "&#62;"
                }, this.options.jquery || {}))
            },
            refresh: function() {
                this.$el.datepicker("refresh")
            },
            dateSelected: function(e) {
                this.monthChanged(), this.trigger("dateSelected", Date.parse(e))
            },
            monthChanged: function() {
                delete this.next
            },
            enabled: function(e) {
                var t = this.model.get("frequency"),
                    n = this.model.constructor,
                    r = this.model.isFrequency([n.WEEKLY, n.EVERY_OTHER_WEEK]);
                return r && (e.isWeekend() || e.isBeforeToday() || e.isAfterTodaysAutomaticDepositCutoff()) ? !1 : !r && !this.model.isFrequency(n.ANNUALLY) && e.getDate() > 28 ? !1 : !!t
            },
            renderDay: function(e) {
                if (!e) return [!1, ""];
                var t = this.model.isFrequency(i.TWICE_A_MONTH),
                    n = t ? "selected-past" : "",
                    r = "";
                return this.model && this.model.get("enabled") && this.model.isValidForScheduling() && (e.getDate() === 1 && !this.next && (this.next = this.model.estimatedNextTransactionDateFrom(new Date(e.getFullYear(), e.getMonth(), 1), this.options.holidays)), this.next && e.isSameDay(this.next) && (r = this.next.isBeforeToday() ? n : "selected-future", this.next = this.model.estimatedNextTransactionDateFrom(this.next.addDays(1), this.options.holidays))), e.isToday() && this.next && (r += " today"), [this.enabled(e), r]
            }
        })
    }), define("views/transfer/automaticTransactionSettingsView", ["jquery", "underscore", "backbone", "models/automaticTransaction", "common/betterment.views", "services/accountService", "views/transfer/calendarView", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u) {
        return i.View.extend({
            className: "automatic-deposit-settings",
            toolTips: {
                "#amountHelp": {},
                "#recommendedHelp": {},
                "#toggleHelp": {}
            },
            templateHelpers: {
                account: function() {
                    return this.self.account()
                },
                verificationFlow: function() {
                    return !!this.self.options.verificationFlow
                },
                portfolioFlow: function() {
                    return !!this.self.options.allocationFlow
                },
                multiAccount: function() {
                    return !!this.self.options.multiAccount
                },
                recommended: function() {
                    return this.self.options.recommended
                },
                adviceFlow: function() {
                    return this.self.options.adviceFlow
                },
                newAmount: function() {
                    return this.self.options.newAmount
                },
                frequency_selector: function(e) {
                    var t = [{
                        value: "MONTHLY",
                        label: "Monthly"
                    }, {
                        value: "TWICE_A_MONTH",
                        label: "Twice-a-month"
                    }, {
                        value: "EVERY_OTHER_WEEK",
                        label: "Every Other Week"
                    }, {
                        value: "WEEKLY",
                        label: "Weekly"
                    }];
                    return e && t.push({
                        value: "ANNUALLY",
                        label: "Annually"
                    }), this.build_dropdown_menu(t, {
                        name: "frequency",
                        "class": "automatic-transaction-frequency",
                        value: this.frequency
                    })
                },
                format_date: function(e, t) {
                    return this.self.model.has(e) ? this.formatDate(t, this.self.model.date(e)) : ""
                },
                build_goal_list: function() {
                    return !!this.self.options.multiAccount && BMT.accounts().length <= 1 ? '<h4 class="single-goal">' + BMT.accounts().at(0).get("name") + "</h4>" : this.build_dropdown_menu(BMT.accounts().forSelect(), {
                        name: "account",
                        "class": "account-selector"
                    })
                }
            },
            events: {
                "keydown input[name=amount]": "restrictDecimal",
                "keyup input[name=amount]": "amountChanged",
                "click .start-date": "toggleCalendar",
                "click .dropdown-toggle": "clickOffCalendarHandler",
                "change .automatic-transaction-frequency": "frequencyChanged",
                "click #ok": "onOK",
                "click #cancel": "onCancel"
            },
            regions: {
                dateSelector: "#dateSelector"
            },
            onInitialize: function() {
                this.onAutoTransactionUpdateComplete = this.options.onAutoTransactionUpdateComplete || function() {}, this.templateHelpers = t.extend({}, this.templateHelpers, this._templateHelpers), this.events = t.extend({}, this.events, this.additionalEvents), this._delegateDOMEvents();
                if (this.options.multiAccount) {
                    var e = this.$accountSelector ? BMT.accounts().get(this.$accountSelector.val()) : BMT.accounts().at(0);
                    this.options.account = e, this.model = e.get(this.getClass().transactionType), this.model || (this.model = this.getClass().getModelInstance()), this.model.isNew() && (this.options.recommended = e.recommendedMonthlyDeposit(), this.model.set("account", e), this.model.set("frequency", this.model.constructor.MONTHLY))
                }
                this.model.store(), this.modelConstructor = this.model.constructor, this.model.set("enabledOnInitialize", this.model.is("enabled"), {
                    silent: !0
                }), this.model.set("enabled", !0, {
                    silent: !0
                }), this.options.amount && this.model.set("amount", this.options.amount, {
                    silent: !0
                }), this.options.recommended && this.model.set("amount", this.options.recommended, {
                    silent: !0
                }), this.options.newAmount && this.model.set("amount", this.options.newAmount, {
                    silent: !0
                }), this.options.frequency && this.model.set("frequency", this.options.frequency, {
                    silent: !0
                }), (this.model.isFrequency(this.modelConstructor.FIRST_TUESDAY_OF_THE_MONTH) || !this.model.has("frequency")) && this.model.set("frequency", "MONTHLY"), this.listenTo(this.model, "change:transactionDateTime1 change:transactionDateTime2 change:amount", function() {
                    this.updateInputs(), this.updateSummary()
                }, this)
            },
            onRender: function() {
                this.$instructions = this.$(".instructions"), this.$accountSelector = this.$(".account-selector"), this.$amount = this.$("input[name=amount]"), this.$optimizeIRACheck = this.$("input#optimizeIRACheck"), this.setAmount(this.model.num("amount") || 0, {
                    silent: !0
                }), this.updateInputs(), this.updateSummary(), this.afterOnRender && this.afterOnRender()
            },
            onShow: function() {
                this.renderCalendar(), this.applyValidation()
            },
            toggleCalendar: function(e) {
                e.preventDefault();
                var t = this.$(".calendar").css("opacity") !== "0",
                    n = this.$(e.currentTarget);
                t ? this.hideCalendar() : this.showCalendar(n)
            },
            showCalendar: function(t) {
                var n = this,
                    r = "";
                t.hasClass("short") ? r = "short" : t.hasClass("first") && (r = "first"), t.addClass("active"), this.$(".calendar").addClass("active " + r).delay(0).queue(function(t) {
                    e(".dateSelector").bind("clickoutside", function(t) {
                        var r = e(t.currentTarget),
                            i = e(t.target);
                        !r.hasClass("start-date") && !i.hasClass("ui-icon") && n.clickOffCalendarHandler()
                    }), t()
                })
            },
            hideCalendar: function() {
                this.$(".calendar").removeClass().addClass("calendar"), this.$("span.start-date").removeClass("active"), this.$(".dateSelector").unbind("clickoutside")
            },
            changeOptimizeIRA: function() {
                this.$optimizeIRACheck.is(":checked") ? this.$optimizeIRACheck.removeAttr("checked") : this.$optimizeIRACheck.attr("checked", !0), this.optimizeIRAChanged()
            },
            optimizeIRAChanged: function() {
                this.$optimizeIRACheck.is(":checked") && this.optimizeIRA()
            },
            showMaximizeIRA: function(e) {
                var t = "" + (new Date).getFullYear();
                return e.isIRA() && !e.isSepIRA() && e.remainingContributionAmount(t) > 0
            },
            onDateChanged: function() {
                this.optimizeIRAChanged()
            },
            account: function() {
                return this.options.account
            },
            amountChanged: function(t) {
                this.model.set("amount", parseFloat(e(t.currentTarget).val()) || 0, {
                    forceUpdate: !0
                }), this.updateSummary()
            },
            clickOffCalendarHandler: function() {
                this.$(".calendar").hasClass("active") && (this.triggerAllValidation(), this.hideCalendar())
            },
            setAmount: function(e, t) {
                this.$amount.val((e || 0).toFixed(2)), this.model.set("amount", e, t)
            },
            renderCalendar: function() {
                var e = (new o({
                    model: this.model
                })).on("dateSelected", this.dateChanged, this);
                this.dateSelector.show(e)
            },
            dateChanged: function(e) {
                var t = this.model,
                    n = function(n, r) {
                        if (t.date(n).isSameDayOfMonth(e)) return t.unset(n, {
                            forceUpdate: !0
                        }), !1;
                        if (r.hasClass("active")) return t.set(n, e.serverFormat(), {
                            forceUpdate: !0
                        }), !0
                    }.bind(this),
                    r = function(e) {
                        var r = this.$("span.start-date.first"),
                            i = this.$("span.start-date.second"),
                            s = r.hasClass("active"),
                            o = s ? "transactionDateTime1" : "transactionDateTime2",
                            u = o === "transactionDateTime1" ? "transactionDateTime2" : "transactionDateTime1",
                            a = s ? r : i;
                        return e.getDate() !== t.date(u).getDate() ? n(o, a) : !1
                    }.bind(this);
                if (!r(e)) {
                    this.validateCalendar();
                    return
                }
                this.onDateChanged && this.onDateChanged(), this.hideCalendar()
            },
            updateInputs: function() {
                var e = this.model,
                    t = function(t) {
                        return e.has(t) ? e.date(t).dateWithOrdinal() : ""
                    }.bind(this),
                    n = t("transactionDateTime1"),
                    i = t("transactionDateTime2");
                if (e.isFrequency([r.MONTHLY, r.TWICE_A_MONTH])) this.$("span.start-date.first").data("date", n), this.$("span.start-date.first").text(n), this.$("span.start-date.second").data("date", i), this.$("span.start-date.second").text(i);
                else {
                    var s = e.has("transactionDateTime1") ? this.formatter.formatDate("m/d/y", e.date("transactionDateTime1")) : "";
                    this.$("span.start-date.first").data("date", s), this.$("span.start-date.first").text(s)
                }
                this.$(".start-date-fields").toggleClass("two-dates", e.isFrequency([r.TWICE_A_MONTH])), this.$(".start-date-fields").toggleClass("one-short-date", e.isFrequency(r.MONTHLY)), this.$("span.start-date.first").toggleClass("short", e.isFrequency([r.TWICE_A_MONTH, r.MONTHLY])), this.$("span.start-date.invalid").length && this.validateCalendar()
            },
            updateInstructions: function() {
                var e;
                this.model.isFrequency(r.TWICE_A_MONTH) ? e = "two days" : this.model.isFrequency([r.WEEKLY, r.EVERY_OTHER_WEEK]) ? e = "a start date" : e = "a day", this.$instructions.html("3. Choose " + e)
            },
            validateCalendar: function() {
                var e = this.model,
                    t = "",
                    n = "Pick a date",
                    i = this.$("span.start-date.first"),
                    s = this.$("span.start-date.second"),
                    o = !e.has("transactionDateTime2") && e.isFrequency(r.TWICE_A_MONTH),
                    u = e.has("transactionDateTime1") ? t : n,
                    a = o ? n : t;
                this.updateFieldValidation(i, u), this.updateFieldValidation(s, a)
            },
            frequencyChanged: function(e) {
                var t = this.model.get("frequency"),
                    n = this.$(e.currentTarget),
                    i = n.val();
                this.model.set("frequency", i, {
                    forceUpdate: !0
                }), this.model.unset("transactionDateTime1", {
                    forceUpdate: !0,
                    silent: !0
                }), this.model.unset("transactionDateTime2", {
                    forceUpdate: !0,
                    silent: !0
                });
                if (this.account().isIRA() && this.$("input#optimizeIRACheck").is(":checked") && this.model.isValidForScheduling()) this.optimizeIRA();
                else if (t && this.model.num("amount") !== 0 && this.$("input[name=amount]").val()) {
                    var s = this.model.num("amount"),
                        o = r.monthlyize(t, s),
                        u = r.demonthlyize(i, o);
                    this.setAmount(u, {
                        forceUpdate: !0
                    })
                }
                this.updateInputs(), this.updateInstructions(), this.renderCalendar(), this.hideCalendar(), this.updateSummary()
            },
            updateSummary: function() {
                var e = this.model.isAutomaticDeposit() ? "Deposit" : "Withdraw";
                if (this.model.has("transactionDateTime1") || this.model.has("transactionDateTime2")) {
                    var t = '<span class="bold-text">Summary: ' + e + " " + this.formatter.money(this.model.getNextTransactionAmount()) + "</span> " + this.model.frequencyText();
                    this.model.isAutomaticDeposit() || (t += ". Please allow 4-5 business days for transfers to complete."), this.$(".summary").html(t)
                } else this.$(".summary").html("")
            },
            refreshAccountAndClose: function() {
                this.trigger("completeDeposit"), BMT.vent.trigger("refresh:transfer"), BMT.refreshAccounts()
            },
            onOK: function() {
                throw new Error("onOK is not implemented")
            },
            onCancel: function() {
                throw new Error("onCancel is not implemented")
            }
        })
    }), define("views/common/alertView", ["jquery", "underscore", "backbone", "common/betterment.views", "common/betterment.models"], function(e, t, n, r, i) {
        return r.ModalView.extend({
            template: "common/alert",
            tagName: "div",
            events: {
                "click button": "action"
            },
            onInitialize: function() {
                this.options.bodyAttrs = this.options.bodyAttrs || {}, this.model = new i.Model(this.options)
            },
            action: function(t) {
                var n = e(t.currentTarget).attr("id");
                n && this.model && (this.model.get("noClose") || BMT.modal.close(this), this.model.get("handler") && this.model.get("handler").call(this, n))
            }
        })
    }), define("views/common/inheritedIRAWarningView", ["jquery", "underscore", "views/common/alertView", "common/betterment.models"], function(e, t, n, r) {
        return n.extend({
            onInitialize: function() {
                this.model = new r.Model({
                    icon: "warning",
                    title: "Deposits to inherited IRAs are not allowed.",
                    width: 410,
                    body: '<p>Making deposits or rollovers into your inherited IRA will trigger tax consequences that you most likely want to avoid. For more details, see the rules in IRS Publication 590 under Inherited IRAs. Contact <a href="mailto:support@betasmartz.com">support@betasmartz.com</a> if you have any questions.</p>',
                    bodyAttrs: {}
                })
            }
        })
    }), define("services/iraService", ["components/common/scripts/models/appData"], function(e) {
        return {
            optimizeDepositAmount: function(e, t) {
                if (!e.has("transactionDateTime1") || e.isFrequency(e.getClass().TWICE_A_MONTH) && !e.has("transactionDateTime2")) return;
                var t = t ? t : e.get("account"),
                    n = 0,
                    r = 0,
                    i = Date.now(),
                    s = i.getFullYear();
                while (s === i.getFullYear()) e.isDepositDate(i) && n++, i.addDays(1);
                return n = n || 1, r = t.remainingContributionAmount(s), r / n
            }
        }
    }), define("components/automaticTransaction/scripts/constants/automaticTransactionFrequency", [], function() {
        return {
            ANNUALLY: "ANNUALLY",
            FIRST_TUESDAY_OF_THE_MONTH: "FIRST_TUESDAY_OF_THE_MONTH",
            MONTHLY: "MONTHLY",
            TWICE_A_MONTH: "TWICE_A_MONTH",
            EVERY_OTHER_WEEK: "EVERY_OTHER_WEEK",
            WEEKLY: "WEEKLY"
        }
    }), define("components/automaticTransaction/scripts/services/automaticTransactionService", ["underscore", "components/automaticTransaction/scripts/constants/automaticTransactionFrequency"], function(e, t) {
        var n = function(e, n, r) {
                var i = 1,
                    s = parseFloat(n);
                switch (e) {
                    case t.TWICE_A_MONTH:
                        i = 2;
                        break;
                    case t.WEEKLY:
                        i = 52 / 12;
                        break;
                    case t.EVERY_OTHER_WEEK:
                        i = 52 / 12 / 2;
                        break;
                    case t.ANNUALLY:
                        i = 1 / 12
                }
                return r ? s * i : s / i
            },
            r = {
                netMonthlyTransactionAmount: function(e) {
                    return this.monthlyDepositAmount(e) - this.monthlyWithdrawalAmount(e)
                },
                netYearlyTransactionAmount: function(e) {
                    return this.netMonthlyTransactionAmount(e) * 12
                },
                monthlyDepositAmount: function(e) {
                    return this.monthlyAmount(e.get("automaticDeposit"))
                },
                monthlyWithdrawalAmount: function(e) {
                    return this.monthlyAmount(e.get("automaticWithdrawal"))
                },
                monthlyAmount: function(e) {
                    if (!e || e.not("enabled")) return 0;
                    var t = e.get("frequency"),
                        n = e.num("amount");
                    return this.monthlyize(t, n)
                },
                monthlyize: function(e, t) {
                    return n(e, t, !0).ceil(2)
                },
                demonthlyize: function(e, t) {
                    return n(e, t, !1).ceil(2)
                }
            };
        return r
    }), define("views/transfer/automaticDepositSettingsView", ["jquery", "underscore", "hbs!views/transfer/automaticDepositSettingsEmpty", "models/automaticDeposit", "views/transfer/automaticTransactionSettingsView", "views/common/inheritedIRAWarningView", "services/iraService", "components/automaticTransaction/scripts/services/automaticTransactionService"], function(e, t, n, r, i, s, o, u) {
        return i.extend({
            template: "transfer/automaticDepositSettings",
            _templateHelpers: {
                bodyText: function() {
                    if (this.account().isIRA() && !this.account().isSepIRA()) {
                        var e = (new Date).getFullYear();
                        return "Max out your SMSF contributions for " + e + " with an Automatic Deposit. Once you've " + "reached your maximum contribution for the year Automatic Deposit will suspend until " + (e + 1) + "."
                    }
                },
                showMaximizeIRA: function() {
                    return this.self.showMaximizeIRA(this.account())
                }
            },
            additionalEvents: {
                "change .account-selector": "accountChanged",
                "change #optimizeIRACheck": "optimizeIRAChanged",
                "click .maximize-contributions span": "changeOptimizeIRA"
            },
            accountChanged: function(e) {
                var t = this.$accountSelector.val();
                this.onInitialize(), this.render(), this.$accountSelector.val(t)
            },
            optimizeIRA: function() {
                var e = this.model.isNew;
                this.model.isNew = function() {
                    return !1
                }.bind(this);
                var t = o.optimizeDepositAmount(this.model, this.model.get("account"));
                this.model.isNew = e, this.setAmount(t, {
                    forceUpdate: !0
                })
            },
            afterOnRender: function() {
                this.options.recommended && this.showMaximizeIRA(this.account()) && this.$optimizeIRACheck.attr("checked", !0), this.previousDepositAmount = this.model.get("enabledOnInitialize") ? this.model.get("amount") : 0, this.previousFrequency = this.model.get("frequency")
            },
            confirmSettingsChange: function(e) {
                var t = 0,
                    n = 0;
                e || (t = parseFloat(this.model.get("amount")), n = this.modelConstructor.monthlyize(this.model.get("frequency"), t)), BMT.accounts().each(function(e) {
                    e.get("id") !== this.account().get("id") && e.get("automaticDeposit") && (n += e.get("automaticDeposit").monthlyAmount())
                }, this), this.validateAndSave()
            },
            validateAndSave: function(e) {
                this.model.validate(e) ? (this.validateCalendar(), this.triggerAllValidation()) : (this.model.set({
                    account: this.account().get("id")
                }), this.block(), this.model.save({}, {
                    wait: !0,
                    success: function(e) {
                        var t = e.get("frequency"),
                            n = this.formatter.removeCommas(e.get("amount"));
                        BMT.analytics.track("AutoDepositUpdated", {
                            Location: "Transfer",
                            GoalId: this.account().get("id"),
                            GoalType: this.account().get("goalType"),
                            Value: e.get("enabled") ? this.modelConstructor.monthlyize(t, n) : 0,
                            OldValue: this.modelConstructor.monthlyize(this.previousFrequency, this.previousDepositAmount),
                            IsEnabled: e.get("enabled"),
                            Frequence: t
                        }), this.model.set("account", this.account()), this.trigger("save"), this.refreshAccountAndClose(), this.model.is("enabled") ? BMT.flash("Your automatic deposits will happen " + this.model.frequencyText()) : BMT.flash("Your automatic deposit has been turned off."), this.onAutoTransactionUpdateComplete(this.model)
                    }.bind(this),
                    error: function() {
                        this.triggerAllValidation()
                    }.bind(this),
                    complete: function() {
                        this.unblock()
                    }.bind(this)
                }))
            },
            onOK: function(e) {
                var t = this.model.not("enabled");
                if (this.account().isInheritedIRA()) return s.show(), !1;
                this.confirmSettingsChange(t)
            },
            onCancel: function(e) {
                this.model.restore(), this.refreshAccountAndClose()
            }
        }, {
            transactionType: "automaticDeposit",
            emptyAutoTransactionTemplate: n,
            getModelInstance: function() {
                return new r
            }
        })
    }), define("hbs!views/transfer/smartDeposits/setup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="progress-container"></div>\n\n<div class="sidebar"></div>\n<div class="content"></div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/setup", n), n
    }), define("hbs!views/transfer/smartDeposits/bankLogo", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<img class="bank-logo" src="', (u = n.logoUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.logoUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" alt="', (u = n.displayName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.displayName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '"></img>\n', s
        });
        return t.registerPartial("views/transfer/smartDeposits/bankLogo", n), n
    }), define("hbs!components/progressNav/templates/progressNav", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var n = "",
                    r;
                return n += '<li class="item" data-index="' + a((r = t == null || t === !1 ? t : t.index, typeof r === u ? r.apply(e) : r)) + '">' + a((r = e && e.label, typeof r === u ? r.apply(e) : r)) + "</li>", n
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = i || {};
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="back-arrow"></div>\n<ul class="step-labels">', o = n.each.call(t, (o = t && t.self, o == null || o === !1 ? o : o.steps), {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i),
                data: i
            });
            if (o || o === 0) s += o;
            return s += '</ul>\n<div class="progress-bar">\n    <div class="inner-bar"></div>\n</div>\n', s
        });
        return t.registerPartial("components/progressNav/templates/progressNav", n), n
    }), define("components/progressNav/scripts/progressNavView", ["underscore", "components/common/scripts/views/baseViews", "hbs!components/progressNav/templates/progressNav"], function(e, t, n) {
        return t.View.extend({
            className: "progress-nav",
            template: n,
            ui: {
                stepLabels: ".step-labels",
                progressBar: ".progress-bar",
                innerBar: ".inner-bar",
                backArrow: ".back-arrow"
            },
            events: {
                "click @ui.backArrow": "onBackClick"
            },
            onShow: function() {
                this.ui.stepLabels.addClass("items-" + this.steps().length)
            },
            setActiveStep: function(t, n) {
                t >= 0 && t < this.steps().length && (this.setInnerBarWidth(t), this.labelsBefore(t).removeClass("active"), this.labelsAfter(t).removeClass("active"), this.labelAt(t).addClass("active"), e.isUndefined(n) || this.ui.backArrow.toggle(n))
            },
            labelAt: function(e) {
                return this.ui.stepLabels.find("li[data-index=" + e + "]")
            },
            labelsBefore: function(e) {
                return this.$(".item").filter(function() {
                    return Number($(this).data("index")) < e
                })
            },
            labelsAfter: function(e) {
                return this.$(".item").filter(function() {
                    return Number($(this).data("index")) > e
                })
            },
            setInnerBarWidth: function(e) {
                var t = 100 / this.steps().length,
                    n = t * e + t / 2,
                    r = Math.floor(n * 100) / 100;
                this.ui.innerBar.animate({
                    width: r + "%"
                }, 500)
            },
            steps: function() {
                return this.options.steps
            },
            onBackClick: function(e) {
                this.trigger("back")
            }
        })
    }), define("hbs!components/bubble/templates/balanceBubble", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="top">\n    <div class="top-content">', (u = n.topContent) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.topContent, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</div>\n</div>\n<div class="separator">\n</div>\n<div class="bottom">\n    <div class="bottom-content">\n        <div class="lbl">', (u = n.bottomLabel) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.bottomLabel, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</div>\n        <div class="val">', (u = n.bottomValue) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.bottomValue, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</div>\n    </div>\n</div>\n<div class="check"></div>', s
        });
        return t.registerPartial("components/bubble/templates/balanceBubble", n), n
    }), define("hbs!components/common/scripts/views/hollowCheckmarkIcon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet" class="hollow-checkmark-icon">\n    <path d="M177.059881,261.548915 L121.808596,207.309405 C119.414191,204.958936 119.394629,201.120483 121.765559,198.742818 L137.094446,183.365698 C139.461464,180.991918 143.315204,180.968607 145.709609,183.315192 L177.482423,214.438515 L248.273865,137.95696 C250.543073,135.505479 254.381163,135.334535 256.865554,137.572338 L274.498859,153.477828 C276.975425,155.711745 277.174959,159.507462 274.952701,161.986139 L185.901965,261.273075 C183.577983,263.860533 179.544272,263.988741 177.059881,261.548915"></path>\n</svg>'
        });
        return t.registerPartial("components/common/scripts/views/hollowCheckmarkIcon", n), n
    }), define("components/bubble/scripts/balanceBubbleView", ["components/common/scripts/views/baseViews", "hbs!components/bubble/templates/balanceBubble", "hbs!components/common/scripts/views/hollowCheckmarkIcon"], function(e, t, n) {
        return e.View.extend({
            className: "balance-bubble",
            GREEN_FLASH_HEX: "#45a018",
            ui: {
                topContent: ".top-content",
                bottomLabel: ".bottom-content .lbl",
                bottomValue: ".bottom-content .val"
            },
            template: t,
            templateHelpers: {
                topContent: function() {
                    return this.self.options.topContent
                },
                bottomLabel: function() {
                    return this.self.options.bottomLabel
                },
                bottomValue: function() {
                    return this.self.options.bottomValue
                }
            },
            onRender: function() {
                this.options.color && this.$el.css("background-color", this.options.color)
            },
            setContent: function(e) {
                this.ui.topContent.html(e.topContent), this.ui.bottomLabel.text(e.bottomLabel), this.ui.bottomValue.text(e.bottomValue)
            },
            toggleBalance: function(e) {
                this.$el.toggleClass("with-balance", e)
            },
            setBackgroundColor: function(e) {
                this.$el.css({
                    "background-color": e || ""
                })
            },
            flashSuccess: function(e) {
                var t = this.$el.css("background-color"),
                    n = 400;
                this.ui.topContent.fadeOut(n / 2), this.$el.animate({
                    "background-color": this.GREEN_FLASH_HEX
                }, n, function() {
                    this.showCheckmark(n, t, e)
                }.bind(this))
            },
            showCheckmark: function(e, t, r) {
                this.setContent({
                    topContent: n
                }), this.ui.topContent.fadeIn(e / 2), this.bankInfoAnimationTimeout = setTimeout(function() {
                    this.hideCheckmark(e, t, r)
                }.bind(this), e * 5)
            },
            hideCheckmark: function(e, t, n) {
                this.ui.topContent.fadeOut(e / 2), this.$el.animate({
                    "background-color": t
                }, e, function() {
                    this.showBankInfo(e, n)
                }.bind(this))
            },
            showBankInfo: function(e, t) {
                t && t(), this.ui.topContent.fadeIn(e / 2)
            },
            onBeforeDestroy: function() {
                clearTimeout(this.bankInfoAnimationTimeout), this.showBankInfo = function() {}, this.hideCheckmark = function() {}, this.showCheckmark = function() {}
            }
        })
    }), define("models/v2/bankAccountBalance", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
                endpoint: function() {
                    return "/bank_accounts/" + this.get("bankAccountId") + "/balance"
                }
            },
            n = {
                fromIdParams: function(e) {
                    var t = new r;
                    return t.setIdParam("bankAccountId", e), t
                }
            },
            r = e.Model.extend(t, n);
        return r
    }), define("hbs!views/transfer/smartDeposits/splash", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += ' your <span class="bold-text">', (s = n.goalName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.goalName, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</span> goal", r
            }

            function c(e, t) {
                return "Betterment"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="header">\n    <h1>How SmartDeposit Works</h1>\n    <h3>Invest excess cash from your bank account into ', o = n["if"].call(t, t && t.hasAccount, {
                hash: {},
                inverse: f.program(3, c, i),
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += ' automatically.</h3>\n</div>\n\n<div class="how-it-works">\n    <div class="one-third balance">\n        <div class="icon smart-deposits-bank"></div>\n        <div class="copy">\n            Tell us the maximum balance you need in your bank account.\n        </div>\n    </div>\n    <div class="one-third savings">\n        <div class="icon smart-deposits-calendar"></div>\n        <div class="copy">We&apos;ll check your bank balance at least once a week and calculate an amount to invest based on your settings.</div>\n    </div>\n    <div class="one-third growth">\n        <div class="icon smart-deposits-notification"></div>\n        <div class="copy">We&apos;ll notify you by email before every investment and we&apos;ll never invest more than you want.</div>\n    </div>\n</div>\n\n<div class="buttons secondary-button">\n    <button class="next blue">Continue to Setup</button>\n</div>\n', s
        });
        return t.registerPartial("views/transfer/smartDeposits/splash", n), n
    }), define("views/transfer/smartDeposits/splashView", ["jquery", "underscore", "components/common/scripts/analytics/analytics", "common/betterment.views", "hbs!views/transfer/smartDeposits/splash"], function(e, t, n, r, i) {
        return r.View.extend({
            className: "smart-deposits-splash",
            template: i,
            events: {
                "click .next": "next"
            },
            templateHelpers: {
                hasAccount: function() {
                    return this.self.model && this.self.model.has("account")
                },
                goalName: function() {
                    return this.self.model.get("account").get("name")
                }
            },
            onInitialize: function() {
                n.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "SmartDepositStart"
                })
            },
            next: function() {
                n.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "ContinueToSetup"
                }), this.trigger("next")
            }
        })
    }), define("hbs!views/transfer/smartDeposits/bankAccount", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header">\n    <h1>Permission to securely view your bank balance</h1>\n    <h3>We need to periodically view your bank balance to determine if you have excess cash.</h3>\n</div>\n\n<div class="secondary-button">\n    <button class="next blue">Grant Permission</button>\n</div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/bankAccount", n), n
    }), define("views/transfer/smartDeposits/bankAccountView", ["components/common/scripts/analytics/analytics", "common/betterment.views", "hbs!views/transfer/smartDeposits/bankAccount"], function(e, t, n) {
        return t.View.extend({
            className: "smart-deposits-bank-account",
            template: n,
            events: {
                "click .next": "next"
            },
            next: function() {
                e.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "GrantPermission"
                }), this.trigger("confirm-bank"), this.trigger("next")
            }
        })
    }), define("hbs!components/common/scripts/templates/inputRadio", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t, r) {
                var i = "",
                    s, o;
                i += '\n            <li data-value="', (o = n.value) ? s = o.call(e, {
                    hash: {}
                }) : (o = e && e.value, s = typeof o === a ? o.call(e, {
                    hash: {}
                }) : o), i += f(s) + '" class="', s = n["if"].call(e, e && e.checked, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(2, h, t)
                });
                if (s || s === 0) i += s;
                i += '">\n                <div class="radio-button">\n                    <span>', (o = n.buttonLabel) ? s = o.call(e, {
                    hash: {}
                }) : (o = e && e.buttonLabel, s = typeof o === a ? o.call(e, {
                    hash: {}
                }) : o), i += f(s) + '</span>\n                    <input type="radio" name="' + f((s = r && r.propertyName, typeof s === a ? s.apply(e) : s)) + '" value="', (o = n.value) ? s = o.call(e, {
                    hash: {}
                }) : (o = e && e.value, s = typeof o === a ? o.call(e, {
                    hash: {}
                }) : o), i += f(s) + '" />\n                </div>\n                ', s = n["if"].call(e, e && e.label, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(4, p, t)
                });
                if (s || s === 0) i += s;
                return i += "\n            </li>\n        ", i
            }

            function h(e, t) {
                return "selected"
            }

            function p(e, t) {
                var r = "",
                    i, s;
                return r += "\n                    <label>", (s = n.label) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.label, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</label>\n                ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="input-radio ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n\n    <ul class="radio-options">\n        ', o = n.each.call(t, t && t.options, {
                hash: {},
                inverse: l.noop,
                fn: l.programWithDepth(1, c, i, t)
            });
            if (o || o === 0) s += o;
            return s += "\n    </ul>\n\n</div>\n", s
        });
        return t.registerPartial("components/common/scripts/templates/inputRadio", n), n
    }), define("components/common/scripts/templateHelpers/inputRadio", ["underscore", "hbs/handlebars", "hbs!components/common/scripts/templates/inputRadio"], function(e, t, n) {
        var r = function(t) {
            return e.map(t, function(e) {
                return {
                    value: e.value.toString(),
                    label: e.label,
                    buttonLabel: e.buttonLabel
                }
            })
        };
        t.registerHelper("inputRadio", function(e, i) {
            var s = {
                propertyName: e,
                className: [i.hash.className || "", e].join(" "),
                label: i.hash.label,
                options: r(i.hash.options)
            };
            return new t.SafeString(n(s))
        })
    }), define("hbs!components/common/scripts/templates/submitButton", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="submit-button ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <button type="submit" ', (u = n.disabled) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.disabled, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ">", (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</button>\n</div>\n", s
        });
        return t.registerPartial("components/common/scripts/templates/submitButton", n), n
    }), define("components/common/scripts/templateHelpers/submitButton", ["hbs/handlebars", "hbs!components/common/scripts/templates/submitButton"], function(e, t) {
        e.registerHelper("submitButton", function(n, r) {
            var i = {
                className: r.hash.className || "",
                label: n,
                disabled: r.hash.disabled || ""
            };
            return new e.SafeString(t(i))
        })
    }), define("hbs!views/transfer/smartDeposits/chooseGoal", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputRadio", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<div class="header">\n    <h1>Choose a goal</h1>\n    <h3>You have more than one eligible goal. Choose which one to set up SmartDeposit for.</h3>\n</div>\n\n<form>\n    ' + f((o = n.inputRadio || t && t.inputRadio, u = {
                hash: {
                    options: t && t.eligibleAccounts,
                    className: "stack"
                }
            }, o ? o.call(t, "accountId", u) : a.call(t, "inputRadio", "accountId", u))) + "\n\n    " + f((o = n.submitButton || t && t.submitButton, u = {
                hash: {}
            }, o ? o.call(t, "Use Goal", u) : a.call(t, "submitButton", "Use Goal", u))) + "\n</form>\n\n", s
        });
        return t.registerPartial("views/transfer/smartDeposits/chooseGoal", n), n
    }), define("components/common/scripts/behaviors/textInputEffects", ["jquery", "marionette"], function(e, t) {
        return t.Behavior.extend({
            events: {
                "focus input": "onInputFocus",
                "blur input": "onInputBlur",
                "change input": "onInputBlur"
            },
            onInputFocus: function(e) {
                this.view.$el.addClass("active")
            },
            onInputBlur: function(t) {
                var n = e(t.currentTarget),
                    r = n.val().trim();
                this.view.$el.toggleClass("active", r !== "" || n.is(":focus"))
            }
        })
    }), define("components/common/scripts/services/browserService", ["jquery", "jqueryBrowserMobile"], function(e) {
        return {
            isIE9: function() {
                return e.browser.msie && e.browser.version === "9.0"
            },
            isSafari: function() {
                return e.browser.safari
            },
            isWebkit: function() {
                return e.browser.webkit
            },
            isIe: function() {
                return e.browser.msie || window.navigator.userAgent.indexOf("Trident") !== -1
            },
            isMobile: function() {
                return e.browser.mobile
            },
            isSafariWebview: function() {
                return /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent)
            },
            isAndroidWebview: function() {
                return /Android.+Version\/\d.\d/.test(window.navigator.userAgent)
            },
            isWebview: function() {
                return this.isSafariWebview() || this.isAndroidWebview()
            },
            isiPad: function() {
                try {
                    return navigator.platform.indexOf("iPad") !== -1
                } catch (e) {
                    return !1
                }
            },
            hasTouch: function() {
                return "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch
            },
            safariMajorVersion: function() {
                var e = /Version\/([0-9]\.[0-9])/,
                    t = navigator.userAgent.match(e);
                return this.isSafari() && t && parseFloat(t[1]).round(1)
            },
            canUploadAjaxFiles: function() {
                return !this.isSafari() || this.safariMajorVersion() >= 7.1
            },
            hasFocusedPlaceholderSupport: function() {
                return !this.isIe()
            }
        }
    }),
    function(e) {
        define("jqueryMask", ["jquery"], function() {
            return function() {
                (function(e) {
                    "use strict";
                    var t, n = function(n, r, i) {
                        var s = this,
                            o = e(n),
                            u = {
                                byPassKeys: [8, 9, 37, 38, 39, 40],
                                maskChars: {
                                    ":": ":",
                                    "-": "-",
                                    ".": "\\.",
                                    "(": "\\(",
                                    ")": "\\)",
                                    "/": "/",
                                    ",": ",",
                                    _: "_",
                                    " ": "\\s",
                                    "+": "\\+"
                                },
                                translationNumbers: {
                                    0: "\\d",
                                    1: "\\d",
                                    2: "\\d",
                                    3: "\\d",
                                    4: "\\d",
                                    5: "\\d",
                                    6: "\\d",
                                    7: "\\d",
                                    8: "\\d",
                                    9: "\\d"
                                },
                                translation: {
                                    A: "[a-zA-Z0-9]",
                                    S: "[a-zA-Z]"
                                }
                            };
                        s.init = function() {
                            s.settings = {}, i = i || {}, u.translation = e.extend({}, u.translation, u.translationNumbers), s.settings = e.extend(!0, {}, u, i), s.settings.specialChars = e.extend({}, s.settings.maskChars, s.settings.translation), o.each(function() {
                                r = a.resolveMask(), r = a.fixRangeMask(r), o.attr("maxlength", r.length), o.attr("autocomplete", "off"), a.destroyEvents(), a.setOnKeyUp(), a.setOnPaste()
                            })
                        };
                        var a = {
                            onPasteMethod: function() {
                                setTimeout(function() {
                                    o.trigger("keyup")
                                }, 100)
                            },
                            setOnPaste: function() {
                                o.bind("paste", a.onPasteMethod)
                            },
                            setOnKeyUp: function() {
                                o.keyup(a.maskBehaviour).trigger("keyup")
                            },
                            destroyEvents: function() {
                                o.unbind("keyup").unbind("paste")
                            },
                            resolveMask: function() {
                                return typeof r == "function" ? r(a.getVal(), t, i) : r
                            },
                            setVal: function(e) {
                                return o.get(0).tagName.toLowerCase() === "input" ? o.val(e) : o.html(e), o
                            },
                            getVal: function() {
                                return o.get(0).tagName.toLowerCase() === "input" ? o.val() : o.text()
                            },
                            specialChar: function(e, t) {
                                return s.settings.specialChars[e.charAt(t)]
                            },
                            maskChar: function(e, t) {
                                return s.settings.maskChars[e.charAt(t)]
                            },
                            maskBehaviour: function(t) {
                                t = t || window.event;
                                var n = t.keyCode || t.which;
                                if (e.inArray(n, s.settings.byPassKeys) > -1) return !0;
                                var i = a.applyMask(r);
                                return i !== a.getVal() && a.setVal(i).trigger("change"), a.seekCallbacks(t, i)
                            },
                            applyMask: function(e) {
                                if (a.getVal() === "") return;
                                var t = function(e, t) {
                                        while (t < e.length) {
                                            if (e[t] !== undefined) return !0;
                                            t++
                                        }
                                        return !1
                                    },
                                    n = function(t) {
                                        t = typeof t == "string" ? t : t.join("");
                                        var n = t.match(new RegExp(a.maskToRegex(e))) || [];
                                        return n.shift(), n
                                    },
                                    r = a.getVal(),
                                    e = a.getMask(r, e),
                                    r = i.reverse ? a.removeMaskChars(r) : r,
                                    s, o = n(r);
                                while (o.join("").length < a.removeMaskChars(r).length) o = o.join("").split(""), r = a.removeMaskChars(o.join("") + r.substring(o.length + 1)), e = a.getMask(r, e), o = n(r);
                                for (var u = 0; u < o.length; u++) {
                                    s = a.specialChar(e, u);
                                    if (a.maskChar(e, u) && t(o, u)) o[u] = e.charAt(u);
                                    else if (s)
                                        if (o[u] !== undefined) {
                                            if (o[u].match(new RegExp(s)) === null) break
                                        } else if ("".match(new RegExp(s)) === null) {
                                        o = o.slice(0, u);
                                        break
                                    }
                                }
                                return o.join("")
                            },
                            getMask: function(e) {
                                var t = function(e) {
                                    e = a.removeMaskChars(e);
                                    var t = 0,
                                        n = 0,
                                        i = 0,
                                        s = r.length;
                                    t = s >= 1 ? s : s - 1, n = t;
                                    while (i < e.length) {
                                        while (a.maskChar(r, n - 1)) n--;
                                        n--, i++
                                    }
                                    return n = r.length >= 1 ? n : n - 1, r.substring(t, n)
                                };
                                return i.reverse ? t(e) : r
                            },
                            maskToRegex: function(e) {
                                var t;
                                for (var n = 0, r = ""; n < e.length; n++) t = a.specialChar(e, n), t && (r += "(" + t + ")?");
                                return r
                            },
                            fixRangeMask: function(e) {
                                var t = function(e, t) {
                                        return (new Array(t + 1)).join(e)
                                    },
                                    n = /([A-Z0-9])\{(\d+)?,([(\d+)])\}/g;
                                return e.replace(n, function() {
                                    var e = arguments,
                                        n = [],
                                        r = s.settings.translationNumbers[e[1]] ? String.fromCharCode(parseInt("6" + e[1], 16)) : e[1].toLowerCase();
                                    return n[0] = e[1], n[1] = t(e[1], e[2] - 1), n[2] = t(r, e[3] - e[2]).toLowerCase(), s.settings.specialChars[r] = a.specialChar(e[1]) + "?", n.join("")
                                })
                            },
                            removeMaskChars: function(t) {
                                return e.each(s.settings.maskChars, function(e, n) {
                                    t = t.replace(new RegExp("(" + s.settings.maskChars[e] + ")?", "g"), "")
                                }), t
                            },
                            seekCallbacks: function(e, t) {
                                i.onKeyPress && e.isTrigger === undefined && typeof i.onKeyPress == "function" && i.onKeyPress(t, e, o, i), i.onComplete && e.isTrigger === undefined && t.length === r.length && typeof i.onComplete == "function" && i.onComplete(t, e, o, i)
                            }
                        };
                        typeof QUNIT == "boolean" && (s.__p = a), s.remove = function() {
                            a.destroyEvents(), a.setVal(a.removeMaskChars(a.getVal())), o.removeAttr("maxlength")
                        }, s.init()
                    };
                    e.fn.mask = function(t, r) {
                        return this.each(function() {
                            e(this).data("mask", new n(this, t, r))
                        })
                    }, e("input[data-mask]").each(function() {
                        e(this).mask(e(this).attr("data-mask"))
                    })
                })(window.jQuery || window.Zepto)
            }.apply(e, arguments)
        })
    }(this), define("components/common/scripts/libs/jquery.numberInputs", ["jquery"], function(e) {
        function t(e) {
            var t = e.replace(/[^0-9\.]+/g, "");
            return t.replace(/(\d+)(\.\d+)?(\.\d*)*/, "$1$2")
        }
        e.numberVal = function(e) {
            return e ? typeof e == "number" ? e : Number(t(e)) : 0
        }, e.fn.numberVal = function() {
            var t = this.first().val();
            return e.numberVal(t)
        }, e.fn.floatVal = e.fn.numberVal, e.fn.intVal = function() {
            var e = this.first().val();
            if (!e) return 0;
            var n = t(e);
            return n ? parseInt(n, 10) : 0
        }
    }), define("components/common/scripts/modules/formFields", ["underscore", "marionette", "components/common/scripts/models/v2/baseModels", "components/common/scripts/util/formatter", "components/common/scripts/behaviors/textInputEffects", "components/common/scripts/services/dateService", "components/common/scripts/services/browserService", "jqueryMask", "components/common/scripts/libs/jquery.numberInputs"], function(e, t, n, r, i, s, o) {
        var u = t.View.extend({
                initialize: function(t) {
                    this.form = t.form, this.$inputEl = t.$inputEl, this.name = this.$inputEl.attr("name"), e.isFinite(t.decimals) && (this.decimals = t.decimals);
                    if (this.mask) {
                        var n = this.mask.pattern;
                        n = e.isFunction(n) ? n.call(this) : n, this.$inputEl.mask(n, this.mask.options)
                    }
                    this.setElement(this.rootEl(), !1), this.bindUIElements()
                },
                delegateEvents: function() {
                    return this.$inputEl.on(this._scopedChangeEvent(), this.validate.bind(this)), this.modelEvents = this.modelEvents || {}, this.options.hideInvalidState || (this.modelEvents["invalid:" + this.name] = "renderInvalid"), this.modelEvents["valid:" + this.name] = "renderValid", this.modelEvents["validating:" + this.name] = "showLoader", t.View.prototype.delegateEvents.apply(this, arguments)
                },
                get: function() {
                    return this.$inputEl.val()
                },
                set: function(e) {
                    this.$inputEl.val(e).change()
                },
                isEmpty: function() {
                    return this.get() === ""
                },
                rootEl: function() {
                    return this.$inputEl.parent()
                },
                validate: function() {
                    var e = this.name,
                        t = this.get();
                    return this.model.set(e, t), this.model.validateAttr(e, t)
                },
                renderInvalid: function(e) {
                    this.$el.addClass("not-valid"), this.$el.toggleClass("empty", this.isEmpty()), this.$(".validation").text(e), this.hideLoader()
                },
                renderValid: function() {
                    this.$el.removeClass("not-valid"), this.$el.toggleClass("empty", this.isEmpty()), this.$(".validation").text(""), this.hideLoader()
                },
                showLoader: function() {},
                hideLoader: function() {},
                _scopedChangeEvent: function() {
                    return (this.changeEvent || "blur") + ".formFieldValidation"
                },
                onDestroy: function() {
                    this.$inputEl.off(this._scopedChangeEvent())
                }
            }),
            a = u.extend({
                behaviors: {
                    TextInputEffects: {
                        behaviorClass: i
                    }
                },
                showLoader: function() {
                    this.$(".loader").show()
                },
                hideLoader: function() {
                    this.$(".loader").hide()
                }
            }),
            f = {
                pattern: function() {
                    var e = "000,000,000,000,000";
                    return this.decimals === 0 ? e : e + "." + (new Array(this.decimals + 1)).join("0")
                },
                options: {
                    reverse: !0,
                    byPassKeys: [9, 37, 38, 39, 40]
                }
            },
            l = a.extend({
                mask: f,
                decimals: 0,
                get: function() {
                    return this.$inputEl.val() === "" ? "" : this.$inputEl.numberVal()
                },
                set: function(e) {
                    var t = r.number(e, this.decimals);
                    return this.$inputEl.val(t).change()
                }
            }),
            c = a.extend({
                mask: f,
                decimals: 2,
                get: function() {
                    return this.$inputEl.val() === "" ? "" : n.Model.prototype.toCents(this.$inputEl.numberVal())
                },
                set: function(e) {
                    var t = n.Model.prototype.toDollars(Number(e)),
                        i = r.number(t, this.decimals);
                    return this.$inputEl.val(i).change()
                }
            }),
            h = l.extend({
                decimals: 2
            }),
            p = a.extend({
                mask: {
                    pattern: "(000) 000-0000"
                },
                get: function() {
                    var e = this.$inputEl.val();
                    return e.replace(/[^\d]/g, "")
                },
                set: function(e) {
                    var t = e.substr(0, 3),
                        n = e.substr(3, 3),
                        r = e.substr(6, 4);
                    e = "(" + t + ") " + n + "-" + r, this.$inputEl.val(e).change()
                }
            }),
            d = a.extend({
                mask: {
                    pattern: "00/00/0000"
                },
                get: function() {
                    var e = this.$inputEl.val(),
                        t = s.parseDateFieldValue(e);
                    return t.isInvalid() ? "" : t.serverFormat()
                },
                set: function(e) {
                    var t = "";
                    if (e) {
                        var n = s.parseServerDate(e);
                        t = n.toString("MM/dd/yyyy")
                    }
                    this.$inputEl.val(t).change()
                }
            }),
            v = a.extend({
                mask: {
                    pattern: "000-00-0000"
                },
                get: function() {
                    var e = this.$inputEl.val();
                    return e.replace(/[^\d]/g, "")
                },
                set: function(e) {
                    var t = e.substr(0, 3),
                        n = e.substr(3, 2),
                        r = e.substr(5, 4),
                        i = t + "-" + n + "-" + r;
                    this.$inputEl.val(i).change()
                }
            }),
            m = a.extend({
                mask: {
                    pattern: "00000"
                }
            }),
            g = a.extend({
                mask: {
                    pattern: "S"
                }
            }),
            y = u.extend({
                changeEvent: "change",
                ui: {
                    placeholder: ".placeholder"
                },
                events: {
                    "click @ui.placeholder": "openSelectOptions",
                    "click .select-options li": "onSelectOptionClick",
                    "change select": "onSelectChange",
                    blur: "closeSelectOptions",
                    focus: "openSelectOptions"
                },
                initialize: function() {
                    u.prototype.initialize.apply(this, arguments), o.hasTouch() && this.$el.addClass("touch")
                },
                openSelectOptions: function(e) {
                    if (o.hasTouch()) return;
                    this.$el.addClass("active open")
                },
                onSelectOptionClick: function(e) {
                    var t = $(e.currentTarget).data("value");
                    this.set(t)
                },
                closeSelectOptions: function() {
                    this.$el.removeClass("open"), this.$el.toggleClass("active", !this.isEmpty())
                },
                set: function(e) {
                    this._updateFakeSelect(e), this.$inputEl.val(e).change()
                },
                _updateFakeSelect: function(e) {
                    var t = this.$('.select-options li[data-value="' + e + '"]'),
                        n = t.text();
                    t.addClass("selected").siblings().removeClass("selected"), this.ui.placeholder.text(n), this.$el.addClass("active").removeClass("open")
                },
                onSelectChange: function() {
                    this._updateFakeSelect(this.$inputEl.val())
                }
            }),
            b = u.extend({
                changeEvent: "change",
                events: {
                    "click .radio-options li": "onRadioButtonClick"
                },
                onRadioButtonClick: function(e) {
                    var t = $(e.currentTarget),
                        n = t.find("input");
                    n.prop("checked", !0).change(), t.addClass("selected").siblings().removeClass("selected")
                },
                rootEl: function() {
                    return this.$inputEl.closest(".input-radio")
                },
                get: function() {
                    var e = this.$inputEl.filter(":checked").val();
                    return e === "true" ? !0 : e === "false" ? !1 : e
                },
                set: function(e) {
                    var t = this.$('.radio-options li[data-value="' + e.toString() + '"]'),
                        n = t.find("input");
                    return t.addClass("selected").siblings().removeClass("selected"), n.prop("checked", !0).change()
                },
                isEmpty: function() {
                    return e.isUndefined(this.get())
                }
            }),
            w = u.extend({
                changeEvent: "change",
                events: {
                    "click .check-box": "toggleCheckbox"
                },
                toggleCheckbox: function(e) {
                    var t = $(e.currentTarget),
                        n = t.find("input"),
                        r = !n.is(":checked");
                    n.prop("checked", r).change(), t.toggleClass("selected", r)
                },
                rootEl: function() {
                    return this.$inputEl.closest(".input-check")
                },
                get: function() {
                    return this.$inputEl.is(":checked")
                },
                set: function(e) {
                    return this.$inputEl.prop("checked", e).change()
                },
                isEmpty: function() {
                    return !this.get()
                }
            }),
            E = t.View.extend({
                events: {
                    "click button": "onSubmitClick"
                },
                initialize: function(e) {
                    this.form = e.form, this.$inputEl = e.$inputEl, this.setElement(this.rootEl(), !1)
                },
                rootEl: function() {
                    return this.$inputEl.parent()
                },
                onSubmitClick: function(e) {
                    e.preventDefault(), this.form.submit()
                }
            });
        return {
            text: a,
            number: l,
            money: c,
            percent: h,
            phone: p,
            date: d,
            ssn: v,
            zip: m,
            alphaChar: g,
            select: y,
            submit: E,
            radio: b,
            check: w
        }
    }), define("components/common/scripts/behaviors/editableForm", ["underscore", "marionette", "components/common/scripts/modules/formFields"], function(e, t, n) {
        return t.Behavior.extend({
            onRender: function() {
                var t = this,
                    r = t.view.model,
                    i = this.options.selector ? this.$(this.options.selector) : this.$el;
                this.fields = e.reduce(t.options.fields, function(s, o, u) {
                    if (e.isFunction(o.isIncluded) && !o.isIncluded.call(t.view)) return s;
                    var a = n[o.type],
                        f = new a({
                            $inputEl: i.find("[name=" + u + "]"),
                            model: r,
                            form: t,
                            decimals: o.decimals,
                            hideInvalidState: o.hideInvalidState
                        });
                    return r.has(u) && f.set(r.get(u)), s[u] = f, s
                }, {}), this.submits = e.map(i.find("button[type=submit]"), function(e) {
                    var i = n.submit;
                    return new i({
                        $inputEl: $(e),
                        model: r,
                        form: t
                    })
                })
            },
            onDestroy: function() {
                e.each(this.fields, function(e) {
                    e.destroy()
                })
            },
            isValid: function() {
                return e.chain(this.fields).map(function(e) {
                    return !e.validate()
                }).all(e.identity).value()
            },
            submit: function() {
                this.isValid() ? e.isFunction(this.options.onSubmit) && this.options.onSubmit.call(this.view) : e.isFunction(this.options.onInvalid) && this.options.onInvalid.call(this.view)
            }
        })
    }), define("views/transfer/smartDeposits/chooseGoalView", ["components/common/scripts/analytics/analytics", "components/common/scripts/models/v2/baseModels", "common/betterment.views", "hbs!views/transfer/smartDeposits/chooseGoal", "components/common/scripts/behaviors/editableForm"], function(e, t, n, r, i) {
        var s = t.Model.extend({
            validation: {
                accountId: {
                    required: !0,
                    msg: "A goal is required"
                }
            }
        });
        return n.View.extend({
            className: "smart-deposits-bank-account",
            template: r,
            events: {
                "click .next": "next"
            },
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        accountId: {
                            type: "radio"
                        }
                    },
                    onSubmit: function() {
                        this.trigger("goalChosen", this.getSelectedAccount().get("smartDepositConfig")), this.trigger("next")
                    }
                }
            },
            onInitialize: function() {
                this.model = new s
            },
            getSelectedAccount: function() {
                return BMT.accounts().get(this.model.get("accountId"))
            },
            serializeData: function() {
                return {
                    eligibleAccounts: BMT.accounts().withSmartDepositEligible().map(function(e) {
                        return {
                            value: e.id,
                            label: e.get("name"),
                            buttonLabel: e.get("name")[0]
                        }
                    })
                }
            },
            next: function() {
                e.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "ChooseGoal"
                }), this.trigger("next")
            }
        })
    }), define("hbs!components/common/scripts/templates/inputMoney", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="input-money ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <div class="symbol">$</div>\n    <input name="', (u = n.propertyName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.propertyName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" ', (u = n.disabled) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.disabled, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '/>\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n    <div class="field-loader-img loader"></div>\n</div>\n', s
        });
        return t.registerPartial("components/common/scripts/templates/inputMoney", n), n
    }), define("components/common/scripts/templateHelpers/inputMoney", ["hbs/handlebars", "hbs!components/common/scripts/templates/inputMoney"], function(e, t) {
        e.registerHelper("inputMoney", function(n, r) {
            var i = {
                propertyName: n,
                className: r.hash.className || n,
                label: r.hash.label || n,
                disabled: r.hash.disabled || ""
            };
            return new e.SafeString(t(i))
        })
    }), define("hbs!views/transfer/smartDeposits/minBankBalance", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<div class="header">\n    <h1>Set maximum bank balance</h1>\n    <h3>If we see that your bank balance is above the maximum you&apos;ve set, we&apos;ll automatically invest the excess cash. We&apos;ll notify you before every investment. We require a maximum bank balance of at least ' + f((o = n.money || t && t.money, u = {
                hash: {}
            }, o ? o.call(t, t && t.minBankBalance, 0, u) : a.call(t, "money", t && t.minBankBalance, 0, u))) + ' to protect from unintentional overdrafts.</h3>\n    <h3 class="default-min-bank-balance-wrapper">Using your income and the cost of living of your area, we\'ve estimated a maximum balance for you.</h3>\n</div>\n\n<form>\n    ' + f((o = n.inputMoney || t && t.inputMoney, u = {
                hash: {
                    className: "min-bank-balance",
                    label: "Maximum bank balance"
                }
            }, o ? o.call(t, "minBankBalanceCents", u) : a.call(t, "inputMoney", "minBankBalanceCents", u))) + "\n    " + f((o = n.submitButton || t && t.submitButton, u = {
                hash: {}
            }, o ? o.call(t, "Set Balance", u) : a.call(t, "submitButton", "Set Balance", u))) + "\n</form>\n", s
        });
        return t.registerPartial("views/transfer/smartDeposits/minBankBalance", n), n
    }), define("models/v2/zipCode", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return "/zip_codes/" + this.get("zip")
            }
        };
        return e.Model.extend(t)
    }), define("views/transfer/smartDeposits/minBankBalanceView", ["components/common/scripts/analytics/analytics", "hbs!views/transfer/smartDeposits/minBankBalance", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "models/v2/smartDepositConfig", "models/v2/zipCode", "models/visitor", "projector"], function(e, t, n, r, i, s, o, u) {
        return n.View.extend({
            className: "smart-deposits-min-bank-balance",
            ui: {
                defaultMinBankBalanceWrapper: ".default-min-bank-balance-wrapper",
                minBankBalanceCents: "input[name=minBankBalanceCents]"
            },
            template: t,
            onRender: function() {
                this.block(), this.loadZipData(), this.listenToOnce(this.zipCode, "sync", this.showInitialState)
            },
            behaviors: {
                EditableForm: {
                    behaviorClass: r,
                    fields: {
                        minBankBalanceCents: {
                            type: "money",
                            decimals: 0
                        }
                    },
                    onSubmit: function() {
                        this.next()
                    }
                }
            },
            next: function() {
                e.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "SetBankBalance"
                }), this.trigger("next")
            },
            serializeData: function() {
                return {
                    minBankBalance: i.MIN_BANK_BALANCE
                }
            },
            loadZipData: function() {
                this.zipCode = new s({
                    zip: BMT.user.get("zip")
                }), this.zipCode.fetch()
            },
            showInitialState: function() {
                if (o.hasVariation("show_bank_balance_advice")) {
                    var t = BMT.user.num("annualIncome");
                    if (!!t) {
                        var n = u.consumptionPerMonth(t, BMT.user.get("state"), this.zipCode.num("costOfLivingIndex"));
                        this.ui.minBankBalanceCents.val(n).blur(), this.ui.defaultMinBankBalanceWrapper.show(), e.track("ElementViewed", {
                            Location: "SmartDeposit",
                            Name: "BalanceRecommended",
                            Value: n
                        })
                    }
                } else e.track("ElementViewed", {
                    Location: "SmartDeposit",
                    Name: "BalanceNotRecommended"
                });
                this.unblock()
            }
        })
    }), define("hbs!views/transfer/smartDeposits/maxDeposit", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<div class="header">\n    <h1>Set maximum deposit</h1>\n    <h3>Set the maximum amount of money we invest each time we check your bank balance. We&apos;ll never invest more than you want.</h3>\n</div>\n\n<form>\n    ' + f((o = n.inputMoney || t && t.inputMoney, u = {
                hash: {
                    className: "min-bank-balance",
                    label: "Maximum amount"
                }
            }, o ? o.call(t, "maxDepositCents", u) : a.call(t, "inputMoney", "maxDepositCents", u))) + "\n    " + f((o = n.submitButton || t && t.submitButton, u = {
                hash: {}
            }, o ? o.call(t, "Set Max Deposit", u) : a.call(t, "submitButton", "Set Max Deposit", u))) + "\n</form>\n", s
        });
        return t.registerPartial("views/transfer/smartDeposits/maxDeposit", n), n
    }), define("views/transfer/smartDeposits/maxDepositView", ["components/common/scripts/analytics/analytics", "hbs!views/transfer/smartDeposits/maxDeposit", "common/betterment.views", "components/common/scripts/behaviors/editableForm"], function(e, t, n, r) {
        return n.View.extend({
            className: "smart-deposits-max-deposit",
            template: t,
            behaviors: {
                EditableForm: {
                    behaviorClass: r,
                    fields: {
                        maxDepositCents: {
                            type: "money",
                            decimals: 0
                        }
                    },
                    onSubmit: function() {
                        this.next()
                    }
                }
            },
            next: function() {
                e.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "SetAmount"
                }), this.trigger("next")
            }
        })
    }), define("hbs!views/transfer/smartDeposits/confirmation", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<div class="header">\n    <h1>SmartDeposit confirmation</h1>\n    <h3>You&apos;re almost there.  Please confirm your settings.</h3>\n</div>\n\n<form>\n    ' + f((o = n.inputMoney || t && t.inputMoney, u = {
                hash: {
                    className: "max-deposit",
                    label: "Deposit up to"
                }
            }, o ? o.call(t, "maxDepositCents", u) : a.call(t, "inputMoney", "maxDepositCents", u))) + "\n\n    " + f((o = n.inputMoney || t && t.inputMoney, u = {
                hash: {
                    className: "min-bank-balance",
                    label: "If my bank balance is above"
                }
            }, o ? o.call(t, "minBankBalanceCents", u) : a.call(t, "inputMoney", "minBankBalanceCents", u))) + "\n\n    " + f((o = n.submitButton || t && t.submitButton, u = {
                hash: {}
            }, o ? o.call(t, "Complete Setup", u) : a.call(t, "submitButton", "Complete Setup", u))) + "\n</form>\n", s
        });
        return t.registerPartial("views/transfer/smartDeposits/confirmation", n), n
    }), define("views/transfer/smartDeposits/confirmationView", ["underscore", "components/common/scripts/analytics/analytics", "hbs!views/transfer/smartDeposits/confirmation", "common/betterment.views", "components/common/scripts/behaviors/editableForm"], function(e, t, n, r, i) {
        return r.View.extend({
            className: "smart-deposits-confirmation",
            template: n,
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        minBankBalanceCents: {
                            type: "money",
                            decimals: 0
                        },
                        maxDepositCents: {
                            type: "money",
                            decimals: 0
                        }
                    },
                    onSubmit: function() {
                        this.save()
                    }
                }
            },
            save: function() {
                t.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "CompleteSetup"
                }), this.trigger("save")
            }
        })
    }), define("hbs!views/transfer/smartDeposits/congrats", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header">\n    <h1>You’ve set up SmartDeposit</h1>\n    <h3>For your first SmartDeposit, here&apos;s what to expect.</h3>\n</div>\n\n<div class="one-third first">\n    <div class="icon smart-deposits-calendar"></div>\n    <div class="copy">We&apos;ll check your bank balance at least once a week and calculate an amount to invest based on your settings.</div>\n</div>\n\n<div class="one-third second">\n    <div class="icon smart-deposits-notification"></div>\n    <div class="copy">We&apos;ll send you an email with your SmartDeposit amount. You&apos;ll have until 10 p.m. ET the following day to cancel.</div>\n</div>\n\n<div class="one-third third">\n    <div class="icon smart-deposits-change"></div>\n    <div class="copy">You can change your SmartDeposit settings at any time by logging into your account.</div>\n</div>\n\n<div class="secondary-button">\n    <button class="finish blue">Great, got it</button>\n</div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/congrats", n), n
    }), define("views/transfer/smartDeposits/congratsView", ["components/common/scripts/analytics/analytics", "common/betterment.views", "hbs!views/transfer/smartDeposits/congrats"], function(e, t, n) {
        return t.View.extend({
            className: "smart-deposits-congrats",
            template: n,
            events: {
                "click .finish": "finish"
            },
            templateHelpers: {
                nextSmartDepositCheck: function(e) {
                    return this.self.model.date("nextTransactionOn")
                }
            },
            finish: function() {
                e.track("ElementClicked", {
                    Location: "SmartDeposit",
                    Name: "ViewMyAccount"
                }), this.trigger("finish")
            }
        })
    }), define("views/transfer/smartDeposits/setupView", ["underscore", "backbone", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/transfer/smartDeposits/setup", "hbs!views/transfer/smartDeposits/bankLogo", "components/progressNav/scripts/progressNavView", "components/bubble/scripts/balanceBubbleView", "models/v2/bankAccountBalance", "views/transfer/smartDeposits/splashView", "views/transfer/smartDeposits/bankAccountView", "views/transfer/smartDeposits/chooseGoalView", "views/transfer/smartDeposits/minBankBalanceView", "views/transfer/smartDeposits/maxDepositView", "views/transfer/smartDeposits/confirmationView", "views/transfer/smartDeposits/congratsView", "components/common/scripts/util/formatter"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
        return r.View.extend({
            className: "smart-deposits-setup",
            template: i,
            regions: {
                progressRegion: ".progress-container",
                sidebarRegion: ".sidebar",
                contentRegion: ".content"
            },
            flow: [{
                showProgressBar: !1,
                showSidebar: !1,
                view: f
            }, {
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: l,
                label: "Confirm Bank"
            }, {
                name: "chooseGoalStep",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: c,
                label: "Choose Goal"
            }, {
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: h,
                label: "Set Max Balance"
            }, {
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: p,
                label: "Set Max Deposit"
            }, {
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: d,
                label: "Confirm SmartDeposit"
            }, {
                showProgressBar: !1,
                showSidebar: !1,
                showBackArrow: !0,
                view: v,
                label: "Congrats"
            }],
            onInitialize: function() {
                this.model ? this.removeChooseGoalStep() : BMT.accounts().withSmartDepositEligible().length === 1 && (this.model = BMT.accounts().withSmartDepositEligible()[0].get("smartDepositConfig"), this.removeChooseGoalStep())
            },
            onRender: function() {
                var t = this.options.skipSplashAndConfirmBank ? 2 : 0;
                this.progressView = new o({
                    steps: e.filter(this.flow, function(e) {
                        return e.showProgressBar
                    })
                }), this.listenTo(this.progressView, "back", this.showPreviousStep), this.progressRegion.show(this.progressView), this.bubbleView = new u({
                    topContent: n.s(s(BMT.user.bankAccount().attributes)),
                    color: BMT.user.bankAccount().get("colorHex")
                }), this.sidebarRegion.show(this.bubbleView), this.bankAccountBalance = a.fromIdParams({
                    bettermentdbBankAccountId: BMT.user.bankAccount().get("id")
                }), this.bankAccountBalancePromise = this.bankAccountBalance.save(), this.showStep(this.flow[t])
            },
            transition: function(e, t, n) {
                this.contentRegion.$el.animate({
                    opacity: 0
                }, 250).promise().done(function() {
                    this.progressRegion.$el.toggleClass("shown", t && !this.options.alwaysHideProgress), this.sidebarRegion.$el.toggleClass("shown", n), this.contentRegion.show(e), this.contentRegion.$el.toggleClass("with-sidebar", n), this.contentRegion.$el.animate({
                        opacity: 1
                    }, 250)
                }.bind(this))
            },
            showStep: function(e) {
                var t = this.flow.indexOf(e),
                    n = new e.view({
                        model: this.model
                    });
                this.transition(n, e.showProgressBar, e.showSidebar), this.progressView.setActiveStep(t - 1, e.showBackArrow), this.currentStepIndex = t, this.listenTo(n, "confirm-bank", this.showBankBalance), this.listenTo(n, "goalChosen", function(e) {
                    this.model = e
                }), this.listenTo(n, "next", function() {
                    this.showNextStep(e, n), this.trigger("next")
                }), this.listenTo(n, "save", function() {
                    this.model.save().then(function() {
                        this.showNextStep(e, n)
                    }.bind(this)), this.trigger("save")
                }), this.listenTo(n, "finish", function() {
                    BMT.flash("Your SmartDeposit settings have been saved."), BMT.user.fetch({
                        success: BMT.refreshBanners
                    }), this.trigger("finish close", this.model)
                })
            },
            showBankBalance: function() {
                this.bankAccountBalancePromise.then(function() {
                    this.bankAccountBalance.is("recentBalanceAvailable") && (this.bubbleView.setContent({
                        bottomLabel: "your balance",
                        bottomValue: m.moneyCents(this.bankAccountBalance.get("recentBalanceCents"), 0)
                    }), this.bubbleView.toggleBalance(!0))
                }.bind(this))
            },
            removeChooseGoalStep: function() {
                var t = e.findIndex(this.flow, function(e) {
                    return e.name === "chooseGoalStep"
                });
                t !== -1 && this.flow.splice(t, 1)
            },
            showNextStep: function(e, t) {
                this.showStep(this.flow[this.currentStepIndex + 1])
            },
            showPreviousStep: function() {
                this.currentStepIndex > 0 && this.showStep(this.flow[this.currentStepIndex - 1])
            }
        })
    }), define("hbs!views/transfer/smartDeposits/setupWithPlaid", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="progress-container"></div>\n<div class="main-container"></div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/setupWithPlaid", n), n
    }), define("hbs!views/transfer/smartDeposits/unlinkBankAccount", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="sidebar">\n</div>\n\n<div class="content">\n\n    <div class="header">\n        <h1>Update Bank Account</h1>\n        <h3>In order to use SmartDeposit, your bank account must be updated. When you update your bank account it will be used for all future transactions and your currently linked bank account will be de-activated</h3>\n    </div>\n\n    <div class="secondary-button">\n        <button class="unlink-bank-account blue">Update bank account</button>\n    </div>\n\n</div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/unlinkBankAccount", n), n
    }), define("hbs!views/transfer/smartDeposits/unlinkBankAccountLogo", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 100 100" class="unlink-bank-account-logo"><g transform="translate(20.000000, 17.000000)"> <path d="M15.025 20.756C14.407 20.756 13.866 21.3 13.866 21.919L13.866 43.687C13.866 44.307 14.407 44.85 15.025 44.85 15.641 44.85 16.183 44.307 16.183 43.687L16.183 21.919C16.183 21.3 15.641 20.756 15.025 20.756M9.302 20.902C8.939 20.697 8.527 20.708 8.169 20.927 7.817 21.146 7.598 21.568 7.598 22.031L7.598 43.575C7.598 44.038 7.817 44.461 8.169 44.679 8.355 44.793 8.556 44.851 8.758 44.851 8.943 44.851 9.129 44.803 9.303 44.705 9.674 44.495 9.915 44.096 9.915 43.687L9.915 21.919C9.915 21.511 9.674 21.111 9.302 20.902M31.444 20.756C30.827 20.756 30.286 21.3 30.286 21.919L30.286 43.687C30.286 44.307 30.827 44.85 31.444 44.85 32.061 44.85 32.603 44.307 32.603 43.687L32.603 21.919C32.603 21.3 32.061 20.756 31.444 20.756M25.176 20.756C24.56 20.756 24.018 21.3 24.018 21.919L24.018 43.687C24.018 44.307 24.56 44.85 25.176 44.85 25.794 44.85 26.335 44.307 26.335 43.687L26.335 21.919C26.335 21.3 25.794 20.756 25.176 20.756M52.097 16.193L28.869 0.247C28.554 0.009 28.081 0.006 27.689 0.243L4.389 16.26C3.905 16.584 3.711 17.063 3.853 17.561 3.933 18.046 4.411 18.428 4.942 18.428L51.543 18.428C52.14 18.428 52.69 17.913 52.77 17.264 52.77 16.804 52.469 16.338 52.097 16.193L52.097 16.193ZM9.121 16.032L28.242 2.577 47.297 16.032 9.121 16.032 9.121 16.032ZM42.618 21.919C42.618 21.3 42.077 20.756 41.46 20.756 40.843 20.756 40.302 21.3 40.302 21.919L40.302 41.99C41.025 41.453 41.8 40.983 42.618 40.588L42.618 21.919M48.886 21.919C48.886 21.3 48.345 20.756 47.728 20.756 47.111 20.756 46.569 21.3 46.569 21.919L46.569 39.337C47.324 39.215 48.097 39.149 48.886 39.149L48.886 21.919M4.942 47.178C4.324 47.178 3.783 47.722 3.783 48.342 3.783 48.962 4.324 49.505 4.942 49.505L35.033 49.505C35.274 48.698 35.583 47.92 35.954 47.178L4.942 47.178M1.467 51.353C0.849 51.353 0.308 51.898 0.308 52.517 0.308 53.137 0.849 53.682 1.467 53.682L34.423 53.682C34.423 52.888 34.492 52.112 34.615 51.353L1.467 51.353M48.886 41.896C42.408 41.896 37.156 47.172 37.156 53.682 37.156 60.191 42.408 65.467 48.886 65.467 55.365 65.467 60.617 60.191 60.617 53.682 60.617 47.172 55.365 41.896 48.886 41.896L48.886 41.896ZM47.288 58.176C46.328 59.141 44.752 59.139 43.763 58.187 42.761 57.223 42.811 55.623 43.752 54.635L43.752 54.625 46.082 52.285C46.562 51.803 47.201 51.564 47.839 51.564 48.477 51.564 49.122 51.809 49.616 52.285L48.92 53.006C48.311 52.419 47.359 52.422 46.788 52.995L44.47 55.335C43.882 55.952 43.864 56.893 44.46 57.466 45.068 58.052 46.009 58.04 46.581 57.466L47.911 56.129 48.618 56.839 47.288 58.176 47.288 58.176ZM47.424 54.5L48.15 53.647C49.379 54.741 50.161 54.391 50.741 53.745L52.375 50.889C52.377 50.885 52.38 50.881 52.382 50.876 52.78 50.13 52.551 49.224 51.832 48.829 51.093 48.422 50.184 48.671 49.781 49.374L48.954 50.821 48.091 50.313 48.915 48.874C49.252 48.282 49.798 47.888 50.414 47.72 51.03 47.553 51.717 47.621 52.317 47.95 53.535 48.619 53.903 50.177 53.249 51.377L51.607 54.246C50.217 56.283 48.43 55.491 47.424 54.5L47.424 54.5ZM54.34 54.845L54.25 55.824 52.071 55.619 52.162 54.641 54.34 54.845 54.34 54.845ZM50.412 59.73L49.662 57.666 50.581 57.328 51.331 59.393 50.412 59.73 50.412 59.73ZM54.305 58.741L51.298 57.226 51.737 56.347 54.744 57.862 54.305 58.741 54.305 58.741Z"/> </g></svg>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/unlinkBankAccountLogo", n), n
    }), define("views/transfer/smartDeposits/unlinkBankAccountView", ["components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/transfer/smartDeposits/unlinkBankAccount", "hbs!views/transfer/smartDeposits/unlinkBankAccountLogo", "components/bubble/scripts/balanceBubbleView"], function(e, t, n, r, i) {
        return t.View.extend({
            className: "smart-deposits-unlink-bank-account",
            template: n,
            regions: {
                sidebar: ".sidebar"
            },
            triggers: {
                "click .unlink-bank-account": "next"
            },
            onRender: function() {
                this.sidebar.show(new i({
                    topContent: e.s(r()),
                    color: "#e6e6e6"
                }))
            }
        })
    }), define("hbs!views/transfer/smartDeposits/ineligibleBank", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="sidebar">\n</div>\n\n<div class="content">\n\n    <div class="header">\n        <h1>Unable to link bank at this time</h1>\n        <h3>We\'re sorry. We\'re working on making SmartDeposit compatible with more banks in the future. We will notify you when we add more banks to our growing list.</h3>\n    </div>\n\n    <div class="secondary-button">\n        <button class="next blue">Close</button>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/transfer/smartDeposits/ineligibleBank", n), n
    }), define("views/transfer/smartDeposits/ineligibleBankView", ["components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/transfer/smartDeposits/ineligibleBank", "hbs!views/transfer/smartDeposits/unlinkBankAccountLogo", "components/bubble/scripts/balanceBubbleView"], function(e, t, n, r, i) {
        return t.View.extend({
            className: "smart-deposits-unlink-bank-account",
            template: n,
            regions: {
                sidebar: ".sidebar"
            },
            triggers: {
                "click .next": "next"
            },
            onRender: function() {
                this.sidebar.show(new i({
                    topContent: e.s(r()),
                    color: "#e6e6e6"
                }))
            }
        })
    }), define("hbs!views/linkBankAccount/setup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="progress-region"></div>\n<div class="sidebar"></div>\n<div class="content-region"></div>'
        });
        return t.registerPartial("views/linkBankAccount/setup", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoBofa", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(79.000000, 163.000000)">\n        <path d="M108.78 57.71C112.23 59.05 115.68 60.48 119.03 62.11 108.3 66.42 97.87 71.59 88.01 77.53 84.66 75.81 81.21 74.08 77.77 72.55 87.72 66.81 98.06 61.82 108.78 57.71"/>\n        <path d="M95.91 53.27C84.8 56.8 74.07 61.38 63.82 66.91 67.07 68.15 70.33 69.39 73.49 70.73 83.36 64.91 93.8 60.04 104.63 56.22 101.76 55.17 98.88 54.12 95.91 53.27"/>\n        <path d="M176.7 74.22C176.89 74.79 177.37 74.98 177.84 74.98 178.13 74.98 178.42 74.98 178.61 74.79 178.71 74.7 178.8 74.51 178.8 74.32 178.8 73.94 178.51 73.75 178.13 73.75L177.46 73.56C177.27 73.46 176.98 73.46 176.79 73.27 176.6 73.08 176.5 72.8 176.5 72.51 176.5 71.75 177.17 71.47 177.84 71.47 178.42 71.47 178.99 71.75 179.18 72.42L178.71 72.51C178.71 72.13 178.23 71.85 177.75 71.85 177.46 71.85 176.98 72.04 176.98 72.42 176.98 72.89 177.27 72.99 177.65 73.08L178.23 73.18C178.51 73.27 178.8 73.37 178.99 73.46 179.18 73.75 179.28 73.94 179.28 74.32 179.28 74.6 179.18 74.98 178.9 75.17 178.61 75.37 178.23 75.46 177.84 75.46 177.08 75.46 176.6 75.08 176.31 74.32L176.7 74.22"/>\n        <path d="M180.4 75.46L180.02 75.46 180.02 71.61 180.69 71.61 181.93 74.69 182.97 71.61 183.73 71.61 183.73 75.46 183.26 75.46 183.26 72.09 182.02 75.46 181.64 75.46 180.4 72.09 180.4 75.46"/>\n        <path d="M131.94 57.4C123.13 53.18 114.04 49.63 104.75 46.76 101.4 47.72 98.14 48.77 94.98 49.83 104.56 52.7 113.94 56.35 122.94 60.66 125.91 59.51 128.87 58.46 131.94 57.4"/>\n        <path d="M146.33 53.1C137.43 49.19 128.15 45.94 118.67 43.35 115.61 43.93 112.64 44.6 109.68 45.36 119.06 48.13 128.24 51.58 137.05 55.78 140.11 54.83 143.27 53.87 146.33 53.1"/>\n        <path d="M169.43 60.66C146.89 68.2 125.79 78.99 106.71 92.45 111.5 95.4 116.11 98.46 120.61 101.8 138.65 87.58 158.69 75.74 180.17 66.77 176.62 64.58 173.08 62.57 169.43 60.66"/>\n        <path d="M153.79 53.41C130.4 59.54 108.45 69.48 88.6 82.68 93.01 84.88 97.42 87.18 101.74 89.67 121.2 76.27 142.77 65.75 165.78 58.87 161.84 56.95 157.91 55.04 153.79 53.41"/>\n        <path d="M89.57 7.99C95.22 7.99 98.1 12.2 98.1 17.85 98.1 23.7 95.32 27.82 89.57 27.82 83.72 27.82 81.03 23.7 81.03 17.85 81.03 12.2 83.91 7.99 89.57 7.99L89.57 7.99ZM89.57 23.99C91.1 23.99 91.77 22.64 91.77 17.85 91.77 13.45 91.29 11.82 89.57 11.82 87.84 11.82 87.36 13.45 87.36 17.85 87.36 22.64 88.03 23.99 89.57 23.99L89.57 23.99Z"/>\n        <path d="M101.92 12.73L99.44 12.73 99.44 8.52 101.92 8.52 101.92 6.41C101.92 1.72 104.22 0 108.24 0 109.39 0 110.35 0.19 111.31 0.29L111.31 4.98C111.02 4.88 110.54 4.79 110.16 4.79 108.53 4.79 107.96 5.46 107.96 6.6L107.96 8.52 111.31 8.52 111.31 12.73 107.96 12.73 107.96 27.37 101.92 27.37 101.92 12.73"/>\n        <path d="M30.72 13.72C30.72 12.58 30.24 11.81 29.19 11.81 27.66 11.81 27.19 13.15 27.19 14.29L21.84 13.15C22.51 9.52 25.94 7.99 29.38 7.99 33.01 7.99 36.83 9.52 36.83 13.72L36.83 24.23C36.83 26.33 37.11 27 37.4 27.29L31.1 27.29C31 26.71 30.91 25.85 30.91 25.57 29.86 26.62 28.04 27.67 26.33 27.67 23.27 27.67 20.98 25.57 21.08 22.13 21.17 17.26 26.71 15.73 30.72 15.25L30.72 13.72 30.72 13.72ZM30.72 18.21C28.62 18.4 26.99 19.26 26.99 21.65 26.99 22.99 27.66 23.66 28.81 23.66 29.48 23.66 30.24 23.18 30.72 22.51L30.72 18.21 30.72 18.21Z"/>\n        <path d="M46.49 13.8L46.49 27.23 40.37 27.23 40.37 8.47 46.3 8.47 46.39 10.37C47.73 9.04 49.35 7.99 51.74 7.99 54.42 7.99 55.95 9.8 55.95 12.37L55.95 27.23 49.83 27.23 49.83 14.27C49.83 13.23 49.45 12.66 48.4 12.66 47.73 12.66 47.06 13.04 46.49 13.8"/>\n        <path d="M59.81 0.59L65.94 0.59 65.94 14.17 66.04 14.17 70.54 8.53 76.58 8.53 71.5 14.27 76.58 27.37 70.26 27.37 67.29 19.15 67.19 19.15 65.94 20.58 65.94 27.37 59.81 27.37 59.81 0.59"/>\n        <path d="M14.59 13.41C17.47 14.36 19.59 16.76 19.59 20.2 19.59 24.79 15.94 27.37 10.74 27.37L0.45 27.37 0.45 0.59 11.03 0.59C15.84 0.59 18.92 3.46 18.92 7.1 18.92 10.63 16.51 12.45 14.59 13.22L14.59 13.41 14.59 13.41ZM6.99 22.4L9.49 22.4C11.03 22.4 12.95 21.73 12.95 19.05 12.95 17.04 11.7 15.71 9.49 15.71L6.99 15.71 6.99 22.4 6.99 22.4ZM6.99 11.21L9.3 11.21C11.7 11.21 12.66 9.87 12.66 8.34 12.66 5.76 10.93 5.37 9.39 5.37L6.99 5.37 6.99 11.21 6.99 11.21Z"/>\n        <path d="M235.03 13.72C235.03 12.58 234.45 11.81 233.41 11.81 231.97 11.81 231.5 13.15 231.4 14.29L226.15 13.15C226.82 9.52 230.25 7.99 233.69 7.99 237.32 7.99 241.14 9.52 241.14 13.72L241.14 24.23C241.14 26.33 241.42 27 241.61 27.29L235.41 27.29C235.31 26.71 235.22 25.85 235.22 25.57 234.17 26.62 232.36 27.67 230.54 27.67 227.58 27.67 225.2 25.57 225.29 22.13 225.48 17.26 231.02 15.73 235.03 15.25L235.03 13.72 235.03 13.72ZM235.03 18.21C232.93 18.4 231.31 19.26 231.31 21.65 231.31 22.99 231.97 23.66 233.02 23.66 233.79 23.66 234.45 23.18 235.03 22.51L235.03 18.21 235.03 18.21Z"/>\n        <path d="M172.33 19.29C172.23 20.92 172.71 23.79 175.2 23.79 176.63 23.79 177.87 22.64 178.15 21.21L182.26 22.64C181.97 23.51 180.16 27.82 174.72 27.82 168.89 27.82 166.22 23.12 166.22 17.85 166.22 12.49 169.09 7.99 174.62 7.99 180.45 7.99 182.55 13.07 182.55 18.05L182.55 19.29 172.33 19.29 172.33 19.29ZM176.91 15.65C176.91 13.93 176.72 11.82 174.62 11.82 172.9 11.82 172.23 13.93 172.33 15.65L176.91 15.65 176.91 15.65Z"/>\n        <path d="M198.87 8.58L204.96 8.58 204.96 27.37 198.87 27.37 198.87 8.58Z"/>\n        <path d="M198.87 0.59L204.96 0.59 204.96 6.07 198.87 6.07 198.87 0.59Z"/>\n        <path d="M218.56 15.56C218.56 14.79 218.56 13.83 218.27 13.16 217.98 12.39 217.51 11.82 216.55 11.82 214.55 11.82 214.26 14.31 214.26 18.14 214.26 22.36 214.93 23.79 216.55 23.79 218.65 23.79 218.84 21.59 218.84 20.15L223.61 20.82C223.14 25.42 220.46 27.82 216.08 27.82 210.64 27.82 207.78 23.03 207.78 18.33 207.78 13.16 210.64 7.99 216.36 7.99 222.76 7.99 223.8 13.64 223.8 15.56L218.56 15.56"/>\n        <path d="M121.95 0.59L130.88 0.59 136.54 27.37 130.01 27.37 128.95 21.92 122.71 21.92 121.47 27.37 115.61 27.37 121.95 0.59 121.95 0.59ZM123.58 17.23L128 17.23 126.08 6.33 125.88 6.33 123.58 17.23 123.58 17.23Z"/>\n        <path d="M185.07 8.47L191.03 8.47 191.03 10.94 191.13 10.94C192.38 8.94 194.69 7.99 197.09 7.99L197.09 14.08C196.32 13.8 195.65 13.61 194.59 13.61 192.96 13.61 191.9 14.18 191.22 15.04L191.22 27.23 185.07 27.23 185.07 8.47"/>\n        <path d="M154.18 13.8L154.18 27.23 148.13 27.23 148.13 14.37C148.13 13.32 147.84 12.66 146.69 12.66 146.11 12.66 145.15 13.13 144.67 13.8L144.67 27.23 138.62 27.23 138.62 8.47 144.57 8.47 144.67 10.37C146.02 9.13 147.94 7.99 150.15 7.99 152.07 7.99 153.32 9.04 153.9 10.47L153.99 10.47C155.05 9.32 156.87 7.99 159.37 7.99 161.97 7.99 163.7 9.61 163.7 12.27L163.7 27.23 157.64 27.23 157.64 14.37C157.64 13.32 157.35 12.66 156.2 12.66 155.43 12.66 154.57 13.32 154.18 13.8"/>\n        <path d="M244.14 25.08C244.14 23.64 245.3 22.49 246.86 22.49 248.31 22.49 249.48 23.64 249.48 25.08 249.48 26.52 248.31 27.67 246.86 27.67 245.3 27.67 244.14 26.52 244.14 25.08L244.14 25.08ZM244.62 25.08C244.62 26.23 245.59 27.09 246.86 27.09 248.02 27.09 248.99 26.23 248.99 25.08 248.99 23.93 248.02 22.97 246.86 22.97 245.59 22.97 244.62 23.93 244.62 25.08L244.62 25.08Z"/>\n        <path d="M248.05 26.49L247.57 26.49 246.72 25.17 246.24 25.17 246.24 26.49 245.77 26.49 245.77 23.67 247.1 23.67C247.29 23.67 247.57 23.67 247.76 23.77 248.05 23.96 248.14 24.14 248.14 24.42 248.14 24.99 247.67 25.17 247.19 25.17L248.05 26.49 248.05 26.49ZM246.72 24.8C247.1 24.8 247.67 24.89 247.67 24.42 247.67 24.05 247.38 23.96 247 23.96L246.24 23.96 246.24 24.8 246.72 24.8 246.72 24.8Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoBofa", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoCapone360", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <path d="M316 215.7h5.3l3.2-9.2h-5.3L316 215.7" />\n    <path d="M304.2 237.4c-9.7-0.8-17.8-6.8-21.7-15.3C331.8 221 315.5 231.9 304.2 237.4zM333 211.1c0 14.6-11.9 26.4-26.5 26.4 -0.4 0-0.7 0-1.1 0 43.1-16.8 3.6-16.8-23-15.4 -1.5-3.4-2.3-7.1-2.3-11 0-14.6 11.8-26.5 26.4-26.5C321.1 184.6 333 196.5 333 211.1zM297.5 212.1l1.9-5.6 0.3-0.9c0.3-0.7 0.2-1.4-0.1-1.9 -0.3-0.4-0.7-0.7-1.2-0.8 -0.1 0-0.3 0-0.5 0h-9.8l-0.3 0.9c-0.3 0.7-0.2 1.4 0.1 1.9 0.4 0.5 1 0.8 1.7 0.8h6.2l-1 2.8h-8.9l-0.3 1c-0.3 0.6-0.2 1.3 0.1 1.9 0.3 0.5 1 0.8 1.6 0.8h6.3l-1 2.7h-8.9l-0.3 0.9c-0.3 0.7-0.2 1.4 0.1 2 0.3 0.5 0.9 0.8 1.6 0.8h7.2c0.7 0 1.4-0.3 2.2-0.8 0.7-0.6 1.2-1.3 1.4-2l1.3-3.6L297.5 212.1zM311.5 213l0.4-1c0.2-0.7 0.1-1.3-0.2-1.9 -0.4-0.5-1-0.8-1.6-0.8h-6.3l1-2.8h6.2c0.7 0 1.5-0.3 2.2-0.8s1.2-1.2 1.5-1.9l0.3-0.9h-9.8c-0.2 0-0.4 0-0.6 0 -0.5 0.1-1.1 0.4-1.6 0.8 -0.8 0.5-1.3 1.2-1.5 1.9l-0.3 0.9 -1.9 5.6L299 213l-1.3 3.6c-0.2 0.7-0.2 1.4 0.1 2 0.4 0.5 1 0.8 1.7 0.8h7.1c0.7 0 1.5-0.3 2.2-0.8 0.7-0.6 1.2-1.3 1.5-2v-0.1L311.5 213zM328.4 205.6c0.2-0.7 0.2-1.4-0.1-1.9 -0.4-0.5-1-0.8-1.7-0.8h-7.1c-0.7 0-1.5 0.3-2.2 0.8 -0.7 0.5-1.2 1.2-1.4 1.9l-3.9 11c-0.2 0.7-0.2 1.4 0.2 2 0.3 0.5 0.9 0.8 1.6 0.8h7.2c0.7 0 1.4-0.3 2.1-0.8 0.8-0.6 1.3-1.3 1.5-2L328.4 205.6z" />\n    <path d="M301.6 215.7h5.4l0.9-2.7h-5.3L301.6 215.7" />\n    <path d="M207.9 209.9c0.2 5.3 3.5 9.6 7.9 9.6 8.4 0 12-10.4 11.7-17.3 -0.2-5.3-3.6-9.6-7.9-9.6C212.3 192.6 207.7 202.9 207.9 209.9M203.5 209.6c-0.4-9 6.7-18.2 16.9-18.2 6.8 0 11.3 4.6 11.6 11.6 0.3 9.4-6.3 18.1-17 18.1C208.2 221.1 203.7 216.6 203.5 209.6" />\n    <path d="M106.6 207.2c-0.3 0.2-0.8 0.3-1.4 0.4 -0.6 0.2-1.6 0.4-3.2 0.6 -1.1 0.2-1.8 0.4-2.2 0.7 -0.4 0.3-0.7 0.6-0.7 1.1 -0.1 0.4 0 0.8 0.4 1.1 0.5 0.3 1.1 0.4 2.1 0.4 0.7 0 1.4-0.1 2.1-0.3 0.7-0.2 1.3-0.5 1.8-0.9 0.3-0.3 0.5-0.7 0.7-1.1C106.3 208.9 106.5 208.3 106.6 207.2M115.5 201.7c0 0.8-0.2 1.6-0.4 2.8l-1.5 8.5c-0.1 0.7 0.2 1.3 0.9 1.7l-0.1 0.3h-8.6l-0.1-2.1c-1.2 0.7-2.7 1.4-4.1 1.7 -1.4 0.4-2.5 0.5-4.1 0.5 -2.8 0-4.4-0.2-5.5-1.2s-1.7-1.7-1.6-3c0-0.8 0.4-1.8 1-2.5 0.6-0.8 1.4-1.2 2.3-1.6 0.9-0.5 2-0.8 3.5-1 1.5-0.3 3.6-0.5 6.5-0.7 1.4-0.2 2.4-0.5 2.8-0.7 0.6-0.2 0.8-0.5 0.9-0.9 0.2-0.9-0.1-1.4-1.3-1.6 -3.1-0.6-8.9 0.4-11.9 1.1l1.6-4.4c4-0.6 7.7-0.9 11.6-0.9C113.6 197.7 115.6 199.4 115.5 201.7" />\n    <path d="M140.5 215l3-16.8h8.2l-3 16.8H140.5L140.5 215zM143.9 194.3c0.3-1.4 2.4-2.5 4.9-2.5 2.4 0 4.2 1.1 4 2.5 -0.3 1.3-2.5 2.5-4.9 2.5C145.4 196.8 143.7 195.6 143.9 194.3L143.9 194.3z" />\n    <path d="M181 207.3c-0.4 0.1-0.9 0.2-1.5 0.4 -0.5 0.1-1.6 0.3-3.2 0.5 -1 0.2-1.8 0.4-2.2 0.7 -0.4 0.3-0.6 0.7-0.7 1.1 -0.1 0.5 0.1 0.9 0.5 1.1 0.4 0.3 1.1 0.5 2 0.5 0.8 0 1.5-0.1 2.2-0.4 0.7-0.2 1.2-0.5 1.7-0.9 0.3-0.3 0.6-0.6 0.7-1.1C180.6 208.9 180.8 208.3 181 207.3M189.8 201.7c0 0.9-0.1 1.6-0.4 2.8l-1.5 8.5c-0.1 0.7 0.2 1.3 0.9 1.7l-0.1 0.3 -8.6 0.1v-2.2c-1.3 0.8-2.8 1.4-4.2 1.8 -1.3 0.3-2.4 0.5-4.1 0.5 -2.8 0-4.4-0.3-5.5-1.3 -1.1-1-1.6-1.6-1.6-3 0.1-0.8 0.5-1.8 1.1-2.5 0.6-0.7 1.4-1.2 2.3-1.6 0.8-0.4 1.9-0.7 3.4-1 1.5-0.2 3.7-0.5 6.5-0.7 1.5-0.1 2.4-0.5 2.8-0.6 0.6-0.3 0.8-0.5 0.9-1 0.2-0.9-0.1-1.4-1.2-1.6 -3.2-0.6-8.9 0.4-11.9 1.1l1.6-4.4c3.9-0.5 7.6-0.9 11.5-0.9C187.9 197.7 189.9 199.5 189.8 201.7" />\n    <path d="M89.3 209c-2.7 0.5-4.2 0.7-6.9 0.7 -3.9 0-7-2-6.9-5.5 0.1-2.4 3-7.5 10.2-7.5 2.2 0 4 0.4 6.4 1.8l1-5.9c-3.2-1.2-5.4-1.4-8.1-1.3 -9.5 0.1-18.5 4.3-19.6 13.1 -1.2 8.8 9.6 11 14.4 11 2.8 0 5.7-0.1 8.4-0.4L89.3 209" />\n    <path d="M156.2 198.1l0.6-3.5 8.6-1.8 -0.9 5.3h4.3l-0.8 3.4h-4.1l-2.5 13.5c0 0-8.3 0-8.4 0l2.5-13.5h-3.1l0.6-3.4H156.2" />\n    <path d="M198.2 215h-8.4l4.2-23.5 8.2 0.2L198.2 215" />\n    <path d="M129.6 202.1c-1.1 0-2.1 0.3-3 1 -0.8 0.7-1.4 1.6-1.6 2.9 -0.3 1.5-0.1 2.5 0.5 3.2 0.6 0.6 1.4 0.9 2.5 0.9 0.8 0 1.6-0.1 2.1-0.4 0.7-0.3 1.2-0.7 1.6-1.4 0.5-0.6 0.8-1.3 0.9-2.2 0.3-1.3 0.1-2.3-0.5-3C131.5 202.4 130.6 202.1 129.6 202.1M114.6 220.8l4-22.6h7.2l-0.6 2.9c0.7-0.8 1.7-1.5 3.1-2.1 1.4-0.6 2.9-1 4.6-1 1.9 0 3.1 0.1 4.5 0.8 1.4 0.8 2.4 1.8 2.9 3.2 0.6 1.4 0.7 2.9 0.4 4.6 -0.5 2.8-1.9 5-4.1 6.6 -2.2 1.6-4.2 2-7 2.1 -1 0-1.9-0.1-2.6-0.3s-1.2-0.4-1.6-0.7c-0.4-0.2-0.8-0.6-1.4-1.2l-1.3 7.7H114.6" />\n    <path d="M264.2 204.2c-0.1-1.4-0.7-2.3-2.1-2.3 -3.4 0-7 6.6-7.6 9.3C260 211.2 264.3 207.9 264.2 204.2M264.9 214.6l0.7 0.4c-1.7 3.4-5.1 6.1-9 6.1 -3.2 0-5.9-2.2-6-6.2 -0.3-7.2 6.5-13.9 12.1-13.9 2.3 0 4.5 1 4.6 3.5 0.2 5.8-7.8 7.6-13.1 7.7 -0.2 0.6-0.3 1.2-0.3 2.1 0.1 2.4 1.6 4.4 4.6 4.4C261 218.7 263.6 216.6 264.9 214.6" />\n    <path d="M231.8 204c0.6-0.1 1.5-0.2 1.9-0.2 0.6 0 1.2 0.1 1.2 0.7 0.1 0.4-0.6 3-0.7 3.5l-1.3 5.7c-0.5 2.3-1.1 4.8-1.6 6.7h3.3l1.9-9c5.6-5.9 7.8-7.8 9.1-7.8 0.6 0 1.1 0.3 1.1 1 0 1.1-0.6 3.4-0.8 4.1l-1.9 6.5c-0.5 1.5-0.8 2.8-0.8 3.8 0.1 1.4 1 2.1 2.3 2.1 2.4 0 4.1-2.6 5.7-5l-0.5-0.8c-0.6 1-2 3.1-3.2 3.1 -0.3 0-0.7-0.2-0.7-0.8 0-0.8 0.3-1.9 0.5-2.7l2.1-7.7c0.6-2.1 0.9-3.4 0.9-4.1 -0.1-1.5-0.9-2.2-2.2-2.2 -2.2 0-5.1 1.6-11.2 8.7h-0.1l0.8-3.5c0.4-1.8 0.8-3.8 1.2-5.2 -2.1 0.8-5.1 1.7-7 2V204" />\n    <path d="M334.5 187.5c0 1.7-1.4 3.3-3.4 3.3 -1.9 0-3.3-1.4-3.3-3.3 0-1.8 1.5-3.4 3.3-3.4C333.1 184.1 334.5 185.7 334.5 187.5L334.5 187.5zM328.6 187.5c0 1.5 1.1 2.7 2.5 2.7 1.5 0 2.7-1.2 2.7-2.7 0-1.6-1.2-2.8-2.7-2.8S328.6 185.9 328.6 187.5L328.6 187.5zM333 189.3c-0.6 0-1-0.2-1.3-0.6 -0.2-0.3-0.4-0.6-0.5-0.8 -0.1-0.2-0.2-0.2-0.3-0.2h-0.1v0.6c0 0.5 0 0.5 0.5 0.5v0.4h-1.8v-0.4c0.5 0 0.5 0 0.5-0.5v-1.7c0-0.5 0-0.5-0.4-0.5v-0.4h1.7c0.6 0 1.3 0.1 1.3 0.9 0 0.4-0.3 0.7-0.7 0.9 0.2 0.5 0.4 0.7 0.8 1.2 0.1 0.1 0.3 0.2 0.4 0.2L333 189.3 333 189.3zM331 187.3c0.1 0 0.3 0 0.4-0.1 0.3-0.1 0.3-0.3 0.3-0.5 0-0.5-0.4-0.6-0.6-0.6 -0.2 0-0.3 0-0.3 0.3v0.9H331L331 187.3z" />\n    <path d="M202.4 213.8c-8.6 6.1-18.8 12.5-29.8 19.2l-0.4 0.3c-0.1 0.1-0.2 0.3-0.1 0.4 0.1 0.2 0.3 0.2 0.5 0.1l0.3-0.2c9.3-4.8 20-10.6 30.8-16.5l0.1-0.1C203.2 216 202.8 215 202.4 213.8L202.4 213.8M121 174.7l-0.9 0.2c-0.2 0-0.3 0.2-0.3 0.4 0.1 0.2 0.2 0.3 0.4 0.2l0.9-0.1c30.7-5.5 94.6-13.1 108.4 0.6 4.2 4.1 3.2 9.5-1.7 15.8 2.7 1.7 4.5 4.3 5.4 7.7 19-12.7 31.7-24.7 25.7-31.4 -4.4-4.9-16.7-6.7-32.6-6.7C193.7 161.4 145.9 169.2 121 174.7" />\n</svg>\n'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoCapone360", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoChase", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(80.000000, 178.000000)">\n        <path d="M114.1 39.2C115.4 37.2 116.5 35.4 117.7 33.7 117.9 33.4 118.5 33.3 118.9 33.3 124.6 33.2 130.2 33.3 135.8 33.2 138.7 33.2 139.3 32.6 139.3 29.8 139.3 29.1 139.3 28.4 139.3 27.8 139.3 25.4 138.6 24.8 136.4 24.8 131.8 24.8 127.2 24.9 122.7 24.7 121.2 24.7 119.8 24.4 118.5 23.8 116.4 22.9 115.3 21.1 114.8 19 114.2 16.4 114.1 13.7 114.7 11.1 115.5 7.9 118 5.7 121.3 5.4 122.9 5.2 124.6 5.2 126.3 5.2 132.2 5.2 138.1 5.2 144.1 5.2 144.4 5.2 144.6 5.3 145.2 5.3 144.3 6.7 143.4 7.8 142.8 9.1 142 10.7 140.9 11.1 139.2 11.1 134.2 11 129.2 11 124.1 11 121.9 11.1 121.3 11.7 121.3 13.8 121.3 14.6 121.3 15.4 121.3 16.2 121.4 18 122 18.6 123.8 18.7 128.1 18.7 132.3 18.7 136.6 18.7 137.5 18.7 138.4 18.7 139.3 18.8 143 19.4 145.5 21.5 146 25.2 146.3 27.6 146.3 30.2 146 32.6 145.4 36.7 142.4 39.1 137.7 39.1 129.9 39.2 122.2 39.2 114.1 39.2M159.5 11.2L159.5 19 177.9 19 177.9 24.8 159.5 24.8 159.5 33.5 160.9 33.5C166.5 33.5 172 33.5 177.6 33.5 178.3 33.5 178.8 33.7 179.2 34.4 180.2 36 181.2 37.6 182.3 39.4L152.7 39.4 152.7 38.1C152.7 27.6 152.7 17.2 152.6 6.7 152.6 5.8 152.8 5.4 153.8 5.4 162.9 5.5 172 5.4 181.2 5.4 181.4 5.4 181.7 5.5 182.2 5.5 181 7.4 179.9 9.2 178.7 11 178.5 11.2 177.9 11.2 177.5 11.2 172 11.3 166.4 11.2 160.8 11.2L159.5 11.2M43.1 18.9L61.9 18.9 61.9 16.9C61.9 13.5 61.9 10 61.9 6.6 61.9 5.8 62.1 5.4 63 5.4 64.8 5.5 66.7 5.4 68.6 5.4L68.6 39.4 61.9 39.4 61.9 24.9 43.2 24.9 43.2 39.4 36.5 39.4 36.5 5.5 43.1 5.5 43.1 18.9M72.4 39.4C72.7 38.8 72.8 38.4 73 37.9 78 27.5 83 17 87.9 6.5 88.3 5.7 88.7 5.4 89.6 5.4 91.2 5.5 92.7 5.4 94.3 5.5 94.7 5.5 95.3 5.8 95.5 6.2 100.7 17.1 105.9 28 111.1 39 111.1 39 111.1 39.1 111.1 39.4 108.7 39.4 106.4 39.4 104 39.3 103.8 39.3 103.5 38.9 103.4 38.6 102.5 36.8 101.7 35 101 33.2 100.7 32.5 100.3 32.3 99.6 32.3 94.4 32.3 89.2 32.3 84 32.3 83.3 32.3 82.9 32.5 82.7 33.2 81.9 35 81.1 36.8 80.2 38.6 80.1 38.9 79.5 39.3 79.1 39.3 77 39.4 74.8 39.4 72.4 39.4L72.4 39.4ZM98 26.6C95.9 21.8 93.9 17.3 91.8 12.4 89.7 17.3 87.7 21.9 85.6 26.6L98 26.6 98 26.6ZM32.5 39.3C24.9 39.3 17.6 39.5 10.3 39.3 4.2 39.2 0.5 35.2 0.4 29.1 0.4 24.5 0.4 20 0.5 15.4 0.5 9.5 4 5.6 9.9 5.4 17.2 5.1 24.6 5.3 31.9 5.3 32 5.3 32.2 5.3 32.4 5.4 31.2 7.3 30.1 9.1 28.9 10.9 28.7 11.2 28.1 11.2 27.7 11.2 22.9 11.3 18.1 11.3 13.3 11.3 12.9 11.3 12.6 11.3 12.2 11.3 8.9 11.3 7.5 12.7 7.5 16 7.5 20.1 7.5 24.2 7.5 28.4 7.5 31.7 8.9 33.1 12.3 33.1 17.2 33.2 22.1 33.2 27.1 33.1 28.2 33.1 28.9 33.5 29.4 34.5 30.3 36.1 31.4 37.6 32.5 39.3M238.1 12.4L236.9 12.4C228.4 12.4 219.8 12.4 211.3 12.5 210.2 12.5 209.8 12.2 209.8 11 209.9 8.1 209.8 5.1 209.8 2.2 209.8 0.5 210.3 0 211.9 0 216 0 220.2 0 224.3 0 224.8 0 225.4 0.2 225.8 0.5 229.8 4.3 233.7 8.1 237.7 11.9 237.8 12 237.9 12.2 238.1 12.4M227.3 42.8C227.3 42.3 227.3 42 227.3 41.6 227.3 33.1 227.3 24.5 227.3 15.9 227.2 14.8 227.6 14.4 228.7 14.5 231.6 14.5 234.5 14.5 237.4 14.5 239.1 14.5 239.5 14.9 239.5 16.5 239.5 20.7 239.5 24.9 239.5 29.2 239.4 29.7 239.2 30.4 238.8 30.8 235.2 34.7 231.6 38.5 228 42.3 227.8 42.4 227.6 42.6 227.3 42.8M197.2 32.2L198.5 32.2C206.9 32.2 215.4 32.2 223.9 32.2 225.4 32.2 225.4 32.2 225.4 33.7 225.4 36.6 225.5 39.5 225.4 42.3 225.4 43.9 224.9 44.4 223.4 44.4 219.1 44.4 214.9 44.4 210.7 44.4 210.2 44.4 209.6 44.2 209.3 43.9 205.4 40.2 201.5 36.5 197.6 32.7 197.5 32.6 197.4 32.5 197.2 32.2M207.5 1.8C207.5 2.3 207.6 2.7 207.6 3.1 207.6 11.6 207.5 20.1 207.6 28.6 207.6 29.8 207.3 30.2 206.1 30.1 203.1 30.1 200.2 30.1 197.3 30.1 195.8 30.1 195.4 29.7 195.4 28.2 195.4 23.9 195.3 19.7 195.4 15.4 195.4 14.9 195.6 14.3 195.9 13.9 199.5 10 203.2 6.1 206.9 2.3 207.1 2.1 207.2 2 207.5 1.8"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoChase", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoCiti", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(85.000000, 168.000000)">\n        <path d="M92.6 15.9C85.7 6 74.2 0.2 62.4 0.2 50.7 0.2 39.2 6 32.2 15.9L31.9 16.4 40.6 16.4 40.7 16.3C46.7 10.1 54.4 6.9 62.4 6.9 70.4 6.9 78.2 10.1 84.1 16.3L84.2 16.4 93 16.4 92.6 15.9M28.5 48.8L28.3 48.9C25.7 51.7 22.5 53.1 19.3 53.1 12.7 53.1 7.8 48.1 7.8 41.2 7.8 34.3 12.7 29.2 19.3 29.2 22.5 29.2 25.7 30.7 28.3 33.4L28.5 33.6 32.8 28.4 32.7 28.2C29.1 24 24.8 22 19.6 22 14.3 22 9.4 23.7 6 27 2.2 30.4 0.2 35.4 0.2 41.2 0.2 47 2.2 51.9 6 55.4 9.4 58.6 14.3 60.4 19.6 60.4 24.8 60.4 29.1 58.4 32.7 54.1L32.8 54 28.5 48.8 28.5 48.8ZM37.1 59.7L44.7 59.7 44.7 22.6 37.1 22.6 37.1 59.7ZM74.5 51.6C72.4 52.9 70.6 53.5 68.9 53.5 66.4 53.5 65.3 52.2 65.3 49.3L65.3 29.6 73 29.6 73 22.6 65.3 22.6 65.3 11 57.9 15 57.9 22.6 51.4 22.6 51.4 29.6 57.9 29.6 57.9 50.6C57.9 56.3 61.2 60.2 66.3 60.3 69.7 60.3 71.8 59.3 73 58.6L73.1 58.5 74.9 51.4 74.5 51.6 74.5 51.6ZM80.8 59.7L88.3 59.7 88.3 22.6 80.8 22.6 80.8 59.7ZM209.4 8.4L209.4 43.9 211.8 40.2C211.8 40.2 222.4 24.8 223.8 22.8L228.5 22.8C227.5 24.2 219.1 35.7 219.1 35.7 219.1 35.7 230 58.4 230.6 59.7L226 59.7C225.7 59.2 216.4 39.3 216.4 39.3L209.4 49.1 209.4 59.7 205.1 59.7 205.1 10.9C205.5 10.7 208.4 9 209.4 8.4L209.4 8.4ZM173.8 27.2C176.1 23.8 179.6 22 183.7 22 191.8 22 196.2 27.2 196.2 37.1L196.2 59.7 191.8 59.7 191.8 38C191.8 29.6 188.9 25.7 182.6 25.7 176.6 25.7 172.9 30.3 172.9 38L172.9 59.7 168.6 59.7 168.6 22.8 172.9 22.8 172.9 28.5 173.8 27.2 173.8 27.2ZM147.2 22C155.6 22 159.7 25.8 159.7 33.8L159.7 59.7 155.4 59.7 155.4 54.3 154.5 55.3C151.3 58.8 147.7 60.5 143.3 60.5 139.9 60.5 131.9 59.4 131.9 48.9 131.9 40.3 139 37.2 145.6 37.2 149 37.2 152.3 38 154.6 39.3L155.4 39.7 155.4 34.4C155.4 28.6 152.5 25.6 146.8 25.6 143.4 25.6 140.2 26.5 137 28.3 136.7 27.6 135.7 25.4 135.4 24.8 138.8 23 142.9 22 147.2 22L147.2 22ZM136.2 48.5C136.2 54 139 57.1 144.2 57.1 148.6 57.1 152.6 55 155.3 51.2L155.4 51 155.4 43 155.1 42.8C152.4 41.2 149.5 40.6 145.4 40.6 139.6 40.6 136.2 43.5 136.2 48.5L136.2 48.5ZM102.7 8.4L102.7 28.2 103.6 27.2C106.8 23.7 110.3 22 114.4 22 122.5 22 127.2 28.8 127.2 40.6 127.2 52.7 121.9 60.5 113.7 60.5 109.7 60.5 106.5 59 103.6 55.6L102.7 54.6 102.7 59.7 98.4 59.7 98.4 10.9C98.8 10.7 101.7 9 102.7 8.4L102.7 8.4ZM102.8 31.4L102.7 31.5 102.7 50.7 102.8 50.9C105.2 54.6 109.1 56.8 113.2 56.8 119.6 56.8 122.9 51.4 122.9 40.7 122.9 31.2 119.3 25.7 113 25.7 109.2 25.7 105.8 27.6 102.8 31.4L102.8 31.4ZM236.7 17.7C236.7 18.1 236.4 18.3 236 18.3L234.8 18.3 234.8 17.1 236 17.1C236.4 17.1 236.7 17.3 236.7 17.7L236.7 17.7ZM237.4 17.7C237.4 16.8 236.8 16.4 236 16.4L234.1 16.4 234.1 20.7 234.8 20.7 234.8 19.1 235.7 19.1 236.5 20.7 237.4 20.7 236.5 19C237 18.8 237.4 18.4 237.4 17.7L237.4 17.7ZM239.6 18.6C239.6 16.4 237.9 14.6 235.6 14.6 233.3 14.6 231.6 16.4 231.6 18.6 231.6 20.9 233.3 22.6 235.6 22.6 237.9 22.6 239.6 20.9 239.6 18.6L239.6 18.6ZM238.9 18.6C238.9 20.5 237.5 22 235.6 22 233.7 22 232.3 20.5 232.3 18.6 232.3 16.7 233.7 15.3 235.6 15.3 237.5 15.3 238.9 16.7 238.9 18.6L238.9 18.6Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoCiti", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoFidelity", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(80.000000, 174.000000)">\n        <path d="M21.47 29.76L30.34 29.76 32.94 31.45 21.08 31.45 15.75 47.96C9.87 45.68 4.43 40.37 2.15 34.41 -0.28 28.64-0.28 21.38 2.2 15.58 4.53 9.62 10.13 4.24 16.09 2.02 20.78 0.07 27.06-0.13 32.03 1.4 37.74 3.04 43.13 7.15 46.26 12.51 49.77 18.39 50.75 25.85 48.62 32.56 47.28 37.02 44.5 41.28 40.69 44.33L34.14 33.37 43.26 38.48C43.31 38.48 43.33 38.42 43.31 38.37L31.36 28.02 46.81 30.38C46.86 30.38 46.88 30.36 46.88 30.33L46.79 30.25 32.22 25.13 47.36 21.46C47.41 21.46 47.41 21.41 47.38 21.38L31.85 22.4 44.01 13.16C44.04 13.11 43.93 13.08 43.91 13.13L30.25 20.08 37.79 6.73C37.79 6.71 37.79 6.66 37.74 6.68L27.89 18.29 29.78 3.04C29.78 3.01 29.73 2.99 29.67 3.01L25.14 17.82 21.18 2.57C21.15 2.55 21.1 2.52 21.07 2.57L22.16 18.39 12.81 6.16C12.78 6.14 12.75 6.16 12.73 6.19L19.8 19.71 6.43 12.38C6.4 12.38 6.35 12.41 6.35 12.43L18.25 22.24 3.06 20.63C3.01 20.65 3.01 20.7 3.06 20.73L17.78 25.05 3.14 29.37C3.11 29.39 3.11 29.44 3.14 29.47L18.25 27.7 6.37 37.82C6.35 37.82 6.32 37.87 6.37 37.9L6.53 37.85 16.04 32.85 18.27 29.29 20.81 29.29 19.05 28.04 24.93 18.57 21.46 29.76 21.47 29.76"/>\n        <path d="M65.27 42.23L53.42 42.23 62.91 8.23 87.2 8.23 84.89 16.3 72.49 16.3 70.9 22.09 83.3 22.09 81.21 29.52 68.81 29.52 65.27 42.23 65.27 42.23Z"/>\n        <path d="M92.7 42.23L80.98 42.23 87.93 17.39 99.64 17.39 92.7 42.23 92.7 42.23ZM100.28 15.02L88.57 15.02 90.47 8.23 102.19 8.23 100.28 15.02 100.28 15.02Z"/>\n        <path d="M123.09 42.23L111.6 42.23 112.42 39.45C110.1 41.41 107.74 42.82 103.97 42.82 100.16 42.82 97.75 41 97.75 37.13 97.75 32.84 99.43 26.46 101.93 22 103.75 18.67 107.01 16.94 110.87 16.94 114.19 16.94 116.64 18.4 117.6 20.22L120.87 8.23 132.58 8.23 123.09 42.23 123.09 42.23ZM114.28 24.78C113.23 24.78 112.19 25.1 111.6 26.55 110.74 28.65 109.97 30.7 109.97 32.75 109.97 33.71 110.65 34.53 111.78 34.53 112.69 34.53 113.28 34.26 113.78 33.94L116.14 25.78C115.73 25.18 115.01 24.78 114.28 24.78L114.28 24.78Z"/>\n        <path d="M156.17 31.38L140 31.38C139.68 32.7 139.37 33.62 139.37 34.66 139.37 35.17 139.46 36.44 141.09 36.44 142.73 36.44 143.45 35.8 144.14 33.39L155.62 33.39C154.17 40.45 145.82 42.87 140.68 42.87 133.74 42.87 128.33 41.87 128.33 35.17 128.33 31.48 130.19 25.37 132.65 22.13 135.6 18.26 140.73 16.8 145.45 16.8 152.72 16.8 157.44 18.31 157.44 24.5 157.44 26.01 156.8 29.33 156.17 31.38M144.45 23.05C143 23.05 142 24.05 141.37 26.55L146.18 26.55C146.31 26.05 146.5 25.28 146.5 24.82 146.5 23.46 145.68 23.05 144.45 23.05"/>\n        <path d="M167.94 42.23L156.23 42.23 165.72 8.23 177.43 8.23 167.94 42.23 167.94 42.23Z"/>\n        <path d="M183.42 42.23L171.7 42.23 178.65 17.39 190.37 17.39 183.42 42.23 183.42 42.23ZM191 15.02L179.29 15.02 181.19 8.23 192.91 8.23 191 15.02 191 15.02Z"/>\n        <path d="M212.06 17.39L213.08 23 204.12 23 201.48 32.43C201.26 33.16 201.07 34.07 201.07 34.67 201.07 35.76 201.53 36.13 203.12 36.13L205.62 36.13 203.89 42.23 193.45 42.23C189.99 42.23 188.68 40.55 188.68 37.99 188.68 36.95 188.81 35.8 189.18 34.53L195.53 11.88 207.25 11.88 205.7 17.39 212.06 17.39"/>\n        <path d="M53.18 46.05L56.1 46.05 54.24 52.16 51.33 52.16 53.18 46.05 53.18 46.05Z"/>\n        <path d="M63.37 46.06L67.65 46.05 68.74 50.13 68.77 50.13 70.01 46.05 72.54 46.05 70.67 52.15 66.58 52.17 65.4 47.81 65.38 47.81 64.08 52.16 61.54 52.16 63.37 46.06 63.37 46.06Z"/>\n        <path d="M78.08 46.06L81.29 46.06 81.86 49.9 84.8 46.05 87.77 46.05 82.87 52.15 79.3 52.16 78.08 46.06 78.08 46.06Z"/>\n        <path d="M93.37 46.06L100.01 46.06 99.64 47.29 95.82 47.3 95.45 48.55 99.03 48.55 98.67 49.73 95.09 49.73 94.72 50.94 98.58 50.93 98.19 52.17 91.51 52.18 93.37 46.06 93.37 46.06Z"/>\n        <path d="M121.9 47.55L119.63 47.55 120.08 46.07 127.54 46.06 127.09 47.54 124.82 47.55 123.42 52.15 120.51 52.15 121.9 47.55 121.9 47.55Z"/>\n        <path d="M133.58 46.05L138.01 46.05 138.22 50.13 138.24 50.13 140.88 46.05 145.32 46.04 143.48 52.16 140.77 52.16 142.16 47.56 142.14 47.56 138.85 52.16 136.03 52.17 135.63 47.56 135.6 47.56 134.21 52.15 131.74 52.15 133.58 46.05 133.58 46.05Z"/>\n        <path d="M163.91 46.06L168.18 46.05 169.28 50.13 169.31 50.13 170.54 46.05 173.08 46.05 171.22 52.17 167.08 52.15 165.93 47.81 165.91 47.81 164.59 52.16 162.05 52.16 163.91 46.06 163.91 46.06Z"/>\n        <path d="M180.08 47.54L177.8 47.54 178.25 46.06 185.72 46.05 185.27 47.54 182.99 47.54 181.6 52.15 178.68 52.16 180.08 47.54 180.08 47.54Z"/>\n        <path d="M108.96 47.91C108.9 47.84 108.9 47.72 108.92 47.63 109.02 47.32 109.4 47.12 110.02 47.12 110.38 47.11 110.94 47.16 111.1 47.28 111.27 47.41 111.33 47.6 111.27 47.78L113.85 47.78C114.16 46.69 113.47 45.98 110.55 45.99 107.78 45.99 106.21 46.59 105.8 47.92 105.7 48.27 105.69 48.69 105.97 48.98 106.69 49.7 109.91 49.98 110.18 50.36 110.24 50.44 110.26 50.54 110.23 50.65 110.08 51.14 109.39 51.26 108.78 51.26 108.4 51.26 107.9 51.18 107.75 51.02 107.62 50.86 107.62 50.61 107.7 50.46L104.99 50.46C104.72 51.41 104.6 52.39 108.37 52.39 111.52 52.39 112.97 51.61 113.33 50.41 113.51 49.82 113.33 49.49 113.13 49.28 112.43 48.55 109.3 48.29 108.96 47.91"/>\n        <path d="M151.27 46.06L157.91 46.06 157.53 47.29 153.71 47.3 153.34 48.55 156.93 48.55 156.57 49.73 152.99 49.73 152.62 50.94 156.48 50.94 156.09 52.17 149.41 52.18 151.27 46.06 151.27 46.06Z"/>\n        <path d="M227.88 17.39L221.52 31.16 221.7 17.39 209.85 17.39 212.12 42.23C211.83 43.69 211.35 44.51 210.44 44.91 209.45 45.35 207.2 45.28 206.41 45.23L206.26 45.24 204.4 51.99 212.39 52C217.12 52 219.43 49.61 222.79 44.33L239.87 17.39 227.88 17.39"/>\n        <path d="M193.29 47.89C193.23 47.82 193.23 47.71 193.25 47.62 193.35 47.3 193.73 47.1 194.35 47.1 194.71 47.1 195.27 47.14 195.43 47.27 195.6 47.39 195.66 47.58 195.6 47.76L198.18 47.76C198.49 46.67 197.8 45.97 194.88 45.97 192.11 45.97 190.54 46.57 190.13 47.9 190.03 48.25 190.01 48.68 190.3 48.97 191.02 49.68 194.24 49.97 194.51 50.35 194.57 50.43 194.59 50.52 194.56 50.63 194.41 51.12 193.72 51.25 193.11 51.25 192.73 51.25 192.23 51.16 192.08 51 191.95 50.84 191.95 50.6 192.03 50.44L189.32 50.44C189.05 51.39 188.93 52.38 192.7 52.38 195.85 52.37 197.3 51.6 197.66 50.39 197.84 49.8 197.66 49.47 197.46 49.26 196.76 48.54 193.63 48.27 193.29 47.89"/>\n        <path d="M229.72 41.78C228.55 41.78 227.6 40.82 227.6 39.65 227.6 38.47 228.55 37.52 229.72 37.52 230.9 37.52 231.85 38.47 231.85 39.65 231.85 40.82 230.9 41.78 229.72 41.78M229.72 37.06C228.3 37.06 227.14 38.22 227.14 39.65 227.14 41.07 228.3 42.23 229.72 42.23 231.14 42.23 232.3 41.07 232.3 39.65 232.3 38.22 231.14 37.06 229.72 37.06"/>\n        <path d="M229.28 39.47L229.28 38.72 229.64 38.72C229.94 38.71 230.27 38.73 230.27 39.09 230.27 39.45 229.94 39.47 229.64 39.47L229.28 39.47 229.28 39.47ZM230.76 39.11C230.76 38.6 230.46 38.3 229.82 38.3L228.82 38.3 228.82 40.98 229.28 40.98 229.28 39.88 229.64 39.88 230.3 40.98 230.81 40.98 230.12 39.84C230.48 39.8 230.76 39.57 230.76 39.11L230.76 39.11Z"/>\n        <path d="M227.86 17.45L221.52 31.17 221.7 17.45 209.89 17.45 212.16 42.21C211.87 43.66 211.39 44.47 210.48 44.88 209.49 45.32 207.25 45.24 206.46 45.19L206.32 45.2 204.46 51.93 212.43 51.94C217.13 51.94 219.44 49.56 222.79 44.3L239.8 17.45 227.86 17.45 227.86 17.45Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoFidelity", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoPnc", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(85.000000, 168.000000)">\n        <path d="M47.3 36.1L40.2 36.1C40.5 35.4 40.3 34.3 39.7 33.1L35.7 26.5 29 14.8C29 14.8 26.5 10 22.8 7.2 25.2 8.1 55.1 25.6 55.1 25.6 60 28.5 64.3 36 47.3 36.1L47.3 36.1ZM24.7 54.9C19.9 57.7 11.1 57.7 19.6 42.9 21 40.4 23.1 36.7 23.1 36.7 23.7 37.4 24.6 37.9 25.9 37.9L47.3 37.9C47.3 37.9 52.6 38 56.9 36.3 55 37.7 24.7 54.9 24.7 54.9L24.7 54.9ZM14.5 14C14.5 8.4 19 0.8 27.6 15.5 29 18.2 31.1 21.7 31.1 21.7 30.2 21.9 29.5 22.5 28.7 23.7L24.9 30.5 18.1 42C18.1 42 15.3 46.6 14.7 51.4 14.4 48.7 14.5 14 14.5 14L14.5 14ZM31.6 0.1C14.1 0.1 0 14.2 0 31.7 0 49.1 14.1 63.4 31.6 63.4 49 63.4 63.3 49.1 63.3 31.7 63.3 14.2 49 0.1 31.6 0.1L31.6 0.1ZM86.7 57L94.7 57 94.7 34.8 99 34.8C110.2 34.8 125.2 33.9 125.2 21 125.2 7.9 111.1 6.9 99.9 6.9L77.4 6.9 77.4 8.2C85.4 9.1 86.7 10.3 86.7 14.9L86.7 57 86.7 57ZM94.7 14.9C94.7 10.5 95.1 9.9 102.7 9.9 111 9.9 116 13.6 116 21 116 30.6 107.4 32 98.7 32L94.7 32 94.7 14.9 94.7 14.9ZM133.8 15.8C133.8 9.7 132.5 9.3 124.5 8.2L124.5 6.9 143.1 6.9 172.3 47.7 172.5 47.7 172.5 6.9 177.4 6.9 177.4 57 170.3 57 138.8 13.4 138.7 13.4 138.7 57 133.8 57 133.8 15.8M229.8 55.7C225.4 56.9 221.1 57.7 212.3 57.7 194.9 57.7 185.4 45.4 185.4 30.3 185.4 16.8 191 6.2 210.1 6.2 224.2 6.2 229.2 12.1 229.8 17.1L220.8 17.1C220.3 14.8 218.7 9.6 209.5 9.6 199.6 9.6 194.4 17 194.4 28.4 194.4 38.9 197.1 54.5 217.5 54.5 223 54.5 228.8 52.8 229.8 52.6L229.8 55.7M57.1 59.8L57.6 59.8C58.2 59.8 58.5 59.5 58.5 59 58.5 58.5 58.2 58.3 57.6 58.3 57.3 58.3 57.2 58.3 57.1 58.3L57.1 59.8 57.1 59.8ZM56.5 57.9C56.8 57.9 57.2 57.9 57.6 57.9 58.1 57.9 58.5 58 58.8 58.2 59 58.4 59.1 58.7 59.1 59 59.1 59.5 58.7 59.9 58.3 60L58.3 60C58.6 60.2 58.8 60.4 58.9 60.9 59 61.4 59.1 61.8 59.2 62L58.7 62C58.6 61.9 58.5 61.5 58.4 61 58.3 60.4 58.1 60.2 57.6 60.2L57.1 60.2 57.1 62 56.5 62 56.5 57.9 56.5 57.9ZM54.9 60C54.9 61.6 56.2 62.9 57.8 62.9 59.4 62.9 60.7 61.6 60.7 60 60.7 58.3 59.4 57.1 57.8 57 56.2 57.1 54.9 58.3 54.9 60L54.9 60ZM54.3 60C54.3 58.1 55.9 56.5 57.8 56.5 59.6 56.5 61.2 58.1 61.2 60 61.2 61.8 59.6 63.4 57.8 63.4 55.9 63.4 54.3 61.8 54.3 60L54.3 60Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoPnc", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoSchwab", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(100.000000, 148.000000)">\n        <path d="M192.9 45.7C192.9 51.7 186 57.2 179.8 57.2 175.8 57.2 172.5 54.6 172.5 53.1 172.5 52.2 172.8 49.1 174.1 49.1 176.4 49.1 178.5 53.9 182.9 53.9 185.7 53.9 188.3 52 188.3 49.2 188.3 45.2 181.4 41.4 181.4 35.1 181.4 28.5 188.5 20.4 195 20.4 198.2 20.4 199.6 22.4 199.6 24 199.6 25.4 198.4 27 196.7 27 194.1 27 192.6 25.1 190 25.1 187.2 25.1 185.6 27 185.6 30.1 185.6 34.9 192.9 39.2 192.9 45.7M62.4 47.4C58.8 51.7 53.7 57.1 48.7 57.1 46.7 57.1 46.1 56.1 46.1 54.5 46.1 50.1 55.2 34.9 55.2 29.2 55.2 27.4 54.6 26.5 52.7 26.5 47 26.5 35.4 41.2 31.2 55.2 30.9 56.1 30.2 56.4 28.1 56.4 25.9 56.4 25.5 56.1 25.5 55.3 25.5 53.8 33.8 33.6 37.6 22.6 40.9 13.2 43.6 6 43.6 4.1 43.6 3.1 43.1 2.5 41.3 2.2 40.7 2.1 39.3 2.1 38.9 2 38.9 2 38.8 1.9 38.8 1.8L38.8 0.4C38.8 0.3 38.9 0.2 39 0.2L49.7 0.2C50.7 0.2 50.9 0.4 50.9 1 50.9 1.7 48.5 9.1 43.3 22.6 39.6 32.1 37.7 35.7 38.5 35.7 39.5 35.7 48.5 20.5 56.1 20.5 59.2 20.5 61.2 22.5 61.2 26.9 61.2 34.1 53.9 48.4 53.9 50.1 53.9 50.8 54.3 51.1 55.2 51.1 56.6 51.1 59.7 47.7 61.2 46.1 61.3 46 61.5 46 61.5 46.1L62.4 47.1C62.5 47.2 62.4 47.3 62.4 47.4M24.1 48.8C23.2 50.6 17.3 57.1 10 57.1 2.7 57.1 0.2 51.6 0 46.9 -0.7 32.6 16.1 20.5 25.7 20.5 30.6 20.5 32.4 23.6 32.6 25.9 32.6 27.4 31.4 28.5 30.3 28.5 27.4 28.5 26.5 22.6 22.7 22.6 17.1 22.6 6 38.4 6.4 46.9 6.6 51.5 9.8 53.5 12.7 53.5 16 53.5 18.9 51.2 20.7 49.8 21.7 49 22.9 47.8 23.1 47.7 23.2 47.6 23.3 47.7 23.4 47.7L24.1 48.6C24.1 48.6 24.1 48.7 24.1 48.8M103.3 30.7L104 31.5C104.1 31.6 104.2 31.6 104.3 31.5 104.4 31.4 104.5 31.2 104.6 31.1 105.9 29.5 108.8 25.7 110.4 25.7 111.2 25.7 111.6 26.5 111.6 27.9 111.6 33.1 103.1 54.1 103.1 55.6 103.1 56.3 103.3 56.6 103.9 56.6L107.1 56.6C107.7 56.6 107.9 56.2 108.3 55.2 108.3 55.2 109.9 51.5 110.8 49.6 117.4 36.2 120.7 29.9 123.3 27.4 128.9 21.9 128.2 27.2 130.9 27.3 132.7 27.5 133.8 25.5 133.8 23.4 133.8 20.9 132.1 20.2 130.8 20.2 125.6 20.2 122.1 25 115.6 36.3 115.1 37.2 114.8 37.7 114.5 37.7 114.4 37.7 114.1 37.6 114.1 37.1 114.1 36.2 117.1 25.3 117.1 23.2 117.1 21.3 116.2 20.6 114.5 20.6 111.4 20.6 105.2 27.3 103.3 30.5 103.2 30.5 103.2 30.6 103.3 30.7M98.9 21.3L97 20.1C96.7 20 96.4 19.8 96.2 19.8 95.1 20.2 95 21.9 93.8 21.9 92.5 21.9 91.2 21.3 88.7 21.3 72.6 21.3 64.4 43 64.4 50.2 64.4 54.9 66.9 57.2 69.8 57.2 73.5 57.2 77.8 55.3 83.5 47 85 44.9 85 44.4 85.4 44.4 85.7 44.4 85.8 44.7 85.8 45.1 85.8 45.8 83.4 50.3 83.4 53.9 83.4 56.2 84.3 57.2 86.1 57.2 90.7 57.2 96.1 50.4 98.1 47.4 98.1 47.3 98.1 47.2 98.1 47.2L97.2 46.2C97.1 46.1 97 46.1 96.9 46.2 95.1 48 92.1 52.3 90.5 52.3 89.7 52.3 89.4 52 89.4 50.7 89.4 47.7 99.2 23.9 99.4 22.2 99.4 21.9 99.3 21.5 98.9 21.3L98.9 21.3ZM73 52.1C71.4 52.1 70.4 51.3 70.4 48.4 70.4 38.4 78.8 23.1 87.2 23.1 90.3 23.1 91.6 25.4 91.6 27.8 91.6 32.2 80.1 52.1 73 52.1L73 52.1ZM170.3 48.6L169.5 47.8C169.4 47.7 169.3 47.7 169.3 47.7 167.5 49 163.2 52.8 159 52.8 155.2 52.8 153 50.2 153 46.6 153 41.7 155.3 38 156.9 35.4 158.1 35.5 159 35.6 161 35.6 166.6 35.6 178 33.1 178 26.2 178 23.3 175.5 20.4 170.9 20.4 160.8 20.4 146 34.3 146 47.4 146 53.3 149.9 57.2 155.4 57.2 162 57.2 168.6 51.1 170.3 48.9 170.4 48.8 170.3 48.7 170.3 48.6L170.3 48.6ZM158.1 33.4C159.2 31.3 164.9 22.3 169.7 22.3 171.6 22.3 172.9 23.9 172.9 25.7 172.9 30.7 166.6 33.3 158.1 33.4L158.1 33.4ZM143.4 47.5C140.4 51.3 135.7 57.2 131.5 57.2 128.6 57.2 127.2 55.5 127.3 52.4 127.5 47.8 137 24.4 137.7 22.7 141.5 13.3 144.4 6.1 144.5 4.2 144.6 3.1 144 2.5 142.3 2.3 141.6 2.1 140.3 2.1 139.9 2 139.8 2 139.8 1.9 139.8 1.9L139.8 0.4C139.8 0.3 139.9 0.2 140 0.2L150.8 0.2C151.7 0.2 152 0.4 151.9 1 151.9 1.7 148.9 9.1 143.6 22.8 139 34.9 134.3 48.1 134.1 50.5 134.1 51.5 134.4 51.9 135.4 51.9 136.9 51.9 138.8 49.9 142.2 46.1 142.2 46.1 142.4 46.1 142.5 46.2L143.4 47.3C143.4 47.3 143.5 47.4 143.4 47.5M18 79.3C17.1 76.4 15.5 72.9 11.3 72.9 8 72.9 6.2 75.3 6.2 78.1 6.2 80.9 8.2 82.8 12 84.6L13.3 85.2C17.3 86.9 20.9 89.6 20.9 94.8 20.9 100.8 16.2 105 9.4 105 7.5 105 5.7 104.6 4.4 104.1 3 103.7 2.1 103.3 1.5 103.1 1.1 101.8 0.5 98.4 0 95.3L1.5 94.8C2.5 97.4 5.2 103 10.4 103 13.6 103 15.7 100.4 15.7 97.3 15.7 94.5 14.3 92.5 10.3 90.5L8.7 89.7C5.4 88 1.2 85.4 1.2 80.4 1.2 75.2 5.2 70.9 11.9 70.9 13.2 70.9 15 71.1 16.5 71.6 17.3 71.9 18 72 18.6 72.2 18.8 74 19.1 76.2 19.6 79L18 79.3M52.9 80.3C51.3 74.6 48.1 72.9 43.4 72.9 35.1 72.9 31.3 79.7 31.3 87.2 31.3 96.5 36 103 43.4 103 48.9 103 51.4 100.2 54 94.8L55.5 95.1C54.9 97.6 53.7 101.6 52.9 103.5 51.5 103.9 46.9 105 43.4 105 30.1 105 24.7 96.4 24.7 88.5 24.7 77.9 32.9 70.9 44.3 70.9 48.7 70.9 52 71.9 53.4 72.2 53.8 75 54 77.2 54.3 80.1L52.9 80.3M72.1 71.4L72.1 72.8C68.4 73.1 68 73.5 68 78.9L68 85.6 83.3 85.6 83.3 78.9C83.3 73.5 82.9 73.1 79 72.8L79 71.4 93.4 71.4 93.4 72.8C89.3 73.1 88.9 73.5 88.9 78.9L88.9 96.4C88.9 101.8 89.3 102.2 93.3 102.5L93.3 103.9 78.6 103.9 78.6 102.5C82.9 102.2 83.3 101.8 83.3 96.4L83.3 87.9 68 87.9 68 96.4C68 101.8 68.4 102.2 72.3 102.5L72.3 103.9 57.9 103.9 57.9 102.5C61.9 102.2 62.3 101.8 62.3 96.4L62.3 78.9C62.3 73.5 61.9 73.1 57.7 72.8L57.7 71.4 72.1 71.4M121.1 71.8L130 95.7 130.1 95.7C131.9 89.5 134.4 80.1 135.2 76.9 136 73.8 135.6 73.1 133.4 72.9 133.1 72.9 131.7 72.8 131.7 72.8L131.7 71.4 143.3 71.4 143.3 72.8C140.1 73.1 139.6 73.4 138 77.9 137.3 80 133.7 90.5 129.5 104.4L127.2 104.4 118.6 80.9 118.5 80.9 110.6 104.4 108.4 104.4 100 77.7C98.6 73.4 97.7 73.1 95 72.8L95 71.4 108.7 71.4 108.7 72.8C108.7 72.8 107.4 72.9 107.1 72.9 105.3 73.2 104.7 73.5 105.5 76.1L111.3 95.7 111.4 95.7 119.2 71.8 121.1 71.8M153.3 78.9L153.4 78.9 157.4 90 149.3 90 153.3 78.9 153.3 78.9ZM154.1 71.1L143.9 97.3C142.1 101.9 141.5 102.1 138.4 102.5L138.4 103.9 149.6 103.9 149.6 102.5 148.2 102.3C146 102.1 145.6 101.4 146.5 98.8 147.2 96.6 148.1 93.8 148.8 92.3L158.1 92.3C159.2 94.9 160.4 98.1 160.9 99.6 161.5 101.5 161.4 102 159.5 102.3L158.1 102.5 158.1 103.9 171.4 103.9 171.4 102.5C168.4 102.2 167.7 101.8 166 97.3 164.1 92.3 161.9 86.1 159.6 79.9L156.2 70.9 154.1 71.1 154.1 71.1ZM183 75.8C183 74.6 183 73.8 183.4 73.6 183.7 73.4 184.4 73.3 185.7 73.3 188.8 73.3 192.1 74.8 192.1 79.4 192.1 83.6 189.4 85.6 185 85.6L183 85.6 183 75.8 183 75.8ZM173.3 71.4L173.3 72.8C177 73.1 177.4 73.5 177.4 78.9L177.4 96.4C177.4 101.8 177 102.2 173 102.5L173 103.9 185.6 103.9C189.4 103.9 193 103.3 195.3 101.9 198.1 100.2 199.9 97.9 199.9 94.3 199.9 89.3 196 86.6 190.8 86L190.8 85.9C193.8 85.3 198 83 198 78.8 198 76.1 197 74.3 195.1 73.1 193.3 71.9 191.3 71.4 187.3 71.4L173.3 71.4 173.3 71.4ZM184.7 87.4C189.9 87.4 193.6 89.8 193.6 94.9 193.6 100 190.2 101.9 186.8 101.9 183.6 102 183 101 183 96.3L183 87.4 184.7 87.4 184.7 87.4Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoSchwab", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoSvb", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(100.000000, 169.000000)">\n        <path d="M150.1 32.3C158.4 37.9 158.6 49 150.8 55.8 146.2 59.8 140.6 61.3 134.5 61 125.9 60.7 117.3 60.6 108.7 60.8 107.9 60.8 107 61.1 106.2 61.1 104.7 61.2 103.8 60.6 103.7 59 103.5 57.3 104.3 56.4 105.9 56.3 107.3 56.2 108.6 56.3 110 56.2 112.4 56 113.4 55 113.9 52.6 114.2 51.2 114.3 49.8 114.3 48.4 114.2 36.8 114.3 25.2 114.2 13.6 114.2 7.3 113.1 6.2 106.7 6.1 105.2 6.1 103.8 6.1 103.7 4 103.7 2.3 104.6 1.5 106.8 1.6 110.1 1.7 113.3 1.9 116.5 2 123 2.1 129.4 1.2 135.8 1.6 140.7 1.8 145.4 3 149.1 6.7 154.9 12.5 154.3 20.7 147.5 25.5 145.7 26.8 143.6 27.7 141.2 28.7 144.6 29.6 147.5 30.6 150.1 32.3ZM124.7 41.9L124.7 41.9C124.7 44.6 124.6 47.3 124.7 50 124.8 52.3 125.6 54.3 128 55.2 132.1 56.8 136.1 56.5 139.8 53.9 143.6 51.1 145.2 45.5 143.9 40.7 142.6 36.2 138 32.4 133.2 31.9 131.1 31.7 128.9 31.9 126.7 31.8 125.1 31.7 124.6 32.4 124.7 33.9 124.7 36.6 124.7 39.3 124.7 41.9L124.7 41.9ZM124.7 17.6L124.7 17.6C124.7 20.1 124.7 22.7 124.7 25.2 124.7 26.1 124.7 26.9 125.9 27 129.3 27.1 132.5 27.1 135.7 25.6 141.2 23.1 143.4 16.8 140.5 11.4 138.5 7.5 131.3 4.9 127.2 6.4 125.5 7.1 124.7 8.4 124.7 10.2 124.7 12.6 124.7 15.1 124.7 17.6L124.7 17.6ZM16.6 61.9C12.2 62.1 7.7 61.4 3.4 59.5 2.2 58.9 1.6 58.2 1.4 56.9 1.1 53.7 0.7 50.5 0.3 47.3 0.2 46 0.3 44.8 2 44.7 3.5 44.6 4.4 45.1 4.8 46.6 6.4 52.1 9.7 55.7 15.5 56.9 23.1 58.4 28.9 53.1 27.8 45.4 27.4 42.4 25.4 40.6 23 39 19.4 36.6 15.3 34.9 11.5 32.8 7.3 30.4 3.4 27.7 1.6 23.1 -1.9 14.2 2.6 4.5 11.6 1.6 19-0.8 26.3 0.2 33.4 2.8 34.2 3.1 34.9 3.6 34.9 4.6 35 8.1 35.1 11.5 35.3 15 35.3 16.1 35 17.2 33.7 17.3 32.4 17.4 31.3 17.1 30.8 15.6 30.1 13 29 10.6 27 8.7 23.6 5.5 18.4 4.6 14.2 6.8 9 9.5 8.5 16.1 13.3 20 15.3 21.6 17.5 22.8 19.8 23.9 24.2 26.2 28.7 28.3 32.6 31.6 40.2 37.8 40.3 50.6 32.8 56.7 27.9 60.8 24.3 61.9 16.6 61.9M73.5 45.5C75.7 39.4 77.8 33.8 79.9 28.2 81.5 24.1 83.1 20.1 84.6 16 85 15.1 85.3 14.3 85.6 13.4 87.5 7.8 86.7 6.5 80.7 6.1 79.1 6 78.3 5.2 78.4 3.8 78.4 2.2 79.3 1.5 80.9 1.6 83 1.7 85.1 1.9 87.2 2 90.6 2.1 94.1 1.9 97.5 1.6 99 1.4 100.2 1.8 100.3 3.6 100.4 5.2 99.7 6.1 97.9 6.1 96.4 6.2 95.2 7.1 94.4 8.5 92 12.2 90.3 16.4 88.8 20.5 83.9 33.5 79 46.5 74.2 59.5 73.7 60.7 73.3 61.9 71.7 61.9 70 62 69.3 61.1 68.8 59.7 62.1 43.9 55.3 28.2 48.7 12.4 47.2 8.6 45.1 5.9 40.6 6 39.2 6.1 38.9 5 38.9 3.9 38.9 2.7 39.2 1.6 40.8 1.6 43.4 1.4 46 1.8 48.6 2 53.6 2.2 58.7 1.6 63.8 1.5 65.4 1.5 66.3 2 66.3 3.8 66.3 5.6 65.4 6.1 63.8 6.1 58.6 6.2 58.1 6.9 59.9 11.7 63.3 20.2 66.9 28.8 70.4 37.3 71.4 39.8 72.3 42.4 73.5 45.5M199.6 31.4C199.8 32.8 199 33.7 198 34.6 192.7 39.6 187.4 44.5 182.2 49.6 178.4 53.2 174.7 56.9 171.1 60.6 169.7 62.2 168.4 62.1 166.9 61 165.3 59.8 165.3 58.7 166.3 57 170 50.8 173.8 44.5 177.2 38.1 179.6 33.6 179.4 29.3 177.1 24.8 173.7 18.3 170 12 166.3 5.7 165.1 3.6 165.5 2.5 167.6 1.5 168.8 0.9 169.8 1 170.8 2 176.7 8.1 182.7 14.1 188.9 19.8 192 22.6 195 25.4 198.1 28.2 199 29 199.8 30 199.6 31.4"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoSvb", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoUs", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(80.000000, 180.000000)">\n        <path d="M0 0.1L0 46.7 39.5 60.2 79 46.7 79 0.1 0 0.1ZM39.4 45.3L27.4 45.3 27.4 41.1 27.2 41.1C24.9 44.4 21.6 46.1 16.6 46.1 10.7 46.1 5.3 42.5 5.3 35L5.3 12.5 17.8 12.5 17.8 29.7C17.8 33.5 18.3 36.1 21.9 36.1 24.1 36.1 26.9 35 26.9 29.8L26.9 12.5 39.4 12.5 39.4 45.3ZM62.7 22C62.7 20.9 62.1 20.1 61.3 19.6 60.5 18.9 59.5 18.6 58.5 18.6 56.7 18.6 54.7 19 54.7 21.1 54.7 22.1 55.5 22.5 56.2 22.8 58.3 23.7 63 24 67.2 25.4 71.3 26.7 75 29.2 75 34.5 75 43.6 66.3 46.1 58.3 46.1 50.6 46.1 42.2 43 42 34.5L53.9 34.5C54 35.7 54.5 36.6 55.4 37.4 56 38 57.2 38.4 58.8 38.4 60.4 38.4 63 37.7 63 35.9 63 34 61.9 33.4 56.1 32.4 46.6 30.7 42.7 27.7 42.7 22.1 42.7 13.8 51.6 11.7 58.2 11.7 65.3 11.7 73.8 13.6 74.1 22L62.7 22ZM101 20.8C96.5 20.8 95.5 25 95.5 28.8 95.5 32.8 96.5 37 101 37 105.4 37 106.5 32.8 106.5 28.8 106.5 25 105.4 20.8 101 20.8M83.4 0.2L95.9 0.2 95.9 16.1 96 16.1C97.9 13.3 101.3 11.7 105 11.7 116 11.7 119 21 119 28.7 119 36.9 114.5 46.1 105.2 46.1 99.1 46.1 97.2 43.7 95.6 41.7L95.5 41.7 95.5 45.3 83.4 45.3 83.4 0.2M141.8 30.5C140.3 31.3 138.6 31.7 136.9 32.1 134.1 32.8 132.7 33.5 132.7 35.7 132.7 37.2 134.3 38.7 136.6 38.7 139.4 38.7 141.6 37 141.8 33.6L141.8 30.5 141.8 30.5ZM153.8 37.9C153.8 40.4 153.9 43.2 155.3 45.3L142.6 45.3C142.3 44.4 142.1 43.1 142.1 42.2L142 42.2C139.4 45.2 135.5 46.1 131.5 46.1 125.2 46.1 119.9 43.1 119.9 36.2 119.9 25.8 132 26.2 138.4 25 140.1 24.7 141.8 24.2 141.8 22.1 141.8 19.9 139.7 19.1 137.7 19.1 133.9 19.1 133.1 21 133 22.4L121.4 22.4C121.8 13.2 130.5 11.7 138.3 11.7 153.9 11.7 153.8 18.2 153.8 24.5L153.8 37.9 153.8 37.9ZM158.3 12.5L170.4 12.5 170.4 16.7 170.5 16.7C172.8 13.4 176.2 11.7 181.2 11.7 187 11.7 192.4 15.3 192.4 22.8L192.4 45.3 179.9 45.3 179.9 28.1C179.9 24.3 179.5 21.6 175.8 21.6 173.7 21.6 170.8 22.7 170.8 28L170.8 45.3 158.3 45.3 158.3 12.5M196.8 0.2L209.3 0.2 209.3 22 217.3 12.5 231.4 12.5 219.8 24.9 233.3 45.3 218.2 45.3 211.6 33.4 209.3 35.8 209.3 45.3 196.8 45.3 196.8 0.2M236 44.1L236.5 44.1 236.5 42.8 236.9 42.8C237.2 42.8 237.4 42.9 237.6 42.9 237.8 43.1 237.9 43.3 237.9 43.7L237.9 43.9 237.9 44 237.9 44 237.9 44.1 238.4 44.1 238.4 44 238.3 43.9 238.3 43.6 238.3 43.4C238.3 43.3 238.3 43.1 238.2 42.9 238.1 42.8 237.9 42.7 237.6 42.6 237.8 42.6 238 42.5 238.1 42.5 238.3 42.3 238.4 42.1 238.4 41.9 238.4 41.5 238.2 41.2 237.9 41.1 237.7 41 237.4 41 237.1 41L236 41 236 44.1 236 44.1ZM237.5 42.4C237.4 42.4 237.2 42.5 237 42.5L236.5 42.5 236.5 41.3 237 41.3C237.3 41.3 237.5 41.4 237.6 41.5 237.8 41.5 237.9 41.7 237.9 41.9 237.9 42.1 237.7 42.3 237.5 42.4L237.5 42.4ZM239.1 40.5C238.6 40 237.9 39.7 237.1 39.7 236.3 39.7 235.7 40 235.1 40.5 234.6 41.1 234.3 41.7 234.3 42.5 234.3 43.3 234.6 44 235.1 44.5 235.7 45.1 236.3 45.4 237.1 45.4 237.9 45.4 238.6 45.1 239.1 44.5 239.7 44 239.9 43.3 239.9 42.5 239.9 41.7 239.7 41.1 239.1 40.5L239.1 40.5ZM238.8 40.8C239.3 41.3 239.5 41.9 239.5 42.5 239.5 43.2 239.3 43.8 238.8 44.3 238.4 44.7 237.8 45 237.1 45 236.4 45 235.9 44.7 235.4 44.3 234.9 43.8 234.7 43.2 234.7 42.5 234.7 41.9 234.9 41.3 235.4 40.8 235.9 40.3 236.4 40.1 237.1 40.1 237.8 40.1 238.4 40.3 238.8 40.8L238.8 40.8Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoUs", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoUsaa", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(139.000000, 128.000000)">\n        <path d="M0.5 105.7L0.5 129.3C0.5 142.5 8.5 144.6 15.3 144.6 25.3 144.6 29.9 138 29.9 129.1L29.9 105.7 23.3 105.7 23.3 129.9C23.3 133 22.3 138.7 15.3 138.6 8.9 138.5 7.7 132.6 7.7 128.9L7.7 105.7 0.5 105.7M57.4 107.3C57.4 107.3 53.2 105.2 48.4 105.2 42.4 105.2 35 108.3 35 116.6 35 122.4 39.2 125.2 42.1 126.6 43.7 127.3 45.6 128.2 47.1 129 47.9 129.4 51.1 130.5 51.1 133.9 51.1 137.6 47 138.9 45.2 138.9 38.8 138.9 34.4 135.9 34.4 135.9L35.1 143.3C35.1 143.3 37.7 144.6 45.6 144.6 53.1 144.6 58.5 139.8 58.5 133.2 58.5 128.1 55 125 52.1 123.6 49.7 122.4 48.3 121.8 46.3 120.9 44.3 119.9 42.2 118.2 42.2 115.7 42.2 112.9 44.7 110.9 48.4 110.9 53.9 110.9 56.1 113.4 57.4 114.2L57.4 107.3M102.5 132.1L107.7 117.1 112.4 132.1 102.5 132.1 102.5 132.1ZM70.9 132.1L76.1 117.1 80.8 132.1 70.9 132.1 70.9 132.1ZM111 105.7L103.1 105.7 104.4 108.9 92.1 141.8 79.4 105.7 71.5 105.7 72.7 108.9 59.6 144 66.8 144 69.1 137.3 82.6 137.3 84.9 144 98.4 144 100.7 137.3 114.2 137.3 116.5 144 124.4 144 111 105.7 111 105.7ZM0 62.8L0.3 74.8C0.3 74.8 3.3 72.6 6.5 72.6 9.8 72.6 13.5 75 13.5 75L42.8 92.1 45.2 81.3 13.5 62.7C13.5 62.7 9.8 60.4 6.5 60.4 3.2 60.4 0 62.8 0 62.8M0 47.1L0.3 59C0.3 59 3.3 56.8 6.5 56.8 9.8 56.8 13.5 59.2 13.5 59.2L45.9 78.2 48.4 67.4 13.5 47C13.5 47 9.8 44.6 6.5 44.6 3.2 44.6 0 47.1 0 47.1M0 31.5L0.3 43.4C0.3 43.4 3.3 41.3 6.5 41.3 9.8 41.3 13.5 43.6 13.5 43.6L49.1 64.4 51.5 53.7 13.5 31.4C13.5 31.4 9.8 29.1 6.5 29.1 3.2 29.1 0 31.5 0 31.5M61.2 12.5L64.4 26.5 109.1 52.6C109.1 52.6 112.7 55 116.1 55 119.6 55 122.6 52.5 122.6 52.5L122.3 40.6C122.3 40.6 119.5 42.8 116.1 42.8 112.7 42.8 109.1 40.4 109.1 40.4L74.6 20.2 72.2 11.2C72.2 10.8 72.5 10.6 72.6 10.6L78.5 8.7C79.3 8.7 79.7 9.4 79.7 10L80 10.6C80.3 10.7 81.1 10.3 81.2 10.3L81.2 6.7C81.2 4.3 79.3 2.2 76.7 2.2L70.9 2.2C70.9 2.2 70 0.2 67.6 0.2L56.4 0.2C53.5 0.2 52.8 3 52.8 3L45.1 34.2 13.5 15.7C13.5 15.7 10.1 13.4 6.5 13.4 3 13.4 0 15.8 0 15.8L0.3 27.8C0.3 27.8 3 25.6 6.5 25.6 10.1 25.6 13.5 28 13.5 28L52.4 50.6 61.2 12.5M65.3 30.4L68.5 44.6 109.1 68.4C109.1 68.4 112.8 70.7 116.1 70.7 119.4 70.7 122.6 68.3 122.6 68.3L122.3 56.3C122.3 56.3 119.7 58.5 116.1 58.5 112.5 58.5 109.1 56.1 109.1 56.1L65.3 30.4M69.5 48.4L72.8 62.6 109.2 83.9C109.2 83.9 112.8 86.3 116.1 86.3 119.4 86.3 122.6 83.8 122.6 83.8L122.3 71.9C122.3 71.9 119.7 74 116.1 74 112.5 74 109.2 71.7 109.2 71.7L69.5 48.4M73.6 66.7L76.9 80.8 109.1 99.7C109.1 99.7 112.8 102.1 116.1 102.1 119.4 102.1 122.6 99.6 122.6 99.6L122.3 87.6C122.3 87.6 119.7 89.8 116.1 89.8 112.5 89.8 109.1 87.4 109.1 87.4L73.6 66.7M131.9 103.4C136.3 103.4 139.8 107 139.8 111.4 139.8 115.9 136.3 119.4 131.9 119.4 127.5 119.4 124 115.9 124 111.4 124 107 127.5 103.4 131.9 103.4L131.9 103.4 131.9 103.4ZM131.9 104.6C128.4 104.6 125.5 107.7 125.5 111.4 125.5 115.2 128.4 118.2 131.9 118.2 135.5 118.2 138.3 115.2 138.3 111.4 138.3 107.7 135.5 104.6 131.9 104.6L131.9 104.6 131.9 104.6ZM130.4 116L129 116 129 107.1C129.7 107 130.4 106.9 131.5 106.9 132.8 106.9 133.7 107.2 134.3 107.6 134.8 108 135.1 108.6 135.1 109.4 135.1 110.6 134.3 111.3 133.3 111.6L133.3 111.7C134.1 111.8 134.7 112.5 134.8 113.8 135 115.2 135.3 115.7 135.4 116L133.9 116C133.7 115.7 133.5 114.9 133.3 113.8 133.1 112.6 132.5 112.2 131.4 112.2L130.4 112.2 130.4 116 130.4 116ZM130.4 111.1L131.4 111.1C132.6 111.1 133.6 110.7 133.6 109.6 133.6 108.8 133 108 131.4 108 131 108 130.7 108.1 130.4 108.1L130.4 111.1 130.4 111.1Z"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoUsaa", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoWells", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(100.000000, 157.000000)">\n        <path d="M132.76 34.57L132.76 30.85 133.27 30.85C136.16 30.85 137.43 30.57 137.43 27.74L137.36 8.19C137.36 5.38 136 5.09 133.2 5.09L131.08 5.09 131.08 1.36 151.15 1.36 151.15 5.09 148.75 5.16C145.5 5.16 144.96 5.45 144.96 8.19L144.96 30.64 153.03 30.64C156.99 30.64 159.31 30.14 160.37 28.18 161.33 26.42 161.77 24.43 161.77 21.19L165.64 21.19 165.64 34.57 132.76 34.57 132.76 34.57ZM95.58 34.57L95.58 30.85 97.48 30.85C100.36 30.85 101.63 30.57 101.63 27.74L101.56 8.19C101.56 5.38 99.88 5.09 97.05 5.09L95.3 5.09 95.3 1.36 115.34 1.36 115.34 5.09 112.95 5.16C109.72 5.16 109.15 5.45 109.15 8.19L109.15 30.64 117.25 30.64C121.19 30.64 123.51 30.14 124.57 28.18 125.56 26.42 125.97 24.43 125.97 21.19L129.84 21.19 129.84 34.57 95.58 34.57 95.58 34.57ZM56.14 34.57L56.14 30.85 58.09 30.78C60.99 30.78 62.61 30.5 62.61 27.74 62.61 8.19 62.61 27.74 62.61 8.13 62.61 5.38 60.99 5.09 58.09 5.09L56.14 5.09 56.14 1.36 92.01 1.36 92.01 14.24 88.21 14.24C88.01 6.5 86.19 5.29 79.42 5.29L70.13 5.29 70.13 15.16 72.52 15.16C76.75 15.16 77.31 13.74 77.65 8.74L81.47 8.74 81.47 25.57 77.58 25.57C77.31 19.87 76.75 19.08 72.59 19.08L70.13 19.08 70.13 30.64 80.83 30.64C86.88 30.64 88.33 27.79 88.86 21.19L92.65 21.19 92.65 34.57 56.14 34.57 56.14 34.57ZM57.56 5.09C54.83 5.09 53.91 6.14 52.78 9.18L43.28 34.57 37.29 34.57 29.7 16.14 22.45 34.57 16.26 34.57 6.35 9.58C5.22 6.71 3.54 5.09 1.08 5.09L0.3 5.09 0.3 1.36 17.19 1.36 17.19 5.09 15.55 5.09C13.66 5.09 12.81 5.59 12.88 6.64 12.88 6.85 12.81 7.21 13.02 7.69 13.02 7.69 16.88 16.8 19.95 25.8 20.27 25.85 20.4 25.85 20.4 25.85L27.03 9.25C26.75 6.5 25.84 5.09 22.96 5.09L20.7 5.09 20.7 1.36 38.49 1.36 38.49 5.09 35.68 5.09C34 5.09 33.36 5.45 33.36 6.44 33.36 6.85 33.43 7.35 33.64 7.83 33.64 7.83 37.64 17.49 40.56 25.89 40.95 25.89 40.95 25.92 40.95 25.92L47.37 9.11C47.79 7.99 47.79 7.14 47.79 6.57 47.79 5.52 46.87 5.09 44.98 5.09L42.66 5.09 42.66 1.36 58.83 1.36 58.83 5.09 57.56 5.09 57.56 5.09Z"/>\n        <path d="M199.64 24.86C199.64 32.47 193.66 35.21 184.81 35.21 179.47 35.21 174.33 32.17 173.21 31.12L172.08 34.59 168.7 34.59 168.7 21.23 172.56 21.23C173.62 27.61 177.9 30.37 184 30.64 189.25 30.87 192.97 29.47 193.39 25.85 193.87 21.64 189.25 21.92 185.38 21.21L179.67 20.16C171.16 18.68 168.42 16.21 168.21 10.66 167.99 4.61 173.48 0.66 180.87 0.59 184.46 0.59 189.11 1.16 192.7 4.04L194.38 1.29 197.32 1.29 197.32 12.9 193.59 12.9C192.79 6.46 186.44 4.5 181.01 4.63 177.07 4.76 174.47 7.03 174.47 9.7 174.47 12.19 176.93 12.51 180.06 13.05L187.03 14.27C194.15 15.45 199.64 16.92 199.64 24.79L199.64 24.86"/>\n        <path d="M40.31 64.01C40.31 61.45 39.89 59.19 38.97 57.36 37.85 55.39 35.55 55.1 31.59 55.1L23.28 55.1 23.28 65.03 25.9 65.03C30.12 65.03 30.76 64.26 30.76 59.12L33.84 59.12 33.84 75.72 30.69 75.65C30.62 70.1 30.05 68.96 25.9 68.96L23.28 68.96 23.28 77.62C23.28 80.38 23.72 80.65 26.59 80.65L30.46 80.65 30.46 84.38 9.98 84.38 9.98 80.65 11.89 80.58C14.77 80.58 15.76 80.31 15.76 77.55 15.76 58 15.76 77.55 15.76 57.93 15.76 55.19 14.77 54.89 11.89 54.89L9.98 54.89 9.98 51.17 44.13 51.17 44.13 64.01 40.31 64.01"/>\n        <path d="M59.98 84.38L59.98 80.65 63.57 80.65C65.48 80.65 66.4 80.45 66.4 79.31 66.4 78.89 66.17 78.32 65.89 77.7L64.49 73.83 51.54 73.83 49.86 77.98C49.58 78.62 49.44 79.1 49.44 79.53 49.44 80.58 50.34 80.65 52.11 80.65L55.56 80.65 55.56 84.38 38.24 84.38 38.24 80.65 39.76 80.65C42.36 80.65 43.14 79.74 44.13 77.41L55.24 51.17 63.39 51.17 74.02 77.41C74.98 79.95 76.06 80.65 77.95 80.65L79.56 80.65 79.56 84.38 59.98 84.38M58.16 57.15L53.17 69.9 63.22 69.9 58.16 57.15"/>\n        <path d="M117.09 76.63C117.09 82.68 114.28 85.08 110.28 85.08 105.7 85.08 102.73 83.83 102.53 79.24L102.39 75.38C102.18 69.81 100.4 68.69 94.65 68.69L91.27 68.69 91.27 77.62C91.27 80.38 91.69 80.65 94.58 80.65L97.6 80.65 97.6 84.38 77.33 84.38 77.33 80.65 80.27 80.65C82.19 80.65 83.75 79.97 83.75 77.55L83.75 57.93C83.75 55.19 83.31 54.89 80.44 54.89L77.7 54.89 77.7 51.17 100.54 51.17C109.08 51.17 113.01 53.71 113.01 59.05 113.01 63.84 109.29 66.79 102.94 67.64 108.85 69.05 109.63 71.15 109.98 75.65 110.05 76.09 109.98 77 109.98 77.7 110.12 79.67 110.9 80.58 111.89 80.52 113.91 80.38 114.07 78.89 113.91 74.94L117.09 74.94C117.16 75.51 117.16 76.09 117.16 76.63L117.09 76.63M105.35 59.96C105.35 56.1 103.1 54.96 98.38 54.96L91.27 54.96 91.27 65.03 98.52 64.96C103.17 64.96 105.35 63.48 105.35 60.03L105.35 59.96"/>\n        <path d="M146.68 61.81C145.09 56.83 141.76 54.5 136.26 54.5 130.85 54.5 126.55 58.93 126.61 67.38 126.61 75.97 130.06 80.61 136.26 80.67 140.77 80.67 144.77 78.44 144.77 74.62L144.77 72.8C144.77 70.56 144.22 70.56 141.04 70.56L139.38 70.56 139.38 66.75 154.82 66.75 154.82 70.56 153.56 70.56C151.16 70.56 150.8 70.33 150.8 73.16L150.8 84.28 148.08 84.28 146.33 81.52C143.3 83.92 138.95 85.04 135.06 85.04 130.51 85.04 126.61 83.44 123.53 80.33 120.29 77.02 118.4 72.59 118.47 67.38 118.47 62.25 120.15 58.16 123.46 54.87 126.34 52.04 130.71 50.44 135.22 50.51 138.95 50.51 143.3 51.49 145.76 54.1L147.46 50.64 150.11 50.64 150.11 61.79 146.68 61.81"/>\n        <path d="M177.07 84.99C166.03 84.99 157.47 78.1 157.47 67.64 157.47 57.22 166.03 50.42 177 50.42 188.03 50.42 196.38 57.22 196.38 67.7 196.38 78.1 188.03 84.99 177.07 84.99M188.24 67.77C188.24 59.05 183.47 54.5 176.93 54.5 170.47 54.5 165.55 59.05 165.55 67.77 165.55 76.47 170.47 81.13 176.93 81.13 183.38 81.13 188.17 76.47 188.17 67.77L188.24 67.77"/>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoWells", n), n
    }), define("hbs!views/linkBankAccount/svg/bankLogoManual", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(125.000000, 129.000000)">\n        <path d="M39.4232143,54.8696429 C37.7803571,54.8696429 36.3375,56.3125 36.3375,57.9571429 L36.3375,115.666071 C36.3375,117.308929 37.7803571,118.751786 39.4232143,118.751786 C41.0660714,118.751786 42.5089286,117.308929 42.5089286,115.666071 L42.5089286,57.9571429 C42.5089286,56.3125 41.0660714,54.8696429 39.4232143,54.8696429"></path>\n        <path d="M24.1803571,55.2571429 C23.2142857,54.7142857 22.1142857,54.7428571 21.1607143,55.3267857 C20.2232143,55.9035714 19.6410714,57.025 19.6410714,58.2517857 L19.6410714,115.369643 C19.6410714,116.596429 20.2232143,117.717857 21.1607143,118.294643 C21.6589286,118.6 22.1946429,118.751786 22.7321429,118.751786 C23.2232143,118.751786 23.7196429,118.625 24.1821429,118.364286 C25.1714286,117.810714 25.8125,116.751786 25.8125,115.666071 L25.8125,57.9571429 C25.8125,56.8714286 25.1714286,55.8107143 24.1803571,55.2571429"></path>\n        <path d="M83.1589286,54.8696429 C81.5160714,54.8696429 80.0732143,56.3125 80.0732143,57.9571429 L80.0732143,115.666071 C80.0732143,117.308929 81.5160714,118.751786 83.1589286,118.751786 C84.8035714,118.751786 86.2446429,117.308929 86.2446429,115.666071 L86.2446429,57.9571429 C86.2446429,56.3125 84.8035714,54.8696429 83.1589286,54.8696429"></path>\n        <path d="M66.4642857,54.8696429 C64.8196429,54.8696429 63.3767857,56.3125 63.3767857,57.9571429 L63.3767857,115.666071 C63.3767857,117.308929 64.8196429,118.751786 66.4642857,118.751786 C68.1071429,118.751786 69.5482143,117.308929 69.5482143,115.666071 L69.5482143,57.9571429 C69.5482143,56.3125 68.1071429,54.8696429 66.4642857,54.8696429"></path>\n        <path d="M109.835714,54.8696429 C108.192857,54.8696429 106.751786,56.3125 106.751786,57.9571429 L106.751786,115.666071 C106.751786,117.308929 108.192857,118.751786 109.835714,118.751786 C111.480357,118.751786 112.921429,117.308929 112.921429,115.666071 L112.921429,57.9571429 C112.921429,56.3125 111.480357,54.8696429 109.835714,54.8696429"></path>\n        <path d="M126.532143,54.8696429 C124.889286,54.8696429 123.446429,56.3125 123.446429,57.9571429 L123.446429,115.666071 C123.446429,117.308929 124.889286,118.751786 126.532143,118.751786 C128.176786,118.751786 129.617857,117.308929 129.617857,115.666071 L129.617857,57.9571429 C129.617857,56.3125 128.176786,54.8696429 126.532143,54.8696429"></path>\n        <path d="M138.169643,42.7732143 L76.2982143,0.498214286 C75.4607143,-0.133928571 74.2017857,-0.141071429 73.1553571,0.489285714 L11.0928571,42.9517857 C9.80357143,43.8107143 9.2875,45.0821429 9.66607143,46.4 C9.88035714,47.6875 11.1535714,48.6982143 12.5642857,48.6982143 L136.694643,48.6982143 C138.285714,48.6982143 139.748214,47.3339286 139.9625,45.6125 C139.9625,44.3964286 139.160714,43.1589286 138.169643,42.7732143 L138.169643,42.7732143 Z M23.6964286,42.3464286 L74.6303571,6.67678571 L125.385714,42.3464286 L23.6964286,42.3464286 L23.6964286,42.3464286 Z"></path>\n        <path d="M12.5642857,131.092857 L136.694643,131.092857 C138.3375,131.092857 139.780357,129.651786 139.780357,128.007143 C139.780357,126.364286 138.3375,124.921429 136.694643,124.921429 L12.5642857,124.921429 C10.9214286,124.921429 9.48035714,126.364286 9.48035714,128.007143 C9.48035714,129.651786 10.9214286,131.092857 12.5642857,131.092857"></path>\n        <path d="M145.95,135.992857 L3.30892857,135.992857 C1.66607143,135.992857 0.225,137.433929 0.225,139.076786 C0.225,140.721429 1.66607143,142.1625 3.30892857,142.1625 L145.95,142.1625 C147.592857,142.1625 149.035714,140.721429 149.035714,139.076786 C149.035714,137.433929 147.592857,135.992857 145.95,135.992857"></path>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/linkBankAccount/svg/bankLogoManual", n), n
    }), define("components/common/scripts/templateHelpers/bankLogo", ["hbs/handlebars", "hbs!views/linkBankAccount/svg/bankLogoBofa", "hbs!views/linkBankAccount/svg/bankLogoCapone360", "hbs!views/linkBankAccount/svg/bankLogoChase", "hbs!views/linkBankAccount/svg/bankLogoCiti", "hbs!views/linkBankAccount/svg/bankLogoFidelity", "hbs!views/linkBankAccount/svg/bankLogoPnc", "hbs!views/linkBankAccount/svg/bankLogoSchwab", "hbs!views/linkBankAccount/svg/bankLogoSvb", "hbs!views/linkBankAccount/svg/bankLogoUs", "hbs!views/linkBankAccount/svg/bankLogoUsaa", "hbs!views/linkBankAccount/svg/bankLogoWells", "hbs!views/linkBankAccount/svg/bankLogoManual"], function(e, t, n, r, i, s, o, u, a, f, l, c, h) {
        e.registerHelper("bankLogo", function(p, d) {
            var v = {
                bofa: t,
                capone360: n,
                chase: r,
                citi: i,
                fidelity: s,
                pnc: o,
                schwab: u,
                svb: a,
                us: f,
                usaa: l,
                wells: c,
                manual: h
            };
            return new e.SafeString(v[p]({}))
        })
    }), define("hbs!views/linkBankAccount/bankLogo", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/bankLogo"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s, o, u = n.helperMissing,
                a = this.escapeExpression;
            return a((s = n.bankLogo || t && t.bankLogo, o = {
                hash: {}
            }, s ? s.call(t, t && t.abbr, o) : u.call(t, "bankLogo", t && t.abbr, o)))
        });
        return t.registerPartial("views/linkBankAccount/bankLogo", n), n
    }), define("models/v1/depositoryAccountSelection", ["underscore", "models/v1/baseModels"], function(e, t) {
        var n = {
                relatedModels: ["bankAuthentication"],
                validation: {
                    depositoryAccountId: {
                        required: !0,
                        msg: "Please select which account you would like to link"
                    }
                },
                endpoint: function() {
                    return this.get("bankAuthentication").getEndpoint() + "/depository-account-selection"
                },
                getSelectedDepositoryAccount: function() {
                    var t = parseInt(this.get("depositoryAccountId"), 10);
                    return e.find(this.get("bankAuthentication").get("depositoryAccounts"), function(e) {
                        return e.id === t
                    })
                }
            },
            r = t.Model.extend(n);
        return r
    }), define("hbs!views/linkBankAccount/chooseAccount", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputRadio", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression;
            return s += '<div class="main">\n    <h1>Select an account</h1>\n    <p class="body">Choose one account to link. We\'ll use this account for transfers and auto-deposits.</p>\n    <form>\n        ', o = (u = n.depositoryAccounts || t && t.depositoryAccounts, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "depositoryAccounts", a)), s += l((u = n.inputRadio || t && t.inputRadio, a = {
                hash: {
                    className: "stack",
                    options: o
                }
            }, u ? u.call(t, "depositoryAccountId", a) : f.call(t, "inputRadio", "depositoryAccountId", a))) + '\n        <div class="buttons">\n            ' + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Link account", a) : f.call(t, "submitButton", "Link account", a))) + "\n        </div>\n    </form>\n</div>\n", s
        });
        return t.registerPartial("views/linkBankAccount/chooseAccount", n), n
    }), define("views/profile/securityQuestionView", ["jquery", "underscore", "backbone", "marionette", "views/common/alertView"], function(e, t, n, r, i) {
        return i.extend({
            template: "profile/securityQuestion",
            tagName: "div",
            className: "securityQuestion",
            events: {
                "click button#ok": "onOK",
                "click button#cancel": "onCancel"
            },
            templateHelpers: {
                notInline: function() {
                    return !this.self.model.get("inline")
                },
                optionalHeader: function() {
                    return this.notInline() ? "<h1>" + this.self.model.get("title") + "</h1>" : ""
                },
                autofocus: function() {
                    return this.notInline() ? "autofocus" : ""
                }
            },
            getResults: function() {
                return {
                    securityQuestionNumber: this.$(".question-number").val(),
                    securityAnswer: this.$(".security-answer").val()
                }
            },
            onShow: function() {
                t.extend(this.model, {
                    labels: {},
                    validation: {
                        securityAnswer: {
                            required: !0
                        }
                    }
                }, n.Validation.mixin), this.applyValidation()
            },
            onOK: function(e) {
                return this.model.get("handler") && this.model.get("handler")(this.getResults()), !1
            },
            onCancel: function(e) {
                return this.model.get("inline") || BMT.modal.close(this), this.model.get("handler") && this.model.get("handler")(null), !1
            },
            remove: function() {
                var e = this.model.get("inline") ? r.ItemView : i;
                return e.prototype.remove.apply(this, arguments)
            }
        }, {
            removeResults: function(e) {
                e.unset("securityQuestionNumber", {
                    silent: !0
                }), e.unset("securityAnswer", {
                    silent: !0
                })
            }
        })
    }), define("views/linkBankAccount/analytics/linkBankAnalytics", ["underscore", "components/common/scripts/analytics/analytics"], function(e, t) {
        return {
            track: function(n, r) {
                t.track(n, e.extend({}, r, {
                    Module: "Plaid"
                }))
            }
        }
    }), define("views/linkBankAccount/chooseAccountView", ["jquery", "underscore", "hbs!views/linkBankAccount/chooseAccount", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "components/common/scripts/util/formatter", "views/profile/securityQuestionView", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o, u) {
        return r.View.extend({
            className: "choose-account",
            template: n,
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        depositoryAccountId: {
                            type: "radio"
                        }
                    },
                    onSubmit: function() {
                        this.onConfirm()
                    }
                }
            },
            templateHelpers: {
                depositoryAccounts: function() {
                    return t.map(this.self.depositoryAccounts(), function(e) {
                        return {
                            value: e.id,
                            label: e.name + " | " + s.money(e.balance)
                        }
                    })
                }
            },
            modelEvents: {
                "change:depositoryAccountId": "trackBankAccountSelection",
                sync: "fetchBankAccountAndContinue clearSecurityQuestions trackSuccess",
                error: "clearSecurityQuestions"
            },
            depositoryAccounts: function() {
                return this.model.get("bankAuthentication").get("depositoryAccounts")
            },
            trackBankAccountSelection: function() {
                u.track("ElementClicked", t.extend({}, this.getAnalytics(), {
                    Type: "Radio",
                    Name: "PlaidAccountSelected",
                    BankName: this.model.get("bankAuthentication").get("type")
                }))
            },
            onConfirm: function() {
                u.track("ElementClicked", t.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "PlaidAccountLinkRequested",
                    BankName: this.model.get("bankAuthentication").get("type")
                })), this.getAccountGroup().is("hasHadBankAccount") ? this.askSecurityQuestion(this.submitDepositoryAccountInfo) : (this.trigger("block"), this.submitDepositoryAccountInfo())
            },
            askSecurityQuestion: function(e) {
                this.securityQuestionView = new o(t.extend({
                    title: "Security Confirmation",
                    body: "Please answer the following security question to update your checking account.",
                    handler: function(t) {
                        t && (this.securityQuestionView.block(), e(t))
                    }.bind(this)
                }, BMT.user.randomSecurityQuestion())), BMT.modal.show(this.securityQuestionView)
            },
            submitDepositoryAccountInfo: function(e) {
                this.hasAskedSecurityQuestion = !!e, this.model.save(e)
            },
            clearSecurityQuestions: function() {
                this.hasAskedSecurityQuestion && (o.removeResults(this.model), BMT.modal.close(this.securityQuestionView)), this.trigger("unblock")
            },
            trackSuccess: function() {
                u.track("BankUpdateSucceeded", t.extend({}, this.getAnalytics(), {
                    BankName: this.model.get("bankAuthentication").get("type")
                })), BMT.vent.trigger("linkBankAccount:bankSaved")
            },
            fetchBankAccountAndContinue: function() {
                var e = this.getAccountGroup().get("bankAccount");
                e.set("id", this.model.get("bankAccountId")), this.listenTo(e, "sync error", this.goToNext), this.listenTo(e, "error", this.redactBankAccount), e.fetch({
                    forceUpdate: !0
                })
            },
            goToNext: function() {
                this.trigger("next accountSelected", {
                    selectedDepositoryAccount: this.model.getSelectedDepositoryAccount()
                }), this.trigger("flashBubbleSuccess")
            },
            redactBankAccount: function() {
                var e = this.getAccountGroup().get("bankAccount");
                e.unset("accountNumber")
            },
            getAnalytics: function() {
                return {
                    Location: "ChooseAccountView"
                }
            },
            getAccountGroup: function() {
                return this.options.accountGroup
            }
        })
    }), define("hbs!views/linkBankAccount/chooseBank", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/bankLogo"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n            <li class="bank ', (s = n["class"]) ? i = s.call(e, {
                    hash: {},
                    data: t
                }) : (s = e && e["class"], i = typeof s === u ? s.call(e, {
                    hash: {},
                    data: t
                }) : s), r += a(i) + '" data-value="' + a((i = t == null || t === !1 ? t : t.key, typeof i === u ? i.apply(e) : i)) + '" style="background-color: ', (s = n.color) ? i = s.call(e, {
                    hash: {},
                    data: t
                }) : (s = e && e.color, i = typeof s === u ? s.call(e, {
                    hash: {},
                    data: t
                }) : s), r += a(i) + ';">\n                ' + a((s = n.bankLogo || e && e.bankLogo, o = {
                    hash: {},
                    data: t
                }, s ? s.call(e, e && e.abbr, o) : f.call(e, "bankLogo", e && e.abbr, o))) + "\n                <span>", (s = n.svgLabel) ? i = s.call(e, {
                    hash: {},
                    data: t
                }) : (s = e && e.svgLabel, i = typeof s === u ? s.call(e, {
                    hash: {},
                    data: t
                }) : s), r += a(i) + "</span>\n            </li>\n        ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), i = i || {};
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = n.helperMissing,
                l = this;
            s += '<div class="header">\n    <h1>Select a bank to link</h1>\n</div>\n\n<p class="body">Link a checking account to fund your investments.</p>\n\n<div class="banks">\n    <ul>\n        ', o = n.each.call(t, t && t.banks, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i),
                data: i
            });
            if (o || o === 0) s += o;
            return s += "\n    </ul>\n</div>\n", s
        });
        return t.registerPartial("views/linkBankAccount/chooseBank", n), n
    }), define("services/plaidService", ["underscore"], function(e) {
        return {
            getErrorDetailsFromPlaidErrorResponse: function(t, n, r) {
                var i, s, o, u, a = "block",
                    f = !1;
                try {
                    o = e.keys(t.errorMessages)[0]
                } catch (l) {}
                switch (o) {
                    case "invalidCredentials":
                        i = "Invalid Username or Password", s = "Sorry, we couldn't log in with the username and password you provided. Please try again or submit your account and routing numbers manually.";
                        break;
                    case "invalidPin":
                        i = "Invalid PIN", s = "Sorry, we couldn't log in with the PIN you provided. Please try again or submit your account and routing numbers manually.";
                        break;
                    case "bankAccountLocked":
                        i = "Bank Account Locked", s = "Sorry, the account you tried to log in with is locked. Please contact your bank or submit your account and routing numbers manually.";
                        break;
                    case "bankAccountNotSetUp":
                        i = "Bank Account Not Set Up", s = "Sorry, your account at this bank is not fully set up. Please submit your account and routing numbers manually.";
                        break;
                    case "noBankAccountsFound":
                        i = "No Bank Accounts Found", s = "The link to your bank was successful but your bank didn't provide a valid checking account. Please try logging in with another bank or enter your account and routing numbers manually.";
                        break;
                    case "accountNotSupported":
                        i = "Invalid Account Type", s = "Sorry, we couldn't find a suitable account to link with that username and password. Please submit your account and routing numbers manually.";
                        break;
                    case "incorrectMfaAnswer":
                        i = "Incorrect Response", s = "Sorry, your response didn't match up with what's on file. Please try again or enter your account and routing numbers manually.";
                        break;
                    case "mfaNotSupported":
                        i = "Unsupported Security Questions", s = "Sorry, your bank account uses a type of security question that we don't support. Please try another bank account or enter your account and routing numbers manually.";
                        break;
                    default:
                        f = !0, a = "error", n ? (i = "We couldn't link your account", s = "<p>We're having trouble communicating with your bank.</p><p>Would you like to give it another try?</p>", u = [{
                            id: "ok",
                            title: "Try Again"
                        }]) : r ? (i = "We couldn't link your account", s = "<p>We're having trouble communicating with your bank.</p>", u = [{
                            id: "ok",
                            title: "Close"
                        }]) : (i = "Let's try linking another way", s = "<p>We're unable to communicate with your bank at the moment</p><p>You can easily link your account manually using your account and routing numbers.</p>", u = [{
                            id: "ok",
                            title: "Link Manually"
                        }])
                }
                return {
                    alertOptions: {
                        title: i,
                        body: s,
                        icon: a,
                        buttons: u
                    },
                    code: o,
                    isUnknown: f
                }
            },
            supportedBankData: {
                BANK_OF_AMERICA: {
                    name: "Bank of America",
                    abbr: "bofa",
                    authType: "Password",
                    color: "#E9002F"
                },
                CAPITAL_ONE_360: {
                    name: "Capital One 360",
                    abbr: "capone360",
                    authType: "Password",
                    color: "#A1282F",
                    authHelperText: "(Note: CapitalOne 360 Personal Finance Access Codes are not supported.)"
                },
                CHARLES_SCHWAB: {
                    name: "Charles Schwab",
                    abbr: "schwab",
                    authType: "Password",
                    color: "#009DDC"
                },
                CHASE: {
                    name: "Chase",
                    abbr: "chase",
                    authType: "Password",
                    color: "#117ACB"
                },
                CITIBANK: {
                    name: "Citibank",
                    abbr: "citi",
                    authType: "Password",
                    color: "#01518C"
                },
                FIDELITY: {
                    name: "Fidelity",
                    abbr: "fidelity",
                    authType: "Password",
                    color: "#408800"
                },
                PNC: {
                    name: "PNC",
                    abbr: "pnc",
                    authType: "Password",
                    color: "#FF7606"
                },
                SVB: {
                    name: "Silicon Valley Bank",
                    abbr: "svb",
                    authType: "Password",
                    color: "#009DDC"
                },
                US_BANK: {
                    name: "US Bank",
                    abbr: "us",
                    authType: "Password",
                    color: "#0C2174"
                },
                USAA: {
                    name: "USAA",
                    abbr: "usaa",
                    authType: "Password",
                    pinRequired: !0,
                    color: "#143B5A"
                },
                WELLS_FARGO: {
                    name: "Wells Fargo",
                    abbr: "wells",
                    authType: "Password",
                    color: "#B51730"
                }
            },
            isMfaResponse: function(e) {
                return e.has("mfaType")
            },
            typeOfMfaResponse: function(e) {
                var t = this.getMfaResponse(e).type,
                    n = this.getMfaResponse(e).message;
                return t === "questions" ? "questions" : n.indexOf("@") !== -1 ? "email" : "phone"
            },
            getMfaResponse: function(e) {
                return {
                    type: e.get("mfaType"),
                    message: e.get("mfaMessage")
                }
            }
        }
    }), define("views/linkBankAccount/chooseBankView", ["underscore", "hbs!views/linkBankAccount/chooseBank", "common/betterment.views", "services/plaidService", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i) {
        return n.View.extend({
            className: "choose-bank",
            template: t,
            templateHelpers: {
                banks: function() {
                    return this.self.getSupportedBankData()
                }
            },
            events: {
                "click .bank": "selectBank"
            },
            onShow: function() {
                i.track("ElementViewed", e.extend({}, this.getAnalytics(), {
                    Name: "ChooseBankViewed",
                    BankName: this.model.get("selectedBankKey")
                }))
            },
            selectBank: function(e) {
                var t = $(e.currentTarget).data("value");
                this.model.set("selectedBankKey", t), this.trackBankSelection(), this.trigger("updateBubble", {
                    selectedBankValue: this.getSupportedBankData()[t]
                }), this.goToNext(t)
            },
            trackBankSelection: function() {
                i.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "PlaidBankSelected",
                    BankName: this.model.get("selectedBankKey")
                }))
            },
            goToNext: function(e) {
                e === this.getManualBankKey() ? this.trigger("manualFlow") : this.trigger("next")
            },
            getSupportedBankData: function() {
                return e.extend({}, r.supportedBankData, {
                    MANUAL_BANK: {
                        name: "All other banks",
                        abbr: "manual",
                        "class": "other",
                        svgLabel: "other"
                    }
                })
            },
            getManualBankKey: function() {
                return "MANUAL_BANK"
            },
            getAnalytics: function() {
                return {
                    Location: "ChooseBankView"
                }
            }
        })
    }), define("hbs!views/linkBankAccount/fundingViews", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="funding-views"></div>'
        });
        return t.registerPartial("views/linkBankAccount/fundingViews", n), n
    }), define("hbs!views/linkBankAccount/confirmDeposit", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<h1>Please confirm deposit</h1>\n<label class="static-label">Deposit amount</label>\n<p class="static-value">', (u = n.deposit) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.deposit, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n<div class="bonus-warning">', (u = n.bonusWarning) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.bonusWarning, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</div>\n<label class="static-label">To goal</label>\n<p class="static-value">', (u = n.goal) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.goal, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n<div class="buttons">\n    ' + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Deposit", a) : c.call(t, "submitButton", "Deposit", a))) + "\n</div>", s
        });
        return t.registerPartial("views/linkBankAccount/confirmDeposit", n), n
    }), define("services/initialDepositBonusService", ["components/common/scripts/util/handlebarsHelpers", "components/common/scripts/util/formatter"], function(e, t) {
        return {
            bonusWarning: function(n) {
                var r = n.account,
                    i = r.get("accountGroup"),
                    s = i.get("potentialBonus"),
                    o = i.get("bankAccount"),
                    u = n.amount,
                    a = s ? Math.abs(u) < s.num("requirementAmount") : undefined;
                if (a && !i.is("funded") && o.isActiveAndConfirmed()) {
                    var f = s.isReferral(),
                        l = "Are you sure you want to authorize a deposit of " + t.money(u) + " from your " + e.e(o.get("description")) + " account to your account at Betterment?<br /><br />",
                        c = "It looks like you signed up using a ";
                    return f ? c += "referral link from a friend" : c += "promotional link", c += ". In order for you to get your signup bonus of " + s.get("prizeDescription") + (f ? ", and your friend to be rewarded," : "") + " you must make an initial deposit of " + t.money(s.num("requirementAmount")) + " or more.", l += c + " Would you like to enter a larger initial deposit?", n.longMessage ? e.s(l) : e.s(c)
                }
                return !1
            }
        }
    }), define("views/linkBankAccount/confirmDepositView", ["jquery", "underscore", "hbs!views/linkBankAccount/confirmDeposit", "common/betterment.views", "components/common/scripts/util/formatter", "services/initialDepositBonusService", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o) {
        return r.View.extend({
            className: "confirm-deposit",
            template: n,
            templateHelpers: {
                deposit: function() {
                    return i.money(this.self.model.get("amount"))
                },
                goal: function() {
                    return this.self.model.get("account").get("name")
                },
                bankAccount: function() {
                    return this.self.options.selectedDepositoryAccount.name
                },
                bonusWarning: function() {
                    var e = s.bonusWarning({
                        account: this.self.model.get("account"),
                        amount: this.self.model.get("amount")
                    });
                    return e
                }
            },
            events: {
                "click .submit-button": "onSubmitClick"
            },
            modelEvents: {
                sync: "depositSaved"
            },
            onShow: function() {
                this.trigger("setAnalytics", this.getAnalytics())
            },
            depositSaved: function() {
                o.track("DepositSubmitted", t.extend({}, this.getAnalytics(), {
                    Name: "PlaidDepositCompleted",
                    Amount: this.model.get("amount"),
                    BankName: this.options.selectedBankKey
                })), this.trigger("depositConfirmed")
            },
            onSubmitClick: function() {
                this.model.handleErrors(), this.model.save()
            },
            getAnalytics: function() {
                return {
                    Location: "ConfirmDepositView"
                }
            }
        })
    }), define("hbs!components/common/scripts/templates/inputSelect", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += '\n                <li data-value="', (s = n.value) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.value, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '">', (s = n.label) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.label, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</li>\n            ", r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <option value="', (s = n.value) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.value, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '">', (s = n.label) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.label, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</option>\n        ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="input-select ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" tabindex="0">\n\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n\n    <div class="placeholder"></div>\n\n    <div class="select-options">\n        <ul>\n            ', o = n.each.call(t, t && t.options, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </ul>\n    </div>\n\n    <select name="', (u = n.propertyName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.propertyName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n\n        \n        <option value=""></option>\n\n        ', o = n.each.call(t, t && t.options, {
                hash: {},
                inverse: l.noop,
                fn: l.program(3, h, i)
            });
            if (o || o === 0) s += o;
            return s += "\n    </select>\n</div>\n", s
        });
        return t.registerPartial("components/common/scripts/templates/inputSelect", n), n
    }), define("components/common/scripts/templateHelpers/inputSelect", ["underscore", "hbs/handlebars", "hbs!components/common/scripts/templates/inputSelect"], function(e, t, n) {
        var r = function(t) {
            return e.mapObject(t, function(e, t) {
                return {
                    value: t,
                    label: e
                }
            })
        };
        t.registerHelper("inputSelect", function(e, i) {
            var s = {
                propertyName: e,
                className: i.hash.className || e,
                label: i.hash.label || e,
                options: r(i.hash.options)
            };
            return new t.SafeString(n(s))
        })
    }), define("hbs!views/linkBankAccount/deposit", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputSelect", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <label class="static-label">To goal</label>\n        <p class="static-value">', (s = n.singleAccountName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.singleAccountName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "</p>\n    ", r
            }

            function d(e, t) {
                var r = "",
                    i, s;
                return r += '\n                <li data-value="', (s = n.value) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.value, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '" data-category="', (s = n.category) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.category, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '">', (s = n.name) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.name, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "</li>\n            ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += '<h1>Set up a deposit</h1>\n<form>\n    <div class="account-select ', (u = n.showAccountSelect) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.showAccountSelect, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n        ', o = (u = n.accountIdOptions || t && t.accountIdOptions, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "accountIdOptions", a)), s += l((u = n.inputSelect || t && t.inputSelect, a = {
                hash: {
                    className: "accounts",
                    label: "To goal",
                    options: o
                }
            }, u ? u.call(t, "accountId", a) : c.call(t, "inputSelect", "accountId", a))) + "\n    </div>\n    ", o = n["if"].call(t, t && t.showSingleAccount, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += "\n    ", o = (u = n.contributionType || t && t.contributionType, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "contributionType", a)), s += l((u = n.inputSelect || t && t.inputSelect, a = {
                hash: {
                    className: "contribution-type",
                    label: "Select a contribution year",
                    options: o
                }
            }, u ? u.call(t, "contributionType", a) : c.call(t, "inputSelect", "contributionType", a))) + '\n    <div class="deposit-group">\n        <label class="static-label">Amount to deposit</label>\n        <ul class="deposits">\n            ', o = n.each.call(t, t && t.depositAmounts, {
                hash: {},
                inverse: h.noop,
                fn: h.program(3, d, i)
            });
            if (o || o === 0) s += o;
            return s += "\n        </ul>\n    </div>\n    " + l((u = n.inputMoney || t && t.inputMoney, a = {
                hash: {
                    className: "deposit-input",
                    label: "Amount to deposit"
                }
            }, u ? u.call(t, "amount", a) : c.call(t, "inputMoney", "amount", a))) + '\n    <div class="buttons">\n        ' + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Continue", a) : c.call(t, "submitButton", "Continue", a))) + '\n        <div class="secondary-button">\n            <button type="button" class="silver">I\'ll try later</button>\n        </div>\n    </div>\n</form>', s
        });
        return t.registerPartial("views/linkBankAccount/deposit", n), n
    }), define("models/v1/deposit", ["backbone", "models/account", "models/v1/baseModels", "components/common/scripts/util/formatter", "components/transaction/scripts/constants/transactionConstants"], function(e, t, n, r, i) {
        var s = {
            relations: [{
                type: e.HasOne,
                key: "account",
                keySource: "accountId",
                relatedModel: t.Model
            }],
            defaults: {
                contributionType: (new Date).getFullYear()
            },
            endpoint: function() {
                return this.get("account").getEndpoint() + "/deposits"
            },
            validation: {
                amount: function(e, t, n, s) {
                    var o = i.MINIMUM,
                        u = i.DEPOSIT_MAXIMUM,
                        a = n.account;
                    if (a.isIRA()) {
                        var f = a.remainingContributionAmount(n.contributionType);
                        if (e > f) return "The max IRA contribution is {0}".format(r.money(f, 0))
                    }
                    return e < o ? "The minimum amount is {0}".format(r.money(o, 0)) : e > u ? "The maximum amount is {0}".format(r.money(u, 0)) : !1
                }
            }
        };
        return n.RelationalModel.extend(s)
    }), define("views/linkBankAccount/depositView", ["jquery", "underscore", "hbs!views/linkBankAccount/deposit", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "models/v1/deposit", "components/common/scripts/models/appData", "components/common/scripts/util/formatter", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o, u, a) {
        return r.View.extend({
            className: "link-bank-account-deposit",
            HIGH_BALANCE_THRESHOLD: 5e4,
            LOW_BALANCE_THRESHOLD: 1e4,
            template: n,
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        accountId: {
                            type: "select"
                        },
                        contributionType: {
                            type: "select"
                        },
                        amount: {
                            type: "number",
                            decimals: 0
                        }
                    },
                    onSubmit: function() {
                        this.trigger("next")
                    },
                    onInvalid: function() {
                        this.checkValidationLabel()
                    }
                }
            },
            templateHelpers: {
                accountIdOptions: function() {
                    var e = BMT.accounts().forSelect(),
                        n = {};
                    return t.each(e, function(e, t) {
                        n[parseInt(e.value, 10)] = e.label
                    }), n
                },
                showAccountSelect: function() {
                    return this.self.showSingleAccount() ? "" : "show-select"
                },
                singleAccountName: function() {
                    return this.self.model.get("account").get("name")
                },
                showSingleAccount: function() {
                    return this.self.showSingleAccount()
                },
                contributionType: function() {
                    var e = o.getInstance().contributionsForSelect(this.self.model.get("account"), !0);
                    return t.each(e, function(e, t, n) {
                        n[t] = e.label
                    }), e
                },
                depositAmounts: function() {
                    return this.self.getDepositAmounts()
                }
            },
            ui: {
                noDepositButton: ".secondary-button button",
                contributionSelect: ".input-select.contribution-type",
                depositGroup: ".deposit-group",
                depositOptions: ".deposits li",
                depositInputContainer: ".deposit-input",
                depositInput: ".deposit-input input",
                depositGroupLabel: ".deposit-group label",
                accountSelectPlaceholder: ".account-select .placeholder"
            },
            events: {
                "click @ui.noDepositButton": "onSkipDepositClick",
                "click @ui.depositOptions": "onDepositsClick"
            },
            modelEvents: {
                "change:account": "onAccountChange"
            },
            showSingleAccount: function() {
                return BMT.accounts().length === 1
            },
            shouldShowDepositAnchors: function() {
                var e = this.options.bankBalance;
                return t.isNumber(e) && e > this.LOW_BALANCE_THRESHOLD
            },
            onShow: function() {
                this.trigger("setAnalytics", this.getAnalytics()), this.showSingleAccount() || (this.ui.accountSelectPlaceholder.click(), this.$('.account-select li[data-value="' + this.model.get("account").get("id") + '"]').click()), this.model.has("amount") ? (this.hideDepositAnchors(), this.ui.depositInput.val(this.model.get("amount")).blur()) : this.shouldShowDepositAnchors() || this.hideDepositAnchors()
            },
            hideDepositAnchors: function() {
                this.ui.depositGroup.hide(), this.ui.depositInputContainer.show()
            },
            checkValidationLabel: function() {
                var e = this.ui.depositInput.siblings(".validation").text();
                this.ui.depositGroupLabel.text(e ? e : "Amount to deposit"), this.ui.depositGroupLabel.toggleClass("validation-fail", e ? !0 : !1)
            },
            onDepositsClick: function(n) {
                var r = e(n.currentTarget),
                    i = r.data("value"),
                    s = r.data("category");
                a.track("ElementClicked", t.extend({}, this.getAnalytics(), {
                    Type: "Radio",
                    Name: "PlaidDepositAmountSelected",
                    BankName: this.options.selectedBankKey,
                    AmountCategory: s,
                    Amount: i
                })), i === "other" ? this.ui.depositGroup.slideUp(200, function() {
                    this.ui.depositInputContainer.slideDown(200), this.ui.depositInput.val(""), this.model.unset("amount")
                }.bind(this)) : (this.ui.depositInput.val(parseInt(i, 10)).blur(), this.ui.depositOptions.removeClass("selected"), r.addClass("selected"), this.checkValidationLabel())
            },
            onAccountChange: function() {
                var e = this.model.get("account");
                e.isIRA() ? this.ui.contributionSelect.slideDown() : this.ui.contributionSelect.slideUp(), BMT.selectedAccount = e
            },
            onSkipDepositClick: function() {
                a.track("ElementClicked", t.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "IllTryLater",
                    BankName: this.options.selectedBankKey,
                    Amount: this.model.get("amount")
                })), this.trigger("skipDeposit")
            },
            getDepositAmounts: function() {
                var e = this.options.bankBalance,
                    t = Math.floor(e / this.LOW_BALANCE_THRESHOLD) * this.LOW_BALANCE_THRESHOLD;
                e > this.HIGH_BALANCE_THRESHOLD && (t = Math.floor(e / this.HIGH_BALANCE_THRESHOLD) * this.HIGH_BALANCE_THRESHOLD);
                var n = t / 2;
                return [{
                    category: "HIGH",
                    value: t,
                    name: u.money(t, 0)
                }, {
                    category: "LOW",
                    value: n,
                    name: u.money(n, 0)
                }, {
                    category: "OTHER",
                    value: "other",
                    name: "Other"
                }]
            },
            getAnalytics: function() {
                return {
                    Location: "DepositView"
                }
            }
        })
    }), define("views/linkBankAccount/fundingLayout", ["underscore", "common/betterment.views", "hbs!views/linkBankAccount/fundingViews", "views/linkBankAccount/confirmDepositView", "views/linkBankAccount/depositView", "models/v1/deposit"], function(e, t, n, r, i, s) {
        return t.View.extend({
            className: "funding-layout",
            regions: {
                fundingViews: ".funding-views"
            },
            template: n,
            onRender: function() {
                this.depositModel || (this.depositModel = new s({
                    accountId: BMT.selectedAccount.get("id")
                })), this.listenTo(this, "back", this.routeBackClick), this.showDepositView()
            },
            shouldGoBack: function() {
                return this.fundingViews.currentView === this.confirmDepositView
            },
            routeBackClick: function() {
                this.shouldGoBack() ? this.showDepositView() : this.trigger("restart")
            },
            showDepositView: function() {
                this.depositView = new i({
                    model: this.depositModel,
                    selectedBankKey: this.model.get("selectedBankKey"),
                    bankBalance: this.model.get("selectedDepositoryAccount").balance,
                    accountGroup: this.options.accountGroup
                }), this.listenTo(this.depositView, "skipDeposit", function() {
                    this.closeWithFlash("Your bank account has been linked successfully.", {
                        userInitiated: !0
                    })
                }), this.listenTo(this.depositView, "next", function() {
                    this.showConfirmDeposit()
                }), this.listenTo(this.depositView, "setAnalytics", this.setAnalytics), this.fundingViews.show(this.depositView)
            },
            showConfirmDeposit: function() {
                this.confirmDepositView = new r({
                    model: this.depositModel,
                    selectedDepositoryAccount: this.model.get("selectedDepositoryAccount"),
                    selectedBankKey: this.model.get("selectedBankKey")
                }), this.listenTo(this.confirmDepositView, "depositConfirmed", function() {
                    this.depositModel.get("tradingToday") ? this.trigger("confirmInstantDeposit") : this.closeWithFlash("Your deposit has been created successfully. Your one-time deposit will take 1 business day.")
                }), this.listenTo(this.confirmDepositView, "setAnalytics", this.setAnalytics), this.fundingViews.$el.animate({
                    opacity: 0
                }, 250, function() {
                    this.fundingViews.show(this.confirmDepositView), this.fundingViews.$el.animate({
                        opacity: 1
                    }, 250)
                }.bind(this))
            },
            closeWithFlash: function(e, t) {
                this.trigger("close", t), BMT.flash(e)
            },
            getAnalytics: function() {
                return this.analytics
            },
            setAnalytics: function(e) {
                this.analytics = e
            }
        })
    }), define("hbs!views/linkBankAccount/instantDeposit", ["hbs", "hbs/handlebars", "hbs!components/common/scripts/views/hollowCheckmarkIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), r = this.merge(r, e.partials);
            var s = "",
                o, u = this;
            s += '<div class="header">\n    <div class="checkmark-bubble">', o = u.invokePartial(r["components/common/scripts/views/hollowCheckmarkIcon"], "components/common/scripts/views/hollowCheckmarkIcon", t, n, r);
            if (o || o === 0) s += o;
            return s += '</div>\n    <h1>We will invest your deposit today!</h1>\n</div>\n<div class="main">\n    <p class="body">This deposit qualifies for immediate investment and will trade today. We work hard to provide you with the industry\'s fastest transfers.</p>\n    <p class="body">Note &mdash; funds will be withdrawn from your bank account the next business day.</p>\n    <div class="buttons">\n        <div class="submit-button">\n            <button type="button">Great, got it</button>\n        </div>\n    </div>\n</div>', s
        });
        return t.registerPartial("views/linkBankAccount/instantDeposit", n), n
    }), define("views/linkBankAccount/instantDepositView", ["underscore", "hbs!views/linkBankAccount/instantDeposit", "common/betterment.views", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r) {
        return n.View.extend({
            className: "instant-deposit",
            template: t,
            events: {
                "click .submit-button > button": "confirm"
            },
            onShow: function() {
                r.track("ElementViewed", e.extend({}, this.getAnalytics(), {
                    Name: "InstantDepositViewed",
                    BankName: this.options.selectedBankKey
                }))
            },
            confirm: function() {
                r.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "GreatGotIt",
                    BankName: this.options.selectedBankKey
                })), this.trigger("close", {
                    userInitiated: !0
                })
            },
            getAnalytics: function() {
                return {
                    Location: "InstantDepositView"
                }
            }
        })
    }), define("hbs!views/linkBankAccount/linkBankViews", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="link-bank-views"></div>'
        });
        return t.registerPartial("views/linkBankAccount/linkBankViews", n), n
    }), define("models/v1/bankAuthentication", ["underscore", "models/v1/baseModels", "services/plaidService"], function(e, t, n) {
        var r = {
                relatedModels: ["accountGroup"],
                validation: {
                    username: {
                        required: !0,
                        msg: "Please enter your online banking username"
                    },
                    password: {
                        required: !0,
                        msg: "Please enter your online banking password"
                    },
                    pin: function(e, t, n, r) {
                        return this.getBankData().pinRequired && !e ? "Please enter your online banking pin" : !1
                    }
                },
                getBankData: function() {
                    return n.supportedBankData[this.get("type")]
                },
                endpoint: function() {
                    return this.get("accountGroup").getEndpoint() + "/bank-authentications"
                },
                parse: function(e, t) {
                    return this.unset("username", {
                        silent: !0
                    }), this.unset("password", {
                        silent: !0
                    }), e
                },
                save: function(n, r) {
                    return BMT.user.bankAccount() && BMT.user.bankAccount().needsAuthUpdate() && (r = e.extend(r || {}, {
                        type: "PATCH"
                    })), t.Model.prototype.save.call(this, n, r)
                }
            },
            i = t.Model.extend(r);
        return i
    }), define("models/v1/mfaAnswer", ["underscore", "models/v1/baseModels"], function(e, t) {
        var n = {
                relatedModels: ["bankAuthentication"],
                validation: {
                    answer: {
                        required: !0,
                        msg: "Please enter your verification information"
                    }
                },
                endpoint: function() {
                    return this.get("bankAuthentication").getEndpoint() + "/mfa-answers"
                },
                parse: function(e, t) {
                    return this.unset("answer", {
                        silent: !0
                    }), this.unset("mfaType", {
                        silent: !0
                    }), this.unset("mfaMessage", {
                        silent: !0
                    }), e
                },
                save: function(n, r) {
                    return BMT.user.bankAccount() && BMT.user.bankAccount().needsAuthUpdate() && (r = e.extend(r || {}, {
                        type: "PATCH"
                    })), t.Model.prototype.save.call(this, n, r)
                },
                isNew: function() {
                    return !0
                }
            },
            r = t.Model.extend(n);
        return r
    }), define("hbs!components/common/scripts/templates/inputText", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="input-text ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <input name="', (u = n.propertyName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.propertyName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n    <div class="field-loader-img loader"></div>\n</div>\n', s
        });
        return t.registerPartial("components/common/scripts/templates/inputText", n), n
    }), define("components/common/scripts/templateHelpers/inputText", ["hbs/handlebars", "hbs!components/common/scripts/templates/inputText"], function(e, t) {
        e.registerHelper("inputText", function(n, r) {
            var i = {
                propertyName: n,
                className: r.hash.className || n,
                label: r.hash.label || n
            };
            return new e.SafeString(t(i))
        })
    }), define("hbs!components/common/scripts/templates/inputPassword", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="input-password ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <input name="', (u = n.propertyName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.propertyName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" type="password" />\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n    <div class="field-loader-img loader"></div>\n</div>\n', s
        });
        return t.registerPartial("components/common/scripts/templates/inputPassword", n), n
    }), define("components/common/scripts/templateHelpers/inputPassword", ["hbs/handlebars", "hbs!components/common/scripts/templates/inputPassword"], function(e, t) {
        e.registerHelper("inputPassword", function(n, r) {
            var i = {
                propertyName: n,
                className: r.hash.className || n,
                label: r.hash.label || n
            };
            return new e.SafeString(t(i))
        })
    }), define("hbs!views/linkBankAccount/linkBank", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputText", "components/common/scripts/templateHelpers/inputPassword", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "Relink"
            }

            function d(e, t) {
                return "Link"
            }

            function v(e, t) {
                var r = "",
                    i, s;
                return r += "\n        " + l((i = n.inputPassword || e && e.inputPassword, s = {
                    hash: {
                        className: "pin",
                        label: "Pin"
                    }
                }, i ? i.call(e, "pin", s) : f.call(e, "inputPassword", "pin", s))) + "\n    ", r
            }

            function m(e, t) {
                return '\n            <a href="#" class="manual-link">Don\'t use online banking?</a>\n        '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = this,
                h = "function";
            s += "<h1>", o = n["if"].call(t, t && t.isRelink, {
                hash: {},
                inverse: c.program(3, d, i),
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += ' your bank</h1>\n<p class="body">', o = n["if"].call(t, t && t.isRelink, {
                hash: {},
                inverse: c.program(3, d, i),
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += ' instantly by entering your bank username and <span class="auth-type">', (u = n.authType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.authType, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</span> below.", (u = n.authHelperText) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.authHelperText, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</p>\n<form>\n    " + l((u = n.inputText || t && t.inputText, a = {
                hash: {
                    label: "Username"
                }
            }, u ? u.call(t, "username", a) : f.call(t, "inputText", "username", a))) + "\n    ", o = (u = n.authType || t && t.authType, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "authType", a)), s += l((u = n.inputPassword || t && t.inputPassword, a = {
                hash: {
                    className: "password",
                    label: o
                }
            }, u ? u.call(t, "password", a) : f.call(t, "inputPassword", "password", a))) + "\n    ", o = n["if"].call(t, t && t.pinRequired, {
                hash: {},
                inverse: c.noop,
                fn: c.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n    <div class="learn-more-data">\n        How is this information used?\n    </div>\n    <div class="help-content">\n        By using this service, we will retrieve your account and routing numbers from your bank via Plaid, a third-party service. By using Plaid, you agree to the terms <a href="http://support.betasmartz.com/customer/portal/articles/1625876-linking-bank-account-to-betterment-with-plaid" target="_blank">here</a> and in your client agreements.\n    </div>\n    <div class="buttons">\n        ' + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Connect bank", a) : f.call(t, "submitButton", "Connect bank", a))) + "\n        ", o = n.unless.call(t, t && t.isRelink, {
                hash: {},
                inverse: c.noop,
                fn: c.program(7, m, i)
            });
            if (o || o === 0) s += o;
            return s += "\n    </div>\n</form>\n", s
        });
        return t.registerPartial("views/linkBankAccount/linkBank", n), n
    }), define("views/linkBankAccount/linkBankView", ["underscore", "hbs!views/linkBankAccount/linkBank", "common/betterment.views", "services/plaidService", "components/common/scripts/behaviors/editableForm", "common/errorHandler", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o) {
        return n.View.extend({
            className: "link-bank",
            ui: {
                manualLink: ".manual-link",
                learnMore: ".learn-more-data",
                helpContent: ".help-content"
            },
            events: {
                "click @ui.manualLink": "loadManualFlow",
                "click @ui.learnMore": "toggleHelpContent"
            },
            template: t,
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        username: {
                            type: "text"
                        },
                        password: {
                            type: "text"
                        },
                        pin: {
                            type: "text"
                        }
                    },
                    onSubmit: function() {
                        this.submitPlaidAccountInfo(!0)
                    }
                }
            },
            templateHelpers: {
                pinRequired: function() {
                    return this.self.model.getBankData().pinRequired
                },
                authType: function() {
                    return "Bank " + this.self.model.getBankData().authType
                },
                authHelperText: function() {
                    return this.self.model.getBankData().authHelperText ? " " + this.self.model.getBankData().authHelperText : ""
                },
                isRelink: function() {
                    return this.self.isRelink()
                }
            },
            modelEvents: {
                sync: "handleSuccess",
                error: "handleError"
            },
            onInitialize: function() {
                this.hasSeenUnknownError = !1
            },
            onShow: function() {
                this.trigger("setAnalytics", this.getAnalytics())
            },
            isRelink: function() {
                return this.options.relink || !1
            },
            loadManualFlow: function(t) {
                t && o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Link",
                    Name: "SwitchToManualLink",
                    BankName: this.model.get("type")
                })), this.trigger("manualFlow")
            },
            submitPlaidAccountInfo: function(t) {
                t && o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "PlaidBankLinkRequested",
                    BankName: this.model.get("type")
                })), this.trigger("block"), this.model.save({}, {
                    skipErrorAlert: !0
                })
            },
            handleSuccess: function() {
                this.trigger("unblock"), r.isMfaResponse(this.model) ? this.trigger("verifyMfa") : this.trigger("selectPlaid")
            },
            handleError: function(t, n) {
                o.track("Error", e.extend({}, this.getAnalytics(), {
                    Name: "PlaidError",
                    BankName: this.model.get("type")
                })), this.trigger("unblock");
                var i = s.getErrorCodeIfExists(n);
                if (i) BMT.alert(s.getErrorContentForCode(i));
                else {
                    var u = this.getJsonFromResponse(n),
                        a = r.getErrorDetailsFromPlaidErrorResponse(u, !this.hasSeenUnknownError, this.isRelink());
                    a.isUnknown && (this.hasSeenUnknownError ? this.isRelink() ? a.alertOptions.handler = function() {
                        o.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkCloseRelinkFlow",
                            BankName: this.model.get("type")
                        }), this.trigger("close")
                    }.bind(this) : a.alertOptions.handler = function() {
                        o.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkSwitchToManualFlow",
                            BankName: this.model.get("type")
                        }), this.loadManualFlow()
                    }.bind(this) : a.alertOptions.handler = function() {
                        o.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkTryAgain",
                            BankName: this.model.get("type")
                        }), this.submitPlaidAccountInfo()
                    }.bind(this), this.hasSeenUnknownError = !0), o.track("ElementViewed", {
                        Location: this.getAnalytics().Location + "AlertModal",
                        BankName: this.model.get("type")
                    }), BMT.alert(a.alertOptions)
                }
            },
            getJsonFromResponse: function(e) {
                var t;
                try {
                    t = $.parseJSON(e.responseText)
                } catch (n) {}
                return t
            },
            getAnalytics: function() {
                return {
                    Location: "LinkBankView"
                }
            },
            toggleHelpContent: function() {
                this.ui.learnMore.hasClass("open") ? (o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Link",
                    Name: "HowIsThisInformationUsedClosed",
                    BankName: this.model.get("type")
                })), this.ui.learnMore.removeClass("open"), this.ui.helpContent.slideUp()) : (o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Link",
                    Name: "HowIsThisInformationUsedOpened",
                    BankName: this.model.get("type")
                })), this.ui.learnMore.addClass("open"), this.ui.helpContent.slideDown())
            }
        })
    }), define("hbs!views/linkBankAccount/verification", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputText", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<h1>Verification</h1>\n<p class="body">', (u = n.mfaCopy) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.mfaCopy, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</p>\n<form>\n    ", o = (u = n.mfaInputPlaceholder || t && t.mfaInputPlaceholder, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "mfaInputPlaceholder", a)), s += l((u = n.inputText || t && t.inputText, a = {
                hash: {
                    className: "mfaResponse",
                    label: o
                }
            }, u ? u.call(t, "answer", a) : c.call(t, "inputText", "answer", a))) + '\n    <div class="buttons">\n        ' + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Verify bank", a) : c.call(t, "submitButton", "Verify bank", a))) + "\n    </div>\n</form>", s
        });
        return t.registerPartial("views/linkBankAccount/verification", n), n
    }), define("views/linkBankAccount/verificationView", ["jquery", "underscore", "hbs!views/linkBankAccount/verification", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "services/plaidService", "common/errorHandler", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o, u) {
        return r.View.extend({
            className: "verification",
            template: n,
            behaviors: {
                EditableForm: {
                    behaviorClass: i,
                    fields: {
                        answer: {
                            type: "text"
                        }
                    },
                    onSubmit: function() {
                        this.submitMfa(!0)
                    }
                }
            },
            templateHelpers: {
                mfaCopy: function() {
                    var e;
                    return this.self.getMfaResponseType() === "questions" ? e = "Question: " + this.self.getMfaMessage() : e = this.self.getMfaMessage() + " Please enter the code you received to verify you own this account.", e
                },
                mfaInputPlaceholder: function() {
                    return this.self.getMfaResponseType() === "questions" ? "Answer" : "Enter Code"
                }
            },
            modelEvents: {
                sync: "handleSuccess",
                error: "handleError"
            },
            onInitialize: function() {
                this.hasSeenUnknownError = !1
            },
            onShow: function() {
                this.trigger("setAnalytics", this.getAnalytics())
            },
            loadManualFlow: function() {
                this.trigger("manualFlow")
            },
            bankAuthentication: function() {
                return this.model.get("bankAuthentication")
            },
            getMfaResponseType: function() {
                return s.typeOfMfaResponse(this.model)
            },
            getMfaMessage: function() {
                return s.getMfaResponse(this.model).message
            },
            handleSuccess: function() {
                this.trigger("unblock"), s.isMfaResponse(this.model) ? this.trigger("verifyMfa") : (this.bankAuthentication().set("depositoryAccounts", this.model.get("depositoryAccounts")), this.trigger("selectPlaid"))
            },
            handleError: function(e, n) {
                u.track("Error", t.extend({}, this.getAnalytics(), {
                    Name: "PlaidError",
                    BankName: this.bankAuthentication().get("type")
                })), this.trigger("unblock");
                var r = o.getErrorCodeIfExists(n);
                if (r) BMT.alert(o.getErrorContentForCode(r));
                else {
                    var i = this.getJsonFromResponse(n),
                        a = s.getErrorDetailsFromPlaidErrorResponse(i, !this.hasSeenUnknownError);
                    a.isUnknown ? (this.hasSeenUnknownError ? a.alertOptions.handler = function() {
                        u.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkSwitchToManualFlow",
                            BankName: this.model.get("type")
                        }), this.loadManualFlow()
                    }.bind(this) : a.alertOptions.handler = function() {
                        u.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkTryAgain",
                            BankName: this.model.get("type")
                        }), this.submitMfa()
                    }.bind(this), this.hasSeenUnknownError = !0) : a.code !== "incorrectMfaAnswer" && (a.alertOptions.handler = function() {
                        u.track("ElementClicked", {
                            Location: this.getAnalytics().Location + "AlertModal",
                            Type: "Button",
                            Name: "OkSwitchToManualFlow",
                            BankName: this.model.get("type")
                        }), this.loadManualFlow()
                    }.bind(this)), u.track("ElementViewed", {
                        Location: this.getAnalytics().Location + "AlertModal",
                        BankName: this.bankAuthentication().get("type")
                    }), BMT.alert(a.alertOptions)
                }
            },
            submitMfa: function(e) {
                e && u.track("ElementClicked", t.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "PlaidMfaSubmitted",
                    BankName: this.bankAuthentication().get("type")
                })), this.trigger("block"), this.model.save({}, {
                    skipErrorAlert: !0
                })
            },
            getJsonFromResponse: function(t) {
                var n;
                try {
                    n = e.parseJSON(t.responseText)
                } catch (r) {}
                return n
            },
            getAnalytics: function() {
                return {
                    Location: "VerificationView"
                }
            }
        })
    }), define("views/linkBankAccount/linkBankLayout", ["hbs!views/linkBankAccount/linkBankViews", "common/betterment.views", "models/v1/bankAuthentication", "models/v1/mfaAnswer", "views/linkBankAccount/linkBankView", "views/linkBankAccount/verificationView"], function(e, t, n, r, i, s) {
        return t.View.extend({
            className: "link-bank-layout",
            regions: {
                linkBankViews: ".link-bank-views"
            },
            template: e,
            getBankAuthenticationModel: function() {
                return this.bankAuthenticationModel || (this.bankAuthenticationModel = new n({
                    type: this.model.get("selectedBankKey"),
                    accountGroup: this.options.accountGroup
                })), this.bankAuthenticationModel
            },
            getMfaAnswer: function() {
                if (!this.mfaAnswer) {
                    var e = this.getBankAuthenticationModel();
                    this.mfaAnswer = new r({
                        bankAuthentication: e,
                        mfaMessage: e.get("mfaMessage"),
                        mfaType: e.get("mfaType")
                    })
                }
                return this.mfaAnswer
            },
            onRender: function() {
                this.model.unset("selectedDepositoryAccount"), this.linkBankView = new i({
                    relink: !1,
                    model: this.getBankAuthenticationModel()
                }), this.listenTo(this.linkBankView, "verifyMfa", function() {
                    this.showVerification()
                }), this.listenTo(this.linkBankView, "selectPlaid", function() {
                    this.trigger("next selectPlaid", {
                        bankAuthentication: this.getBankAuthenticationModel()
                    })
                }), this.listenTo(this.linkBankView, "manualFlow", function() {
                    this.trigger("manualFlow", {
                        selectedBankValue: this.getBankAuthenticationModel().getBankData()
                    })
                }), this.listenTo(this.linkBankView, "close", function() {
                    this.trigger("close")
                }), this.listenTo(this.linkBankView, "block", function() {
                    this.trigger("block")
                }), this.listenTo(this.linkBankView, "unblock", function() {
                    this.trigger("unblock")
                }), this.listenTo(this.linkBankView, "setAnalytics", this.setAnalytics), this.linkBankViews.show(this.linkBankView)
            },
            showVerification: function() {
                var e = new s({
                    model: this.getMfaAnswer()
                });
                this.listenTo(e, "verifyMfa", function() {
                    this.showVerification()
                }), this.listenTo(e, "selectPlaid", function() {
                    this.trigger("next selectPlaid", {
                        bankAuthentication: this.getBankAuthenticationModel()
                    })
                }), this.listenTo(e, "manualFlow", function() {
                    this.trigger("manualFlow", {
                        selectedBankValue: this.getBankAuthenticationModel().getBankData()
                    })
                }), this.listenTo(e, "block", function() {
                    this.trigger("block")
                }), this.listenTo(e, "unblock", function() {
                    this.trigger("unblock")
                }), this.listenTo(e, "setAnalytics", this.setAnalytics), this.linkBankViews.$el.animate({
                    opacity: 0
                }, 250, function() {
                    this.linkBankViews.show(e), this.linkBankViews.$el.animate({
                        opacity: 1
                    }, 250)
                }.bind(this))
            },
            getAnalytics: function() {
                return this.analytics
            },
            setAnalytics: function(e) {
                this.analytics = e
            }
        })
    }), define("hbs!views/linkBankAccount/manualLinkBank", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputText", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<h1>Link your bank</h1>\n<p class="body">Enter your routing and account numbers below.</p>\n<form>\n    ' + f((o = n.inputText || t && t.inputText, u = {
                hash: {
                    label: "Routing number"
                }
            }, o ? o.call(t, "routingNumber", u) : a.call(t, "inputText", "routingNumber", u))) + "\n    " + f((o = n.inputText || t && t.inputText, u = {
                hash: {
                    label: "Account number"
                }
            }, o ? o.call(t, "accountNumber", u) : a.call(t, "inputText", "accountNumber", u))) + '\n    <div class="buttons">\n        ' + f((o = n.submitButton || t && t.submitButton, u = {
                hash: {}
            }, o ? o.call(t, "Connect bank", u) : a.call(t, "submitButton", "Connect bank", u))) + '\n        <a href="#" class="plaid-link">Have a bank username and password?</a>\n    </div>\n</form>', s
        });
        return t.registerPartial("views/linkBankAccount/manualLinkBank", n), n
    }), define("views/linkBankAccount/manualLinkBankView", ["underscore", "hbs!views/linkBankAccount/manualLinkBank", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "views/profile/securityQuestionView", "common/errorHandler", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r, i, s, o) {
        return n.View.extend({
            className: "manual-link-bank",
            template: t,
            ui: {
                plaidLink: ".plaid-link",
                routingNumber: "input[name=routingNumber]"
            },
            events: {
                "click @ui.plaidLink": "loadPlaidFlow"
            },
            modelEvents: {
                "sync:create": "fetchBankAccount clearSecurityQuestions trackSuccess",
                error: "clearSecurityQuestions handleError"
            },
            behaviors: {
                EditableForm: {
                    behaviorClass: r,
                    fields: {
                        routingNumber: {
                            type: "text"
                        },
                        accountNumber: {
                            type: "text"
                        }
                    },
                    onSubmit: function() {
                        this.onConnectBank()
                    }
                }
            },
            onConnectBank: function() {
                o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "ManualBankLinkRequested",
                    BankName: this.options.selectedBankKey
                })), this.options.accountGroup.is("hasHadBankAccount") ? this.askSecurityQuestion(this.submitRoutingAccountInfo) : (this.trigger("block"), this.submitRoutingAccountInfo())
            },
            askSecurityQuestion: function(t) {
                this.securityQuestionView = new i(e.extend({
                    title: "Security Confirmation",
                    body: "Please answer the following security question to update your checking account.",
                    handler: function(e) {
                        e && (this.securityQuestionView.block(), t(e))
                    }.bind(this)
                }, BMT.user.randomSecurityQuestion())), BMT.modal.show(this.securityQuestionView)
            },
            submitRoutingAccountInfo: function(e) {
                this.hasAskedSecurityQuestion = !!e, this.model.save(e)
            },
            clearSecurityQuestions: function() {
                this.hasAskedSecurityQuestion && (i.removeResults(this.model), BMT.modal.close(this.securityQuestionView)), this.trigger("unblock")
            },
            handleError: function(t, n, r) {
                o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "PlaidError",
                    BankName: this.options.selectedBankKey
                }));
                var i = s.getErrorCodeIfExists(n);
                i === "BANK_ACCOUNT_EXISTS" && (this.ui.routingNumber.val("").focus(), this.model.unset("routingNumber"))
            },
            trackSuccess: function() {
                o.track("BankUpdateSucceeded", e.extend({}, this.getAnalytics(), {
                    BankName: this.options.selectedBankKey
                })), BMT.vent.trigger("linkBankAccount:bankSaved")
            },
            fetchBankAccount: function() {
                this.listenToOnce(BMT.user, "sync", this.goToNext), BMT.user.fetch()
            },
            goToNext: function() {
                this.trigger("next")
            },
            loadPlaidFlow: function() {
                o.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Link",
                    Name: "SwitchToPlaidLink",
                    BankName: this.options.selectedBankKey
                })), this.trigger("plaidFlow")
            },
            getAnalytics: function() {
                return {
                    Location: "ManualLinkBankView"
                }
            }
        })
    }), define("hbs!views/linkBankAccount/manualVerification", ["hbs", "hbs/handlebars", "hbs!components/common/scripts/views/hollowCheckmarkIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += ' on <span class="' +
                    '' +
                    '-deposit-date">', (s = n.expectedDepositDate) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.expectedDepositDate, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</span>", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), r = this.merge(r, e.partials);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="header">\n    <div class="checkmark-bubble">', o = f.invokePartial(r["components/common/scripts/views/hollowCheckmarkIcon"], "components/common/scripts/views/hollowCheckmarkIcon", t, n, r);
            if (o || o === 0) s += o;
            s += '</div>\n    <h1>Verify your checking account</h1>\n</div>\n<div class="main">\n    <p class="body">We will post two deposits under $1.00 to your checking account', o = n["if"].call(t, t && t.expectedDepositDate, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '.</p>\n    <p class="body">You will receive a reminder to verify the amounts <nobr>from support@betasmartz.com</nobr></p>\n    <div class="buttons">\n        <div class="submit-button">\n            <button type="button">Great, got it</button>\n        </div>\n    </div>\n</div>', s
        });
        return t.registerPartial("views/linkBankAccount/manualVerification", n), n
    }), define("views/linkBankAccount/manualVerificationView", ["underscore", "hbs!views/linkBankAccount/manualVerification", "common/betterment.views", "views/linkBankAccount/analytics/linkBankAnalytics"], function(e, t, n, r) {
        return n.View.extend({
            className: "manual-verification",
            ui: {
                done: "button"
            },
            events: {
                "click @ui.done": "done"
            },
            template: t,
            templateHelpers: {
                expectedDepositDate: function() {
                    return e.isUndefined(this.self.model.get("expectedVerificationDepositDate")) ? "" : this.dayMonthDateYear(this.self.model.date("expectedVerificationDepositDate"))
                }
            },
            onShow: function() {
                r.track("ElementViewed", e.extend({}, this.getAnalytics(), {
                    Name: "ManualVerificationViewed",
                    BankName: this.options.selectedBankKey
                }))
            },
            done: function() {
                r.track("ElementClicked", e.extend({}, this.getAnalytics(), {
                    Type: "Button",
                    Name: "GreatGotIt",
                    BankName: this.options.selectedBankKey
                })), this.trigger("close", {
                    userInitiated: !0
                })
            },
            getAnalytics: function() {
                return {
                    Location: "ManualVerificationView"
                }
            }
        })
    }), define("models/bankAccount", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
            methodUrls: {
                read: function() {
                    return "/api/legacy/v2/bank_accounts/" + this.id
                },
                create: "/bankAccount",
                update: "/bankAccount",
                patch: "/bankAccount",
                "delete": "/bankAccount"
            },
            sync: function(e, n, i) {
                var s = this.methodUrls[e];
                return t.isFunction(s) ? i.url = s.apply(this) : i.url = s, r.RelationalModel.prototype.sync.call(this, e, n, i)
            },
            onInitialize: function() {
                t.extend(this, new n.Memento(this))
            },
            isPlaidEnabled: function() {
                return this.get("linkType") === "plaid"
            },
            needsAuthUpdate: function() {
                return this.isPlaidEnabled() && this.get("plaidStatus") !== "normal"
            },
            isActiveAndConfirmed: function() {
                return this.is("active") && this.is("confirmed")
            },
            validation: {
                routingNumber: function(e, t, n) {
                    if (e) {
                        if (/^\d{9}$/.exec(e)) {
                            var r = e,
                                i = r.substring(0, 1) * 3 + r.substring(1, 2) * 7 + r.substring(2, 3) * 1 + r.substring(3, 4) * 3 + r.substring(4, 5) * 7 + r.substring(5, 6) * 1 + r.substring(6, 7) * 3 + r.substring(7, 8) * 7 + r.substring(8, 9) * 1;
                            return i % 10 !== 0 || i === 0 ? "Not a valid routing number" : !1
                        }
                        return "Routing number must be 9 digits"
                    }
                    return "Routing number is required"
                },
                accountNumber: function(e, t, n) {
                    return e ? /^\d{5,17}$/.exec(e) ? !1 : "Account number must be between 5 and 17 digits" : "Account number is required"
                },
                verDep1: {
                    required: !0,
                    range: [1, 99],
                    msg: "Required"
                },
                verDep2: {
                    required: !0,
                    range: [1, 99],
                    msg: "Required"
                }
            }
        }, {});
        return i
    }), define("views/linkBankAccount/setupView", ["underscore", "backbone", "hbs!views/linkBankAccount/setup", "hbs!views/linkBankAccount/bankLogo", "common/betterment.views", "models/v1/depositoryAccountSelection", "components/progressNav/scripts/progressNavView", "components/bubble/scripts/balanceBubbleView", "views/linkBankAccount/chooseAccountView", "views/linkBankAccount/chooseBankView", "views/linkBankAccount/fundingLayout", "views/linkBankAccount/instantDepositView", "views/linkBankAccount/linkBankLayout", "views/linkBankAccount/manualLinkBankView", "views/linkBankAccount/manualVerificationView", "services/plaidService", "components/common/scripts/util/formatter", "views/linkBankAccount/analytics/linkBankAnalytics", "models/bankAccount"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y) {
        var b = {
            label: "Choose bank",
            showProgressBar: !0,
            showSidebar: !1,
            showBackArrow: !1,
            view: f
        };
        return i.View.extend({
            className: "link-bank-account",
            template: n,
            regions: {
                progressRegion: ".progress-region",
                sidebarRegion: ".sidebar",
                contentRegion: ".content-region"
            },
            plaidFlow: [b, {
                label: "Link bank",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: h
            }, {
                label: "Choose account",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: a,
                model: function() {
                    return new s({
                        bankAuthentication: this.model.get("bankAuthentication")
                    })
                }
            }, {
                label: "Funding",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                letViewHandleBack: !0,
                view: l
            }],
            manualFlow: [b, {
                label: "Link bank",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: p,
                model: function() {
                    return new y
                }
            }, {
                label: "Verify",
                showProgressBar: !1,
                showSidebar: !1,
                showBackArrow: !1,
                view: d,
                model: function() {
                    return this.getAccountGroup().get("bankAccount")
                }
            }],
            relinkFlow: [{
                label: "Link bank",
                showProgressBar: !0,
                showSidebar: !0,
                showBackArrow: !0,
                view: h
            }],
            onInitialize: function() {
                this.initialBankAccountId = this.getAccountGroup().get("bankAccount") && this.getAccountGroup().get("bankAccount").id
            },
            onRender: function() {
                this.listenTo(this, "closeModalLayout", this.onModalClose), this.model = new t.Model, this.bubbleView = new u, this.sidebarRegion.show(this.bubbleView), this.isRelink() ? this.loadRelinkFlow() : this.loadPlaidFlow()
            },
            loadFlow: function(e, t) {
                this.flow = e, this.progressView = new o({
                    steps: this.flow
                }), this.listenTo(this.progressView, "back", this.showPreviousStep), this.progressRegion.show(this.progressView), this.showStep(this.flow[t])
            },
            loadPlaidFlow: function() {
                this.options.skipFundingStep && this.removeFundingStep(), this.loadFlow(this.plaidFlow, 0)
            },
            loadManualFlow: function() {
                this.trigger("manualFlow"), this.loadFlow(this.manualFlow, 1), this.updateBubble()
            },
            loadRelinkFlow: function() {
                this.model.set("selectedBankKey", BMT.user.bankAccount().get("plaidBankType").toUpperCase()), this.loadFlow(this.relinkFlow, 0), this.updateBubble()
            },
            transition: function(e, t, n) {
                this.contentRegion.$el.animate({
                    opacity: 0
                }, 200, function() {
                    this.transitionRegions(e, t, n)
                }.bind(this))
            },
            transitionRegions: function(e, t, n) {
                this.progressRegion.$el.toggleClass("shown", t && !this.options.alwaysHideProgress), this.contentRegion.show(e), this.contentRegion.$el.toggleClass("with-sidebar", n), this.sidebarRegion.$el.toggleClass("shown", n), this.contentRegion.$el.animate({
                    opacity: 1
                }, 200)
            },
            showStep: function(t) {
                var n = this.flow.indexOf(t),
                    r = e.isFunction(t.model) ? t.model.call(this) : this.model,
                    i = new t.view({
                        model: r,
                        selectedBankKey: this.model.get("selectedBankKey"),
                        accountGroup: this.getAccountGroup()
                    });
                n === 0 && this.contentRegion.show(i).$el.css({
                    opacity: 0
                }), this.progressView.setActiveStep(n, t.showBackArrow), this.currentStepIndex = n, this.listenTo(i, "updateBubble", this.updateBubble), this.listenTo(i, "flashBubbleSuccess", this.flashBubbleSuccess), this.listenTo(i, "confirmInstantDeposit", this.showInstantDeposit), this.listenTo(i, "block", function() {
                    this.trigger("block")
                }), this.listenTo(i, "unblock", function() {
                    this.trigger("unblock")
                }), this.listenTo(i, "close", this.closeFlow), this.listenTo(i, "plaidFlow", this.loadPlaidFlow), this.listenTo(i, "manualFlow", this.loadManualFlow), this.listenTo(i, "next", function(e) {
                    this.model.set(e), this.showNextStep(t, i)
                }), this.listenTo(i, "restart", this.loadPlaidFlow), this.listenTo(i, "selectPlaid", function(e) {
                    this.isRelink() && (BMT.flash("Your bank account has been relinked successfully."), this.listenTo(BMT.user, "sync", BMT.refreshBanners), BMT.user.fetch(), this.closeFlow())
                }), this.listenTo(i, "accountSelected", function(e) {
                    this.options.skipFundingStep && this.closeFlow()
                }), this.transition(i, t.showProgressBar, t.showSidebar)
            },
            showNextStep: function(e, t) {
                var n = this.currentStepIndex + 1;
                n < this.flow.length && this.showStep(this.flow[n])
            },
            showPreviousStep: function() {
                var e = this.currentStepIndex - 1;
                this.trackBackArrow(), this.flow[this.currentStepIndex].letViewHandleBack ? this.contentRegion.currentView.trigger("back") : e >= 0 && (e === 0 && this.flow === this.manualFlow ? this.loadPlaidFlow() : this.showStep(this.flow[e]))
            },
            showInstantDeposit: function() {
                var e = new c({
                    selectedBankKey: this.model.get("selectedBankKey")
                });
                this.listenTo(e, "close", this.closeFlow), this.transition(e, !1, !1)
            },
            removeFundingStep: function() {
                var t = e.findIndex(this.plaidFlow, function(e) {
                    return e.label === "Funding"
                });
                t !== -1 && this.plaidFlow.splice(t, 1)
            },
            updateBubble: function() {
                var e = v.supportedBankData[this.model.get("selectedBankKey")];
                if (e) {
                    var t = this.model.has("selectedDepositoryAccount") ? this.model.get("selectedDepositoryAccount").balance : "";
                    this.bubbleView.setBackgroundColor(e.color), this.bubbleView.setContent({
                        topContent: r({
                            abbr: e.abbr
                        }),
                        bottomLabel: "Balance",
                        bottomValue: t ? m.money(t, 0) : ""
                    }), this.bubbleView.toggleBalance(this.model.has("selectedDepositoryAccount"))
                } else this.bubbleView.setContent({
                    topContent: r({
                        abbr: "manual"
                    })
                }), this.bubbleView.setBackgroundColor()
            },
            flashBubbleSuccess: function() {
                this.bubbleView.flashSuccess(this.updateBubble)
            },
            closeFlow: function(e) {
                e && e.userInitiated ? this.trackUserInitiatedClose() : this.trackFlowComplete(), this.trigger("close"), this.refreshTransfer()
            },
            onModalClose: function() {
                this.trackUserInitiatedClose(), this.refreshTransfer(), this.hasLinkedBankAccount() && this.hasChangedBankAccount() && !this.isRelink() && BMT.flash("Your bank account has been linked successfully.")
            },
            refreshTransfer: function() {
                BMT.currentPage === "transfer" && this.hasLinkedBankAccount() && BMT.vent.trigger("refresh:transfer")
            },
            hasLinkedBankAccount: function() {
                return this.getAccountGroup().get("bankAccount").is("active")
            },
            isRelink: function() {
                return this.options.relink || !1
            },
            hasChangedBankAccount: function() {
                return this.initialBankAccountId !== this.getAccountGroup().get("bankAccount").id
            },
            getAccountGroup: function() {
                return this.options.accountGroup
            },
            trackBackArrow: function() {
                g.track("ElementClicked", e.extend({}, this.getViewAnalytics(), {
                    Type: "Button",
                    Name: "BackArrow",
                    BankName: this.model.get("selectedBankKey")
                }))
            },
            trackUserInitiatedClose: function() {
                g.track("ElementClicked", e.extend({}, this.getViewAnalytics(), {
                    Type: "Button",
                    Name: "UserClosed",
                    BankName: this.model.get("selectedBankKey")
                }))
            },
            trackFlowComplete: function() {
                g.track("ElementClosed", e.extend({}, this.getViewAnalytics(), {
                    Name: "FullScreenTakeOverModal",
                    BankName: this.model.get("selectedBankKey")
                }))
            },
            getViewAnalytics: function() {
                var t = this.contentRegion.currentView;
                return e.isFunction(t.getAnalytics) ? t.getAnalytics() : {}
            },
            onBeforeDestroy: function() {
                this.transitionRegions = function() {}
            }
        })
    }), define("views/transfer/smartDeposits/setupWithPlaidView", ["underscore", "backbone", "common/betterment.views", "hbs!views/transfer/smartDeposits/setupWithPlaid", "services/accountService", "components/progressNav/scripts/progressNavView", "views/transfer/smartDeposits/splashView", "views/transfer/smartDeposits/unlinkBankAccountView", "views/transfer/smartDeposits/ineligibleBankView", "views/transfer/smartDeposits/setupView", "views/linkBankAccount/setupView"], function(e, t, n, r, i, s, o, u, a, f, l) {
        return n.View.extend({
            className: "smart-deposits-master",
            template: r,
            regions: {
                progressRegion: ".progress-container",
                mainRegion: ".main-container"
            },
            progressSteps: [{
                label: "Link Bank"
            }, {
                label: "Choose Account",
                name: "chooseGoalStep"
            }, {
                label: "Max Balance"
            }, {
                label: "Max Deposit"
            }, {
                label: "Confirmation"
            }],
            onRender: function() {
                this.hasAccountReady() && this.removeChooseGoalProgressStep(), this.progressView = new s({
                    steps: this.progressSteps
                }), this.listenTo(this.progressView, "back", this.showPreviousStep), this.progressRegion.show(this.progressView), this.stepIndex = 0, this.showSplash()
            },
            hasAccountReady: function() {
                return this.model || BMT.accounts().withSmartDepositEligible().length === 1
            },
            removeChooseGoalProgressStep: function() {
                var t = e.findIndex(this.progressSteps, function(e) {
                    return e.name === "chooseGoalStep"
                });
                t !== -1 && this.progressSteps.splice(t, 1)
            },
            showSplash: function() {
                var e = new o({
                    model: this.model
                });
                BMT.user.bankAccount() && BMT.user.bankAccount().is("active") ? this.listenToOnce(e, "next", this.showUnlinkBankAccountStep) : this.listenToOnce(e, "next", this.showPlaidFlow), this.mainRegion.show(e)
            },
            showUnlinkBankAccountStep: function() {
                this.progressView.setActiveStep(this.stepIndex), this.progressRegion.$el.addClass("shown");
                var e = new u;
                this.listenToOnce(e, "next", this.showPlaidFlow), this.mainRegion.show(e)
            },
            showPlaidFlow: function() {
                this.progressView.setActiveStep(this.stepIndex), this.progressRegion.$el.addClass("shown");
                var e = new l({
                    skipFundingStep: !0,
                    alwaysHideProgress: !0,
                    accountGroup: BMT.accountGroup
                });
                this.listenToOnce(e, "manualFlow", this.showIneligibleBankStep), this.listenTo(e, "block", function() {
                    this.trigger("block")
                }), this.listenTo(e, "unblock", function() {
                    this.trigger("unblock")
                }), this.listenToOnce(e, "close", this.refreshCurrentUserAndStartSmartDepositsFlow), this.mainRegion.show(e)
            },
            showIneligibleBankStep: function() {
                var e = new a;
                this.listenToOnce(e, "next", this.finish), this.mainRegion.show(e)
            },
            refreshCurrentUserAndStartSmartDepositsFlow: function() {
                this.listenTo(BMT.user, "sync", this.startSmartDepositsFlow), BMT.user.fetch()
            },
            startSmartDepositsFlow: function() {
                this.advanceProgressMeter();
                var e = new f({
                    model: this.model,
                    skipSplashAndConfirmBank: !0,
                    alwaysHideProgress: !0
                });
                this.listenToOnce(e, "render", e.showBankBalance), this.listenToOnce(e, "save", this.hideProgressMeter), this.listenToOnce(e, "finish", this.finish), this.listenTo(e, "next", this.advanceProgressMeter), this.mainRegion.show(e)
            },
            advanceProgressMeter: function() {
                this.stepIndex++, this.progressView.setActiveStep(this.stepIndex)
            },
            hideProgressMeter: function() {
                this.progressRegion.$el.removeClass("shown")
            },
            finish: function() {
                BMT.refreshAccounts(), BMT.user.fetch({
                    success: BMT.refreshBanners
                }), this.trigger("close finish")
            }
        })
    }), define("hbs!views/transfer/smartDeposits/editSettings", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function";
            return s += '<div class="header">\n    <h1>SmartDeposit Settings</h1>\n</div>\n\n<form>\n\n    ' + l((u = n.inputMoney || t && t.inputMoney, a = {
                hash: {
                    className: "max-deposit",
                    label: "Deposit up to",
                    disabled: t && t.disableInput
                }
            }, u ? u.call(t, "maxDepositCents", a) : f.call(t, "inputMoney", "maxDepositCents", a))) + "\n\n    " + l((u = n.inputMoney || t && t.inputMoney, a = {
                hash: {
                    className: "min-bank-balance",
                    label: "If my bank balance is above",
                    disabled: t && t.disableInput
                }
            }, u ? u.call(t, "minBankBalanceCents", a) : f.call(t, "inputMoney", "minBankBalanceCents", a))) + "\n\n    " + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {
                    disabled: t && t.disableInput
                }
            }, u ? u.call(t, "Update Settings", a) : f.call(t, "submitButton", "Update Settings", a))) + '\n\n    <button class="turn-off-smart-deposits silver" ', (u = n.disableInput) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.disableInput, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ">Turn Off SmartDeposit</button>\n</form>\n", s
        });
        return t.registerPartial("views/transfer/smartDeposits/editSettings", n), n
    }), define("views/transfer/smartDeposits/editSettingsView", ["hbs!views/transfer/smartDeposits/editSettings", "common/betterment.views", "components/common/scripts/behaviors/editableForm"], function(e, t, n) {
        return t.View.extend({
            template: e,
            className: "smart-deposits-edit-settings",
            events: {
                "click button.turn-off-smart-deposits": "turnOffSmartDeposits"
            },
            templateHelpers: {
                disableInput: function() {
                    return BMT.user.is("advisorSession") ? "disabled" : ""
                }
            },
            behaviors: {
                EditableForm: {
                    behaviorClass: n,
                    fields: {
                        minBankBalanceCents: {
                            type: "money",
                            decimals: 0
                        },
                        maxDepositCents: {
                            type: "money",
                            decimals: 0
                        }
                    },
                    onSubmit: function() {
                        this.block(), this.model.save().then(function() {
                            BMT.flash("Your SmartDeposit settings have been saved."), this.trigger("finish close")
                        }.bind(this)).always(function() {
                            this.unblock()
                        }.bind(this))
                    }
                }
            },
            turnOffSmartDeposits: function(e) {
                e.preventDefault(), this.block(), this.model.destroy().then(function() {
                    this.model.set("enabled", !1), BMT.flash("SmartDeposits successfully disabled."), this.trigger("finish close")
                }.bind(this)).always(function() {
                    this.unblock()
                }.bind(this))
            }
        })
    }), define("views/common/smartDepositSettingsView", ["views/transfer/smartDeposits/setupView", "views/transfer/smartDeposits/setupWithPlaidView", "views/transfer/smartDeposits/editSettingsView"], function(e, t, n) {
        var r = function() {
            var n = BMT.user.bankAccount();
            return n && n.isPlaidEnabled() ? e : t
        };
        return {
            withConfig: function(e) {
                var t = e.is("enabled") ? n : r();
                return new t({
                    model: e
                })
            },
            withoutConfig: function() {
                var e = r();
                return new e
            }
        }
    }), define("views/summary/transactionStatusView", ["common/errorHandler", "common/betterment.views", "hbs!views/summary/transactionStatus", "models/visitor", "modules/modals", "views/transfer/automaticTransactionSettingsModalView", "views/transfer/automaticDepositSettingsView", "views/common/smartDepositSettingsView", ""], function(e, t, n, r, i, s, o, u) {
        return t.View.extend({
            template: n,
            toolTips: {
                ".auto-deposit": {
                    position: {
                        my: "bottom left",
                        at: "top left"
                    }
                }
            },
            events: {
                "click .auto-deposit": "openAutomaticDepositModal",
                'click .smart-deposit:not(".disabled")': "openSmartDepositModal"
            },
            templateHelpers: {
                automaticDepositEnabled: function() {
                    var e = this.self.model.get("automaticDeposit");
                    return !!e && e.is("enabled")
                },
                nextAutomaticDepositOn: function() {
                    return this.self.model.get("automaticDeposit").displayDate()
                },
                hasSmartDepositsFeature: function() {
                    return r.hasVariation("smart_deposits_setup_enabled")
                },
                smartDepositEligible: function() {
                    return this.self.model.isSmartDepositEligible()
                },
                smartDepositEnabled: function() {
                    return this.self.smartDepositEnabled()
                },
                eligibilityMessage: function() {
                    return this.self.model.smartDepositEligibilityMessage()
                },
                autoWithdrawalEligible: function() {
                    return this.self.model.get("accountGroup").isEligibleForAutoWithdrawals() && this.self.model.isAllowedAutoWithdrawals()
                },
                autoWithdrawalEnabled: function() {
                    return this.self.model.has("automaticWithdrawal") && this.self.model.get("automaticWithdrawal").is("enabled")
                },
                nextAutoWithdrawalOn: function() {
                    return this.self.model.get("automaticWithdrawal").displayDate()
                }
            },
            onInitialize: function() {
                this.smartDepositConfig = this.model.get("smartDepositConfig"), this.listenTo(this.smartDepositConfig, "change", this.render)
            },
            onRender: function() {
                this.smartDepositEnabled() || this.build_tooltip(".smart-deposit", {
                    position: {
                        my: "bottom left",
                        at: "top left"
                    }
                })
            },
            smartDepositEnabled: function() {
                return !!this.smartDepositConfig && this.smartDepositConfig.is("enabled")
            },
            openAutomaticDepositModal: function() {
                var e = s.openForAccount(o, this.model);
                this.listenTo(e, "destroy", this.render)
            },
            openSmartDepositModal: function() {
                var t = u.withConfig(this.smartDepositConfig);
                BMT.user.is("advisorSession") && this.smartDepositConfig.not("enabled") ? BMT.alert(e.getErrorContentForCode("UNAUTHORIZED")) : i.show(t)
            }
        })
    }), define("hbs!views/common/accountStatus", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <button class="round goal-status ', (s = n.statusClass) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.statusClass, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + " ", (s = n.statusName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.statusName, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '">\n        ', (s = n.statusLabel) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.statusLabel, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "\n    </button>\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            o = n["if"].call(t, t && t.isAdvisableStatus, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/common/accountStatus", n), n
    }), define("components/common/scripts/constants/accountStatus", [], function() {
        return {
            NO_TARGET: {
                name: "NO_TARGET",
                "class": "grey",
                label: "Target goal balance not set"
            },
            ON_TRACK: {
                name: "ON_TRACK",
                "class": "green",
                label: "On Track"
            },
            OFF_TRACK: {
                name: "OFF_TRACK",
                "class": "orange",
                label: "Off Track"
            },
            TIME_PASSED: {
                name: "TIME_PASSED",
                "class": "orange",
                label: "Goal missed"
            },
            FINISHED: {
                name: "FINISHED",
                "class": "green",
                label: "Goal achieved"
            }
        }
    }), define("components/common/scripts/services/projectorService", ["underscore", "projector", "components/common/scripts/constants/accountStatus", "components/automaticTransaction/scripts/services/automaticTransactionService", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n, r, i) {
        return {
            getGoalBalanceByAccount: function(e, n) {
                return t.balanceAtGoalDate(this.buildProjectionContext(e, n)).avg
            },
            getRecommendedMonthlyDepositForAccount: function(n, r) {
                var i = this.buildProjectionContext(n, r);
                return e.extend(i, r.context || {}), t.suggestedDeposits(i).monthly
            },
            getRecommendedOneTimeDepositForAccount: function(n, r) {
                var i = this.buildProjectionContext(n, r);
                return e.extend(i, r.context || {}), t.suggestedDeposits(i).oneTime
            },
            getRecommendedTermForAccount: function(n, r) {
                var i = this.buildProjectionContext(n, r);
                return e.extend(i, r.context || {}), t.suggestedTerm(i)
            },
            getGoalStatus: function(e, t) {
                return this.determineGoalStatus(e.num("goalAmount"), e.num("currentBalance"), this.getGoalBalanceByAccount(e, t), e.date("goalCompletionDate"))
            },
            isAccountOnTrack: function(e, t) {
                return this.getGoalStatus(e, t) === n.ON_TRACK
            },
            determineGoalStatus: function(e, t, r, i) {
                return e ? t >= e ? n.FINISHED : i.compareTo(Date.now()) < 0 ? n.TIME_PASSED : r >= e ? n.ON_TRACK : n.OFF_TRACK : n.NO_TARGET
            },
            getYearlyDepositSuggestion: function(e) {
                return t.suggestedDeposits(e).monthly * 12
            },
            getRecommendedRetirementAgeAndContribution: function(e) {
                return t.recommendedRetirementAgeAndContribution(e)
            },
            getRecommendedAllocation: function(e) {
                return t.recommendedAllocation(e).allocation
            },
            calculateMarginalPropensityToConsume: function(e, n) {
                return t.calculateMarginalPropensityToConsume(e, n)
            },
            getRecommendedRetirementConsumption: function(e) {
                return t.recommendedRetirementConsumption({
                    grossIncome: e.grossIncome,
                    currentAge: e.currentAge,
                    retirementAge: e.retirementAge,
                    inflation: e.inflation,
                    salaryGrowth: e.salaryGrowth,
                    state: e.state,
                    costOfLivingIndex: e.costOfLivingIndex,
                    retirementCostOfLivingIndex: e.retirementCostOfLivingIndex,
                    marginalPropensityToConsumeOverride: e.marginalPropensityToConsumeOverride
                })
            },
            getProjectedYearlyRetirementIncome: function(e, n) {
                var r = t.calculateFinalBalanceShortfall(e).totalFutureBalance;
                return n.targetBalance = 0, n.monthlyDeposit = 0, n.currentBalance = r, Math.abs(this.getYearlyDepositSuggestion(n))
            },
            buildProjectionContext: function(e, t) {
                t = t || {};
                var n = e.num("allocation"),
                    s = i.getPortfolioSetForAccount(e),
                    o = s.getExpectedReturns(n),
                    u = (t.termYears || e.remainingGoalTerm()) * 12;
                return {
                    aggregateBalance: t.totalCurrentBalance,
                    targetBalance: e.num("goalAmount") || 0,
                    currentBalance: e.getCurrentBalanceWithPending(),
                    stockAlloc: n,
                    termYears: e.remainingGoalTerm(),
                    monthlyDeposit: t.monthlyDeposit || r.netMonthlyTransactionAmount(e),
                    retirement: e.isRetirement(),
                    income: e.isIncome(),
                    annualFeeRate: t.defaultFeeRate,
                    expectedReturn: o.expectedReturn,
                    volatility: o.volatility,
                    riskFreeRates: s.getExtendedRiskFreeRates(u)
                }
            },
            afterTaxIncome: function(e, n) {
                return t.calculateAfterTaxIncome(e, n)
            },
            futureDollars: function(e, n, r) {
                return t.futureDollars(e, n, r)
            },
            todaysDollars: function(e, n, r) {
                return t.todaysDollars(e, n, r)
            },
            getDatapointsForProjection: function(e, n, r) {
                return t.dataForIndex(e, n, r)
            },
            whichRetirementAccount: function(e) {
                return t.whichRetirementAccount(e)
            },
            calculateAverageTaxRate: function(e) {
                return t.calculateAverageTaxRate(e.grossIncome, e.state, e.maritalStatus, e.age, e.spouseAge, e.currentYear)
            },
            calculateLongTermGainsRate: function(e) {
                return t.calculateLongTermGainsRate(e.grossIncome, e.state, e.maritalStatus, e.currentYear)
            },
            calculateFinalBalanceShortfall: function(e) {
                return t.calculateFinalBalanceShortfall(e)
            },
            buildSocialSecurityProjectionContext: function(t, n) {
                var r = {
                    currentAge: t.getAge(),
                    retirementAge: this.getEffectiveRetirementAge(t, n),
                    grossIncome: t.dollars("pretaxIncome"),
                    deathAge: this.getEffectiveLifeExpectancy(t, n),
                    salaryGrowth: t.num("annualSalaryPercentGrowth"),
                    inflation: t.num("expectedInflation")
                };
                return t.isMarried() && e.extend(r, {
                    spouseAge: t.getSpouseAge(),
                    spouseRetirementAge: this.getEffectiveSpouseRetirementAge(t, n),
                    spouseGrossIncome: t.dollars("spousePretaxIncome"),
                    spouseDeathAge: this.getEffectiveSpouseLifeExpectancy(t, n)
                }), r
            },
            calculateAverageSocialSecurity: function(e) {
                return t.calculateAverageYearlySocialSecurity(e)
            },
            getSocialSecurityCollectionInfo: function(e) {
                return t.getSocialSecurityCollectionInfo(e)
            },
            getEffectiveRetirementAge: function(e, t) {
                return Math.max(e.getAge() + 1, t.num("retirementAge"))
            },
            getEffectiveSpouseRetirementAge: function(e, t) {
                return Math.max(e.getSpouseAge() + 1, t.num("spouseRetirementAge"))
            },
            getEffectiveLifeExpectancy: function(e, t) {
                return Math.max(this.getEffectiveRetirementAge(e, t) + 1, e.num("lifeExpectancy"))
            },
            getEffectiveSpouseLifeExpectancy: function(e, t) {
                return Math.max(this.getEffectiveSpouseRetirementAge(e, t) + 1, e.num("spouseLifeExpectancy"))
            }
        }
    }), define("views/common/accountStatusView", ["underscore", "common/betterment.views", "hbs!views/common/accountStatus", "components/common/scripts/constants/accountStatus", "components/common/scripts/services/domainService", "components/common/scripts/services/projectorService", "components/common/scripts/constants/colors"], function(e, t, n, r, i, s, o) {
        var u = function() {
                return ''
            },
            a = {
                hide: {
                    fixed: !0,
                    delay: 300
                },
                position: {
                    my: "bottom center",
                    at: "top center"
                },
                preserveInside: !0
            },
            f = {
                template: n,
                events: {
                    "click .goal-status": "goToAdvice"
                },
                templateHelpers: {
                    isAdvisableStatus: function() {
                        return this.self.goalStatus !== r.NO_TARGET
                    },
                    statusName: function() {
                        return this.self.goalStatus.name
                    },
                    statusLabel: function() {
                        return this.self.goalStatus.label
                    },
                    statusClass: function() {
                        return this.self.goalStatus.class
                    },
                    isFunded: function() {
                        return this.self.model.getCurrentBalanceWithPending() > 0
                    }
                },
                toolTips: {
                    ".goal-status.OFF_TRACK": e.extend({}, a, {
                        content: function() {
                            return '<div class="bold-text" style="color: ' + o.GOAL_STATUS.OFF_TRACK + ';">Off Track</div>' + '<div>You have <span class="bold-text">less than a 50%</span> chance of meeting your target. ' + "Keep in mind that this is based on assumptions which may or may not hold true in the future. " + u() + " about our advice calculations and assumptions.</div>"
                        }
                    }),
                    ".goal-status.ON_TRACK": e.extend({}, a, {
                        content: function() {
                            return '<div class="bold-text" style="color: ' + o.GOAL_STATUS.ON_TRACK + ';">On Track</div>' + "<div>'On track' means you have at <span class=\"bold-text\">least a 50% chance</span> " + "of meeting your target. This is based on assumptions which may or may not hold true in " + "the future, so it is still possible you will not meet this target. " + u() + " about our advice calculations and assumptions.</div>"
                        }
                    }),
                    ".goal-status.TIME_PASSED": e.extend({}, a, {
                        content: '<div class="bold-text" style="color: ' + o.GOAL_STATUS.OFF_TRACK + ';">Goal missed</div>' + "<div>The time horizon set for this goal has passed.  Use the Advice tab to update the " + "goal target and time.</div>"
                    }),
                    ".goal-status.FINISHED": e.extend({}, a, {
                        content: '<div class="bold-text" style="color: ' + o.GOAL_STATUS.ON_TRACK + ';">Goal achieved</div>' + "<div>Congratulations, you have achieved your goal!  Consider creating a new goal or " + "transferring funds to an existing goal.</div>"
                    })
                },
                onInitialize: function() {
                    this.goalStatus = s.getGoalStatus(this.model, {
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    })
                },
                goToAdvice: function() {
                    BMT.selectedAccount = this.model, BMT.router.navigate("advice", !0), this.trigger("goalStatusClicked", this.goalStatus)
                }
            },
            l = t.View.extend(f);
        return l
    }), define("views/summary/frontPanelView", ["jquery", "underscore", "common/betterment.views", "hbs!views/summary/frontPanel", "hbs!views/tooltips/negativeReturns", "common/constants/returnsConstants", "views/summary/speedometerView", "views/summary/transactionStatusView", "views/common/accountStatusView", "models/account", "models/visitor", "components/common/scripts/services/projectorService"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        return n.View.extend({
            template: r,
            templateHelpers: {
                createdDate: function() {
                    return this.monthYear(this.self.model.date("createdDate"))
                },
                goalStatus: function() {
                    return c.getGoalStatus(this.self.model, {
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    })
                },
                showHelpText: function() {
                    var e = f.Model.STATI,
                        n = [e.ON_TRACK, e.OFF_TRACK, e.TIME_PASSED],
                        r = this.goalStatus();
                    return t.any(n, function(e) {
                        return e === r
                    })
                },
                shouldShowDepositButton: function() {
                    return this.self.model.getCurrentBalance(!0) === 0
                },
                lifetimeReturn: function() {
                    return this.self.model.get("accountReturn").num("lifetimeReturn")
                },
                lifetimeEarned: function() {
                    return this.self.model.num("totalEarned")
                },
                hasGain: function() {
                    return this.lifetimeEarned() >= 0
                },
                showReturnsTooltip: function() {
                    return !0
                },
                showNegativeReturnsToolTip: function() {
                    if (!l.hasVariation("negative_returns_tooltip_on")) return !1;
                    var e = s.NEGATIVE_RETURNS_PERCENTAGE_THRESHOLD / 100,
                        t = s.NEGATIVE_RETURNS_AGE_THRESHOLD_IN_YEARS.years().ago(),
                        n = BMT.accountGroup.meetsNegativeReturnsPercentageThreshold(e) && BMT.accountGroup.meetsNegativeReturnsAgeThreshold(t),
                        r = !n && this.self.model.meetsNegativeReturnsPercentageThreshold(e) && this.self.model.meetsNegativeReturnsAgeThreshold(t);
                    return r && BMT.analytics.track("ElementViewed", {
                        Type: "ToolTip",
                        Name: "NegativeReturns",
                        Location: "GoalPanel"
                    }), r
                },
                negativeReturnsTooltip: function() {
                    return i({
                        tooltipClass: "account-returns-help",
                        negativeReturnsTipMessage: s.NEGATIVE_RETURNS_TIP_STRING
                    })
                },
                showRetirementPlanButton: function() {
                    return this.self.options.parent.showRetirementPlanButton()
                },
                retirementPlanButtonText: function() {
                    return this.self.options.parent.retirementPlanButtonText()
                },
                hasPendingDeposits: function() {
                    return this.pendingDeposits() !== 0
                },
                pendingDeposits: function() {
                    return this.self.model.getTotalPendingDeposits()
                },
                currentBalance: function() {
                    return this.self.model.getCurrentBalanceWithPending()
                },
                stockAllocation: function() {
                    return this.allocation
                },
                bondAllocation: function() {
                    return 1 - this.allocation
                }
            },
            regions: {
                speedometerRegion: "#frontSpeedometerRegion",
                accountStatusRegion: ".account-status-region",
                transactionStatusRegion: ".transaction-status-region"
            },
            events: {
                "click .make-deposit": "gotoTransferTab",
                "mouseover .negative-returns": "fireNegativeReturnsHoverMixpanelEvent"
            },
            toolTips: {
                ".pending-deposits": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                },
                ".returns-help": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                },
                ".account-returns-help": {
                    position: {
                        my: "top left",
                        at: "bottom center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            onInitialize: function() {},
            onRender: function() {
                this.speedometerRegion.show(this.speedometer = new o({
                    small: !0
                })), this.transactionStatusRegion.show(new u({
                    model: this.model
                })), this.model.isInPlan() || this.accountStatusRegion.show(new a({
                    model: this.model
                }))
            },
            onShow: function() {
                this.speedometer.rendered ? this.initSpeedometer() : this.speedometer.on("render", this.initSpeedometer, this)
            },
            initSpeedometer: function() {
                this.options.flipOnShow ? (this.resetSpeedometer(), delete this.options.flipOnShow) : this.options.silent ? this.speedometer.snapAllocation(this.model.num("allocation")) : this.speedometer.animateAllocation(this.model.num("allocation"))
            },
            resetSpeedometer: function() {
                this.speedometer.snapAllocation(0)
            },
            gotoTransferTab: function(e) {
                this._gotoTab(e, "transfer")
            },
            _gotoTab: function(e, t) {
                e && e.preventDefault(), BMT.selectedAccount = this.model, BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate(t, !0)
            },
            fireNegativeReturnsHoverMixpanelEvent: function() {
                BMT.analytics.track("ElementViewed", {
                    Type: "ToolTip",
                    Name: "NegativeReturnsHover",
                    Location: "GoalPanel"
                })
            }
        })
    }), define("hbs!views/transfer/automaticWithdrawalSettingsEmpty", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="modal-body">\n    Your automatic withdrawal is currently off.\n\n    <div class="info-tip clearfix">\n        <div class="arrow"></div>\n        <div class="icon">\n            <div class="lightbulb-tip-icon"></div>\n        </div>\n        <div class="text">\n            Turning on automatic withdrawal creates a regular income stream to your linked account, and also rebalances your portfolio in a tax efficient way.\n        </div>\n    </div>\n</div>\n\n<div class="modal-buttons">\n    <button id="ok">OK</button>\n</div>\n'
        });
        return t.registerPartial("views/transfer/automaticWithdrawalSettingsEmpty", n), n
    }), define("views/transfer/automaticWithdrawalSettingsView", ["jquery", "underscore", "hbs!views/transfer/automaticWithdrawalSettingsEmpty", "components/common/scripts/constants/iraConstants", "components/common/scripts/models/appData", "models/automaticWithdrawal", "views/transfer/automaticTransactionSettingsView", "components/automaticTransaction/scripts/services/automaticTransactionService"], function(e, t, n, r, i, s, o, u) {
        return o.extend({
            template: "transfer/automaticWithdrawalSettings",
            className: "automatic-withdrawal-settings",
            _templateHelpers: {
                build_distribution_selector: function() {
                    var e = ["NORM", "EARL", "DISA", "BENE"],
                        n = i.getInstance().get("distributionTypes").filter(function(n) {
                            return t.indexOf(e, n.value) > -1
                        });
                    return this.willIncurDistributionPenalty() ? n = t.filter(n, function(e) {
                        return e.value !== "NORM"
                    }) : n = t.filter(n, function(e) {
                        return e.value !== "EARL"
                    }), this.build_dropdown_menu(n, {
                        name: "distributionType",
                        "class": "distribution-type-selector"
                    })
                },
                willIncurDistributionPenalty: function() {
                    return this.account().isIRA() && BMT.user.age() < r.MIN_WITHDRAWAL_AGE
                }
            },
            onOK: function(e) {
                this.model.validate() ? (this.validateCalendar(), this.triggerAllValidation()) : (this.model.set({
                    account: this.account().get("id")
                }), this.block(), this.model.save({
                    distributionType: this.$(".distribution-type-selector").val() || this.model.get("distributionType")
                }, {
                    wait: !0,
                    success: function(e) {
                        BMT.analytics.track("AutoWithdrawalUpdated", {
                            Location: "Transfer",
                            GoalId: this.account().get("id"),
                            GoalType: this.account().get("goalType"),
                            Value: this.formatter.removeCommas(e.get("amount")),
                            IsEnabled: e.get("enabled"),
                            Frequence: e.get("frequency")
                        }), this.model.set("account", this.account()), this.trigger("save"), BMT.vent.trigger("automaticWithdrawal:update"), this.refreshAccountAndClose(), this.model.is("enabled") ? BMT.flash("Automatic withdrawals will initiate " + this.model.frequencyText() + ".  Please allow 4-5 business days for transfers to complete.") : BMT.flash("Your automatic withdrawal has been turned off."), this.onAutoTransactionUpdateComplete(this.model)
                    }.bind(this),
                    error: function() {
                        this.triggerAllValidation()
                    }.bind(this),
                    complete: function() {
                        this.unblock()
                    }.bind(this)
                }))
            },
            onCancel: function(e) {
                this.model.restore(), this.refreshAccountAndClose()
            }
        }, {
            transactionType: "automaticWithdrawal",
            emptyAutoTransactionTemplate: n,
            getModelInstance: function() {
                return new s
            }
        })
    }), define("views/summary/backPanelView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/summary/speedometerView", "views/common/accountStatusView", "models/account", "views/summary/accountReturnView", "views/transfer/automaticTransactionSettingsModalView", "views/transfer/automaticDepositSettingsView", "views/transfer/automaticWithdrawalSettingsView", "views/summary/transactionStatusView", "components/common/scripts/services/projectorService", "components/common/scripts/constants/accountStatus"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        return r.View.extend({
            template: "summary/backPanel",
            templateHelpers: {
                autoDeposit: function() {
                    return this.self.model.get("automaticDeposit")
                },
                autoDepositEnabled: function() {
                    return this.autoDeposit() && this.autoDeposit().is("enabled")
                },
                autoWithdrawal: function() {
                    return this.self.model.get("automaticWithdrawal")
                },
                autoWithdrawalEnabled: function() {
                    return this.autoWithdrawal() && this.autoWithdrawal().is("enabled")
                },
                isAllowedAutoWithdrawals: function() {
                    return this.self.model.isAllowedAutoWithdrawals() && this.self.model.get("accountGroup").isEligibleForAutoWithdrawals()
                },
                goalStatus: function() {
                    return h.getGoalStatus(this.self.model, {
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    })
                },
                showHelpText: function() {
                    var e = o.Model.STATI,
                        n = [e.ON_TRACK, e.OFF_TRACK, e.TIME_PASSED],
                        r = this.goalStatus();
                    return t.any(n, function(e) {
                        return e === r
                    })
                },
                showTarget: function() {
                    var e = !!this.self.model.num("goalAmount"),
                        t = this.self.model.is("income"),
                        n = this.self.model.isInPlan();
                    return e && !t && !n
                },
                shouldShowDepositButton: function() {
                    return this.self.model.getCurrentBalance(!0) === 0
                },
                STATI: o.Model.STATI
            },
            regions: {
                speedometerRegion: "#backSpeedometerRegion",
                accountReturnRegion: "#accountReturnRegion",
                accountStatusRegion: ".account-status-region",
                transactionStatusRegion: ".transaction-status-region"
            },
            events: {
                "click a.portfolio-details": "gotoPortfolioTab",
                "click .change-allocation": "gotoAdviceTab",
                "click .advice button": "gotoAdviceTab",
                "click .speedometer-region": "gotoPortfolioTab",
                "click .make-deposit": "gotoTransferTab",
                "click th.goal-amount": "editGoalAmount",
                "click .auto-deposit .name": "showAutoDepositModal",
                "click .auto-withdrawal .name": "showAutoWithdrawalModal",
                "touchstart th.goal-amount": "editGoalAmount",
                "keydown input[name=goalAmount]": "restrictDecimal",
                "keyup input[name=goalAmount]": "testSaveGoalAmount"
            },
            toolTips: {
                ".pending-deposits": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            onInitialize: function() {
                this.editingGoalAmount = this.options.editingGoalAmount
            },
            onRender: function() {
                var e = this;
                this.speedometerRegion && this.speedometerRegion.show(this.speedometer = new i({
                    onShow: function() {
                        e.options.flipOnShow ? (this.snapAllocation(0), delete e.options.flipOnShow) : e.options.silent ? this.snapAllocation(e.model.num("allocation")) : this.animateAllocation(e.model.num("allocation"))
                    }
                })), this.accountReturnRegion && this.accountReturnRegion.show(this.accountReturn = new u({
                    model: this.model.get("accountReturn"),
                    investedOpen: this.options.investedOpen,
                    earnedOpen: this.options.earnedOpen
                })), this.accountStatusRegion && !this.model.isInPlan() && this.accountStatusRegion.show(new s({
                    model: this.model
                })), this.transactionStatusRegion.show(new c({
                    model: this.model
                }))
            },
            onShow: function() {
                this.shown = !0, this.options.showHandler && this.options.showHandler()
            },
            resetSpeedometer: function() {
                this.speedometer.snapAllocation(0)
            },
            animateSpeedometer: function() {
                this.speedometer.onShow()
            },
            gotoAdviceTab: function(e) {
                this._gotoTab(e, "advice")
            },
            gotoPortfolioTab: function(e) {
                this._gotoTab(e, "portfolio")
            },
            gotoTransferTab: function(e) {
                this._gotoTab(e, "transfer")
            },
            _gotoTab: function(e, t) {
                e && e.preventDefault(), BMT.selectedAccount = this.model, BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate(t, !0)
            },
            editGoalAmount: function(t) {
                var n = t && t.target;
                if (n && e(n).is("input")) return;
                return t && t.stopImmediatePropagation(), this.editingGoalAmount = !0, this.$goalAmount = this.$("th.goal-amount"), this.$amountInput = this.$goalAmount.find("input[name=goalAmount]"), this.$goalAmount.find(".blue-pen").css("visibility", "hidden"), this.$goalAmount.find(".goal-amount-label").html('<h3 class="caps-label">Target</h3>'), this.$amountInput.show().val(this.model.get("goalAmount")), this.$amountInput.focus(), this.$amountInput.blur(this.saveGoalAmount), !1
            },
            testSaveGoalAmount: function(e) {
                e.keyCode === 13 && this.saveGoalAmount()
            },
            saveGoalAmount: function(e) {
                if (this.editingGoalAmount) {
                    e && e.stopImmediatePropagation();
                    var t = this,
                        n = this.formatter.removeCommas(this.$amountInput.val() || 0);
                    this.options.parent.block(), this.model.save({
                        goalAmount: n
                    }, {
                        complete: function() {
                            BMT.analytics.track("GoalUpdated", {
                                Name: "GoalTarget",
                                Value: n,
                                Location: "Summary/BackPanel",
                                GoalId: t.model.get("id"),
                                GoalType: t.model.get("goalType")
                            }), this.$amountInput.hide(), this.$goalAmount.find(".blue-pen").css("visibility", ""), this.$goalAmount.find(".goal-amount-label").html('<h3 class="caps-label">Target</h3> <span class="bold-text"> <h1 class="balance">' + this.formatter.money(this.model.num("goalAmount")) + "</h1></span>").css("left", ""), this.options.parent.unblock(), this.editingGoalAmount = !1
                        }.bind(this)
                    })
                }
            },
            showAutoDepositModal: function(e) {
                e && e.preventDefault(), BMT.analytics.track("ElementClicked", {
                    Name: "AutoDepositSettings",
                    Type: "Link",
                    Location: "Summary"
                });
                var t = a.openForAccount(f, this.model);
                this.listenTo(t, "destroy", this.render)
            },
            showAutoWithdrawalModal: function(e) {
                e && e.preventDefault(), BMT.analytics.track("ElementClicked", {
                    Name: "AutoWithdrawalSettings",
                    Type: "Link",
                    Location: "Summary"
                });
                var t = a.openForAccount(l, this.model);
                this.listenTo(t, "destroy", this.render)
            }
        })
    }), define("models/transaction", ["jquery", "underscore", "backbone", "common/betterment.models", "models/account", "components/common/scripts/util/formatter", "components/transaction/scripts/constants/transactionConstants"], function(e, t, n, r, i, s, o) {
        var u = r.RelationalModel.extend({
                url: "/transactions",
                relations: [{
                    type: n.HasOne,
                    key: "account",
                    keyDestination: "account",
                    includeInJSON: "id",
                    relatedModel: i.Model
                }, {
                    type: n.HasOne,
                    key: "fromAccount",
                    includeInJSON: "id",
                    relatedModel: i.Model
                }, {
                    type: n.HasOne,
                    key: "toAccount",
                    includeInJSON: "id",
                    relatedModel: i.Model
                }],
                save: function(e, n, i) {
                    var s = this._handleSaveArguments(e, n, i),
                        o = t.extend({}, s.options, {
                            success: function(e) {
                                e.get("type") === "DEPOSIT" && BMT.vent.trigger("deposit:save", e), s.options.success && s.options.success(e)
                            }
                        });
                    return r.RelationalModel.prototype.save.call(this, s.attrs, o)
                },
                getTransactionYear: function() {
                    return this.date("date").getFullYear()
                },
                isCustomerDocument: function() {
                    return !!this.get("documentHash")
                },
                isRolloverDocument: function() {
                    return !!this.get("rolloverRequestId")
                },
                getIdParams: function() {
                    return {
                        bettermentdbUserTransactionId: this.num("id")
                    }
                },
                validation: {
                    amount: function(e, t, n, r) {
                        if (n.type === "ALLOCATION_CHANGE") return !1;
                        var i = parseFloat(e && (typeof e == "number" ? e : e.replace(/,/g, "")));
                        if (isNaN(i)) return "Amount is required";
                        var u = function(e) {
                                return e % 1 ? 2 : 0
                            },
                            a, f, l = o.MINIMUM,
                            c = o.DEPOSIT_MAXIMUM,
                            h = n.type === "DEPOSIT",
                            p = n.type === "WITHDRAWAL",
                            d = n.type === "ACCOUNT_TRANSFER_FROM",
                            v = n.contributionType,
                            m = d ? n.fromAccount : this.get("account"),
                            g = BMT.user.isFull();
                        if (h) {
                            g || (i += m.getTotalPendingDeposits());
                            if (m.isIRA())
                                if (v === "ROLL") l = o.ROLLOVER_MINIMUM, c = o.ROLLOVER_MAXIMUM;
                                else {
                                    var y = m.contributionLimit(v);
                                    g ? c = Math.max(m.remainingContributionAmount(v), 0) : c = y, f = "Over contribution limit of {0}".format(s.money(c, 2))
                                }
                            a = "The minimum deposit is {0}".format(s.money(l, u(l))), f = f || "The maximum deposit is {0}".format(s.money(c, u(c))), m.isIRA() || (f += ". Call us at 888&#8209;428&#8209;9482 to deposit larger amounts.")
                        } else if (p || d) {
                            var b = m.availableForExcessContribution(n.distributionType, n.netIncome) || 0;
                            l = b >= l || b === 0 ? l : 0, c = b, a = "The minimum amount is {0}".format(s.money(l, u(l))), f = "The maximum amount is {0}".format(s.money(c, u(c)))
                        }
                        return !g && (!m.isIRA() || v === "ROLL") && (c = Number.POSITIVE_INFINITY), i < l ? a : i > c ? f : !1
                    },
                    allocation: {
                        required: function(e, t, n) {
                            return n.type === "ALLOCATION_CHANGE"
                        }
                    },
                    fromAccount: {
                        required: function(e, t, n) {
                            return n.type === "ACCOUNT_TRANSFER_FROM"
                        }
                    },
                    toAccount: {
                        required: function(e, t, n) {
                            return n.type === "ACCOUNT_TRANSFER_FROM"
                        }
                    }
                },
                getAccount: function() {
                    return this.get("account")
                }
            }, {
                filters: {
                    all: [],
                    DEPOSIT: [1, 19, 23],
                    WITHDRAWAL: [0, 7, 21, 22, 24],
                    DIVIDEND: [4],
                    ALLOCATION_CHANGE: [9, 17],
                    PORTFOLIO_UPDATE: [18],
                    FEE: [3, 8],
                    STATEMENT: [-1],
                    TRANSFER: [22, 23, 24, 33, 34, 35],
                    TAX_LOSS_HARVEST: [31],
                    DIRECT_IRA_TRANSFER: [-2],
                    ADJUSTMENT: [6],
                    other: [16, 18, 20]
                }
            }),
            a = r.Collection.extend({
                model: u,
                urlRoot: "/transactions",
                url: function(e) {
                    var n = {};
                    this.accountGroupId && (n.accountGroupId = this.accountGroupId), this.accountID && (n.account = this.accountID), this.startDaysAgo && (n.startDaysAgo = this.startDaysAgo), e && (n.format = e), this.typeFilter && (n.types = u.filters[this.typeFilter].join("|"));
                    var r = t.map(n, function(e, t) {
                        return t + "=" + e
                    }).join("&");
                    return this.urlRoot + (e ? "." + e : "") + "?" + r
                },
                getForeignIdParams: function() {
                    return {
                        userTransactionIds: t.compact(this.map(function(e) {
                            if (e.id) return "f" + e.id
                        }))
                    }
                }
            });
        return {
            Model: u,
            Collection: a
        }
    }), define("views/summary/transferFundsView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "backbone", "common/betterment.views", "models/transaction", "models/account"], function(e, t, n, r, i, s, o) {
        return i.ModalView.extend({
            template: "summary/transferFunds",
            className: "transfer-funds",
            events: {
                "click #ok": "onOK",
                "click #cancel": "onCancel",
                "change .from": "fromChange",
                "change .to": "toChange",
                "click .show-tax-impact": "showTaxImpact"
            },
            toolTips: {
                "#availableHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                to_selector: function() {
                    return this.build_dropdown_menu(this.self.toAccounts, {
                        "class": "to"
                    })
                }
            },
            onInitialize: function() {
                this.accounts = BMT.accounts(), this.model = new s.Model({
                    type: "ACCOUNT_TRANSFER_FROM"
                }), this.fromAccounts = t.filter(this.accounts.forSelect(), function(e) {
                    var t = this.accounts.get(e.value);
                    return !t.isIRA() && t.num("currentBalance") > 0
                }, this), this.fromChange(), this.toChange(), this.on("destroy", function() {
                    this.pausing || BMT.refreshAccounts()
                })
            },
            onRender: function() {
                this.$amount = this.$("[name=amount]").val(this.options.amount), this.$toSelector = this.$(".to"), this.$fromSelector = this.$(".from"), this.$fromSelector.find(".dropdown-label").html(this.model.get("fromAccount").get("name")), this.$toSelector.find(".dropdown-label").html(this.model.get("toAccount").get("name")), this.availableHelpRivet = rivets.bind(this.$("#availableHelp"), {
                    from: this.model.get("fromAccount")
                })
            },
            onShow: function() {
                BMT.analytics.track("ElementViewed", {
                    Type: "Modal",
                    Name: "Transfer",
                    Location: "Summary",
                    GoalId: this.model.get("fromAccount").get("id"),
                    GoalType: this.model.get("fromAccount").get("goalType")
                }), this.applyValidation(), this.$amount.focus()
            },
            fromChange: function(r) {
                var i;
                r ? i = e(r.currentTarget).intVal() : this.options.sourceAccount ? i = this.options.sourceAccount.num("id") : i = parseInt(this.fromAccounts[0].value, 10), this.model.set("fromAccount", this.accounts.get(i)), this.availableHelpRivet && (this.availableHelpRivet.unbind(), this.availableHelpRivet = rivets.bind(this.$("#availableHelp"), {
                    from: this.model.get("fromAccount")
                })), this.toAccounts = t.filter(this.accounts.forSelect(), function(e) {
                    return !this.accounts.get(e.value).isIRA() && e.value !== this.model.get("fromAccount").num("id")
                }, this);
                var s = this,
                    o = 0;
                if (this.$toSelector) {
                    this.$toSelector.find(".dropdown-menu > li > a").each(function() {
                        var t = e(this),
                            r = s.toAccounts[o++];
                        t.data("value", n.e(r.value)), t.html(n.e(r.label))
                    });
                    var u = this.toAccounts[0];
                    this.$toSelector.find(".dropdown-label").html(n.e(u.label)), this.model.set("toAccount", this.accounts.get(parseInt(u.value, 10)))
                }
                this.$amount && this.$amount.blur()
            },
            toChange: function(t) {
                var n;
                t ? n = e(t.currentTarget).intVal() : this.options.toAccount ? n = this.options.toAccount.num("id") : n = parseInt(this.toAccounts[0].value, 10), this.model.set("toAccount", this.accounts.get(n))
            },
            onOK: function(e) {
                var t = r.Syphon.serialize(this);
                if (!this.model.validate(t)) {
                    var n = parseFloat(t.amount),
                        i = this;
                    this.model.get("fromAccount").shouldAmountTriggerWithdrawAll(n) ? BMT.alert({
                        width: 400,
                        title: "Transfer Everything From Your Goal?",
                        icon: "warning",
                        body: "<p>" + this.formatter.money(n) + " is greater than " + this.formatter.pct(o.Model.WITHDRAW_ALL_THRESHOLD) + " of your available balance.</p><p>To transfer exact dollar amounts you need a small buffer of " + "funds in your goal in case of changing market prices. If you transfer past this buffer we must " + "transfer all of your Stocks and Bonds, which may result in slightly more or less money than you requested.</p>",
                        buttons: [{
                            id: "yes",
                            title: "Transfer Everything"
                        }, {
                            id: "no",
                            title: "Request Different Amount",
                            attributes: {
                                "class": "cancel"
                            }
                        }],
                        handler: function(e) {
                            e === "yes" && i.sendTransfer(t)
                        }
                    }) : this.sendTransfer(t)
                }
            },
            sendTransfer: function(e) {
                var t = this;
                this.trigger("proceed", this), this.block(), this.model.save(e, {
                    success: function() {
                        BMT.analytics.track("TransferSubmitted", {
                            Location: "Summary/Transfer",
                            Value: t.formatter.removeCommas(t.$amount.val()),
                            FromGoalId: t.model.get("fromAccount").get("id"),
                            FromGoalType: t.model.get("fromAccount").get("goalType"),
                            ToGoalId: t.model.get("toAccount").get("id"),
                            ToGoalType: t.model.get("toAccount").get("goalType")
                        }), t.pausing = !0, setTimeout(function() {
                            BMT.refreshAccounts()
                        }, 6e5), BMT.modal.close(t), BMT.flash("Your transfer was initiated successfully.")
                    },
                    complete: function() {
                        t.unblock()
                    }
                })
            },
            onCancel: function(e) {
                this.trigger("cancel", this), BMT.modal.close(this)
            },
            showTaxImpact: function(e) {
                e.preventDefault();
                var t = r.Syphon.serialize(this);
                this.model.validate(t) || this.trigger("showTaxImpact", this)
            }
        })
    }), define("hbs!views/common/accountSettings", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return (u = n.buildGoalSettingsDropdown) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.buildGoalSettingsDropdown, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", s
        });
        return t.registerPartial("views/common/accountSettings", n), n
    }), define("components/common/scripts/templateHelpers/buildButton", ["underscore", "hbs/handlebars", "components/common/scripts/util/handlebarsHelpers"], function(e, t, n) {
        t.registerHelper("buildButton", function(t) {
            var r = "<button id='" + t.id + "'";
            return e.each(t.attributes || {}, function(e, t) {
                r += " " + t + "='" + e + "'"
            }), r += ">" + t.title + "</button>", n.s(r)
        })
    }), define("hbs!views/taxImpact/taxImpact", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/buildButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i;
                r += "\n        ", i = n.each.call(e, e && e.buttons, {
                    hash: {},
                    inverse: f.noop,
                    fn: f.program(2, c, t)
                });
                if (i || i === 0) r += i;
                return r += "\n    ", r
            }

            function c(e, t) {
                var r = "",
                    i, s;
                return r += "\n            " + a((i = n.buildButton || e && e.buildButton, s = {
                    hash: {}
                }, i ? i.call(e, e, s) : u.call(e, "buildButton", e, s))) + "\n        ", r
            }

            function h(e, t) {
                return '\n        <button class="action blue" data-trigger="cancel">Close</button>\n    '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = n.helperMissing,
                a = this.escapeExpression,
                f = this;
            s += '<h1>Tax Impact</h1>\n\n<div class="impact-data">\n    <div class="impact-data-region">\n    </div>\n</div>\n\n<div class="modal-buttons">\n    ', o = n["if"].call(t, t && t.buttons, {
                hash: {},
                inverse: f.program(4, h, i),
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += "\n</div>\n", s
        });
        return t.registerPartial("views/taxImpact/taxImpact", n), n
    }), define("hbs!views/taxImpact/taxImpactLoss", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += "<p>", (u = n.headline) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.headline, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n\n<p>All values are estimates.</p>\n\n<div class="impact-box">\n    <p>\n        Your ', (u = n.valueAndType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.valueAndType, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " is expected to realize <strong>", o = (u = n.netGain || t && t.netGain, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "netGain", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "formatTaxes", o, a))) + '</strong> in losses.\n        This may result in tax savings, depending on your tax\n        <span class="no-break">situation.\n            <span class="loss-tax-help-tip tax-help help-icon">\n              Based on estimated gains and losses.  Actual tax result likely to be different depending on securities prices at the moment you execute the trade.  Furthermore, transactions made at brokerages other than BetaSmartz cannot be taken into account, and could affect these estimates.  This is not tax advice.\n            </span>\n        </span>\n    </p>\n\n    <div class="info-tip">\n        <div class="arrow"></div>\n        <div class="text">\n            We used <a href="<%- brochure_url(\'resources/taxes/lowering-your-tax-bill-by-improving-our-cost-basis-accounting-methods/\') %>" target="_blank">TaxMin</a> lot selling, which sells losses before gains to reduce your taxes.\n        </div>\n    </div>\n\n    <hr />\n\n    <div class="breakdown-region"></div>\n</div>\n', s
        });
        return t.registerPartial("views/taxImpact/taxImpactLoss", n), n
    }), define("hbs!views/taxImpact/taxImpactGain", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += "<p>", (u = n.headline) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.headline, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n\n<p>All values are estimates.</p>\n\n<div class="impact-box">\n    <p>\n        For your ', (u = n.valueAndType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.valueAndType, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ', <a href="' + l((u = n.brochureUrl || t && t.brochureUrl, a = {
                hash: {}
            }, u ? u.call(t, "resources/taxes/lowering-your-tax-bill-by-improving-our-cost-basis-accounting-methods/", a) : c.call(t, "brochureUrl", "resources/taxes/lowering-your-tax-bill-by-improving-our-cost-basis-accounting-methods/", a))) + '" target="_blank">our algorithm</a> selected the\n        lowest tax shares, which gained <strong>', o = (u = n.netGain || t && t.netGain, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "netGain", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "formatTaxes", o, a))) + '</strong>. This may result in up to:\n    </p>\n\n    <div class="estimated-taxes">\n        <h3>\n            ', (u = n.estimatedTaxes) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.estimatedTaxes, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n            <label class="estimated-taxes-label">\n                Estimated<br />\n                Taxes\n                <div class="tax-help help-icon">\n                    Estimated tax for this transaction only, based on estimated gains and losses and assuming\n                    the highest tax rates of 39.6% federal, 13.3% state, 3.8% medicare surtax and deductibility\n                    of state taxes.\n                    <br />\n                    <br />\n                    Actual tax result likely to be different depending on specific circumstances, including,\n                    but not limited to, the marginal tax rate applicable to you, any subsequent trading activity,\n                    the presence of other capital gains or losses for the year, and securities prices at the\n                    moment you execute the trade.  Furthermore, transactions made at brokerages other than BetaSmartz cannot be taken into account, and could affect these estimates.  This is not tax advice.\n                </div>\n            </label>\n        </h3>\n    </div>\n\n    <hr />\n\n    <div class="breakdown-region"></div>\n</div>\n', s
        });
        return t.registerPartial("views/taxImpact/taxImpactGain", n), n
    }), define("hbs!views/taxImpact/lossesWashed", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "made within the last 30 days"
            }

            function d(e, t) {
                return "or prior"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += "<p>", (u = n.headline) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.headline, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n\n<p>All values are estimates.</p>\n\n<div class="impact-box">\n    <p>\n        Your ', (u = n.valueAndType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.valueAndType, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " is expected to realize <strong>", o = (u = n.netGainBeforeWash || t && t.netGainBeforeWash, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "netGainBeforeWash", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "formatTaxes", o, a))) + "</strong> in losses,\n        but purchases ", o = n["if"].call(t, t && t.isWithdrawal, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += " are expected to disallow\n        <strong>", o = (u = n.netWashedLosses || t && t.netWashedLosses, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "netWashedLosses", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : c.call(t, "formatTaxes", o, a))) + "</strong> of these ", o = n.unless.call(t, t && t.isWithdrawal, {
                hash: {},
                inverse: h.noop,
                fn: h.program(3, d, i)
            });
            if (o || o === 0) s += o;
            return s += ' losses due\n        to the wash sale rule, reducing any potential tax benefit. Please review the details below.\n    </p>\n\n    <div class="info-tip">\n        <div class="arrow"></div>\n        <div class="text">\n            We used <a href="' + l((u = n.brochureUrl || t && t.brochureUrl, a = {
                hash: {}
            }, u ? u.call(t, "resources/taxes/lowering-your-tax-bill-by-improving-our-cost-basis-accounting-methods/", a) : c.call(t, "brochureUrl", "resources/taxes/lowering-your-tax-bill-by-improving-our-cost-basis-accounting-methods/", a))) + '" target="_blank">TaxMin</a> lot selling, which sells losses before gains to reduce your taxes.\n        </div>\n    </div>\n\n    <hr />\n\n    <div class="breakdown-region"></div>\n</div>\n', s
        });
        return t.registerPartial("views/taxImpact/lossesWashed", n), n
    }), define("hbs!views/taxImpact/pendingTransaction", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="pending-transaction">\n    <div class="message">\n        <p>Due to your <a class="existing-transactions" href="#activity">existing pending transaction</a>, we cannot accurately predict the tax consequences\n        of this ', (u = n.transactionType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.transactionType, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' because the tax lots for that transaction are not yet known.</p>\n\n        <p>If you would like to see the tax impact before proceeding, please\n        wait until your existing transaction has completed. This may take\n        up to 1 business day.</p>\n    </div>\n</div>\n\n<div class="breakdown-region force-close"></div>\n', s
        });
        return t.registerPartial("views/taxImpact/pendingTransaction", n), n
    }), define("components/common/scripts/templateHelpers/formatTaxes", ["hbs/handlebars", "components/common/scripts/util/handlebarsHelpers", "components/common/scripts/util/formatter"], function(e, t, n) {
        function r(e) {
            var t = 1;
            return e === 0 ? n.money(0, 0) : e < t ? "<" + n.money(Math.ceil(e), 0) : n.money(Math.round(e), 0)
        }
        return e.registerHelper("formatTaxes", r), r
    }), define("services/taxImpactCalculator", ["common/constants/taxRates"], function(e) {
        return {
            estimateTaxes: function(t) {
                var n = t.netLongTerm(),
                    r = t.netShortTerm();
                if (n >= 0 && r >= 0) return (n * e.LONG_TERM_RATE + r * e.SHORT_TERM_RATE).round(2);
                if (n < 0 && r < 0) return (n + r).round(2);
                if (n + r > 0) {
                    var i = n + r;
                    return n > r ? (i * e.LONG_TERM_RATE).round(2) : (i * e.SHORT_TERM_RATE).round(2)
                }
                return 0
            }
        }
    }), define("hbs!views/taxImpact/longTermTooltip", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="long-term-help help-icon">\n    For shares held longer than 1 year (long-term), this is the total gain or loss across tax lots\n    that we estimate will be sold in this transaction. TaxMin selected tax lots to minimize the\n    overall tax impact. Long-term gains are netted with long-term losses before being combined with\n    short-term lots to calculate the total impact.\n</div>\n'
        });
        return t.registerPartial("views/taxImpact/longTermTooltip", n), t.registerPartial("views/taxImpact/longTermTooltip", n), n
    }), define("hbs!views/taxImpact/washedLossesTooltip", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="washed-losses-help caution-icon">\n    Due to purchases made within the last 30 days in your account, the wash sale rule is expected to disallow\n    the tax loss that would otherwise be realized from this transaction. Disallowed losses will be preserved\n    in the securities that were recently purchased, and can be realized at a later date, if the securities\n    remain at a loss. However, if the recent purchases were made in your SMSF account, losses will be permanently\n    disallowed.\n</div>\n'
        });
        return t.registerPartial("views/taxImpact/washedLossesTooltip", n), t.registerPartial("views/taxImpact/washedLossesTooltip", n), n
    }), define("hbs!views/taxImpact/shortTermTooltip", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="short-term-help help-icon">\n    For shares held 1 year or less (short-term), this is the total gain or loss across the tax lots\n    from all shares that we estimate will be sold in this transaction. TaxMin selected tax lots to\n    minimize the overall tax impact. Short-term gains are netted with short-term losses before being\n    combined with long-term lots to calculate the total impact.\n</div>\n'
        });
        return t.registerPartial("views/taxImpact/shortTermTooltip", n), t.registerPartial("views/taxImpact/shortTermTooltip", n), n
    }), define("hbs!views/taxImpact/taxImpactBreakdown", ["hbs", "hbs/handlebars", "hbs!views/taxImpact/longTermTooltip", "hbs!views/taxImpact/washedLossesTooltip", "hbs!views/taxImpact/shortTermTooltip", "components/common/scripts/templateHelpers/formatTaxes"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var i = "",
                    s, o, u;
                i += '\n                <dt class="washed">Washed loss</dt>\n                <dd class="washed loss">\n                    ' + l((o = n.formatTaxes || e && e.formatTaxes, u = {
                    hash: {}
                }, o ? o.call(e, e && e.longTermWashed, u) : f.call(e, "formatTaxes", e && e.longTermWashed, u))) + "\n                    ", s = c.invokePartial(r["views/taxImpact/washedLossesTooltip"], "views/taxImpact/washedLossesTooltip", e, n, r);
                if (s || s === 0) i += s;
                return i += "\n                </dd>\n            ", i
            }

            function d(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                <dt class="washed">Permanently washed loss</dt>\n                <dd class="washed loss">\n                    ' + l((s = n.formatTaxes || e && e.formatTaxes, o = {
                    hash: {}
                }, s ? s.call(e, e && e.longTermPermanentlyWashed, o) : f.call(e, "formatTaxes", e && e.longTermPermanentlyWashed, o))) + "\n                    ", i = n["if"].call(e, e && e.showLongTermPermanentlyWashedTooltip, {
                    hash: {},
                    inverse: c.noop,
                    fn: c.program(4, v, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                </dd>\n            ", r
            }

            function v(e, t) {
                var i = "",
                    s;
                i += "\n                        ", s = c.invokePartial(r["views/taxImpact/washedLossesTooltip"], "views/taxImpact/washedLossesTooltip", e, n, r);
                if (s || s === 0) i += s;
                return i += "\n                    ", i
            }

            function m(e, t) {
                var i = "",
                    s, o, u;
                i += '\n                <dt class="washed">Washed loss</dt>\n                <dd class="washed loss">\n                    ' + l((o = n.formatTaxes || e && e.formatTaxes, u = {
                    hash: {}
                }, o ? o.call(e, e && e.shortTermWashed, u) : f.call(e, "formatTaxes", e && e.shortTermWashed, u))) + "\n                    ", s = c.invokePartial(r["views/taxImpact/washedLossesTooltip"], "views/taxImpact/washedLossesTooltip", e, n, r);
                if (s || s === 0) i += s;
                return i += "\n                </dd>\n            ", i
            }

            function g(e, t) {
                var r = "",
                    i, s, o;
                r += '\n                <dt class="washed">Permanently washed loss</dt>\n                <dd class="washed loss">\n                    ' + l((s = n.formatTaxes || e && e.formatTaxes, o = {
                    hash: {}
                }, s ? s.call(e, e && e.shortTermPermanentlyWashed, o) : f.call(e, "formatTaxes", e && e.shortTermPermanentlyWashed, o))) + "\n                    ", i = n["if"].call(e, e && e.showShortTermPermanentlyWashedTooltip, {
                    hash: {},
                    inverse: c.noop,
                    fn: c.program(4, v, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                </dd>\n            ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), r = this.merge(r, e.partials);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = this,
                h = "function";
            s += '<a href="#" class="impact-details-collapsed">\n    Show Details <span class="arrow">&rsaquo;</span>\n</a>\n\n<div class="impact-details">\n    <div class="impact-column">\n        <label>', (u = n.netLongTermLabel) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.netLongTermLabel, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " ", o = c.invokePartial(r["views/taxImpact/longTermTooltip"], "views/taxImpact/longTermTooltip", t, n, r);
            if (o || o === 0) s += o;
            s += '</label>\n        <span class="net-number ', (u = n.netLongTermClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.netLongTermClass, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">', o = (u = n.netLongTerm || t && t.netLongTerm, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "netLongTerm", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "formatTaxes", o, a))) + '</span>\n\n        <dl>\n            <dt>Long-term gain</dt>\n            <dd class="gain">' + l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, t && t.longTermGain, a) : f.call(t, "formatTaxes", t && t.longTermGain, a))) + '</dd>\n\n            <dt>Long-term loss</dt>\n            <dd class="loss">' + l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, t && t.longTermLoss, a) : f.call(t, "formatTaxes", t && t.longTermLoss, a))) + "</dd>\n\n            ", o = n["if"].call(t, t && t.showLongTermWashed, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n            ", o = n["if"].call(t, t && t.showLongTermPermanentlyWashed, {
                hash: {},
                inverse: c.noop,
                fn: c.program(3, d, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </dl>\n    </div>\n\n    <div class="impact-column">\n        <label>', (u = n.netShortTermLabel) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.netShortTermLabel, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " ", o = c.invokePartial(r["views/taxImpact/shortTermTooltip"], "views/taxImpact/shortTermTooltip", t, n, r);
            if (o || o === 0) s += o;
            s += '</label>\n        <span class="net-number ', (u = n.netShortTermClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.netShortTermClass, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">', o = (u = n.netShortTerm || t && t.netShortTerm, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "netShortTerm", a)), s += l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "formatTaxes", o, a))) + '</span>\n\n        <dl>\n            <dt>Short-term gain</dt>\n            <dd class="gain">' + l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, t && t.shortTermGain, a) : f.call(t, "formatTaxes", t && t.shortTermGain, a))) + '</dd>\n\n            <dt>Short-term loss</dt>\n            <dd class="loss">' + l((u = n.formatTaxes || t && t.formatTaxes, a = {
                hash: {}
            }, u ? u.call(t, t && t.shortTermLoss, a) : f.call(t, "formatTaxes", t && t.shortTermLoss, a))) + "</dd>\n\n            ", o = n["if"].call(t, t && t.showShortTermWashed, {
                hash: {},
                inverse: c.noop,
                fn: c.program(6, m, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n            ", o = n["if"].call(t, t && t.showShortTermPermanentlyWashed, {
                hash: {},
                inverse: c.noop,
                fn: c.program(8, g, i)
            });
            if (o || o === 0) s += o;
            return s += "\n        </dl>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/taxImpact/taxImpactBreakdown", n), n
    }), define("views/taxImpact/taxImpactBreakdownView", ["common/betterment.views", "hbs!views/taxImpact/taxImpactBreakdown"], function(e, t) {
        var n = {
            template: t,
            templateHelpers: {
                netLongTermLabel: function() {
                    return this.taxImpact().netLongTerm() >= 0 ? "Net long-term gain" : "Net long-term loss"
                },
                netLongTerm: function() {
                    return Math.abs(this.taxImpact().netLongTerm())
                },
                showLongTermWashed: function() {
                    return this.taxImpact().num("longTermWashed") > 0
                },
                showLongTermPermanentlyWashed: function() {
                    return this.taxImpact().num("longTermPermanentlyWashed") > 0
                },
                showLongTermPermanentlyWashedTooltip: function() {
                    return this.taxImpact().num("longTermWashed") <= 0
                },
                netShortTermLabel: function() {
                    return this.taxImpact().netShortTerm() >= 0 ? "Net short-term gain" : "Net short-term loss"
                },
                netShortTerm: function() {
                    return Math.abs(this.taxImpact().netShortTerm())
                },
                showShortTermWashed: function() {
                    return this.taxImpact().num("shortTermWashed") > 0
                },
                showShortTermPermanentlyWashed: function() {
                    return this.taxImpact().num("shortTermPermanentlyWashed") > 0
                },
                netLongTermClass: function() {
                    return this.taxImpact().netLongTerm() >= 0 ? "gain" : "loss"
                },
                netShortTermClass: function() {
                    return this.taxImpact().netShortTerm() >= 0 ? "gain" : "loss"
                },
                hasShortTermWashed: function() {
                    return this.taxImpact().num("shortTermWashed") > 0 || this.taxImpact().num("shortTermPermanentlyWashed") > 0
                },
                hasLongTermWashed: function() {
                    return this.taxImpact().num("longTermWashed") > 0 || this.taxImpact().num("longTermPermanentlyWashed") > 0
                },
                taxImpact: function() {
                    return this.self.model
                }
            },
            toolTips: {
                ".long-term-help": {
                    position: {
                        my: "center left",
                        at: "center right"
                    }
                },
                ".short-term-help": {
                    position: {
                        my: "center left",
                        at: "center right"
                    }
                },
                ".washed-losses-help": {
                    position: {
                        my: "center left",
                        at: "center right"
                    }
                }
            }
        };
        return e.View.extend(n)
    }), define("views/taxImpact/taxImpactDetailsView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/taxImpact/taxImpactLoss", "hbs!views/taxImpact/taxImpactGain", "hbs!views/taxImpact/lossesWashed", "hbs!views/taxImpact/pendingTransaction", "components/common/scripts/templateHelpers/formatTaxes", "services/taxImpactCalculator", "views/taxImpact/taxImpactBreakdownView", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        function p(e, t) {
            var n = e.get("type");
            return h[n] ? h[n][t] : ""
        }
        var h = {
                WITHDRAWAL: {
                    typeName: "withdrawal",
                    headline: "Withdrawals involve a sale of securities, which may result in taxes.",
                    valueAndType: function(e) {
                        return n.s("<strong>" + this.money(e.num("amount")) + "</strong> withdrawal")
                    }
                },
                ALLOCATION_CHANGE: {
                    typeName: "allocation change",
                    headline: "Allocation changes involve the sale of securities, which may result in taxes.",
                    valueAndType: function(e) {
                        return n.s("allocation change to <strong>" + this.pct(e.num("allocation")) + "</strong> stocks")
                    }
                },
                TRANSFER: {
                    typeName: "transfer",
                    headline: "Transfers involve the sale of securities, which may result in taxes.",
                    valueAndType: function(e) {
                        return n.s("<strong>" + this.money(e.num("amount")) + "</strong> transfer")
                    }
                }
            },
            d = {
                template: i,
                templateHelpers: {
                    headline: function() {
                        return p(this.taxImpact(), "headline")
                    },
                    transactionType: function() {
                        return p(this.taxImpact(), "typeName")
                    },
                    isWithdrawal: function() {
                        return this.transactionType() === "withdrawal"
                    },
                    valueAndType: function() {
                        var e = p(this.taxImpact(), "valueAndType");
                        return e ? e.call(this, this.taxImpact()) : ""
                    },
                    taxImpact: function() {
                        return this.self.model
                    },
                    estimatedTaxes: function() {
                        return a(f.estimateTaxes(this.taxImpact()))
                    },
                    netGain: function() {
                        return Math.abs(this.taxImpact().netGain())
                    },
                    netGainBeforeWash: function() {
                        return Math.abs(this.taxImpact().netGainBeforeWash())
                    },
                    netWashedLosses: function() {
                        return Math.abs(this.taxImpact().netWashedLosses())
                    }
                },
                toolTips: {
                    ".tax-help": {
                        position: {
                            my: "bottom center",
                            at: "top center"
                        }
                    }
                },
                regions: {
                    breakdownRegion: ".breakdown-region"
                },
                events: {
                    "click .impact-details-collapsed": "expandDetails"
                },
                onInitialize: function() {
                    t.extend(this.templateHelpers, this.options.templateHelpers), this.model.is("transactionPending") ? this.template = u : this.model.isLossWithWashed() ? this.template = o : this.model.isGain() ? this.template = s : this.template = i, this.track()
                },
                onRender: function() {
                    this.model.not("transactionPending") && this.breakdownRegion.show(new l({
                        model: this.model,
                        templateHelpers: this.templateHelpers
                    }))
                },
                track: function() {
                    var e = {};
                    e.Name = "TaxImpactModal", e.Allocation = this.model.get("allocation"), e.Amount = this.model.get("amount"), this.model.is("transactionPending") ? e.Type = "PendingTransaction" : (e.Type = this.model.is("isGain") ? "Gain" : "Loss", e.LongTermLoss = this.model.get("longTermLoss"), e.LongTermGain = this.model.get("longTermGain"), e.LongTermDisallowed = this.model.get("longTermWashed"), e.LongTermPermDisallowed = this.model.get("longTermPermanentlyWashed"), e.ShortTermLoss = this.model.get("shortTermLoss"), e.ShortTermGain = this.model.get("shortTermGain"), e.ShortTermDisallowed = this.model.get("shortTermWashed"), e.ShortTermPermDisallowed = this.model.get("shortTermPermanentlyWashed"), e.EstimatedTaxes = f.estimateTaxes(this.model)), c.track("ElementViewed", t.omit(e, t.isUndefined))
                },
                expandDetails: function(e) {
                    e && e.preventDefault(), this.$(".impact-details-collapsed").hide(), this.$(".impact-details").slideDown()
                }
            },
            v = {},
            m = r.View.extend(d, v);
        return m
    }), define("views/taxImpact/taxImpactView", ["jquery", "underscore", "common/betterment.views", "hbs!views/taxImpact/taxImpact", "views/taxImpact/taxImpactDetailsView"], function(e, t, n, r, i) {
        return n.ModalView.extend({
            className: "tax-impact",
            template: r,
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                buttons: function() {
                    return this.self.options.buttons
                }
            },
            regions: {
                impactData: ".impact-data-region"
            },
            events: {
                "click button.action": "onAction",
                "click a.existing-transactions": "hideModal"
            },
            hideModal: function() {
                this.trigger("navigateAway"), BMT.modal.close(this)
            },
            onShow: function() {
                this.block(!1, "tax-impact-spinner"), this.model.save().then(this.onDataLoaded.bind(this, this.model))
            },
            onDataLoaded: function(e) {
                this.unblock(), this.taxImpactDetailsView = new i({
                    model: e,
                    templateHelpers: this.templateHelpers
                }), this.impactData.show(this.taxImpactDetailsView)
            },
            onAction: function(t) {
                var n = e(t.target).data("trigger");
                BMT.modal.close(this), n && this.trigger(n)
            }
        })
    }), define("models/v1/baseTaxImpact", ["models/v1/baseModels"], function(e) {
        var t = {
            netLongTerm: function() {
                var e = Math.max(0, this.num("longTermLoss") - this.num("longTermWashed") - this.num("longTermPermanentlyWashed"));
                return this.num("longTermGain") - e
            },
            netLongTermBeforeWash: function() {
                return this.num("longTermGain") - this.num("longTermLoss")
            },
            netShortTerm: function() {
                var e = Math.max(0, this.num("shortTermLoss") - this.num("shortTermWashed") - this.num("shortTermPermanentlyWashed"));
                return this.num("shortTermGain") - e
            },
            netShortTermBeforeWash: function() {
                return this.num("shortTermGain") - this.num("shortTermLoss")
            },
            netGain: function() {
                return this.netLongTerm() + this.netShortTerm()
            },
            netWashedLosses: function() {
                return this.num("shortTermWashed") + this.num("longTermWashed") + this.num("shortTermPermanentlyWashed") + this.num("longTermPermanentlyWashed")
            },
            isLossWithWashed: function() {
                return this.netGainBeforeWash() < 0 && (this.num("longTermWashed") + this.num("longTermPermanentlyWashed") > 0 || this.num("shortTermWashed") + this.num("shortTermPermanentlyWashed") > 0)
            },
            netGainBeforeWash: function() {
                return this.netLongTermBeforeWash() + this.netShortTermBeforeWash()
            },
            isGain: function() {
                return this.netGain() >= 0
            }
        };
        return e.Model.extend(t)
    }), define("models/v1/transferTaxImpact", ["models/v1/baseTaxImpact"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("sourceAccount").getEndpoint() + "/transfer-tax-impacts"
            },
            relatedModels: ["sourceAccount"],
            defaults: {
                type: "TRANSFER"
            }
        };
        return e.extend(t)
    }), define("views/summary/transferFundsController", ["marionette", "views/summary/transferFundsView", "views/taxImpact/taxImpactView", "models/v1/transferTaxImpact"], function(e, t, n, r) {
        return e.Controller.extend({
            initialize: function(e) {
                this.sourceAccount = this.options.sourceAccount
            },
            go: function() {
                this.showConfirm()
            },
            showConfirm: function() {
                var e = new t({
                    amount: this.amount,
                    sourceAccount: this.sourceAccount,
                    toAccount: this.toAccount
                });
                this.listenTo(e, "proceed", this.onProceed), this.listenTo(e, "showTaxImpact", this.showTaxImpact, this), this.listenTo(e, "cancel", this.onCancel), BMT.modal.show(e)
            },
            showTaxImpact: function(e) {
                BMT.modal.close(e), this.amount = e.$amount.numberVal(), this.sourceAccount = e.model.get("fromAccount"), this.toAccount = e.model.get("toAccount");
                var t = new r({
                        amount: this.amount,
                        sourceAccount: this.sourceAccount,
                        destinationAccountId: this.toAccount.id
                    }),
                    i = new n({
                        model: t,
                        buttons: [{
                            id: "back-to-transfer",
                            title: "Back to transfer",
                            attributes: {
                                "class": "action",
                                "data-trigger": "showConfirm"
                            }
                        }, {
                            id: "close-and-cancel-transfer",
                            title: "Cancel transfer",
                            attributes: {
                                "class": "action silver",
                                "data-trigger": "cancel"
                            }
                        }]
                    });
                this.listenTo(i, "cancel navigateAway", this.onCancel), this.listenTo(i, "showConfirm", this.showConfirm), BMT.modal.show(i)
            },
            onCancel: function(e) {
                this.trigger("cancel", e)
            },
            onProceed: function(e) {
                this.trigger("proceed", e)
            }
        })
    }), define("models/v2/financialPlanAccountAddition", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("financialPlan").getEndpoint() + "/account_addition"
            },
            relatedModels: ["financialPlan"]
        };
        return e.Model.extend(t)
    }), define("models/v2/financialPlanAccountRemoval", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("financialPlan").getEndpoint() + "/account_removal"
            },
            relatedModels: ["financialPlan"],
            save: function() {
                return e.Model.prototype.save.apply(this, arguments).then(function() {
                    this.get("financialPlan").removePlanAccount(this.getIdParamsForKey("accountId"))
                }.bind(this))
            }
        };
        return e.Model.extend(t)
    }), define("services/financialPlanUpdater", ["components/common/scripts/modules/async", "models/v2/financialPlanAccountAddition", "models/v2/financialPlanAccountRemoval"], function(e, t, n) {
        return {
            getStateSynchronizer: function(r) {
                var i = r.enabled ? t : n,
                    s = new i({
                        financialPlan: r.financialPlan
                    });
                return r.enabled ? (r.account.set("goalAmount", 0), r.account.set("financialPlan", r.financialPlan)) : r.account.unset("financialPlan"), s.setIdParam("accountId", r.account.getIdParams()), s.dollars("annualContribution", r.annualContribution), {
                    save: function() {
                        return r.enabled ? e.whenAll([s.save(), r.account.save()]) : s.save()
                    }
                }
            }
        }
    }), define("views/summary/deleteAccountView", ["jquery", "underscore", "backbone", "common/betterment.views", "components/common/scripts/models/appData", "services/financialPlanUpdater"], function(e, t, n, r, i, s) {
        return r.ModalView.extend({
            template: "summary/deleteAccount",
            className: "delete-account",
            toolTips: {
                "#distributionHelp": {
                    position: {
                        my: "top center",
                        at: "bottom center"
                    }
                }
            },
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                ira: function() {
                    return this.self.model.isIRA()
                },
                account_selector: function() {
                    var e = this,
                        n = BMT.accounts().filter(function(t) {
                            return t.getIdOrCid() !== e.self.model.getIdOrCid() && !t.isIRA()
                        }),
                        r = !this.ira() && n.length,
                        i = BMT.accountGroup.get("bankAccount").get("description"),
                        s = "bank",
                        o = "targetAccountId",
                        u;
                    if (r && BMT.accountGroup.get("bankAccount").is("confirmed")) {
                        var a = t.map(n, function(e) {
                            return {
                                value: e.getIdOrCid(),
                                label: e.get("name")
                            }
                        });
                        a.push({
                            value: s,
                            label: "Withdrawal"
                        }), u = this.build_dropdown_menu(a, {
                            "class": "account-selector",
                            name: o,
                            value: s,
                            style: "width: 260px;"
                        })
                    } else u = '<div class="bank-name"><input type="hidden" name="' + o + '" value="' + s + '">' + i + "</div>";
                    return u
                },
                distributionSelector: function() {
                    return this.build_dropdown_menu(i.getInstance().distributionsForSelect(BMT.user), {
                        name: "distributionType",
                        "class": "distribution-type-selector",
                        style: "width: 260px;"
                    })
                }
            },
            events: {
                "click #ok": "onOK",
                "click #cancel": "onCancel",
                "change .distribution-type-selector": "toggleRolloverCopy",
                "click .show-tax-impact": "showTaxImpact"
            },
            onRender: function() {
                this.$selector = this.$(".distribution-type-selector"), this.$rolloverCopy = this.$(".rollover-copy"), this.$(".account-selector ul li a[data-value=" + (this.options.toAccountId || "bank") + "]").click()
            },
            toggleRolloverCopy: function(e) {
                this.$selector.val() === "ROLL" ? this.$rolloverCopy.slideDown() : this.$rolloverCopy.slideUp()
            },
            updateModelDestinationAccount: function() {
                var e = this.$("[name=targetAccountId]"),
                    t = e.length && !this.model.isIRA() && e.val() !== "bank" && e.intVal() !== this.model.getIdOrCid();
                t ? this.model.set("transferAllTo", e.intVal()) : this.model.unset("transferAllTo")
            },
            onOK: function(e) {
                var e = this.$("[name=targetAccountId]");
                console.log(e, e.val());
                this.model.set("transferAllTo", e.val());
                console.log(this.model);
                var n = this,
                    r = function() {
                        function e() {
                            n.model.destroy({
                                wait: !0,
                                success: function() {
                                    n.options.callback && n.options.callback(), BMT.flash("Your " + t.escape(n.model.get("name")) + " goal has been deleted."), BMT.modal.close(n), BMT.refreshAccounts()
                                },
                                error: function() {
                                    BMT.modal.close(n)
                                },
                                complete: function() {
                                    n.unblock()
                                }
                            })
                        }
                        n.trigger("proceed", n), n.block(), BMT.selectedAccount = BMT.accounts().find(function(e) {
                            return e.get("id") !== n.model.get("id")
                        }), n.updateModelDestinationAccount();
                        var r = BMT.user.get("financialPlans").selected();
                        r.hasPlanAccount(n.model.getIdParams()) ? s.getStateSynchronizer({
                            account: n.model,
                            financialPlan: r,
                            enabled: !1
                        }).save().then(e) : e()
                    },
                    i = this.$("[name=distributionType]");
                if (i.length) {
                    this.model.set("distributionType", i.val(), {
                        forceUpdate: !0
                    });
                    var o = this.model.get("distributionType"),
                        u = o === "BENE",
                        a = o === "DISA";
                    if (u || a) {
                        var f = u ? "Beneficiary" : "Disability",
                            l = u ? "certified copy of the account holder's death certificate." : "copy of a physician's statement or letter from the Age Pension office confirming your disability.";
                        BMT.alert({
                            width: 450,
                            icon: "warning",
                            title: "Extra Documentation Required",
                            body: "You've chosen a " + f + " distribution, which will require verification by the IRS " + "in order to avoid penalty. We may contact you in the future to collect a " + l,
                            buttons: [{
                                id: "yes",
                                title: "Continue as " + f + " distribution"
                            }, {
                                id: "no",
                                title: "Cancel",
                                attributes: {
                                    "class": "cancel"
                                }
                            }],
                            handler: function(e) {
                                e === "yes" ? r() : BMT.modal.close(this)
                            }
                        })
                    } else r()
                } else r()
            },
            onCancel: function(e) {
                this.trigger("cancel", this), BMT.refreshAccounts(), BMT.modal.close(this)
            },
            showTaxImpact: function(e) {
                e.preventDefault(), this.updateModelDestinationAccount(), this.trigger("showTaxImpact", this)
            }
        })
    }), define("models/v1/withdrawalTaxImpact", ["models/v1/baseTaxImpact"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("account").getEndpoint() + "/withdrawal-tax-impacts"
            },
            defaults: {
                type: "WITHDRAWAL"
            }
        };
        return e.extend(t)
    }), define("views/summary/deleteAccountController", ["marionette", "views/summary/deleteAccountView", "views/taxImpact/taxImpactView", "models/v1/transferTaxImpact", "models/v1/withdrawalTaxImpact"], function(e, t, n, r, i) {
        return e.Controller.extend({
            initialize: function() {
                this.sourceAccount = this.options.sourceAccount
            },
            go: function() {
                this.showConfirm()
            },
            showConfirm: function() {
                var e = t.show({
                    model: this.sourceAccount,
                    toAccountId: this.toAccountId,
                    callback: this.options.callback
                });
                this.listenTo(e, "proceed", this.onProceed), this.listenTo(e, "showTaxImpact", this.showTaxImpact), this.listenTo(e, "cancel", this.onCancel)
            },
            showTaxImpact: function(e) {
                BMT.modal.close(e), this.toAccountId = e.model.get("transferAllTo");
                var t, s = this.sourceAccount.get("availableBalanceForWithdrawal");
                this.toAccountId ? t = new r({
                    sourceAccount: this.sourceAccount,
                    amount: s,
                    destinationAccountId: this.toAccountId
                }) : t = new i({
                    account: this.sourceAccount,
                    amount: s
                });
                var o = new n({
                    model: t,
                    buttons: [{
                        id: "back-to-transfer",
                        title: "Back to transfer",
                        attributes: {
                            "class": "action",
                            "data-trigger": "showConfirm"
                        }
                    }, {
                        id: "close-and-cancel-transfer",
                        title: "Cancel transfer",
                        attributes: {
                            "class": "action silver",
                            "data-trigger": "cancel"
                        }
                    }]
                });
                this.listenTo(o, "cancel navigateAway", this.onCancel), this.listenTo(o, "showConfirm", this.showConfirm), BMT.modal.show(o)
            },
            onCancel: function(e) {
                this.trigger("cancel", e)
            },
            onProceed: function(e) {
                this.trigger("proceed", e)
            }
        })
    }), define("views/common/iraRecharacterizationView", ["jquery", "underscore", "backbone", "common/betterment.views", "common/betterment.models", "models/account"], function(e, t, n, r, i, s) {
        var o = i.RelationalModel.extend({
            url: "/iraRecharacterization",
            validation: {
                amount: function(e, t, n, r) {
                    var i = parseFloat(e);
                    if (n.type === "full") return !1;
                    if (!isNaN(i)) {
                        var s = 10,
                            o = n.conversion.amount;
                        return i < s ? "Amount is too small" : i > o ? "Amount is too large" : !1
                    }
                    return "Amount is required"
                }
            },
            toJSON: function() {
                var e = t.clone(this.attributes);
                return delete e.parentUser, delete e.account, e.conversion = e.conversion ? e.conversion.id : undefined, e
            },
            eligibleConversions: function() {
                return this.get("account").get("eligibleConversions")
            }
        });
        return r.ModalView.extend({
            template: "common/iraRecharacterization",
            className: "ira-recharacterization",
            templateHelpers: {
                render_date: function(e) {
                    return this.formatDate("m/dd/yy", i.Model.date(e))
                },
                has_traditional_ira: function() {
                    return BMT.accounts().hasTraditionalIRA()
                }
            },
            toolTips: {
                "#recharacterizationHelp": {
                    position: {
                        my: "left bottom",
                        at: "right center"
                    }
                }
            },
            events: {
                "click tbody tr": "selectRow",
                "change [name=type]": "radioChanged",
                "click input[name=amount]": "switchToPartial",
                "click #ok": "onOK",
                "click #cancel": "onCancel",
                "keydown input[name=amount]": "restrictDecimal",
                "keyup input[name=amount]": "partialAmountChange"
            },
            onInitialize: function() {
                this.model = new o({
                    account: this.options.account
                })
            },
            onRender: function() {
                this.$fullRadio = this.$("input[name=type][value=full]"), this.$partialRadio = this.$("input[name=type][value=partial]"), this.$amountInput = this.$("input[name=amount]")
            },
            onShow: function() {
                this.selectRow(), this.rivet = rivets.bind(this.$el, {
                    view: this
                }), this.applyValidation()
            },
            selectRow: function(t) {
                var r = n.Syphon.serialize(this),
                    i = t ? e(t.currentTarget) : this.$("tbody tr:first-child");
                i.addClass("selected").siblings().removeClass("selected"), this.$fullRadio.attr("checked", "checked");
                var s = parseInt(i.attr("id").replace("conversion", ""));
                this.selectedConversion = this.model.eligibleConversions()[s], r.conversion = this.selectedConversion, r.amount = this.selectedConversion.amount, this.model.set(r), this.radioChanged()
            },
            radioChanged: function(e) {
                var t = e ? this.$("[name=type]:checked").val() : "full";
                this.model.set("type", t);
                if (t === "partial") this.$amountInput.removeAttr("readonly");
                else {
                    var n = this.selectedConversion.amount;
                    this.hideAllValidation(), this.$amountInput.attr("readonly", "readonly").val(n), this.model.set("amount", n), this.trigger("change:amount")
                }
            },
            switchToPartial: function(t) {
                e(t.currentTarget).is("[readonly]") && (this.$partialRadio.attr("checked", "checked"), this.$partialRadio.trigger("change"))
            },
            partialAmountChange: function(t) {
                this.model.set("amount", parseFloat(e(t.currentTarget).val()), {
                    forceUpdate: !0
                }), this.trigger("change:amount")
            },
            onOK: function(e) {
                var t = n.Syphon.serialize(this);
                if (!this.model.validate(t)) {
                    t.type === "full" && delete t.amount;
                    var r = this;
                    this.block(), this.model.save(t, {
                        success: function() {
                            BMT.user.fetch({
                                success: function() {
                                    BMT.refreshAccounts()
                                }
                            }), BMT.flash("IRA Recharacterization initiated.<br />You will receive a confirmation email shortly."), BMT.modal.close(r)
                        },
                        complete: function() {
                            r.unblock()
                        }
                    })
                } else this.triggerAllValidation(t)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            },
            _fullAmount: function() {
                var e = this.selectedConversion;
                return this.trigger("change:amount"), e ? e.amount : 0
            },
            _netIncome: function() {
                var e = this.selectedConversion;
                return e.netIncome * (this.model.num("amount") / e.amount)
            },
            _totalAmount: function() {
                var e = this.selectedConversion,
                    t = e.netIncome * (this.model.num("amount") / e.amount);
                return this.model.num("amount") + t
            }
        })
    }), define("hbs!views/common/addGoal/cardRow", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return '<span class="underline">'
            }

            function h(e, t) {
                return "</span>"
            }

            function p(e, t) {
                var r = "",
                    i, s;
                r += '\n            <div class="help-content">', (s = n.tooltip) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.tooltip, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s);
                if (i || i === 0) r += i;
                return r += "</div>\n        ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<li class="highlight ', (u = n.key) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.key, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <div class="help-text category ', (u = n.key) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.key, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n        ', o = n["if"].call(t, t && t.tooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            (u = n.name) ? o = u.call(t, {
                hash: {}
            }): (u = t && t.name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u);
            if (o || o === 0) s += o;
            o = n["if"].call(t, t && t.tooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(3, h, i)
            });
            if (o || o === 0) s += o;
            s += "\n        ", o = n["if"].call(t, t && t.tooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(5, p, i)
            });
            if (o || o === 0) s += o;
            return s += "\n    </div>\n</li>\n", s
        });
        return t.registerPartial("views/common/addGoal/cardRow", n), n
    }), define("modules/modelStrategyBuilder", ["underscore"], function(e) {
        function t() {
            this.rules = [], this.fallback = null
        }
        return e.extend(t.prototype, {
            when: function(t, n, r) {
                return e.isFunction(t) ? this.rules.push({
                    check: t,
                    handler: n
                }) : this.rules.push({
                    attribute: t,
                    value: n,
                    handler: r
                }), this
            },
            otherwise: function(e) {
                return this.fallback = e, this
            },
            execute: function(t) {
                var n = e.find(this.rules, function(e) {
                    return e.check ? e.check(t) : e.value === t.get(e.attribute)
                });
                return n ? n.handler(t) : this.fallback && this.fallback(t)
            }
        }), t
    }), define("models/rolloverFollowup", ["jquery", "underscore", "backbone", "common/betterment.models", "models/account", "components/common/scripts/models/appData"], function(e, t, n, r, i, s) {
        var o = r.RelationalModel.extend({
            url: "/rolloverFollowup",
            defaults: {
                matched: !1
            },
            relations: [{
                type: n.HasOne,
                key: "account",
                includeInJSON: "id",
                relatedModel: i.Model
            }],
            validation: {
                sourceType: function(e, n, r, i) {
                    if (!t.contains(t.pluck(s.getInstance().get("sourceTypes"), "value"), e)) return "Invalid source type"
                },
                fundType: function(e, n, r, i) {
                    if (!t.contains(s.getInstance().get("fundTypes"), e)) return "Invalid fund type"
                },
                matched: {
                    required: !0
                },
                previousProvider: {
                    required: function(e, t, n) {
                        return n.sourceType.isQualified && o.isRealFundType(n.fundType)
                    },
                    minLength: 1
                },
                approximateValue: {
                    required: function(e, t, n) {
                        return n.sourceType.isQualified && o.isRealFundType(n.fundType)
                    },
                    pattern: "number"
                }
            }
        }, {
            isRealFundType: function(e) {
                return t.contains(t.values(s.getInstance().get("fundTypes")), e)
            }
        });
        return {
            Model: o
        }
    }), define("views/common/addGoal/addGoalCardView", ["underscore", "common/betterment.views"], function(e, t) {
        return t.View.extend({
            template: "common/addGoal/addGoalCard",
            className: "goal-card",
            templateHelpers: {
                getTooltip: function() {
                    var t = e.isFunction(this.tooltip) ? this.tooltip() : this.tooltip,
                        n = e.isFunction(this.disabledTooltip) ? this.disabledTooltip() : this.disabledTooltip,
                        r = this.enabled;
                    return t && r || !r && !n ? t : n ? n : ""
                }
            },
            events: {
                click: "onClick"
            },
            onInitialize: function() {
                this.options = e.extend({
                    enabled: !0,
                    checked: !1,
                    selected: !1,
                    greenFlag: !1,
                    tooltip: !1,
                    hidden: !1,
                    disabledTooltip: !1,
                    tooltipOptions: {
                        my: "bottom center",
                        at: "top center",
                        adjust: {
                            y: -7
                        }
                    },
                    overlay: !1,
                    rollover: !1,
                    income: !1
                }, this.options || {}), e.extend(this.templateHelpers, this.options), this.options.extraClass && this.$el.addClass(this.options.extraClass), this.setEnabled(this.options.enabled), this.setHidden(this.options.hidden), this.setChecked(this.options.checked), this.setSelected(this.options.selected), this.setGreenFlag(this.options.greenFlag)
            },
            onRender: function() {
                var e = this.options.tooltipOptions || {};
                this.build_tooltip(this.$el, e)
            },
            onClick: function() {
                this.options.onClick && this.options.onClick(this, this.options), this.trigger("click", this, this.options)
            },
            onSelect: function(e) {
                this.options.onSelect && this.options.onSelect(e)
            },
            initFromAccount: function(e) {
                this.setSelected(e.get("goalType") === this.options.goalType && e.get("accountType") === this.options.accountType && e.get("income") === this.options.income)
            },
            setEnabled: function(e) {
                this.options.enabled = e, this.$el.toggleClass("disabled", !e)
            },
            setHidden: function(e) {
                this.options.hidden = e, this.$el.toggleClass("hidden", e)
            },
            isEnabled: function() {
                return !this.$el.hasClass("disabled")
            },
            setSelected: function(e) {
                this.options.selected = e, this.$el.toggleClass("selected", e)
            },
            isSelected: function() {
                return this.$el.hasClass("selected")
            },
            setChecked: function(e) {
                this.options.checked = e, this.$el.toggleClass("checked", e)
            },
            setGreenFlag: function(e) {
                this.options.greenFlag = e, this.$el.toggleClass("has-green-flag", e)
            },
            isRollover: function() {
                return this.options.rollover
            },
            isIncome: function() {
                return this.options.income
            },
            getAccountType: function() {
                return this.options.accountType
            },
            getGoalType: function() {
                return this.options.goalType
            },
            getGoalName: function() {
                return this.options.goalName
            }
        })
    }), define("views/common/addGoal/addGoalCardDefinitions", ["underscore", "components/common/scripts/services/domainService", "components/account/scripts/constants/accountTypes"], function(e, t, n) {
        function r(t, n) {
            return e.extend({}, t, n)
        }

        function i(e) {
            e.isNew() ? e.unset("goalAmount", {
                forceUpdate: !0
            }) : e.set("goalAmount", 0, {
                forceUpdate: !0
            })
        }
        var s = {};
        return s.BASE = {
            tooltipOptions: {
                position: {
                    my: "bottom center",
                    at: "top center",
                    adjust: {
                        y: -7
                    }
                },
                hide: {
                    fixed: !0,
                    delay: 250
                }
            },
            income: !1,
            rollover: !1
        }, s.BASE_INCOME = r(s.BASE, {
            tooltip: "Income goals are for Retirees who would like to take periodic withdrawals for income.",
            goalType: "RETIREMENT",
            income: !0,
            onSelect: i
        }), s.TRADITIONAL_IRA = r(s.BASE, {
            cardTitle: "Traditional<br />IRA",
            extraClass: "traditional-ira",
            tooltip: function() {
                return 'SMSF contributions may be tax deductible, and you defer paying taxes on gains until you withdraw in retirement. Consult a tax advisor to see if your contribution is deductible. '
            },
            disabledTooltip: "Great job, you already have a SMSF. To simplify your retirement saving we allow you to just have one SMSF and one SMSF. To add money or roll over a 401(k) or IRA into your SMSF please go to the Transfer page of your account.",
            goalName: "SMSF",
            goalType: "RETIREMENT",
            accountType: n.TRADITIONAL_IRA
        }), s.TRADITIONAL_IRA_INCOME = r(s.BASE_INCOME, {
            cardTitle: "Traditional<br />Income<br />IRA",
            extraClass: "traditional-income-ira",
            goalName: "SMSF",
            accountType: n.TRADITIONAL_IRA
        }), s.ROTH_IRA = r(s.BASE, {
            cardTitle: "SMSF",
            extraClass: "roth-ira",
            tooltip: function() {
                return 'SMSF contributions are not tax deductible today, but withdrawals are usually tax-free in retirement. Consult a tax advisor for details. '
            },
            disabledTooltip: "Great job, you already have a SMSF. To simplify your retirement saving we allow you to just have one SMSF and one SMSF. To add money or roll over a 401(k) or IRA into your SMSF please go to the Transfer page of your account.",
            goalName: "SMSF",
            goalType: "RETIREMENT",
            accountType: n.ROTH_IRA
        }), s.ROTH_IRA_INCOME = r(s.BASE_INCOME, {
            cardTitle: "Roth<br />Income<br />IRA",
            extraClass: "roth-income-ira",
            goalName: "SMSF",
            accountType: n.ROTH_IRA
        }), s.SEP_IRA = r(s.BASE, {
            cardTitle: "SEP IRA",
            extraClass: "sep-ira",
            tooltip: "Betterment’s SEP IRA is intended for self-employed individuals.  SEP IRA contributions may be tax deductible, and you defer paying taxes on gains until you withdraw in retirement.  Consult your tax advisor to see if your contributions are deductible.",
            disabledTooltip: "Great job, you already have a SEP IRA. To simplify your retirement saving we allow you to just have one SEP IRA. ",
            goalName: "SEP IRA",
            goalType: "RETIREMENT",
            accountType: n.SEP_IRA
        }), s.SEP_IRA_INCOME = r(s.BASE_INCOME, {
            cardTitle: "SEP Income<br />IRA",
            extraClass: "sep-income-ira",
            goalName: "SEP IRA",
            accountType: n.SEP_IRA
        }), s.ROLLOVER = r(s.BASE, {
            cardTitle: "Roll over<br />your SMSF/<br />401(k)/403(b)",
            extraClass: "rollover",
            tooltip: function() {
                return 'Rolling over allows you to move your existing IRA/401(k)/403(b) retirement savings into a Traditional or SMSF. '
            },
            goalName: "SMSF",
            goalType: "RETIREMENT",
            accountType: n.TRADITIONAL_IRA,
            rollover: !0
        }), s.EMERGENCY = r(s.BASE, {
            cardTitle: "Wealth Protection",
            extraClass: "emergency",
            tooltip: function() {
                return 'We recommend that everyone have a "wealth protection" or emergency fund to help keep other goals on track in case of unplanned financial situations.'
            },
            goalName: "Wealth Protection",
            goalType: "EMERGENCY",
            accountType: n.INVESTING
        }), s.BUILD_WEALTH = r(s.BASE, {
            cardTitle: "Grow Wealth",
            extraClass: "just-save",
            tooltip: function() {
                return 'Just save and grow your money without a target amount in mind.'
                            },
            goalName: "Grow Wealth",
            goalType: "BUILD_WEALTH",
            accountType: n.INVESTING,
            onSelect: i
        }), s.RETIREMENT = r(s.BASE, {
            cardTitle: "Retirement",
            extraClass: "retirement",
            tooltip: function() {
                return 'Create a retirement goal in or out of your Self-managed super fund (SMSF).'
            },
            goalName: "My Retirement",
            goalType: "RETIREMENT",
            accountType: n.INVESTING
        }), s.RETIREMENT_INCOME = r(s.BASE_INCOME, {
            cardTitle: "Retirement Income",
            extraClass: "retirement-income",
            goalName: "My Income"
        }), s.EMERGENCY_ETHICAL = r(s.BASE, {
            cardTitle: "Savings",
            extraClass: "emergency",
            tooltip: function() {
                return 'Save for a purpose.'
            },
            goalName: "Ethical Savings",
            goalType: "EMERGENCY_ETHICAL",
            accountType: n.INVESTING
        }), s.BUILD_WEALTH_ETHICAL = r(s.BASE, {
            cardTitle: "Wealth",
            extraClass: "just-save",
            tooltip: function() {
                return 'Just save and grow your money without a target amount in mind.'
                            },
            goalName: "Ethical Wealth",
            goalType: "BUILD_WEALTH_ETHICAL",
            accountType: n.INVESTING,
            onSelect: i
        }), s.RETIREMENT_ETHICAL = r(s.BASE, {
            cardTitle: "Retirement",
            extraClass: "retirement",
            tooltip: function() {
                return 'Create a retirement goal in or out of your Self-managed super fund (SMSF).'
            },
            goalName: "My Ethical Retirement",
            goalType: "RETIREMENT_ETHICAL",
            accountType: n.INVESTING
        }), s.RETIREMENT_INCOME_ETHICAL = r(s.BASE_INCOME, {
            cardTitle: "Retirement Income",
            extraClass: "retirement-income",
            goalType: "RETIREMENT_ETHICAL",
            accountType: n.INVESTING,
            tooltip: function() {
                return 'Income goals are for Retirees who would like to take periodic withdrawals for income.'
            },
            goalName: "My Ethical Income"
        }),s.HOUSE = r(s.BASE, {
            cardTitle: "House",
            extraClass: "house",
            tooltip: "Save toward a down payment or the full price for the house of your dreams.",
            goalName: "House Fund",
            goalType: "HOUSE",
            accountType: n.INVESTING
        }), s.EDUCATION = r(s.BASE, {
            cardTitle: "Education",
            extraClass: "education",
            tooltip: function() {
                return 'Save for your kid&#39;s education or set some money aside for your own educational growth.'
            },
            goalName: "Education Fund",
            goalType: "EDUCATION",
            accountType: n.INVESTING
        }), s.OTHER = r(s.BASE, {
            cardTitle: "Other",
            extraClass: "other",
            tooltip: "Don&#39;t see a goal? Create your own.",
            goalType: "OTHER",
            accountType: n.INVESTING
        }), {
            get: function(t) {
                if (!s[t]) throw new Error("No definition for add goal card: " + t);
                return e.clone(s[t])
            },
            inherit: function(t, n) {
                return e.extend(this.get(t), n)
            }
        }
    }), define("hbs!views/profile/editBeneficiaries", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return "\n        Please designate beneficiaries for your SMSF. If you are married, your spouse will automatically be named as your sole primary beneficiary. If you choose not to designate any beneficiaries, your SMSF will become the property of your estate upon your death.\n    "
            }

            function h(e, t) {
                return "\n        Register your existing BetaSmartz Securities brokerage account as a Transfer on Death (TOD) account and designate the beneficiaries to receive the account assets upon your death. Adding a beneficiary to this account will supersede any conflicting provisions in any will, trust, or agreement, except for joint accounts. For joint accounts, ownership shall pass to the surviving joint account holder.\n    "
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += "<h1>", (u = n.title) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.title, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</h1>\n<div class="modal-body">\n    ', o = n["if"].call(t, t && t.isIRA, {
                hash: {},
                inverse: l.program(3, h, i),
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += '\n</div>\n<div class="clearfix"></div>\n\n<div class="top">\n    <h2>Primary Beneficiaries</h2>\n    <div class="primaryBeneficiaries">\n    </div>\n</div>\n\n<h2>Contingent Beneficiaries</h2>\n<div class="contingentBeneficiaries">\n</div>\n\n\n<div class="modal-buttons">\n    <button class="ok">Submit</button>\n    <button class="cancel" class="cancel">Cancel</button>\n</div>\n', s
        });
        return t.registerPartial("views/profile/editBeneficiaries", n), n
    }), define("hbs!views/profile/editBeneficiary", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            s += '<div class="left name">\n    <input type="text" name="name" value="', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</div>\n\n<div class="left relationship">\n    ', (u = n.relationshipDropdown) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.relationshipDropdown, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u);
            if (o || o === 0) s += o;
            return s += '\n</div>\n\n<div class="left dateOfBirth">\n    <input type="text" name="dateOfBirth" maxlength="10" value="', (u = n.formattedDOB) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.formattedDOB, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" placeholder="mm/dd/yyyy" />\n</div>\n\n<div class="left share">\n    <input type="number" name="share" value="', (u = n.share) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.share, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</div>\n\n<div class="left delete-icon"></div>', s
        });
        return t.registerPartial("views/profile/editBeneficiary", n), n
    }), define("views/profile/editBeneficiaryView", ["jquery", "underscore", "common/betterment.views", "components/common/scripts/models/appData", "hbs!views/profile/editBeneficiary", "components/common/scripts/services/dateService"], function(e, t, n, r, i, s) {
        return n.View.extend({
            template: i,
            className: "edit-beneficiary",
            triggers: {
                "change input[name=share]": "change:share"
            },
            events: {
                "keydown input[name=share]": "restrictShareInput",
                "change input": "inputChanged",
                "change .relationship-selector": "relationshipChanged",
                "click .delete-icon": "removeBeneficiary"
            },
            ui: {
                name: "input[name=name]",
                dateOfBirth: "input[name=dateOfBirth]",
                share: "input[name=share]",
                relationshipSelect: "[name=relationship]"
            },
            templateHelpers: {
                relationshipDropdown: function() {
                    var e = this.self.model.get("relationship");
                    return this.build_dropdown_menu(r.getInstance().get("beneficiaryRelationships"), {
                        "class": "relationship-selector",
                        name: "relationship",
                        value: typeof e == "undefined" ? "" : e
                    })
                },
                formattedDOB: function() {
                    return this.self.model.date("dateOfBirth").toString("MM/dd/yyyy")
                }
            },
            onShow: function() {
                this.ui.dateOfBirth.mask("99/99/9999"), this.relationshipChanged(), this.applyValidation({
                    transformers: {
                        dateOfBirth: {
                            transform: function(e) {
                                return s.parseDateFieldValue(e).serverFormat()
                            }
                        }
                    }
                }), this.$delete = this.$(".delete-icon").tooltip({
                    title: "Delete",
                    template: '<div class="tooltip modal-tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'
                })
            },
            restrictShareInput: function(e) {
                return this.restrictLength(e, 5) && this.restrictDecimal(e)
            },
            inputChanged: function(e) {
                var t = e.target.name,
                    n = e.target.value,
                    r = t === "dateOfBirth" ? s.parseDateFieldValue(n).serverFormat() : n;
                this.model.set(t, r)
            },
            relationshipChanged: function(e) {
                var t = this.ui.relationshipSelect.val();
                this.ui.dateOfBirth.toggleClass("hidden", t === "ESTATE" || t === "ENTITY"), this.model.set("relationship", t)
            },
            removeBeneficiary: function() {
                this.$delete.tooltip("destroy"), this.trigger("remove:beneficiary", this.model)
            }
        })
    }), define("modules/basisPointConverter", [], function() {
        return {
            convertPercentStringToBasis: function(e) {
                var t = this._padIntStringArray(e.split("."));
                return parseInt(t[0], 10) + parseInt(t[1], 10)
            },
            _padIntStringArray: function(e) {
                var t = e[0] || "0",
                    n = e[1] || "";
                return t += "00", n = (n + "00").slice(0, 2), [t, n]
            }
        }
    }), define("models/v1/beneficiary", ["models/v1/baseModels", "components/common/scripts/services/dateService"], function(e, t) {
        var n = {
            validation: {
                name: {
                    required: !0,
                    rangeLength: [1, 255]
                },
                relationship: {
                    required: !0
                },
                dateOfBirth: function(e, n, r) {
                    if (!this.isDOBRequired(r)) return !1;
                    if (!e) return "Please enter birthdate.";
                    var i = t.parseServerDate(e);
                    if (!i.isValid()) return "Please enter a valid date.";
                    var s = (new Date).clearTime();
                    if (i.isAfter(s)) return "This date is in the future.";
                    var o = (new Date).clearTime().addYears(-115);
                    return i.isBefore(o) ? "Must be at most 115 years old." : !1
                },
                share: {
                    required: !0,
                    pattern: /^\d{0,3}?(\.\d{0,2})?$/,
                    range: [1, 100],
                    msg: "Must be a valid number between 1 and 100 with at most 2 decimals"
                }
            },
            isDOBRequired: function(e) {
                var t = e.relationship;
                return t !== "ESTATE" && t !== "ENTITY"
            }
        };
        return e.Model.extend(n)
    }), define("hbs!views/profile/editBeneficiaryComposite", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header">\n    <label class="left note name">Name</label>\n    <label class="left note relationship">Relationship</label>\n    <label class="left note dateOfBirth">Birth date</label>\n    <label class="left note">Share</label>\n</div>\n\n<div class="contents"></div>\n\n<button class="add silver">Add Another Beneficiary</button>\n<h2 class="right shareTotal"></h2>\n'
        });
        return t.registerPartial("views/profile/editBeneficiaryComposite", n), n
    }), define("views/profile/editBeneficiaryCompositeView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/profile/editBeneficiaryView", "modules/basisPointConverter", "models/v1/beneficiary", "hbs!views/profile/editBeneficiaryComposite"], function(e, t, n, r, i, s, o, u) {
        return r.CompositeView.extend({
            template: u,
            className: "beneficiaries-table",
            events: {
                "click button.add": "addBeneficiary"
            },
            ui: {
                header: ".header",
                shareTotal: ".shareTotal"
            },
            childView: i,
            childViewContainer: ".contents",
            childEvents: {
                "change:share": "shareChanged",
                "remove:beneficiary": "removeBeneficiary"
            },
            addChild: function(e, t, r) {
                e.get("primary") === this.options.primary && n.Marionette.CollectionView.prototype.addChild.apply(this, arguments)
            },
            isEmpty: function() {
                return this.collection.where({
                    primary: this.options.primary
                }).length === 0
            },
            onShow: function() {
                this.listenTo(this.collection, "add", this.collectionChange), this.listenTo(this.collection, "remove", this.collectionChange), this.shareChanged()
            },
            collectionChange: function() {
                this.ui.header.toggle(!this.isEmpty()), this.shareChanged()
            },
            addBeneficiary: function() {
                this.collection.add(new o({
                    primary: this.options.primary,
                    share: this.getTotalShare() >= 1e4 ? 0 : (1e4 - this.getTotalShare()) / 100
                }))
            },
            removeBeneficiary: function(e, t) {
                this.collection.remove(t)
            },
            sumShareTotal: function(e, t) {
                return e + s.convertPercentStringToBasis(String(t.get("share") || 0))
            },
            getTotalShare: function() {
                return t.reduce(this.collection.where({
                    primary: this.options.primary
                }), this.sumShareTotal, 0)
            },
            shareChanged: function(e) {
                this.ui.shareTotal.text("Total " + this.formatter.pctFromBasis(this.getTotalShare()))
            },
            validateBeneficiaries: function() {
                var e = this.children.some(function(e) {
                    return e.triggerAllValidation(), e.model.validate() || !1
                });
                return e
            },
            hasErrors: function() {
                var e = this.validateBeneficiaries(),
                    t = this.getTotalShare() !== 1e4 && this.getTotalShare() !== 0 ? "Shares must sum to 100%" : !1;
                return this.updateFieldValidation(this.ui.shareTotal, t), e || t
            }
        })
    }), define("views/profile/editBeneficiariesView", ["hbs!views/profile/editBeneficiaries", "common/betterment.views", "views/profile/editBeneficiaryCompositeView"], function(e, t, n) {
        return t.ModalView.extend({
            template: e,
            className: "edit-beneficiaries",
            regions: {
                primaryBeneficiaries: ".primaryBeneficiaries",
                contingentBeneficiaries: ".contingentBeneficiaries"
            },
            templateHelpers: {
                title: function() {
                    return (this.isIRA() ? this.self.options.collectionName : "Transfer On Death") + " Beneficiaries"
                },
                isIRA: function() {
                    return this.self.options.isIRA
                }
            },
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel"
            },
            onShow: function() {
                this.primaryBeneficiariesView = new n({
                    collection: this.collection,
                    primary: !0
                }), this.primaryBeneficiariesView.isEmpty() && this.primaryBeneficiariesView.addBeneficiary(), this.contingentBeneficiariesView = new n({
                    collection: this.collection,
                    primary: !1
                }), this.primaryBeneficiaries.show(this.primaryBeneficiariesView), this.contingentBeneficiaries.show(this.contingentBeneficiariesView)
            },
            onOK: function(e) {
                if (this.primaryBeneficiariesView.hasErrors() || this.contingentBeneficiariesView.hasErrors()) return;
                this.block(), this.collection.save().then(function() {
                    BMT.modal.close(this), BMT.flash("Your beneficiaries were updated successfully"), this.collection.reset(this.collection.models), this.collection.trigger("sync")
                }.bind(this)).always(function() {
                    this.unblock()
                }.bind(this))
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("components/portfolio/scripts/views/donutView", ["jquery", "underscore", "components/common/scripts/views/baseViews", "components/portfolio/scripts/services/portfolioSetService", "components/common/scripts/constants/colors", "components/common/scripts/util/ie"], function(e, t, n, r, i, s) {
        return n.View.extend({
            template: "components/portfolio/templates/donut",
            events: {
                "mouseover .hole-text .stocks": "donutHoleStocksOver",
                "mouseover .hole-text .bonds": "donutHoleBondsOver",
                "mouseout .hole-text .bonds, .hole-text .stocks": "donutHoleOut"
            },
            templateHelpers: {
                breakdownWidth: function() {
                    return this.self.getSize()
                },
                breakdownHeight: function() {
                    return this.self.getSize() + 16
                },
                donutWidth: function() {
                    return this.self.getSize() + 2
                },
                donutHeight: function() {
                    return this.self.getSize() + 2
                }
            },
            defaultSize: 225,
            getSize: function() {
                return this.options.size || this.defaultSize
            },
            makePieChart: function(e) {
                var t = this;
                nv.addGraph(function() {
                    var n = t[e.name] = nv.models.pieChart().y(function(e) {
                        return e.allocation
                    }).width(e.size).height(e.size).margin({
                        top: 0,
                        right: 0,
                        bottom: 0,
                        left: 0
                    }).color(e.color).donut(!1).showLabels(!1).showLegend(!1).tooltips(!1);
                    return d3.select(t.el).select(e.selector).datum([{
                        key: "Portfolio",
                        values: e.data
                    }]).attr("width", e.size).attr("height", e.size).transition().duration(0).call(n), e.after && e.after(d3, n), n
                })
            },
            onInitialize: function() {
                this.initDonutData(), this.updateDonutData(this.getAllocation())
            },
            initDonutData: function() {
                throw new Error("Unimplemented, you must instantiate a subclass of this view and implement initDonutData")
            },
            updateDonutData: function(e) {
                throw new Error("Unimplemented, you must instantiate a subclass of this view and implement updateDonutData")
            },
            getAllocation: function() {
                throw new Error("Unimplemented, you must instantiate a subclass of this view and implement getAllocation")
            },
            onRender: function() {
                var n = this,
                    r = this.getSize();
                this.makePieChart({
                    name: "donut",
                    size: r,
                    selector: ".donut",
                    data: t.sortBy(this.donutData.data, function(e) {
                        return e.donutOrder
                    }),
                    color: function(e) {
                        return e.data.primaryColor
                    },
                    after: function(t, s) {
                        t.select(n.el).select(".donut").append("circle").attr("class", "hole").attr("cx", String(r / 2)).attr("cy", String(r / 2)).attr("r", String(r / 3.14159)).style("fill", i.BASE_GRAPH.FILL), t.select(n.el).selectAll(".donut .nv-slice").on("mouseover.foo", function(r, i) {
                            n.expandSlice(t.select(this)), n.showDonutRim(r.data.investmentType), n.donutHoleOut(), r.data.investmentType === "bonds" ? n.donutHoleBondsOver() : n.donutHoleStocksOver();
                            if (!n.breakdown_tip) {
                                var s = "";
                                r.data.totalValue !== 0 && (s = " / " + n.formatter.money(r.data.totalValue)), n.breakdown_tip = n.$(".breakdown").qtip({
                                    content: '<span class="bullet" style="background: ' + r.data.primaryColor + ';"> </span>' + "<div>" + "<h3>" + r.data.displayName + "</h3>" + "<p>" + n.formatter.pct(r.data.allocation, 2) + s + "</p>" + "</div>",
                                    style: {
                                        classes: "donut-tooltip ui-tooltip-rounded",
                                        tip: !1
                                    },
                                    position: {
                                        target: "mouse",
                                        my: "top left",
                                        at: "bottom right"
                                    },
                                    events: {
                                        visible: function(t, n) {
                                            e(this).css({
                                                opacity: .9
                                            })
                                        }
                                    }
                                }).qtip("show")
                            }
                        }).on("mouseout.foo", function(e, r) {
                            n.$(".aggregate").hide(), n.contractSlice(t.select(this)), n.donutHoleOut(), n.breakdown_tip && (n.breakdown_tip.qtip("destroy"), delete n.breakdown_tip)
                        })
                    }
                }), this.makePieChart({
                    name: "agg",
                    size: r * 1.1,
                    selector: ".aggregate",
                    data: this.donutData.aggData,
                    color: function(e, t) {
                        return e.data.investmentType === "bonds" ? i.DONUT_VIEW.BONDS : i.DONUT_VIEW.STOCKS
                    }
                });
                var s = r * .79;
                this.$(".shadow.shadow").css({
                    width: s + "px",
                    height: s + "px",
                    borderRadius: s / 2 + "px",
                    marginTop: s / -2 - 8 + "px",
                    marginLeft: s / -2 + "px"
                }), this.update(this.getAllocation())
            },
            expandSlice: function(e) {
                e.attr("transform", "scale(1.06)")
            },
            contractSlice: function(e) {
                e.attr("transform", "scale(1.0)")
            },
            showDonutRim: function(e) {
                this.$(".aggregate").show(), d3.select(this.el).selectAll(".aggregate .nv-slice").each(function(t, n) {
                    d3.select(this).style("display", t.data.investmentType === e ? null : "none")
                })
            },
            donutHoleStocksOver: function(e) {
                this.$(".hole-text .stocks").children().css({
                    color: i.DONUT_VIEW.STOCKS_TEXT
                }), this.showDonutRim("stocks")
            },
            donutHoleBondsOver: function(e) {
                this.$(".hole-text .bonds").children().css({
                    color: i.DONUT_VIEW.BONDS_TEXT
                }), this.showDonutRim("bonds")
            },
            donutHoleOut: function(e) {
                this.$(".hole-text .bonds, .hole-text .stocks").children().css({
                    color: "inherit"
                }), this.$("aggregate").hide()
            },
            expandSliceWithName: function(e) {
                var t = this;
                this.contractAllSlices(), d3.select(t.el).selectAll(".donut .nv-slice").each(function(n, r) {
                    n.data.assetClass === e && t.expandSlice(d3.select(this))
                })
            },
            contractAllSlices: function() {
                this.contractSlice(d3.select(this.el).selectAll(".donut .nv-slice"))
            },
            update: function(e) {
                if (!r.getPortfolioSetForAccount(this.model)) return;
                if (isNaN(e)) return;
                this.updateDonutData(e), this.donut && this.donut.update(), this.agg && this.agg.update();
                var t = Math.round(100 * e),
                    n = 100 - t;
                this.$(".hole-text .stocks .allocation").text(t), this.$(".hole-text .bonds .allocation").text(n), setTimeout(function() {
                    this.holeTextWidth || (this.holeTextWidth = this.$(".hole-text").outerWidth());
                    var e = this.getSize() / this.holeTextWidth * .5;
                    this.$(".hole-text").css({
                        transform: "translateX(-50%) translateY(-50%) scale(" + e + ")",
                        "-ms-transform": "translateX(-50%) translateY(-50%) scale(" + e + ")",
                        "-moz-transform": "translateX(-50%) translateY(-50%) scale(" + e + ")",
                        "-webkit-transform": "translateX(-50%) translateY(-50%) scale(" + e + ")"
                    })
                }.bind(this), 0)
            }
        })
    }), define("components/portfolio/scripts/services/donutService", ["underscore", "components/common/scripts/models/v1/assetClassMetadata"], function(e, t) {
        var n = {
                BONDS: "bonds",
                STOCKS: "stocks"
            },
            r = function(r) {
                var i = r.map(function(r) {
                        var i = r.getAssetClass(),
                            s = r.getAssetClassEnum(),
                            o = n[i.investmentType] || "bonds",
                            u = t.get();
                        return e.extend({
                            assetClass: s,
                            displayName: i.displayName,
                            investmentType: o,
                            tickers: r.getTickers()
                        }, u.getDecorations(s))
                    }),
                    s = e.map(n, function(e) {
                        return {
                            investmentType: e,
                            allocation: 0
                        }
                    });
                return {
                    data: i,
                    aggData: s
                }
            },
            i = function(t, n) {
                var r = {};
                e.each(n.data, function(e) {
                    if (e.assetClass in t) {
                        var n = t[e.assetClass].allocation;
                        var totalValue = t[e.assetClass].totalValue;
                    } else {
                        var n = 0
                        var totalValue = 0
                    } 
                    e.allocation = n;
                    e.totalValue = totalValue;
                    r[e.investmentType] = (r[e.investmentType] || 0) + n
                }), e.each(n.aggData, function(e) {
                    e.allocation = r[e.investmentType] || 0
                })
            };
        return {
            transformAssetClasses: function(e) {
                return r(e)
            },
            transformPositions: function(e) {
                return r(e)
            },
            updateWithPortfolio: function(t, n, r) {
                var s = e.reduce(t.getAllocations(), function(e, t, r) {
                    return e[r] = {
                        allocation: t,
                        totalValue: n * t
                    }, e
                }, {});
                i(s, r)
            },
            updateWithPositions: function(e, t) {
                var n = e.reduce(function(e, t) {
                    return e[t.getAssetClassEnum()] = {
                        allocation: t.num("allocation"),
                        totalValue: t.num("totalValue")
                    }, e
                }, {});
                i(n, t)
            }
        }
    }), define("components/portfolio/scripts/views/targetPortfolioDonutView", ["components/portfolio/scripts/views/donutView", "components/portfolio/scripts/services/donutService", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n) {
        var r = {
                initDonutData: function() {
                    var e = n.getPortfolioSetForAccount(this.model);
                    this.donutData = t.transformAssetClasses(e.getAssetClasses())
                },
                updateDonutData: function(e) {
                    var r = n.getPortfolioSetForAccount(this.model),
                        i = r.getPortfolio(e),
                        s = this.model.getCurrentBalance();
                    t.updateWithPortfolio(i, s, this.donutData)
                },
                getAllocation: function() {
                    return this.model.num("allocation")
                }
            },
            i = e.extend(r);
        return i
    }), define("views/advice/goalCompleteView", ["jquery", "underscore", "common/betterment.views", "components/portfolio/scripts/views/targetPortfolioDonutView", "components/common/scripts/services/projectorService"], function(e, t, n, r, i) {
        return n.ModalView.extend({
            className: "goal-complete",
            template: "advice/goalComplete",
            fadeIn: !0,
            fadeOut: !0,
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                goal_verb_and_time: function() {
                    return this.is_retiree_with_retirement_goal() ? "Since you are age " + this.user_age() + " and retired," : this.self.model.isRetirementGoalDisplayedAsAge() ? "You want to retire at the age of " + this.self.model.goalAge() + ", so" : this.self.model.isEmergency() ? "You want to have a wealth protection, so" : "You want to invest for " + this.term() + ", so"
                },
                build_wealth_text: function() {
                    return BMT.accountGroup.isPersonal() ? "Based on your age and goal to build wealth, we set up a portfolio of " + this.allocation_breakdown() + " to maximize your money's potential growth and reduce potential losses." : "Based on your goal type, we set up a portfolio of " + this.allocation_breakdown() + " to maximize your money's potential growth and reduce potential losses. You can customize this on the next screen."
                },
                term: function() {
                    var e = this.self.model.goalTerm();
                    return e + " year" + (e === 1 ? "" : "s")
                },
                user_age: function() {
                    return this.self.model.get("accountGroup").get("parentUser").age(!0)
                },
                is_retiree_with_retirement_goal: function() {
                    return this.self.model.get("accountGroup").get("parentUser").isRetired() && this.self.model.isRetirementGoalDisplayedAsAge()
                },
                is_rollover: function() {
                    return this.self.options.isRollover
                },
                show_target_amount: function() {
                    return i.getGoalStatus(this.self.model, {
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    }).name !== "NO_TARGET"
                },
                show_term: function() {
                    return !this.self.model.isBuildWealth()
                },
                allocation_breakdown: function() {
                    return this.pct(this.self.model.num("allocation")) + " stocks / " + this.pct(1 - this.self.model.num("allocation")) + " bonds"
                }
            },
            toolTips: {
                ".plan-to-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            events: {
                "click button.exit": "handleClose",
                "click button.see-advice": "goToAdvice"
            },
            regions: {
                donutRegion: ".portfolio-donut-region"
            },
            onRender: function() {
                this.donutRegion.show(new r({
                    model: this.model
                })), this.model.isBuildWealth() && this.$el.addClass("build-wealth")
            },
            handleClose: function(e) {
                e && e.preventDefault(), BMT.modal.close(this)
            },
            goToAdvice: function(e) {
                BMT.modal.close(this), BMT.router.navigate("advice", {
                    trigger: !0
                })
            }
        })
    }), define("components/account/scripts/services/goalService", ["components/account/scripts/services/retirementService", "components/account/scripts/services/goalTypeService"], function(e, t) {
        function n(e) {
            return Math.floor(((new Date).getTime() - e.getTime()) / Date.MS_PER_YEAR)
        }
        return {
            getDefaultTermForContext: function(n) {
                n.goalType === "RETIREMENT_INCOME" && (n.income = !0);
                if (t.isRetirement(n.goalType) && n.age) {
                    var r = e.getDefaultTargetAgeForContext(n);
                    return r - n.age
                }
                if ((n.goalType === "BUILD_WEALTH" && n.isPersonal && n.age) || (n.goalType === "BUILD_WEALTH_ETHICAL" && n.isPersonal && n.age)){
                    var i = Math.max(65, n.age + 10);
                    return i - n.age
                }
                var s = t.getGoalTypeByName(n.goalType);
                return s && s.term
            },
            convertAgeToTerm: function(e, t) {
                var r = n(t);
                return e - r
            },
            convertTermToAge: function(e, t) {
                var r = n(t);
                return r + e
            },
            isAccountDisplayedAsAge: function(e) {
                return e.get("accountGroup") ? e.isRetirement() && e.get("accountGroup").isPersonal() : e.isRetirement()
            }
        }
    }), define("hbs!views/common/termsOfService", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="tos client-agreement">\n        <div class="title">Your advisor\'s agreement</div>\n\n        <div class="clearfix tos-line">\n            <input class="left" type="checkbox" name="clientAgreement" value="true" data-error-element-selector=".agreement-error-client">\n            <div class="left">\n                By checking this box, you acknowledge that you have read and agree to the terms below.\n            </div>\n        </div>\n        <div class="agreement" data-expand="', (s = n.expandHeight) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.expandHeight, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '">\n            By checking the above box and clicking submit below, you agree to be bound by your advisor\'s <a href="', (s = n.firmClientAgreementUrl) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.firmClientAgreementUrl, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" target="_blank">advisory agreement</a>, and acknowledge receiving and reviewing a copy of your advisor\'s Form ADV Part 2 and initial privacy disclosure also contained therein (should your advisor have included their Form ADV Part 2 and initial privacy disclosure to Betterment).<br/><br/>\n\n            You understand and agree that this is solely an agreement between you and your advisor, and that BetaSmartz and its affiliates are not by any means acquiring any obligation or legal duties by permitting you and your advisor to execute the advisory agreement between you and your advisor. You understand that BetaSmartz has not reviewed the advisory agreement between you and your advisor. You further agree to hold harmless and indemnify BetaSmartz and its affiliates in connection with any content in your advisory agreement with your advisor.<br/><br/>\n\n            You consent to receive these documents in electronic form via this webpage. If you are unable to download and view these PDF documents, or do not consent to electronic delivery, you cannot submit your application using this application form. BetaSmartz will not charge you a fee access this ​one ​webpage, but you could incur expenses from your Internet service provider when you access information online. Your consent applies only to this transaction.<br/><br/>\n\n            By checking the above box and clicking submit below, you agree to be legally bound by your advisor\'s advisory agreement\'s terms and conditions. You understand that checking the above box and clicking submit below is the legal equivalent of signing your advisor\'s advisory agreement by hand.\n        </div>\n        <div class="agreement-error-client agreement-error conversation-text">\n            <span class="bad">You must accept the advisor\'s agreement to continue.</span>\n        </div>\n\n        <hr/>\n    </div>\n', r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="clearfix tos sep-num-employees">\n        <div class="clearfix">\n            <p>How many employees will be in the plan?</p>\n            <label class="left"><input type="radio" name="sepSingleEmployee" value="true" id="sep-1-employee" data-validation-model="account" data-error-element-selector=".agreement-error-sep-employees">1 employee (myself)</label>\n            <label class="left"><input type="radio" name="sepSingleEmployee" value="false" id="sep-2-plus-employees" data-error-element-selector=".agreement-error-sep-employees">2 or more employees</label>\n        </div>\n\n        <div class="agreement-error agreement-error-multiple-employees">\n            <span class="bad">Currently, BetaSmartz only supports SEP IRA plans with 1 participant. For more information about our SEP IRA options, please contact us at ', (s = n.supportPhoneNumber) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.supportPhoneNumber, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '.</span>\n        </div>\n        <div class="agreement-error-sep-employees agreement-error conversation-text">\n            <span class="bad">You must select the number of employees in this plan to continue.</span>\n        </div>\n    </div>\n', r
            }

            function p(e, t) {
                return '\n        <div class="title">BetaSmartz\'s agreements</div>\n    '
            }

            function d(e, t) {
                return '\n        <div class="clearfix tos-line withholding">\n            <input class="left" type="checkbox" name="iraWithholding" value="true" data-validation-model="account" data-error-element-selector=".agreement-error-ira">\n            <div class="left">\n                By checking this box, you elect to not have federal and state withholding taken from your SMSF distributions when you withdraw or convert.\n            </div>\n        </div>\n        <div class="agreement-error-ira agreement-error conversation-text">\n            <span class="bad">You must accept our IRA Withholding terms to continue.</span>\n        </div>\n    '
            }

            function v(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="clearfix tos-line sep">\n            <input class="left" type="checkbox" name="sepAgreement" value="true" data-validation-model="account" data-error-element-selector=".agreement-error-sep">\n            <div class="left">\n                By checking this box, you acknowledge that you are self-employed, eligible to participate in a SEP IRA plan, and have completed <a href="', (s = n.irsSepFormUrl) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.irsSepFormUrl, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" target="_blank">IRS Form 5305-SEP</a>.\n            </div>\n        </div>\n        <div class="agreement-error-sep agreement-error conversation-text">\n            <span class="bad">You must accept our SEP IRA terms to continue.</span>\n        </div>\n    ', r
            }

            function m(e, t) {
                return "\n            IRA Custodial Agreement and disclosure, IRA Hold Harmless agreement,\n        "
            }

            function g(e, t) {
                return "\n            the Certification of Trust (if applicable),\n        "
            }

            function y(e, t) {
                return "\n            Sunwest Trust, Inc. serves as custodian of BetaSmartz IRAs.\n        "
            }

            function b(e, t) {
                return "\n            These documents pertain only to your relationship with BetaSmartz LLC and BetaSmartz Securities.\n        "
            }

            function w(e, t) {
                return '\n            If you selected to convert your personal account to a joint account, by selecting "Add an owner to my personal account", you represent that you understand and agree that you are transferring your assets out of a personal account and into a joint account, and that your joint account holder will have access to those assets pursuant to the aforementioned agreements. You represent that you understand the nature and consequences of this action and that you do so voluntarily and willingly. You agree to indemnify and hold BetaSmartz and its affiliates harmless from and against any and all losses, liabilities, costs, judgments, arbitration awards, settlements, taxes, penalties, actions, damages, charges, expenses, or fees (including attorneys\' fees and costs of collection) of any nature whatsoever, and claims therefore arising out of or relating to your decision to convert your personal account to a joint account.\n        '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            o = n["if"].call(t, t && t.showClientAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n", o = n["if"].call(t, t && t.showSepAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(3, h, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n\n<div class="tos betterment-agreement">\n    ', o = n["if"].call(t, t && t.showClientAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(5, p, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n    ", o = n["if"].call(t, t && t.showIraAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(7, d, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n    ", o = n["if"].call(t, t && t.showSepAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(9, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n    <div class="clearfix tos-line">\n        <input class="left" type="checkbox" name="', (u = n.agreementFieldName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.agreementFieldName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" value="true" data-validation-model="account" data-error-element-selector=".agreement-error-user">\n        <div class="left">\n            By checking this box, you acknowledge that you have read and agree to the terms below.\n        </div>\n    </div>\n    <div class="agreement" data-expand="', (u = n.expandHeight) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.expandHeight, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n        BetaSmartz\'s privacy policy' + " and BetaSmartz Institutional customer agreements, which include the Brokerage Agreement, Advisory Agreement,\n\n        ", o = n["if"].call(t, t && t.showIraAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(11, m, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        Arbitration Agreements therein, consent to electronic delivery of documents and written communications,\n\n        ", o = n["if"].call(t, t && t.showTrustAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(13, g, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        and other important agreements. (These agreements are also available on the terms and conditions page of this website.)\n\n        ", o = n["if"].call(t, t && t.showIraAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(15, y, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showInstitutionalAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(17, b, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        <em>Your brokerage agreement contains a predispute arbitration clause highlighted in paragraph 35 on page ", (u = n.arbitrationClausePage) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.arbitrationClausePage, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ".</em>\n\n        ", o = n["if"].call(t, t && t.showJointAccountAgreement, {
                hash: {},
                inverse: l.noop,
                fn: l.program(19, w, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    </div>\n    <div class="agreement-error-user agreement-error conversation-text">\n        <span class="bad">You must accept the terms and conditions to continue.</span>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/common/termsOfService", n), n
    }), define("models/v1/firm", ["models/v1/baseModels"], function(e) {
        var t = {
                idAttribute: "slug",
                endpoint: "/firms"
            },
            n = e.Model.extend(t);
        return n
    }), define("services/firmFetcher", ["underscore", "models/v1/firm"], function(e, t) {
        var n;
        return {
            get: function() {
                return n
            },
            fetchAndSetFirmBySlug: function(r, i) {
                var s = new $.Deferred,
                    o = new t({
                        slug: r
                    });
                return o.fetch(e.extend(i, {
                    success: function() {
                        n = o, s.resolve(o)
                    },
                    error: function() {
                        s.reject()
                    }
                })), s.promise()
            },
            setFirmForAdvisor: function(e) {
                e ? n = new t({
                    id: e.get("firmId"),
                    name: e.get("firmName"),
                    slug: e.get("firmSlug"),
                    knockedOutLogoUrl: e.get("firmKnockedOutLogoUrl"),
                    formAdvPart2Url: e.get("firmFormAdvPart2Url"),
                    clientAgreementUrl: e.get("firmClientAgreementUrl"),
                    clientAgreementToken: e.get("firmClientAgreementToken"),
                    can_use_ethical_portfolio: e.get("can_use_ethical_portfolio")
                }) : n = null
            }
        }
    }), define("views/common/termsOfServiceView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/termsOfService", "components/common/scripts/util/handlebarsHelpers", "services/firmFetcher", "components/account/scripts/constants/accountTypes", "components/common/scripts/analytics/analytics", "components/common/scripts/viewHelpers/customerSupport"], function(e, t, n, r, i, s, o, u, a) {
        var f = 96;
        return n.View.extend({
            template: r,
            ui: {
                agreementErrors: ".agreement-error",
                agreementCheckbox: ".tos-line",
                agreementBox: ".tos .agreement",
                agreementErrorUser: ".agreement-error-user",
                agreementErrorIRA: ".agreement-error-ira",
                agreementErrorSEP: ".agreement-error-sep",
                agreementErrorClient: ".agreement-error-client",
                sepEmployeesError: ".agreement-error-sep-employees",
                sepMultipleEmployeesError: ".agreement-error-multiple-employees",
                checkboxIRAWithholding: 'input[type=checkbox][name="iraWithholding"]',
                checkboxSEPAgreement: 'input[type=checkbox][name="sepAgreement"]',
                checkboxClientAgreement: 'input[type=checkbox][name="clientAgreement"]',
                radioSEPEmployees: 'input[type=radio][name="sepSingleEmployee"]'
            },
            events: {
                "click @ui.agreementCheckbox": "toggleAgreement",
                "click @ui.agreementBox": "expandAgreement",
                "change @ui.radioSEPEmployees": "changeSepEmployees"
            },
            templateHelpers: {
                isAdvisedUser: function() {
                    return this.self.isAdvisedUser()
                },
                expandHeight: function() {
                    return this.self.options.expandHeight || f
                },
                agreementTitle: function() {
                    return this.self.isAdvisedUser() ? "BetaSmartz Institutional customer agreements" : "customer agreements"
                },
                agreementFieldName: function() {
                    return this.self.agreementFieldName()
                },
                showIraAgreement: function() {
                    return this.self.shouldShowIraAgreement()
                },
                showSepAgreement: function() {
                    return this.self.shouldShowSEPAgreement()
                },
                showTrustAgreement: function() {
                    return this.self.shouldShowTrustAgreement()
                },
                showInstitutionalAgreement: function() {
                    return this.self.shouldShowInstitutionalAgreement()
                },
                showClientAgreement: function() {
                    return this.self.shouldShowClientAgreement()
                },
                showJointAccountAgreement: function() {
                    return this.self.shouldShowJointAccountAgreement()
                },
                firmClientAgreementUrl: function() {
                    return this.self.firm().get("clientAgreementUrl")
                },
                arbitrationClausePage: function() {
                    return this.self.isAdvisedUser() ? "80" : "75"
                },
                privacyPolicyUrl: function() {
                    return this.brochure_url("security/privacypolicy")
                },
                agreementUrl: function() {
                    return this.brochure_url(this.isAdvisedUser() ? "advisedcustomeragreement" : "customeragreement")
                },
                firmName: function() {
                    return this.self.isAdvisedUser() && this.self.firm().get("name")
                },
                formAdvPart2Url: function() {
                    return this.self.isAdvisedUser() && this.self.firm().get("formAdvPart2Url")
                },
                jointAccountAgreementInjection: function() {
                    if (this.self.shouldShowJointAccountAgreement()) return i.s(', <a href="' + this.brochure_url("jointaccountagreement") + '" target="_blank">joint account agreement</a>,')
                },
                irsSepFormUrl: function() {
                    return "http://www.irs.gov/pub/irs-pdf/f5305sep.pdf"
                },
                supportPhoneNumber: function() {
                    return a.getSupportNumber()
                }
            },
            firm: function() {
                return s.get()
            },
            isAdvisedUser: function() {
                return !!this.firm()
            },
            agreementFieldName: function() {
                return this.options.isNewUser || !this.shouldShowIraAgreement() ? "userAgreement" : "iraAgreement"
            },
            shouldShowIraAgreement: function() {
                return !!this.options.showIraAgreement
            },
            shouldShowSEPAgreement: function() {
                return !!this.options.showSEPAgreement
            },
            shouldShowClientAgreement: function() {
                return !!(this.options.isNewUser && this.isAdvisedUser() && this.firm().get("clientAgreementUrl"))
            },
            shouldShowTrustAgreement: function() {
                return !!this.options.showTrustAgreement
            },
            shouldShowInstitutionalAgreement: function() {
                return !!this.isAdvisedUser()
            },
            shouldShowJointAccountAgreement: function() {
                return !!this.options.showJointAccountAgreement
            },
            showUserAgreementError: function() {
                this.checkboxUserAgreement().prop("checked", !1), this.options.hideErrors || this.ui.agreementErrorUser.slideDown()
            },
            showIRAAgreementError: function() {
                this.ui.checkboxIRAWithholding.prop("checked", !1), this.options.hideErrors || this.ui.agreementErrorIRA.slideDown()
            },
            showSEPAgreementError: function() {
                this.ui.checkboxSEPAgreement.prop("checked", !1), this.options.hideErrors || this.ui.agreementErrorSEP.slideDown()
            },
            showSEPEmployeeError: function() {
                this.options.hideErrors || this.ui.sepEmployeesError.slideDown()
            },
            showClientAgreementError: function() {
                this.ui.checkboxClientAgreement.prop("checked", !1), this.options.hideErrors || this.ui.agreementErrorClient.slideDown()
            },
            showBettermentAgreement: function() {
                this.$(".betterment-agreement").slideDown()
            },
            hideUserAgreementError: function() {
                this.checkboxUserAgreement().prop("checked", !0), this.ui.agreementErrorUser.slideUp()
            },
            hideIRAAgreementError: function() {
                this.ui.checkboxIRAWithholding.prop("checked", !0), this.ui.agreementErrorIRA.slideUp()
            },
            hideSEPAgreementError: function() {
                this.ui.checkboxSEPAgreement.prop("checked", !0), this.ui.agreementErrorSEP.slideUp()
            },
            hideClientAgreementError: function() {
                this.ui.checkboxClientAgreement.prop("checked", !0), this.ui.agreementErrorClient.slideUp()
            },
            hideSEPEmployeeError: function() {
                this.ui.sepEmployeesError.slideUp()
            },
            hideBettermentAgreement: function() {
                this.$(".betterment-agreement").slideUp(), this.$("[type=checkbox]").prop("checked", !1)
            },
            checkboxUserAgreement: function() {
                return this.$('input[type=checkbox][name="' + this.agreementFieldName() + '"]')
            },
            hasUserAcceptedUserAgreement: function() {
                return this.checkboxUserAgreement().is(":checked")
            },
            hasUserAcceptedIRAAgreement: function() {
                return this.ui.checkboxIRAWithholding.is(":checked")
            },
            hasUserAcceptedSEPAgreement: function() {
                return this.ui.checkboxSEPAgreement.is(":checked")
            },
            hasUserAcceptedClientAgreement: function() {
                return this.ui.checkboxClientAgreement.is(":checked")
            },
            hasUserEnteredSEPEmployees: function() {
                return this.ui.radioSEPEmployees.is(":checked")
            },
            getSEPEmployeesVal: function() {
                return this.hasUserEnteredSEPEmployees() ? this.ui.radioSEPEmployees.filter(":checked").val() : !1
            },
            hasUserAcceptedAgreements: function() {
                return this.hasUserAcceptedUserAgreement() && (!this.shouldShowIraAgreement() || this.hasUserAcceptedIRAAgreement()) && (!this.shouldShowSEPAgreement() || this.hasUserAcceptedSEPAgreement() && this.hasUserEnteredSEPEmployees()) && (!this.shouldShowClientAgreement() || this.hasUserAcceptedClientAgreement())
            },
            checkUserAgreement: function() {
                this.hasUserAcceptedUserAgreement() ? this.hideUserAgreementError() : this.showUserAgreementError()
            },
            checkIRAAgreement: function() {
                this.shouldShowIraAgreement() && !this.hasUserAcceptedIRAAgreement() ? this.showIRAAgreementError() : this.hideIRAAgreementError()
            },
            checkSEPAgreement: function() {
                this.shouldShowSEPAgreement() && !this.hasUserAcceptedSEPAgreement() ? this.showSEPAgreementError() : this.hideSEPAgreementError()
            },
            checkClientAgreement: function() {
                this.shouldShowClientAgreement() && !this.hasUserAcceptedClientAgreement() ? this.showClientAgreementError() : this.hideClientAgreementError()
            },
            checkSEPEmployees: function() {
                this.shouldShowSEPAgreement() && !this.hasUserEnteredSEPEmployees() ? this.showSEPEmployeeError() : this.hideSEPEmployeeError()
            },
            checkAgreements: function() {
                this.checkUserAgreement(), this.checkIRAAgreement(), this.checkSEPAgreement(), this.checkSEPEmployees(), this.checkClientAgreement()
            },
            toggleAgreement: function(t) {
                if (e(t.target).is("input")) return;
                t.stopImmediatePropagation();
                var n = e(t.currentTarget).find("input[type=checkbox]");
                !n.prop("checked") && n.data("error-element-selector") && this.ui.agreementErrors.filter(n.data("error-element-selector")).slideUp(), n.prop("checked", !n.prop("checked")), n.trigger("change")
            },
            getAgreementValues: function() {
                var e = {};
                return e[this.agreementFieldName()] = this.hasUserAcceptedUserAgreement() ? "true" : "false", this.shouldShowIraAgreement() && (e.iraWithholding = this.hasUserAcceptedIRAAgreement() ? "true" : "false"), this.shouldShowSEPAgreement() && (e.sepAgreement = this.hasUserAcceptedSEPAgreement() ? "true" : "false", e.sepSingleEmployee = this.getSEPEmployeesVal()), this.shouldShowClientAgreement() && (e.clientAgreement = this.hasUserAcceptedClientAgreement() ? "true" : "false"), e
            },
            expandAgreement: function(e) {
                if (this.options.disableExpansion) return;
                e.stopImmediatePropagation();
                var t = this.$(e.currentTarget);
                t.animate({
                    height: t.data("expand") || f
                })
            },
            setAccountType: function(e) {
                this.options.showSEPAgreement = e === o.SEP_IRA, this.render()
            },
            changeSepEmployees: function(e) {
                this.hideSEPEmployeeError(), u.track("ElementClicked", {
                    Name: "NumberOfSEPParticipants",
                    Value: this.getSEPEmployeesVal() === "false" ? ">=2" : "1",
                    Type: "Radio"
                }), this.getSEPEmployeesVal() === "false" ? (this.ui.sepMultipleEmployeesError.slideDown(), this.hideBettermentAgreement()) : (this.ui.sepMultipleEmployeesError.slideUp(), this.showBettermentAgreement())
            }
        })
    }),  define("models/potentialBonus", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        return r.RelationalModel.extend({
            isReferral: function() {
                return this.is("isReferral")
            }
        })
    }), define("models/trust", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
            url: "/trust",
            needsDocuments: function() {
                return this.get("status") === "APPROVED" || this.get("status") === "PENDING" ? !1 : !0
            }
        });
        return i
    }), define("models/v1/baseCollection", ["models/modelMixins", "components/common/scripts/models/v1/baseCollection"], function(e, t) {
        var n = {
            initialize: function(n, r) {
                e.handleErrors.apply(this), t.prototype.initialize.apply(this, arguments)
            }
        };
        return t.extend(n)
    }), define("models/v1/jointAccountPendingInviteCollection", ["backbone", "models/v1/baseCollection"], function(e, t) {
        var n = {
            endpoint: function() {
                return "/account-groups/" + this.accountGroup.id + "/pending-invites"
            }
        };
        return t.extend(n)
    }), define("models/accountGroup", ["jquery", "underscore", "backbone", "common/betterment.models", "models/accountReturn", "models/bankAccount", "models/account", "models/automaticWithdrawal", "models/withheldBonus", "models/potentialBonus", "models/trust", "components/common/scripts/models/appData", "models/v1/jointAccountPendingInviteCollection"], function(e, t, n, r, i, s, o, u, a, f, l, c, h) {
        var p = {
                getFeePct: function(e) {
                    var t = [{
                        limit: 0,
                        pct: .35
                    }, {
                        limit: 1e4,
                        pct: .25
                    }, {
                        limit: 1e5,
                        pct: .15
                    }];
                    for (var n = t.length - 1; n >= 0; n--)
                        if (e >= t[n].limit) return t[n].pct
                }
            },
            d = r.RelationalModel.extend({
                url: "/api/v1/account-groups",
                getEndpoint: function() {
                    return "/account-groups/" + this.id
                },
                relations: [{
                    type: n.HasOne,
                    key: "bankAccount",
                    relatedModel: s,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "accountGroup",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasMany,
                    key: "accounts",
                    relatedModel: o.Model,
                    collectionType: o.Collection,
                    reverseRelation: {
                        key: "accountGroup",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "withheldBonus",
                    relatedModel: a,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "parentUser",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "potentialBonus",
                    relatedModel: f,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "parentUser",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "accountReturn",
                    relatedModel: i
                }, {
                    type: n.HasOne,
                    key: "trust",
                    relatedModel: l
                }],
                onInitialize: function() {
                    var e = {};
                    this.get("bankAccount") || (e.bankAccount = new s), this.get("accounts") || (e.accounts = new o.Collection), this.set(e)
                },
                parse: function(e, n) {
                    return e && t.each(e.contributions, function(t, n) {
                        e.contributions[n] = parseFloat(t)
                    }), e
                },
                hasIRAGoal: function() {
                    return this.get("accounts").hasIRA()
                },
                defaultFeeRate: function() {
                    return this.isAdvised() ? this.num("feeAmount") * 100 : p.getFeePct(this.getTotalBalance())
                },
                getAccountReturn: function() {
                    var e = this.get("accountReturn");
                    return e.set("account", new o.Model({
                        createdDate: this.get("investingSince"),
                        currentBalance: this.getTotalBalance(),
                        pendingDeposits: this.getTotalPendingDeposits()
                    })), e
                },
                getTotalBalance: function() {
                    return this.get("accounts").totalCurrentBalance()
                },
                getTotalPendingDeposits: function() {
                    return this.get("accounts").sum("pendingDeposits")
                },
                getTotalBalanceWithPending: function() {
                    var e = !0;
                    return this.get("accounts").totalCurrentBalance(e)
                },
                getTotalInvestedWithPending: function() {
                    return this.get("accounts").sum("totalInvested") + this.getTotalPendingDeposits()
                },
                hasCompleteAccount: function() {
                    return this.get("accounts").any(function(e) {
                        return e.isComplete()
                    })
                },
                hasNonCoveredTaxableLots: function() {
                    return this.is("hasNonCoveredTaxableLots")
                },
                hasNonCoveredIRALots: function() {
                    return this.is("hasNonCoveredIRALots")
                },
                isAdvised: function() {
                    return this.has("advisorId")
                },
                isClosed: function() {
                    return this.get("accountGroupState") === c.getInstance().get("closedAccountGroupState")
                },
                isLockd: function() {
                    return this.get("accountGroupState") === "LOCKED"
                },
                isSuspended: function() {
                    return this.get("accountGroupState") === "SUSPENDED"
                },
                isPendingApproval: function() {
                    return this.get("accountGroupState") === "PENDING_APPROVAL"
                },
                isEligibleForAutoWithdrawals: function() {
                    return this.meetsAutoWithdrawalEligibilityThreshold() || u.totalEnabledForAccountGroup(this) > 0
                },
                isLastAutoWithdrawalBeforeLosingFeature: function() {
                    return !this.meetsAutoWithdrawalEligibilityThreshold() && u.totalEnabledForAccountGroup(this) === 1
                },
                meetsNegativeReturnsPercentageThreshold: function(e) {
                    return this.get("accountReturn").get("lifetimePersonalReturn") <= e
                },
                meetsNegativeReturnsAgeThreshold: function(e) {
                    return this.date("investingSince").isAfter(e)
                },
                meetsAutoWithdrawalEligibilityThreshold: function() {
                    var e = 0,
                        t = 1e5;
                    return this.hasCompleteAccount() && (e = this.getTotalInvestedWithPending()), e >= t
                },
                allowsIRAs: function() {
                    return false
                },
                isTrust: function() {
                    return this.get("type") === "TRUST"
                },
                isJointAccount: function() {
                    return this.get("type") === "JOINT"
                },
                isPersonal: function() {
                    return this.get("type") === "PERSONAL"
                },
                isPendingTrust: function() {
                    return this.isTrust() && this.isPendingApproval()
                },
                getPendingJointAccountInvitations: function() {
                    var t = e.Deferred();
                    if (this.has("jointAccountPendingInviteCollection")) t.resolve(this.get("jointAccountPendingInviteCollection"));
                    else {
                        var n = new h;
                        n.accountGroup = this, this.set("jointAccountPendingInviteCollection", n), n.fetch().then(function() {
                            t.resolve(n)
                        })
                    }
                    return t
                }
            }, {
                buildGhost: function(e) {
                    return e = e || new d, e.set({
                        type: "PERSONAL",
                        contributions: []
                    }), e
                }
            });
        p.Model = d;
        var v = r.Collection.extend({
            model: d,
            url: "/api/v1/account-groups",
            comparator: function(e) {
                var t = e.isPersonal() ? "a" : "z";
                return t + e.get("name")
            }
        });
        return p.Collection = v, p
    }), define("models/referralProgram", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        return r.RelationalModel.extend({
            isMoney: function() {
                return this.get("prizeType") === "money"
            }
        })
    }), define("models/rothLimit", ["underscore", "common/betterment.models", "components/common/scripts/models/appData"], function(e, t, n) {
        return t.RelationalModel.extend({
            url: "/rothLimit",
            contributionLimit: function(e, t) {
                var r = n.getInstance().get("contributionTypes")[e],
                    i, s = t.contributionLimit(e),
                    o = this.num("adjustedGrossIncome"),
                    u = this.get("maritalStatus");
                if (o < s) i = o;
                else {
                    var a = r.rothLimitPhaseouts[u],
                        f = a[1] - a[0];
                    if (o < a[0]) i = s;
                    else if (o > a[1]) i = 0;
                    else {
                        var l = o - a[0],
                            c = 1 - l / f;
                        i = s * c;
                        if (s < 200) i = 200;
                        else {
                            var h = Math.floor(i / 10) * 10;
                            i - h > 0 && (i = (Math.floor(i / 10) + 1) * 10)
                        }
                    }
                }
                return i
            },
            validation: {
                adjustedGrossIncome: {
                    required: !0,
                    pattern: "number"
                }
            }
        })
    }), define("models/v2/retireGuideEnablement", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
                isSingularResource: !0,
                endpoint: "/retire_guide_enablement"
            },
            n = {};
        return e.RelationalModel.extend(t, n)
    }), define("models/v2/pricingSummary", ["underscore", "backbone", "components/common/scripts/models/v2/baseModels"], function(e, t, n) {
        var r = {
            isClassic: function() {
                return this.isPricingPlan() && this.get("pricingPlan") === "classic"
            },
            isEmployer: function() {
                return this.get("strategy") === "preferred_employer"
            },
            isStandardPlan: function() {
                return this.isPricingPlan() && !this.isClassic()
            },
            isPricingPlan: function() {
                return this.get("strategy") === "pricing_plan"
            },
            displayName: function() {
                if (this.isPricingPlan()) switch (this.get("pricingPlan")) {
                    case "builder_paying_monthly":
                    case "builder":
                        return "Builder";
                    case "better":
                        return "Better";
                    case "best":
                        return "Best";
                    case "classic":
                        return "BetaSmartz Classic"
                } else if (this.isEmployer()) return "Preferred Employer Plan";
                return "Other"
            },
            isBuilder: function() {
                return this.isPricingPlan() && e.contains(["builder_paying_monthly", "builder"], this.get("pricingPlan"))
            }
        };
        return n.RelationalModel.extend(r)
    }), define("models/v2/financialProfile", ["backbone", "underscore", "projector", "components/common/scripts/models/v2/baseModels", "components/account/scripts/constants/retirementConstants"], function(e, t, n, r, i) {
        var s = {
            isSingularResource: !0,
            endpoint: "/financial_profile",
            defaults: {
                maritalStatus: "single",
                annualSalaryPercentGrowth: n.DEFAULTS.salaryGrowth,
                expectedInflation: n.C.inflation,
                socialSecurityPercentExpected: n.DEFAULTS.percentSocialSecurity * 100
            },
            onInitialize: function() {
                this.on("change:user", function() {
                    this.has("retired") || this.set("retired", this.get("user").get("employmentStatus") === "RETIRED"), this.has("pretaxIncomeCents") || this.dollars("pretaxIncome", this.get("user").num("annualIncome"))
                })
            },
            setDefaultsForMaritalStatus: function() {
                if (this.isMarried()) {
                    var e = {
                        spouseRetired: this.is("retired"),
                        spousePretaxIncomeCents: 0
                    };
                    t.each(e, function(e, t) {
                        this.has(t) || this.set(t, e)
                    }.bind(this))
                } else this.set({
                    spouseLifeExpectancy: null,
                    spouseRetired: null,
                    spousePretaxIncomeCents: null
                });
                return this
            },
            setComplete: function() {
                var e = this.get("user").get("financialPlans").selected();
                this.has("lifeExpectancy") || this.set("lifeExpectancy", Math.max(i.DEFAULT_LIFE_EXPECTANCY, Math.max((e.num("retirementAge") || i.DEFAULT_RETIREMENT_AGE) + 1, this.getAge() + 2))), this.isMarried() && !this.has("spouseLifeExpectancy") ? this.set("spouseLifeExpectancy", Math.max(i.DEFAULT_LIFE_EXPECTANCY, Math.max((e.num("spouseRetirementAge") || i.DEFAULT_RETIREMENT_AGE) + 1, this.getSpouseAge() + 2))) : this.isMarried() || this.set("spouseLifeExpectancy", null), this.set("complete", !0)
            },
            isMarried: function() {
                return this.get("maritalStatus") && this.get("maritalStatus").indexOf("married") !== -1
            },
            grossIncome: function() {
                return (this.dollars("pretaxIncome") || 0) + (this.dollars("spousePretaxIncome") || 0)
            },
            getAge: function() {
                return this.get("user").getAge()
            },
            setSpouseAge: function(e) {
                var t = (new Date).clearTime().addYears(-1 * e);
                this.date("spouseEstimatedBirthdate", t)
            },
            getSpouseAge: function() {
                return this.get("spouseEstimatedBirthdate") ? Date.yearsSince(this.date("spouseEstimatedBirthdate")) : null
            },
            unsetSpouseAge: function() {
                this.set("spouseEstimatedBirthdate", null)
            }
        };
        return s.validation = {
            lifeExpectancy: function(t, n, r) {
                return !r.complete && !t ? !1 : e.Validation.validators.range(t, n, [i.MINIMUM_AGE, i.MAXIMUM_LIFE_EXPECTANCY], this)
            },
            spouseLifeExpectancy: function(t, n, r) {
                return (!r.complete || !this.isMarried()) && !t ? !1 : e.Validation.validators.range(t, n, [i.MINIMUM_AGE, i.MAXIMUM_LIFE_EXPECTANCY], this)
            },
            spouseEstimatedBirthdate: function(e, t, n) {
                if (!this.isMarried() || !n.complete) return !1;
                var r = Date.yearsSince(new Date(e));
                if (r < i.MINIMUM_AGE) return "Spouse age must be " + i.MINIMUM_AGE + " years or older.";
                if (r > i.MAXIMUM_LIFE_EXPECTANCY) return "Spouse age must be " + i.MAXIMUM_LIFE_EXPECTANCY + " years or younger."
            },
            expectedInflation: {
                required: !0,
                min: 0,
                max: 6
            },
            annualSalaryPercentGrowth: {
                required: !0,
                min: 0,
                max: 6
            }
        }, r.RelationalModel.extend(s)
    }), define("models/v2/financialPlanCollection", ["components/common/scripts/models/v2/baseCollection", "models/v2/financialPlan"], function(e, t) {
        var n = {
            endpoint: "/financial_plans",
            model: t,
            selected: function() {
                return this.isEmpty() ? this.add(new t) : this.at(0)
            }
        };
        return e.extend(n)
    }), define("components/common/scripts/constants/addressConstants", [], function() {
        return {
            unitedStates: function() {
                return ["ACT", "QLD", "NSW", "NT",  "SA", "TAS", "VIC", "WA"]
            }
        }
    }), define("models/user", ["jquery", "underscore", "backbone", "common/betterment.models", "components/account/scripts/constants/retirementConstants", "components/account/scripts/constants/accountTypes", "models/accountGroup", "models/referralProgram", "models/rothLimit", "models/v2/retireGuideEnablement", "models/v2/pricingSummary", "models/v2/financialProfile", "models/v2/financialPlan", "models/v2/financialPlanCollection", "models/v2/externalAccount", "models/v2/externalAccountCollection", "components/common/scripts/models/appData", "components/common/scripts/services/dateService", "components/common/scripts/constants/addressConstants"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y) {
        var b = {
                required: !0,
                minLength: 8
            },
            w = /\*{3}-\*{2}-\d{4}/,
            E = r.RelationalModel.extend({
                methodUrls: {
                    read: "/client/api/user",
                    create: "/client/api/user",
                    update: "/client/api/user",
                    patch: "/client/api/user",
                    "delete": "/client/api/user"
                },
                sync: function(e, i, s) {
                    var o = this.methodUrls[e];
                    return t.isFunction(o) ? s.url = o.apply(this) : s.url = o, t.contains(["create", "patch", "update", "delete"], e) ? r.RelationalModel.prototype.sync.call(this, e, i, s) : n.RelationalModel.prototype.sync.call(this, e, i, s)
                },
                relations: [{
                    type: n.HasOne,
                    key: "referralProgram",
                    relatedModel: u,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "parentUser",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasMany,
                    key: "accountGroups",
                    relatedModel: o.Model,
                    collectionType: o.Collection,
                    reverseRelation: {
                        key: "parentUser",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "rothLimit",
                    relatedModel: a,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "parentUser",
                        includeInJSON: !1
                    }
                }, {
                    type: n.HasOne,
                    key: "pricingSummary",
                    relatedModel: l,
                    parse: !0
                }, {
                    parse: !0,
                    type: n.HasOne,
                    key: "financialProfile",
                    includeInJSON: !1,
                    relatedModel: c,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "user",
                        includeInJSON: !1
                    }
                }, {
                    parse: !0,
                    type: n.HasMany,
                    key: "financialPlans",
                    includeInJSON: !1,
                    relatedModel: h,
                    collectionType: p,
                    reverseRelation: {
                        type: n.HasOne,
                        key: "user",
                        includeInJSON: !1
                    }
                }, {
                    parse: !0,
                    type: n.HasMany,
                    key: "externalAccounts",
                    includeInJSON: !1,
                    relatedModel: d,
                    collectionType: v
                }],
                getDefaultAccountGroup: function() {
                    var defaultAccountGroupId =  this.get("defaultAccountGroupId") ? this.get("accountGroups").get(this.get("defaultAccountGroupId")) : this.get("accountGroups").first();
                    return defaultAccountGroupId;
                },
                getPersonalAccountGroup: function() {
                    return this.get("accountGroups").findWhere({
                        type: "PERSONAL"
                    })
                },
                bankAccount: function() {
                    return BMT.accountGroup.get("bankAccount")
                },
                isLoggedIn: function() {
                    return !this.isNew()
                },
                getAge: function() {
                    return Date.yearsSince(this.date("dateOfBirth"))
                },
                getFinancialProfile: function() {
                    return this.has("financialProfile") || this.set("financialProfile", new c), this.get("financialProfile")
                },
                onInitialize: function() {
                    t.extend(this, new n.Memento(this)), this.get("accountGroups").length < 1 && this.get("accountGroups").add(o.Model.buildGhost())
                },
                beforeSave: function(e) {
                    var t = e.ssn || this.is("ssn"),
                        n = t && w.test(t),
                        r = e.ssnLastFour || this.is("ssnLastFour");
                    n && (this.unset("ssn"), delete e.ssn), r && (this.unset("ssnLastFour"), delete e.ssnLastFour)
                },
                toJSON: function() {
                    var e = t.clone(this.attributes);
                    return delete e.securityQuestions, e
                },
                age: function(e) {
                    return this.ageAtDate(new Date, e)
                },
                ageAtDate: function(e, t) {
                    var n = (e.getTime() - this.dateOfBirth().getTime()) / Date.MS_PER_YEAR;
                    return t ? Math.floor(n) : n
                },
                dateOfBirth: function() {
                    return this.date("dateOfBirth")
                },
                isGhost: function() {
                    return this.get("type") === m.getInstance().get("userStates")[0]
                },
                isFull: function() {
                    return this.get("type") === m.getInstance().get("userStates")[2]
                },
                isSuspended: function() {
                    return this.get("userState") === "SUSPENDED"
                },
                randomSecurityQuestion: function(e) {
                    var t = Math.floor(Math.random() * this.get("securityQuestions").length),
                        n = {
                            securityQuestionNumber: t,
                            securityQuestion: this.get("securityQuestions")[t]
                        };
                    return e ? new r.Model(n) : n
                },
                getVisitorKey: function() {
                    return e.cookie(m.getInstance().get("visitorCookieKey"))
                },
                isRetired: function() {
                    return this.get("employmentStatus") === "RETIRED"
                },
                isAdvised: function() {
                    return this.has("advisorId")
                },
                fullName: function() {
                    var e = this.get("firstName"),
                        t = this.get("middleName");
                    return t && (e += " " + t), e += " " + this.get("lastName"), e
                },
                enableRetireGuide: function() {
                    var e = this;
                    return (new f).save({}, {
                        success: function() {
                            e.set("retireGuideEnabled", !0)
                        }
                    })
                },
                disableRetireGuide: function() {
                    var e = this;
                    return (new f).destroy({
                        success: function() {
                            e.set("retireGuideEnabled", !1)
                        }
                    })
                },
                labels: {
                    userName: "Email address",
                    zip: "Zip code"
                },
                validation: {
                    userName: {
                        required: !0,
                        pattern: "email"
                    },
                    firstName: [{
                        required: !0
                    }, {
                        pattern: "alphaPlus",
                        msg: "First name can only contain letters and hyphens"
                    }],
                    middleName: {
                        required: !1,
                        pattern: "alpha",
                        length: 1
                    },
                    lastName: [{
                        required: !0
                    }, {
                        pattern: "alphaPlus",
                        msg: "Last name can only contain letters and hyphens"
                    }],
                    address1: function(e, t, r) {
                        return e ? n.Validation.patterns.ascii.exec(e) ? !1 : "Invalid characters" : "Address is required"
                    },
                    address2: function(e, t, r) {
                        return e && !n.Validation.patterns.ascii.exec(e) ? "Invalid characters" : !1
                    },
                    city: function(e, t, r) {
                        return e ? n.Validation.patterns.ascii.exec(e) ? !1 : "Invalid characters" : "City is required"
                    },
                    state: {
                        required: !0,
                        length: 2
                    },
                    zip: {
                        required: !0,
                        pattern: "digits",
                        length: 5
                    },
                    phoneNumber: {
                        required: !0,
                        pattern: /[0-9]{3}-[0-9]{3}-[0-9]{4}/,
                        msg: "Phone number is required"
                    },
                    gender: {
                        required: !0,
                        oneOf: ["M", "m", "F", "f"]
                    },
                    employmentStatus: {
                        required: !0
                    },
                    occupation: {
                        required: function(e, t, n) {
                            var r = n.employmentStatus;
                            return r === "FULL_TIME" || r === "PART_TIME"
                        }
                    },
                    employer: {
                        required: function(e, t, n) {
                            var r = n.employmentStatus;
                            return r === "FULL_TIME" || r === "PART_TIME"
                        }
                    },
                    annualIncome: {
                        required: !0
                    },
                    netWorth: {
                        required: !0
                    },
                    password: b,
                    oldPassword: b,
                    newPassword: b,
                    ssn: function(e, t, n) {
                        if (w.test(e)) return !1;
                        if (!e) return "Age Pension number is required.";
                        if (!/\d{3}-\d{2}-\d{4}/.test(e)) return "That doesn't look like a valid Age Pension number."
                    }
                }
            }, {
                buildDateOfBirth: function(e, t, n) {
                    return g.buildDateFromParts(e, t, n)
                },
                states: y.unitedStates(),
                SSN_MASK: w
            });
        return E
    }), define("models/iraConversion", ["underscore", "backbone", "common/betterment.models", "models/user", "models/account"], function(e, t, n, r, i) {
        return n.RelationalModel.extend({
            url: "/iraConversion",
            relations: [{
                type: t.HasOne,
                key: "parentUser",
                relatedModel: r,
                includeInJSON: !1
            }, {
                type: t.HasOne,
                key: "sourceAccount",
                relatedModel: i.Model,
                keyDestination: "sourceAccountId",
                includeInJSON: "id"
            }, {
                type: t.HasOne,
                key: "destinationAccount",
                relatedModel: i.Model,
                keyDestination: "destinationAccountId",
                includeInJSON: "id"
            }],
            validation: {
                iraAgreement: {
                    required: function(e, t, n) {
                        return this.needsRoth()
                    },
                    acceptance: !0
                },
                iraWithholding: {
                    required: function(e, t, n) {
                        return this.needsRoth()
                    },
                    acceptance: !0
                },
                amount: function(e, t, n, r) {
                    var i = parseFloat(e),
                        s = this.availableAmount();
                    if (!isNaN(i)) {
                        var o = 10;
                        return s < o && s !== 0 && (o = .01), i < o ? "Amount is too small" : i > s ? "Amount is too large" : !1
                    }
                    return "Amount is required"
                },
                michigan: function(e, t, n, r) {
                    return n.parentUser.get("state") === "MI" ? e ? !1 : "Must agree and submit form MI W4-P" : !1
                }
            },
            labels: {
                iraAgreement: "IRA agreement",
                iraWithholding: "IRA Withholding agreement"
            },
            toJSON: function(e) {
                var t = n.RelationalModel.prototype.toJSON.call(this, e);
                return t.destinationAccountId || delete t.destinationAccountId, t
            },
            needsRoth: function() {
                return !BMT.accounts().hasRothIRA()
            },
            remainingRMD: function() {
                return this.get("sourceAccount").num("remainingRMD")
            },
            hasRemainingRMD: function() {
                return this.remainingRMD() > 0
            },
            availableAmount: function() {
                var e = this.get("sourceAccount");
                return e.availableForConversion(this.is("rmd") ? this.remainingRMD() : 0)
            }
        })
    }), define("views/common/iraConversion/createRothIRAView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/common/termsOfServiceView"], function(e, t, n, r, i) {
        return r.ModalView.extend({
            template: "common/iraConversion/createRothIRA",
            className: "ira-conversion create-roth-ira",
            templateHelpers: {
                count: function() {
                    return this.self.options.count()
                }
            },
            regions: {
                termsOfServiceRegion: ".terms-of-service"
            },
            events: {
                "click #next": "onNext",
                "click #cancel": "onCancel"
            },
            onShow: function() {
                this.termsOfServiceRegion.show(new i({
                    showIraAgreement: !0,
                    expandHeight: 128,
                    hideErrors: !0
                })), this.applyValidation()
            },
            onNext: function(e) {
                var t = n.Syphon.serialize(this);
                this.model.validate(t) ? this.triggerAllValidation(t) : (this.model.set(t), BMT.modal.close(this), this.options.nextAlert())
            },
            onCancel: function() {
                BMT.modal.close(this)
            }
        })
    }), define("hbs!views/common/iraConversion/chooseRothIRA", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<h1>IRA Conversion - Choose a SMSF</h1>\n\n<div class="wizard-body">\n    You have more than one eligible SMSF to convert into. Please select which Roth you would like to use.\n</div>\n\n<div class="account-selector-region"></div>\n\n', (u = n.wizardControls) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.wizardControls, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", s
        });
        return t.registerPartial("views/common/iraConversion/chooseRothIRA", n), n
    }), define("hbs!views/common/dropdown/dropdown", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i;
                r += "\n    ", i = n["if"].call(e, e && e.divider, {
                    hash: {},
                    inverse: l.program(7, v, t),
                    fn: l.program(2, h, t)
                });
                if (i || i === 0) r += i;
                return r += "\n", r
            }

            function h(e, t) {
                var r = "",
                    i;
                r += "\n        ", i = n["if"].call(e, e && e.name, {
                    hash: {},
                    inverse: l.program(5, d, t),
                    fn: l.program(3, p, t)
                });
                if (i || i === 0) r += i;
                return r += "\n    ", r
            }

            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <li class="title-divider">', (s = n.name) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.name, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</li>\n        ", r
            }

            function d(e, t) {
                return '\n        <li class="divider"></li>\n        '
            }

            function v(e, t) {
                var r = "",
                    i, s;
                r += '\n        <li>\n            <a href="#" data-value="', (s = n.value) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.value, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" data-event-name="', (s = n.eventName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.eventName, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" data-action-name="', (s = n.action) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.action, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" data-action="', i = n["if"].call(e, e && e.action, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(8, m, t)
                });
                if (i || i === 0) r += i;
                return r += '">', (s = n.name) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.name, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</a>\n        </li>\n    ", r
            }

            function m(e, t) {
                return "true"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">\n    <span class="dropdown-label">', (u = n.selectedItemName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.selectedItemName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span>\n    <span class="caret"></span>\n</button>\n<ul class="item-list dropdown-menu">\n', o = n.each.call(t, (o = t && t.self, o == null || o === !1 ? o : o.items), {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n</ul>\n", s
        });
        return t.registerPartial("views/common/dropdown/dropdown", n), n
    }), define("views/common/dropdown/dropdownView", ["underscore", "common/betterment.views", "hbs!views/common/dropdown/dropdown"], function(e, t, n) {
        var r = t.View.extend({
            className: "btn-group",
            template: n,
            events: {
                "click .item-list li a": "onSelected",
                "touchstart .item-list li a": "onSelected"
            },
            templateHelpers: {
                selectedItemName: function() {
                    return this.self.selectedValue ? e.findWhere(this.self.items, {
                        value: this.self.selectedValue
                    }).name : this.self.defaultPlaceholder
                }
            },
            onInitialize: function() {
                this.defaultPlaceholder = this.options.defaultPlaceholder, this.selectedValue = this.options.selectedValue, this.items = this.options.items
            },
            getValue: function() {
                return this.$el.val()
            },
            onSelected: e.noop
        });
        return r
    }), define("views/common/iraConversion/chooseRothIRAView", ["common/betterment.views", "hbs!views/common/iraConversion/chooseRothIRA", "views/common/dropdown/dropdownView"], function(e, t, n) {
        return e.ModalView.extend({
            template: t,
            className: "ira-conversion choose-roth-ira",
            regions: {
                accountSelectorRegion: ".account-selector-region"
            },
            events: {
                "click #next": "onNext",
                "click #cancel": "onCancel"
            },
            templateHelpers: {
                wizardControls: function() {
                    return this.build_wizard_controls({
                        buttons: [{
                            id: "next",
                            title: "Next"
                        }, {
                            id: "cancel",
                            title: "Cancel",
                            attributes: {
                                "class": "cancel"
                            }
                        }],
                        count: this.self.options.count()
                    })
                }
            },
            onRender: function() {
                this.accountSelector = new n({
                    items: this.accountSelectorOptions(),
                    selectedValue: BMT.accounts().getRothIRAs()[0].id
                }), this.accountSelectorRegion.show(this.accountSelector)
            },
            accountSelectorOptions: function() {
                return BMT.accounts().getRothIRAs().map(function(e) {
                    var t = e.get("name") + " (balance " + this.formatter.money(e.getCurrentBalanceWithPending()) + ")";
                    return {
                        name: t,
                        value: e.id
                    }
                }.bind(this))
            },
            onNext: function() {
                this.model.set("destinationAccount", BMT.accounts().get(this.accountSelector.getValue())), BMT.modal.close(this), this.options.nextAlert()
            },
            onCancel: function() {
                BMT.modal.close(this)
            }
        })
    }), define("views/common/iraConversion/remainingRMDView", ["jquery", "underscore", "common/betterment.views"], function(e, t, n) {
        return n.ModalView.extend({
            template: "common/iraConversion/remainingRMD",
            className: "ira-conversion remaining-rmd",
            templateHelpers: {
                back: function() {
                    return this.self.options.back()
                },
                count: function() {
                    return this.self.options.count()
                },
                remainingRMD: function() {
                    return this.self.model.remainingRMD()
                }
            },
            events: {
                "click .back": "onBack",
                "click #next": "onNext",
                "click #cancel": "onCancel"
            },
            onShow: function(e) {
                this.applyValidation()
            },
            onBack: function(e) {
                BMT.modal.close(this), this.options.prevAlert()
            },
            onNext: function(e) {
                this.model.set("rmd", this.$("input[name=rmd]:checked").val() === "true"), BMT.modal.close(this), this.options.nextAlert()
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("views/common/iraConversion/conversionAmountView", ["jquery", "underscore", "backbone", "common/betterment.views"], function(e, t, n, r) {
        return r.ModalView.extend({
            template: "#common/iraConversion/conversionAmount",
            className: "ira-conversion conversion-amount",
            toolTips: {
                ".amountHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                back: function() {
                    return this.self.options.back()
                },
                count: function() {
                    return this.self.options.count()
                }
            },
            events: {
                "click .back": "onBack",
                "click #next": "onNext",
                "click #cancel": "onCancel",
                "keydown input[name=amount]": "restrictDecimal",
                "keyup input[name=amount]": "uncheckConvertAll",
                "change .convert-all": "toggleConvertAll"
            },
            onShow: function() {
                this.applyValidation()
            },
            uncheckConvertAll: function(e) {
                this.$("input[type=checkbox]").removeAttr("checked")
            },
            toggleConvertAll: function(t) {
                var n = e(t.currentTarget).is(":checked"),
                    r = this.$("input[name=amount]");
                r.val(n ? this.model.availableAmount().toFixed(2) : ""), n && this.updateFieldValidation(r, null)
            },
            onBack: function(e) {
                BMT.modal.close(this), this.options.prevAlert()
            },
            onNext: function(e) {
                var t = n.Syphon.serialize(this);
                delete t[""], this.model.validate(t) ? this.triggerAllValidation(t) : (this.model.set(t), BMT.modal.close(this), this.options.nextAlert())
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("views/common/iraConversion/taxImplicationsView", ["jquery", "underscore", "backbone", "common/betterment.views"], function(e, t, n, r) {
        return r.ModalView.extend({
            template: "common/iraConversion/taxImplications",
            className: "ira-conversion tax-implications",
            templateHelpers: {
                count: function() {
                    return this.self.options.count()
                }
            },
            events: {
                "click .back": "onBack",
                "click #submit": "onSubmit",
                "click #cancel": "onCancel"
            },
            onShow: function() {
                this.applyValidation()
            },
            onBack: function(e) {
                BMT.modal.close(this), this.options.prevAlert()
            },
            onSubmit: function(e) {
                var t = n.Syphon.serialize(this);
                if (!this.model.validate(t)) {
                    this.model.set(t), this.hideAllValidation(), this.block();
                    var r = this;
                    this.model.save({}, {
                        success: function() {
                            BMT.user.fetch({
                                success: function() {
                                    BMT.refreshAccounts()
                                }
                            });
                            var e = r.model.needsRoth() ? "SMSF created and " : "";
                            e += "IRA Conversion initiated.", e += r.model.is("rmd") ? " RMD sent." : "", e += " You will receive a confirmation email shortly.", BMT.flash(e), BMT.modal.close(r)
                        },
                        complete: function() {
                            r.unblock()
                        }
                    })
                } else this.triggerAllValidation(t)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("common/iraConversionChain", ["jquery", "underscore", "models/iraConversion", "models/user", "components/common/scripts/services/domainService", "views/common/iraConversion/createRothIRAView", "views/common/iraConversion/chooseRothIRAView", "views/common/iraConversion/remainingRMDView", "views/common/iraConversion/conversionAmountView", "views/common/iraConversion/taxImplicationsView"], function(e, t, n, r, i, s, o, u, a, f) {
        function p() {
            l++, l < c.length && c[l]()
        }

        function d() {
            l--, l >= 0 && c[l]()
        }

        function v() {
            return l !== 1
        }

        function m() {
            var e = 2 + (h.needsRoth() ? 1 : 0) + (h.hasRemainingRMD() ? 1 : 0);
            return [l, e]
        }

        function g() {
            BMT.alert({
                title: "IRA Conversion",
                bodyAttrs: {
                    style: "width: 100%;"
                },
                body: 'You are about to convert all or part of your SMSF to a SMSF. See our <a target="_blank" href="' + i.getBaseSupportUrl() + '/customer/portal/topics/435583-iras-and-rollovers">Frequently Asked Questions</a> for more information ' + "and to see if converting may be right for you.",
                buttons: [{
                    id: "ok",
                    title: "Start Conversion"
                }, {
                    id: "cancel",
                    title: "Cancel",
                    attributes: {
                        "class": "cancel"
                    }
                }],
                handler: function(e) {
                    e === "ok" && p()
                }
            })
        }

        function y() {
            s.show({
                model: h,
                nextAlert: p,
                count: m
            })
        }

        function b() {
            o.show({
                model: h,
                nextAlert: p,
                count: m
            })
        }

        function w() {
            u.show({
                model: h,
                prevAlert: d,
                nextAlert: p,
                count: m,
                back: v
            })
        }

        function E() {
            a.show({
                model: h,
                prevAlert: d,
                nextAlert: p,
                count: m,
                back: v
            })
        }

        function S() {
            f.show({
                model: h,
                prevAlert: d,
                count: m
            })
        }
        var l, c, h;
        return {
            start: function(e) {
                h = new n({
                    parentUser: BMT.user,
                    sourceAccount: e
                }), c = [g];
                var t = BMT.accounts().getRothIRAs();
                t.length === 0 ? c.push(y) : t.length === 1 ? h.set("destinationAccount", t[0]) : c.push(b), h.hasRemainingRMD() ? c.push(w) : h.set("rmd", !1), c.push(E, S), l = -1, p()
            }
        }
    }), define("views/common/accountSettingsView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/common/accountSettings", "services/accountService", "modules/modals", "views/transfer/automaticTransactionSettingsModalView", "views/transfer/automaticDepositSettingsView", "views/transfer/automaticWithdrawalSettingsView", "views/summary/transferFundsController", "views/summary/deleteAccountController", "views/common/iraRecharacterizationView", "views/common/addGoalView", "views/common/addGoal/addGoalCardDefinitions", "views/common/smartDepositSettingsView", "common/iraConversionChain", "models/visitor", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y) {
        var b = {
            target: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "ChangeGoalTarget",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), this.trigger("editGoalAmount")
            },
            "goal-type": function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "ChangeGoalType",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                });
                var e = this,
                    t = this.model,
                    n = {
                        model: t,
                        isRollover: this.options.isRollover || t.is("rollover"),
                        callback: function() {
                            e.render()
                        }
                    };
                if (t && !t.isNew() && t.isIRA()) {
                    var r = [d.get(t.get("accountType")), d.get(t.get("accountType") + "_INCOME")];
                    n.cards = {
                        "tax-advantage": r
                    }
                }
                p.show(n)
            },
            advice: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "AllocationChange",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), BMT.selectedAccount = this.model, BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate("advice", !0)
            },
            "deposit-withdraw": function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "DepositWithdraw",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), BMT.selectedAccount = this.model, BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate("transfer", !0)
            },
            "auto-deposit": function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "AutoDepositSettings",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                });
                var e = u.openForAccount(a, this.model);
                this.listenTo(e, "destroy", function() {
                    this.reRender()
                }.bind(this))
            },
            "auto-withdrawal": function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "AutoWithdrawalSettings",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                });
                var e = u.openForAccount(f, this.model);
                this.listenTo(e, "destroy", function() {
                    this.reRender()
                }.bind(this))
            },
            "smart-deposit": function() {
                var e = v.withConfig(this.model.get("smartDepositConfig"));
                this.listenTo(e, "close", BMT.refreshAccounts), this.listenTo(s.getAllAccounts(), "sync", this.trigger.bind(this, "renderSummary")), o.show(e)
            },
            "delete": function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "DeleteGoal",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                });
                var e = new c({
                    sourceAccount: this.model
                });
                e.on("cancel proceed", function(t) {
                    e.destroy()
                }), e.on("proceed", function(e) {
                    this.trigger("deleteAccount")
                }.bind(this)), e.go()
            },
            transfer: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "GoalTransfer",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                });
                var e = new l({
                    sourceAccount: this.model
                });
                e.on("cancel proceed", function(t) {
                    e.destroy()
                }), e.go()
            },
            rollover: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "StartRollover",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), BMT.router.navigate("rollover", !0, {
                    prevPage: BMT.currentPage
                })
            },
            convert: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "ConvertIRA",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), m.start(this.model)
            },
            recharacterize: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "RecharacterizeIRA",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Dropdown"
                }), h.show({
                    account: this.model
                })
            }
        };
        return r.View.extend({
            template: i,
            className: "account-settings-dropdown",
            events: {
                "change .goal-settings-selector": "settingsAction"
            },
            templateHelpers: {
                buildGoalSettingsDropdown: function() {
                    var e = this.self.model,
                        r = [];
                    if (!e.isIncome() && !this.self.model.isInPlan()) {
                        var i = e.num("goalAmount") > 0 ? "Change goal target" : "Set goal target";
                        r.push({
                            value: "target",
                            label: i,
                            action: !0
                        })
                    }
                    r.push({
                        value: "goal-type",
                        label: "Change goal type",
                        action: !0
                    }), r.push({
                        value: "advice",
                        label: "Change allocation",
                        action: !0
                    }), r.push({
                        value: "deposit-withdraw",
                        label: "Deposit/withdraw",
                        action: !0
                    });
                    var s = e.get("automaticDeposit"),
                        o = s && s.is("enabled") ? "Auto deposit settings" : "Set up auto deposit";
                    r.push({
                        value: "auto-deposit",
                        label: o,
                        action: !0
                    });
                    if (BMT.accountGroup.isEligibleForAutoWithdrawals() && e.isAllowedAutoWithdrawals()) {
                        var u = e.get("automaticWithdrawal"),
                            a = u && u.is("enabled") ? "Auto withdrawal settings" : "Set up auto withdrawal";
                        r.push({
                            value: "auto-withdrawal",
                            label: a,
                            action: !0
                        })
                    }
                    if (e && g.hasVariation("smart_deposits_setup_enabled") && e.isSmartDepositEligible()) {
                        /*var f = e.get("smartDepositConfig").is("enabled");
                        r.push({
                            value: "smart-deposit",
                            label: f ? "SmartDeposit settings" : "Set up SmartDeposit",
                            action: !0
                        })*/
                    }
                    return BMT.accounts().size() > 1 && !BMT.accountGroup.isSuspended() && r.push({
                        value: "delete",
                        label: "Delete goal",
                        action: !0
                    }), BMT.accounts().numInvestingAccount() > 1 && !e.isIRA() && e.num("currentBalance") > 0 && r.push({
                        value: "transfer",
                        label: "Transfer to another goal",
                        action: !0
                    }), e.isIRA() && r.push({
                        value: "rollover",
                        label: "Roll over money from IRA/401(k)",
                        action: !0
                    }), e && e.isTraditionalIRA() && e.availableForConversion() > 0 && r.push({
                        value: "convert",
                        label: "Convert IRA to Roth",
                        action: !0
                    }), e && e.isRothIRA() && e.get("eligibleConversions").length > 0 && r.push({
                        value: "recharacterize",
                        label: "Undo IRA Conversion",
                        action: !0
                    }), t.isFunction(this.self.options.additionalActions) && this.self.options.additionalActions.call(this.self, r, b), this.build_dropdown_menu(r, {
                        "class": "goal-settings-selector"
                    }, {
                        title: n.s('<span class="settings-inactive"></span><span class="settings-active"></span><span class="settings-open"></span>')
                    })
                }
            },
            reRender: function() {
                this.render(), this.trigger("change")
            },
            settingsAction: function(t) {
                var n = e(t.currentTarget).val();
                b[n].call(this)
            }
        })
    }), define("services/retirementPlanService", ["underscore", "services/accountService", "components/automaticTransaction/scripts/services/automaticTransactionService"], function(e, t, n) {
        function r() {
            return t.getAllAccounts()
        }
        return {
            getTotalAnnualContributions: function(e) {
                return e.getAnnualExternalAccountContributions() + this.getAnnualBettermentContributions(e)
            },
            getAnnualBettermentContributions: function(t) {
                return e.reduce(t.get("accounts"), function(i, s) {
                    var o = t.getAnnualContributionByIdParams(s);
                    if (e.isNull(o)) {
                        var u = r().get(s.bettermentdbAccountId || s.bettermentdb_account_id);
                        o = n.netYearlyTransactionAmount(u)
                    }
                    return i + o
                }, 0)
            },
            getTotalBalance: function(e) {
                return e.getTotalExternalAccountBalance() + this.getTotalBettermentAccountBalance(e)
            },
            getTotalBettermentAccountBalance: function(t) {
                return e.reduce(t.get("accounts"), function(e, t) {
                    return e + r().getByIdParams(t).getCurrentBalance()
                }, 0)
            }
        }
    }), define("views/summary/accountView", ["jquery", "underscore", "common/betterment.views", "views/summary/frontPanelView", "views/summary/backPanelView", "views/summary/transferFundsView", "views/common/accountSettingsView", "models/rolloverFollowup", "models/visitor", "services/retirementPlanService", "components/common/scripts/services/domainService", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        var h = [];
        return n.View.extend({
            template: "summary/account",
            className: "account",
            events: {
                "opened .front-toggle": "flipOpen",
                "closed .back-toggle": "flipClose",
                "mousedown .drag-grip": "startDrag",
                "keyup input[name=name]": "testSaveName",
                "click th.goal-name button.goto-retirement-plan": "goToRetirementPlan"
            },
            regions: {
                frontPanelRegion: ".front-region",
                backPanelRegion: ".back-region",
                frontAccountSettingsRegion: ".front.account-settings-region",
                backAccountSettingsRegion: ".back.account-settings-region"
            },
            onInitialize: function() {
                this.listenTo(this.model, "change", this.refresh)
            },
            flipOpen: function(e, t, n) {
                var r = this;
                t = t || {};
                var i = t.duration === 0 ? 0 : t.duration || (t.slow ? 5e3 : 1e3);
                this.backPanel.resetSpeedometer(), r.$(".panel.back").show(), this.flip(!0, i, function() {
                    r.$(".panel.front").css("visibility", "hidden"), r.$el.css({
                        height: "auto",
                        "min-height": r.getClass().BACK_HEIGHT
                    }), r.backPanel.options.silent = !1, h.push(r.model.getIdOrCid()), r.backPanel.animateSpeedometer(), n && n()
                }), c.track("ElementClicked", {
                    Name: "SummaryExpand",
                    Type: "Goal",
                    Location: "Summary",
                    Platform: "WebApp"
                })
            },
            flipClose: function(e, n) {
                var r = this;
                n = n || {}, this.$el.css("height", this.$(".panel.back").outerHeight() + this.getClass().PANEL_MARGIN), this.$el.css("min-height", this.getClass().FRONT_HEIGHT), this.frontPanel.resetSpeedometer(), this.$(".panel.front").css("visibility", "visible"), this.flip(!1, n.slow ? 5e3 : 1e3, function() {
                    r.backPanel.accountReturn.contractAll(), r.$(".panel.back").hide(), r.$el.css("height", ""), r.frontPanel.options.silent = !1, h = t.without(h, r.model.getIdOrCid()), r.frontPanel.onShow()
                })
            },
            flip: function(e, t, n) {
                var r = this;
                this.flipped = e, t = 1e3, e ? (setTimeout(n, t), r.$el.animate({
                    height: r.getClass().BACK_HEIGHT
                }, t), this.$(".front,.back").addClass("alt")) : (setTimeout(n, t), r.$el.animate({
                    height: r.getClass().FRONT_HEIGHT
                }, t), this.$(".front,.back").removeClass("alt"))
            },
            startDrag: function(e) {
                this.trigger("startDrag", e)
            },
            isOpen: function() {
                return this.$(".panel.back").is(":visible")
            },
            currentHeight: function() {
                return this.isOpen() ? this.getClass().BACK_HEIGHT : this.getClass().FRONT_HEIGHT
            },
            refresh: function() {
                this.editing && (this.currentEditName = this.$nameInput.val());
                var e = this;
                this.showFront(!0), this.flipped ? this.flip(!0, 0, function() {
                    e.showBack(!0)
                }) : this.showBack(!0)
            },
            onRender: function() {
                var e = this.model.getIdOrCid(),
                    n = t.contains(h, e);
                this.$el.data("id", e), this.options.flipOnShow = this.options.flipOnShow || n, this.renderAccountSettings(this.frontAccountSettingsRegion), this.renderAccountSettings(this.backAccountSettingsRegion), this.showFront(), this.showBack(!1, !0)
            },
            renderAccountSettings: function(e) {
                var t = new o({
                    model: this.model,
                    additionalActions: function(e, t) {
                        BMT.user.not("demo") && !this.model.isIRA() && (e.unshift({
                            value: "name",
                            label: "Change goal name",
                            action: !0
                        }), t.name = function() {
                            this.trigger("editGoalName")
                        })
                    }
                });
                e.show(t), this.listenTo(t, "editGoalAmount", function() {
                    this.editGoalAmount()
                }, this), this.listenTo(t, "change", function() {
                    this.backPanel.render()
                }, this), this.listenTo(t, "editGoalName", function() {
                    this.editName()
                }), this.listenTo(t, "renderSummary", function() {
                    this.trigger("renderSummary")
                })
            },
            editGoalAmount: function() {
                if (this.model.num("goalAmount") > 0) {
                    var e = function() {
                        setTimeout(function() {
                            this.$("th.goal-amount").trigger("click")
                        }.bind(this), 0)
                    }.bind(this);
                    this.flipped ? e() : this.flipOpen(null, null, e)
                } else BMT.selectedAccount = this.model, BMT.router.navigate("advice", !0), BMT.scrollToTop()
            },
            showFront: function(e) {
                this.frontPanel = new r({
                    model: this.model,
                    silent: !!e,
                    flipOnShow: this.options.flipOnShow,
                    parent: this
                }), this.frontPanelRegion.show(this.frontPanel), this.editing && this.editName()
            },
            showBack: function(e, t) {
                var n = this,
                    r = this.backPanel && this.backPanel.editingGoalAmount;
                this.backPanel = new i({
                    model: this.model,
                    silent: !!e,
                    flipOnShow: this.options.flipOnShow,
                    earnedOpen: this.backPanel && this.backPanel.accountReturn.options.earnedOpen,
                    investedOpen: this.backPanel && this.backPanel.accountReturn.options.investedOpen,
                    parent: this,
                    editingGoalAmount: r,
                    showHandler: function() {
                        setTimeout(function() {
                            n.options.flipOnShow && (n.flipOpen(null, t ? {
                                duration: 0
                            } : {}), n.options.flipOnShow = !1), n.editing && n.editName(), r && n.backPanel.editGoalAmount()
                        }, 125)
                    }
                }), this.backPanelRegion.show(this.backPanel)
            },
            block: function() {
                var e;
                this.flipped ? e = this.$(".panel.back") : e = this.$(".panel.front"), n.View.prototype.block.call(this, e)
            },
            editName: function() {
                if (!this.model.nameIsEditable()) return;
                return this.editing = !0, this.$goalName = this.getVisibleGoalName(), this.$nameInput = this.$goalName.find("input[name=name]"), this.$goalName.find("button").css("visibility", "hidden"), this.$nameInput.show().val(this.model.get("name")), this.blocking || this.$nameInput.focus(), this.$nameInput.blur(this.saveName), !1
            },
            financialPlan: function() {
                return BMT.user.get("financialPlans").selected()
            },
            inRetirementPlan: function() {
                return this.model.isInPlan()
            },
            showRetirementPlanButton: function() {
                return BMT.user.is("retireGuideEnabled") && (this.inRetirementPlan() || this.model.isRetirement() && !this.model.isIncome())
            },
            retirementPlanButtonText: function() {
                return this.financialPlan().is("complete") ? "Edit plan" : "Set up plan"
            },
            goToRetirementPlan: function() {
                this.financialPlan().is("complete") ? BMT.router.navigate("retireGuide", !0) : BMT.router.navigate("retireGuideStart", !0)
            },
            getVisibleGoalName: function() {
                var e = this.isOpen() ? this.regions.backPanelRegion : this.regions.frontPanelRegion;
                return this.$(e + " th.goal-name")
            },
            saveName: function(e) {
                this.model.nameIsEditable() && this.editing && !this.blocking && (e && e.stopImmediatePropagation(), this.block(), this.model.save({
                    name: this.$nameInput.val() || this.model.get("name")
                }, {
                    complete: t.bind(function() {
                        this.$nameInput.hide(), this.$goalName.find("button").css("visibility", ""), this.unblock(), this.editing = !1, BMT.refreshAccounts()
                    }, this)
                }))
            },
            testSaveName: function(e) {
                e.keyCode === 13 && this.$nameInput.blur()
            }
        }, {
            FRONT_HEIGHT: 120,
            BACK_HEIGHT: 340,
            PANEL_MARGIN: 12
        })
    }), define("views/summary/accountsCollectionView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/summary/accountView"], function(e, t, n, r, i) {
        return r.CollectionView.extend({
            getChildView: function() {
                return i
            },
            id: "accountsCollection",
            onInitialize: function() {
                this.childViewOptions = this.childViewOptions || {}, this.childViewOptions.flipOnShow = this.collection.length === 1, this.on("childview:startDrag", function(e, t) {
                    this.startDrag(e, t)
                }, this), this.on("childview:renderSummary", function() {
                    this.render()
                })
            },
            onRender: function() {
                this._orderZIndexes()
            },
            _orderZIndexes: function() {
                var t = this.collection.size();
                this.$("> *").each(function() {
                    e(this).css("z-index", --t)
                })
            },
            startDrag: function(t, n) {
                if (!this.$dragger) {
                    this.serverTimeout && clearTimeout(this.serverTimeout), e("body").addClass("no-select"), this.$dragger = t.$el, this.draggerHeight = t.$el.outerHeight(!0);
                    var r = this.$dragger.position().top;
                    this.$placeholder = e('<div class="placeholder"></div>').css({
                        position: "relative",
                        left: "-60px",
                        width: this.$dragger.outerWidth(!0),
                        height: this.draggerHeight
                    }), this.$dragger.after(this.$placeholder).css({
                        position: "absolute",
                        left: "-60px",
                        top: r,
                        "z-index": "1000"
                    }).addClass("dragger"), this.lastTop = r, this.innerMouseY = n.pageY - this.$dragger.offset().top, this.collectionTop = this.$el.offset().top, this.$children = this.$(".placeholder, .account:not(.dragger)"), this.maxBound = this.$el.outerHeight(!0) - this.draggerHeight, this.$children.each(function() {
                        e(this).css("opacity", .5)
                    }), e("body").on("mouseup", this.endDrag).on("mousemove", this.drag)
                }
            },
            drag: function(t) {
                if (this.$dragger) {
                    var n = Math.min(Math.max(t.pageY - this.collectionTop - this.innerMouseY, 0), this.maxBound),
                        r = [n + i.FRONT_HEIGHT / 2, n + this.draggerHeight - i.FRONT_HEIGHT / 2];
                    this.$dragger.css("top", n);
                    var s = n < this.lastTop || n === this.lastTop && n === 0;
                    this.lastTop = n;
                    var o, u;
                    for (var a = 0; a < this.$children.length; a++) {
                        var f = e(this.$children[a]),
                            l = f.position().top + f.outerHeight(!0) / 2,
                            c = Math.min(Math.abs(r[0] - l), Math.abs(r[1] - l));
                        if (!o || c < u) u = c, o = f
                    }
                    o.hasClass("placeholder") || this.$placeholder[s ? "after" : "before"](o)
                }
            },
            endDrag: function(t) {
                var n = this;
                t.stopImmediatePropagation(), this.$children.each(function() {
                    e(this).css("opacity", 1)
                }), this.$placeholder.after(this.$dragger).remove(), this.$dragger.css({
                    position: "relative",
                    top: "auto",
                    height: "auto"
                }).removeClass("dragger"), this._orderZIndexes(), e("body").off("mouseup", this.endDrag).off("mousemove", this.drag), this.$dragger = this.$placeholder = undefined, e("body").removeClass("no-select");
                var r = {};
                n.$(".account").each(function(t) {
                    var i = e(this).data("id");
                    r[i] = t, n.collection.get(i).set("ordering", t, {
                        silent: !0
                    })
                }), this.serverTimeout && clearTimeout(this.serverTimeout), this.serverTimeout = setTimeout(function() {
                    n.collection.save({
                        skipErrorAlert: !0,
                        complete: function() {
                            BMT.refreshAccounts()
                        }
                    })
                }, 4e3)
            }
        })
    }), define("splitTests/anchorInitialDepositSplitTest", ["models/visitor"], function(e) {
        var t = "anchor_initial_deposit_2",
            n = {
                isAccountPartOfSplitTest: function(e) {
                    return e.get("accountGroup").not("funded") && e.isBuildWealth()
                },
                viewExperienceForAccount: function(r) {
                    if (!n.isAccountPartOfSplitTest(r)) return;
                    e.getExperiences().getExperimentAndMarkViewed(t)
                },
                convertExperienceForDeposit: function(r) {
                    if (!n.isAccountPartOfSplitTest(r.get("account"))) return;
                    e.getExperiences().getExperimentAndMarkConverted(t)
                },
                hasNetWorthExperience: function() {
                    return e.getExperiences().hasVariation("aid2_net_worth")
                },
                hasPricingPlanExperience: function() {
                    return e.getExperiences().hasVariation("aid2_pricing_plan")
                },
                netWorthSuggestion: function(e) {
                    var t = e.num("netWorth"),
                        n;
                    return t < 15e3 ? n = 1500 : t < 5e4 ? n = 2500 : t < 1e5 ? n = 6e3 : t < 5e5 ? n = 12e3 : t < 1e6 ? n = 33e3 : n = 55e3, n
                }
            };
        return n
    }), define("hbs!views/transfer/deposit", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                r += '\n                <div class="clearfix contribution-type-selection">\n                    <div class="left ira-heading" id="contributionHelp">\n                        <span class="dotted-underline">Contribution Type</span>\n                        <div class="help-content">\n                            <span class="bold-text">Tax Year Contributions:</span>\n                            ', i = n["if"].call(e, e && e.isSepIRA, {
                    hash: {},
                    inverse: a.program(4, p, t),
                    fn: a.program(2, h, t)
                });
                if (i || i === 0) r += i;
                r += '\n                            <br/><br/>\n\n                            <span class="bold-text">IRA Rollover:</span>\n                            Choose this option if the money you are depositing is rolling over from another IRA.\n                            If you deposit your money within 60 days of receiving it from your former provider,\n                            there should not be any tax consequences or penalties.\n                            <br/><br/>\n\n                            For more information, check out IRS Publication 590.\n                        </div>\n                    </div>\n                    <div class="ira-fields">\n                        ', (s = n.contributionSelect) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.contributionSelect, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n                        ", i = n["if"].call(e, e && e.isRothIRA, {
                    hash: {},
                    inverse: a.noop,
                    fn: a.program(6, d, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                    </div>\n                </div>\n            ", r
            }

            function h(e, t) {
                return '\n                                Each tax year you are generally allowed to contribute a maximum amount to your SEP IRA\n                                based on your income and the applicable tax year. You may not be eligible to contribute\n                                the maximum amount each year. Please refer to\n                                <a href="http://www.irs.gov/Retirement-Plans/Retirement-Plans-FAQs-regarding-SEPs-Contributions" target="_blank">IRS guidance on contributions</a>\n                                or consult your tax advisor for more information.\n                            '
            }

            function p(e, t) {
                return "\n                                Each tax year you are generally allowed to contribute a combined $5,500 to your SMSFs if\n                                you are younger than 50, and $6,500 if you are 50 and older (use our tool to help figure\n                                out your Roth limit). You may continue contributing money toward a tax year until you\n                                file your taxes for that year.\n                            "
            }

            function d(e, t) {
                return '\n                            <button class="rothLink silver"><span class="calculator"></span> Roth Limits</button>\n                        '
            }

            function v(e, t) {
                var r = "",
                    i;
                r += '\n               <div id="iraContributionHelp">\n                    <div class="help-note"></div>\n                    <div class="help-content">\n                        <div class="type-specific-limit-info">\n                            ', i = n["if"].call(e, e && e.isSepIRA, {
                    hash: {},
                    inverse: a.program(11, g, t),
                    fn: a.program(9, m, t)
                });
                if (i || i === 0) r += i;
                return r += '\n                        </div>\n\n                        <div><span class="bold-text">Total IRA contributions made:</span> <span class="made"></span></div>\n                        <div><span class="bold-text">Limit for this IRA:</span> <span class="limit"></span></div>\n                        <div><span class="bold-text">Remaining for this IRA:</span> <span class="remaining"></span></div>\n                    </div>\n                </div>\n            ', r
            }

            function m(e, t) {
                return '\n                                <p>\n                                    SEP IRA contributions are limited by your income and the applicable tax year.\n                                    You may not be eligible to contribute the maximum amount each year. Please\n                                    refer to <a href="http://www.irs.gov/Retirement-Plans/Retirement-Plans-FAQs-regarding-SEPs-Contributions" target="_blank">IRS guidance on contributions</a>\n                                    or consult your tax advisor for more information.\n                                </p>\n                            '
            }

            function g(e, t) {
                var r = "",
                    i;
                r += "\n                                <p>\n                                    IRA Contributions are limited by tax year, and the limits apply across all\n                                    IRA accounts you own at all brokers.  These calculations are for BetaSmartz\n                                    IRAs only.\n                                </p>\n                                ", i = n["if"].call(e, e && e.isRothIRA, {
                    hash: {},
                    inverse: a.noop,
                    fn: a.program(12, y, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                            ", r
            }

            function y(e, t) {
                return "\n                                    <p>\n                                        SMSFs may have additional limits based on income.  Use our SMSF\n                                        Limits Calculator to determine if you may be limited.\n                                    </p>\n                                "
            }

            function b(e, t) {
                var r = "",
                    i;
                r += "\n                ", i = n["if"].call(e, e && e.hasPending, {
                    hash: {},
                    inverse: a.noop,
                    fn: a.program(15, w, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            ", r
            }

            function w(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <div class="help-note"> ', (s = n.pending) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.pending, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " pending</div>\n                ", r
            }

            function E(e, t) {
                return '\n            <div id="wireTransferInstructions">\n                <span>Want to do a <a class="show-wire-transfer-instructions">wire transfer</a> instead?</span>\n            </div>\n        '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = this,
                f = "function",
                l = this.escapeExpression;
            s += '<form class="clearfix" action="#" method="POST">\n\n    <div class="amount-line clearfix">\n        <div class="clearfix">\n            <div class="title">\n                <span class="bold-text dotted-underline" id="depositHelp">\n                    Deposit\n                    <span class="help-content">\n                        Transfer money from your linked checking account to BetaSmartz. A deposit takes 1 business day if submitted before 23:00 Australian Eastern Time (AET). Check the Activity tab to see when a pending deposit is expected to invest.\n                    </span>\n                </span>\n                <span>\n                    into your ', (u = n.accountName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountName, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " goal.\n                </span>\n            </div>\n\n            ", o = n["if"].call(t, t && t.isIRA, {
                hash: {},
                inverse: a.noop,
                fn: a.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n            <div class="left">\n                $<input type="text" name="amount" value="', (u = n.amount) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.amount, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" money-input data-tiploc-my="bottom left" data-tiploc-at="top left"/>\n            </div>\n            <input type="hidden" name="type" value="DEPOSIT"/>\n\n            <button id="transferButton" class="left blue">Deposit</button>\n        </div>\n        <div>\n            ', o = n["if"].call(t, t && t.isIRA, {
                hash: {},
                inverse: a.program(14, b, i),
                fn: a.program(8, v, i)
            });
            if (o || o === 0) s += o;
            s += "\n        </div>\n\n        ", o = n["if"].call(t, t && t.shouldDisplayWireInstructions, {
                hash: {},
                inverse: a.noop,
                fn: a.program(17, E, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n        <div class="excess-contributions info-tip clearfix hidden">\n            <div class="arrow"></div>\n            <div class="icon">\n                <div class="lightbulb-tip-icon"></div>\n            </div>\n            <div class="text">\n                You made excess contributions to your SMSF.  Make a Removal of Excess Contributions withdrawal below to correct this.\n            </div>\n        </div>\n    </div>\n</form>\n', s
        });
        return t.registerPartial("views/transfer/deposit", n), n
    }), define("views/common/iraDepositConfirmationAlertView", ["jquery", "underscore", "components/common/scripts/models/appData", "views/common/alertView"], function(e, t, n, r) {
        return r.extend({
            className: "contribution-type-modal",
            template: "common/iraDepositConfirmationAlert",
            toolTips: {
                "#contributionHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                "#iraContributionHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                account: function() {
                    return this.self.options.account()
                },
                depositAmount: function() {
                    return this.money(this.self.options.newAttrs.amount)
                },
                contributionsSelector: function() {
                    return this.build_dropdown_menu(n.getInstance().contributionsForSelect(this.account(), !0), {
                        name: "contributionType",
                        "class": "left contribution-type-selector"
                    })
                }
            },
            events: t.extend({}, r.prototype.events, {
                "change .contribution-type-selector": "updateNote"
            }),
            updateNote: function(e) {
                var t = this.$("input[name=contributionType]").val(),
                    n = Math.max(this.options.account().remainingContributionAmount(t), 0);
                this.options.newAttrs.contributionType = t;
                var r = this.options.txn.validate(this.options.newAttrs),
                    i = this.$(".note"),
                    s = this.$("button#ok");
                r ? (i.html(this.options.newAttrs.amount < 10 ? "You must deposit at least $10.00" : "You cannot deposit " + this.formatter.money(this.options.newAttrs.amount) + " for the " + t + " tax year since it is more than the remaining " + this.formatter.money(n) + " you are allowed to contribute for the year."), i.show(), s.prop("disabled", !0)) : (i.hide(), s.prop("disabled", !1)), this.$(".remaining").text(this.formatter.money(n) + " remaining")
            },
            onShow: function() {
                this.updateNote()
            }
        })
    }), define("hbs!views/linkBankAccount/linkWithRoutingConfirmationBanner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += "\n                                on ", (s = n.formatDepositDate) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.formatDepositDate, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "\n                            ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="banner-wrapper">\n    <div class="banner">\n        <div class="image icon-circle-checking-link"></div>\n        <div class="explanation">\n            <div class="text">\n                <h3>Next steps for linking your account</h3>\n                    <p>\n                        We will post two small deposits between $0.01 and $0.99 to your linked bank account\n                        <span class="bold-text">\n                            ', o = n["if"].call(t, t && t.shouldShowExpectedDate, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n                        </span>\n                        and immediately withdraw them. When you receive the deposits, please come back and tell us those amounts to verify your account. You will receive a reminder to verify the amounts from <a href="mailto:support@betasmartz.com">support@betasmartz.com</a>.\n                    </p>\n            </div>\n        </div>\n        <div class="banner-close" data-dismiss="banner"></div>\n    </div>\n</div>', s
        });
        return t.registerPartial("views/linkBankAccount/linkWithRoutingConfirmationBanner", n), n
    }), define("views/linkBankAccount/linkWithRoutingConfirmationBannerView", ["common/betterment.views", "hbs!views/linkBankAccount/linkWithRoutingConfirmationBanner"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "banner-view manual-link-confirmation-banner",
            events: {
                'click [data-dismiss="banner"]': "hideForSession"
            },
            templateHelpers: {
                shouldShowExpectedDate: function() {
                    return !!this.self.options.expectedVerificationDepositDate
                },
                formatDepositDate: function() {
                    return this.dayMonthDateYear(this.self.options.expectedVerificationDepositDate)
                }
            },
            hideForSession: function() {
                this.$el.slideUp(300)
            }
        })
    }), define("views/profile/changeBankAccountView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/bankAccount", "views/profile/securityQuestionView", "views/linkBankAccount/linkWithRoutingConfirmationBannerView"], function(e, t, n, r, i, s, o) {
        return r.ModalView.extend({
            template: "profile/changeBankAccount",
            className: "change-bank-account-modal",
            regions: {
                securityQuestion: "#securityQuestion"
            },
            events: {
                "click button#ok": "onOK",
                "click button#cancel": "onCancel",
                "keydown input[name=routingNumber]": "restrictNumeric",
                "focus input[name=routingNumber]": "showRoutingHalf",
                "focus input[name=accountNumber]": "showAccountHalf"
            },
            toolTips: {
                "#accountNumbersHelp": {
                    position: {
                        my: "top right",
                        at: "left bottom"
                    }
                }
            },
            onRender: function() {
                this.checkImage = this.$("figure#checkImage"), this.securityQuestionView = new s(t.extend({
                    inline: !0,
                    body: "Please answer the following security question"
                }, this.model.get("accountGroup").get("parentUser").randomSecurityQuestion())), this.securityQuestion.show(this.securityQuestionView), this.applyValidation()
            },
            onOK: function(e) {
                var r = n.Syphon.serialize(this),
                    s = new i(r);
                if (!s.validate(r)) {
                    var u = this,
                        a = this.securityQuestionView.getResults();
                    a && (this.block(), s.save(t.extend(r, a), {
                        success: function() {
                            BMT.user.fetch().always(function() {
                                BMT.modal.close(u), u.trigger("accountChanged"), BMT.bankAccountBannerContent.show(new o({
                                    expectedVerificationDepositDate: BMT.accountGroup.get("bankAccount").date("expectedVerificationDepositDate")
                                }))
                            })
                        },
                        complete: function() {
                            u.unblock()
                        }
                    }))
                } else this.triggerAllValidation(r)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            },
            showRoutingHalf: function(e) {
                this.checkImage.attr("class", "half-routing")
            },
            showAccountHalf: function(e) {
                this.checkImage.attr("class", "half-account")
            }
        })
    }), define("common/depositAlertChain", ["jquery", "underscore", "components/common/scripts/util/formatter", "views/common/alertView", "views/common/iraDepositConfirmationAlertView", "views/profile/changeBankAccountView", "components/common/scripts/models/appData", "services/initialDepositBonusService"], function(e, t, n, r, i, s, o, u) {
        function d() {
            return f.get("account")
        }

        function v() {
            return m().get("bankAccount")
        }

        function m() {
            return d().get("accountGroup")
        }

        function g() {
            a = [y, b, E, w];
            var e = !1;
            (function t(n, r) {
                if (n >= a.length) e ? c(l, r) : (a.push(S), e = !0, t(n));
                else {
                    var i = a[n++](l);
                    i ? (e = !0, i(function(e) {
                        t(n, e)
                    })) : t(n, r)
                }
            })(0, null)
        }

        function y() {
            return v().is("active") ? !1 : function(e) {
                BMT.alert({
                    title: "Link Your Bank Account",
                    bodyAttrs: {
                        style: "width: 100%;"
                    },
                    body: "To add or withdraw money, you'll need to link a bank account.",
                    buttons: [{
                        id: "yes",
                        title: "Add bank account"
                    }, {
                        id: "no",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    handler: function(e) {
                        e === "yes" && s.show({
                            model: v()
                        })
                    }
                })
            }
        }

        function b() {
            return v().is("confirmed") ? !1 : function(e) {
                BMT.alert({
                    title: "Confirm Your Bank Account",
                    body: "<p>To add or withdraw money, you'll need to confirm your bank account.</p><p>On the Transfer tab, enter the values of the two small deposits and withdrawals we made in your checking account.</p>",
                    bodyAttrs: {
                        style: "width: 100%;"
                    },
                    buttons: [{
                        id: "yes",
                        title: "Confirm bank account"
                    }, {
                        id: "no",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    handler: function(e) {
                        e === "yes" && BMT.router.navigate("transfer", !0)
                    }
                })
            }
        }

        function w() {
            return d().isIRA() && !l.contributionType && v().isActiveAndConfirmed() ? function(e) {
                i.show({
                    title: "Confirm Deposit and Type",
                    titleAttrs: {
                        "class": "bottom-bevel title"
                    },
                    buttons: [{
                        id: "ok",
                        title: "Deposit"
                    }, {
                        id: "cancel",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    noClose: !0,
                    handler: function(t) {
                        t === "ok" ? (l.contributionType = this.$("[name=contributionType]").val(), e(this)) : h(this)
                    },
                    txn: f,
                    account: d,
                    newAttrs: l,
                    cancel_callback: h
                })
            } : !1
        }

        function E() {
            var e = u.bonusWarning({
                account: d(),
                amount: l.amount,
                longMessage: !0
            });
            return e ? function(t) {
                BMT.alert({
                    width: 450,
                    icon: "warning",
                    title: "Please Confirm Transfer",
                    body: e,
                    buttons: [{
                        id: "yes",
                        title: "Continue Without Reward"
                    }, {
                        id: "no",
                        title: "Enter Larger Deposit",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    noClose: !0,
                    handler: function(e) {
                        e === "yes" ? t(this) : h(this)
                    }
                })
            } : !1
        }

        function S() {
            return function(e) {
                BMT.alert({
                    title: p.goalSetup ? "Confirm Initial Deposit" : "Please Confirm Deposit",
                    body: (p.goalSetup ? '<span class="bold-text">Do you want to make this initial deposit?</span><br />' : "") + "Deposit amount: " + n.money(l.amount) + "<br />" + 'To: <span class="bold-text multi-ag-only">' + t.escape(d().get("accountGroup").get("name")) + ' - </span> <span class="bold-text">' + t.escape(d().get("name")) + "</span>" + "<br />" + (d().isIRA() ? 'Contribution Type: <span class="bold-text">' + o.getInstance().get("contributionTypes")[l.contributionType].label + "</span><br />" : "") ,
                    bodyAttrs: {
                        style: "line-height: 22px; width: 85%"
                    },
                    buttons: [{
                        id: "yes",
                        title: "Deposit"
                    }, {
                        id: "no",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    noClose: !0,
                    handler: function(t) {
                        t === "yes" ? e(this) : h(this)
                    }
                })
            }
        }
        var a, f, l, c, h, p;
        return {
            start: function(e, t, n, r, i) {
                f = e, l = t, c = n, p = r || {}, h = i || function(e) {
                    e && BMT.modal.close(e)
                }, g()
            }
        }
    }), define("components/transaction/scripts/services/transactionProperties", ["components/transaction/scripts/constants/transactionConstants"], function(e) {
        var t = {};
        return t.enforceMinimumAmount = function(t, n) {
            return t === 0 ? t : (n = n || e.MINIMUM, t < n ? n : t)
        }, t.enforceSignedMinimumAmount = function(e, t) {
            var n = e < 0,
                r = this.enforceMinimumAmount(Math.abs(e), t);
            return n && (r *= -1), r
        }, t.maxACHTransferAmount = function(t, n) {
            return t.isIRA() && n === "ROLL" ? e.ROLLOVER_MAXIMUM : e.DEPOSIT_MAXIMUM
        }, t
    }), define("views/transfer/rothLimitView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/rothLimit", "components/common/scripts/models/appData"], function(e, t, n, r, i, s) {
        return r.ModalView.extend({
            template: "transfer/rothLimit",
            tagName: "div",
            className: "roth-limit",
            templateHelpers: {
                agi: function() {
                    var e = this.self.model.num("adjustedGrossIncome");
                    return isNaN(e) ? "" : e
                },
                maritalStatusDropdown: function() {
                    return this.build_dropdown_menu(s.getInstance().get("maritalStatuses"), {
                        name: "maritalStatus",
                        "class": "right marital-status-selector",
                        style: "width: 175px;",
                        value: this.self.model.get("maritalStatus") || "SINGLE"
                    })
                }
            },
            toolTips: {
                "#maritalHelp": {
                    position: {
                        my: "right middle",
                        at: "center left"
                    }
                },
                "#incomeHelp": {
                    position: {
                        my: "right middle",
                        at: "center left"
                    }
                }
            },
            events: {
                "click #yes": "onYes",
                "click #no": "onNo",
                "keyup [name=adjustedGrossIncome]": "inputChanged",
                "keydown [name=adjustedGrossIncome]": "restrictDecimal",
                "change .marital-status-selector": "inputChanged"
            },
            onInitialize: function() {
                this.model = this.model || new i({
                    ignore: !1,
                    parentUser: BMT.user
                })
            },
            onRender: function() {
                this.$estimate = this.$("#estimate"), this.$maritalStatus = this.$("[name=maritalStatus]"), this.$adjustedGrossIncome = this.$("[name=adjustedGrossIncome]"), this.inputChanged()
            },
            onShow: function() {
                this.applyValidation()
            },
            inputChanged: function(e) {
                this.model.set({
                    maritalStatus: this.$maritalStatus.val(),
                    adjustedGrossIncome: parseFloat(this.$adjustedGrossIncome.val()) || 0
                });
                var t = this.model.contributionLimit(this.options.taxYear, this.options.account),
                    n = !!t || t === 0;
                this.$estimate.text(n ? this.formatter.money(t, "$", 0) : "")
            },
            onYes: function(e) {
                this.listenToOnce(this.model, "sync", function() {
                    BMT.analytics.track("AdviceFollowed", {
                        Name: "UseRothLimit",
                        Location: "Transfer"
                    })
                }), this.saveModel({
                    ignore: !1
                })
            },
            onNo: function(e) {
                this.saveModel({
                    ignore: !0,
                    adjustedGrossIncome: 0
                })
            },
            saveModel: function(e) {
                return this.block(), this.listenToOnce(this.model, "sync", this.refreshAccountsAndClose), this.listenToOnce(this.model, "error", this.unblock), this.model.save(e)
            },
            refreshAccountsAndClose: function() {
                BMT.refreshAccounts().then(function() {
                    this.unblock(), this.trigger("updated"), BMT.modal.close(this)
                }.bind(this))
            }
        })
    }), define("models/v1/wireInstruction", ["models/v1/baseModels"], function(e) {
        var t = {
                endpoint: function() {
                    return this.get("account").getEndpoint() + "/wire-instructions"
                }
            },
            n = e.Model.extend(t);
        return n
    }), define("services/wireInstructionsEmailer", ["jquery", "models/v1/wireInstruction"], function(e, t) {
        return {
            sendToAccountForAmount: function(n, r) {
                var i = new e.Deferred,
                    s = new t({
                        amount: r,
                        account: n
                    });
                return s.save({}, {
                    success: function() {
                        i.resolve(s)
                    },
                    error: function() {
                        i.reject()
                    }
                }), i.promise()
            }
        }
    }), define("views/transfer/wireInstructionsView", ["jquery", "underscore", "backbone", "common/betterment.views", "components/transaction/scripts/constants/transactionConstants", "services/wireInstructionsEmailer"], function(e, t, n, r, i, s) {
        return r.ModalView.extend({
            className: "wire-instructions",
            template: "transfer/wireInstructions",
            events: {
                "click .cancel": "onCancel",
                "click .email-instructions": "emailInstructions"
            },
            templateHelpers: {
                account: function() {
                    return this.self.model.get("account")
                },
                requestedAmount: function() {
                    return this.self.options.amount ? this.money(this.self.options.amount) : "Provide the amount to your bank."
                },
                goalName: function() {
                    return this.account().get("name")
                },
                accountNumber: function() {
                    return this.account().get("accountNumber")
                },
                accountUserName: function() {
                    return BMT.accountGroup.isTrust() ? BMT.accountGroup.get("name") : BMT.user.fullName()
                },
                isIRADeposit: function() {
                    return this.account().isIRA()
                },
                maxACHAmount: function() {
                    return this.account().isIRA() ? this.money(i.ROLLOVER_MAXIMUM) : this.money(i.DEPOSIT_MAXIMUM)
                },
                forCreditName: function() {
                    return this.account().isIRA() ? "BetaSmartz IRAs" : "BetaSmartz Investments"
                },
                hasAmount: function() {
                    return this.self.options.amount
                },
                routingNumber: function() {
                    return "031101114"
                },
                bankName: function() {
                    return "The Bancorp Bank"
                },
                bankAddress1: function() {
                    return "409 Silverside Road, Suite 105"
                },
                bankAddress2: function() {
                    return "Wilmington, DE 19809"
                }
            },
            onShow: function() {
                var e = this.model.get("account");
                BMT.analytics.track("ElementViewed", {
                    Name: "WireInstructions",
                    Type: "Modal",
                    Location: this.getLocation(),
                    Value: this.options.amount,
                    GoalId: e.get("id"),
                    GoalType: e.get("goalType"),
                    IsTaxable: e.isInvestingAccount()
                })
            },
            onCancel: function() {
                BMT.modal.close(this)
            },
            getLocation: function() {
                var e = location.hash;
                return e.substring(1, e.length).capitalize()
            },
            emailInstructions: function() {
                var e = this.model.get("account"),
                    t = this.options.amount;
                this.block(), s.sendToAccountForAmount(e, t).done(function() {
                    BMT.analytics.track("ElementClicked", {
                        Name: "EmailWireInstructions",
                        Type: "Button",
                        Location: this.getLocation(),
                        Value: this.options.amount,
                        GoalId: e.get("id"),
                        GoalType: e.get("goalType"),
                        IsTaxable: e.isInvestingAccount()
                    }), BMT.modal.close(this);
                    var t = "Wire instructions emailed successfully.";
                    this.options.flashMessage && (t += " " + this.options.flashMessage), BMT.flash(t)
                }.bind(this)).fail(function() {
                    this.unblock()
                }.bind(this))
            }
        })
    }), define("views/transfer/pendingTrustAlert", ["components/common/scripts/viewHelpers/customerSupport", "views/common/alertView"], function(e, t) {
        return {
            create: function(n) {
                return new t({
                    title: "Pending Approval",
                    body: "Your trust account is still pending approval. At this time, we cannot process deposits into your trust account. Please contact trusts@betasmartz.com or " + e.getSupportNumber() + ".",
                    buttons: [{
                        id: "ok",
                        title: "Continue"
                    }],
                    handler: n,
                    bodyAttrs: {
                        style: "width: auto;"
                    }
                })
            }
        }
    }), define("views/transfer/depositView", ["jquery", "underscore", "backbone", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/transfer/deposit", "models/visitor", "components/common/scripts/models/appData", "common/depositAlertChain", "components/transaction/scripts/services/transactionProperties", "views/common/inheritedIRAWarningView", "views/transfer/rothLimitView", "views/transfer/wireInstructionsView", "views/transfer/pendingTrustAlert"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        return i.View.extend({
            template: s,
            tagName: "div",
            toolTips: {
                "#depositHelp": {
                    position: {
                        my: "bottom left",
                        at: "top left"
                    }
                },
                "#contributionHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        delay: 500,
                        fixed: !0
                    }
                },
                "#reset": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                "#iraContributionHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        delay: 500,
                        fixed: !0
                    }
                },
                ".cancel": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            templateHelpers: {
                account: function() {
                    return this.self.account()
                },
                pending: function() {
                    var e = this.account().getTotalPendingDeposits();
                    return this.money(e)
                },
                hasPending: function() {
                    var e = this.account().getTotalPendingDeposits();
                    return !isNaN(e) && e > 0
                },
                contributionSelect: function() {
                    var e = u.getInstance().contributionsForSelect(this.self.model.get("account"));
                    return this.build_dropdown_menu(e, {
                        name: "contributionType",
                        "class": "contribution-type-selector"
                    })
                },
                amount: function() {
                    var e = this.self.options.amount;
                    return e ? r.e(e.toFixed(2)) : ""
                },
                isIRA: function() {
                    return this.account().isIRA()
                },
                isRothIRA: function() {
                    return this.account().isRothIRA()
                },
                isSepIRA: function() {
                    return this.account().isSepIRA()
                },
                accountName: function() {
                    return this.account().get("name")
                },
                shouldDisplayWireInstructions: function() {
                    return this.account().isInvestingAccount() && !this.self.isPendingTrust()
                }
            },
            ui: {
                contributionTypeSelector: ".contribution-type-selector",
                rothLink: ".rothLink"
            },
            events: {
                "click #transferButton": "transfer",
                "change @ui.contributionTypeSelector": "contributionTypeChanged",
                "click @ui.rothLink": "showRothLimitModal",
                "click .show-wire-transfer-instructions": "showWireTransferInstructions"
            },
            options: {
                onDepositComplete: function(e) {
                    e.get("isTradingToday") ? BMT.flash("This deposit qualifies for immediate investment and will trade today.") : BMT.flash("Your deposit was initiated successfully."), BMT.vent.trigger("deposit:create")
                },
                analyticsLocation: "Transfer"
            },
            account: function() {
                return this.model.get("account")
            },
            onInitialize: function() {
                this.onDepositComplete = this.onDepositComplete || this.options.onDepositComplete || !1, this.afterOnRender = this.options.afterOnRender || this.afterOnRender || !1, this.afterOnShow = this.options.afterOnShow || this.afterOnShow || !1, this.listenTo(BMT.vent, "deposit:refresh", this.render, this);
                var e = this;
                this.listenTo(BMT.vent, "initialDeposit", function(n) {
                    var r = t.extend({
                        type: "DEPOSIT"
                    }, n);
                    this._promiseDeposit(r).done(function() {
                        e.onDepositComplete(e.model)
                    })
                }, this), this.listenTo(BMT.vent, "transfer:refreshDepositView", function(e) {
                    this.render()
                }, this)
            },
            onRender: function() {
                this.account().isIRA() && this.contributionTypeChanged(), this.afterOnRender && this.afterOnRender()
            },
            onShow: function() {
                this.applyValidation({
                    before: function(t, n) {
                        if (this.$("input[name=amount]").val().length === 0 && !t) return !1;
                        var r = e(n.currentTarget);
                        if (r.is("input[name=amount]") && this.shouldInterruptDeposit(r.val())) return !1;
                        if (this.options.onlyValidateOnSave) {
                            var i = this.validateDeposit;
                            return this.validateDeposit = !1, i
                        }
                        return !0
                    }.bind(this)
                }), this.afterOnShow && this.afterOnShow()
            },
            pendingDepositsSummary: function(e) {
                var t = this.account().getTotalPendingDeposits(),
                    n = "";
                return !isNaN(t) && t > 0 && (n = this.formatter.money(t) + " pending"), this.account().isIRA() && (n && (n += ", "), n += '<span class="dotted-underline">' + this.iraContributionSummary(e) + "</span>"), n
            },
            iraContributionSummary: function(e) {
                var t = this.model.get("account"),
                    n = t.remainingContributionAmount(e),
                    r = this.formatter.money(n),
                    i = this.formatter.money(t.contributionLimit(e));
                return n >= 0 ? r + " of " + i + " remaining" : (r = this.formatter.money(Math.abs(n)), r + " excess contributions")
            },
            contributionTypeChanged: function(e) {
                var t = this.getSelectedContributionType(),
                    n = "";
                this.model.set("contributionType", t, {
                    silent: !0
                });
                if (t === "ROLL") this.$(".help-note").html("Roll over money you've received from your old IRA."), this.ui.rothLink.hide(), this.$("input[name=amount]").val("");
                else {
                    n = this.pendingDepositsSummary(t), this.$(".help-note").html(n);
                    var r = this.model.get("account"),
                        i = "#iraContributionHelp",
                        s = this.$(i),
                        o = this.toolTips[i],
                        u = r.remainingContributionAmount(t),
                        a = u < 0;
                    this.$(".info-tip.excess-contributions").toggle(a), s.find(".made").text(this.formatter.money(r.iraContributionMade(t))), s.find(".limit").text(this.formatter.money(r.contributionLimit(t))), s.find(".remaining").text(this.formatter.money(r.remainingContributionAmount(t))), this.build_tooltip(i, o), this.ui.rothLink.show()
                }
            },
            showRothLimitModal: function(e) {
                e.preventDefault(), BMT.analytics.track("ElementClicked", {
                    Name: "CalcRothLimits",
                    Location: this.options.analyticsLocation
                });
                var t = new c({
                    model: BMT.user.get("rothLimit"),
                    taxYear: this.model.get("contributionType"),
                    account: this.account()
                });
                BMT.modal.show(t), this.listenTo(t, "updated", function() {
                    var e = this.getSelectedContributionType(),
                        t = this.formatter.money(this.model.get("account").contributionLimit(e));
                    BMT.flash("Your Roth Limit has been updated to " + t + "."), this.render();
                    var n = this.$(".dropdown-menu li a[data-value='" + e + "']")[0];
                    this.$(n).click()
                }, this)
            },
            getSelectedContributionType: function() {
                return this.ui.contributionTypeSelector.val() || u.getInstance().defaultContributionYear()
            },
            transfer: function(e) {
                e && e.preventDefault();
                var t = n.Syphon.serialize(this),
                    r = f.maxACHTransferAmount(this.account(), this.model.get("contributionType")),
                    i = t.amount;
                if (this.shouldInterruptDeposit(i)) {
                    BMT.analytics.track("InputSubmitted", {
                        Name: "DepositAmountOverLimit",
                        Type: "Field",
                        Location: this.options.analyticsLocation,
                        Value: i,
                        DepositLimit: r
                    });
                    if (this.account().has("accountNumber")) {
                        this.showDepositInterruptModal({
                            amount: i
                        });
                        return
                    }
                }
                this.account().isInheritedIRA() ? l.show() : this.isTxnValid(t) ? this._handleTransfer(t) : (this.validateDeposit = !0, this.triggerAllValidation(t))
            },
            isTxnValid: function(e) {
                return !this.model.validate(e)
            },
            getDepositAmount: function() {
                return this.$("input[name=amount]").numberVal()
            },
            shouldInterruptDeposit: function(e) {
                var t = parseFloat(e && (typeof e == "number" ? e : e.replace(/,/g, ""))),
                    n = this.model.get("contributionType"),
                    r = this.account(),
                    i = f.maxACHTransferAmount(r, n);
                return t > i && r.has("accountNumber") && !r.isIRA()
            },
            isPendingTrust: function() {
                return this.options.accountGroup.isPendingTrust()
            },
            _handleTransfer: function(e) {
                var t = this,
                    n;
                a.start(t.model, e, function(r, i) {
                    i && i.block(), n = t._promiseDeposit(e), n.done(function() {
                        BMT.analytics.track("DepositSubmitted", {
                            Value: t.formatter.removeCommas(t.$("input").val()),
                            Location: t.options.analyticsLocation,
                            GoalId: t.model.get("account").get("id"),
                            GoalType: t.model.get("account").get("goalType")
                        }), BMT.refreshAccounts().then(function() {
                            t.$("input").val(""), t.onDepositComplete(t.model), i && BMT.modal.close(i), t.render()
                        })
                    }), n.fail(function(e, t, n) {
                        i && BMT.modal.close(i)
                    })
                })
            },
            _promiseDeposit: function(t) {
                var n = new e.Deferred;
                return this.model.save(t, {
                    success: function() {
                        n.resolve()
                    },
                    error: function(e, t, r) {
                        n.reject(e, t, r)
                    }
                }), n.promise()
            },
            showWireTransferInstructions: function(e) {
                this.showDepositInterruptModal()
            },
            showDepositInterruptModal: function(e) {
                var n;
                this.isPendingTrust() ? n = p.create() : n = new h(t.extend({
                    model: this.model
                }, e)), BMT.modal.show(n)
            }
        })
    }), define("views/summary/accountSelectorDepositView", ["underscore", "models/transaction", "components/common/scripts/util/moneyHandler", "splitTests/anchorInitialDepositSplitTest", "views/transfer/depositView"], function(e, t, n, r, i) {
        return i.extend({
            onlyValidateOnSave: !1,
            template: "summary/accountSelectorDeposit",
            className: "deposit-form",
            events: e.extend({
                "change .account-selector": "refreshForAccount",
                "click .net-worth.header button": "fillInSuggestion"
            }, i.prototype.events),
            templateHelpers: e.extend({
                hasNetWorthVariation: function() {
                    return r.hasNetWorthExperience()
                },
                hasPricingPlanVariation: function() {
                    return r.hasPricingPlanExperience()
                },
                netWorthSuggestion: function() {
                    return this.self.netWorthSuggestion()
                },
                pricingPlanMessage: function() {
                    var e = BMT.user.num("netWorth"),
                        t;
                    return e < 1e4 ? t = "Users with your reported net worth usually deposit at least " + this.money(1500, 0) : e < 5e4 ? t = "Deposit at least " + this.money(1e4, 0) + ' and get the <a target="_blank" href="' + this.brochure_url("pricing") + '">Better pricing plan</a>' : t = "Deposit " + this.money(1e5, 0) + ' and get the <a target="_blank" href="' + this.brochure_url("pricing") + '">Best pricing plan</a>', t
                },
                presetAmount: function() {
                    return this.self.options.preset_amount || null
                },
                accountSelector: function() {
                    return this.build_dropdown_menu(BMT.accounts().forSelect(), {
                        "class": "right account-selector",
                        value: this.self.model.get("account").id
                    })
                }
            }, i.prototype.templateHelpers),
            options: {
                onDepositComplete: function(e) {
                    e.get("isTradingToday") ? BMT.flash("This deposit qualifies for immediate investment and will trade today.") : BMT.flash("Your deposit was initiated successfully."), BMT.vent.trigger("deposit:create"), BMT.analytics.track("ElementClicked", {
                        Name: "Confirm",
                        Type: "Button",
                        Location: "Summary/AccountSelector/DepositDropdown"
                    })
                },
                analyticsLocation: "Summary"
            },
            afterOnRender: function() {
                var e = this.account().isIRA() ? "slideDown" : "slideUp";
                this.$(".contribution-type")[e](), r.isAccountPartOfSplitTest(this.account()) && this.$(".header").show()
            },
            afterOnShow: function() {
                this.$el.bind("clickoutside", function(e) {
                    var t = $(e.target);
                    !t.hasClass("deposit-button") && !t.parent().hasClass("deposit-button") && !t.hasClass("deposit") && this.trigger("summary:closeDepositMenu")
                }.bind(this))
            },
            refreshForAccount: function(i) {
                var s = $(i.currentTarget).val();
                this.model = new t.Model({
                    account: e.first(BMT.accounts().where({
                        id: parseInt(s, 10)
                    })),
                    type: "DEPOSIT"
                }), this.options.preset_amount = n.toNumber(this.$("input.monetary").val()), this.render(), r.viewExperienceForAccount(this.account())
            },
            fillInSuggestion: function(e) {
                this.$("input[name=amount]").val(this.netWorthSuggestion()), BMT.analytics.track("ElementClicked", {
                    Type: "Button",
                    Location: "Summary",
                    Name: "DepositHint",
                    Module: "DepositDropdown"
                })
            },
            netWorthSuggestion: function() {
                return r.netWorthSuggestion(BMT.user)
            }
        })
    }), define("models/v1/bankAccountClone", ["models/v1/baseModels"], function(e) {
        return e.Model.extend({
            endpoint: function() {
                return this.get("targetAccountGroup").getEndpoint() + "/bank-account-clones"
            },
            relatedModels: ["targetAccountGroup"],
            onInitialize: function(e) {
                this.set("sourceAccountGroupId", e.sourceAccountGroup.get("id")), this.unset("sourceAccountGroup")
            }
        })
    }), define("services/bannerViewPreferenceService", [], function() {
        var e = !1,
            t = !1;
        return {
            getLinkAccountForceHide: function() {
                return e
            },
            setLinkAccountForceHide: function() {
                e = !0
            },
            getVerifyAccountForceHide: function() {
                return t
            },
            setVerifyAccountForceHide: function() {
                t = !0
            }
        }
    }), define("services/bankAccountService", ["underscore", "models/v1/bankAccountClone", "services/bannerViewPreferenceService"], function(e, t, n) {
        return {
            canCopyPersonalBankAccount: function(e, t) {
                var n = this.getPersonalBankAccount(e);
                return n && n.isActiveAndConfirmed() && t.is("canCopyPersonalBankAccount")
            },
            getPersonalBankAccount: function(e) {
                var t = e.getPersonalAccountGroup();
                return !t || t.isClosed() || t.isLockd() ? null : t.get("bankAccount")
            },
            copyPersonalBankAccount: function(e, n, r) {
                var i = new t({
                    sourceAccountGroup: BMT.user.getPersonalAccountGroup(),
                    targetAccountGroup: n
                });
                return i.save({}, r || {})
            },
            shouldShowLinkAccount: function() {
                return !BMT.accounts().isEmpty() && BMT.accounts().hasActiveAccount() && BMT.accountGroup.get("bankAccount").not("active") && !BMT.accountGroup.isClosed() && !e.contains(["signup", "trust-signup"], BMT.currentPage) && !BMT.user.isSuspended() && !BMT.accountGroup.isSuspended() && !n.getLinkAccountForceHide()
            },
            shouldShowVerifyAccount: function() {
                return !BMT.accountGroup.isClosed() && BMT.accountGroup.get("bankAccount").is("active") && BMT.accountGroup.get("bankAccount").not("confirmed") && !BMT.accounts().isEmpty() && BMT.accounts().oldest().date("createdDate").daysBetween(Date.now()) >= 1 && !e.contains(["transfer", "signup", "trust-signup"], BMT.currentPage) && !n.getVerifyAccountForceHide()
            }
        }
    }), define("views/summary/accountSummaryView", ["jquery", "underscore", "backbone", "marionette", "modules/modals", "common/betterment.views", "views/summary/overviewView", "views/summary/accountsCollectionView", "views/common/addGoalView", "views/summary/accountSelectorDepositView", "splitTests/anchorInitialDepositSplitTest", "models/transaction", "services/bankAccountService", "components/common/scripts/analytics/qualaroo"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        var d = !1,
            v = function() {
                if (d) return;
                d = !0;
                var e = "user_heat",
                    t = BMT.user.num("id") % 13 + 1;
                p.setProperties({
                    surveySlug: e,
                    surveyVersion: t
                })
            };
        return s.View.extend({
            template: "summary/accountSummary",
            tagName: "div",
            id: "summary",
            templateHelpers: {
                accountGroupName: function() {
                    return BMT.accountGroup.get("name")
                },
                addGoalText: function() {
                    return BMT.accountGroup.allowsIRAs() ? "Add Goal or IRA" : "Add Goal"
                },
                showRolloverButton: function() {
                    return BMT.accountGroup.allowsIRAs()
                }
            },
            toolTips: {
                "#addGoalHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                "#transferMoneyHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            regions: {
                overview: "#overview",
                accounts: "#accounts",
                depositMenu: ".deposit"
            },
            events: {
                "click #addGoal": "showAddGoalModal",
                "click #gotoRollover": "gotoRollover",
                "click .deposit-menu button.deposit-button": "toggleDepositMenu"
            },
            onInitialize: function() {
                this.model = BMT.accountGroup
            },
            openRibbon: function() {
                this.options.showTlhIntroRibbon ? BMT.vent.trigger("openDrawer:showTlhRibbon", "learnMore") : this.options.showJointAccountRibbon && BMT.vent.trigger("openDrawer:showJointAccountSignup", "splash")
            },
            onShow: function() {
                BMT.needToShowTrustDocumentBanner() ? this.listenTo(BMT.vent, "banner:emailTrustDocumentsBanner:hidden", this.openRibbon) : this.openRibbon(), this.overview.show(new o({
                    model: this.model
                })), this.accounts.show(new u({
                    collection: this.model.get("accounts").sort()
                })), this.showDepositMenu(), v()
            },
            showAddGoalModal: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "AddGoal",
                    Type: "Button",
                    Location: "Summary"
                }), a.show()
            },
            gotoRollover: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "Rollover",
                    Type: "Button",
                    Location: "Summary"
                }), BMT.router.navigate("rollover", !0, {
                    prevPage: BMT.currentPage
                })
            },
            showDepositMenu: function() {
                var e = new f({
                    model: new c.Model({
                        account: BMT.accounts().at(0),
                        type: "DEPOSIT"
                    })
                });
                this.depositMenu.show(e), this.listenTo(e, "summary:closeDepositMenu", function() {
                    this.$(".deposit-menu .deposit").fadeOut(200)
                }, this)
            },
            toggleDepositMenu: function() {
                var e = this.$(".deposit-menu .deposit"),
                    t = e.is(":visible");
                e[t ? "fadeOut" : "fadeIn"](200);
                if (!t) {
                    var n = this.depositMenu.currentView.account();
                    l.viewExperienceForAccount(n)
                }
                BMT.analytics.track("ElementClicked", {
                    Name: "Deposit",
                    Type: "Button",
                    Location: "Summary"
                })
            }
        })
    }), define("hbs!views/summary/noAccounts", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="welcome-box">\n    <h1>Welcome to BetaSmartz!</h1>\n    <h2>Create a goal to begin</h2>\n\n    <p><button class="create-goal">Create a goal</button></p>\n</div>\n'
        });
        return t.registerPartial("views/summary/noAccounts", n), n
    }), define("views/summary/noAccountsView", ["common/betterment.views", "hbs!views/summary/noAccounts", "components/common/scripts/analytics/analytics", "views/common/addGoalView"], function(e, t, n, r) {
        return e.View.extend({
            template: t,
            className: "no-accounts",
            events: {
                "click .create-goal": "createGoal"
            },
            createGoal: function() {
                n.track("ElementClicked", {
                    Name: "AddGoal",
                    Type: "Button",
                    Location: "Summary"
                }), r.show()
            }
        })
    }), define("hbs!views/summary/welcomeBanner", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/bankLogo"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return '\n                <button class="transfer-button action">Transfer an IRA or old 401(k)</button>\n            '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function",
                h = this;
            s += '<div class="welcome-banner">\n	<div class="sidebar">\n		<div class="circle">\n            ' + l((u = n.bankLogo || t && t.bankLogo, a = {
                hash: {}
            }, u ? u.call(t, "manual", a) : f.call(t, "bankLogo", "manual", a))) + '\n			<p>Funding</p>\n		</div>\n	</div>\n	<div class="content">\n		<h1>', (u = n.taskTitle) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.taskTitle, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</h1>\n		<p class="body">', (u = n.taskBody) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.taskBody, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n		<div class="buttons">\n			<button class="link-button action">Link a bank account</button>\n			', o = n["if"].call(t, t && t.showRolloverButton, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += "\n		</div>\n	</div>\n</div>\n", s
        });
        return t.registerPartial("views/summary/welcomeBanner", n), n
    }), define("views/summary/welcomeBannerView", ["common/betterment.views", "hbs!views/summary/welcomeBanner", "components/common/scripts/analytics/analytics", "modules/modals", "views/linkBankAccount/setupView", "models/visitor"], function(e, t, n, r, i, s) {
        return e.View.extend({
            template: t,
            ui: {
                welcomeBanner: ".welcome-banner",
                linkButton: ".link-button",
                transferButton: ".transfer-button"
            },
            events: {
                "click @ui.linkButton": "onClickLinkButton",
                "click @ui.transferButton": "onClickTransferButton"
            },
            templateHelpers: {
                taskTitle: function() {
                    return BMT.user.isAdvised() ? "Welcome, " + BMT.user.get("firstName") + "." : "Welcome to Betterment, " + BMT.user.get("firstName") + "."
                },
                taskBody: function() {
                    return BMT.user.isAdvised() || !s.getExperiences().hasVariation("banklink_rollover") ? "Get started investing today by linking a bank account or transferring an IRA or old 401(k)." : "Get started investing today by linking to your bank account."
                },
                showRolloverButton: function() {
                    return BMT.user.isAdvised() || !s.getExperiences().hasVariation("banklink_rollover")
                }
            },
            onRender: function() {
                n.track("ElementViewed", {
                    Location: "SummaryView",
                    Name: "WelcomeBanner",
                    Module: "InAppGuide"
                }), BMT.user.isAdvised() || s.getExperiences().getExperimentAndMarkViewed("welcome_banner"), this.listenTo(BMT.vent, "linkBankAccount:bankSaved", this.hide)
            },
            onClickLinkButton: function() {
                n.track("ElementClicked", {
                    Location: "WelcomeBannerView",
                    Name: "LinkBankAccountIntent",
                    Type: "Button",
                    Module: "InAppGuide"
                }), r.show(new i({
                    accountGroup: BMT.accountGroup
                }))
            },
            onClickTransferButton: function() {
                n.track("ElementClicked", {
                    Location: "WelcomeBannerView",
                    Name: "TransferIRAOr401kIntent",
                    Type: "Button",
                    Module: "InAppGuide"
                }), BMT.router.navigate("rollover", !0, {
                    prevPage: BMT.currentPage
                })
            },
            hide: function() {
                this.$el.slideUp(300)
            }
        })
    }), define("views/summary/summaryView", ["common/betterment.views", "hbs!views/summary/summary", "components/common/scripts/analytics/analytics", "views/summary/accountSummaryView", "views/summary/noAccountsView", "services/bankAccountService", "views/summary/welcomeBannerView"], function(e, t, n, r, i, s, o) {
        return e.View.extend({
            template: t,
            regions: {
                summary: ".summary-region",
                banner: ".banner-region"
            },
            onInitialize: function() {
                BMT.accounts().isEmpty() && (this.showInRegion = BMT.unboundedContent)
            },
            onRender: function() {
                this.shouldShowWelcomeBanner() && this.banner.show(new o)
            },
            onShow: function() {
                n.track("PageVisited", {
                    Location: "Summary"
                }), BMT.accounts().isEmpty() ? this.summary.show(new i(this.options)) : this.summary.show(new r(this.options))
            },
            shouldShowWelcomeBanner: function() {
                return s.shouldShowLinkAccount() && BMT.accountGroup.not("funded") && !BMT.needToShowTrustDocumentBanner()
            }
        })
    }), define("hbs!views/transfer/transfer", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return '\n            <button class="rollover blue">Roll over an IRA or 401(k) / 403(b)</button>\n        '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div id="checking-account-operations" class="clearfix"></div>\n\n<div class="clearfix tab-header-wrapper">\n    <h1 class="tab-header">Deposit or withdraw money <span class="multi-ag-only">from ', (u = n.account_group_name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.account_group_name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span></h1>\n</div>\n\n<div id="upcomingTransfers"></div>\n\n<div class="card">\n    <div class="panel header">\n        <div class="goal-selector-region"></div>\n        ', o = n["if"].call(t, t && t.show_rollover_button, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    </div>\n\n    <div class="panel body">\n        <div class="bank-account-not-ready">\n            <div class="message"></div>\n        </div>\n        <div id="top" class="clearfix">\n            <div id="deposit"></div><div id="automaticDeposit"></div>\n        </div>\n        <div id="bottom" class="clearfix">\n            <div id="withdraw"></div><div id="automaticWithdrawal"></div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/transfer/transfer", n), n
    }), define("views/transfer/manualNetIncomeView", ["jquery", "underscore", "backbone", "common/betterment.views", "common/betterment.models", "models/account"], function(e, t, n, r, i, s) {
        return r.ModalView.extend({
            template: "#transfer/manualNetIncome",
            className: "manual-net-income",
            templateHelpers: {
                taxYear: function() {
                    return this.self.options.params.distributionType
                }
            },
            events: {
                "click #ok": "onOK",
                "click #cancel": "onCancel",
                "keydown input[name=amount]": "restrictDecimal",
                "keydown input[name=delta]": "restrictSignedDecimal",
                "keyup input[type=number]": "changedAmount"
            },
            onRender: function() {
                this.$amount = this.$("[name=amount]"), this.$delta = this.$("[name=delta]")
            },
            onShow: function() {
                this.$amount.val(parseFloat(this.options.params.amount).toFixed(2)), this.changedAmount(), this.rivet = rivets.bind(this.$el, {
                    view: this
                })
            },
            getAmount: function() {
                return parseFloat(this.$amount.val()) || 0
            },
            getDelta: function() {
                return parseFloat(this.$delta.val()) || 0
            },
            changedAmount: function(e) {
                this.options.params.amount = this.getAmount() + this.getDelta(), this.updateTotalValidation(), this.trigger("change:amount")
            },
            onOK: function(e) {
                var t = this.options.params;
                this.updateTotalValidation() || (t.amount = this.getAmount(), t.delta = this.getDelta(), this.options.handler && this.options.handler(this))
            },
            updateTotalValidation: function() {
                var e = this.options.params,
                    t = this.model.preValidate("amount", e.amount, e);
                return this.updateFieldValidation(this.$(".total-amount"), t, {
                    position: {
                        my: "right center",
                        at: "left center"
                    }
                }), !!t
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            },
            _totalAmount: function() {
                return this.options.params.amount
            }
        })
    }), define("models/v1/allocationChange", ["models/v1/baseModels"], function(e) {
        var t = {
            relatedModels: ["account"],
            endpoint: function() {
                return this.get("account").getEndpoint() + "/allocations"
            },
            getAccount: function() {
                return this.get("account")
            },
            validation: {
                allocation: {
                    required: !0
                }
            }
        };
        return e.Model.extend(t)
    }), define("services/allocationService", ["underscore", "projector", "common/constants/riskTolerance"], function(e, t, n) {
        return {
            getRecommendedAllocation: function(n, r) {
                var i = e.extend({
                    termYears: n.remainingGoalTerm(),
                    goalType: n.get("goalType"),
                    employmentStatus: BMT.user.get("employmentStatus"),
                    age: BMT.user.getAge()
                }, r);
                return t.recommendedAllocation(i).allocation
            },
            getAllocationRange: function(e) {
                var t = Math.round(100 * Math.max(e - .3, 0)) / 100,
                    n = Math.round(100 * Math.min(e + .3, 1)) / 100;
                return [t, n]
            },
            getRiskToleranceAllocationRange: function(e, t) {
                var r = this.getAllocationRange(e),
                    i = r[1] - r[0],
                    s;
                return t === n.MODERATE ? s = r[0] + (e >= .3 ? .2 : (i - .2) / 2) : t === n.AGGRESSIVE ? s = r[0] + (e > .7 ? .2 + (i - .2) / 2 : i - .2) : s = 0, parseFloat(s.toFixed(2))
            },
            getRiskTolerance: function(e, t) {
                var r = this.getAllocationRange(e),
                    i = this.getRiskToleranceAllocationRange(e, n.MODERATE),
                    s = this.getRiskToleranceAllocationRange(e, n.AGGRESSIVE),
                    o;
                return t < r[0] ? o = "TOO_CONSERVATIVE" : t < i ? o = "CONSERVATIVE" : t <= s ? o = "MODERATE" : t <= r[1] ? o = "AGGRESSIVE" : o = "TOO_AGGRESSIVE", n[o]
            },
            getRiskToleranceForAccount: function(e) {
                var t = this.getRecommendedAllocation(e),
                    n = e.num("allocation");
                return this.getRiskTolerance(t, n)
            }
        }
    }), define("common/slider", ["jquery", "underscore", "common/constants/riskTolerance", "services/allocationService"], function(e, t, n, r) {
        return {
            drawSliderRecommendation: function(t, i) {
                t.find(".track-overlay").length || t.append('<div class="track"></div>');
                var s = t.find(".track");
                s.html('<div class="track-border"></div>');
                var o = r.getAllocationRange(i),
                    u = r.getRiskToleranceAllocationRange(i, n.MODERATE),
                    a = r.getRiskToleranceAllocationRange(i, n.AGGRESSIVE),
                    f = t.width();
                e('<div class="track-overlay dark"></div>').css({
                    "z-index": 1,
                    width: f * (a - u),
                    left: f * u
                }).appendTo(s);
                var l = f * (o[1] - o[0]);
                e('<div class="track-overlay light"></div>').css({
                    width: l,
                    left: f * o[0]
                }).appendTo(s)
            },
            ticksToValue: function(e, n) {
                var r = t.find(n, function(t) {
                    return e < t.max
                });
                if (!r) {
                    BMT.logError("Missing step for ticks: " + e);
                    return
                }
                return (e - r.min) * r.step + r.base
            },
            valueToTicks: function(e, n) {
                var r = t.find(n, function(n, r, i) {
                    return n === t.last(i) ? !0 : e < i[r + 1].base
                });
                if (!r) {
                    BMT.logError("Missing step for value: " + e);
                    return
                }
                return (e - r.base) / r.step + r.min
            }
        }
    }), define("views/transfer/withdrawalAlternativeView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/v1/allocationChange", "components/portfolio/scripts/views/targetPortfolioDonutView", "common/slider"], function(e, t, n, r, i, s, o) {
        return r.ModalView.extend({
            template: "transfer/withdrawalAlternative",
            className: "withdrawal-alternative-modal",
            regions: {
                donutRegion: ".portfolio-donut-region"
            },
            options: {
                amount: 0
            },
            events: {
                "click .change-allocation": "changeAllocation",
                "click .cancel-allocation": "onCancel",
                "click .modal-tertiary-option a": "onTryDifferent"
            },
            onRender: function() {
                this.$allocationSlider = this.slider(".allocation-slider", {
                    min: 0,
                    max: 1,
                    step: .01,
                    value: this.model.proposedAllocation,
                    showOriginal: !0,
                    tooltip: !1
                }), this.$allocationSlider.slider("disable");
                var e = this.model.num("allocation");
                this.$allocationSlider.data("original-value", e), this.donutGraph = new s({
                    model: this.model
                }), this.donutRegion.show(this.donutGraph), this.$(".slider-note .bonds").text(this.formatter.pct(1 - e)), this.$(".slider-note .stocks").text(this.formatter.pct(e))
            },
            onShow: function() {
                o.drawSliderRecommendation(this.$allocationSlider, this.model, this.model.goalTerm());
                var e = {
                        allocation: this.model.num("allocation")
                    },
                    t = {
                        allocation: 0
                    };
                this.$allocationSlider.slider("value", e.allocation);
                var n = function() {
                    jQuery(e).animate(t, {
                        duration: 2e3,
                        step: function(e) {
                            this.$(".slider-note .bonds").text(this.formatter.pct(1 - e)), this.$(".slider-note .stocks").text(this.formatter.pct(e)), this.$allocationSlider.slider("value", e), this.donutGraph.update(e)
                        }.bind(this)
                    })
                }.bind(this);
                setTimeout(n, 500)
            },
            changeAllocation: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Location: "Transfer/CashEquivalentModal",
                    Type: "Button",
                    Name: "ChangeAllocation",
                    Variation: "withdrawal_cash_option_teaser_show_safety_tip",
                    Value: this.options.amount
                });
                var t = new i({
                    account: this.model,
                    allocation: 0
                });
                t.save().done(function() {
                    this.model.set("allocation", 0), BMT.flash("Your allocation has been updated.")
                }.bind(this)).complete(function() {
                    BMT.router.navigate("portfolio", !0), BMT.modal.close(this)
                }.bind(this))
            },
            onCancel: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Location: "Transfer/CashEquivalentModal",
                    Type: "Button",
                    Name: "StayPut",
                    Variation: "withdrawal_cash_option_teaser_show_safety_tip",
                    Value: this.options.amount
                }), BMT.modal.close(this)
            },
            onTryDifferent: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Location: "Transfer/CashEquivalentModal",
                    Type: "Link",
                    Name: "TryDifferentAllocation",
                    Variation: "withdrawal_cash_option_teaser_show_safety_tip",
                    Value: this.options.amount
                }), e.preventDefault(), BMT.router.navigate("advice", !0), BMT.modal.close(this)
            }
        })
    }), define("services/withdrawalService", ["components/transaction/scripts/constants/transactionConstants"], function(e) {
        return {
            isWithdrawAll: function(t, n) {
                return Math.abs(n) >= e.WITHDRAW_ALL_THRESHOLD * t.num("availableBalance")
            },
            getActualWithdrawalAmount: function(e, t) {
                return this.isWithdrawAll(e, t) ? e.num("availableBalance") : t
            }
        }
    }), define("views/common/confirmWithdrawalView", ["jquery", "underscore", "common/betterment.views", "components/account/scripts/constants/accountConstants", "components/transaction/scripts/constants/transactionConstants", "services/withdrawalService"], function(e, t, n, r, i, s) {
        return n.ModalView.extend({
            template: "common/confirmWithdrawal",
            className: "withdrawal-confirmation",
            options: {
                hideCloseButton: !0
            },
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel",
                "click .show-tax-impact": "showTaxImpact",
                "change @ui.agreeRolloverTerms": "toggleWithdrawDisabled"
            },
            ui: {
                agreeRolloverTerms: ".rollover-withdraw-agreement input",
                withdrawButton: "button.ok"
            },
            onInitialize: function() {
                this.account = this.options.account, this.shouldShowWithdrawAll() ? (this.$el.addClass("withdraw-all"), this.template = "common/confirmWithdrawAll") : this.template = "common/confirmWithdrawal"
            },
            shouldShowWithdrawAll: function() {
                var e = s.isWithdrawAll(this.account, this.model.get("amount")),
                    t = this.account.hasLowBalance();
                return e || t
            },
            templateHelpers: {
                isLowBalance: function() {
                    return this.self.account.hasLowBalance()
                },
                lowBalanceThreshold: function() {
                    return r.LOW_BALANCE_THRESHOLD
                },
                isRollover: function() {
                    return this.self.model.get("distributionType") === "ROLL" || this.self.model.get("distributionType") === "EARL"
                },
                goalName: function() {
                    return this.self.account.get("name")
                },
                bankAccountName: function() {
                    return BMT.accountGroup.get("bankAccount").get("description")
                },
                isIRA: function() {
                    return this.self.account.isIRA()
                },
                withdrawalThreshold: function() {
                    return this.pct(i.WITHDRAW_ALL_THRESHOLD)
                }
            },
            onOK: function() {
                this.trigger("proceed", this)
            },
            onCancel: function() {
                this.trigger("cancel", this)
            },
            showTaxImpact: function(e) {
                e.preventDefault(), this.trigger("showTaxImpact", this)
            },
            toggleWithdrawDisabled: function(t) {
                this.ui.withdrawButton.prop("disabled", !e(t.target).is(":checked"))
            }
        })
    }), define("hbs!views/common/noncoveredAlert", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h1>Wait! You have non-covered positions!</h1>\n\n<div class="modal-body">\n    This transaction may sell securities which were transferred in<br/>\n    from an external account with incomplete information.<br/>\n    BetaSmartz will not be able to properly report gains or losses<br/>\n    on the sale of these non-covered securities. Consult your<br/>\n    tax advisor, as you could have additional reporting<br/>\n    obligations on your tax return. Please confirm you wish to<br/>\n    continue with this transaction.<br/>\n</div>\n\n<div class="modal-buttons">\n    <button class="ok">Continue</button>\n    <button class="cancel">Cancel</button>\n</div>'
        });
        return t.registerPartial("views/common/noncoveredAlert", n), n
    }), define("views/common/noncoveredAlertView", ["common/betterment.views", "hbs!views/common/noncoveredAlert"], function(e, t) {
        return e.ModalView.extend({
            template: t,
            className: "withdrawal-confirmation",
            options: {
                hideCloseButton: !0
            },
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel"
            },
            onOK: function() {
                this.trigger("proceed", this), BMT.modal.close(this)
            },
            onCancel: function() {
                this.trigger("cancel", this), BMT.modal.close(this)
            }
        })
    }), define("views/transfer/confirmWithdrawalController", ["marionette", "views/common/confirmWithdrawalView", "views/common/noncoveredAlertView", "views/taxImpact/taxImpactView", "models/v1/withdrawalTaxImpact"], function(e, t, n, r, i) {
        return e.Controller.extend({
            initialize: function(e) {
                this.model = e.model, this.account = BMT.selectedAccount
            },
            go: function() {
                this.account.isIRA() && BMT.accountGroup.hasNonCoveredIRALots() || this.account.isInvestingAccount() && BMT.accountGroup.hasNonCoveredTaxableLots() ? this.showNonCoveredWarning() : this.showConfirm()
            },
            showNonCoveredWarning: function() {
                var e = new n;
                this.listenTo(e, "proceed", this.showConfirm), this.listenTo(e, "cancel", this.onCancel), BMT.modal.show(e)
            },
            showConfirm: function() {
                var e = new t({
                    model: this.model,
                    account: this.account
                });
                this.listenTo(e, "proceed", this.onProceed), this.listenTo(e, "showTaxImpact", this.showTaxImpact, this), this.listenTo(e, "cancel", this.onCancel), BMT.modal.show(e)
            },
            showTaxImpact: function(e) {
                BMT.modal.close(e);
                var t = new i({
                        amount: this.model.get("amount"),
                        account: this.account
                    }),
                    n = new r({
                        model: t,
                        buttons: [{
                            id: "back-to-withdrawal",
                            title: "Back to withdrawal",
                            attributes: {
                                "class": "action",
                                "data-trigger": "showConfirm"
                            }
                        }, {
                            id: "close-and-cancel",
                            title: "Cancel withdrawal",
                            attributes: {
                                "class": "action silver",
                                "data-trigger": "cancel"
                            }
                        }]
                    });
                this.listenTo(n, "cancel navigateAway", this.onCancel), this.listenTo(n, "showConfirm", this.showConfirm), BMT.modal.show(n)
            },
            onCancel: function(e) {
                this.trigger("cancel", e)
            },
            onProceed: function(e) {
                this.trigger("proceed", e)
            }
        })
    }), define("hbs!views/transactionMemo/transactionMemoModal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="lower">\n        <div class="copy">Add optional details to help us improve our advice:</div>\n\n        <form>\n            <div class="question category">\n            ', (s = n.categoryDropdown) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.categoryDropdown, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '\n            </div>\n\n            <div class="question comment">\n                <input type="text" name="comment" maxlength="255" placeholder="Add optional details" />\n            </div>\n\n        </form>\n\n    </div>\n\n    <div class="buttons">\n        <button class="blue save">Save details</button>\n        <button class="silver cancel">Close</button>\n    </div>\n', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="upper">\n    <h2>', (u = n.title) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.title, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</h2>\n    <h3>", (u = n.subtitle) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.subtitle, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</h3>\n</div>\n\n", o = n["if"].call(t, t && t.transactionMemosEnabled, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n\n\n", s
        });
        return t.registerPartial("views/transactionMemo/transactionMemoModal", n), n
    }), define("models/v2/transactionMemo", ["components/common/scripts/models/v2/baseModels"], function(e) {
        var t = {
                WITHDRAWAL: {
                    categories: {
                        funds: "I have an upcoming expense",
                        goals: "My financial goals have changed",
                        relationship: "I'm moving this investment elsewhere",
                        market_down: "I'm expecting unfavorable markets",
                        other: "Other"
                    }
                },
                ALLOCATION_CHANGE: {
                    categories: {
                        goals: "My financial goals have changed",
                        market_up: "I'm expecting favorable markets",
                        market_down: "I'm expecting unfavorable markets",
                        other: "Other"
                    }
                }
            },
            n = {
                WITHDRAW_ALL: "WITHDRAWAL"
            },
            r = {
                endpoint: "/transaction_memos",
                getCategory: function() {
                    return this.getAvailableCategories()[this.get("category")]
                },
                getAvailableCategories: function() {
                    return t[this.getNormalizedTransactionType()].categories
                },
                getNormalizedTransactionType: function() {
                    return n[this.get("transactionType")] || this.get("transactionType")
                }
            };
        return e.Model.extend(r)
    }), define("views/transactionMemo/transactionMemoModalView", ["backbone", "common/betterment.views", "hbs!views/transactionMemo/transactionMemoModal", "models/v2/transactionMemo", "models/visitor"], function(e, t, n, r, i) {
        var s = {
            WITHDRAWAL: {
                title: "Withdrawal Confirmed",
                subtitle: "Please allow 4-5 business days for transfers to complete."
            },
            ALLOCATION_CHANGE: {
                title: "Allocation Updated Successfully"
            }
        };
        return t.ModalView.extend({
            template: n,
            className: "transaction-memo",
            ui: {
                categorySelector: ".category-selector",
                comment: ".comment input"
            },
            events: {
                "change @ui.categorySelector": "changedCategory",
                "click .opt-out": "optOut",
                "click .cancel": "onCancel",
                "click .save": "onSave"
            },
            templateHelpers: {
                title: function() {
                    return s[this.self.options.transactionType].title
                },
                subtitle: function() {
                    return s[this.self.options.transactionType].subtitle
                },
                categoryDropdown: function() {
                    return this.build_dropdown_menu(this.self.model.getAvailableCategories(), {
                        "class": "category-selector",
                        name: "category",
                        value: "unspecified"
                    }, {
                        title: "Add a category "
                    })
                },
                transactionMemosEnabled: function() {
                    return i.hasVariation("transaction_memos_enabled")
                }
            },
            onInitialize: function() {
                this.model = new r({
                    transactionType: this.options.transactionType
                }), this.model.setIdParam("userTransactionId", {
                    bettermentdbUserTransactionId: this.options.transactionId
                })
            },
            optOut: function() {
                BMT.modal.close(this)
            },
            onCancel: function() {
                BMT.modal.close(this)
            },
            onSave: function() {
                this.block(), this.model.save(e.Syphon.serialize(this)), BMT.modal.close(this)
            }
        })
    }), define("models/v1/withdrawal", ["backbone", "models/v1/baseModels", "components/common/scripts/util/formatter", "components/transaction/scripts/constants/transactionConstants"], function(e, t, n, r) {
        var i = {
            relatedModels: ["account"],
            defaults: {
                userEnteredNetIncome: !1
            },
            endpoint: function() {
                return this.get("account").getEndpoint() + "/withdrawals"
            },
            validation: {
                amount: function(e, t, i, s) {
                    var o = function(e) {
                            return e % 1 ? 2 : 0
                        },
                        u = this.get("availableBalanceForWithdrawal") < r.MINIMUM ? .01 : r.MINIMUM,
                        a = this.get("availableBalanceForWithdrawal");
                    return e < u ? "The minimum amount is {0}".format(n.money(u, o(u))) : e > a ? "The maximum amount is {0}".format(n.money(a, o(a))) : !1
                },
                distributionType: function(e, t, n, r) {
                    return this.get("account").isIRA() && !e ? "Distribution type is required" : !1
                }
            },
            save: function(t, n) {
                return this.unset("availableBalanceForWithdrawal"), e.Model.prototype.save.call(this, t, n)
            }
        };
        return t.Model.extend(i)
    }), define("views/transfer/withdrawView", ["jquery", "underscore", "backbone", "common/betterment.views", "common/betterment.models", "views/transfer/manualNetIncomeView", "common/betterment.models", "models/contribution", "components/common/scripts/models/appData", "views/common/alertView", "views/transfer/withdrawalAlternativeView", "models/visitor", "views/transfer/confirmWithdrawalController", "views/taxImpact/taxImpactView", "models/v1/withdrawalTaxImpact", "components/common/scripts/analytics/analytics", "views/transactionMemo/transactionMemoModalView", "models/v1/withdrawal", "services/withdrawalService"], function(e, t, n, r, i, s, i, o, u, a, f, l, c, h, p, d, v, m, g) {
        var y = 500,
            b = .9,
            w = "Indirect rollovers must be completed within 60 days. See IRS Publication 590 for more details.",
            E = "Your available balance may be different than your current balance because it accounts for pending withdrawals, conditional bonuses, and prorated fees.",
            S = "Total amount of regular IRA contributions for the selected tax year. This amount may be more or less than your current balance if due to market movement and other amounts such as contributions from a different year, rollovers or conversions.",
            x = {
                my: "left center",
                at: "right center"
            };
        return r.View.extend({
            template: "transfer/withdraw",
            tagName: "div",
            options: {},
            toolTips: {
                "#withdrawHelp": {
                    position: {
                        my: "bottom left",
                        at: "top left"
                    }
                },
                "#availableHelp": {
                    position: x
                },
                "#distributionHelp": {
                    position: x
                },
                "#excessContributionHelp": {
                    position: x
                }
            },
            ui: {
                amountInput: "input[name=amount]",
                distributionTypeSelector: ".distribution-type-selector",
                netIncomeCheckbox: "[name=netIncome]"
            },
            templateHelpers: {
                account: function() {
                    return this.self.account()
                },
                build_distribution_selector: function() {
                    var e = u.getInstance().distributionsForSelect(BMT.user);
                    return this.build_dropdown_menu(e, {
                        name: "distributionType",
                        "class": "distribution-type-selector"
                    })
                }
            },
            events: {
                "keyup @ui.amountInput": "withdrawalAmountChanged",
                "click #transferButton": "transfer",
                "click .show-tax-impact": "showTaxImpact",
                "change @ui.distributionTypeSelector": "distributionTypeChanged",
                "change @ui.netIncomeCheckbox": "netIncomeChanged",
                "click .showWithdrawalAlternative": "showWithdrawalAlternative"
            },
            account: function() {
                return this.model
            },
            onRender: function() {
                this.rivet = rivets.bind(this.$el, {
                    view: this
                })
            },
            onShow: function() {
                this.withdrawal = new m({
                    account: this.model
                }), this.applyValidation({
                    extraFields: ["amount"],
                    extraModels: {
                        withdrawal: function() {
                            return this.withdrawal
                        }
                    },
                    before: t.bind(function(e) {
                        return !!(e || this.$("input[name=amount]").val().length > 0)
                    }, this)
                }), this.distributionTypeChanged(), this.options.disabled && this.block(this.$el, "none")
            },
            withdrawalAmountChanged: function() {
                var e = this.getWithdrawalAmount(),
                    t = this._shouldShowMarketTimingProTip(e),
                    n = this.$("#transferWithdrawalSafetyTip");
                !this.hasFiredAnalyticsForSafetyTip && t && (this.hasFiredAnalyticsForSafetyTip = !0, d.track("ElementViewed", {
                    Location: "Transfer",
                    Type: "ProTip",
                    Name: "CashEquivalent",
                    Value: e
                })), t ? n.slideDown() : n.slideUp(), this.toggleTaxImpactButton()
            },
            distributionTypeChanged: function(e) {
                var n = this.ui.distributionTypeSelector.val(),
                    r = !t.isNaN(parseInt(n)),
                    i = n === "ROLL";
                this.$(".withdraw-amount-box").toggle(!i), this.$(".withdraw-indirect-ira-info").toggle(i), this.$(".excess-checkbox").toggle(r), this.netIncomeChanged(), this.hideAllValidation()
            },
            netIncomeChanged: function(e) {
                var t = this.ui.netIncomeCheckbox.is(":checked"),
                    n = !!parseInt(this.ui.distributionTypeSelector.val());
                this.build_tooltip("#availableHelp", {
                    position: x,
                    content: n && t ? S : E
                }), this.trigger("change:netIncome")
            },
            showWithdrawalAlternative: function() {
                var e = this.getWithdrawalAmount();
                d.track("ElementClicked", {
                    Location: "Transfer",
                    Type: "Button",
                    Name: "ShowMeCashEquivalent",
                    Value: e
                });
                var t = new f({
                    model: this.model,
                    amount: e
                });
                BMT.modal.show(t)
            },
            transfer: function(e) {
                var t = this.getWithdrawalAmount();
                this.withdrawal.set({
                    amount: t,
                    distributionType: this.ui.distributionTypeSelector.val(),
                    userEnteredNetIncome: !this.ui.netIncomeCheckbox.is(":checked"),
                    availableBalanceForWithdrawal: this._availableBalance()
                }), this._shouldShowMarketTimingProTip(t) && d.track("ElementClicked", {
                    Location: "Transfer",
                    Type: "Button",
                    Name: "Withdraw",
                    Value: t
                });
                if (!this.withdrawal.validate()) {
                    this.showedWithdrawAll = !1;
                    var n = [this.getPrematureBonusWithdrawalModal, this.getAutomaticNetIncomeModal, this.getManualNetIncomeModal, this.getSpecialDistributionModal],
                        r = this,
                        i = !1;
                    (function s(e, t) {
                        if (e >= n.length) i ? r.sendWithdrawal(r.withdrawal, t) : (n.push(r.getPleaseConfirmModal), i = !0, s(e));
                        else {
                            var o = n[e++](r.withdrawal.attributes);
                            o ? (t && BMT.modal.close(t), i = !0, o(function(t) {
                                s(e, t)
                            })) : s(e, t)
                        }
                    })(0, null)
                } else this.triggerAllValidation(this.withdrawal.attributes)
            },
            getWithdrawalAmount: function() {
                return this.ui.amountInput.numberVal() || 0
            },
            getPrematureBonusWithdrawalModal: function(e) {
                var t = BMT.accountGroup.get("withheldBonus"),
                    n = g.getActualWithdrawalAmount(this.model, this.getWithdrawalAmount());
                return t && t.doesWithdrawalPushBonusBelowThreshold(n) ? function(n) {
                    var r = this.formatter.money,
                        i = "Are you sure you want to authorize a withdrawal of " + r(e.amount) + ' from <span class="single-ag-only">your BetaSmartz account</span><span class="multi-ag-only">' + BMT.accountGroup.get("name") + "</span> to your account at " + BMT.accountGroup.get("bankAccount").get("description") + "?<br /><br />In order to keep your signup bonus of " + t.get("prizeDescription") + " you must maintain " + r(t.num("requirementAmount")) + " of your initial deposit for another " + t.num("withholdingDaysRemaining") + " days." + (e.distributionType === "ROLL" ? "<br /><br />" + w : "");
                    BMT.alert({
                        icon: "warning",
                        title: "Please Confirm Transfer",
                        body: i,
                        buttons: [{
                            id: "yes",
                            title: "Give Up Bonus"
                        }, {
                            id: "no",
                            title: "Cancel",
                            attributes: {
                                "class": "cancel"
                            }
                        }],
                        noClose: !0,
                        handler: function(e) {
                            e === "yes" ? n(this) : BMT.modal.close(this)
                        }
                    })
                }.bind(this) : !1
            },
            getAutomaticNetIncomeModal: function(e) {
                var t = e.distributionType;
                if (!e.userEnteredNetIncome && !this.showedWithdrawAll && parseInt(t)) {
                    var n = this.account().get("taxYearContributions").where({
                            year: t
                        })[0],
                        r = n.calculateAmountWithNetIncome(e.amount);
                    return function(t) {
                        BMT.alert({
                            icon: "warning",
                            title: "Withdraw Excess Contributions",
                            body: "Since you first made this contribution, the amount has " + (r >= e.amount ? "increased" : "decreased") + " to " + this.formatter.money(r) + " due to market changes. The excess contribution " + "returned to your linked account will be " + this.formatter.money(r) + ". " + "Any income will be taxable in the year of the original contribution. " + "For more information, see IRS Publication 590 or speak with a tax advisor.",
                            buttons: [{
                                id: "ok",
                                title: "Transfer"
                            }, {
                                id: "cancel",
                                title: "Cancel",
                                attributes: {
                                    "class": "cancel"
                                }
                            }],
                            noClose: !0,
                            handler: function(n) {
                                n === "ok" ? (e.delta = parseFloat((r - e.amount).toFixed(2)), t(this)) : BMT.modal.close(this)
                            }
                        })
                    }.bind(this)
                }
                return !1
            },
            getManualNetIncomeModal: function(e) {
                var t = e.distributionType;
                return e.userEnteredNetIncome && !this.showedWithdrawAll && parseInt(t) ? function(t) {
                    s.show({
                        model: this.model,
                        handler: t,
                        params: e
                    })
                }.bind(this) : !1
            },
            getSpecialDistributionModal: function(e) {
                var t = e.distributionType,
                    n = t === "BENE",
                    r = t === "DISA";
                return this.account().isIRA() && (n || r) ? function(e) {
                    var t = n ? "Beneficiary" : "Disability",
                        r = n ? "certified copy of the account holder's death certificate." : "copy of a physician's statement or letter from the Age Pension office confirming your disability.";
                    BMT.alert({
                        width: 450,
                        icon: "warning",
                        title: "Extra Documentation Required",
                        body: "You've chosen a " + t + " distribution, which will require verification by the IRS " + "in order to avoid penalty. We may contact you in the future to collect a " + r,
                        buttons: [{
                            id: "yes",
                            title: "Continue as " + t + " distribution"
                        }, {
                            id: "no",
                            title: "Cancel",
                            attributes: {
                                "class": "cancel"
                            }
                        }],
                        noClose: !0,
                        handler: function(t) {
                            t === "yes" ? e(this) : BMT.modal.close(this)
                        }
                    })
                } : !1
            },
            getPleaseConfirmModal: function(e) {
                var t = g.isWithdrawAll(this.model, e.amount),
                    n = this.account().isLowBalance();
                if (t || n) this.showedWithdrawAll = !0;
                return function(t) {
                    var n = new i.Model(e),
                        r = new c({
                            model: n
                        });
                    r.on("cancel", function(e) {
                        BMT.modal.close(e), r.destroy()
                    }), r.on("proceed", function(e) {
                        t(e), r.destroy()
                    }), r.go()
                }.bind(this)
            },
            sendWithdrawal: function(e, t) {
                t && t.block(), e.save().then(function(e) {
                    d.track("WithdrawalSubmitted", {
                        Location: "Transfer",
                        Value: e.amount,
                        GoalId: this.account().get("id"),
                        GoalType: this.account().get("goalType")
                    }), BMT.refreshAccounts(function() {
                        var e = function() {
                            this.off("render", e), this.distributionTypeChanged(), t && BMT.modal.close(t)
                        }.bind(this);
                        this.on("render", e), this.render(), BMT.vent.trigger("transfer:refreshDepositView")
                    }.bind(this)), this.$("input").val(""), v.show({
                        transactionType: "WITHDRAWAL",
                        transactionId: e.transactionId
                    })
                }.bind(this)).fail(function() {
                    t && BMT.modal.close(t)
                })
            },
            _shouldShowMarketTimingProTip: function(e) {
                return e >= y && e >= this._availableBalance() * b
            },
            _availableBalance: function() {
                var e = this.ui.distributionTypeSelector.val(),
                    t = !this.ui.netIncomeCheckbox.is(":checked"),
                    n;
                if (!this.account().isIRA() || !parseInt(e) || t) n = this.account().num("availableBalanceForWithdrawal");
                else {
                    var r = this.account().get("taxYearContributions").where({
                        year: e
                    })[0].get("contributions");
                    n = r.sum("amount") - this.account().get("distributions")[e]
                }
                return n
            },
            toggleTaxImpactButton: function() {
                var e = this.getWithdrawalAmount(),
                    t = new m({
                        account: this.model,
                        amount: e
                    });
                if (!this.account().isIRA()) {
                    var n = !t.validate();
                    n && !this.$(".show-tax-impact").is(":visible") && d.track("ElementViewed", {
                        Name: "TaxImpact",
                        Type: "Button",
                        Module: "Withdraw",
                        Location: "Transfer"
                    }), this.$(".show-tax-impact").toggle(n)
                }
            },
            showTaxImpact: function() {
                var e = g.getActualWithdrawalAmount(this.model, this.getWithdrawalAmount()),
                    t = new p({
                        amount: e,
                        account: this.account()
                    });
                BMT.modal.show(new h({
                    model: t
                }))
            }
        })
    }), define("hbs!views/transfer/confirmBankAccount", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i;
                r += "\n                ", i = n["if"].call(e, e && e.hasDepositDatePassed, {
                    hash: {},
                    inverse: f.program(4, h, t),
                    fn: f.program(2, c, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            ", r
            }

            function c(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <p>We posted two small deposits between $0.01 and $0.99 to your linked bank account on\n                        <span class="bold-text">\n                            ', (s = n.formatDepositDate) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.formatDepositDate, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + ".\n                        </span>\n                    </p> \n                    <p>Please enter the two amounts below to complete verification. The amounts can be entered in any order</p>\n                ", r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <p>You will see two small deposits between $0.01 and $0.99 in your linked bank account on\n                        <span class="bold-text">\n                            ', (s = n.formatDepositDate) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.formatDepositDate, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + ".\n                        </span>\n                    </p>\n                    <p>When your receive the deposits in your bank account, please enter the two amounts below to complete verification. The amounts can be entered in any order</p>\n                ", r
            }

            function p(e, t) {
                return "\n                <p>We posted two small deposits between $0.01 and $0.99 to your linked bank account.</p>\n\n                <p>When your receive the deposits in your bank account, please enter the two amounts below to complete verification. The amounts can be entered in any order</p>\n            "
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="panel card body link-checking-account-verify-info verify clearfix">\n    \n    <div class="verify-bank-icon">\n\n    </div>\n\n    <div class="instructions">\n        <div class="clearfix">\n            <h3>Verify Bank Account</h3>\n\n            ', o = n["if"].call(t, t && t.shouldShowExpectedDate, {
                hash: {},
                inverse: f.program(6, p, i),
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n            <form action="#" method="POST" class="inputs clearfix left">\n                <div class="deposit left">\n                    $0.<input  type="text" maxlength="2" name="verDep1"/>\n                </div>\n                <div class="deposit left">\n                    $0.<input  type="text" maxlength="2" name="verDep2"/>\n                </div>\n                <button class="blue left verify-account">Verify</button>\n            </form>\n        </div>\n    </div>\n    \n</div>\n', s
        });
        return t.registerPartial("views/transfer/confirmBankAccount", n), n
    }), define("views/transfer/confirmBankAccountView", ["jquery", "underscore", "backbone", "common/betterment.views", "hbs!views/transfer/confirmBankAccount", "models/bankAccount"], function(e, t, n, r, i, s) {
        return r.View.extend({
            template: i,
            tagName: "div",
            id: "confirmBankAccount",
            templateHelpers: {
                shouldShowExpectedDate: function() {
                    return this.self.model.has("expectedVerificationDepositDate")
                },
                formatDepositDate: function() {
                    return this.dayMonthDateYear(this.self.model.date("expectedVerificationDepositDate"))
                },
                hasDepositDatePassed: function() {
                    var e = this.self.model.date("expectedVerificationDepositDate");
                    return e.isBeforeToday()
                }
            },
            events: {
                "keydown input": "restrictNumeric",
                "click .verify-account": "submit"
            },
            onInitialize: function() {
                this.account = this.options.account
            },
            onShow: function() {
                this.model.set("id", 1, {
                    forceUpdate: !0
                }), this.applyValidation()
            },
            onDestroy: function() {
                this.removeExtraAttributes()
            },
            submit: function(e) {
                var t = n.Syphon.serialize(this),
                    r = this;
                this.model.validate(t) ? this.triggerAllValidation() : (this.block(), this.model.save(t, {
                    forceUpdate: !0,
                    success: function(e, t) {
                        r.removeExtraAttributes(), r.model.set("confirmed", !0, {
                            forceUpdate: !0
                        }), BMT.firePixel(t.pixel), BMT.analytics.track("BankConfirmSucceeded", {
                            Location: "Transfer"
                        });
                        var n = "Congratulations, the link to your " + r.model.get("description") + " account is now active!";
                        BMT.flash(n), r.trigger("complete")
                    },
                    complete: function() {
                        r.unblock()
                    },
                    error: function() {
                        BMT.analytics.track("BankConfirmFailed", {
                            Location: "Transfer"
                        })
                    }
                }))
            },
            removeExtraAttributes: function() {
                this.model.unset("id", {
                    forceUpdate: !0
                }), this.model.unset("verDep1", {
                    forceUpdate: !0
                }), this.model.unset("verDep2", {
                    forceUpdate: !0
                })
            }
        })
    }), define("hbs!views/transfer/automaticDeposit", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/autoTransactionIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "on"
            }

            function d(e, t) {
                return "off"
            }

            function v(e, t) {
                return "\n                     Auto-Deposit On\n                "
            }

            function m(e, t) {
                return "\n                     Auto-Deposit Off\n                "
            }

            function g(e, t) {
                return "";
                var r = "",
                    i, s, o;
                r += '\n                <button class="round goal-status smart-deposit-settings ', (s = n.smartDepositButtonClass) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.smartDepositButtonClass, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " ", i = n.unless.call(e, e && e.smartDepositEligible, {
                    hash: {},
                    inverse: c.noop,
                    fn: c.program(10, y, t)
                });
                if (i || i === 0) r += i;
                r += '" >\n                    ' + l((s = n.autoTransactionIcon || e && e.autoTransactionIcon, o = {
                    hash: {}
                }, s ? s.call(e, "smartDeposit", o) : h.call(e, "autoTransactionIcon", "smartDeposit", o))) + "\n                    ", i = n["if"].call(e, e && e.smartDepositEnabled, {
                    hash: {},
                    inverse: c.program(14, w, t),
                    fn: c.program(12, b, t)
                });
                if (i || i === 0) r += i;
                r += "\n                    ", i = n.unless.call(e, e && e.smartDepositEnabled, {
                    hash: {},
                    inverse: c.noop,
                    fn: c.program(16, E, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                </button>\n            ", r
            }

            function y(e, t) {
                return "disabled"
            }

            function b(e, t) {
                return "\n                        SmartDeposit On\n                    "
            }

            function w(e, t) {
                return "\n                        SmartDeposit Off\n                    "
            }

            function E(e, t) {
                var r = "",
                    i, s;
                return r += '\n                        <div class="help-content">\n                            ', (s = n.eligibilityMessage) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.eligibilityMessage, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n                        </div>\n                    ", r
            }

            function S(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div>\n            <span class="bold-text next-transfer">Next Transfer: </span>Auto deposit ', (s = n.nextTransfer) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.nextTransfer, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "\n        </div>\n    ", r
            }

            function x(e, t) {
                return '\n    <div class="info-tip inactive clearfix">\n        <div class="icon">\n            <div class="lightbulb-tip-icon"></div>\n        </div>\n        <div class="text">\n            Auto-Deposit invest your recurring transfers automatically.<br>\n         </div>\n    </div>\n'
            }

            function T(e, t) {
                return '\n    <div class="info-tip inactive clearfix">\n        <div class="icon">\n            <div class="lightbulb-tip-icon"></div>\n        </div>\n        <div class="text">\n            Automatic deposits save you time and taxes.<br>\n            \n        </div>\n    </div>\n'
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<section class="clearfix">\n    <div class="left title clearfix">\n        <div class="transfer-header bold-text" >\n            Deposit Settings\n        </div>\n        <div class="transfer-type-status ', o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.program(3, d, i),
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '">\n            <button class="round goal-status show-settings ', (u = n.automaticTransactionButtonClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.automaticTransactionButtonClass, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                ' + l((u = n.autoTransactionIcon || t && t.autoTransactionIcon, a = {
                hash: {}
            }, u ? u.call(t, "autoDeposit", a) : h.call(t, "autoTransactionIcon", "autoDeposit", a))) + "\n                ", o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.program(7, m, i),
                fn: c.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n                <div class="help-content">\n                    <p>Use automatic deposit to set up free recurring transfers from your linked account.</p>\n                    <p>You choose the amount and frequency and can change these or discontinue at any time.</p>\n                </div>\n            </button>\n\n            ', o = n["if"].call(t, t && t.hasSmartDepositsFeature, {
                hash: {},
                inverse: c.noop,
                fn: c.program(9, g, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </div>\n    </div>\n</section>\n\n\n<div class="next-transactions">\n    ', o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.noop,
                fn: c.program(18, S, i)
            });
            if (o || o === 0) s += o;
            s += "\n</div>\n\n", o = n["if"].call(t, t && t.showSmartDepositTip, {
                hash: {},
                inverse: c.noop,
                fn: c.program(20, x, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n", o = n["if"].call(t, t && t.showAutomaticDepositTip, {
                hash: {},
                inverse: c.noop,
                fn: c.program(22, T, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/transfer/automaticDeposit", n), n
    }), define("views/transfer/automaticTransactionView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/automaticDeposit", "views/transfer/automaticTransactionSettingsModalView"], function(e, t, n, r, i, s) {
        return r.View.extend({
            templateHelpers: {
                autoTransactionEnabled: function() {
                    return this.self.autoTransactionEnabled()
                },
                automaticTransactionButtonClass: function() {
                    return this.autoTransactionEnabled() ? "green" : "off"
                },
                nextTransfer: function() {
                    var e = this.self.model,
                        n = !!e && e.nextTransactionDateOrEstimate(),
                        r = "";
                    if (!t.isNull(n)) {
                        var i = e.getNextTransactionAmount();
                        r = this.money(i) + " on " + n.toString("dddd, MMMM dd, yyyy") + "."
                    }
                    return r
                }
            },
            toolTips: {
                ".show-settings": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            events: {
                "click button.show-settings": "showSettingsModal"
            },
            onInitialize: function() {
                this.model || (this.model = this.getModelInstance(), this.model.set("account", this.options.account))
            },
            autoTransactionEnabled: function() {
                var e = this.model;
                return !!e && e.get("enabled")
            },
            showSettingsModal: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: this.model.transactionType.capitalize() + "Settings",
                    Type: "Button",
                    Location: "Transfer"
                }), BMT.modal.show(this.getAutomaticTransactionSettingsView())
            },
            getAutomaticTransactionSettingsView: function() {
                var e = this.model.get("account"),
                    t = {
                        model: this.model,
                        account: e
                    };
                this.model.isNew() && this.model.isAutomaticDeposit() && (t.recommended = e.recommendedMonthlyDeposit());
                var n = new s({
                    SettingsViewClass: this.getSettingsModalClass(),
                    settingsViewOptions: t
                });
                return this.listenTo(n, "destroy", function() {
                    this.render()
                }), n
            },
            getModelInstance: function() {
                throw new Error("getModelInstance is not implemented.")
            },
            getSettingsModalClass: function() {
                throw new Error("getSettingsModalClass is not implemented.")
            }
        })
    }), define("hbs!views/transfer/smartDepositVideoModal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<iframe width="560" height="315" src="//www.youtube.com/embed/AKppcRZYo6w?modestbranding=1&rel=0&showinfo=0&autoplay=1&autohide=1" frameborder="0" allowfullscreen></iframe>\n<div class="actions">\n    <button>Set up SmartDeposit</button>\n</div>\n'
        });
        return t.registerPartial("views/transfer/smartDepositVideoModal", n), n
    }), define("views/transfer/smartDepositVideoModalView", ["common/betterment.views", "hbs!views/transfer/smartDepositVideoModal", "models/visitor"], function(e, t, n) {
        return e.ModalView.extend({
            className: "tlh-video-modal",
            template: t,
            events: {
                "click button": "setupSmartDeposit"
            },
            onInitialize: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "SmartDepositVideo",
                    Location: "Transfer"
                }), n.getExperiences().getExperimentAndMarkViewed("smart_deposit_video_teaser")
            },
            setupSmartDeposit: function() {
                this.trigger("setupSmartDeposit"), BMT.modal.close(this)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("views/transfer/automaticDepositView", ["underscore", "common/errorHandler", "modules/modals", "hbs!views/transfer/automaticDeposit", "services/accountService", "models/automaticDeposit", "models/visitor", "views/transfer/automaticTransactionView", "views/transfer/automaticDepositSettingsView", "views/common/smartDepositSettingsView", "views/transfer/smartDepositVideoModalView"], function(e, t, n, r, i, s, o, u, a, f, l) {
        return u.extend({
            template: r,
            events: e.extend({}, u.prototype.events, {
                "click button.smart-deposit-settings:not(.disabled)": "showSmartDepositsModal",
                "click .smart-deposit-video": "showSmartDepositVideo"
            }),
            templateHelpers: e.extend({}, u.prototype.templateHelpers, {
                hasSmartDepositsFeature: function() {
                    return this.self.hasSmartDepositsFeature()
                },
                smartDepositEligible: function() {
                    return this.self.getAccount().isSmartDepositEligible()
                },
                smartDepositEnabled: function() {
                    return this.self.smartDepositEnabled()
                },
                smartDepositButtonClass: function() {
                    return this.smartDepositEnabled() ? "green" : "off"
                },
                automaticDepositButtonClass: function() {
                    return this.autoTransactionEnabled() ? "green" : "off"
                },
                nextSmartDepositTransactionDate: function() {
                    return this.self.getAccount().get("smartDepositConfig").date("nextTransactionOn")
                },
                eligibilityMessage: function() {
                    return this.self.getAccount().smartDepositEligibilityMessage()
                },
                showSmartDepositTip: function() {
                    return this.self.infoTipVersion() === "smart_deposit"
                },
                showAutomaticDepositTip: function() {
                    return this.self.infoTipVersion() === "auto_deposit"
                }
            }),
            onInitialize: function() {
                u.prototype.onInitialize.apply(this), this.listenTo(i.getAllAccounts(), "sync", this.render)
            },
            onRender: function() {
                this.getAccount().get("smartDepositConfig").not("enabled") && this.build_tooltip(".smart-deposit-settings", {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }), this.infoTipVersion() === "smart_deposit" && BMT.analytics.track("ElementViewed", {
                    Name: "SmartDepositVideoTeaser",
                    Location: "Transfer"
                })
            },
            showSmartDepositVideo: function(e) {
                e.preventDefault();
                var t = new l;
                this.listenTo(t, "setupSmartDeposit", this.showSmartDepositsModal), BMT.modal.show(t)
            },
            getAccount: function() {
                return this.model.get("account")
            },
            getSettingsModalClass: function() {
                return a
            },
            getModelInstance: function() {
                return new s
            },
            showSmartDepositsModal: function() {
                var e = this.getAccount().get("smartDepositConfig");
                BMT.user.is("advisorSession") && e.not("enabled") ? BMT.alert(t.getErrorContentForCode("UNAUTHORIZED")) : (this.listenToOnce(e, "change:enabled", BMT.refreshAccounts), n.show(f.withConfig(e)))
            },
            hasSmartDepositsFeature: function() {
                return o.hasVariation("smart_deposits_setup_enabled")
            },
            smartDepositEnabled: function() {
                return this.getAccount().get("smartDepositConfig").is("enabled")
            },
            infoTipVersion: function() {
                return this.smartDepositEnabled() && this.autoTransactionEnabled() ? null : this.smartDepositEnabled() ? "auto_deposit" : this.autoTransactionEnabled() ? o.hasVariation("show_smart_deposit_video") ? "smart_deposit" : null : o.hasVariation("show_smart_deposit_video") ? "smart_deposit" : "auto_deposit"
            }
        })
    }), define("hbs!views/transfer/automaticWithdrawal", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/autoTransactionIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "on"
            }

            function d(e, t) {
                return "off"
            }

            function v(e, t) {
                return "\n                    Auto-Withdrawal On\n                "
            }

            function m(e, t) {
                return "\n                    Auto-Withdrawal Off\n                "
            }

            function g(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div>\n            <span class="bold-text next-transfer">Next Transfer: </span>Auto withdraw ', (s = n.nextTransfer) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.nextTransfer, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " Please allow 4-5 business days for transfers to complete.\n        </div>\n    ", r
            }

            function y(e, t) {
                return '\n    <div class="info-tip inactive clearfix">\n        <div class="arrow"></div>\n        <div class="icon">\n            <div class="lightbulb-tip-icon"></div>\n        </div>\n        <div class="text">\n            Turning on automatic withdrawal creates a regular income stream to your linked account, and also rebalances your portfolio in a tax efficient way.\n        </div>\n    </div>\n'
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<section class="clearfix">\n    <div class="left title clearfix">\n        <div class="transfer-header bold-text" >\n            Withdrawal Settings\n        </div>\n\n        <div class="transfer-type-status ', o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.program(3, d, i),
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '">\n            <button class="round goal-status show-settings ', (u = n.automaticTransactionButtonClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.automaticTransactionButtonClass, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                ' + l((u = n.autoTransactionIcon || t && t.autoTransactionIcon, a = {
                hash: {}
            }, u ? u.call(t, "autoWithdrawal", a) : h.call(t, "autoTransactionIcon", "autoWithdrawal", a))) + "\n                ", o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.program(7, m, i),
                fn: c.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n            <div class="help-content">\n                <p>\n                    Use automatic withdrawal to set up a free recurring income stream from this goal to your linked account.  Withdrawals will only process if the goal balance covers the amount.\n                </p>\n            </div>\n            </button>\n        </div>\n    </div>\n</section>\n\n<div class="next-transactions">\n    ', o = n["if"].call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.noop,
                fn: c.program(9, g, i)
            });
            if (o || o === 0) s += o;
            s += "\n</div>\n\n", o = n.unless.call(t, t && t.autoTransactionEnabled, {
                hash: {},
                inverse: c.noop,
                fn: c.program(11, y, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/transfer/automaticWithdrawal", n), n
    }), define("views/transfer/automaticWithdrawalView", ["underscore", "hbs!views/transfer/automaticWithdrawal", "models/automaticWithdrawal", "views/transfer/automaticTransactionView", "views/transfer/automaticWithdrawalSettingsView"], function(e, t, n, r, i) {
        return r.extend({
            template: t,
            getSettingsModalClass: function() {
                return i
            },
            getModelInstance: function() {
                return new n
            }
        })
    }), define("views/transfer/iraInfoTipsView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/common/addGoalView", "components/common/scripts/models/appData", "components/common/scripts/services/dateService"], function(e, t, n, r, i, s, o) {
        return r.View.extend({
            template: "transfer/iraInfoTips",
            id: "iraInfoTips",
            events: {
                "click .open-ira-goal": "openIRAGoal",
                "click .create-ira": "createIRA"
            },
            templateHelpers: {
                infoTipContent: function() {
                    var e = this.self.model,
                        t = new Date <= s.getInstance().date("taxDay"),
                        n = (new Date).getFullYear(),
                        r = n - 1;
                    return e.isIRA() ? t ? "You can still contribute to your SMSF for " + r + ". You can also make contributions for " + n + '. <a href="' + this.brochure_url("resources/retirement/401ks-and-iras/the-early-bird-gets-705-more/") + '" target="_blank">Read why</a> you shouldn\'t wait.' : "The " + r + " IRA contribution deadline has passed, but you can still contribute for " + n + '. <a href="' + this.brochure_url("resources/retirement/401ks-and-iras/the-early-bird-gets-705-more/") + '" target="_blank">Read why</a> you shouldn\'t wait.' : !e.isIRA() && BMT.accountGroup.hasIRAGoal() ? t ? "You can still contribute to your SMSF for " + r + '. You can also make contributions to <a href="#" class="bold-text open-ira-goal">your SMSF</a> for ' + n + '. <a href="' + this.brochure_url("resources/retirement/401ks-and-iras/the-early-bird-gets-705-more/") + '" target="_blank">Read why</a> you shouldn\'t wait.' : "The " + r + ' IRA contribution deadline has passed, but you can still contribute to <a href="#" class="bold-text open-ira-goal">your SMSF</a> for ' + n + '. <a href="' + this.brochure_url("resources/retirement/401ks-and-iras/the-early-bird-gets-705-more/") + '" target="_blank">Read why</a> you shouldn\'t wait.' : t ? "Save taxes by making IRA Contributions for " + r + " and " + n + '. <a href="#" class="bold-text create-ira">Open an IRA</a> now.' : "Save taxes by making an IRA Contribution for " + n + '. <a href="#" class="bold-text create-ira">Open an IRA</a> now.'
                }
            },
            openIRAGoal: function() {
                var e = BMT.accounts().getIRAs()[0];
                this.trigger("changeAccount", e.num("id"))
            },
            createIRA: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "AddGoal",
                    Type: "Button",
                    Location: "Transfer/IRAInfoTips"
                }), i.show()
            }
        })
    }), define("hbs!views/activity/transactionTable", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return '\n        <div class="goal-column header">Goal</div>\n    '
            }

            function f(e, t) {
                return '\n        <div class="balance-column header">Balance</div>\n    '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<div class="table-header">\n    ', o = n["if"].call(t, t && t.aggregate, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n    <div class="date-column header">Date</div>\n    <div class="desc-column header">Description</div>\n    <div class="change-column header">Change</div>\n\n    ', o = n.unless.call(t, t && t.aggregate, {
                hash: {},
                inverse: u.noop,
                fn: u.program(3, f, i)
            });
            if (o || o === 0) s += o;
            return s += '\n</div>\n\n<div class="table-contents">\n</div>\n', s
        });
        return t.registerPartial("views/activity/transactionTable", n), n
    }), define("hbs!views/activity/emptyTable", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="row">\n    <div class="empty data">\n        <div class="inner">\n            No ', (u = n.typeFilterText) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.typeFilterText, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + " activity for this time period\n        </div>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/activity/emptyTable", n), n
    }), define("hbs!views/activity/transaction", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function h(e, t) {
                return "incomplete"
            }

            function p(e, t) {
                return "sub"
            }

            function d(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="data goal">\n            <div class="inner">\n                ', (s = n.accountName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.accountName, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            </div>\n        </div>\n    ", r
            }

            function v(e, t) {
                return '\n                <span class="icon expand">&#x25B6;</span>\n            '
            }

            function m(e, t) {
                return '\n                <span class="icon"></span>\n            '
            }

            function g(e, t) {
                var r = "",
                    i, s;
                return r += "\n                ", (s = n.pendingText) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.pendingText, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            ", r
            }

            function y(e, t) {
                var r = "",
                    i, s;
                return r += "\n                ", (s = n.dateString) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.dateString, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            ", r
            }

            function b(e, t) {
                return "document-download"
            }

            function w(e, t) {
                var r = "",
                    i;
                r += "\n                ", i = n["if"].call(e, e && e.isCustomerDocument, {
                    hash: {},
                    inverse: l.program(20, S, t),
                    fn: l.program(18, E, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            ", r
            }

            function E(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <a target="_blank" href="', (s = n.printDocumentLink) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.printDocumentLink, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '">\n                ', r
            }

            function S(e, t) {
                var r = "",
                    i;
                r += "\n                    ", i = n["if"].call(e, e && e.isRolloverDocument, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(21, x, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                ", r
            }

            function x(e, t) {
                var r = "",
                    i, s;
                return r += '\n                        <a target="_blank" href="', (s = n.printRolloverDocumentLink) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.printRolloverDocumentLink, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '">\n                    ', r
            }

            function T(e, t) {
                return "pdf"
            }

            function N(e, t) {
                var r = "",
                    i, s;
                r += '\n                <span class="icon transaction-memo-tooltip notepad-icon">\n                    <span class="bold-text">Reason:</span> ', (s = n.transactionCategory) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.transactionCategory, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n                    ", i = n["if"].call(e, e && e.transactionComment, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(26, C, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                </span>\n            ", r
            }

            function C(e, t) {
                var r = "",
                    i, s;
                return r += '\n                        <br /><span class="bold-text">Note:</span> ', (s = n.transactionComment) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.transactionComment, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n                    ", r
            }

            function k(e, t) {
                return "\n                </a>\n            "
            }

            function L(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="feeHelp help-icon right">\n                ', (s = n.feeTooltipText) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.feeTooltipText, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            </div>\n        ", r
            }

            function A(e, t) {
                return '\n            <div class="directIraTransferHelp help-icon right">\n                <h2><span class="status">Status:</span>  <span class="initiated">Waiting for check.</span></h2>\n                <p class="new-concept first">\n                    We\'ll notify you as soon as it has been invested.\n                </p>\n            </div>\n        '
            }

            function O(e, t) {
                return '\n            <div class="dividendHelp help-icon right">\n                A dividend is a payment that stocks and bonds make to investors as a reward for owning them. Dividends are paid out to investors regularly, and BetaSmartz automatically reinvests them for you, buying you more shares.\n            </div>\n        '
            }

            function M(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="withdrawHelp help-icon right">\n                <h2><span class="status">Estimated delivery of funds:</span> <span class="initiated">', (s = n.estimatedCompletionDate) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.estimatedCompletionDate, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '</span></h2>\n                <p class="new-concept">\n                    The above estimate takes into account the time required to trade, settle, and transfer your funds. The day the money actually appears in your account may vary depending on your bank.\n                </p>\n            </div>\n        ', r
            }

            function _(e, t) {
                return '\n            <div class="allocationHelp help-icon right">\n                Because allocation changes require us to buy and sell shares in your account, pending allocation changes initiated before 3:30 PM ET will complete within a few minutes. Pending allocation changes submitted after that time will be completed around 10AM ET the next business day.\n            </div>\n        '
            }

            function D(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="stageHelp help-icon right">\n                <h2><span class="status">Current stage:</span>  <span class="initiated">', (s = n.capitalizedStage) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.capitalizedStage, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '</span></h2>\n                <p class="new-concept first">\n                    <span class="bold-text">Initiated:</span>\n                    Your deposit has been requested and will be processed by your bank by the next business day.\n                </p>\n                <p>\n                    Deposits in this stage can be canceled on the Transfer tab.\n                </p>\n                <p class="new-concept">\n                    <span class="bold-text">In transit:</span>\n                    Your deposit is being processed by your bank and will trade tomorrow morning.\n                </p>\n            </div>\n        ', r
            }

            function P(e, t) {
                return "\n                (pending)\n            "
            }

            function H(e, t) {
                var r = "",
                    i;
                r += "\n                ", i = n["if"].call(e, e && e.change, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(45, B, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            ", r
            }

            function B(e, t) {
                var r = "",
                    i, s;
                return r += "\n                    " + f((i = n.money || e && e.money, s = {
                    hash: {}
                }, i ? i.call(e, e && e.change, s) : c.call(e, "money", e && e.change, s))) + "\n                ", r
            }

            function j(e, t) {
                var r = "",
                    i;
                r += '\n        <div class="data balance last-col">\n            <div class="inner">\n                ', i = n["if"].call(e, e && e.pending, {
                    hash: {},
                    inverse: l.program(50, I, t),
                    fn: l.program(48, F, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            </div>\n        </div>\n    ", r
            }

            function F(e, t) {
                var r = "",
                    i, s;
                return r += "\n                    ", (s = n.pendingText) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.pendingText, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n                ", r
            }

            function I(e, t) {
                var r = "",
                    i;
                r += "\n                    ", i = n["if"].call(e, e && e.balance, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(51, q, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                ", r
            }

            function q(e, t) {
                var r = "",
                    i, s;
                return r += "\n                        " + f((i = n.money || e && e.money, s = {
                    hash: {}
                }, i ? i.call(e, e && e.balance, s) : c.call(e, "money", e && e.balance, s))) + "\n                    ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this,
                c = n.helperMissing;
            s += '<div class="row ', o = n["if"].call(t, t && t.incomplete, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, h, i)
            });
            if (o || o === 0) s += o;
            s += " ", o = n["if"].call(t, t && t.isChild, {
                hash: {},
                inverse: l.noop,
                fn: l.program(3, p, i)
            });
            if (o || o === 0) s += o;
            s += '">\n\n    \n    ', o = n["if"].call(t, t && t.aggregate, {
                hash: {},
                inverse: l.noop,
                fn: l.program(5, d, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n    \n    <div class="data date">\n        <div class="inner">\n            ', o = n["if"].call(t, t && t.expandable, {
                hash: {},
                inverse: l.program(9, m, i),
                fn: l.program(7, v, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n            ", o = n["if"].call(t, t && t.showPendingText, {
                hash: {},
                inverse: l.program(13, y, i),
                fn: l.program(11, g, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </div>\n    </div>\n\n    \n    <div class="data desc">\n        <div class="inner ', o = n["if"].call(t, t && t.showDocumentLink, {
                hash: {},
                inverse: l.noop,
                fn: l.program(15, b, i)
            });
            if (o || o === 0) s += o;
            s += '">\n\n            ', o = n["if"].call(t, t && t.showDocumentLink, {
                hash: {},
                inverse: l.noop,
                fn: l.program(17, w, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n            <span class="icon ', o = n["if"].call(t, t && t.showDocumentLink, {
                hash: {},
                inverse: l.noop,
                fn: l.program(23, T, i)
            });
            if (o || o === 0) s += o;
            s += '"></span>\n\n            ', o = n["if"].call(t, t && t.transactionCategory, {
                hash: {},
                inverse: l.noop,
                fn: l.program(25, N, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n            <span class="document-description">\n                ', (u = n.truncatedDescription) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.truncatedDescription, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n            </span>\n\n            ", o = n["if"].call(t, t && t.showDocumentLink, {
                hash: {},
                inverse: l.noop,
                fn: l.program(28, k, i)
            });
            if (o || o === 0) s += o;
            s += "\n        </div>\n\n        \n\n        ", o = n["if"].call(t, t && t.showFeeTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(30, L, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showRolloverTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(32, A, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showDividendTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(34, O, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showWithdrawalEstimateTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(36, M, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showAllocationChangeTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(38, _, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.showDepositEstimateTooltip, {
                hash: {},
                inverse: l.noop,
                fn: l.program(40, D, i)
            });
            if (o || o === 0) s += o;
            s += "\n    </div>\n\n    \n    ", (u = n.printChangeRowHeader) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.printChangeRowHeader, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n        <div class="inner">\n            ', o = n["if"].call(t, t && t.isWithdrawOrTransferAll, {
                hash: {},
                inverse: l.program(44, H, i),
                fn: l.program(42, P, i)
            });
            if (o || o === 0) s += o;
            s += "\n        </div>\n    </div>\n\n    \n    ", o = n.unless.call(t, t && t.aggregate, {
                hash: {},
                inverse: l.noop,
                fn: l.program(47, j, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n</div>\n\n<div class="hidden-transactions" style="display: none;">\n</div>\n', s
        });
        return t.registerPartial("views/activity/transaction", n), n
    }), define("models/v1/rolloverDocument", ["models/v1/baseModels"], function(e) {
        var t = {
                endpoint: "/rollover-documents",
                getDownloadUrl: function() {
                    return this.url() + "?download=true"
                }
            },
            n = e.Model.extend(t);
        return n
    }), define("views/activity/transactionView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/activity/transaction", "models/transaction", "models/v1/rolloverDocument", "models/v2/transactionMemo"], function(e, t, n, r, i, s, o, u) {
        var a = r.CompositeView.extend({
            template: i,
            className: "alternating-row",
            childViewOptions: {
                isChild: !0
            },
            childViewContainer: ".hidden-transactions",
            toolTips: {
                ".feeHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".directIraTransferHelp": {
                    position: {
                        my: "right center",
                        at: "left center"
                    }
                },
                ".dividendHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".allocationHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".stageHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".withdrawHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".transaction-memo-tooltip": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                aggregate: function() {
                    return this.self.options.aggregate
                },
                isChild: function() {
                    return this.self.options.isChild
                },
                hasChildren: function() {
                    return this.childTransactions && this.childTransactions.length
                },
                expandable: function() {
                    return !this.isChild() && this.hasChildren()
                },
                showPendingText: function() {
                    return this.aggregate() && this.stage && this.pending
                },
                incomplete: function() {
                    return this.pending || this.failed
                },
                isOfType: function(e) {
                    return t.include(s.Model.filters[e], this.self.model.num("typeID"))
                },
                isRolloverDocument: function() {
                    return this.self.model.isRolloverDocument()
                },
                isCustomerDocument: function() {
                    return this.self.model.isCustomerDocument()
                },
                printDocumentLink: function() {
                    var e = this.formatDate("yy-mm-dd", this.self.model.date("date")),
                        t = this.accountID ? "account=" + this.accountID : "",
                        n = "hash=" + this.documentHash;
                    return "/document/Betterment_" + this.formatTitle(this.type) + "_" + e + ".pdf?" + t + "&" + n
                },
                printRolloverDocumentLink: function() {
                    var e = new o({
                        id: this.self.model.get("rolloverRequestId")
                    });
                    return e.url()
                },
                printDescription: function() {
                    var e = this.failed ? "Canceled " : "";
                    return e += !this.failed && this.pending ? "Pending " : "", e += this.description ? this.description : "", e
                },
                truncatedDescription: function() {
                    return this.truncateToLength(this.printDescription(), 42)
                },
                printChangeRowHeader: function() {
                    var e = [],
                        t = parseFloat(this.change);
                    return t && t > 0 && e.push("positive"), this.aggregate() && e.push("last-col"), this.incomplete() && e.push("incomplete"), n.s('<div class="data change ' + e.join(" ") + '">')
                },
                pendingText: function() {
                    return this.isRolloverDocument() && !this.pending ? this.get("completedDateString") : this.stage ? (this.change && this.change > 0 ? "Invests" : "Arrives") + " on " + this.estimatedCompletionDate : "(pending)"
                },
                showDocumentLink: function() {
                    var e = this.isCustomerDocument() || this.isRolloverDocument();
                    return e && this.self.model.not("failed")
                },
                isWithdrawOrTransferAll: function() {
                    var e = parseFloat(this.change, 10) === 0 || !this.change;
                    return !!(this.pending && e && !this.isAllocation)
                },
                feeTooltipText: function() {
                    return BMT.user.isAdvised() ? "Your fee is prorated for the amount of time since your last billing." : "BetaSmartz's fee is prorated for the amount of time since your last billing. For more information about pricing and how to lower your fees, click the Pricing Plan button on your Account Settings page."
                },
                showFeeTooltip: function() {
                    return this.isOfType("FEE")
                },
                showRolloverTooltip: function() {
                    return this.isRolloverDocument() && this.pending
                },
                showDividendTooltip: function() {
                    return this.isOfType("DIVIDEND") && !this.isChild()
                },
                showWithdrawalEstimateTooltip: function() {
                    return this.isOfType("WITHDRAWAL") && this.stage && this.estimatedCompletionDate
                },
                showAllocationChangeTooltip: function() {
                    return this.pending && (this.isOfType("ALLOCATION_CHANGE") || this.isOfType("PORTFOLIO_UPDATE"))
                },
                showDepositEstimateTooltip: function() {
                    return this.pending && this.stage && this.isOfType("DEPOSIT")
                },
                capitalizedStage: function() {
                    return this.stage.capitalize()
                },
                hasTransactionMemo: function() {
                    return this.self.model.has("transactionMemo")
                },
                transactionCategory: function() {
                    if (this.hasTransactionMemo()) return this.self.model.get("transactionMemo").getCategory()
                },
                transactionComment: function() {
                    if (this.hasTransactionMemo()) return this.self.model.get("transactionMemo").get("comment")
                }
            },
            events: {
                "click .expand": "expandHiddenTransactions",
                "click .desc a": "fireDocumentMixpanel"
            },
            onInitialize: function() {
                !this.options.isChild && this.model.has("childTransactions") && this.model.get("childTransactions").length > 0 && (this.collection = new s.Collection(this.model.get("childTransactions")))
            },
            expandHiddenTransactions: function(t) {
                var n = e(t.currentTarget),
                    r = this.$(".hidden-transactions"),
                    i = r.is(":hidden");
                n.transition({
                    rotate: i ? "90deg" : "0deg"
                }), r["slide" + (i ? "Down" : "Up")](300)
            },
            fireDocumentMixpanel: function(e) {
                if (this.model.get("type") === "ANNUAL_TAX_STATEMENT") {
                    var t = this.model.getTransactionYear() - 1;
                    BMT.analytics.track("ElementClicked", {
                        Location: "Activity",
                        Type: "Link",
                        Name: "TaxPDF",
                        TaxYear: t
                    })
                }
            }
        });
        return a
    }), define("views/activity/transactionTableView", ["jquery", "underscore", "common/betterment.views", "hbs!views/activity/transactionTable", "hbs!views/activity/emptyTable", "views/activity/transactionView"], function(e, t, n, r, i, s) {
        return n.CompositeView.extend({
            template: r,
            getChildView: function() {
                return s
            },
            childViewContainer: ".table-contents",
            emptyView: n.View.extend({
                className: "empty-table",
                template: i,
                templateHelpers: {
                    typeFilterText: function() {
                        var e = this.self.options.typeFilter;
                        return e ? this.formatTitle(e, !0).toLowerCase() : "account"
                    }
                }
            }),
            templateHelpers: {
                aggregate: function() {
                    return this.self.options.aggregate
                }
            },
            onInitialize: function() {
                this.on("before:render", function() {
                    this.childViewOptions = {
                        aggregate: this.options.aggregate,
                        typeFilter: this.options.typeFilter,
                        parent: this
                    }
                })
            },
            onRender: function() {
                this.unblock()
            }
        })
    }), define("hbs!views/transfer/pendingDepositTable", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="table-header">\n    <div class="goal-column header">Goal</div>\n    <div class="amount-column header">Amount</div>\n    <div class="type-column header">Type</div>\n    <div class="date-column header">Investment Date</div>\n    <div class="cancel-column header">Cancel</div>\n</div>\n\n<div class="table-contents"></div>\n'
        });
        return t.registerPartial("views/transfer/pendingDepositTable", n), n
    }), define("hbs!views/transfer/personal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg width="100px" height="100px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="personal" sketch:type="MSArtboardGroup" fill="#0B0B0A">\n            <path d="M25.6549983,74.6848771 C25.6549983,75.5520416 26.3580408,76.2558731 27.2252054,76.2558731 C28.0923699,76.2558731 28.7962014,75.5520416 28.7962014,74.6848771 C28.7962014,64.9693199 35.2088006,56.2266598 44.4414599,53.235376 C46.5671573,54.2043278 48.9208897,54.757451 51.4056042,54.757451 C53.9005763,54.757451 56.2621992,54.1995935 58.3942089,53.2227512 C67.6071421,56.1714264 74.0142179,64.9330236 74.0142179,74.6848771 C74.0142179,75.5520416 74.7180494,76.2558731 75.5852139,76.2558731 C76.4523785,76.2558731 77.1554209,75.5520416 77.1554209,74.6848771 C77.1554209,64.4564382 70.9598102,55.1914278 61.7823842,51.1593887 C65.7252608,48.0686848 68.2723101,43.2760027 68.2723101,37.889956 C68.2723101,28.5894384 60.7053327,21.0224609 51.4048151,21.0224609 C42.1042975,21.0224609 34.5373201,28.5894384 34.5373201,37.889956 C34.5373201,43.2870494 37.0946271,48.088411 41.0517065,51.1775368 C31.8569215,55.2403488 25.6549983,64.4895782 25.6549983,74.6848771 L25.6549983,74.6848771 Z M37.6785231,37.889956 C37.6785231,30.3206114 43.8354705,24.163664 51.4048151,24.163664 C58.9741597,24.163664 65.1311071,30.3206114 65.1311071,37.889956 C65.1311071,45.4593006 58.9741597,51.616248 51.4048151,51.616248 C43.8354705,51.616248 37.6785231,45.4593006 37.6785231,37.889956 L37.6785231,37.889956 Z" id="Imported-Layers" sketch:type="MSShapeGroup"></path>\n        </g>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/transfer/personal", n), n
    }), define("hbs!views/transfer/joint", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     viewBox="0 7.7 100 78.7" enable-background="new 0 7.7 100 78.7" xml:space="preserve">\n<path d="M84.5,48.9c2.8-2.6,4.5-6.3,4.5-10.5c0-8-6.5-14.5-14.5-14.5S60,30.5,60,38.5c0,4.1,1.8,7.9,4.5,10.5\n    c-3.1,1.5-5.8,3.7-7.9,6.5c-2.4-2.2-5.2-3.9-8.2-5.3C53,46.4,56,40.5,56,34c0-11.6-9.4-21-21-21s-21,9.4-21,21\n    c0,6.5,3,12.3,7.6,16.2c-11.7,5.2-19.6,17-19.6,30c0,1.1,0.9,2,2,2s2-0.9,2-2c0-12.3,8.1-23.4,19.7-27.3c2.8,1.4,5.9,2.2,9.2,2.2\n    c3.3,0,6.4-0.8,9.2-2.2c11.6,3.9,19.7,15,19.7,27.3c0,1.1,0.9,2,2,2s2-0.9,2-2c0-8.2-3.1-16-8.4-21.9c2.2-3.1,5.4-5.4,9-6.7\n    c1.8,0.8,3.9,1.3,6,1.3c2.2,0,4.2-0.5,6.1-1.3c7.4,2.5,12.6,9.6,12.6,17.5c0,1.1,0.9,2,2,2s2-0.9,2-2C97.1,60.5,92.1,52.7,84.5,48.9\n    z M27.5,49.3c-0.3-0.3-0.6-0.5-1-0.6c-5.1-3-8.5-8.4-8.5-14.7c0-9.4,7.6-17,17-17s17,7.6,17,17c0,6.3-3.5,11.8-8.6,14.7\n    c-0.3,0.1-0.5,0.2-0.8,0.4C40.4,50.4,37.8,51,35,51C32.3,51,29.8,50.4,27.5,49.3z M69.6,47.8c-0.1,0-0.1-0.1-0.2-0.1\n    c-3.3-1.8-5.5-5.2-5.5-9.2C64,32.7,68.7,28,74.5,28S85,32.7,85,38.5C85,44.3,80.3,49,74.5,49C72.7,49,71.1,48.5,69.6,47.8z"/>\n</svg>'
        });
        return t.registerPartial("views/transfer/joint", n), n
    }), define("hbs!views/transfer/trust", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<svg width="304px" height="170px" viewBox="0 0 304 170" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g>\n        <path d="M272.866,87.7596429 C279.593111,81.3056143 283.807333,72.2548286 283.807333,62.2220143 C283.807333,42.6840429 267.901333,26.7883714 248.350667,26.7883714 C228.8,26.7883714 212.894,42.6840429 212.894,62.2220143 C212.894,72.3354429 217.179111,81.4497429 224.001556,87.9111 C216.484889,91.6486714 209.875111,97.0693714 204.714889,103.797 C204.595111,103.691957 204.465556,103.599129 204.345778,103.496529 C203.773778,103.003071 203.174889,102.541371 202.588222,102.062571 C201.608,101.256429 200.630222,100.447843 199.608444,99.6881143 C199.483778,99.5977286 199.354222,99.5146714 199.229556,99.4242857 C194.690222,96.0897857 189.794,93.1998857 184.560444,90.8694 C195.941778,81.4424143 203.206667,67.2201 203.206667,51.3293143 C203.204222,23.0239286 180.162889,-0.00244285714 151.839111,0 L151.836667,0 L151.829333,0 C123.505556,0 100.464222,23.0263714 100.464222,51.3317571 C100.464222,67.2225429 107.731556,81.4448571 119.112889,90.8694 C113.879333,93.2023286 108.983111,96.0922286 104.441333,99.4291714 C104.319111,99.5195571 104.189556,99.6001714 104.064889,99.6905571 C103.043111,100.452729 102.062889,101.263757 101.077778,102.072343 C100.496,102.5487 99.8995556,103.005514 99.33,103.496529 C99.2102222,103.601571 99.0782222,103.6944 98.9584444,103.799443 C93.7982222,97.0718143 87.1884444,91.6511143 79.6717778,87.9159857 C86.4942222,81.4521857 90.7793333,72.3403286 90.7768889,62.2244571 C90.7768889,42.6889286 74.8684444,26.7932571 55.3177778,26.7932571 C35.7671111,26.7957 19.8635556,42.6913714 19.8635556,62.2293429 C19.866,72.2621571 24.0802222,81.3129429 30.8073333,87.7669714 C12.3102222,96.8617286 0,116.0919 0,137.200629 C0,139.897543 2.19022222,142.086343 4.88888889,142.086343 C7.58755556,142.086343 9.77777778,139.8951 9.77777778,137.198186 C9.77777778,117.862971 22.3373333,100.4796 40.4775556,94.3626857 C44.9997778,96.4586571 50.0157778,97.6581 55.3202222,97.6581 C60.5488889,97.6581 65.5013333,96.4904143 69.9746667,94.4506286 C78.7624444,97.4871 86.4184444,103.1814 91.9184444,110.768914 C91.8475556,110.849529 91.784,110.932586 91.7131111,111.0132 C91.3635556,111.404057 91.036,111.812014 90.6962222,112.2102 C90.0728889,112.9455 89.4593333,113.690571 88.8604444,114.447857 C77.8237778,128.328171 71.2995556,145.738414 71.2995556,164.162443 C71.2995556,166.859357 73.4897778,169.048157 76.1884444,169.048157 C76.208,169.048157 76.2251111,169.043271 76.2422222,169.043271 C76.2764444,169.043271 76.3057778,169.053043 76.34,169.053043 C79.0386667,169.053043 81.2288889,166.864243 81.2288889,164.167329 C81.2264444,143.960014 90.068,125.150014 104.407111,112.063629 C111.500889,105.621814 119.907333,100.538229 129.296444,97.3869429 C129.905111,97.6849714 130.526,97.9585714 131.146889,98.2346143 C131.393778,98.3421 131.633333,98.4642429 131.880222,98.5692857 C132.515778,98.8404429 133.163556,99.0822857 133.808889,99.3290143 C134.058222,99.4218429 134.297778,99.5293286 134.547111,99.6197143 C135.155778,99.8395714 135.776667,100.032557 136.395111,100.230429 C136.693333,100.3257 136.984222,100.433186 137.284889,100.523571 C138.103778,100.7703 138.937333,100.990157 139.773333,101.195357 C139.876,101.219786 139.978667,101.253986 140.081333,101.278414 C142.912,101.955086 145.833111,102.3948 148.825111,102.573129 C149.106222,102.590229 149.394667,102.587786 149.678222,102.6 C150.394444,102.629314 151.110667,102.663514 151.834222,102.663514 L151.839111,102.663514 C152.565111,102.663514 153.281333,102.629314 153.997556,102.6 C154.281111,102.587786 154.567111,102.590229 154.850667,102.573129 C158.837556,102.336171 162.699778,101.630186 166.388444,100.523571 C166.691556,100.433186 166.982444,100.323257 167.283111,100.227986 C167.899111,100.030114 168.52,99.8371286 169.126222,99.6172714 C169.375556,99.5268857 169.617556,99.4218429 169.866889,99.3265714 C170.512222,99.0822857 171.16,98.838 171.793111,98.5692857 C172.042444,98.4618 172.282,98.3421 172.528889,98.2321714 C173.149778,97.9561286 173.770667,97.6825286 174.376889,97.3845 C183.753778,100.5309 192.152889,105.607157 199.241778,112.036757 C213.595556,125.123143 222.449333,143.942914 222.449333,164.162443 C222.449333,166.859357 224.639556,169.048157 227.338222,169.048157 C227.372444,169.048157 227.401778,169.038386 227.436,169.038386 C227.453111,169.038386 227.470222,169.043271 227.489778,169.043271 C230.188444,169.043271 232.378667,166.854471 232.378667,164.157557 C232.376222,145.731086 225.852,128.320843 214.812889,114.442971 C214.214,113.685686 213.602889,112.940614 212.977111,112.205314 C212.637333,111.807129 212.309778,111.401614 211.962667,111.010757 C211.891778,110.930143 211.825778,110.847086 211.754889,110.766471 C217.254889,103.178957 224.910889,97.4822143 233.698667,94.4457429 C238.172,96.4855286 243.124444,97.6532143 248.353111,97.6532143 C253.657556,97.6532143 258.673556,96.4513286 263.195778,94.3553571 C281.336,100.472271 293.898,117.855643 293.898,137.190857 C293.898,139.887771 296.088222,142.076571 298.786889,142.076571 C301.485556,142.076571 303.675778,139.887771 303.675778,137.190857 C303.675778,116.082129 291.363111,96.8544 272.866,87.7596429 L272.866,87.7596429 Z M67.6182222,84.7451571 C67.474,84.8111143 67.3346667,84.8770714 67.1977778,84.9552429 C63.6411111,86.8191429 59.6053333,87.8866714 55.3226667,87.8866714 C41.162,87.8891143 29.6437778,76.3759286 29.6413333,62.2269 C29.6413333,48.0754286 41.1595556,36.5646857 55.3202222,36.5622429 C69.4808889,36.5622429 80.9991111,48.0729857 80.9991111,62.2244571 C81.0015556,71.9250429 75.5846667,80.3822143 67.6182222,84.7451571 L67.6182222,84.7451571 Z M183.631556,78.0175286 C183.406667,78.2813571 183.194,78.5549571 182.964222,78.8139 C182.575556,79.2511714 182.164889,79.6713429 181.759111,80.0915143 C181.548889,80.3089286 181.348444,80.5361143 181.135778,80.7486429 C180.688444,81.1908 180.224,81.6109714 179.759556,82.0335857 C179.566444,82.2070286 179.383111,82.3902429 179.187556,82.5612429 C178.688889,82.9985143 178.170667,83.4138 177.65,83.8266429 C177.474,83.9658857 177.305333,84.1124571 177.129333,84.2492571 C176.579333,84.6694286 176.014667,85.0676143 175.445111,85.4633571 C175.281333,85.5757286 175.124889,85.6978714 174.961111,85.8078 C174.372,86.2011 173.768222,86.5724143 173.159556,86.9388429 C173.012889,87.0267857 172.871111,87.1220571 172.724444,87.2075571 C171.773556,87.3981 170.903333,87.8622429 170.221333,88.5511286 C170.184667,88.5682286 170.150444,88.5853286 170.113778,88.6024286 C169.458667,88.9248857 168.793778,89.2351286 168.119111,89.5233857 C168.087333,89.5380429 168.055556,89.5502571 168.023778,89.5624714 C167.341778,89.8556143 166.65,90.1292143 165.948444,90.3857143 C165.906889,90.4003714 165.862889,90.4150286 165.821333,90.4296857 C165.132,90.6788571 164.437778,90.9133714 163.731333,91.1259 C163.643333,91.1527714 163.552889,91.1747571 163.467333,91.1991857 C162.802444,91.3970571 162.135111,91.5802714 161.460444,91.7439429 C161.306444,91.7805857 161.152444,91.8099 160.998444,91.8441 C160.38,91.9857857 159.761556,92.1225857 159.133333,92.2349571 C158.884,92.2813714 158.629778,92.3106857 158.380444,92.3522143 C157.840222,92.4401571 157.302444,92.5281 156.757333,92.5940571 C156.356444,92.6429143 155.948222,92.6697857 155.544889,92.7064286 C155.136667,92.7430714 154.730889,92.7919286 154.320222,92.8163571 C153.498889,92.8652143 152.670222,92.8920857 151.836667,92.8920857 C151.003111,92.8920857 150.174444,92.8652143 149.353111,92.8163571 C148.927778,92.7919286 148.509778,92.7406286 148.086889,92.7015429 C147.698222,92.6673429 147.307111,92.6404714 146.920889,92.5965 C146.368444,92.5281 145.825778,92.4377143 145.283111,92.3497714 C145.036222,92.3106857 144.784444,92.2813714 144.54,92.2374 C143.909333,92.1225857 143.288444,91.9857857 142.67,91.8441 C142.518444,91.8099 142.364444,91.7805857 142.212889,91.7463857 C141.533333,91.5802714 140.861111,91.3946143 140.193778,91.1967429 C140.110667,91.1723143 140.025111,91.1527714 139.942,91.1283429 C139.245333,90.9158143 138.556,90.6837429 137.871556,90.4370143 C137.822667,90.4199143 137.771333,90.4028143 137.72,90.3857143 C137.020889,90.1292143 136.329111,89.8531714 135.647111,89.5624714 C135.617778,89.5502571 135.586,89.5380429 135.554222,89.5233857 C134.879556,89.2351286 134.214667,88.9273286 133.559556,88.6048714 C133.525333,88.5853286 133.488667,88.5706714 133.452,88.5511286 C132.767556,87.8646857 131.899778,87.3981 130.948889,87.21 C130.804667,87.1245 130.662889,87.0292286 130.518667,86.9437286 C129.907556,86.5773 129.301333,86.2035429 128.709778,85.8078 C128.550889,85.7003143 128.399333,85.5830571 128.240444,85.4731286 C127.666,85.0749429 127.096444,84.6743143 126.544,84.2517 C126.368,84.1173429 126.204222,83.9707714 126.030667,83.8339714 C125.507556,83.4162429 124.984444,83.0009571 124.483333,82.5612429 C124.292667,82.3951286 124.114222,82.2168 123.926,82.0458 C123.456667,81.6207429 122.987333,81.1956857 122.537556,80.7486429 C122.324889,80.5385571 122.124444,80.3113714 121.916667,80.0964 C121.508444,79.6737857 121.097778,79.2536143 120.709111,78.8163429 C120.476889,78.5549571 120.261778,78.2789143 120.036889,78.0126429 C119.689778,77.6022429 119.337778,77.1942857 119.005333,76.7716714 C118.756,76.4492143 118.526222,76.1145429 118.284222,75.7872 C117.998222,75.3987857 117.704889,75.0152571 117.431111,74.6146286 C117.174444,74.2359857 116.937333,73.8426857 116.690444,73.4542714 C116.460667,73.0878429 116.216222,72.7311857 115.996222,72.3598714 C115.724889,71.8981714 115.478,71.4242571 115.223778,70.9527857 C115.052667,70.6376571 114.869333,70.3298571 114.708,70.0074 C114.417111,69.4382143 114.155556,68.8543714 113.894,68.2705286 C113.786444,68.0335714 113.669111,67.8063857 113.566444,67.5694286 C113.278,66.8927571 113.016444,66.2014286 112.762222,65.5052143 C112.706,65.3488714 112.637556,65.1974143 112.583778,65.0410714 C112.297778,64.2324857 112.041111,63.4068 111.804,62.5762286 C111.791778,62.5298143 111.774667,62.4834 111.762444,62.4369857 C110.777333,58.9021714 110.249333,55.1792571 110.249333,51.3317571 C110.246889,28.4153143 128.902889,9.77142857 151.834222,9.76898571 C174.765556,9.76898571 193.421556,28.4128714 193.421556,51.3293143 C193.421556,55.1768143 192.893556,58.8997286 191.908444,62.4345429 C191.896222,62.4834 191.879111,62.5298143 191.864444,62.5762286 C191.629778,63.4068 191.375556,64.2300429 191.089556,65.0386286 C191.026,65.2169571 190.950222,65.3879571 190.884222,65.5662857 C190.637333,66.2380714 190.385556,66.9074143 190.106889,67.5645429 C189.999333,67.8161571 189.872222,68.058 189.759778,68.3096143 C189.503111,68.8788 189.246444,69.4504286 188.965333,70.0074 C188.804,70.3225286 188.625556,70.623 188.459333,70.9332429 C188.200222,71.4096 187.950889,71.8908429 187.674667,72.3574286 C187.454667,72.7287429 187.215111,73.0854 186.982889,73.4493857 C186.736,73.8378 186.498889,74.2335429 186.239778,74.6121857 C185.963556,75.0177 185.667778,75.4061143 185.376889,75.7994143 C185.139778,76.1218714 184.912444,76.4516571 184.668,76.7667857 C184.335556,77.1942857 183.981111,77.6046857 183.631556,78.0175286 L183.631556,78.0175286 Z M248.350667,87.8817857 C244.068,87.8817857 240.032222,86.8142571 236.475556,84.9503571 C236.338667,84.8721857 236.199333,84.8062286 236.055111,84.7402714 C228.088667,80.3773286 222.671778,71.9201571 222.671778,62.2195714 C222.671778,48.0681 234.19,36.5573571 248.350667,36.5573571 C262.511333,36.5573571 274.029556,48.0681 274.029556,62.2195714 C274.029556,76.3686 262.511333,87.8817857 248.350667,87.8817857 L248.350667,87.8817857 Z"></path>\n    </g>\n</svg>'
        });
        return t.registerPartial("views/transfer/trust", n), n
    }), define("components/common/scripts/templateHelpers/accountGroupIcon", ["hbs/handlebars", "hbs!views/transfer/personal", "hbs!views/transfer/joint", "hbs!views/transfer/trust"], function(e, t, n, r) {
        e.registerHelper("accountGroupIcon", function(i, s) {
            var o = {
                personal: t,
                joint: n,
                trust: r
            };
            return new e.SafeString(o[i]())
        })
    }), define("hbs!views/transfer/pendingDepositTransaction", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/accountGroupIcon", "components/common/scripts/templateHelpers/moneyCents"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function";
            return s += '<div class="row">\n    <div class="data goal">\n        <div class="account-icon">\n            ' + l((u = n.accountGroupIcon || t && t.accountGroupIcon, a = {
                hash: {}
            }, u ? u.call(t, t && t.accountGroupType, a) : f.call(t, "accountGroupIcon", t && t.accountGroupType, a))) + '\n        </div>\n        <div class="inner">\n            ', (u = n.accountName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountName, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </div>\n        <div class="account-group">\n            ', (u = n.accountGroupName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountGroupName, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </div>\n    </div>\n    <div class="data amount">\n        <div class="inner">\n             ' + l((u = n.moneyCents || t && t.moneyCents, a = {
                hash: {}
            }, u ? u.call(t, t && t.displayAmountCents, 2, a) : f.call(t, "moneyCents", t && t.displayAmountCents, 2, a))) + '\n        </div>\n    </div>\n    <div class="data type">\n        <div class="inner">\n            ', (u = n.transactionDescription) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.transactionDescription, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </div>\n    </div>\n    <div class="data date">\n        <div class="inner">\n            ', (u = n.estimatedCompletionOnDate) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.estimatedCompletionOnDate, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </div>\n    </div>\n    <div class="data status last-col">\n            <div class="inner cancel-inner">\n                <div class="cancel-icon"></div>\n                <button class="cancel-button blue">Cancel Deposit</button>\n            </div>\n        </div>\n    </div>\n</div>', s
        });
        return t.registerPartial("views/transfer/pendingDepositTransaction", n), n
    }), define("views/transfer/pendingDepositTransactionView", ["hbs!views/transfer/pendingDepositTransaction", "views/activity/transactionView"], function(e, t) {
        return t.extend({
            template: e,
            events: {
                "click .cancel-button": "cancelTransaction"
            },
            templateHelpers: {
                estimatedCompletionOnDate: function() {
                    return this.self.model.displayTransactionDate()
                }
            },
            cancelTransaction: function() {
                var e = this,
                    t = e.model.get("transactionType") === "deposit" ? "deposit" : e.model.get("transactionDescription");
                BMT.analytics.track("TransactionCanceled", {
                    Name: e.model.get("transactionDescription"),
                    Location: "Transfer",
                    GoalId: e.model.get("accountID"),
                    Value: e.model.get("change")
                }), BMT.alert({
                    icon: "warning",
                    title: "Please Confirm Cancellation",
                    body: "Are you sure you want to cancel your " + e.formatter.moneyCents(e.model.get("displayAmountCents")) + " " + t + " into your " + e.model.get("accountName") + " goal?",
                    buttons: [{
                        id: "ok",
                        title: "Confirm Cancellation"
                    }, {
                        id: "cancel",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    handler: function(t) {
                        t === "ok" && (BMT.vent.trigger("deposit:destroy:start"), e.$el.slideUp(300, function() {
                            e.model.destroy({
                                wait: !0,
                                success: function() {
                                    BMT.vent.trigger("deposit:destroy:success")
                                },
                                error: function() {
                                    BMT.vent.trigger("deposit:destroy:error"), e.$el.slideDown(300)
                                }
                            })
                        }))
                    }
                })
            }
        })
    }), define("views/transfer/pendingDepositsTableView", ["views/activity/transactionTableView", "hbs!views/transfer/pendingDepositTable", "views/transfer/pendingDepositTransactionView"], function(e, t, n) {
        return e.extend({
            template: t,
            getChildView: function() {
                return n
            }
        })
    }), define("models/v2/cancelableTransaction", ["components/common/scripts/models/v2/baseModels", "components/common/scripts/models/v2/baseCollection", "components/common/scripts/util/formatter"], function(e, t, n) {
        var r = e.Model.extend({
                endpoint: "/smart_deposits",
                displayTransactionDate: function() {
                    return "Up to 2 business days"
                }
            }),
            i = e.Model.extend({
                endpoint: "/deposits",
                displayTransactionDate: function() {
                    var e = this.get("estimatedCompletionOn");
                    return Date.parse(e).toString("MMMM d") + n.ordinalSuffix(Date.parse(e).getDate())
                }
            }),
            s = {
                model: function(e, t) {
                    switch (e.transaction_type) {
                        case "smart_deposit":
                            return new r(e, t);
                        case "deposit":
                            return new i(e, t);
                        default:
                            throw "Unknown transaction type: " + e.transaction_type
                    }
                },
                endpoint: "/cancelable_transactions"
            };
        return {
            Deposit: i,
            SmartDeposit: r,
            Collection: t.extend(s)
        }
    }), define("hbs!views/transfer/upcomingTransfers", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return "hidden"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<div class="panel card body upcoming-transfers">\n    <div class="heading clearfix">\n        <h3>\n            <span class="toggleTable open-lg ', o = n.unless.call(t, t && t.hasPendingDeposits, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            return s += '"></span> <span class="pending-label">Pending deposits</span>\n        </h3>\n    </div>\n    <div id="pendingDepositsTable"></div>\n</div>', s
        });
        return t.registerPartial("views/transfer/upcomingTransfers", n), n
    }), define("views/transfer/upcomingTransfersView", ["components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "views/transfer/pendingDepositsTableView", "models/v2/cancelableTransaction", "hbs!views/transfer/upcomingTransfers"], function(e, t, n, r, i) {
        return t.View.extend({
            template: i,
            collection: new r.Collection,
            events: {
                "opened .toggleTable": "showTable"
            },
            regions: {
                pendingDepositsTable: "#pendingDepositsTable"
            },
            templateHelpers: {
                hasPendingDeposits: function() {
                    return !!this.self.collection.length
                }
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "deposit:destroy:start", this.block), this.listenTo(BMT.vent, "deposit:destroy:error", this.unblock), this.listenTo(BMT.vent, "deposit:destroy:success", function() {
                    this.unblock(), BMT.flash("Your deposit was canceled successfully."), this.collection.length || this.render(), BMT.refreshAccounts(function() {
                        BMT.vent.trigger("deposit:refresh")
                    })
                })
            },
            onShow: function() {
                var e = this;
                this.collection.fetch(), this.listenTo(this.collection, "sync", function() {
                    this.pendingDepositsTable.show((new n({
                        collection: e.collection
                    })).on("show", function() {
                        e.collection.length && (e.collection.length === 1 && e.$(".row").css({
                            borderBottom: "none"
                        }), e.showTable())
                    }))
                })
            },
            showTable: function() {
                this.$("#pendingDepositsTable").slideDown()
            }
        })
    }), define("views/transfer/bankVerificationInfoView", ["jquery", "underscore", "common/betterment.views"], function(e, t, n) {
        return n.View.extend({
            template: "#transfer/bankVerificationInfo",
            tagName: "div",
            templateHelpers: {
                formatDepositDate: function() {
                    return this.dayMonthDateYear(this.self.model.date("expectedVerificationDepositDate"))
                }
            },
            events: {
                "click button.orange": "goToSummary",
                "click button.silver": "refreshTransfer"
            },
            goToSummary: function() {
                BMT.router.navigate("summary", !0)
            },
            refreshTransfer: function() {
                BMT.vent.trigger("refresh:transfer"), BMT.analytics.track("InputSubmitted", {
                    Name: "VerifyDeposits",
                    Type: "Button",
                    Location: "Transfer"
                })
            }
        })
    }), define("views/common/dropdown/goalSelectorView", ["underscore", "backbone", "views/common/dropdown/dropdownView", "views/common/addGoalView"], function(e, t, n, r) {
        function i() {
            return BMT.accounts().map(function(e) {
                return {
                    name: e.get("name"),
                    value: e.get("id"),
                    eventName: "accountChanged"
                }
            })
        }
        var s = n.extend({
            className: "btn-group goal-selector",
            onInitialize: function() {
                n.prototype.onInitialize.apply(this, arguments), this.options.selectedValue ? this.selectedValue = this.options.selectedValue : BMT.selectedAccount && (this.selectedValue = BMT.selectedAccount.get("id"))
            },
            onSelected: function(e) {
                e.preventDefault();
                var t = $(e.currentTarget),
                    n = t.data("value"),
                    i = t.data("actionName"),
                    s = t.data("eventName");
                i ? i === "add-goal" && (r.show(), BMT.analytics.track("ElementClicked", {
                    Name: "AddGoalDropDown",
                    Location: BMT.currentPage.capitalize()
                })) : BMT.selectedAccount = BMT.accounts().get(n), s && this.trigger(s, {
                    value: n,
                    actionName: i
                })
            }
        }, {
            create: function(e) {
                var t = i();
                return e.includeAddGoal && (t = t.concat([{
                    divider: !0
                }, {
                    name: BMT.accountGroup.allowsIRAs() ? "Add Goal or IRA" : "Add Goal",
                    action: "add-goal"
                }])), e.prepend && (t = e.prepend.concat(t)), new s({
                    selectedValue: e.selectedValue,
                    items: t
                })
            }
        });
        return s
    }), define("views/transfer/transferView", ["jquery", "underscore", "backbone", "common/betterment.views", "hbs!views/transfer/transfer", "models/automaticDeposit", "models/transaction", "views/common/addGoalView", "views/transfer/depositView", "views/transfer/withdrawView", "views/transfer/confirmBankAccountView", "views/transfer/automaticDepositView", "views/transfer/automaticWithdrawalView", "views/transfer/iraInfoTipsView", "views/transfer/upcomingTransfersView", "views/transfer/bankVerificationInfoView", "views/common/dropdown/goalSelectorView", "models/rolloverFollowup", "views/common/smartDepositSettingsView", "modules/modals", "views/linkBankAccount/setupView", "services/bankAccountService"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E) {
        return r.View.extend({
            template: i,
            id: "transfer",
            regions: {
                checkingAccountOperations: "#checking-account-operations",
                deposit: "#deposit",
                withdraw: "#withdraw",
                automaticDeposit: "#automaticDeposit",
                automaticWithdrawal: "#automaticWithdrawal",
                upcomingTransfers: "#upcomingTransfers",
                goalSelectorRegion: ".goal-selector-region"
            },
            templateHelpers: {
                account_group_name: function() {
                    return this.self.model.get("accountGroup").get("name")
                },
                show_rollover_button: function() {
                    return BMT.accountGroup.allowsIRAs()
                }
            },
            events: {
                "click button.rollover": "startRollover"
            },
            onInitialize: function() {
                this.model = BMT.selectedAccount = BMT.selectedAccount || BMT.accounts().at(0), this.listenTo(BMT.vent, "refresh:transfer", this.reRender), this.listenTo(BMT.vent, "automaticWithdrawal:update", this.reRender), this.listenTo(BMT.vent, "deposit:create", this.showUpcomingTransfers), this.listenTo(BMT.vent, "bankAccount:linkStarted", this.showBankAccountLinkStarted)
            },
            showBankAccountLinkStarted: function() {
                this.checkingAccountOperations.show(new v({
                    model: this.model.get("accountGroup").get("bankAccount")
                }))
            },
            onRender: function() {
                this.depositGoal = this.$("#depositGoal"), this.withdrawGoal = this.$("#withdrawGoal");
                var e = this.model.get("accountGroup").get("bankAccount"),
                    t = e.is("active") && e.is("confirmed"),
                    n = m.create({
                        includeAddGoal: !0
                    });
                this.listenTo(n, "accountChanged", function() {
                    this.model = BMT.selectedAccount, this.render()
                }), this.goalSelectorRegion.show(n), this.deposit.show(new a({
                    model: new o.Model({
                        account: this.model,
                        type: "DEPOSIT"
                    }),
                    amount: parseFloat(this.options.depositAmount) || null,
                    accountGroup: BMT.accountGroup
                })), this.withdraw.show(new f({
                    model: this.model,
                    disabled: !this.model.get("accountGroup").get("parentUser").isFull()
                }));
                var r = new c({
                    model: this.model.get("automaticDeposit"),
                    account: this.model
                });
                this.listenTo(r, "accountChanged", function() {
                    this.model = BMT.selectedAccount, this.render()
                }), this.automaticDeposit.show(r);
                if (this.model.get("accountGroup").isEligibleForAutoWithdrawals() && this.model.isAllowedAutoWithdrawals()) this.automaticWithdrawal.show(new h({
                    model: this.model.get("automaticWithdrawal"),
                    account: this.model
                }));
                else if (!this.model.get("accountGroup").get("parentUser").isFull() || t)
                    if (BMT.accountGroup.allowsIRAs()) {
                        var i = new p({
                            model: this.model
                        });
                        this.automaticWithdrawal.show(i), this.listenTo(i, "changeAccount", function(e) {
                            this.changeAccount(e)
                        }, this)
                    }
                if (this.model.get("accountGroup").get("parentUser").isFull())
                    if (t) this.showUpcomingTransfers();
                    else if (e.not("active")) !this.options.showSmartDepositsModal && E.shouldShowLinkAccount() && b.show(new w({
                    relink: !1,
                    accountGroup: BMT.accountGroup
                })), this.$(".bank-account-not-ready").show().find(".message").text("You can deposit or withdraw after you link your checking account.");
                else {
                    var s = new l({
                        model: e,
                        account: this.model
                    });
                    this.listenTo(s, "complete", function() {
                        BMT.vent.trigger("refresh:transfer"), this.checkingAccountOperations.empty()
                    }), this.$(".bank-account-not-ready").show().find(".message").text("You can deposit or withdraw after you verify your checking account."), this.checkingAccountOperations.show(s)
                }
                this.showSmartDepositsModal()
            },
            onShow: function() {
                BMT.analytics.track("PageVisited", {
                    Location: "Transfer"
                })
            },
            startRollover: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Location: "Transfer",
                    Name: "Rollover",
                    Type: "Button"
                }), BMT.router.navigate("rollover", !0, {
                    prevPage: BMT.currentPage
                })
            },
            showSmartDepositsModal: function() {
                var e = this.options.showSmartDepositsModal && !BMT.accounts().withSmartDepositEnabled().length && !BMT.user.isSuspended() && !BMT.accountGroup.isSuspended() && BMT.accounts().withSmartDepositEligible().length;
                if (e) {
                    var t = y.withoutConfig();
                    this.listenTo(t, "finish", function(e) {
                        this.model = BMT.selectedAccount = e.get("account"), this.render()
                    }), b.show(t), this.options.showSmartDepositsModal = !1
                }
            },
            changeAccount: function(e) {
                this.model = BMT.selectedAccount = BMT.accounts().get(e), this.render()
            },
            showUpcomingTransfers: function() {
                this.upcomingTransfers.show(new d)
            }
        })
    }), define("hbs!views/invite/emptyInviteTable", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="row dark no-invites">\n    No invites yet.\n</div>\n'
        });
        return t.registerPartial("views/invite/emptyInviteTable", n), n
    }), define("models/invite", ["jquery", "underscore", "backbone", "common/betterment.models", "models/visitor"], function(e, t, n, r, i) {
        var s = r.Model.extend({
                url: "/invites",
                labels: {
                    email: "Email address"
                },
                resend: function() {
                    this.set("id", this.get("referralLinkId")), this.save()
                },
                validation: {
                    firstName: {
                        required: !1,
                        pattern: "alphaPlus",
                        msg: "First name is required and can only contain letters and hyphens"
                    },
                    email: {
                        required: function(e, t, n) {
                            var r = this.get("type");
                            return r === "EMAIL"
                        },
                        pattern: "email"
                    },
                    type: {
                        required: !0
                    }
                }
            }),
            o = r.Collection.extend({
                model: s,
                urlRoot: "/invites"
            });
        return {
            Model: s,
            Collection: o
        }
    }), define("views/invite/sentInviteView", ["jquery", "underscore", "backbone", "marionette", "common/betterment.views", "models/visitor"], function(e, t, n, r, i, s) {
        return i.View.extend({
            template: "#invite/sentInvite",
            className: "alternating-row",
            events: {
                "click button.resend:not([disabled])": "resendInvite"
            },
            templateHelpers: {
                statusClass: function() {
                    if (this.status === "Expired") return "expired"
                }
            },
            resendInvite: function(t) {
                BMT.analytics.track("ElementClicked", {
                    Name: "ResendInvite",
                    Type: "Button",
                    Location: "Invite"
                }), e(t.currentTarget).prop("disabled", !0).text("Resent"), this.model.resend()
            }
        })
    }), define("viewHelpers/inviteViewHelpers", ["jquery", "models/invite", "models/visitor"], function(e, t, n) {
        return {
            sendEmailInvite: function(t) {
                var n = new e.Deferred;
                return t.model.save().then(function() {
                    BMT.analytics.track("InviteSubmitted", {
                        Type: "Email",
                        Location: "EmailInvite",
                        Module: "Invite",
                        PromotionId: BMT.user.get("referralProgram").get("promotionId")
                    }), t.callback && t.callback(), BMT.vent.trigger("updateInvites", t.model), BMT.vent.trigger("incrementMeterInvites"), n.resolve(t)
                }, function() {
                    n.reject()
                }), n.promise()
            },
            templateHelpers: {
                extraHeaderText: function() {
                    var e, t = this.senderPrize(),
                        n = this.receiverPrize();
                    return t === n ? e = ["you both get", t] : e = ["you get", t, "and your friend gets", n], e.join(" ")
                },
                headerIntroText: function() {
                    var e, t = this.senderPrize(),
                        n = this.receiverPrize();
                    return t === n ? e = " and " : e = ", ", e
                },
                isTimePrize: function() {
                    return BMT.user.get("referralProgram").get("prizeType") === "time"
                },
                linkDisplayName: function() {
                    var e = 12;
                    return BMT.user.get("personalReferralLink").slice(e)
                },
                senderPrize: function() {
                    return BMT.user.get("referralProgram").get("senderPrize")
                },
                senderPrizeAmount: function() {
                    return BMT.user.get("referralProgram").num("senderPrizeAmount")
                },
                receiverPrize: function() {
                    return BMT.user.get("referralProgram").get("receiverPrize")
                },
                receiverPrizeAmount: function() {
                    return BMT.user.get("referralProgram").num("receiverPrizeAmount")
                },
                meterSenderPrize: function() {
                    return BMT.user.get("referralProgram").get("meterSenderPrize")
                },
                minimumDeposit: function() {
                    return this.money(BMT.user.get("referralProgram").num("minimumDeposit"), 2)
                },
                hasMinimumDeposit: function() {
                    return BMT.user.get("referralProgram").num("minimumDeposit") > 0
                },
                expirationDays: function() {
                    return BMT.user.get("referralProgram").get("expirationDays")
                }
            }
        }
    }), define("views/invite/meteredInviteLinkAreaView", ["jquery", "underscore", "backbone", "common/betterment.views", "models/invite", "models/visitor", "components/common/scripts/services/browserService", "components/common/scripts/services/domainService", "viewHelpers/inviteViewHelpers"], function(e, t, n, r, i, s, o, u, a) {
        return r.View.extend({
            template: "invite/meteredInviteLinkArea",
            className: "metered-invite-box",
            events: {
                "click #emailInviteButton": "addEmailInvite"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "incrementMeterInvites", function() {
                    this.hideAllValidation(!1), this.incrementMeterInvites()
                }, this), this.meterCompleteCount = 0
            },
            templateHelpers: t.extend({}, a.templateHelpers),
            onRender: function() {
                o.isIE9() && this.$(".email").val("Email")
            },
            validation: {
                model: new i.Model({
                    type: "EMAIL"
                })
            },
            incrementMeterInvites: function() {
                this.meterCompleteCount++, this.$("#circle-" + this.meterCompleteCount).addClass("filled-blue-background", 1e3), this.meterCompleteCount > 1 && this.$("#line-" + this.meterCompleteCount).addClass("filled-blue-background", 1e3), this.meterCompleteCount > 2 && (this.$("#referralHeader").text("You're almost there!"), this.$("#referralSubheader").html('Talk to your friends to make it happen. Get some tips <a class="referral-blog-post" target="_blank" data-track-event="ElementClicked" data-track-location="Invite" data-track-type="Link" data-track-name="ReferralFriendAdvice" data-track-module="Invite" href="' + u.brochureHost() + '/resources/personal-finance/goals-and-advice/how-talk-about-money-friends-family/">' + "from this blog post.</a>"), this.$("#emailInviteButton").text("Invite more friends"), this.$(".input-field").hide(), this.$(".emails").hide())
            },
            resetMeterInvites: function() {
                this.meterCompleteCount = 0, this.$(".input-field").show(), this.$(".emails").show(), e("#referralHeader").html("Give BetaSmartz to 3 friends and earn <strong>" + this.templateHelpers.headerCopy() + "</strong>"), this.$("#referralSubheader").html(this.templateHelpers.subHeaderCopy()), this.$("#emailInviteButton").text("Send invite" + (this.hasMoreThanOneInvite() ? "s" : "")), this.$(".circle").removeClass("filled-blue-background", 1e3), this.$(".line").removeClass("filled-blue-background", 1e3)
            },
            addEmailInvite: function(n) {
                if (this.meterCompleteCount > 2) {
                    this.resetMeterInvites();
                    return
                }
                var r = t.chain(this.$("input[name=email]")).filter(function(t) {
                        return e(t).val() !== ""
                    }).map(function(t) {
                        var n = e(t);
                        return {
                            model: this.model,
                            field: n,
                            email: n.val(),
                            callback: function() {
                                n.val(""), this.model = new i.Model({
                                    type: "EMAIL"
                                })
                            }.bind(this)
                        }
                    }, this).value(),
                    s = t.reduce(r, function(e, t) {
                        return e && !t.model.validate({
                            email: t.email
                        })
                    }, !0);
                if (r.length === 0 || !s) {
                    this.triggerAllValidation();
                    return
                }
                var o = t.map(r, function(e) {
                    return e.model.set("email", e.email), a.sendEmailInvite(e)
                }, this);
                this.block(), e.when.apply(this, o).done(function() {
                    this.unblock(), r.length > 1 ? BMT.flash("Your invites have been sent. You can track them below.") : BMT.flash("An invite has been sent to " + r[0].email + ". You can track it below.")
                }.bind(this)).fail(function() {
                    this.unblock()
                }.bind(this))
            }
        })
    }), define("views/invite/inviteView", ["common/betterment.views", "hbs!views/invite/emptyInviteTable", "models/invite", "models/visitor", "views/invite/sentInviteView", "views/invite/meteredInviteLinkAreaView", "viewHelpers/inviteViewHelpers"], function(e, t, n, r, i, s, o) {
        return e.View.extend({
            template: "invite/invite",
            tagName: "div",
            id: "invite",
            regions: {
                inviteLinkAreaRegion: "#inviteLinkAreaRegion",
                table: "#tableContents"
            },
            toolTips: {
                "#statusHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: o.templateHelpers,
            onInitialize: function() {
                this.inviteCollection = new n.Collection, this.listenTo(BMT.vent, "updateInvites", function(e) {
                    this.inviteCollection.unshift(e, {
                        silent: !0
                    }), this.showPendingInvites()
                }, this)
            },
            onRender: function() {
                var e = new n.Model({
                    type: "EMAIL"
                });
                this.inviteLinkAreaView = new s({
                    model: e
                }), this.inviteLinkAreaRegion.show(this.inviteLinkAreaView)
            },
            showPendingInvites: function(n) {
                this.table.show(new(e.CollectionView.extend({
                    collection: this.inviteCollection,
                    getChildView: function() {
                        return i
                    },
                    emptyView: e.View.extend({
                        template: t
                    })
                })))
            },
            onShow: function() {
                BMT.analytics.track("PageVisited", {
                    Location: "Invite"
                });
                var e = this;
                r.getExperiences().getExperimentAndMarkConverted("invite_button_design"), this.inviteCollection.fetch({
                    url: e.inviteCollection.urlRoot,
                    success: function(t) {
                        e.showPendingInvites()
                    }
                })
            }
        })
    }), define("hbs!views/portfolio/portfolio", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel card body clearfix">\n    <div class="header-region clearfix"></div>\n\n  <div class="info">\n        <div class="positions-table-region"></div>\n        <div class="questions-region"></div>\n    </div>\n  <div class="sidebar">\n        <div class="controls-title">your current portfolio</div>\n        <div class="donut-region"></div>\n        <div class="allocation-info-region"></div>\n        <div class="rebalancing-region"></div>\n    </div>\n\n    </div>\n'
        });
        return t.registerPartial("views/portfolio/portfolio", n), n
    }), define("common/constants/driftStatus", ["components/common/scripts/constants/colors"], function(e) {
        return {
            NORMAL: {
                label: "NORMAL",
                color: e.DRIFT_STATUS.NORMAL
            },
            HIGH: {
                label: "HIGH",
                color: e.DRIFT_STATUS.HIGH
            },
            TRANSITION: {
                label: "TRANSITION",
                color: e.DRIFT_STATUS.TRANSITION
            }
        }
    }), define("services/positionService", ["underscore", "common/constants/driftStatus", "components/account/scripts/models/positionCollection", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n, r) {
        var i = .03;
        return {
            getTaxlessRebalanceAmount: function(t) {
                if (!t.length) return 0;
                var n = t.groupPositionsByRegion(),
                    r = e.max(n, function(e) {
                        return e.sum("drift")
                    }),
                    i = r.sum("allocation"),
                    s = r.sum("drift"),
                    o = i - s;
                if (o === 0) return 0;
                var u = i / o - 1,
                    a = u * t.totalValue();
                return a.round(2)
            },
            arePositionsInTransition: function(e) {
                return e.any(function(e) {
                    return e.calculateTargetAllocation() === 0 && e.num("allocation") > 0
                })
            },
            getDriftStatus: function(e) {
                return this.arePositionsInTransition(e) ? t.TRANSITION : e.drift() > i ? t.HIGH : t.NORMAL
            }
        }
    }), define("services/userService", [], function() {
        return {
            getCurrentUser: function() {
                return BMT.user
            }
        }
    }), define("viewHelpers/accountViewHelpers", ["services/accountService", "components/portfolio/scripts/services/portfolioSetService", "services/userService"], function(e, t, n) {
        return {
            getSelectedAccountIdParams: function() {
                return BMT.selectedAccount.getIdParams()
            },
            preloadSelectedAccount: function() {
                var t = BMT.accounts().get(BMT.selectedAccount.get("id"));
                return t ? e.loadDependenciesForAccount(t) : BMT.refreshAccounts().then(function(t) {
                    return e.loadDependenciesForAccount(t.get(BMT.selectedAccount.get("id")))
                })
            },
            goalTermAsAge: function(e) {
                var t = n.getCurrentUser(),
                    r = t.dateOfBirth(),
                    i = e.date("goalCompletionDate");
                return r.yearsBetween(i)
            }
        }
    }), define("hbs!views/common/tabHeader", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/autoTransactionIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="goal-amount stat">\n            <div class="heading">Goal Type</div>\n            <div class="value">', (s = n.goalTypeName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.goalTypeName, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</div>\n        </div>\n    ", r
            }

            function p(e, t) {
                var r = "",
                    i;
                r += "\n        ", i = n["if"].call(e, e && e.isIncome, {
                    hash: {},
                    inverse: l.program(6, v, t),
                    fn: l.program(4, d, t)
                });
                if (i || i === 0) r += i;
                return r += "\n    ", r
            }

            function d(e, t) {
                return '\n            <div class="goal-amount stat">\n                <div class="heading">Goal Type</div>\n                <div class="value">Retirement Income</div>\n            </div>\n        '
            }

            function v(e, t) {
                var r = "",
                    i, s;
                r += '\n            <div class="goal-amount stat">\n                <div class="heading">Target</div>\n                <div class="value">\n                    <span display>\n                        ', (s = n.goalTargetPlaceholder) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.goalTargetPlaceholder, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s);
                if (i || i === 0) r += i;
                return r += "\n                    </span>\n                    <div editable>\n                        $ <input money-input />\n                    </div>\n                </div>\n            </div>\n        ", r
            }

            function m(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <button class="round circle smart-deposit help-text">\n            ' + f((i = n.autoTransactionIcon || e && e.autoTransactionIcon, s = {
                    hash: {}
                }, i ? i.call(e, "smartDeposit", s) : c.call(e, "autoTransactionIcon", "smartDeposit", s))) + "\n        </button>\n    ", r
            }

            function g(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n        <button class="round circle auto-deposit help-text">\n            ' + f((s = n.autoTransactionIcon || e && e.autoTransactionIcon, o = {
                    hash: {}
                }, s ? s.call(e, "autoDeposit", o) : c.call(e, "autoTransactionIcon", "autoDeposit", o))) + '\n            <div class="help-content">\n                <div class="bold-text">Auto-deposit</div>\n                <div class="value">', (s = n.autoDepositSummary) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.autoDepositSummary, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</div>\n            </div>\n        </button>\n    ", r
            }

            function y(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n        <button class="round circle auto-withdrawal help-text">\n            ' + f((s = n.autoTransactionIcon || e && e.autoTransactionIcon, o = {
                    hash: {}
                }, s ? s.call(e, "autoWithdrawal", o) : c.call(e, "autoTransactionIcon", "autoWithdrawal", o))) + '\n            <div class="help-content">\n                <div class="bold-text">Auto-withdrawal</div>\n                <div class="value">', (s = n.autoWithdrawalSummary) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.autoWithdrawalSummary, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</div>\n            </div>\n        </button>\n    ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this,
                c = n.helperMissing;
            s += '<div class="goal-selector-region"></div>\n<div class="details">\n    <div class="stat">\n        <div class="heading">Balance</div>\n        <div class="value">', (u = n.totalBalanceWithPending) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.totalBalanceWithPending, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</div>\n    </div>\n    ", o = n["if"].call(t, t && t.isAccountInPlan, {
                hash: {},
                inverse: l.program(3, p, i),
                fn: l.program(1, h, i)
            });
            if (o || o === 0) s += o;
            s += '\n</div>\n<div class="right actions">\n    ', o = n["if"].call(t, t && t.hasSmartDeposit, {
                hash: {},
                inverse: l.noop,
                fn: l.program(8, m, i)
            });
            if (o || o === 0) s += o;
            s += "\n    ", o = n["if"].call(t, t && t.hasAutoDeposit, {
                hash: {},
                inverse: l.noop,
                fn: l.program(10, g, i)
            });
            if (o || o === 0) s += o;
            s += "\n    ", o = n["if"].call(t, t && t.hasAutoWithdrawal, {
                hash: {},
                inverse: l.noop,
                fn: l.program(12, y, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    <span class="account-status-region"></span>\n    <span class="account-settings-region"></span>\n</div>\n', s
        });
        return t.registerPartial("views/common/tabHeader", n), n
    }), define("viewHelpers/automaticTransaction/frequencyStrategies", ["components/common/scripts/util/handlebarsHelpers", "components/automaticTransaction/scripts/constants/automaticTransactionFrequency"], function(e, t) {
        var n = {};
        return n[t.FIRST_TUESDAY_OF_THE_MONTH] = function(t) {
            return {
                frequencyText: function() {
                    return e.s("on the " + "First Tuesday".bold() + " of each month")
                }
            }
        }, n[t.MONTHLY] = function(t) {
            return {
                frequencyText: function() {
                    var n = t.date("transactionDateTime1");
                    return e.s("on the " + n.dateWithOrdinal().bold() + " of each month")
                }
            }
        }, n[t.TWICE_A_MONTH] = function(t) {
            return {
                frequencyText: function() {
                    var n = t.date("transactionDateTime1"),
                        r = t.date("transactionDateTime2"),
                        i = "";
                    if (t.hasBothDatesSelected()) {
                        var s = n.isBefore(r) ? [n, r] : [r, n];
                        i = "on the " + s[0].dateWithOrdinal().bold() + " &amp; " + s[1].dateWithOrdinal().bold() + " of each month"
                    } else if (t.hasAnyDateSelected()) {
                        var o = t.has("transactionDateTime1") ? t.date("transactionDateTime1") : t.date("transactionDateTime2");
                        i = "on the " + o.dateWithOrdinal().bold() + " of each month"
                    }
                    return e.s(i)
                }
            }
        }, n[t.EVERY_OTHER_WEEK] = function(t) {
            return {
                frequencyText: function() {
                    var n = t.date("transactionDateTime1");
                    return e.s("every other " + n.getDayName().bold())
                }
            }
        }, n[t.WEEKLY] = function(t) {
            return {
                frequencyText: function() {
                    var n = t.date("transactionDateTime1");
                    return e.s("every " + n.getDayName().bold())
                }
            }
        }, n[t.ANNUALLY] = function(e) {
            return {
                frequencyText: function() {
                    var t = e.date("transactionDateTime1"),
                        n = t.getMonthName() + " " + t.dateWithOrdinal();
                    return "on " + n.bold() + " every year"
                }
            }
        }, n
    }), define("viewHelpers/automaticTransactionViewHelpers", ["components/automaticTransaction/scripts/constants/automaticTransactionFrequency", "components/automaticTransaction/scripts/services/automaticTransactionService", "viewHelpers/automaticTransaction/frequencyStrategies"], function(e, t, n) {
        return {
            withTransaction: function(e) {
                if (!e) return;
                var t = e.get("frequency"),
                    r = n[t];
                return {
                    frequencyHelpers: r(e)
                }
            },
            isDefaultAutoWithdrawal: function(e) {
                var n = t.netMonthlyTransactionAmount(e);
                return n < 0 || n === 0 && e.isIncome()
            }
        }
    }), define("views/common/dropdown/planGoalSelectorView", ["underscore", "services/retirementPlanService", "views/common/dropdown/dropdownView", "views/common/addGoalView", "models/visitor"], function(e, t, n, r, i) {
        var s = {
                className: "btn-group goal-selector plan-selector",
                onInitialize: function() {
                    n.prototype.onInitialize.apply(this, arguments), this.selectedValue = this.options.selectedValue || BMT.selectedAccount.get("id")
                },
                onSelected: function(e) {
                    e.preventDefault();
                    var t = $(e.currentTarget),
                        n = t.data("value"),
                        i = t.data("actionName"),
                        s = t.data("eventName");
                    i ? i === "go-to-plan" ? BMT.router.navigate("retireGuide", !0) : i === "go-to-plan-setup" ? BMT.user.get("financialPlans").selected().isNew() ? BMT.router.navigate("retireGuideStart", !0) : BMT.router.navigate("retireGuideSetup", !0) : i === "add-goal" && r.show() : BMT.selectedAccount = BMT.accounts().get(n), s && this.trigger(s, {
                        value: n,
                        actionName: i
                    })
                }
            },
            o = {
                create: function(t) {
                    t = t || {};
                    var n = BMT.user.get("financialPlans").selected(),
                        r = [],
                        i = [],
                        s = [];
                    return BMT.accounts().each(function(e) {
                        var t = {
                            name: e.get("name"),
                            value: e.get("id"),
                            eventName: "accountChanged"
                        };
                        n.is("complete") ? n.hasPlanAccount(e.getIdParams()) ? i.push(t) : s.push(t) : r.push(t)
                    }), n.is("complete") && i.length > 0 && (r.push({
                        name: "RetireSmart Goals",
                        divider: !0
                    }), r = r.concat(i)), n.is("complete") && s.length > 0 && (i.length > 0 && r.push({
                        name: "Other Goals",
                        divider: !0
                    }), r = r.concat(s)), r.push({
                        divider: !0
                    }), n.is("complete") || t.selectedPlan ? (r.push({
                        name: "RetireSmart",
                        action: "go-to-plan",
                        value: t.selectedPlan
                    }), t.selectedValue = t.selectedValue || t.selectedPlan) : r.push({
                        name: "Set up RetireSmart",
                        action: "go-to-plan-setup",
                        value: "plan-setup"
                    }), r.push({
                        name: BMT.accountGroup.allowsIRAs() ? "Add Goal or IRA" : "Add Goal",
                        action: "add-goal"
                    }), new u(e.extend({
                        items: r
                    }, t))
                }
            },
            u = n.extend(s, o);
        return u
    }), define("views/common/tabHeaderView", ["jquery", "underscore", "modules/modals", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "components/common/scripts/util/formatter", "components/common/scripts/constants/accountStatus", "hbs!views/common/tabHeader", "views/common/addGoalView", "views/common/accountSettingsView", "views/common/accountStatusView", "views/transfer/automaticTransactionSettingsModalView", "views/transfer/automaticWithdrawalSettingsView", "views/transfer/automaticDepositSettingsView", "viewHelpers/automaticTransactionViewHelpers", "components/common/scripts/services/projectorService", "components/automaticTransaction/scripts/services/automaticTransactionService", "components/account/scripts/services/goalTypeService", "views/common/dropdown/goalSelectorView", "views/common/dropdown/planGoalSelectorView", "views/common/smartDepositSettingsView"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w) {
        var E = {
                template: u,
                id: "tabHeader",
                events: {
                    "keyup .goal-amount input": "goalAmountChanged",
                    "click .goal-amount [display]": "editGoalAmount",
                    "click .auto-withdrawal": "openAutomaticWithdrawalSettings",
                    "click .auto-deposit": "openAutomaticDepositSettings",
                    "click .smart-deposit": "showSmartDepositSettings"
                },
                regions: {
                    goalSelectorRegion: ".goal-selector-region",
                    accountSettings: ".account-settings-region",
                    accountStatus: ".account-status-region"
                },
                templateHelpers: {
                    goalTypeName: function() {
                        return g.getLabelForAccount(BMT.selectedAccount)
                    },
                    isIncome: function() {
                        return this.self.model.is("income")
                    },
                    goalTargetPlaceholder: function() {
                        return this.self.goalTargetPlaceholder()
                    },
                    goalAmount: function() {
                        return this.money(this.self.model.num("goalAmount"), 0)
                    },
                    totalBalanceWithPending: function() {
                        return this.money(this.self.model.getCurrentBalanceWithPending())
                    },
                    hasAutoDeposit: function() {
                        return this.self.model.hasAutoDeposit()
                    },
                    hasAutoWithdrawal: function() {
                        return this.self.model.hasAutoWithdrawal()
                    },
                    isAccountInPlan: function() {
                        return this.self.model.isInPlan()
                    },
                    autoWithdrawalSummary: function() {
                        var e = this.self.model.get("automaticWithdrawal"),
                            t = d.withTransaction(e),
                            n = "";
                        return e && (n = this.money(e.num("amount")) + " " + t.frequencyHelpers.frequencyText()), r.s(n)
                    },
                    autoDepositSummary: function() {
                        var e = this.self.model.get("automaticDeposit"),
                            t = d.withTransaction(e),
                            n = "";
                        return e && (n = this.money(e.num("amount")) + " " + t.frequencyHelpers.frequencyText()), r.s(n)
                    },
                    hasSmartDeposit: function() {
                        var e = this.self.model.get("smartDepositConfig");
                        return e && e.is("enabled")
                    },
                    nextSmartDepositTransactionDate: function() {
                        var e = this.self.model.get("smartDepositConfig");
                        return e && e.date("nextTransactionOn").toString("dddd, MMMM dd, yyyy")
                    }
                },
                toolTips: {
                    ".auto-deposit": {
                        position: {
                            my: "bottom center",
                            at: "top center"
                        }
                    },
                    ".auto-withdrawal": {
                        position: {
                            my: "bottom center",
                            at: "top center"
                        }
                    }
                },
                editable: {
                    goalAmount: {
                        section: ".goal-amount",
                        formatter: {
                            "in": function(e) {
                                return e ? s.integer(e) : ""
                            },
                            out: function(e) {
                                return s.money(e, 0)
                            }
                        }
                    }
                },
                onInitialize: function() {
                    this.listenTo(this.model, "change", function() {
                        this.render()
                    }.bind(this))
                },
                onRender: function() {
                    var e = BMT.currentPage === "advice" ? b.create() : y.create({
                        includeAddGoal: !0
                    });
                    this.listenTo(e, "accountChanged", function() {
                        this.trigger("changeAccount", BMT.selectedAccount)
                    }), this.goalSelectorRegion.show(e);
                    var t = new f({
                        model: this.model
                    });
                    this.listenTo(t, "editGoalAmount", function() {
                        this.editGoalAmount()
                    }.bind(this)), this.listenTo(t, "deleteAccount", function() {
                        this.trigger("deleteAccount")
                    }.bind(this)), this.accountSettings.show(t), this.model.isInPlan() || this.renderAccountStatus()
                },
                renderAccountStatus: function() {
                    var e = v.getGoalStatus(this.model, {
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    });
                    if (e !== o.NO_TARGET) {
                        var t = new l({
                            model: this.model
                        });
                        this.listenTo(t, "goalStatusClicked", function(e) {
                            this.trigger("goalStatusClicked", e)
                        }), this.accountStatus.show(t)
                    }
                },
                editGoalAmount: function() {
                    var e = this.editables.goalAmount;
                    return e.edit(this.model.num("goalAmount")), this.listenTo(e, "save", this.onSaveGoalAmount), !1
                },
                goalAmountChanged: function(e) {
                    return this.trigger("targetChanged", {
                        goalBalance: this.$(".goal-amount input").numberVal()
                    }), !1
                },
                onSaveGoalAmount: function(e) {
                    this.block();
                    var t = this.model.get("goalAmount"),
                        n = parseInt(this.formatter.removeCommas(e), 10) || 0;
                    this.model.save({
                        goalAmount: n
                    }, {
                        complete: function() {
                            this.unblock(), this.renderAccountStatus(), this.updateGoalTargetPlaceholder(e), BMT.analytics.track("GoalUpdated", {
                                Name: "GoalTarget",
                                Value: n,
                                OldValue: t,
                                Location: "Advice",
                                GoalId: this.model.get("id"),
                                GoalType: this.model.get("goalType")
                            })
                        }.bind(this)
                    })
                },
                goalTargetPlaceholder: function() {
                    return this.model.has("goalAmount") && this.model.num("goalAmount") ? this.formatter.money(this.model.num("goalAmount"), 0) + '<span class="grey-pen"></span>' : '<a href="#"">Add target</a>'
                },
                updateGoalTargetPlaceholder: function(e) {
                    var t = this.goalTargetPlaceholder();
                    this.$(".goal-amount [display]").html(t)
                },
                openAutomaticWithdrawalSettings: function() {
                    var e = c.openForAccount(h, this.model);
                    this.listenTo(e, "save", function() {
                        this.trigger("autoTransactionChanged")
                    })
                },
                openAutomaticDepositSettings: function() {
                    var e = c.openForAccount(p, this.model);
                    this.listenTo(e, "save", function() {
                        this.trigger("autoTransactionChanged")
                    })
                },
                showSmartDepositSettings: function() {
                    var e = w.withConfig(this.model.get("smartDepositConfig"));
                    this.listenTo(e, "close", this.render), n.show(e)
                }
            },
            S = {},
            x = i.View.extend(E, S);
        return x
    }), define("views/portfolio/assetClassItemView", ["jquery", "underscore", "common/betterment.views", "components/common/scripts/util/formatter", "components/common/scripts/constants/colors", "components/common/scripts/models/v1/assetClassMetadata"], function(e, t, n, r, i, s) {
        return n.View.extend({
            template: "portfolio/assetClassItem",
            className: "asset-class",
            tagName: "div",
            events: {
                "mouseenter .asset-class-position": "showAssetClassArrow",
                "mouseleave .asset-class-position": "hideAssetClassArrow",
                "mouseenter .why-these": "showExplanationArrow",
                "mouseleave .why-these": "hideExplanationArrow",
                "mouseenter .weight-graph.aggregate": "showDriftBar",
                "mouseleave .weight-graph.aggregate": "hideDriftBar",
                "click .asset-class-position": "toggleTickersExpanded",
                "click .why-these .row-container": "toggleExplanationExpanded",
                "click .collapse-circle": "collapseTickers"
            },
            toolTips: {
                ".weight-graph.aggregate": {
                    position: {
                        my: "left center",
                        at: "right center",
                        adjust: {
                            x: 55
                        }
                    },
                    events: {
                        show: function(t, n) {
                            return e(n.elements.target).hasClass("open")
                        }
                    }
                }
            },
            templateHelpers: {
                model: function() {
                    return this.self.model
                },
                tickerSymbolsWithCommas: function() {
                    return this.commaList(this.self.tickerSymbols())
                },
                tickerPositions: function() {
                    return t.sortBy(this.self.model.get("tickerPositions"), function(e) {
                        return e.position.shares
                    }).reverse()
                },
                color: function() {
                    return this.self.assetClassDecorations().primaryColor
                },
                isInTransition: function() {
                    return this.model().calculateTargetAllocation() === 0 && this.model().num("allocation") !== 0
                },
                isStock: function() {
                    return this.model().getAssetClass().investmentType === "STOCKS"
                },
                driftAmount: function() {
                    return this.formatPercentage(this.model().get("drift"))
                },
                targetWeight: function() {
                    return this.formatPercentage(this.model().calculateTargetAllocation())
                },
                currentWeight: function() {
                    return this.formatPercentage(this.model().num("allocation"))
                },
                formatPercentage: function(e) {
                    var t = .001;
                    return e === 0 ? "0.0%" : Math.abs(e) < t ? "< 0.1%" : this.pct(e, 1)
                },
                explanation: function() {
                    return this.self.assetClassMetadata.getExplanations(this.model().getAssetClassEnum())
                }
            },
            onInitialize: function() {
                if (!this.options.maxAllocation) throw "assetClassItemView must be passed the maximum allocation to scale the bar graph.";
                this.assetClassMetadata = s.get()
            },
            onShow: function() {
                this.updateCurrentWeightBar(), this.updateDriftBar(), this.resizeAllTickerPositionBars()
            },
            tickerSymbols: function() {
                return this.model.get("tickerPositions").map(function(e) {
                    return e.ticker.symbol
                })
            },
            toggleTickersExpanded: function(t) {
                var n = this.$(".position-details"),
                    r = e(t.currentTarget).find(".arrow");
                if (n.is(":animated")) return;
                this.isExpanded() ? (this.collapseTickers(), this.updateDriftBar()) : (this.$el.addClass("expanded"), this.showCurrentWeightBarWithTarget(), this.fadeArrowIn(this.$(".asset-class-position")), r.transition({
                    rotate: "90deg"
                }), n.slideDown(function() {
                    this.$(".collapse-circle").show()
                }.bind(this)))
            },
            toggleExplanationExpanded: function(t) {
                var n = this.$(".why-these"),
                    r = this.$(".why-details"),
                    i = e(t.currentTarget).find(".arrow");
                if (r.is(":animated")) return;
                n.hasClass("expanded") ? (r.slideUp(), i.transition({
                    rotate: "0deg"
                }), n.removeClass("expanded")) : (n.addClass("expanded"), i.transition({
                    rotate: "90deg"
                }), r.slideDown())
            },
            collapseTickers: function() {
                var e = this.$(".position-details"),
                    t = this.$(".asset-class-name .arrow");
                this.$el.removeClass("expanded"), e.slideUp(), t.transition({
                    rotate: "0deg"
                }), this.fadeArrowOut(this.$(".asset-class-position")), this.$(".weight-graph.aggregate").removeClass("open"), this.$(".collapse-circle").hide()
            },
            showAssetClassArrow: function() {
                if (this.isExpanded()) return;
                this.fadeArrowIn(this.$(".asset-class-position")), this.trigger("assetClass:mouseEnter", this.model.getAssetClassEnum())
            },
            hideAssetClassArrow: function() {
                if (this.isExpanded()) return;
                this.fadeArrowOut(this.$(".asset-class-position")), this.trigger("assetClass:mouseLeave", this.model.getAssetClassEnum())
            },
            showExplanationArrow: function() {
                if (this.$(".why-these").hasClass("expanded")) return;
                this.fadeArrowIn(this.$(".why-these"))
            },
            hideExplanationArrow: function() {
                if (this.$(".why-these").hasClass("expanded")) return;
                this.fadeArrowOut(this.$(".why-these"))
            },
            fadeArrowIn: function(e) {
                e.find(".arrow").stop(!0, !0).animate({
                    opacity: "1.0",
                    "margin-left": 0
                }, "fast")
            },
            fadeArrowOut: function(e) {
                e.find(".arrow").stop(!0, !0).animate({
                    opacity: "0.0",
                    "margin-left": "-14px"
                }, "fast")
            },
            scaleWidth: function(e) {
                var t = this.options.maxAllocation,
                    n = 128,
                    r = Math.round(e / t * n);
                return Math.max(r, 0)
            },
            showCurrentWeightBarWithTarget: function() {
                this.$(".weight-graph.aggregate").addClass("open"), this.updateDriftBar(), this.setTargetBarPosition(), this.setDriftAmountPosition()
            },
            setDriftAmountPosition: function() {
                var e = 5,
                    t = this.scaleWidth(this.model.calculateTargetAllocation()),
                    n = this.scaleWidth(this.model.num("allocation")),
                    r = Math.max(t, n) + e;
                this.$(".drift-amount").css("left", r + "px")
            },
            updateCurrentWeightBar: function() {
                var e = this.model.num("allocation"),
                    t = this.model.calculateTargetAllocation(),
                    n = this.scaleWidth(Math.min(e, t));
                this.$(".current-weight-bar").css("width", n + "px")
            },
            updateDriftBar: function() {
                var e = this.scaleWidth(Math.abs(this.model.num("drift"))),
                    t = this.assetClassDecorations(),
                    n;
                this.isExpanded() ? this.isUnderAllocated() ? n = i.BASE_GRAPH.DRIFT : n = t.primaryColor : this.isUnderAllocated() ? n = i.BASE_GRAPH.FILL : n = t.primaryColor, this.$(".drift-bar").css({
                    width: e + "px",
                    "background-color": n
                })
            },
            setTargetBarPosition: function() {
                var e = this.scaleWidth(this.model.calculateTargetAllocation());
                this.$(".target-bar").css("left", e + "px")
            },
            resizeTickerPositionBar: function(e) {
                var t = e.position.value / this.model.num("totalValue"),
                    n = this.scaleWidth(t * this.model.num("allocation"));
                this.$("[data-ticker=" + e.ticker.symbol + "] .shares-bar").css("width", n + "px")
            },
            resizeAllTickerPositionBars: function() {
                this.model.get("tickerPositions").forEach(this.resizeTickerPositionBar.bind(this))
            },
            isUnderAllocated: function() {
                return this.model.num("allocation") < this.model.calculateTargetAllocation()
            },
            isExpanded: function() {
                return this.$el.hasClass("expanded")
            },
            assetClassDecorations: function() {
                var e = this.model.getAssetClassEnum();
                return this.assetClassMetadata.getDecorations(e)
            },
            showDriftBar: function() {
                if (!this.isExpanded()) return;
                this.$(".weight-graph.aggregate .drift-bar").css({
                    "background-color": this.assetClassDecorations().driftColor
                })
            },
            hideDriftBar: function() {
                if (!this.isExpanded()) return;
                this.updateDriftBar()
            }
        })
    }), define("views/portfolio/positionsTableView", ["common/betterment.views", "views/portfolio/assetClassItemView"], function(e, t) {
        return e.CompositeView.extend({
            template: "portfolio/positionsTable",
            getChildView: function() {
                return t
            },
            childViewContainer: ".positions-list",
            toolTips: {
                ".weight-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            templateHelpers: {
                totalBalance: function() {
                    return this.self.collection.totalValue()
                }
            },
            onInitialize: function() {
                var e = this.collection.reduce(function(e, t) {
                    var n = Math.max(t.num("allocation"), t.calculateTargetAllocation());
                    return n > e ? n : e
                }, 0);
                this.childViewOptions = {
                    maxAllocation: e
                }
            },
            onItemAdded: function(e) {
                this.listenTo(e, "assetClass:mouseEnter", function(e) {
                    this.trigger("assetClass:mouseEnter", e)
                }.bind(this)), this.listenTo(e, "assetClass:mouseLeave", function(e) {
                    this.trigger("assetClass:mouseLeave", e)
                }.bind(this))
            },
            onShow: function() {
                this.drawDriftProgressBar(this.collection.drift())
            },
            drawDriftProgressBar: function(e) {
                var t = e / .06,
                    n = this.$(".track").width(),
                    r = Math.min(n, t * n);
                this.$(".drift-bar").css("width", r + "px")
            }
        })
    }), define("components/common/scripts/templateHelpers/pctTrimZeros", ["hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t) {
        e.registerHelper("pctTrimZeros", function(e, n) {
            return t.pctTrimZeros(e, n || 0)
        })
    }), define("hbs!views/portfolio/allocationInfo", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/pctTrimZeros"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<div class="info-box">\n    <div class="info-row">\n        <div class="left">Risk</div>\n        <div class="right risk-label" style="color: ' + l((o = (o = t && t.riskTolerance, o == null || o === !1 ? o : o.color), typeof o === f ? o.apply(t) : o)) + '">\n            ' + l((o = (o = t && t.riskTolerance, o == null || o === !1 ? o : o.label), typeof o === f ? o.apply(t) : o)) + '\n            <div class="risk-help help-icon">\n                 This is the relative risk level of your target allocation considering your time\n                 horizon of ', (u = n.remainingGoalTerm) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.remainingGoalTerm, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ' years.  You can adjust this risk level by\n                 updating your time horizon or target allocation on the Advice tab.\n            </div>\n        </div>\n    </div>\n    <div class="info-row">\n        <div class="left">Target Allocation</div>\n        <div class="right target-allocation">' + l((u = n.pctTrimZeros || t && t.pctTrimZeros, a = {
                hash: {}
            }, u ? u.call(t, t && t.targetAllocation, a) : c.call(t, "pctTrimZeros", t && t.targetAllocation, a))) + ' stocks</div>\n    </div>\n</div>\n<button class="secondary light-blue change-allocation">Adjust target allocation &gt;</button>\n', s
        });
        return t.registerPartial("views/portfolio/allocationInfo", n), n
    }), define("views/portfolio/allocationInfoView", ["hbs!views/portfolio/allocationInfo", "common/betterment.views", "services/allocationService"], function(e, t, n) {
        return t.View.extend({
            template: e,
            events: {
                "click .change-allocation": "onChangeAllocation"
            },
            toolTips: {
                ".risk-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            onChangeAllocation: function() {
                return BMT.analytics.track("ElementClicked", {
                    Name: "ChangeAlloc",
                    Type: "Button",
                    Location: "Portfolio"
                }), BMT.router.navigate("advice", !0), !1
            },
            serializeData: function() {
                return {
                    targetAllocation: this.model.get("allocation"),
                    riskTolerance: n.getRiskToleranceForAccount(this.model),
                    remainingGoalTerm: this.model.remainingGoalTerm()
                }
            }
        })
    }), define("components/portfolio/scripts/views/positionsDonutView", ["underscore", "components/portfolio/scripts/views/donutView", "components/portfolio/scripts/services/donutService"], function(e, t, n) {
        var r = {
                initDonutData: function() {
                    this.donutData = n.transformPositions(this.model.get("positions"))
                },
                updateDonutData: function(e) {
                    n.updateWithPositions(this.model.get("positions"), this.donutData)
                },
                getAllocation: function() {
                    var t = e.find(this.donutData.aggData, function(e) {
                        return e.investmentType === "stocks"
                    });
                    return t.allocation
                }
            },
            i = t.extend(r);
        return i
    }), define("views/common/questionsView", ["common/betterment.views"], function(e) {
        return e.View.extend({
            tagName: "ul",
            className: "question-boxes",
            events: {
                "click li": "onQuestionClick"
            },
            onQuestionClick: function(e) {
                var t = $(e.currentTarget),
                    n = t.find(".question").text(),
                    r = t.find(".content").html();
                BMT.alert({
                    title: n,
                    body: r,
                    width: 700,
                    bodyAttrs: {
                        style: "width: auto;"
                    }
                })
            }
        })
    }), define("views/portfolio/rebalancingView", ["common/betterment.views", "components/transaction/scripts/constants/transactionConstants", "common/constants/driftStatus", "services/positionService"], function(e, t, n, r) {
        var i = .3;
        return e.View.extend({
            template: "portfolio/rebalancing",
            toolTips: {
                ".transition-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                },
                ".drift-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            templateHelpers: {
                account: function() {
                    return this.self.options.account
                },
                drift: function() {
                    return this.self.collection.drift()
                },
                driftStatus: function() {
                    return r.getDriftStatus(this.self.collection)
                },
                rebalancingEnabled: function() {
                    return this.account().get("rebalanceEnabled") !== !1
                },
                rebalanceAmount: function() {
                    return r.getTaxlessRebalanceAmount(this.self.collection)
                },
                rebalanceAmountIsInValidRange: function() {
                    var e = this.rebalanceAmount();
                    return e >= t.MINIMUM && e < i * this.self.collection.totalValue()
                },
                showRebalanceTip: function() {
                    return !this.account().isIRA() && this.driftStatus() !== n.TRANSITION && this.rebalanceAmountIsInValidRange()
                },
                showDriftGraph: function() {
                    return !this.isPortfolioTransitioning()
                },
                isPortfolioTransitioning: function() {
                    return this.driftStatus() === n.TRANSITION
                },
                isDriftNormal: function() {
                    return this.driftStatus() === n.NORMAL
                },
                isDriftHigh: function() {
                    return this.driftStatus() === n.HIGH
                }
            },
            onShow: function() {
                this.drawDriftProgressBar(this.collection.drift())
            },
            drawDriftProgressBar: function(e) {
                var t = .06,
                    n = this.$(".track").width(),
                    r = Math.min(n, e / t * n);
                this.$(".drift-bar").css("width", r + "px")
            }
        })
    }), define("views/portfolio/portfolioView", ["jquery", "underscore", "common/betterment.views", "hbs!views/portfolio/portfolio", "components/account/scripts/models/positionCollection", "components/portfolio/scripts/services/portfolioSetService", "services/positionService", "components/portfolio/scripts/services/donutService", "viewHelpers/accountViewHelpers", "views/common/tabHeaderView", "views/portfolio/positionsTableView", "views/portfolio/allocationInfoView", "components/portfolio/scripts/views/targetPortfolioDonutView", "components/portfolio/scripts/views/positionsDonutView", "views/common/questionsView", "views/portfolio/rebalancingView", "components/common/scripts/models/v1/assetClassMetadata"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
        return n.View.extend({
            template: r,
            id: "portfolio",
            regions: {
                header: ".header-region",
                donutRegion: ".donut-region",
                positionsTableRegion: ".positions-table-region",
                allocationInfoRegion: ".allocation-info-region",
                rebalancingRegion: ".rebalancing-region",
                questionsRegion: ".questions-region"
            },
            onInitialize: function() {
                BMT.selectedAccount = BMT.selectedAccount || BMT.accounts().first(), this.assetClassMetadata = m.get()
            },
            onRender: function() {
                this.preloadStart(), this.loadAndRenderAccount().then(this.preloadComplete.bind(this))
            },
            reRender: function() {
                this.block(), this.loadAndRenderAccount().then(this.unblock.bind(this))
            },
            onShow: function() {
                BMT.analytics.track("PageVisited", {
                    Location: "Portfolio"
                })
            },
            loadAndRenderAccount: function() {
                return a.preloadSelectedAccount().then(function(e) {
                    this.account = e, this.renderSubViews()
                }.bind(this))
            },
            renderSubViews: function() {
                this.donut = new p({
                    model: this.account
                }), this.donutRegion.show(this.donut), this.positionsTable = this.createPositionsTable(), this.positionsTableRegion.show(this.positionsTable);
                var e = new f({
                    model: this.account
                });
                this.listenTo(e, "changeAccount", this.reRender), this.listenTo(e, "deleteAccount", this.reRender), this.header.show(e), this.allocationInfoRegion.show(new c({
                    model: this.account
                })), this.rebalancingRegion.show(new v({
                    collection: this.getPositionsCollection(),
                    account: this.account
                })), this.questionsRegion.show(new d({
                    template: "portfolio/questions"
                })), this.listenTo(this.positionsTable, "assetClass:mouseEnter", function(e) {
                    this.donut.expandSliceWithName(e)
                }.bind(this)), this.listenTo(this.positionsTable, "assetClass:mouseLeave", function(e) {
                    this.donut.contractAllSlices()
                }.bind(this))
            },
            getPositionsCollection: function() {
                return this.account.get("positions")
            },
            createPositionsTable: function() {
                return new l({
                    collection: this.getPositionsCollection()
                })
            }
        })
    }), define("hbs!views/advice/advice", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel card body">\n    <div class="plan-region clearfix"></div>\n    <div class="header-region clearfix"></div>\n    <div class="clearfix">\n        <div class="left sidebar setting">\n            <div class="allocation-region"></div>\n            <div class="donut-region"></div>\n       <div class="multi-allocation-region"></div>\n        </div>\n        <div class="right">\n            <div class="settings-row">\n                <div class="inner">\n                    <div class="auto-transaction-region setting"></div>\n                    <div class="one-time-deposit-region setting"></div>\n                    <div class="term-region setting"></div>\n                </div>\n                <div class="collapse-circle">\n                    <span class="collapse-label">Hide recommendations</span>\n                </div>\n            </div>\n            <div class="market-performance-region"></div>\n            <div class="graph-region"></div>\n        </div>\n    </div>\n\n    <div class="save-buttons">\n        <button class="set-all">Set</button>\n        <button class="reset-all silver">Reset</button>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/advice/advice", n), n
    }), define("hbs!views/advice/noTargetFlyover", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h2>Setting up your account for growth</h2>\n<ul>\n    <li>Try different one-time or auto deposit combinations to see the effect of various asset allocations, and customize the growth of your account.</li>\n    <li>Add a target balance to get recommendations on reaching that target.</li>\n</ul>\n<button class="dismiss-flyover">Great! Got it.</button>\n'
        });
        return t.registerPartial("views/advice/noTargetFlyover", n), n
    }), define("hbs!views/advice/targetFlyover", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h2>Setting up your account for growth</h2>\n<ul>\n    <li>Try different one-time or auto deposit combinations to see the effect of various asset allocations, and customize the growth of your account.</li>\n    <li>Once you like what you see, click "Set" to start the deposits flowing.</li>\n</ul>\n<button class="dismiss-flyover">Great! Got it.</button>\n'
        });
        return t.registerPartial("views/advice/targetFlyover", n), n
    }), define("models/v1/allocationChangeTaxImpact", ["models/v1/baseTaxImpact"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("account").getEndpoint() + "/allocation-change-tax-impacts"
            },
            defaults: {
                type: "ALLOCATION_CHANGE"
            }
        };
        return e.extend(t)
    }), define("viewHelpers/phoneNumberFormatter", [], function() {
        var e = function(e) {
            return e.substr(0, 3) + "-" + e.substr(3, 3) + "-" + e.substr(6, 4)
        };
        var xxw = function(e) {
            return e.substr(0, 4) + "-" + e.substr(4, 3) + "-" + e.substr(7, 4)
        };

        return {
            format: function(t) {
                if (t.length === 10) return e(t);
                if (t.length === 11) return xxw(t);
                throw new Error("phoneNumber must be 10 or 11 digits")
            }
        }
    }), define("models/v1/advisor", ["jquery", "underscore", "models/v1/baseModels", "models/v1/firm"], function(e, t, n, r) {
        var i = {
                endpoint: "/advisors"
            },
            s = {
                fetchByToken: function(n, r) {
                    var i = new o({
                        token: n
                    });
                    return r = t.extend(r || {}, {
                        data: e.param({
                            token: n
                        })
                    }), i.fetch(r)
                }
            },
            o = n.Model.extend(i, s);
        return o
    }), define("services/advisorFetcher", ["jquery", "models/v1/advisor"], function(e, t) {
        var n;
        return {
            get: function() {
                return n
            },
            fetch: function() {
                var r = new e.Deferred;
                if (n) return r.resolve(n), r.promise();
                var i = new t({
                    id: BMT.user.get("advisorId")
                });
                return i.fetch({
                    success: function() {
                        n = i, r.resolve(i)
                    },
                    error: function() {
                        r.reject()
                    }
                }), r.promise()
            }
        }
    }), define("views/advice/batchSettingsModalView", ["jquery", "underscore", "common/betterment.views", "components/common/scripts/constants/iraConstants", "models/automaticTransaction", "models/automaticDeposit", "models/v1/allocationChangeTaxImpact", "components/common/scripts/models/appData", "components/transaction/scripts/services/transactionProperties", "views/transfer/calendarView", "views/transfer/wireInstructionsView", "views/taxImpact/taxImpactView", "viewHelpers/phoneNumberFormatter", "services/iraService", "services/advisorFetcher", "components/account/scripts/services/goalService", "components/common/scripts/services/projectorService", "components/common/scripts/analytics/analytics", "views/transactionMemo/transactionMemoModalView", "components/common/scripts/viewHelpers/customerSupport", "views/transfer/pendingTrustAlert"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w) {
        function E() {
            return BMT.accountGroup.get("bankAccount")
        }
        return n.ModalView.extend({
            template: "advice/batchSettingsModal",
            className: "batch-settings-modal",
            toolTips: {
                "#amountHelp": {},
                "#contributionHelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                account: function() {
                    return this.self.account()
                },
                goalCompleteAge: function() {
                    return v.convertTermToAge(this.self.options.term, BMT.user.dateOfBirth())
                },
                automaticDeposit: function() {
                    return this.self.options.automaticDeposit
                },
                automaticWithdrawal: function() {
                    return this.self.options.automaticWithdrawal
                },
                automaticTransaction: function() {
                    return this.self.automaticTransaction()
                },
                oneTimeDeposit: function() {
                    return this.self.options.depositTransaction
                },
                allocationChange: function() {
                    return this.self.options.allocationChangeTransaction
                },
                bankAccount: function() {
                    return E()
                },
                showAutomaticTransactionSection: function() {
                    return !!this.automaticTransaction()
                },
                showOneTimeDeposit: function() {
                    return !!this.oneTimeDeposit()
                },
                shouldShowTermAsAge: function() {
                    return this.account().isRetirementGoalDisplayedAsAge()
                },
                showTerm: function() {
                    return !!this.self.options.term
                },
                term: function() {
                    return this.showTerm() ? this.self.options.term : null
                },
                showAllocation: function() {
                    return !!this.allocationChange()
                },
                blockOneTimeDeposit: function() {
                    return this.self.isOneTimeDepositInvalid()
                },
                confirmBankAccountBlocker: function() {
                    return !this.self.isBankAccountConfirmed()
                },
                linkBankAccountBlocker: function() {
                    return !this.self.hasLinkedBankAccount()
                },
                oneTimeAmountBlocker: function() {
                    return !!this.oneTimeValidationMessage()
                },
                oneTimeValidationMessage: function() {
                    return this.self.validateOneTimeAmount()
                },
                wireInstructionsBlocker: function() {
                    return this.self.shouldInterruptDeposit()
                },
                pendingTrustBlocker: function() {
                    return this.self.isPendingTrust()
                },
                maxACHAmount: function() {
                    return a.maxACHTransferAmount(this.account())
                },
                showBonusWarning: function() {
                    var e = BMT.accountGroup.get("potentialBonus");
                    return e && this.oneTimeDepositAmount() < e.num("requirementAmount")
                },
                signupBonusPrize: function() {
                    return BMT.accountGroup.get("potentialBonus").get("prizeDescription")
                },
                isReferralBonus: function() {
                    return BMT.accountGroup.get("potentialBonus").isReferral()
                },
                oneTimeDepositAmount: function() {
                    return this.oneTimeDeposit().get("amount")
                },
                minimumInitialDepositForBonus: function() {
                    return BMT.accountGroup.get("potentialBonus").num("requirementAmount")
                },
                accountGroupName: function() {
                    return BMT.accountGroup.get("name")
                },
                goalName: function() {
                    return this.account().get("name")
                },
                bankAccountName: function() {
                    return this.bankAccount().get("description")
                },
                contributionTypeSelector: function() {
                    return this.build_dropdown_menu(u.getInstance().contributionsForSelect(this.account(), !0), {
                        name: "contributionType",
                        "class": "contribution-type-selector",
                        value: this.oneTimeDeposit().get("contributionType")
                    })
                },
                needsBuilderPlanWarning: function() {
                    if (BMT.user.get("pricingSummary").isBuilder()) return !1;
                    var e = this.self.options.automaticDeposit;
                    return e ? s.totalMonthlyDeposits() < i.MIN_BUILDER_PLAN_DEPOSIT : !1
                },
                automaticDepositSummaryText: function() {
                    var e = this.self.options.automaticDeposit;
                    return this.money(e.periodicAmount()) + " " + e.frequencySuffix()
                },
                isIRA: function() {
                    return this.account().isIRA()
                },
                isInheritedIRA: function() {
                    return this.account().isInheritedIRA()
                },
                showMaximizeIRA: function() {
                    return this.self.showMaximizeIRA(this.account())
                },
                willIncurDistributionPenalty: function() {
                    return this.account().isIRA() && BMT.user.age() < r.MIN_WITHDRAWAL_AGE
                },
                hasValidChanges: function() {
                    return this.self.hasValidChanges()
                },
                numberOfProposedChanges: function() {
                    return this.self.proposedChanges().length
                },
                allocationChangedAndIsInvalid: function() {
                    return this.self.allocationChangeIsInvalid()
                },
                isRetireeWithRetirementGoal: function() {
                    return this.account().isRetirementGoalDisplayedAsAge() && BMT.user.isRetired()
                },
                advisorName: function() {
                    return d.get() && d.get().get("name")
                },
                advisorPhoneNumber: function() {
                    return d.get() && h.format(d.get().get("workPhone"))
                },
                supportPhoneNumber: function() {
                    return b.getSupportNumber()
                },
                advisorEmail: function() {
                    return d.get() && d.get().get("email")
                },
                frequency_selector: function(e) {
                    var t = this.self.automaticTransaction(),
                        n = [{
                            value: "MONTHLY",
                            label: "Monthly"
                        }, {
                            value: "TWICE_A_MONTH",
                            label: "Twice-a-month"
                        }, {
                            value: "EVERY_OTHER_WEEK",
                            label: "Every Other Week"
                        }, {
                            value: "WEEKLY",
                            label: "Weekly"
                        }];
                    return e && n.push({
                        value: "ANNUALLY",
                        label: "Annually"
                    }), this.build_dropdown_menu(n, {
                        name: "frequency",
                        "class": "automatic-transaction-frequency",
                        value: t.get("frequency")
                    })
                },
                term_label: function() {
                    return this.shouldShowTermAsAge() ? "Age" : "Time"
                },
                build_distribution_selector: function() {
                    var e = ["NORM", "EARL", "DISA", "BENE"],
                        n = u.getInstance().get("distributionTypes").filter(function(n) {
                            return t.indexOf(e, n.value) > -1
                        });
                    return this.willIncurDistributionPenalty() ? n = t.filter(n, function(e) {
                        return e.value !== "NORM"
                    }) : n = t.filter(n, function(e) {
                        return e.value !== "EARL"
                    }), this.build_dropdown_menu(n, {
                        name: "distributionType",
                        "class": "distribution-type-selector"
                    })
                }
            },
            events: {
                "change .contribution-type-selector": "contributionTypeChanged",
                "change .status input[type=checkbox]": "checkSectionHandler",
                "change #optimizeIRACheck": "optimizeIRAChanged",
                "click .maximize-contributions span": "changeOptimizeIRA",
                "click button.ok": "onOK",
                "click button.cancel": "onCancel",
                "blur .section.automatic-transaction .amount-line input": "validateAmount",
                "click .show-tax-impact": "showTaxImpact",
                "keydown input[name=amount]": "restrictDecimal",
                "keyup input[name=amount]": "amountChanged",
                "click .start-date": "toggleCalendar",
                "click .dropdown-toggle": "clickOffCalendarHandler",
                "change .automatic-transaction-frequency": "frequencyChanged",
                "click .transfer-link": "closeModal"
            },
            regions: {
                dateSelector: "#dateSelector"
            },
            sectionSaveOptions: {
                allocation: {
                    success: function(e) {
                        var account = e.getAccount();
                        account.set("allocation", e.get("allocation"));
                        account.set("satelliteAlloc", e.get("satelliteAlloc"));

                    }
                }
            },
            onInitialize: function() {
                var e = this.automaticTransaction();
                e && ((e.isFrequency(i.FIRST_TUESDAY_OF_THE_MONTH) || !e.has("frequency")) && e.set("frequency", "MONTHLY"), this.listenTo(e, "change:transactionDateTime1 change:transactionDateTime2 change:amount", this.updateInputs)), this.previousAllocation = this.account().get("allocation"), this.previousGoalTerm = this.account().goalTerm(), this.sectionModels = {
                    allocation: this.options.allocationChangeTransaction,
                    "one-time-deposit": this.options.depositTransaction,
                    "automatic-transaction": e,
                    "goal-term": this.options.account
                }
            },
            onRender: function() {
                var e = this.automaticTransaction();
                e && (this.$instructions = this.$(".instructions"), this.$account_selector = this.$(".account-selector"), this.$amount = this.$("input[name=amount]"), this.$optimizeIRACheck = this.$("input#optimizeIRACheck"), this.setAmount(e.num("amount"), {
                    silent: !0
                }), this.updateInputs(), this.renderCalendar())
            },
            onShow: function() {
                g.track("ElementViewed", {
                    Name: "SetAllModal",
                    Location: "Advice"
                }), this.allocationChangeIsInvalid() && (this.$(".allocation .section-block").fadeIn(), this.$(".allocation input[type=checkbox]").prop("disabled", !0)), this.isOneTimeDepositInvalid() && (this.$(".one-time-deposit .section-block").fadeIn(), this.$(".one-time-deposit input[type=checkbox]").prop("disabled", !0)), this.hasValidChanges() || (this.$(".ok").text("OK"), this.$(".cancel").hide())
            },
            onOK: function() {
                if (!this.hasValidChanges()) {
                    this.onCancel(), this.shouldInterruptDeposit() && !this.isPendingTrust() && this.showDepositInterruptModal();
                    return
                }
                this._validateSections() && (this.block(), e.when.apply(e, this._getSectionSavePromises()).done(function(e) {
                    var t = this._shouldSaveSection(this.$(".section.one-time-deposit")),
                        n = "Your goal has been updated successfully.",
                        r = m.isAccountOnTrack(this.account(), {
                            totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                            defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                        });
                    r && (n += " Your goal is on track."), t && (n += " Your one-time deposit will take 1 business day."), this._getUnstagedSections().length && this.trigger("reset", this._getUnstagedSections()), BMT.vent.trigger("advice:saved", {
                        account: this.account()
                    }), BMT.vent.trigger("portfolio:saved", {
                        account: this.account()
                    }), this.trackEvents(), this.options.onSuccess && this.options.onSuccess(), this.trigger("closed"), BMT.modal.close(this);
                    if (this.shouldInterruptDeposit() && !this.isPendingTrust()) this.showDepositInterruptModal({
                        flashMessage: n
                    });
                    else {
                        var i = this._getStagedSections();
                        i.length === 1 && i[0] === "allocation" ? y.show({
                            transactionType: "ALLOCATION_CHANGE",
                            transactionId: e.transactionId
                        }) : BMT.flash(n)
                    }
                }.bind(this)).always(function() {
                    this.unblock()
                }.bind(this)))
            },
            onCancel: function() {
                this.account().has("automaticDeposit") && this.account().get("automaticDeposit").isNew() && this.account().unset("automaticDeposit"), this.account().has("automaticWithdrawal") && this.account().get("automaticWithdrawal").isNew() && this.account().unset("automaticWithdrawal"), this.trigger("closed"), BMT.modal.close(this)
            },
            onDestroy: function() {
                BMT.refreshAccounts()
            },
            showTaxImpact: function() {
                this.trigger("showTaxImpact", this)
            },
            showDepositInterruptModal: function(e) {
                var n = new l(t.extend({
                    amount: this.options.depositTransaction.num("amount"),
                    model: this.options.depositTransaction
                }, e || {}));
                BMT.modal.show(n)
            },
            allocationChangeIsInvalid: function() {
                var e = this.proposedChanges(),
                    n = t.contains(e, "allocationChangeTransaction"),
                    r = this.account().get("canChangeAllocation");
                return !r && n
            },
            isOneTimeDepositInvalid: function() {
                return !this.hasLinkedBankAccount() || !this.isBankAccountConfirmed() || this.validateOneTimeAmount()
            },
            isBankAccountConfirmed: function() {
                return E() && E().is("confirmed")
            },
            hasLinkedBankAccount: function() {
                return E() && E().is("active")
            },
            validateOneTimeAmount: function() {
                var e = this.options.depositTransaction,
                    t = e && e.validate();
                return t && t.amount
            },
            shouldInterruptDeposit: function() {
                var e = this.options.depositTransaction;
                if (!e) return !1;
                var t = this.options.depositTransaction.num("amount"),
                    n = this.account(),
                    r = a.maxACHTransferAmount(n);
                return t > r && n.has("accountNumber") && n.isInvestingAccount()
            },
            isPendingTrust: function() {
                return this.account().get("accountGroup").isPendingTrust()
            },
            hasValidChanges: function() {
                return this._getStagedSections().length > 0
            },
            trackEvents: function() {
                var e = this._getStagedSections(),
                    n = Boolean(t.contains(e, "automatic-transaction") && this.options.automaticDeposit),
                    r = Boolean(t.contains(e, "automatic-transaction") && this.options.automaticWithdrawal),
                    i = Boolean(t.contains(e, "one-time-deposit")),
                    s = Boolean(t.contains(e, "allocation") && this.account().get("canChangeAllocation")),
                    o = Boolean(t.contains(e, "goal-term")),
                    u = t.compact([n, r, i, s, o]).length;
                BMT.analytics.track("ElementClicked", {
                    Name: "BatchSettingsSaved",
                    Location: "AdviceDrawer",
                    AutoDepositUpdated: n,
                    AutoWithdrawalUpdated: r,
                    DepositSubmitted: i,
                    AllocationUpdated: s,
                    GoalUpdated: o,
                    NumChanges: u
                }), n && BMT.analytics.track("AutoDepositUpdated", {
                    Location: "AdviceDrawer",
                    Value: this.automaticTransaction().get("amount"),
                    Freq: this.automaticTransaction().get("frequency"),
                    GoalId: this.automaticTransaction().getAccount().get("id"),
                    GoalAmount: this.automaticTransaction().getAccount().get("goalAmount"),
                    GoalType: this.automaticTransaction().getAccount().get("goalType")
                }), r && BMT.analytics.track("AutoWithdrawalUpdated", {
                    Location: "AdviceDrawer",
                    Value: this.automaticTransaction().get("amount"),
                    Freq: this.automaticTransaction().get("frequency"),
                    GoalId: this.automaticTransaction().getAccount().get("id"),
                    GoalAmount: this.automaticTransaction().getAccount().get("goalAmount"),
                    GoalType: this.automaticTransaction().getAccount().get("goalType")
                });
                if (i) {
                    var a = this.options.depositTransaction;
                    BMT.analytics.track("DepositSubmitted", {
                        Location: "AdviceDrawer",
                        Value: a.get("amount"),
                        GoalId: a.getAccount().get("id"),
                        GoalAmount: a.getAccount().get("goalAmount"),
                        GoalType: a.getAccount().get("goalType")
                    })
                }
                if (s) {
                    var f = this.options.allocationChangeTransaction;
                    BMT.analytics.track("AllocationUpdated", {
                        Location: "AdviceDrawer",
                        Value: f.get("allocation"),
                        OldValue: this.previousAllocation,
                        GoalId: f.getAccount().get("id"),
                        GoalAmount: f.getAccount().get("goalAmount"),
                        GoalType: f.getAccount().get("goalType")
                    })
                }
                if (o) {
                    var l = this.account();
                    BMT.analytics.track("GoalUpdated", {
                        Name: "Term",
                        Location: "AdviceDrawer",
                        Value: l.goalTerm(),
                        OldValue: this.previousGoalTerm,
                        GoalId: l.get("id"),
                        GoalAmount: l.get("goalAmount"),
                        GoalType: l.get("goalType")
                    })
                }
            },
            contributionTypeChanged: function() {
                var e = this.$(".contribution-type-selector").val();
                this._getSectionModel("one-time-deposit").set("contributionType", e)
            },
            account: function() {
                return this.options.account
            },
            proposedChanges: function() {
                var e = ["automaticDeposit", "automaticWithdrawal", "depositTransaction", "allocationChangeTransaction", "term"];
                return t.filter(e, function(e) {
                    return !!this.options[e]
                }, this)
            },
            automaticTransaction: function() {
                return this.options.automaticDeposit ? this.options.automaticDeposit : this.options.automaticWithdrawal ? this.options.automaticWithdrawal : null
            },
            checkSectionHandler: function(e) {
                var t = this.$(e.currentTarget),
                    n = t.closest(".section");
                t.is(":checked") ? (n.find(".section-block").fadeOut(), n.find("input[type=text], input[type=number]").blur()) : (n.find(".section-block").fadeIn(), this.updateFieldValidation(n.find("input[type=text], input[type=number]"), ""), n.find(".validation-tooltip").fadeOut()), this._getStagedSections().length ? this.$(".ok").prop("disabled", !1) : this.$(".ok").prop("disabled", !0)
            },
            _shouldSaveSection: function(e) {
                return e.find(".status input[type=checkbox]").is(":checked:not(:disabled)")
            },
            _validateSections: function() {
                return this.validateAutomaticTransaction(), !this.$("input.invalid").length
            },
            validateAutomaticTransaction: function() {
                var e = this.$(".section.automatic-transaction");
                !!this.automaticTransaction() && this._shouldSaveSection(e) && this.automaticTransaction().is("enabled") && (this.validateCalendar(), this.triggerAllValidation())
            },
            _getSectionSavePromises: function() {
                var n = this._getStagedSections(),
                    r = [];
                return t.each(n, function(n, i) {
                    var s = e(".section." + n),
                        o = this._getSectionModel(n),
                        u = this._getSectionOptions(n),
                        a = {};
                    s.hasClass("automatic-transaction") && s.find(".distribution-type").length && (a.distributionType = this.$(".distribution-type-selector").val()), n === "goal-term" && !t.isNull(this.options.term) && o.setGoalTerm(this.options.term), r.push(o.save(a, u))
                }.bind(this)), r
            },
            _getStagedSections: function() {
                var t = this,
                    n = [];
                return this.$(".section").each(function() {
                    t._shouldSaveSection(e(this)) && n.push(e(this).data("section"))
                }), n
            },
            _getUnstagedSections: function() {
                var t = this,
                    n = [];
                return this.$(".section").each(function() {
                    t._shouldSaveSection(e(this)) || n.push(e(this).data("section"))
                }), n
            },
            _getSectionModel: function(e) {
                return this.sectionModels[e]
            },
            _getSectionOptions: function(e) {
                return this.sectionSaveOptions[e] || {}
            },
            toggleCalendar: function(e) {
                var t = this.$(".calendar").css("opacity") !== "0",
                    n = this.$(e.currentTarget);
                t ? this.hideCalendar() : this.showCalendar(n)
            },
            showCalendar: function(t) {
                var n = this,
                    r = "";
                t.hasClass("short") ? r = "short" : t.hasClass("first") && (r = "first"), t.addClass("active"), this.$(".calendar").addClass("active " + r).delay(0).queue(function(t) {
                    e(".dateSelector").bind("clickoutside", function(t) {
                        var r = e(t.currentTarget),
                            i = e(t.target);
                        !r.hasClass("start-date") && !i.hasClass("ui-icon") && n.clickOffCalendarHandler()
                    }), t()
                })
            },
            hideCalendar: function() {
                this.$(".calendar").removeClass().addClass("calendar"), this.$("span.start-date").removeClass("active"), this.$(".dateSelector").unbind("clickoutside")
            },
            changeOptimizeIRA: function() {
                this.$optimizeIRACheck.is(":checked") ? this.$optimizeIRACheck.removeAttr("checked") : this.$optimizeIRACheck.attr("checked", !0), this.optimizeIRAChanged()
            },
            optimizeIRAChanged: function() {
                this.$optimizeIRACheck.is(":checked") && this.optimizeIRA()
            },
            showMaximizeIRA: function(e) {
                var t = "" + (new Date).getFullYear();
                return e.isIRA() && !e.isSepIRA() && e.remainingContributionAmount(t) > 0
            },
            onDateChanged: function() {
                this.optimizeIRAChanged()
            },
            validateAmount: function(t) {
                var n = e(t.currentTarget),
                    r = n.closest(".section").data("section"),
                    i = parseFloat(n.val()) || 0,
                    s = this.sectionModels[r].preValidate("amount", i);
                this.updateFieldValidation(n, s)
            },
            amountChanged: function(t) {
                var n = this.automaticTransaction();
                n.set("amount", parseFloat(e(t.currentTarget).val()), {
                    forceUpdate: !0
                });
                var r = this.$("[data-section=automatic-transaction] .attribute .value");
                r.text(this.formatter.money(n.monthlyAmount()))
            },
            clickOffCalendarHandler: function() {
                this.$(".calendar").hasClass("active") && (this.validateCalendar(), this.hideCalendar())
            },
            renderCalendar: function() {
                var e = (new f({
                    model: this.automaticTransaction()
                })).on("dateSelected", this.dateChanged, this);
                this.dateSelector.show(e)
            },
            updateInstructions: function() {
                var e, t = this.automaticTransaction();
                t.isFrequency(i.TWICE_A_MONTH) ? e = "two days" : t.isFrequency([i.WEEKLY, i.EVERY_OTHER_WEEK]) ? e = "a start date" : e = "a day", this.$instructions.html("3. Choose " + e)
            },
            updateInputs: function() {
                var e = this.automaticTransaction(),
                    t = function(t) {
                        return e.has(t) ? e.date(t).dateWithOrdinal() : ""
                    }.bind(this),
                    n = t("transactionDateTime1"),
                    r = t("transactionDateTime2");
                if (e.isFrequency([e.getClass().MONTHLY, e.getClass().TWICE_A_MONTH])) this.$("span.start-date.first").data("date", n), this.$("span.start-date.first").text(n), this.$("span.start-date.second").data("date", r), this.$("span.start-date.second").text(r);
                else {
                    var i = e.has("transactionDateTime1") ? this.formatter.formatDate("m/d/y", e.date("transactionDateTime1")) : "";
                    this.$("span.start-date.first").data("date", i), this.$("span.start-date.first").text(i)
                }
                this.$(".start-date-fields").toggleClass("two-dates", e.isFrequency([e.getClass().TWICE_A_MONTH])), this.$(".start-date-fields").toggleClass("one-short-date", e.isFrequency(e.getClass().MONTHLY)), this.$("span.start-date.first").toggleClass("short", e.isFrequency([e.getClass().TWICE_A_MONTH, e.getClass().MONTHLY])), this.$("span.start-date.invalid").length && this.validateCalendar()
            },
            frequencyChanged: function(e) {
                var t = this.automaticTransaction(),
                    n = t.get("frequency"),
                    r = this.$(e.currentTarget),
                    i = r.val();
                t.set("frequency", i, {
                    forceUpdate: !0
                }), t.unset("transactionDateTime1", {
                    forceUpdate: !0,
                    silent: !0
                }), t.unset("transactionDateTime2", {
                    forceUpdate: !0,
                    silent: !0
                });
                if (this.account().isIRA() && this.$("input#optimizeIRACheck").is(":checked")) this.optimizeIRA();
                else if (n && t.num("amount") !== 0 && this.$("input[name=amount]").val()) {
                    var s = t.num("amount"),
                        o = t.getClass().monthlyize(n, s),
                        u = t.getClass().demonthlyize(i, o);
                    this.setAmount(u, {
                        forceUpdate: !0
                    })
                }
                this.updateInputs(), this.updateInstructions(), this.renderCalendar(), this.hideCalendar()
            },
            setAmount: function(e, t) {
                this.automaticTransaction().set("amount", e, t);
                var n = this.automaticTransaction().is("enabled") ? e : 0;
                this.$amount.val((n || 0).toFixed(2))
            },
            optimizeIRA: function() {
                var e = p.optimizeDepositAmount(this.automaticTransaction(), this.account());
                this.setAmount(e, {
                    forceUpdate: !0
                })
            },
            dateChanged: function(e) {
                var t = this.automaticTransaction(),
                    n = function(n, r) {
                        if (t.date(n).isSameDayOfMonth(e)) return t.unset(n, {
                            forceUpdate: !0
                        }), !1;
                        if (r.hasClass("active")) return t.set(n, e.serverFormat(), {
                            forceUpdate: !0
                        }), !0
                    }.bind(this),
                    r = function(e) {
                        var r = this.$("span.start-date.first"),
                            i = this.$("span.start-date.second"),
                            s = r.hasClass("active"),
                            o = s ? "transactionDateTime1" : "transactionDateTime2",
                            u = o === "transactionDateTime1" ? "transactionDateTime2" : "transactionDateTime1",
                            a = s ? r : i;
                        return e.getDate() !== t.date(u).getDate() ? n(o, a) : !1
                    }.bind(this);
                if (!r(e)) {
                    this.validateCalendar();
                    return
                }
                this.onDateChanged && this.onDateChanged(), this.hideCalendar()
            },
            validateCalendar: function() {
                var e = this.automaticTransaction(),
                    t = "",
                    n = "Pick a date",
                    r = this.$("span.start-date.first"),
                    i = this.$("span.start-date.second"),
                    s = !e.has("transactionDateTime2") && e.isFrequency(e.getClass().TWICE_A_MONTH),
                    o = e.has("transactionDateTime1") ? t : n,
                    u = s ? n : t;
                this.updateFieldValidation(r, o), this.updateFieldValidation(i, u)
            },
            closeModal: function() {
                BMT.modal.close(this)
            }
        })
    }), define("views/advice/batchSettingsController", ["marionette", "views/advice/batchSettingsModalView", "views/common/noncoveredAlertView", "views/taxImpact/taxImpactView", "models/v1/allocationChangeTaxImpact"], function(e, t, n, r, i) {
        var s = {
                showNonCoveredWarning: function() {
                    var e = new n;
                    this.listenTo(e, "proceed", this.showSetAll), this.listenTo(e, "cancel", function() {
                        this.trigger("closed")
                    }), BMT.modal.show(e)
                },
                showSetAll: function() {
                    var e = new t(this.options);
                    this.listenTo(e, "showTaxImpact", this.showTaxImpact), this.listenTo(e, "closed", function() {
                        this.trigger("closed")
                    }), BMT.modal.show(e)
                },
                showTaxImpact: function(e) {
                    BMT.modal.close(e);
                    var t = new i({
                            allocation: this.options.allocationChangeTransaction.num("allocation"),
                            account: this.options.account
                        }),
                        n = new r({
                            model: t
                        });
                    this.listenTo(n, "cancel", this.showSetAll), this.listenTo(n, "navigateAway", function() {
                        this.trigger("closed"), BMT.modal.close(e)
                    }), BMT.modal.show(n)
                }
            },
            o = {
                go: function(e) {
                    var t = new u(e);
                    t.on("closed", function() {
                        t.destroy()
                    }), t.options.allocationChangeTransaction && (t.options.account.isIRA() && BMT.accountGroup.hasNonCoveredIRALots() || t.options.account.isInvestingAccount() && BMT.accountGroup.hasNonCoveredTaxableLots()) ? t.showNonCoveredWarning() : t.showSetAll()
                }
            },
            u = e.Controller.extend(s, o);
        return u
    }), define("components/advice/scripts/adviceViewHelpers", ["underscore", "projector", "components/automaticTransaction/scripts/services/automaticTransactionService", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n, r) {
        return {
            buildContextForAccountWithChanges: function(i, s) {
                var o = {
                    animationStyle: s.animationStyle
                };
                e.isNumber(s.termYears) ? o.termYears = s.termYears : o.termYears = i.remainingGoalTerm() || 0;
                if (s.monthlyAmount) {
                    if (s.monthlyAmount > 0) {
                        var u = n.monthlyWithdrawalAmount(i);
                        o.monthlyDeposit = s.monthlyAmount - u
                    } else if (s.monthlyAmount < 0) {
                        var a = n.monthlyDepositAmount(i);
                        o.monthlyDeposit = a + s.monthlyAmount
                    }
                } else s.monthlyAmount === 0 ? o.monthlyDeposit = 0 : o.monthlyDeposit = n.netMonthlyTransactionAmount(i);
                o.currentBalance = i.getCurrentBalanceWithPending() + (s.oneTime || 0);
                if (s.startingBalance || s.startingBalance === 0) o.startingBalance = s.startingBalance;
                e.isNumber(s.goalBalance) ? o.targetBalance = s.goalBalance : o.targetBalance = i.num("goalAmount") || 0;
                var f = s.portfolioSet || r.getPortfolioSetForAccount(i);
                e.isNumber(s.allocation) ? o.stockAlloc = s.allocation : o.stockAlloc = i.num("allocation");
                var l = f.getExpectedReturns(o.stockAlloc),
                    c = o.termYears * 12;
                return o.expectedReturn = l.expectedReturn, o.volatility = l.volatility, o.riskFreeRates = f.getExtendedRiskFreeRates(c), o.boundingReturns = f.getBoundingReturns(), i.isIncome() && (o.zscore = t.C.zSafePct, o.inflation = t.C.inflation), o
            }
        }
    }), define("views/advice/baseRecommendationView", ["underscore", "common/betterment.views", "components/common/scripts/services/projectorService", "components/advice/scripts/adviceViewHelpers"], function(e, t, n, r) {
        return t.View.extend({
            onInitialize: function() {
                this.events = e.extend(this.events || {}, {
                    "click .reset": "reset"
                }), this.toolTips = e.extend(this.toolTips || {}, {
                    ".reset": {
                        position: {
                            my: "bottom center",
                            at: "top center"
                        }
                    }
                }), this.on("valueChanged", this.setActive), this.on("valueReset", this.setInactive), this.on("show", this.setInactive)
            },
            setActive: function() {
                this.$(".reset").css("display", "inline-block"), this.$el.closest(".setting").addClass("active"), this.dirty = !0
            },
            setInactive: function() {
                this.$(".reset").hide(), this.$el.closest(".setting").removeClass("active"), this.dirty = !1
            },
            showAdvice: function(e) {
                e = e || {}, this.isShowingRecommendation = !0;
                var t = this.$(".advice-box");
                this.$el.is(":visible") && !e.noAnimate ? t.slideDown() : t.show()
            },
            hideAdvice: function(e) {
                e = e || {}, this.isShowingRecommendation = !1;
                var t = this.$(".advice-box");
                t.is(":visible") && !e.noAnimate ? t.slideUp() : t.hide()
            },
            getModelForSave: function() {
                var e = {};
                return e[this.options.modelKey] = this.getModel(), e
            },
            isDirty: function() {
                return this.dirty
            },
            hasRecommendation: function() {
                return this.isShowingRecommendation
            },
            reset: function() {
                throw "Method not implemented"
            },
            refreshAdvice: function(e, t) {
                throw "Method not implemented"
            },
            buildContextWithChanges: function(e) {
                return r.buildContextForAccountWithChanges(this.model, e)
            }
        })
    }),
    function(e) {
        define("jqueryUI", ["jquery"], function() {
            return function() {
                (function(e, t) {
                    function i(t, n) {
                        var r, i, o, u = t.nodeName.toLowerCase();
                        return "area" === u ? (r = t.parentNode, i = r.name, !t.href || !i || r.nodeName.toLowerCase() !== "map" ? !1 : (o = e("img[usemap=#" + i + "]")[0], !!o && s(o))) : (/input|select|textarea|button|object/.test(u) ? !t.disabled : "a" === u ? t.href || n : n) && s(t)
                    }

                    function s(t) {
                        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
                            return e.css(this, "visibility") === "hidden"
                        }).length
                    }
                    var n = 0,
                        r = /^ui-id-\d+$/;
                    e.ui = e.ui || {}, e.extend(e.ui, {
                        version: "1.10.4",
                        keyCode: {
                            BACKSPACE: 8,
                            COMMA: 188,
                            DELETE: 46,
                            DOWN: 40,
                            END: 35,
                            ENTER: 13,
                            ESCAPE: 27,
                            HOME: 36,
                            LEFT: 37,
                            NUMPAD_ADD: 107,
                            NUMPAD_DECIMAL: 110,
                            NUMPAD_DIVIDE: 111,
                            NUMPAD_ENTER: 108,
                            NUMPAD_MULTIPLY: 106,
                            NUMPAD_SUBTRACT: 109,
                            PAGE_DOWN: 34,
                            PAGE_UP: 33,
                            PERIOD: 190,
                            RIGHT: 39,
                            SPACE: 32,
                            TAB: 9,
                            UP: 38
                        }
                    }), e.fn.extend({
                        focus: function(t) {
                            return function(n, r) {
                                return typeof n == "number" ? this.each(function() {
                                    var t = this;
                                    setTimeout(function() {
                                        e(t).focus(), r && r.call(t)
                                    }, n)
                                }) : t.apply(this, arguments)
                            }
                        }(e.fn.focus),
                        scrollParent: function() {
                            var t;
                            return e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? t = this.parents().filter(function() {
                                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                            }).eq(0) : t = this.parents().filter(function() {
                                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
                        },
                        zIndex: function(n) {
                            if (n !== t) return this.css("zIndex", n);
                            if (this.length) {
                                var r = e(this[0]),
                                    i, s;
                                while (r.length && r[0] !== document) {
                                    i = r.css("position");
                                    if (i === "absolute" || i === "relative" || i === "fixed") {
                                        s = parseInt(r.css("zIndex"), 10);
                                        if (!isNaN(s) && s !== 0) return s
                                    }
                                    r = r.parent()
                                }
                            }
                            return 0
                        },
                        uniqueId: function() {
                            return this.each(function() {
                                this.id || (this.id = "ui-id-" + ++n)
                            })
                        },
                        removeUniqueId: function() {
                            return this.each(function() {
                                r.test(this.id) && e(this).removeAttr("id")
                            })
                        }
                    }), e.extend(e.expr[":"], {
                        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
                            return function(n) {
                                return !!e.data(n, t)
                            }
                        }) : function(t, n, r) {
                            return !!e.data(t, r[3])
                        },
                        focusable: function(t) {
                            return i(t, !isNaN(e.attr(t, "tabindex")))
                        },
                        tabbable: function(t) {
                            var n = e.attr(t, "tabindex"),
                                r = isNaN(n);
                            return (r || n >= 0) && i(t, !r)
                        }
                    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(n, r) {
                        function u(t, n, r, s) {
                            return e.each(i, function() {
                                n -= parseFloat(e.css(t, "padding" + this)) || 0, r && (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0), s && (n -= parseFloat(e.css(t, "margin" + this)) || 0)
                            }), n
                        }
                        var i = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
                            s = r.toLowerCase(),
                            o = {
                                innerWidth: e.fn.innerWidth,
                                innerHeight: e.fn.innerHeight,
                                outerWidth: e.fn.outerWidth,
                                outerHeight: e.fn.outerHeight
                            };
                        e.fn["inner" + r] = function(n) {
                            return n === t ? o["inner" + r].call(this) : this.each(function() {
                                e(this).css(s, u(this, n) + "px")
                            })
                        }, e.fn["outer" + r] = function(t, n) {
                            return typeof t != "number" ? o["outer" + r].call(this, t) : this.each(function() {
                                e(this).css(s, u(this, t, !0, n) + "px")
                            })
                        }
                    }), e.fn.addBack || (e.fn.addBack = function(e) {
                        return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
                    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
                        return function(n) {
                            return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this)
                        }
                    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
                        disableSelection: function() {
                            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                                e.preventDefault()
                            })
                        },
                        enableSelection: function() {
                            return this.unbind(".ui-disableSelection")
                        }
                    }), e.extend(e.ui, {
                        plugin: {
                            add: function(t, n, r) {
                                var i, s = e.ui[t].prototype;
                                for (i in r) s.plugins[i] = s.plugins[i] || [], s.plugins[i].push([n, r[i]])
                            },
                            call: function(e, t, n) {
                                var r, i = e.plugins[t];
                                if (!i || !e.element[0].parentNode || e.element[0].parentNode.nodeType === 11) return;
                                for (r = 0; r < i.length; r++) e.options[i[r][0]] && i[r][1].apply(e.element, n)
                            }
                        },
                        hasScroll: function(t, n) {
                            if (e(t).css("overflow") === "hidden") return !1;
                            var r = n && n === "left" ? "scrollLeft" : "scrollTop",
                                i = !1;
                            return t[r] > 0 ? !0 : (t[r] = 1, i = t[r] > 0, t[r] = 0, i)
                        }
                    })
                })(jQuery),
                function(e, t) {
                    var n = 0,
                        r = Array.prototype.slice,
                        i = e.cleanData;
                    e.cleanData = function(t) {
                        for (var n = 0, r;
                            (r = t[n]) != null; n++) try {
                            e(r).triggerHandler("remove")
                        } catch (s) {}
                        i(t)
                    }, e.widget = function(t, n, r) {
                        var i, s, o, u, a = {},
                            f = t.split(".")[0];
                        t = t.split(".")[1], i = f + "-" + t, r || (r = n, n = e.Widget), e.expr[":"][i.toLowerCase()] = function(t) {
                            return !!e.data(t, i)
                        }, e[f] = e[f] || {}, s = e[f][t], o = e[f][t] = function(e, t) {
                            if (!this._createWidget) return new o(e, t);
                            arguments.length && this._createWidget(e, t)
                        }, e.extend(o, s, {
                            version: r.version,
                            _proto: e.extend({}, r),
                            _childConstructors: []
                        }), u = new n, u.options = e.widget.extend({}, u.options), e.each(r, function(t, r) {
                            if (!e.isFunction(r)) {
                                a[t] = r;
                                return
                            }
                            a[t] = function() {
                                var e = function() {
                                        return n.prototype[t].apply(this, arguments)
                                    },
                                    i = function(e) {
                                        return n.prototype[t].apply(this, e)
                                    };
                                return function() {
                                    var t = this._super,
                                        n = this._superApply,
                                        s;
                                    return this._super = e, this._superApply = i, s = r.apply(this, arguments), this._super = t, this._superApply = n, s
                                }
                            }()
                        }), o.prototype = e.widget.extend(u, {
                            widgetEventPrefix: s ? u.widgetEventPrefix || t : t
                        }, a, {
                            constructor: o,
                            namespace: f,
                            widgetName: t,
                            widgetFullName: i
                        }), s ? (e.each(s._childConstructors, function(t, n) {
                            var r = n.prototype;
                            e.widget(r.namespace + "." + r.widgetName, o, n._proto)
                        }), delete s._childConstructors) : n._childConstructors.push(o), e.widget.bridge(t, o)
                    }, e.widget.extend = function(n) {
                        var i = r.call(arguments, 1),
                            s = 0,
                            o = i.length,
                            u, a;
                        for (; s < o; s++)
                            for (u in i[s]) a = i[s][u], i[s].hasOwnProperty(u) && a !== t && (e.isPlainObject(a) ? n[u] = e.isPlainObject(n[u]) ? e.widget.extend({}, n[u], a) : e.widget.extend({}, a) : n[u] = a);
                        return n
                    }, e.widget.bridge = function(n, i) {
                        var s = i.prototype.widgetFullName || n;
                        e.fn[n] = function(o) {
                            var u = typeof o == "string",
                                a = r.call(arguments, 1),
                                f = this;
                            return o = !u && a.length ? e.widget.extend.apply(null, [o].concat(a)) : o, u ? this.each(function() {
                                var r, i = e.data(this, s);
                                if (!i) return e.error("cannot call methods on " + n + " prior to initialization; " + "attempted to call method '" + o + "'");
                                if (!e.isFunction(i[o]) || o.charAt(0) === "_") return e.error("no such method '" + o + "' for " + n + " widget instance");
                                r = i[o].apply(i, a);
                                if (r !== i && r !== t) return f = r && r.jquery ? f.pushStack(r.get()) : r, !1
                            }) : this.each(function() {
                                var t = e.data(this, s);
                                t ? t.option(o || {})._init() : e.data(this, s, new i(o, this))
                            }), f
                        }
                    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
                        widgetName: "widget",
                        widgetEventPrefix: "",
                        defaultElement: "<div>",
                        options: {
                            disabled: !1,
                            create: null
                        },
                        _createWidget: function(t, r) {
                            r = e(r || this.defaultElement || this)[0], this.element = e(r), this.uuid = n++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), r !== this && (e.data(r, this.widgetFullName, this), this._on(!0, this.element, {
                                remove: function(e) {
                                    e.target === r && this.destroy()
                                }
                            }), this.document = e(r.style ? r.ownerDocument : r.document || r), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
                        },
                        _getCreateOptions: e.noop,
                        _getCreateEventData: e.noop,
                        _create: e.noop,
                        _init: e.noop,
                        destroy: function() {
                            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
                        },
                        _destroy: e.noop,
                        widget: function() {
                            return this.element
                        },
                        option: function(n, r) {
                            var i = n,
                                s, o, u;
                            if (arguments.length === 0) return e.widget.extend({}, this.options);
                            if (typeof n == "string") {
                                i = {}, s = n.split("."), n = s.shift();
                                if (s.length) {
                                    o = i[n] = e.widget.extend({}, this.options[n]);
                                    for (u = 0; u < s.length - 1; u++) o[s[u]] = o[s[u]] || {}, o = o[s[u]];
                                    n = s.pop();
                                    if (arguments.length === 1) return o[n] === t ? null : o[n];
                                    o[n] = r
                                } else {
                                    if (arguments.length === 1) return this.options[n] === t ? null : this.options[n];
                                    i[n] = r
                                }
                            }
                            return this._setOptions(i), this
                        },
                        _setOptions: function(e) {
                            var t;
                            for (t in e) this._setOption(t, e[t]);
                            return this
                        },
                        _setOption: function(e, t) {
                            return this.options[e] = t, e === "disabled" && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
                        },
                        enable: function() {
                            return this._setOption("disabled", !1)
                        },
                        disable: function() {
                            return this._setOption("disabled", !0)
                        },
                        _on: function(t, n, r) {
                            var i, s = this;
                            typeof t != "boolean" && (r = n, n = t, t = !1), r ? (n = i = e(n), this.bindings = this.bindings.add(n)) : (r = n, n = this.element, i = this.widget()), e.each(r, function(r, o) {
                                function u() {
                                    if (!t && (s.options.disabled === !0 || e(this).hasClass("ui-state-disabled"))) return;
                                    return (typeof o == "string" ? s[o] : o).apply(s, arguments)
                                }
                                typeof o != "string" && (u.guid = o.guid = o.guid || u.guid || e.guid++);
                                var a = r.match(/^(\w+)\s*(.*)$/),
                                    f = a[1] + s.eventNamespace,
                                    l = a[2];
                                l ? i.delegate(l, f, u) : n.bind(f, u)
                            })
                        },
                        _off: function(e, t) {
                            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
                        },
                        _delay: function(e, t) {
                            function n() {
                                return (typeof e == "string" ? r[e] : e).apply(r, arguments)
                            }
                            var r = this;
                            return setTimeout(n, t || 0)
                        },
                        _hoverable: function(t) {
                            this.hoverable = this.hoverable.add(t), this._on(t, {
                                mouseenter: function(t) {
                                    e(t.currentTarget).addClass("ui-state-hover")
                                },
                                mouseleave: function(t) {
                                    e(t.currentTarget).removeClass("ui-state-hover")
                                }
                            })
                        },
                        _focusable: function(t) {
                            this.focusable = this.focusable.add(t), this._on(t, {
                                focusin: function(t) {
                                    e(t.currentTarget).addClass("ui-state-focus")
                                },
                                focusout: function(t) {
                                    e(t.currentTarget).removeClass("ui-state-focus")
                                }
                            })
                        },
                        _trigger: function(t, n, r) {
                            var i, s, o = this.options[t];
                            r = r || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], s = n.originalEvent;
                            if (s)
                                for (i in s) i in n || (n[i] = s[i]);
                            return this.element.trigger(n, r), !(e.isFunction(o) && o.apply(this.element[0], [n].concat(r)) === !1 || n.isDefaultPrevented())
                        }
                    }, e.each({
                        show: "fadeIn",
                        hide: "fadeOut"
                    }, function(t, n) {
                        e.Widget.prototype["_" + t] = function(r, i, s) {
                            typeof i == "string" && (i = {
                                effect: i
                            });
                            var o, u = i ? i === !0 || typeof i == "number" ? n : i.effect || n : t;
                            i = i || {}, typeof i == "number" && (i = {
                                duration: i
                            }), o = !e.isEmptyObject(i), i.complete = s, i.delay && r.delay(i.delay), o && e.effects && e.effects.effect[u] ? r[t](i) : u !== t && r[u] ? r[u](i.duration, i.easing, s) : r.queue(function(n) {
                                e(this)[t](), s && s.call(r[0]), n()
                            })
                        }
                    })
                }(jQuery),
                function(e, t) {
                    var n = !1;
                    e(document).mouseup(function() {
                        n = !1
                    }), e.widget("ui.mouse", {
                        version: "1.10.4",
                        options: {
                            cancel: "input,textarea,button,select,option",
                            distance: 1,
                            delay: 0
                        },
                        _mouseInit: function() {
                            var t = this;
                            this.element.bind("mousedown." + this.widgetName, function(e) {
                                return t._mouseDown(e)
                            }).bind("click." + this.widgetName, function(n) {
                                if (!0 === e.data(n.target, t.widgetName + ".preventClickEvent")) return e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1
                            }), this.started = !1
                        },
                        _mouseDestroy: function() {
                            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
                        },
                        _mouseDown: function(t) {
                            if (n) return;
                            this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                            var r = this,
                                i = t.which === 1,
                                s = typeof this.options.cancel == "string" && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
                            if (!i || s || !this._mouseCapture(t)) return !0;
                            this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                                r.mouseDelayMet = !0
                            }, this.options.delay));
                            if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
                                this._mouseStarted = this._mouseStart(t) !== !1;
                                if (!this._mouseStarted) return t.preventDefault(), !0
                            }
                            return !0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(e) {
                                return r._mouseMove(e)
                            }, this._mouseUpDelegate = function(e) {
                                return r._mouseUp(e)
                            }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), n = !0, !0
                        },
                        _mouseMove: function(t) {
                            return e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
                        },
                        _mouseUp: function(t) {
                            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
                        },
                        _mouseDistanceMet: function(e) {
                            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
                        },
                        _mouseDelayMet: function() {
                            return this.mouseDelayMet
                        },
                        _mouseStart: function() {},
                        _mouseDrag: function() {},
                        _mouseStop: function() {},
                        _mouseCapture: function() {
                            return !0
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function h(e, t, n) {
                        return [parseFloat(e[0]) * (l.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (l.test(e[1]) ? n / 100 : 1)]
                    }

                    function p(t, n) {
                        return parseInt(e.css(t, n), 10) || 0
                    }

                    function d(t) {
                        var n = t[0];
                        return n.nodeType === 9 ? {
                            width: t.width(),
                            height: t.height(),
                            offset: {
                                top: 0,
                                left: 0
                            }
                        } : e.isWindow(n) ? {
                            width: t.width(),
                            height: t.height(),
                            offset: {
                                top: t.scrollTop(),
                                left: t.scrollLeft()
                            }
                        } : n.preventDefault ? {
                            width: 0,
                            height: 0,
                            offset: {
                                top: n.pageY,
                                left: n.pageX
                            }
                        } : {
                            width: t.outerWidth(),
                            height: t.outerHeight(),
                            offset: t.offset()
                        }
                    }
                    e.ui = e.ui || {};
                    var n, r = Math.max,
                        i = Math.abs,
                        s = Math.round,
                        o = /left|center|right/,
                        u = /top|center|bottom/,
                        a = /[\+\-]\d+(\.[\d]+)?%?/,
                        f = /^\w+/,
                        l = /%$/,
                        c = e.fn.position;
                    e.position = {
                            scrollbarWidth: function() {
                                if (n !== t) return n;
                                var r, i, s = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                                    o = s.children()[0];
                                return e("body").append(s), r = o.offsetWidth, s.css("overflow", "scroll"), i = o.offsetWidth, r === i && (i = s[0].clientWidth), s.remove(), n = r - i
                            },
                            getScrollInfo: function(t) {
                                var n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                                    r = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                                    i = n === "scroll" || n === "auto" && t.width < t.element[0].scrollWidth,
                                    s = r === "scroll" || r === "auto" && t.height < t.element[0].scrollHeight;
                                return {
                                    width: s ? e.position.scrollbarWidth() : 0,
                                    height: i ? e.position.scrollbarWidth() : 0
                                }
                            },
                            getWithinInfo: function(t) {
                                var n = e(t || window),
                                    r = e.isWindow(n[0]),
                                    i = !!n[0] && n[0].nodeType === 9;
                                return {
                                    element: n,
                                    isWindow: r,
                                    isDocument: i,
                                    offset: n.offset() || {
                                        left: 0,
                                        top: 0
                                    },
                                    scrollLeft: n.scrollLeft(),
                                    scrollTop: n.scrollTop(),
                                    width: r ? n.width() : n.outerWidth(),
                                    height: r ? n.height() : n.outerHeight()
                                }
                            }
                        }, e.fn.position = function(t) {
                            if (!t || !t.of) return c.apply(this, arguments);
                            t = e.extend({}, t);
                            var n, l, v, m, g, y, b = e(t.of),
                                w = e.position.getWithinInfo(t.within),
                                E = e.position.getScrollInfo(w),
                                S = (t.collision || "flip").split(" "),
                                x = {};
                            return y = d(b), b[0].preventDefault && (t.at = "left top"), l = y.width, v = y.height, m = y.offset, g = e.extend({}, m), e.each(["my", "at"], function() {
                                var e = (t[this] || "").split(" "),
                                    n, r;
                                e.length === 1 && (e = o.test(e[0]) ? e.concat(["center"]) : u.test(e[0]) ? ["center"].concat(e) : ["center", "center"]), e[0] = o.test(e[0]) ? e[0] : "center", e[1] = u.test(e[1]) ? e[1] : "center", n = a.exec(e[0]), r = a.exec(e[1]), x[this] = [n ? n[0] : 0, r ? r[0] : 0], t[this] = [f.exec(e[0])[0], f.exec(e[1])[0]]
                            }), S.length === 1 && (S[1] = S[0]), t.at[0] === "right" ? g.left += l : t.at[0] === "center" && (g.left += l / 2), t.at[1] === "bottom" ? g.top += v : t.at[1] === "center" && (g.top += v / 2), n = h(x.at, l, v), g.left += n[0], g.top += n[1], this.each(function() {
                                var o, u, a = e(this),
                                    f = a.outerWidth(),
                                    c = a.outerHeight(),
                                    d = p(this, "marginLeft"),
                                    y = p(this, "marginTop"),
                                    T = f + d + p(this, "marginRight") + E.width,
                                    N = c + y + p(this, "marginBottom") + E.height,
                                    C = e.extend({}, g),
                                    k = h(x.my, a.outerWidth(), a.outerHeight());
                                t.my[0] === "right" ? C.left -= f : t.my[0] === "center" && (C.left -= f / 2), t.my[1] === "bottom" ? C.top -= c : t.my[1] === "center" && (C.top -= c / 2), C.left += k[0], C.top += k[1], e.support.offsetFractions || (C.left = s(C.left), C.top = s(C.top)), o = {
                                    marginLeft: d,
                                    marginTop: y
                                }, e.each(["left", "top"], function(r, i) {
                                    e.ui.position[S[r]] && e.ui.position[S[r]][i](C, {
                                        targetWidth: l,
                                        targetHeight: v,
                                        elemWidth: f,
                                        elemHeight: c,
                                        collisionPosition: o,
                                        collisionWidth: T,
                                        collisionHeight: N,
                                        offset: [n[0] + k[0], n[1] + k[1]],
                                        my: t.my,
                                        at: t.at,
                                        within: w,
                                        elem: a
                                    })
                                }), t.using && (u = function(e) {
                                    var n = m.left - C.left,
                                        s = n + l - f,
                                        o = m.top - C.top,
                                        u = o + v - c,
                                        h = {
                                            target: {
                                                element: b,
                                                left: m.left,
                                                top: m.top,
                                                width: l,
                                                height: v
                                            },
                                            element: {
                                                element: a,
                                                left: C.left,
                                                top: C.top,
                                                width: f,
                                                height: c
                                            },
                                            horizontal: s < 0 ? "left" : n > 0 ? "right" : "center",
                                            vertical: u < 0 ? "top" : o > 0 ? "bottom" : "middle"
                                        };
                                    l < f && i(n + s) < l && (h.horizontal = "center"), v < c && i(o + u) < v && (h.vertical = "middle"), r(i(n), i(s)) > r(i(o), i(u)) ? h.important = "horizontal" : h.important = "vertical", t.using.call(this, e, h)
                                }), a.offset(e.extend(C, {
                                    using: u
                                }))
                            })
                        }, e.ui.position = {
                            fit: {
                                left: function(e, t) {
                                    var n = t.within,
                                        i = n.isWindow ? n.scrollLeft : n.offset.left,
                                        s = n.width,
                                        o = e.left - t.collisionPosition.marginLeft,
                                        u = i - o,
                                        a = o + t.collisionWidth - s - i,
                                        f;
                                    t.collisionWidth > s ? u > 0 && a <= 0 ? (f = e.left + u + t.collisionWidth - s - i, e.left += u - f) : a > 0 && u <= 0 ? e.left = i : u > a ? e.left = i + s - t.collisionWidth : e.left = i : u > 0 ? e.left += u : a > 0 ? e.left -= a : e.left = r(e.left - o, e.left)
                                },
                                top: function(e, t) {
                                    var n = t.within,
                                        i = n.isWindow ? n.scrollTop : n.offset.top,
                                        s = t.within.height,
                                        o = e.top - t.collisionPosition.marginTop,
                                        u = i - o,
                                        a = o + t.collisionHeight - s - i,
                                        f;
                                    t.collisionHeight > s ? u > 0 && a <= 0 ? (f = e.top + u + t.collisionHeight - s - i, e.top += u - f) : a > 0 && u <= 0 ? e.top = i : u > a ? e.top = i + s - t.collisionHeight : e.top = i : u > 0 ? e.top += u : a > 0 ? e.top -= a : e.top = r(e.top - o, e.top)
                                }
                            },
                            flip: {
                                left: function(e, t) {
                                    var n = t.within,
                                        r = n.offset.left + n.scrollLeft,
                                        s = n.width,
                                        o = n.isWindow ? n.scrollLeft : n.offset.left,
                                        u = e.left - t.collisionPosition.marginLeft,
                                        a = u - o,
                                        f = u + t.collisionWidth - s - o,
                                        l = t.my[0] === "left" ? -t.elemWidth : t.my[0] === "right" ? t.elemWidth : 0,
                                        c = t.at[0] === "left" ? t.targetWidth : t.at[0] === "right" ? -t.targetWidth : 0,
                                        h = -2 * t.offset[0],
                                        p, d;
                                    if (a < 0) {
                                        p = e.left + l + c + h + t.collisionWidth - s - r;
                                        if (p < 0 || p < i(a)) e.left += l + c + h
                                    } else if (f > 0) {
                                        d = e.left - t.collisionPosition.marginLeft + l + c + h - o;
                                        if (d > 0 || i(d) < f) e.left += l + c + h
                                    }
                                },
                                top: function(e, t) {
                                    var n = t.within,
                                        r = n.offset.top + n.scrollTop,
                                        s = n.height,
                                        o = n.isWindow ? n.scrollTop : n.offset.top,
                                        u = e.top - t.collisionPosition.marginTop,
                                        a = u - o,
                                        f = u + t.collisionHeight - s - o,
                                        l = t.my[1] === "top",
                                        c = l ? -t.elemHeight : t.my[1] === "bottom" ? t.elemHeight : 0,
                                        h = t.at[1] === "top" ? t.targetHeight : t.at[1] === "bottom" ? -t.targetHeight : 0,
                                        p = -2 * t.offset[1],
                                        d, v;
                                    a < 0 ? (v = e.top + c + h + p + t.collisionHeight - s - r, e.top + c + h + p > a && (v < 0 || v < i(a)) && (e.top += c + h + p)) : f > 0 && (d = e.top - t.collisionPosition.marginTop + c + h + p - o, e.top + c + h + p > f && (d > 0 || i(d) < f) && (e.top += c + h + p))
                                }
                            },
                            flipfit: {
                                left: function() {
                                    e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
                                },
                                top: function() {
                                    e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
                                }
                            }
                        },
                        function() {
                            var t, n, r, i, s, o = document.getElementsByTagName("body")[0],
                                u = document.createElement("div");
                            t = document.createElement(o ? "div" : "body"), r = {
                                visibility: "hidden",
                                width: 0,
                                height: 0,
                                border: 0,
                                margin: 0,
                                background: "none"
                            }, o && e.extend(r, {
                                position: "absolute",
                                left: "-1000px",
                                top: "-1000px"
                            });
                            for (s in r) t.style[s] = r[s];
                            t.appendChild(u), n = o || document.documentElement, n.insertBefore(t, n.firstChild), u.style.cssText = "position: absolute; left: 10.7432222px;", i = e(u).offset().left, e.support.offsetFractions = i > 10 && i < 11, t.innerHTML = "", n.removeChild(t)
                        }()
                }(jQuery),
                function(e, t) {
                    var n = 0,
                        r = {},
                        i = {};
                    r.height = r.paddingTop = r.paddingBottom = r.borderTopWidth = r.borderBottomWidth = "hide", i.height = i.paddingTop = i.paddingBottom = i.borderTopWidth = i.borderBottomWidth = "show", e.widget("ui.accordion", {
                        version: "1.10.4",
                        options: {
                            active: 0,
                            animate: {},
                            collapsible: !1,
                            event: "click",
                            header: "> li > :first-child,> :not(li):even",
                            heightStyle: "auto",
                            icons: {
                                activeHeader: "ui-icon-triangle-1-s",
                                header: "ui-icon-triangle-1-e"
                            },
                            activate: null,
                            beforeActivate: null
                        },
                        _create: function() {
                            var t = this.options;
                            this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), !t.collapsible && (t.active === !1 || t.active == null) && (t.active = 0), this._processPanels(), t.active < 0 && (t.active += this.headers.length), this._refresh()
                        },
                        _getCreateEventData: function() {
                            return {
                                header: this.active,
                                panel: this.active.length ? this.active.next() : e(),
                                content: this.active.length ? this.active.next() : e()
                            }
                        },
                        _createIcons: function() {
                            var t = this.options.icons;
                            t && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers), this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader), this.headers.addClass("ui-accordion-icons"))
                        },
                        _destroyIcons: function() {
                            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()
                        },
                        _destroy: function() {
                            var e;
                            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                                /^ui-accordion/.test(this.id) && this.removeAttribute("id")
                            }), this._destroyIcons(), e = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                                /^ui-accordion/.test(this.id) && this.removeAttribute("id")
                            }), this.options.heightStyle !== "content" && e.css("height", "")
                        },
                        _setOption: function(e, t) {
                            if (e === "active") {
                                this._activate(t);
                                return
                            }
                            e === "event" && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(t)), this._super(e, t), e === "collapsible" && !t && this.options.active === !1 && this._activate(0), e === "icons" && (this._destroyIcons(), t && this._createIcons()), e === "disabled" && this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t)
                        },
                        _keydown: function(t) {
                            if (t.altKey || t.ctrlKey) return;
                            var n = e.ui.keyCode,
                                r = this.headers.length,
                                i = this.headers.index(t.target),
                                s = !1;
                            switch (t.keyCode) {
                                case n.RIGHT:
                                case n.DOWN:
                                    s = this.headers[(i + 1) % r];
                                    break;
                                case n.LEFT:
                                case n.UP:
                                    s = this.headers[(i - 1 + r) % r];
                                    break;
                                case n.SPACE:
                                case n.ENTER:
                                    this._eventHandler(t);
                                    break;
                                case n.HOME:
                                    s = this.headers[0];
                                    break;
                                case n.END:
                                    s = this.headers[r - 1]
                            }
                            s && (e(t.target).attr("tabIndex", -1), e(s).attr("tabIndex", 0), s.focus(), t.preventDefault())
                        },
                        _panelKeyDown: function(t) {
                            t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().focus()
                        },
                        refresh: function() {
                            var t = this.options;
                            this._processPanels(), t.active === !1 && t.collapsible === !0 || !this.headers.length ? (t.active = !1, this.active = e()) : t.active === !1 ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), this._destroyIcons(), this._refresh()
                        },
                        _processPanels: function() {
                            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"), this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()
                        },
                        _refresh: function() {
                            var t, r = this.options,
                                i = r.heightStyle,
                                s = this.element.parent(),
                                o = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++n);
                            this.active = this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function(t) {
                                var n = e(this),
                                    r = n.attr("id"),
                                    i = n.next(),
                                    s = i.attr("id");
                                r || (r = o + "-header-" + t, n.attr("id", r)), s || (s = o + "-panel-" + t, i.attr("id", s)), n.attr("aria-controls", s), i.attr("aria-labelledby", r)
                            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                                "aria-selected": "false",
                                "aria-expanded": "false",
                                tabIndex: -1
                            }).next().attr({
                                "aria-hidden": "true"
                            }).hide(), this.active.length ? this.active.attr({
                                "aria-selected": "true",
                                "aria-expanded": "true",
                                tabIndex: 0
                            }).next().attr({
                                "aria-hidden": "false"
                            }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(r.event), i === "fill" ? (t = s.height(), this.element.siblings(":visible").each(function() {
                                var n = e(this),
                                    r = n.css("position");
                                if (r === "absolute" || r === "fixed") return;
                                t -= n.outerHeight(!0)
                            }), this.headers.each(function() {
                                t -= e(this).outerHeight(!0)
                            }), this.headers.next().each(function() {
                                e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()))
                            }).css("overflow", "auto")) : i === "auto" && (t = 0, this.headers.next().each(function() {
                                t = Math.max(t, e(this).css("height", "").height())
                            }).height(t))
                        },
                        _activate: function(t) {
                            var n = this._findActive(t)[0];
                            if (n === this.active[0]) return;
                            n = n || this.active[0], this._eventHandler({
                                target: n,
                                currentTarget: n,
                                preventDefault: e.noop
                            })
                        },
                        _findActive: function(t) {
                            return typeof t == "number" ? this.headers.eq(t) : e()
                        },
                        _setupEvents: function(t) {
                            var n = {
                                keydown: "_keydown"
                            };
                            t && e.each(t.split(" "), function(e, t) {
                                n[t] = "_eventHandler"
                            }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, n), this._on(this.headers.next(), {
                                keydown: "_panelKeyDown"
                            }), this._hoverable(this.headers), this._focusable(this.headers)
                        },
                        _eventHandler: function(t) {
                            var n = this.options,
                                r = this.active,
                                i = e(t.currentTarget),
                                s = i[0] === r[0],
                                o = s && n.collapsible,
                                u = o ? e() : i.next(),
                                a = r.next(),
                                f = {
                                    oldHeader: r,
                                    oldPanel: a,
                                    newHeader: o ? e() : i,
                                    newPanel: u
                                };
                            t.preventDefault();
                            if (s && !n.collapsible || this._trigger("beforeActivate", t, f) === !1) return;
                            n.active = o ? !1 : this.headers.index(i), this.active = s ? e() : i, this._toggle(f), r.removeClass("ui-accordion-header-active ui-state-active"), n.icons && r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header), s || (i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), n.icons && i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader), i.next().addClass("ui-accordion-content-active"))
                        },
                        _toggle: function(t) {
                            var n = t.newPanel,
                                r = this.prevShow.length ? this.prevShow : t.oldPanel;
                            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = n, this.prevHide = r, this.options.animate ? this._animate(n, r, t) : (r.hide(), n.show(), this._toggleComplete(t)), r.attr({
                                "aria-hidden": "true"
                            }), r.prev().attr("aria-selected", "false"), n.length && r.length ? r.prev().attr({
                                tabIndex: -1,
                                "aria-expanded": "false"
                            }) : n.length && this.headers.filter(function() {
                                return e(this).attr("tabIndex") === 0
                            }).attr("tabIndex", -1), n.attr("aria-hidden", "false").prev().attr({
                                "aria-selected": "true",
                                tabIndex: 0,
                                "aria-expanded": "true"
                            })
                        },
                        _animate: function(e, t, n) {
                            var s, o, u, a = this,
                                f = 0,
                                l = e.length && (!t.length || e.index() < t.index()),
                                c = this.options.animate || {},
                                h = l && c.down || c,
                                p = function() {
                                    a._toggleComplete(n)
                                };
                            typeof h == "number" && (u = h), typeof h == "string" && (o = h), o = o || h.easing || c.easing, u = u || h.duration || c.duration;
                            if (!t.length) return e.animate(i, u, o, p);
                            if (!e.length) return t.animate(r, u, o, p);
                            s = e.show().outerHeight(), t.animate(r, {
                                duration: u,
                                easing: o,
                                step: function(e, t) {
                                    t.now = Math.round(e)
                                }
                            }), e.hide().animate(i, {
                                duration: u,
                                easing: o,
                                complete: p,
                                step: function(e, n) {
                                    n.now = Math.round(e), n.prop !== "height" ? f += n.now : a.options.heightStyle !== "content" && (n.now = Math.round(s - t.outerHeight() - f), f = 0)
                                }
                            })
                        },
                        _toggleComplete: function(e) {
                            var t = e.oldPanel;
                            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e)
                        }
                    })
                }(jQuery),
                function(e, t) {
                    e.widget("ui.autocomplete", {
                        version: "1.10.4",
                        defaultElement: "<input>",
                        options: {
                            appendTo: null,
                            autoFocus: !1,
                            delay: 300,
                            minLength: 1,
                            position: {
                                my: "left top",
                                at: "left bottom",
                                collision: "none"
                            },
                            source: null,
                            change: null,
                            close: null,
                            focus: null,
                            open: null,
                            response: null,
                            search: null,
                            select: null
                        },
                        requestIndex: 0,
                        pending: 0,
                        _create: function() {
                            var t, n, r, i = this.element[0].nodeName.toLowerCase(),
                                s = i === "textarea",
                                o = i === "input";
                            this.isMultiLine = s ? !0 : o ? !1 : this.element.prop("isContentEditable"), this.valueMethod = this.element[s || o ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {
                                keydown: function(i) {
                                    if (this.element.prop("readOnly")) {
                                        t = !0, r = !0, n = !0;
                                        return
                                    }
                                    t = !1, r = !1, n = !1;
                                    var s = e.ui.keyCode;
                                    switch (i.keyCode) {
                                        case s.PAGE_UP:
                                            t = !0, this._move("previousPage", i);
                                            break;
                                        case s.PAGE_DOWN:
                                            t = !0, this._move("nextPage", i);
                                            break;
                                        case s.UP:
                                            t = !0, this._keyEvent("previous", i);
                                            break;
                                        case s.DOWN:
                                            t = !0, this._keyEvent("next", i);
                                            break;
                                        case s.ENTER:
                                        case s.NUMPAD_ENTER:
                                            this.menu.active && (t = !0, i.preventDefault(), this.menu.select(i));
                                            break;
                                        case s.TAB:
                                            this.menu.active && this.menu.select(i);
                                            break;
                                        case s.ESCAPE:
                                            this.menu.element.is(":visible") && (this._value(this.term), this.close(i), i.preventDefault());
                                            break;
                                        default:
                                            n = !0, this._searchTimeout(i)
                                    }
                                },
                                keypress: function(r) {
                                    if (t) {
                                        t = !1, (!this.isMultiLine || this.menu.element.is(":visible")) && r.preventDefault();
                                        return
                                    }
                                    if (n) return;
                                    var i = e.ui.keyCode;
                                    switch (r.keyCode) {
                                        case i.PAGE_UP:
                                            this._move("previousPage", r);
                                            break;
                                        case i.PAGE_DOWN:
                                            this._move("nextPage", r);
                                            break;
                                        case i.UP:
                                            this._keyEvent("previous", r);
                                            break;
                                        case i.DOWN:
                                            this._keyEvent("next", r)
                                    }
                                },
                                input: function(e) {
                                    if (r) {
                                        r = !1, e.preventDefault();
                                        return
                                    }
                                    this._searchTimeout(e)
                                },
                                focus: function() {
                                    this.selectedItem = null, this.previous = this._value()
                                },
                                blur: function(e) {
                                    if (this.cancelBlur) {
                                        delete this.cancelBlur;
                                        return
                                    }
                                    clearTimeout(this.searching), this.close(e), this._change(e)
                                }
                            }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                                role: null
                            }).hide().data("ui-menu"), this._on(this.menu.element, {
                                mousedown: function(t) {
                                    t.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                                        delete this.cancelBlur
                                    });
                                    var n = this.menu.element[0];
                                    e(t.target).closest(".ui-menu-item").length || this._delay(function() {
                                        var t = this;
                                        this.document.one("mousedown", function(r) {
                                            r.target !== t.element[0] && r.target !== n && !e.contains(n, r.target) && t.close()
                                        })
                                    })
                                },
                                menufocus: function(t, n) {
                                    if (this.isNewMenu) {
                                        this.isNewMenu = !1;
                                        if (t.originalEvent && /^mouse/.test(t.originalEvent.type)) {
                                            this.menu.blur(), this.document.one("mousemove", function() {
                                                e(t.target).trigger(t.originalEvent)
                                            });
                                            return
                                        }
                                    }
                                    var r = n.item.data("ui-autocomplete-item");
                                    !1 !== this._trigger("focus", t, {
                                        item: r
                                    }) ? t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(r.value) : this.liveRegion.text(r.value)
                                },
                                menuselect: function(e, t) {
                                    var n = t.item.data("ui-autocomplete-item"),
                                        r = this.previous;
                                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = r, this._delay(function() {
                                        this.previous = r, this.selectedItem = n
                                    })), !1 !== this._trigger("select", e, {
                                        item: n
                                    }) && this._value(n.value), this.term = this._value(), this.close(e), this.selectedItem = n
                                }
                            }), this.liveRegion = e("<span>", {
                                role: "status",
                                "aria-live": "polite"
                            }).addClass("ui-helper-hidden-accessible").insertBefore(this.element), this._on(this.window, {
                                beforeunload: function() {
                                    this.element.removeAttr("autocomplete")
                                }
                            })
                        },
                        _destroy: function() {
                            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
                        },
                        _setOption: function(e, t) {
                            this._super(e, t), e === "source" && this._initSource(), e === "appendTo" && this.menu.element.appendTo(this._appendTo()), e === "disabled" && t && this.xhr && this.xhr.abort()
                        },
                        _appendTo: function() {
                            var t = this.options.appendTo;
                            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t
                        },
                        _initSource: function() {
                            var t, n, r = this;
                            e.isArray(this.options.source) ? (t = this.options.source, this.source = function(n, r) {
                                r(e.ui.autocomplete.filter(t, n.term))
                            }) : typeof this.options.source == "string" ? (n = this.options.source, this.source = function(t, i) {
                                r.xhr && r.xhr.abort(), r.xhr = e.ajax({
                                    url: n,
                                    data: t,
                                    dataType: "json",
                                    success: function(e) {
                                        i(e)
                                    },
                                    error: function() {
                                        i([])
                                    }
                                })
                            }) : this.source = this.options.source
                        },
                        _searchTimeout: function(e) {
                            clearTimeout(this.searching), this.searching = this._delay(function() {
                                this.term !== this._value() && (this.selectedItem = null, this.search(null, e))
                            }, this.options.delay)
                        },
                        search: function(e, t) {
                            e = e != null ? e : this._value(), this.term = this._value();
                            if (e.length < this.options.minLength) return this.close(t);
                            if (this._trigger("search", t) === !1) return;
                            return this._search(e)
                        },
                        _search: function(e) {
                            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({
                                term: e
                            }, this._response())
                        },
                        _response: function() {
                            var t = ++this.requestIndex;
                            return e.proxy(function(e) {
                                t === this.requestIndex && this.__response(e), this.pending--, this.pending || this.element.removeClass("ui-autocomplete-loading")
                            }, this)
                        },
                        __response: function(e) {
                            e && (e = this._normalize(e)), this._trigger("response", null, {
                                content: e
                            }), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close()
                        },
                        close: function(e) {
                            this.cancelSearch = !0, this._close(e)
                        },
                        _close: function(e) {
                            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e))
                        },
                        _change: function(e) {
                            this.previous !== this._value() && this._trigger("change", e, {
                                item: this.selectedItem
                            })
                        },
                        _normalize: function(t) {
                            return t.length && t[0].label && t[0].value ? t : e.map(t, function(t) {
                                return typeof t == "string" ? {
                                    label: t,
                                    value: t
                                } : e.extend({
                                    label: t.label || t.value,
                                    value: t.value || t.label
                                }, t)
                            })
                        },
                        _suggest: function(t) {
                            var n = this.menu.element.empty();
                            this._renderMenu(n, t), this.isNewMenu = !0, this.menu.refresh(), n.show(), this._resizeMenu(), n.position(e.extend({
                                of: this.element
                            }, this.options.position)), this.options.autoFocus && this.menu.next()
                        },
                        _resizeMenu: function() {
                            var e = this.menu.element;
                            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
                        },
                        _renderMenu: function(t, n) {
                            var r = this;
                            e.each(n, function(e, n) {
                                r._renderItemData(t, n)
                            })
                        },
                        _renderItemData: function(e, t) {
                            return this._renderItem(e, t).data("ui-autocomplete-item", t)
                        },
                        _renderItem: function(t, n) {
                            return e("<li>").append(e("<a>").text(n.label)).appendTo(t)
                        },
                        _move: function(e, t) {
                            if (!this.menu.element.is(":visible")) {
                                this.search(null, t);
                                return
                            }
                            if (this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e)) {
                                this._value(this.term), this.menu.blur();
                                return
                            }
                            this.menu[e](t)
                        },
                        widget: function() {
                            return this.menu.element
                        },
                        _value: function() {
                            return this.valueMethod.apply(this.element, arguments)
                        },
                        _keyEvent: function(e, t) {
                            if (!this.isMultiLine || this.menu.element.is(":visible")) this._move(e, t), t.preventDefault()
                        }
                    }), e.extend(e.ui.autocomplete, {
                        escapeRegex: function(e) {
                            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
                        },
                        filter: function(t, n) {
                            var r = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
                            return e.grep(t, function(e) {
                                return r.test(e.label || e.value || e)
                            })
                        }
                    }), e.widget("ui.autocomplete", e.ui.autocomplete, {
                        options: {
                            messages: {
                                noResults: "No search results.",
                                results: function(e) {
                                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                                }
                            }
                        },
                        __response: function(e) {
                            var t;
                            this._superApply(arguments);
                            if (this.options.disabled || this.cancelSearch) return;
                            e && e.length ? t = this.options.messages.results(e.length) : t = this.options.messages.noResults, this.liveRegion.text(t)
                        }
                    })
                }(jQuery),
                function(e, t) {
                    var n, r = "ui-button ui-widget ui-state-default ui-corner-all",
                        i = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
                        s = function() {
                            var t = e(this);
                            setTimeout(function() {
                                t.find(":ui-button").button("refresh")
                            }, 1)
                        },
                        o = function(t) {
                            var n = t.name,
                                r = t.form,
                                i = e([]);
                            return n && (n = n.replace(/'/g, "\\'"), r ? i = e(r).find("[name='" + n + "']") : i = e("[name='" + n + "']", t.ownerDocument).filter(function() {
                                return !this.form
                            })), i
                        };
                    e.widget("ui.button", {
                        version: "1.10.4",
                        defaultElement: "<button>",
                        options: {
                            disabled: null,
                            text: !0,
                            label: null,
                            icons: {
                                primary: null,
                                secondary: null
                            }
                        },
                        _create: function() {
                            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, s), typeof this.options.disabled != "boolean" ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
                            var t = this,
                                i = this.options,
                                u = this.type === "checkbox" || this.type === "radio",
                                a = u ? "" : "ui-state-active";
                            i.label === null && (i.label = this.type === "input" ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(r).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                                if (i.disabled) return;
                                this === n && e(this).addClass("ui-state-active")
                            }).bind("mouseleave" + this.eventNamespace, function() {
                                if (i.disabled) return;
                                e(this).removeClass(a)
                            }).bind("click" + this.eventNamespace, function(e) {
                                i.disabled && (e.preventDefault(), e.stopImmediatePropagation())
                            }), this._on({
                                focus: function() {
                                    this.buttonElement.addClass("ui-state-focus")
                                },
                                blur: function() {
                                    this.buttonElement.removeClass("ui-state-focus")
                                }
                            }), u && this.element.bind("change" + this.eventNamespace, function() {
                                t.refresh()
                            }), this.type === "checkbox" ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                                if (i.disabled) return !1
                            }) : this.type === "radio" ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                                if (i.disabled) return !1;
                                e(this).addClass("ui-state-active"), t.buttonElement.attr("aria-pressed", "true");
                                var n = t.element[0];
                                o(n).not(n).map(function() {
                                    return e(this).button("widget")[0]
                                }).removeClass("ui-state-active").attr("aria-pressed", "false")
                            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                                if (i.disabled) return !1;
                                e(this).addClass("ui-state-active"), n = this, t.document.one("mouseup", function() {
                                    n = null
                                })
                            }).bind("mouseup" + this.eventNamespace, function() {
                                if (i.disabled) return !1;
                                e(this).removeClass("ui-state-active")
                            }).bind("keydown" + this.eventNamespace, function(t) {
                                if (i.disabled) return !1;
                                (t.keyCode === e.ui.keyCode.SPACE || t.keyCode === e.ui.keyCode.ENTER) && e(this).addClass("ui-state-active")
                            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                                e(this).removeClass("ui-state-active")
                            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
                                t.keyCode === e.ui.keyCode.SPACE && e(this).click()
                            })), this._setOption("disabled", i.disabled), this._resetButton()
                        },
                        _determineButtonType: function() {
                            var e, t, n;
                            this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button", this.type === "checkbox" || this.type === "radio" ? (e = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), this.element.addClass("ui-helper-hidden-accessible"), n = this.element.is(":checked"), n && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", n)) : this.buttonElement = this.element
                        },
                        widget: function() {
                            return this.buttonElement
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(r + " ui-state-active " + i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title")
                        },
                        _setOption: function(e, t) {
                            this._super(e, t);
                            if (e === "disabled") {
                                this.element.prop("disabled", !!t), t && this.buttonElement.removeClass("ui-state-focus");
                                return
                            }
                            this._resetButton()
                        },
                        refresh: function() {
                            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
                            t !== this.options.disabled && this._setOption("disabled", t), this.type === "radio" ? o(this.element[0]).each(function() {
                                e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
                            }) : this.type === "checkbox" && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
                        },
                        _resetButton: function() {
                            if (this.type === "input") {
                                this.options.label && this.element.val(this.options.label);
                                return
                            }
                            var t = this.buttonElement.removeClass(i),
                                n = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),
                                r = this.options.icons,
                                s = r.primary && r.secondary,
                                o = [];
                            r.primary || r.secondary ? (this.options.text && o.push("ui-button-text-icon" + (s ? "s" : r.primary ? "-primary" : "-secondary")), r.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + r.primary + "'></span>"), r.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + r.secondary + "'></span>"), this.options.text || (o.push(s ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || t.attr("title", e.trim(n)))) : o.push("ui-button-text-only"), t.addClass(o.join(" "))
                        }
                    }), e.widget("ui.buttonset", {
                        version: "1.10.4",
                        options: {
                            items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
                        },
                        _create: function() {
                            this.element.addClass("ui-buttonset")
                        },
                        _init: function() {
                            this.refresh()
                        },
                        _setOption: function(e, t) {
                            e === "disabled" && this.buttons.button("option", e, t), this._super(e, t)
                        },
                        refresh: function() {
                            var t = this.element.css("direction") === "rtl";
                            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                                return e(this).button("widget")[0]
                            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end()
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                                return e(this).button("widget")[0]
                            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function i() {
                        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
                            closeText: "Done",
                            prevText: "Prev",
                            nextText: "Next",
                            currentText: "Today",
                            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                            weekHeader: "Wk",
                            dateFormat: "mm/dd/yy",
                            firstDay: 0,
                            isRTL: !1,
                            showMonthAfterYear: !1,
                            yearSuffix: ""
                        }, this._defaults = {
                            showOn: "focus",
                            showAnim: "fadeIn",
                            showOptions: {},
                            defaultDate: null,
                            appendText: "",
                            buttonText: "...",
                            buttonImage: "",
                            buttonImageOnly: !1,
                            hideIfNoPrevNext: !1,
                            navigationAsDateFormat: !1,
                            gotoCurrent: !1,
                            changeMonth: !1,
                            changeYear: !1,
                            yearRange: "c-10:c+10",
                            showOtherMonths: !1,
                            selectOtherMonths: !1,
                            showWeek: !1,
                            calculateWeek: this.iso8601Week,
                            shortYearCutoff: "+10",
                            minDate: null,
                            maxDate: null,
                            duration: "fast",
                            beforeShowDay: null,
                            beforeShow: null,
                            onSelect: null,
                            onChangeMonthYear: null,
                            onClose: null,
                            numberOfMonths: 1,
                            showCurrentAtPos: 0,
                            stepMonths: 1,
                            stepBigMonths: 12,
                            altField: "",
                            altFormat: "",
                            constrainInput: !0,
                            showButtonPanel: !1,
                            autoSize: !1,
                            disabled: !1
                        }, e.extend(this._defaults, this.regional[""]), this.dpDiv = s(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
                    }

                    function s(t) {
                        var n = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
                        return t.delegate(n, "mouseout", function() {
                            e(this).removeClass("ui-state-hover"), this.className.indexOf("ui-datepicker-prev") !== -1 && e(this).removeClass("ui-datepicker-prev-hover"), this.className.indexOf("ui-datepicker-next") !== -1 && e(this).removeClass("ui-datepicker-next-hover")
                        }).delegate(n, "mouseover", function() {
                            e.datepicker._isDisabledDatepicker(r.inline ? t.parent()[0] : r.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), e(this).addClass("ui-state-hover"), this.className.indexOf("ui-datepicker-prev") !== -1 && e(this).addClass("ui-datepicker-prev-hover"), this.className.indexOf("ui-datepicker-next") !== -1 && e(this).addClass("ui-datepicker-next-hover"))
                        })
                    }

                    function o(t, n) {
                        e.extend(t, n);
                        for (var r in n) n[r] == null && (t[r] = n[r]);
                        return t
                    }
                    e.extend(e.ui, {
                        datepicker: {
                            version: "1.10.4"
                        }
                    });
                    var n = "datepicker",
                        r;
                    e.extend(i.prototype, {
                        markerClassName: "hasDatepicker",
                        maxRows: 4,
                        _widgetDatepicker: function() {
                            return this.dpDiv
                        },
                        setDefaults: function(e) {
                            return o(this._defaults, e || {}), this
                        },
                        _attachDatepicker: function(t, n) {
                            var r, i, s;
                            r = t.nodeName.toLowerCase(), i = r === "div" || r === "span", t.id || (this.uuid += 1, t.id = "dp" + this.uuid), s = this._newInst(e(t), i), s.settings = e.extend({}, n || {}), r === "input" ? this._connectDatepicker(t, s) : i && this._inlineDatepicker(t, s)
                        },
                        _newInst: function(t, n) {
                            var r = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
                            return {
                                id: r,
                                input: t,
                                selectedDay: 0,
                                selectedMonth: 0,
                                selectedYear: 0,
                                drawMonth: 0,
                                drawYear: 0,
                                inline: n,
                                dpDiv: n ? s(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
                            }
                        },
                        _connectDatepicker: function(t, r) {
                            var i = e(t);
                            r.append = e([]), r.trigger = e([]);
                            if (i.hasClass(this.markerClassName)) return;
                            this._attachments(i, r), i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(r), e.data(t, n, r), r.settings.disabled && this._disableDatepicker(t)
                        },
                        _attachments: function(t, n) {
                            var r, i, s, o = this._get(n, "appendText"),
                                u = this._get(n, "isRTL");
                            n.append && n.append.remove(), o && (n.append = e("<span class='" + this._appendClass + "'>" + o + "</span>"), t[u ? "before" : "after"](n.append)), t.unbind("focus", this._showDatepicker), n.trigger && n.trigger.remove(), r = this._get(n, "showOn"), (r === "focus" || r === "both") && t.focus(this._showDatepicker);
                            if (r === "button" || r === "both") i = this._get(n, "buttonText"), s = this._get(n, "buttonImage"), n.trigger = e(this._get(n, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                                src: s,
                                alt: i,
                                title: i
                            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(s ? e("<img/>").attr({
                                src: s,
                                alt: i,
                                title: i
                            }) : i)), t[u ? "before" : "after"](n.trigger), n.trigger.click(function() {
                                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1
                            })
                        },
                        _autoSize: function(e) {
                            if (this._get(e, "autoSize") && !e.inline) {
                                var t, n, r, i, s = new Date(2009, 11, 20),
                                    o = this._get(e, "dateFormat");
                                o.match(/[DM]/) && (t = function(e) {
                                    n = 0, r = 0;
                                    for (i = 0; i < e.length; i++) e[i].length > n && (n = e[i].length, r = i);
                                    return r
                                }, s.setMonth(t(this._get(e, o.match(/MM/) ? "monthNames" : "monthNamesShort"))), s.setDate(t(this._get(e, o.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - s.getDay())), e.input.attr("size", this._formatDate(e, s).length)
                            }
                        },
                        _inlineDatepicker: function(t, r) {
                            var i = e(t);
                            if (i.hasClass(this.markerClassName)) return;
                            i.addClass(this.markerClassName).append(r.dpDiv), e.data(t, n, r), this._setDate(r, this._getDefaultDate(r), !0), this._updateDatepicker(r), this._updateAlternate(r), r.settings.disabled && this._disableDatepicker(t), r.dpDiv.css("display", "block")
                        },
                        _dialogDatepicker: function(t, r, i, s, u) {
                            var a, f, l, c, h, p = this._dialogInst;
                            return p || (this.uuid += 1, a = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + a + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), p = this._dialogInst = this._newInst(this._dialogInput, !1), p.settings = {}, e.data(this._dialogInput[0], n, p)), o(p.settings, s || {}), r = r && r.constructor === Date ? this._formatDate(p, r) : r, this._dialogInput.val(r), this._pos = u ? u.length ? u : [u.pageX, u.pageY] : null, this._pos || (f = document.documentElement.clientWidth, l = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, h = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [f / 2 - 100 + c, l / 2 - 150 + h]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), p.settings.onSelect = i, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), e.data(this._dialogInput[0], n, p), this
                        },
                        _destroyDatepicker: function(t) {
                            var r, i = e(t),
                                s = e.data(t, n);
                            if (!i.hasClass(this.markerClassName)) return;
                            r = t.nodeName.toLowerCase(), e.removeData(t, n), r === "input" ? (s.append.remove(), s.trigger.remove(), i.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (r === "div" || r === "span") && i.removeClass(this.markerClassName).empty()
                        },
                        _enableDatepicker: function(t) {
                            var r, i, s = e(t),
                                o = e.data(t, n);
                            if (!s.hasClass(this.markerClassName)) return;
                            r = t.nodeName.toLowerCase();
                            if (r === "input") t.disabled = !1, o.trigger.filter("button").each(function() {
                                this.disabled = !1
                            }).end().filter("img").css({
                                opacity: "1.0",
                                cursor: ""
                            });
                            else if (r === "div" || r === "span") i = s.children("." + this._inlineClass), i.children().removeClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1);
                            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                                return e === t ? null : e
                            })
                        },
                        _disableDatepicker: function(t) {
                            var r, i, s = e(t),
                                o = e.data(t, n);
                            if (!s.hasClass(this.markerClassName)) return;
                            r = t.nodeName.toLowerCase();
                            if (r === "input") t.disabled = !0, o.trigger.filter("button").each(function() {
                                this.disabled = !0
                            }).end().filter("img").css({
                                opacity: "0.5",
                                cursor: "default"
                            });
                            else if (r === "div" || r === "span") i = s.children("." + this._inlineClass), i.children().addClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0);
                            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                                return e === t ? null : e
                            }), this._disabledInputs[this._disabledInputs.length] = t
                        },
                        _isDisabledDatepicker: function(e) {
                            if (!e) return !1;
                            for (var t = 0; t < this._disabledInputs.length; t++)
                                if (this._disabledInputs[t] === e) return !0;
                            return !1
                        },
                        _getInst: function(t) {
                            try {
                                return e.data(t, n)
                            } catch (r) {
                                throw "Missing instance data for this datepicker"
                            }
                        },
                        _optionDatepicker: function(n, r, i) {
                            var s, u, a, f, l = this._getInst(n);
                            if (arguments.length === 2 && typeof r == "string") return r === "defaults" ? e.extend({}, e.datepicker._defaults) : l ? r === "all" ? e.extend({}, l.settings) : this._get(l, r) : null;
                            s = r || {}, typeof r == "string" && (s = {}, s[r] = i), l && (this._curInst === l && this._hideDatepicker(), u = this._getDateDatepicker(n, !0), a = this._getMinMaxDate(l, "min"), f = this._getMinMaxDate(l, "max"), o(l.settings, s), a !== null && s.dateFormat !== t && s.minDate === t && (l.settings.minDate = this._formatDate(l, a)), f !== null && s.dateFormat !== t && s.maxDate === t && (l.settings.maxDate = this._formatDate(l, f)), "disabled" in s && (s.disabled ? this._disableDatepicker(n) : this._enableDatepicker(n)), this._attachments(e(n), l), this._autoSize(l), this._setDate(l, u), this._updateAlternate(l), this._updateDatepicker(l))
                        },
                        _changeDatepicker: function(e, t, n) {
                            this._optionDatepicker(e, t, n)
                        },
                        _refreshDatepicker: function(e) {
                            var t = this._getInst(e);
                            t && this._updateDatepicker(t)
                        },
                        _setDateDatepicker: function(e, t) {
                            var n = this._getInst(e);
                            n && (this._setDate(n, t), this._updateDatepicker(n), this._updateAlternate(n))
                        },
                        _getDateDatepicker: function(e, t) {
                            var n = this._getInst(e);
                            return n && !n.inline && this._setDateFromField(n, t), n ? this._getDate(n) : null
                        },
                        _doKeyDown: function(t) {
                            var n, r, i, s = e.datepicker._getInst(t.target),
                                o = !0,
                                u = s.dpDiv.is(".ui-datepicker-rtl");
                            s._keyEvent = !0;
                            if (e.datepicker._datepickerShowing) switch (t.keyCode) {
                                case 9:
                                    e.datepicker._hideDatepicker(), o = !1;
                                    break;
                                case 13:
                                    return i = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", s.dpDiv), i[0] && e.datepicker._selectDay(t.target, s.selectedMonth, s.selectedYear, i[0]), n = e.datepicker._get(s, "onSelect"), n ? (r = e.datepicker._formatDate(s), n.apply(s.input ? s.input[0] : null, [r, s])) : e.datepicker._hideDatepicker(), !1;
                                case 27:
                                    e.datepicker._hideDatepicker();
                                    break;
                                case 33:
                                    e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                                    break;
                                case 34:
                                    e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                                    break;
                                case 35:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), o = t.ctrlKey || t.metaKey;
                                    break;
                                case 36:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), o = t.ctrlKey || t.metaKey;
                                    break;
                                case 37:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, u ? 1 : -1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                                    break;
                                case 38:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), o = t.ctrlKey || t.metaKey;
                                    break;
                                case 39:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, u ? -1 : 1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                                    break;
                                case 40:
                                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), o = t.ctrlKey || t.metaKey;
                                    break;
                                default:
                                    o = !1
                            } else t.keyCode === 36 && t.ctrlKey ? e.datepicker._showDatepicker(this) : o = !1;
                            o && (t.preventDefault(), t.stopPropagation())
                        },
                        _doKeyPress: function(t) {
                            var n, r, i = e.datepicker._getInst(t.target);
                            if (e.datepicker._get(i, "constrainInput")) return n = e.datepicker._possibleChars(e.datepicker._get(i, "dateFormat")), r = String.fromCharCode(t.charCode == null ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || r < " " || !n || n.indexOf(r) > -1
                        },
                        _doKeyUp: function(t) {
                            var n, r = e.datepicker._getInst(t.target);
                            if (r.input.val() !== r.lastVal) try {
                                n = e.datepicker.parseDate(e.datepicker._get(r, "dateFormat"), r.input ? r.input.val() : null, e.datepicker._getFormatConfig(r)), n && (e.datepicker._setDateFromField(r), e.datepicker._updateAlternate(r), e.datepicker._updateDatepicker(r))
                            } catch (i) {}
                            return !0
                        },
                        _showDatepicker: function(t) {
                            t = t.target || t, t.nodeName.toLowerCase() !== "input" && (t = e("input", t.parentNode)[0]);
                            if (e.datepicker._isDisabledDatepicker(t) || e.datepicker._lastInput === t) return;
                            var n, r, i, s, u, a, f;
                            n = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== n && (e.datepicker._curInst.dpDiv.stop(!0, !0), n && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), r = e.datepicker._get(n, "beforeShow"), i = r ? r.apply(t, [t, n]) : {};
                            if (i === !1) return;
                            o(n.settings, i), n.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(n), e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), e.datepicker._pos[1] += t.offsetHeight), s = !1, e(t).parents().each(function() {
                                return s |= e(this).css("position") === "fixed", !s
                            }), u = {
                                left: e.datepicker._pos[0],
                                top: e.datepicker._pos[1]
                            }, e.datepicker._pos = null, n.dpDiv.empty(), n.dpDiv.css({
                                position: "absolute",
                                display: "block",
                                top: "-1000px"
                            }), e.datepicker._updateDatepicker(n), u = e.datepicker._checkOffset(n, u, s), n.dpDiv.css({
                                position: e.datepicker._inDialog && e.blockUI ? "static" : s ? "fixed" : "absolute",
                                display: "none",
                                left: u.left + "px",
                                top: u.top + "px"
                            }), n.inline || (a = e.datepicker._get(n, "showAnim"), f = e.datepicker._get(n, "duration"), n.dpDiv.zIndex(e(t).zIndex() + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[a] ? n.dpDiv.show(a, e.datepicker._get(n, "showOptions"), f) : n.dpDiv[a || "show"](a ? f : null), e.datepicker._shouldFocusInput(n) && n.input.focus(), e.datepicker._curInst = n)
                        },
                        _updateDatepicker: function(t) {
                            this.maxRows = 4, r = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t), t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
                            var n, i = this._getNumberOfMonths(t),
                                s = i[1],
                                o = 17;
                            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), s > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", o * s + "em"), t.dpDiv[(i[0] !== 1 || i[1] !== 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi"), t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), t.yearshtml && (n = t.yearshtml, setTimeout(function() {
                                n === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), n = t.yearshtml = null
                            }, 0))
                        },
                        _shouldFocusInput: function(e) {
                            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
                        },
                        _checkOffset: function(t, n, r) {
                            var i = t.dpDiv.outerWidth(),
                                s = t.dpDiv.outerHeight(),
                                o = t.input ? t.input.outerWidth() : 0,
                                u = t.input ? t.input.outerHeight() : 0,
                                a = document.documentElement.clientWidth + (r ? 0 : e(document).scrollLeft()),
                                f = document.documentElement.clientHeight + (r ? 0 : e(document).scrollTop());
                            return n.left -= this._get(t, "isRTL") ? i - o : 0, n.left -= r && n.left === t.input.offset().left ? e(document).scrollLeft() : 0, n.top -= r && n.top === t.input.offset().top + u ? e(document).scrollTop() : 0, n.left -= Math.min(n.left, n.left + i > a && a > i ? Math.abs(n.left + i - a) : 0), n.top -= Math.min(n.top, n.top + s > f && f > s ? Math.abs(s + u) : 0), n
                        },
                        _findPos: function(t) {
                            var n, r = this._getInst(t),
                                i = this._get(r, "isRTL");
                            while (t && (t.type === "hidden" || t.nodeType !== 1 || e.expr.filters.hidden(t))) t = t[i ? "previousSibling" : "nextSibling"];
                            return n = e(t).offset(), [n.left, n.top]
                        },
                        _hideDatepicker: function(t) {
                            var r, i, s, o, u = this._curInst;
                            if (!u || t && u !== e.data(t, n)) return;
                            this._datepickerShowing && (r = this._get(u, "showAnim"), i = this._get(u, "duration"), s = function() {
                                e.datepicker._tidyDialog(u)
                            }, e.effects && (e.effects.effect[r] || e.effects[r]) ? u.dpDiv.hide(r, e.datepicker._get(u, "showOptions"), i, s) : u.dpDiv[r === "slideDown" ? "slideUp" : r === "fadeIn" ? "fadeOut" : "hide"](r ? i : null, s), r || s(), this._datepickerShowing = !1, o = this._get(u, "onClose"), o && o.apply(u.input ? u.input[0] : null, [u.input ? u.input.val() : "", u]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                                position: "absolute",
                                left: "0",
                                top: "-100px"
                            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1)
                        },
                        _tidyDialog: function(e) {
                            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
                        },
                        _checkExternalClick: function(t) {
                            if (!e.datepicker._curInst) return;
                            var n = e(t.target),
                                r = e.datepicker._getInst(n[0]);
                            (n[0].id !== e.datepicker._mainDivId && n.parents("#" + e.datepicker._mainDivId).length === 0 && !n.hasClass(e.datepicker.markerClassName) && !n.closest("." + e.datepicker._triggerClass).length && e.datepicker._datepickerShowing && (!e.datepicker._inDialog || !e.blockUI) || n.hasClass(e.datepicker.markerClassName) && e.datepicker._curInst !== r) && e.datepicker._hideDatepicker()
                        },
                        _adjustDate: function(t, n, r) {
                            var i = e(t),
                                s = this._getInst(i[0]);
                            if (this._isDisabledDatepicker(i[0])) return;
                            this._adjustInstDate(s, n + (r === "M" ? this._get(s, "showCurrentAtPos") : 0), r), this._updateDatepicker(s)
                        },
                        _gotoToday: function(t) {
                            var n, r = e(t),
                                i = this._getInst(r[0]);
                            this._get(i, "gotoCurrent") && i.currentDay ? (i.selectedDay = i.currentDay, i.drawMonth = i.selectedMonth = i.currentMonth, i.drawYear = i.selectedYear = i.currentYear) : (n = new Date, i.selectedDay = n.getDate(), i.drawMonth = i.selectedMonth = n.getMonth(), i.drawYear = i.selectedYear = n.getFullYear()), this._notifyChange(i), this._adjustDate(r)
                        },
                        _selectMonthYear: function(t, n, r) {
                            var i = e(t),
                                s = this._getInst(i[0]);
                            s["selected" + (r === "M" ? "Month" : "Year")] = s["draw" + (r === "M" ? "Month" : "Year")] = parseInt(n.options[n.selectedIndex].value, 10), this._notifyChange(s), this._adjustDate(i)
                        },
                        _selectDay: function(t, n, r, i) {
                            var s, o = e(t);
                            if (e(i).hasClass(this._unselectableClass) || this._isDisabledDatepicker(o[0])) return;
                            s = this._getInst(o[0]), s.selectedDay = s.currentDay = e("a", i).html(), s.selectedMonth = s.currentMonth = n, s.selectedYear = s.currentYear = r, this._selectDate(t, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))
                        },
                        _clearDate: function(t) {
                            var n = e(t);
                            this._selectDate(n, "")
                        },
                        _selectDate: function(t, n) {
                            var r, i = e(t),
                                s = this._getInst(i[0]);
                            n = n != null ? n : this._formatDate(s), s.input && s.input.val(n), this._updateAlternate(s), r = this._get(s, "onSelect"), r ? r.apply(s.input ? s.input[0] : null, [n, s]) : s.input && s.input.trigger("change"), s.inline ? this._updateDatepicker(s) : (this._hideDatepicker(), this._lastInput = s.input[0], typeof s.input[0] != "object" && s.input.focus(), this._lastInput = null)
                        },
                        _updateAlternate: function(t) {
                            var n, r, i, s = this._get(t, "altField");
                            s && (n = this._get(t, "altFormat") || this._get(t, "dateFormat"), r = this._getDate(t), i = this.formatDate(n, r, this._getFormatConfig(t)), e(s).each(function() {
                                e(this).val(i)
                            }))
                        },
                        noWeekends: function(e) {
                            var t = e.getDay();
                            return [t > 0 && t < 6, ""]
                        },
                        iso8601Week: function(e) {
                            var t, n = new Date(e.getTime());
                            return n.setDate(n.getDate() + 4 - (n.getDay() || 7)), t = n.getTime(), n.setMonth(0), n.setDate(1), Math.floor(Math.round((t - n) / 864e5) / 7) + 1
                        },
                        parseDate: function(t, n, r) {
                            if (t == null || n == null) throw "Invalid arguments";
                            n = typeof n == "object" ? n.toString() : n + "";
                            if (n === "") return null;
                            var i, s, o, u = 0,
                                a = (r ? r.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                                f = typeof a != "string" ? a : (new Date).getFullYear() % 100 + parseInt(a, 10),
                                l = (r ? r.dayNamesShort : null) || this._defaults.dayNamesShort,
                                c = (r ? r.dayNames : null) || this._defaults.dayNames,
                                h = (r ? r.monthNamesShort : null) || this._defaults.monthNamesShort,
                                p = (r ? r.monthNames : null) || this._defaults.monthNames,
                                d = -1,
                                v = -1,
                                m = -1,
                                g = -1,
                                y = !1,
                                b, w = function(e) {
                                    var n = i + 1 < t.length && t.charAt(i + 1) === e;
                                    return n && i++, n
                                },
                                E = function(e) {
                                    var t = w(e),
                                        r = e === "@" ? 14 : e === "!" ? 20 : e === "y" && t ? 4 : e === "o" ? 3 : 2,
                                        i = new RegExp("^\\d{1," + r + "}"),
                                        s = n.substring(u).match(i);
                                    if (!s) throw "Missing number at position " + u;
                                    return u += s[0].length, parseInt(s[0], 10)
                                },
                                S = function(t, r, i) {
                                    var s = -1,
                                        o = e.map(w(t) ? i : r, function(e, t) {
                                            return [
                                                [t, e]
                                            ]
                                        }).sort(function(e, t) {
                                            return -(e[1].length - t[1].length)
                                        });
                                    e.each(o, function(e, t) {
                                        var r = t[1];
                                        if (n.substr(u, r.length).toLowerCase() === r.toLowerCase()) return s = t[0], u += r.length, !1
                                    });
                                    if (s !== -1) return s + 1;
                                    throw "Unknown name at position " + u
                                },
                                x = function() {
                                    if (n.charAt(u) !== t.charAt(i)) throw "Unexpected literal at position " + u;
                                    u++
                                };
                            for (i = 0; i < t.length; i++)
                                if (y) t.charAt(i) === "'" && !w("'") ? y = !1 : x();
                                else switch (t.charAt(i)) {
                                    case "d":
                                        m = E("d");
                                        break;
                                    case "D":
                                        S("D", l, c);
                                        break;
                                    case "o":
                                        g = E("o");
                                        break;
                                    case "m":
                                        v = E("m");
                                        break;
                                    case "M":
                                        v = S("M", h, p);
                                        break;
                                    case "y":
                                        d = E("y");
                                        break;
                                    case "@":
                                        b = new Date(E("@")), d = b.getFullYear(), v = b.getMonth() + 1, m = b.getDate();
                                        break;
                                    case "!":
                                        b = new Date((E("!") - this._ticksTo1970) / 1e4), d = b.getFullYear(), v = b.getMonth() + 1, m = b.getDate();
                                        break;
                                    case "'":
                                        w("'") ? x() : y = !0;
                                        break;
                                    default:
                                        x()
                                }
                                if (u < n.length) {
                                    o = n.substr(u);
                                    if (!/^\s+/.test(o)) throw "Extra/unparsed characters found in date: " + o
                                }
                            d === -1 ? d = (new Date).getFullYear() : d < 100 && (d += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (d <= f ? 0 : -100));
                            if (g > -1) {
                                v = 1, m = g;
                                do {
                                    s = this._getDaysInMonth(d, v - 1);
                                    if (m <= s) break;
                                    v++, m -= s
                                } while (!0)
                            }
                            b = this._daylightSavingAdjust(new Date(d, v - 1, m));
                            if (b.getFullYear() !== d || b.getMonth() + 1 !== v || b.getDate() !== m) throw "Invalid date";
                            return b
                        },
                        ATOM: "yy-mm-dd",
                        COOKIE: "D, dd M yy",
                        ISO_8601: "yy-mm-dd",
                        RFC_822: "D, d M y",
                        RFC_850: "DD, dd-M-y",
                        RFC_1036: "D, d M y",
                        RFC_1123: "D, d M yy",
                        RFC_2822: "D, d M yy",
                        RSS: "D, d M y",
                        TICKS: "!",
                        TIMESTAMP: "@",
                        W3C: "yy-mm-dd",
                        _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 24 * 60 * 60 * 1e7,
                        formatDate: function(e, t, n) {
                            if (!t) return "";
                            var r, i = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                                s = (n ? n.dayNames : null) || this._defaults.dayNames,
                                o = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                                u = (n ? n.monthNames : null) || this._defaults.monthNames,
                                a = function(t) {
                                    var n = r + 1 < e.length && e.charAt(r + 1) === t;
                                    return n && r++, n
                                },
                                f = function(e, t, n) {
                                    var r = "" + t;
                                    if (a(e))
                                        while (r.length < n) r = "0" + r;
                                    return r
                                },
                                l = function(e, t, n, r) {
                                    return a(e) ? r[t] : n[t]
                                },
                                c = "",
                                h = !1;
                            if (t)
                                for (r = 0; r < e.length; r++)
                                    if (h) e.charAt(r) === "'" && !a("'") ? h = !1 : c += e.charAt(r);
                                    else switch (e.charAt(r)) {
                                        case "d":
                                            c += f("d", t.getDate(), 2);
                                            break;
                                        case "D":
                                            c += l("D", t.getDay(), i, s);
                                            break;
                                        case "o":
                                            c += f("o", Math.round(((new Date(t.getFullYear(), t.getMonth(), t.getDate())).getTime() - (new Date(t.getFullYear(), 0, 0)).getTime()) / 864e5), 3);
                                            break;
                                        case "m":
                                            c += f("m", t.getMonth() + 1, 2);
                                            break;
                                        case "M":
                                            c += l("M", t.getMonth(), o, u);
                                            break;
                                        case "y":
                                            c += a("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                                            break;
                                        case "@":
                                            c += t.getTime();
                                            break;
                                        case "!":
                                            c += t.getTime() * 1e4 + this._ticksTo1970;
                                            break;
                                        case "'":
                                            a("'") ? c += "'" : h = !0;
                                            break;
                                        default:
                                            c += e.charAt(r)
                                    }
                                    return c
                        },
                        _possibleChars: function(e) {
                            var t, n = "",
                                r = !1,
                                i = function(n) {
                                    var r = t + 1 < e.length && e.charAt(t + 1) === n;
                                    return r && t++, r
                                };
                            for (t = 0; t < e.length; t++)
                                if (r) e.charAt(t) === "'" && !i("'") ? r = !1 : n += e.charAt(t);
                                else switch (e.charAt(t)) {
                                    case "d":
                                    case "m":
                                    case "y":
                                    case "@":
                                        n += "0123456789";
                                        break;
                                    case "D":
                                    case "M":
                                        return null;
                                    case "'":
                                        i("'") ? n += "'" : r = !0;
                                        break;
                                    default:
                                        n += e.charAt(t)
                                }
                                return n
                        },
                        _get: function(e, n) {
                            return e.settings[n] !== t ? e.settings[n] : this._defaults[n]
                        },
                        _setDateFromField: function(e, t) {
                            if (e.input.val() === e.lastVal) return;
                            var n = this._get(e, "dateFormat"),
                                r = e.lastVal = e.input ? e.input.val() : null,
                                i = this._getDefaultDate(e),
                                s = i,
                                o = this._getFormatConfig(e);
                            try {
                                s = this.parseDate(n, r, o) || i
                            } catch (u) {
                                r = t ? "" : r
                            }
                            e.selectedDay = s.getDate(), e.drawMonth = e.selectedMonth = s.getMonth(), e.drawYear = e.selectedYear = s.getFullYear(), e.currentDay = r ? s.getDate() : 0, e.currentMonth = r ? s.getMonth() : 0, e.currentYear = r ? s.getFullYear() : 0, this._adjustInstDate(e)
                        },
                        _getDefaultDate: function(e) {
                            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
                        },
                        _determineDate: function(t, n, r) {
                            var i = function(e) {
                                    var t = new Date;
                                    return t.setDate(t.getDate() + e), t
                                },
                                s = function(n) {
                                    try {
                                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), n, e.datepicker._getFormatConfig(t))
                                    } catch (r) {}
                                    var i = (n.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date,
                                        s = i.getFullYear(),
                                        o = i.getMonth(),
                                        u = i.getDate(),
                                        a = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                                        f = a.exec(n);
                                    while (f) {
                                        switch (f[2] || "d") {
                                            case "d":
                                            case "D":
                                                u += parseInt(f[1], 10);
                                                break;
                                            case "w":
                                            case "W":
                                                u += parseInt(f[1], 10) * 7;
                                                break;
                                            case "m":
                                            case "M":
                                                o += parseInt(f[1], 10), u = Math.min(u, e.datepicker._getDaysInMonth(s, o));
                                                break;
                                            case "y":
                                            case "Y":
                                                s += parseInt(f[1], 10), u = Math.min(u, e.datepicker._getDaysInMonth(s, o))
                                        }
                                        f = a.exec(n)
                                    }
                                    return new Date(s, o, u)
                                },
                                o = n == null || n === "" ? r : typeof n == "string" ? s(n) : typeof n == "number" ? isNaN(n) ? r : i(n) : new Date(n.getTime());
                            return o = o && o.toString() === "Invalid Date" ? r : o, o && (o.setHours(0), o.setMinutes(0), o.setSeconds(0), o.setMilliseconds(0)), this._daylightSavingAdjust(o)
                        },
                        _daylightSavingAdjust: function(e) {
                            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
                        },
                        _setDate: function(e, t, n) {
                            var r = !t,
                                i = e.selectedMonth,
                                s = e.selectedYear,
                                o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
                            e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), (i !== e.selectedMonth || s !== e.selectedYear) && !n && this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(r ? "" : this._formatDate(e))
                        },
                        _getDate: function(e) {
                            var t = !e.currentYear || e.input && e.input.val() === "" ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                            return t
                        },
                        _attachHandlers: function(t) {
                            var n = this._get(t, "stepMonths"),
                                r = "#" + t.id.replace(/\\\\/g, "\\");
                            t.dpDiv.find("[data-handler]").map(function() {
                                var t = {
                                    prev: function() {
                                        e.datepicker._adjustDate(r, -n, "M")
                                    },
                                    next: function() {
                                        e.datepicker._adjustDate(r, +n, "M")
                                    },
                                    hide: function() {
                                        e.datepicker._hideDatepicker()
                                    },
                                    today: function() {
                                        e.datepicker._gotoToday(r)
                                    },
                                    selectDay: function() {
                                        return e.datepicker._selectDay(r, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                                    },
                                    selectMonth: function() {
                                        return e.datepicker._selectMonthYear(r, this, "M"), !1
                                    },
                                    selectYear: function() {
                                        return e.datepicker._selectMonthYear(r, this, "Y"), !1
                                    }
                                };
                                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
                            })
                        },
                        _generateHTML: function(e) {
                            var t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q = new Date,
                                R = this._daylightSavingAdjust(new Date(q.getFullYear(), q.getMonth(), q.getDate())),
                                U = this._get(e, "isRTL"),
                                z = this._get(e, "showButtonPanel"),
                                W = this._get(e, "hideIfNoPrevNext"),
                                X = this._get(e, "navigationAsDateFormat"),
                                V = this._getNumberOfMonths(e),
                                $ = this._get(e, "showCurrentAtPos"),
                                J = this._get(e, "stepMonths"),
                                K = V[0] !== 1 || V[1] !== 1,
                                Q = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                                G = this._getMinMaxDate(e, "min"),
                                Y = this._getMinMaxDate(e, "max"),
                                Z = e.drawMonth - $,
                                et = e.drawYear;
                            Z < 0 && (Z += 12, et--);
                            if (Y) {
                                t = this._daylightSavingAdjust(new Date(Y.getFullYear(), Y.getMonth() - V[0] * V[1] + 1, Y.getDate())), t = G && t < G ? G : t;
                                while (this._daylightSavingAdjust(new Date(et, Z, 1)) > t) Z--, Z < 0 && (Z = 11, et--)
                            }
                            e.drawMonth = Z, e.drawYear = et, n = this._get(e, "prevText"), n = X ? this.formatDate(n, this._daylightSavingAdjust(new Date(et, Z - J, 1)), this._getFormatConfig(e)) : n, r = this._canAdjustMonth(e, -1, et, Z) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (U ? "e" : "w") + "'>" + n + "</span></a>" : W ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (U ? "e" : "w") + "'>" + n + "</span></a>", i = this._get(e, "nextText"), i = X ? this.formatDate(i, this._daylightSavingAdjust(new Date(et, Z + J, 1)), this._getFormatConfig(e)) : i, s = this._canAdjustMonth(e, 1, et, Z) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (U ? "w" : "e") + "'>" + i + "</span></a>" : W ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (U ? "w" : "e") + "'>" + i + "</span></a>", o = this._get(e, "currentText"), u = this._get(e, "gotoCurrent") && e.currentDay ? Q : R, o = X ? this.formatDate(o, u, this._getFormatConfig(e)) : o, a = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", f = z ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (U ? a : "") + (this._isInRange(e, u) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + o + "</button>" : "") + (U ? "" : a) + "</div>" : "", l = parseInt(this._get(e, "firstDay"), 10), l = isNaN(l) ? 0 : l, c = this._get(e, "showWeek"), h = this._get(e, "dayNames"), p = this._get(e, "dayNamesMin"), d = this._get(e, "monthNames"), v = this._get(e, "monthNamesShort"), m = this._get(e, "beforeShowDay"), g = this._get(e, "showOtherMonths"), y = this._get(e, "selectOtherMonths"), b = this._getDefaultDate(e), w = "", E;
                            for (S = 0; S < V[0]; S++) {
                                x = "", this.maxRows = 4;
                                for (T = 0; T < V[1]; T++) {
                                    N = this._daylightSavingAdjust(new Date(et, Z, e.selectedDay)), C = " ui-corner-all", k = "";
                                    if (K) {
                                        k += "<div class='ui-datepicker-group";
                                        if (V[1] > 1) switch (T) {
                                            case 0:
                                                k += " ui-datepicker-group-first", C = " ui-corner-" + (U ? "right" : "left");
                                                break;
                                            case V[1] - 1:
                                                k += " ui-datepicker-group-last", C = " ui-corner-" + (U ? "left" : "right");
                                                break;
                                            default:
                                                k += " ui-datepicker-group-middle", C = ""
                                        }
                                        k += "'>"
                                    }
                                    k += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + C + "'>" + (/all|left/.test(C) && S === 0 ? U ? s : r : "") + (/all|right/.test(C) && S === 0 ? U ? r : s : "") + this._generateMonthYearHeader(e, Z, et, G, Y, S > 0 || T > 0, d, v) + "</div><table class='ui-datepicker-calendar'><thead>" + "<tr>", L = c ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "";
                                    for (E = 0; E < 7; E++) A = (E + l) % 7, L += "<th" + ((E + l + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + ">" + "<span title='" + h[A] + "'>" + p[A] + "</span></th>";
                                    k += L + "</tr></thead><tbody>", O = this._getDaysInMonth(et, Z), et === e.selectedYear && Z === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, O)), M = (this._getFirstDayOfMonth(et, Z) - l + 7) % 7, _ = Math.ceil((M + O) / 7), D = K ? this.maxRows > _ ? this.maxRows : _ : _, this.maxRows = D, P = this._daylightSavingAdjust(new Date(et, Z, 1 - M));
                                    for (H = 0; H < D; H++) {
                                        k += "<tr>", B = c ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(P) + "</td>" : "";
                                        for (E = 0; E < 7; E++) j = m ? m.apply(e.input ? e.input[0] : null, [P]) : [!0, ""], F = P.getMonth() !== Z, I = F && !y || !j[0] || G && P < G || Y && P > Y, B += "<td class='" + ((E + l + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (F ? " ui-datepicker-other-month" : "") + (P.getTime() === N.getTime() && Z === e.selectedMonth && e._keyEvent || b.getTime() === P.getTime() && b.getTime() === N.getTime() ? " " + this._dayOverClass : "") + (I ? " " + this._unselectableClass + " ui-state-disabled" : "") + (F && !g ? "" : " " + j[1] + (P.getTime() === Q.getTime() ? " " + this._currentClass : "") + (P.getTime() === R.getTime() ? " ui-datepicker-today" : "")) + "'" + ((!F || g) && j[2] ? " title='" + j[2].replace(/'/g, "&#39;") + "'" : "") + (I ? "" : " data-handler='selectDay' data-event='click' data-month='" + P.getMonth() + "' data-year='" + P.getFullYear() + "'") + ">" + (F && !g ? "&#xa0;" : I ? "<span class='ui-state-default'>" + P.getDate() + "</span>" : "<a class='ui-state-default" + (P.getTime() === R.getTime() ? " ui-state-highlight" : "") + (P.getTime() === Q.getTime() ? " ui-state-active" : "") + (F ? " ui-priority-secondary" : "") + "' href='#'>" + P.getDate() + "</a>") + "</td>", P.setDate(P.getDate() + 1), P = this._daylightSavingAdjust(P);
                                        k += B + "</tr>"
                                    }
                                    Z++, Z > 11 && (Z = 0, et++), k += "</tbody></table>" + (K ? "</div>" + (V[0] > 0 && T === V[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), x += k
                                }
                                w += x
                            }
                            return w += f, e._keyEvent = !1, w
                        },
                        _generateMonthYearHeader: function(e, t, n, r, i, s, o, u) {
                            var a, f, l, c, h, p, d, v, m = this._get(e, "changeMonth"),
                                g = this._get(e, "changeYear"),
                                y = this._get(e, "showMonthAfterYear"),
                                b = "<div class='ui-datepicker-title'>",
                                w = "";
                            if (s || !m) w += "<span class='ui-datepicker-month'>" + o[t] + "</span>";
                            else {
                                a = r && r.getFullYear() === n, f = i && i.getFullYear() === n, w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";
                                for (l = 0; l < 12; l++)(!a || l >= r.getMonth()) && (!f || l <= i.getMonth()) && (w += "<option value='" + l + "'" + (l === t ? " selected='selected'" : "") + ">" + u[l] + "</option>");
                                w += "</select>"
                            }
                            y || (b += w + (s || !m || !g ? "&#xa0;" : ""));
                            if (!e.yearshtml) {
                                e.yearshtml = "";
                                if (s || !g) b += "<span class='ui-datepicker-year'>" + n + "</span>";
                                else {
                                    c = this._get(e, "yearRange").split(":"), h = (new Date).getFullYear(), p = function(e) {
                                        var t = e.match(/c[+\-].*/) ? n + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? h + parseInt(e, 10) : parseInt(e, 10);
                                        return isNaN(t) ? h : t
                                    }, d = p(c[0]), v = Math.max(d, p(c[1] || "")), d = r ? Math.max(d, r.getFullYear()) : d, v = i ? Math.min(v, i.getFullYear()) : v, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
                                    for (; d <= v; d++) e.yearshtml += "<option value='" + d + "'" + (d === n ? " selected='selected'" : "") + ">" + d + "</option>";
                                    e.yearshtml += "</select>", b += e.yearshtml, e.yearshtml = null
                                }
                            }
                            return b += this._get(e, "yearSuffix"), y && (b += (s || !m || !g ? "&#xa0;" : "") + w), b += "</div>", b
                        },
                        _adjustInstDate: function(e, t, n) {
                            var r = e.drawYear + (n === "Y" ? t : 0),
                                i = e.drawMonth + (n === "M" ? t : 0),
                                s = Math.min(e.selectedDay, this._getDaysInMonth(r, i)) + (n === "D" ? t : 0),
                                o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(r, i, s)));
                            e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), (n === "M" || n === "Y") && this._notifyChange(e)
                        },
                        _restrictMinMax: function(e, t) {
                            var n = this._getMinMaxDate(e, "min"),
                                r = this._getMinMaxDate(e, "max"),
                                i = n && t < n ? n : t;
                            return r && i > r ? r : i
                        },
                        _notifyChange: function(e) {
                            var t = this._get(e, "onChangeMonthYear");
                            t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
                        },
                        _getNumberOfMonths: function(e) {
                            var t = this._get(e, "numberOfMonths");
                            return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t
                        },
                        _getMinMaxDate: function(e, t) {
                            return this._determineDate(e, this._get(e, t + "Date"), null)
                        },
                        _getDaysInMonth: function(e, t) {
                            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
                        },
                        _getFirstDayOfMonth: function(e, t) {
                            return (new Date(e, t, 1)).getDay()
                        },
                        _canAdjustMonth: function(e, t, n, r) {
                            var i = this._getNumberOfMonths(e),
                                s = this._daylightSavingAdjust(new Date(n, r + (t < 0 ? t : i[0] * i[1]), 1));
                            return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(e, s)
                        },
                        _isInRange: function(e, t) {
                            var n, r, i = this._getMinMaxDate(e, "min"),
                                s = this._getMinMaxDate(e, "max"),
                                o = null,
                                u = null,
                                a = this._get(e, "yearRange");
                            return a && (n = a.split(":"), r = (new Date).getFullYear(), o = parseInt(n[0], 10), u = parseInt(n[1], 10), n[0].match(/[+\-].*/) && (o += r), n[1].match(/[+\-].*/) && (u += r)), (!i || t.getTime() >= i.getTime()) && (!s || t.getTime() <= s.getTime()) && (!o || t.getFullYear() >= o) && (!u || t.getFullYear() <= u)
                        },
                        _getFormatConfig: function(e) {
                            var t = this._get(e, "shortYearCutoff");
                            return t = typeof t != "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                                shortYearCutoff: t,
                                dayNamesShort: this._get(e, "dayNamesShort"),
                                dayNames: this._get(e, "dayNames"),
                                monthNamesShort: this._get(e, "monthNamesShort"),
                                monthNames: this._get(e, "monthNames")
                            }
                        },
                        _formatDate: function(e, t, n, r) {
                            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
                            var i = t ? typeof t == "object" ? t : this._daylightSavingAdjust(new Date(r, n, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                            return this.formatDate(this._get(e, "dateFormat"), i, this._getFormatConfig(e))
                        }
                    }), e.fn.datepicker = function(t) {
                        if (!this.length) return this;
                        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), e.datepicker.initialized = !0), e("#" + e.datepicker._mainDivId).length === 0 && e("body").append(e.datepicker.dpDiv);
                        var n = Array.prototype.slice.call(arguments, 1);
                        return typeof t != "string" || t !== "isDisabled" && t !== "getDate" && t !== "widget" ? t === "option" && arguments.length === 2 && typeof arguments[1] == "string" ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(n)) : this.each(function() {
                            typeof t == "string" ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(n)) : e.datepicker._attachDatepicker(this, t)
                        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(n))
                    }, e.datepicker = new i, e.datepicker.initialized = !1, e.datepicker.uuid = (new Date).getTime(), e.datepicker.version = "1.10.4"
                }(jQuery),
                function(e, t) {
                    var n = {
                            buttons: !0,
                            height: !0,
                            maxHeight: !0,
                            maxWidth: !0,
                            minHeight: !0,
                            minWidth: !0,
                            width: !0
                        },
                        r = {
                            maxHeight: !0,
                            maxWidth: !0,
                            minHeight: !0,
                            minWidth: !0
                        };
                    e.widget("ui.dialog", {
                        version: "1.10.4",
                        options: {
                            appendTo: "body",
                            autoOpen: !0,
                            buttons: [],
                            closeOnEscape: !0,
                            closeText: "close",
                            dialogClass: "",
                            draggable: !0,
                            hide: null,
                            height: "auto",
                            maxHeight: null,
                            maxWidth: null,
                            minHeight: 150,
                            minWidth: 150,
                            modal: !1,
                            position: {
                                my: "center",
                                at: "center",
                                of: window,
                                collision: "fit",
                                using: function(t) {
                                    var n = e(this).css(t).offset().top;
                                    n < 0 && e(this).css("top", t.top - n)
                                }
                            },
                            resizable: !0,
                            show: null,
                            title: null,
                            width: 300,
                            beforeClose: null,
                            close: null,
                            drag: null,
                            dragStart: null,
                            dragStop: null,
                            focus: null,
                            open: null,
                            resize: null,
                            resizeStart: null,
                            resizeStop: null
                        },
                        _create: function() {
                            this.originalCss = {
                                display: this.element[0].style.display,
                                width: this.element[0].style.width,
                                minHeight: this.element[0].style.minHeight,
                                maxHeight: this.element[0].style.maxHeight,
                                height: this.element[0].style.height
                            }, this.originalPosition = {
                                parent: this.element.parent(),
                                index: this.element.parent().children().index(this.element)
                            }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1
                        },
                        _init: function() {
                            this.options.autoOpen && this.open()
                        },
                        _appendTo: function() {
                            var t = this.options.appendTo;
                            return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0)
                        },
                        _destroy: function() {
                            var e, t = this.originalPosition;
                            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), e = t.parent.children().eq(t.index), e.length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element)
                        },
                        widget: function() {
                            return this.uiDialog
                        },
                        disable: e.noop,
                        enable: e.noop,
                        close: function(t) {
                            var n, r = this;
                            if (!this._isOpen || this._trigger("beforeClose", t) === !1) return;
                            this._isOpen = !1, this._destroyOverlay();
                            if (!this.opener.filter(":focusable").focus().length) try {
                                n = this.document[0].activeElement, n && n.nodeName.toLowerCase() !== "body" && e(n).blur()
                            } catch (i) {}
                            this._hide(this.uiDialog, this.options.hide, function() {
                                r._trigger("close", t)
                            })
                        },
                        isOpen: function() {
                            return this._isOpen
                        },
                        moveToTop: function() {
                            this._moveToTop()
                        },
                        _moveToTop: function(e, t) {
                            var n = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
                            return n && !t && this._trigger("focus", e), n
                        },
                        open: function() {
                            var t = this;
                            if (this._isOpen) {
                                this._moveToTop() && this._focusTabbable();
                                return
                            }
                            this._isOpen = !0, this.opener = e(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function() {
                                t._focusTabbable(), t._trigger("focus")
                            }), this._trigger("open")
                        },
                        _focusTabbable: function() {
                            var e = this.element.find("[autofocus]");
                            e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), e.eq(0).focus()
                        },
                        _keepFocus: function(t) {
                            function n() {
                                var t = this.document[0].activeElement,
                                    n = this.uiDialog[0] === t || e.contains(this.uiDialog[0], t);
                                n || this._focusTabbable()
                            }
                            t.preventDefault(), n.call(this), this._delay(n)
                        },
                        _createWrapper: function() {
                            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                                tabIndex: -1,
                                role: "dialog"
                            }).appendTo(this._appendTo()), this._on(this.uiDialog, {
                                keydown: function(t) {
                                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) {
                                        t.preventDefault(), this.close(t);
                                        return
                                    }
                                    if (t.keyCode !== e.ui.keyCode.TAB) return;
                                    var n = this.uiDialog.find(":tabbable"),
                                        r = n.filter(":first"),
                                        i = n.filter(":last");
                                    t.target !== i[0] && t.target !== this.uiDialog[0] || !!t.shiftKey ? (t.target === r[0] || t.target === this.uiDialog[0]) && t.shiftKey && (i.focus(1), t.preventDefault()) : (r.focus(1), t.preventDefault())
                                },
                                mousedown: function(e) {
                                    this._moveToTop(e) && this._focusTabbable()
                                }
                            }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                                "aria-describedby": this.element.uniqueId().attr("id")
                            })
                        },
                        _createTitlebar: function() {
                            var t;
                            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, {
                                mousedown: function(t) {
                                    e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
                                }
                            }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                                label: this.options.closeText,
                                icons: {
                                    primary: "ui-icon-closethick"
                                },
                                text: !1
                            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {
                                click: function(e) {
                                    e.preventDefault(), this.close(e)
                                }
                            }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(t), this.uiDialog.attr({
                                "aria-labelledby": t.attr("id")
                            })
                        },
                        _title: function(e) {
                            this.options.title || e.html("&#160;"), e.text(this.options.title)
                        },
                        _createButtonPane: function() {
                            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons()
                        },
                        _createButtons: function() {
                            var t = this,
                                n = this.options.buttons;
                            this.uiDialogButtonPane.remove(), this.uiButtonSet.empty();
                            if (e.isEmptyObject(n) || e.isArray(n) && !n.length) {
                                this.uiDialog.removeClass("ui-dialog-buttons");
                                return
                            }
                            e.each(n, function(n, r) {
                                var i, s;
                                r = e.isFunction(r) ? {
                                    click: r,
                                    text: n
                                } : r, r = e.extend({
                                    type: "button"
                                }, r), i = r.click, r.click = function() {
                                    i.apply(t.element[0], arguments)
                                }, s = {
                                    icons: r.icons,
                                    text: r.showText
                                }, delete r.icons, delete r.showText, e("<button></button>", r).button(s).appendTo(t.uiButtonSet)
                            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog)
                        },
                        _makeDraggable: function() {
                            function r(e) {
                                return {
                                    position: e.position,
                                    offset: e.offset
                                }
                            }
                            var t = this,
                                n = this.options;
                            this.uiDialog.draggable({
                                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                                handle: ".ui-dialog-titlebar",
                                containment: "document",
                                start: function(n, i) {
                                    e(this).addClass("ui-dialog-dragging"), t._blockFrames(), t._trigger("dragStart", n, r(i))
                                },
                                drag: function(e, n) {
                                    t._trigger("drag", e, r(n))
                                },
                                stop: function(i, s) {
                                    n.position = [s.position.left - t.document.scrollLeft(), s.position.top - t.document.scrollTop()], e(this).removeClass("ui-dialog-dragging"), t._unblockFrames(), t._trigger("dragStop", i, r(s))
                                }
                            })
                        },
                        _makeResizable: function() {
                            function o(e) {
                                return {
                                    originalPosition: e.originalPosition,
                                    originalSize: e.originalSize,
                                    position: e.position,
                                    size: e.size
                                }
                            }
                            var t = this,
                                n = this.options,
                                r = n.resizable,
                                i = this.uiDialog.css("position"),
                                s = typeof r == "string" ? r : "n,e,s,w,se,sw,ne,nw";
                            this.uiDialog.resizable({
                                cancel: ".ui-dialog-content",
                                containment: "document",
                                alsoResize: this.element,
                                maxWidth: n.maxWidth,
                                maxHeight: n.maxHeight,
                                minWidth: n.minWidth,
                                minHeight: this._minHeight(),
                                handles: s,
                                start: function(n, r) {
                                    e(this).addClass("ui-dialog-resizing"), t._blockFrames(), t._trigger("resizeStart", n, o(r))
                                },
                                resize: function(e, n) {
                                    t._trigger("resize", e, o(n))
                                },
                                stop: function(r, i) {
                                    n.height = e(this).height(), n.width = e(this).width(), e(this).removeClass("ui-dialog-resizing"), t._unblockFrames(), t._trigger("resizeStop", r, o(i))
                                }
                            }).css("position", i)
                        },
                        _minHeight: function() {
                            var e = this.options;
                            return e.height === "auto" ? e.minHeight : Math.min(e.minHeight, e.height)
                        },
                        _position: function() {
                            var e = this.uiDialog.is(":visible");
                            e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide()
                        },
                        _setOptions: function(t) {
                            var i = this,
                                s = !1,
                                o = {};
                            e.each(t, function(e, t) {
                                i._setOption(e, t), e in n && (s = !0), e in r && (o[e] = t)
                            }), s && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", o)
                        },
                        _setOption: function(e, t) {
                            var n, r, i = this.uiDialog;
                            e === "dialogClass" && i.removeClass(this.options.dialogClass).addClass(t);
                            if (e === "disabled") return;
                            this._super(e, t), e === "appendTo" && this.uiDialog.appendTo(this._appendTo()), e === "buttons" && this._createButtons(), e === "closeText" && this.uiDialogTitlebarClose.button({
                                label: "" + t
                            }), e === "draggable" && (n = i.is(":data(ui-draggable)"), n && !t && i.draggable("destroy"), !n && t && this._makeDraggable()), e === "position" && this._position(), e === "resizable" && (r = i.is(":data(ui-resizable)"), r && !t && i.resizable("destroy"), r && typeof t == "string" && i.resizable("option", "handles", t), !r && t !== !1 && this._makeResizable()), e === "title" && this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))
                        },
                        _size: function() {
                            var e, t, n, r = this.options;
                            this.element.show().css({
                                width: "auto",
                                minHeight: 0,
                                maxHeight: "none",
                                height: 0
                            }), r.minWidth > r.width && (r.width = r.minWidth), e = this.uiDialog.css({
                                height: "auto",
                                width: r.width
                            }).outerHeight(), t = Math.max(0, r.minHeight - e), n = typeof r.maxHeight == "number" ? Math.max(0, r.maxHeight - e) : "none", r.height === "auto" ? this.element.css({
                                minHeight: t,
                                maxHeight: n,
                                height: "auto"
                            }) : this.element.height(Math.max(0, r.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
                        },
                        _blockFrames: function() {
                            this.iframeBlocks = this.document.find("iframe").map(function() {
                                var t = e(this);
                                return e("<div>").css({
                                    position: "absolute",
                                    width: t.outerWidth(),
                                    height: t.outerHeight()
                                }).appendTo(t.parent()).offset(t.offset())[0]
                            })
                        },
                        _unblockFrames: function() {
                            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
                        },
                        _allowInteraction: function(t) {
                            return e(t.target).closest(".ui-dialog").length ? !0 : !!e(t.target).closest(".ui-datepicker").length
                        },
                        _createOverlay: function() {
                            if (!this.options.modal) return;
                            var t = this,
                                n = this.widgetFullName;
                            e.ui.dialog.overlayInstances || this._delay(function() {
                                e.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function(r) {
                                    t._allowInteraction(r) || (r.preventDefault(), e(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())
                                })
                            }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, {
                                mousedown: "_keepFocus"
                            }), e.ui.dialog.overlayInstances++
                        },
                        _destroyOverlay: function() {
                            if (!this.options.modal) return;
                            this.overlay && (e.ui.dialog.overlayInstances--, e.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), this.overlay.remove(), this.overlay = null)
                        }
                    }), e.ui.dialog.overlayInstances = 0, e.uiBackCompat !== !1 && e.widget("ui.dialog", e.ui.dialog, {
                        _position: function() {
                            var t = this.options.position,
                                n = [],
                                r = [0, 0],
                                i;
                            if (t) {
                                if (typeof t == "string" || typeof t == "object" && "0" in t) n = t.split ? t.split(" ") : [t[0], t[1]], n.length === 1 && (n[1] = n[0]), e.each(["left", "top"], function(e, t) {
                                    +n[e] === n[e] && (r[e] = n[e], n[e] = t)
                                }), t = {
                                    my: n[0] + (r[0] < 0 ? r[0] : "+" + r[0]) + " " + n[1] + (r[1] < 0 ? r[1] : "+" + r[1]),
                                    at: n.join(" ")
                                };
                                t = e.extend({}, e.ui.dialog.prototype.options.position, t)
                            } else t = e.ui.dialog.prototype.options.position;
                            i = this.uiDialog.is(":visible"), i || this.uiDialog.show(), this.uiDialog.position(t), i || this.uiDialog.hide()
                        }
                    })
                }(jQuery),
                function(e, t) {
                    e.widget("ui.draggable", e.ui.mouse, {
                        version: "1.10.4",
                        widgetEventPrefix: "drag",
                        options: {
                            addClasses: !0,
                            appendTo: "parent",
                            axis: !1,
                            connectToSortable: !1,
                            containment: !1,
                            cursor: "auto",
                            cursorAt: !1,
                            grid: !1,
                            handle: !1,
                            helper: "original",
                            iframeFix: !1,
                            opacity: !1,
                            refreshPositions: !1,
                            revert: !1,
                            revertDuration: 500,
                            scope: "default",
                            scroll: !0,
                            scrollSensitivity: 20,
                            scrollSpeed: 20,
                            snap: !1,
                            snapMode: "both",
                            snapTolerance: 20,
                            stack: !1,
                            zIndex: !1,
                            drag: null,
                            start: null,
                            stop: null
                        },
                        _create: function() {
                            this.options.helper === "original" && !/^(?:r|a|f)/.test(this.element.css("position")) && (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
                        },
                        _mouseCapture: function(t) {
                            var n = this.options;
                            return this.helper || n.disabled || e(t.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(t), this.handle ? (e(n.iframeFix === !0 ? "iframe" : n.iframeFix).each(function() {
                                e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                                    width: this.offsetWidth + "px",
                                    height: this.offsetHeight + "px",
                                    position: "absolute",
                                    opacity: "0.001",
                                    zIndex: 1e3
                                }).css(e(this).offset()).appendTo("body")
                            }), !0) : !1)
                        },
                        _mouseStart: function(t) {
                            var n = this.options;
                            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), this.offset = this.positionAbs = this.element.offset(), this.offset = {
                                top: this.offset.top - this.margins.top,
                                left: this.offset.left - this.margins.left
                            }, this.offset.scroll = !1, e.extend(this.offset, {
                                click: {
                                    left: t.pageX - this.offset.left,
                                    top: t.pageY - this.offset.top
                                },
                                parent: this._getParentOffset(),
                                relative: this._getRelativeOffset()
                            }), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, n.cursorAt && this._adjustOffsetFromHelper(n.cursorAt), this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
                        },
                        _mouseDrag: function(t, n) {
                            this.offsetParentCssPosition === "fixed" && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute");
                            if (!n) {
                                var r = this._uiHash();
                                if (this._trigger("drag", t, r) === !1) return this._mouseUp({}), !1;
                                this.position = r.position
                            }
                            if (!this.options.axis || this.options.axis !== "y") this.helper[0].style.left = this.position.left + "px";
                            if (!this.options.axis || this.options.axis !== "x") this.helper[0].style.top = this.position.top + "px";
                            return e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
                        },
                        _mouseStop: function(t) {
                            var n = this,
                                r = !1;
                            return e.ui.ddmanager && !this.options.dropBehaviour && (r = e.ui.ddmanager.drop(this, t)), this.dropped && (r = this.dropped, this.dropped = !1), this.options.helper === "original" && !e.contains(this.element[0].ownerDocument, this.element[0]) ? !1 : (this.options.revert === "invalid" && !r || this.options.revert === "valid" && r || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, r) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                                n._trigger("stop", t) !== !1 && n._clear()
                            }) : this._trigger("stop", t) !== !1 && this._clear(), !1)
                        },
                        _mouseUp: function(t) {
                            return e("div.ui-draggable-iframeFix").each(function() {
                                this.parentNode.removeChild(this)
                            }), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t)
                        },
                        cancel: function() {
                            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
                        },
                        _getHandle: function(t) {
                            return this.options.handle ? !!e(t.target).closest(this.element.find(this.options.handle)).length : !0
                        },
                        _createHelper: function(t) {
                            var n = this.options,
                                r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t])) : n.helper === "clone" ? this.element.clone().removeAttr("id") : this.element;
                            return r.parents("body").length || r.appendTo(n.appendTo === "parent" ? this.element[0].parentNode : n.appendTo), r[0] !== this.element[0] && !/(fixed|absolute)/.test(r.css("position")) && r.css("position", "absolute"), r
                        },
                        _adjustOffsetFromHelper: function(t) {
                            typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {
                                left: +t[0],
                                top: +t[1] || 0
                            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
                        },
                        _getParentOffset: function() {
                            var t = this.offsetParent.offset();
                            this.cssPosition === "absolute" && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
                            if (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && e.ui.ie) t = {
                                top: 0,
                                left: 0
                            };
                            return {
                                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                            }
                        },
                        _getRelativeOffset: function() {
                            if (this.cssPosition === "relative") {
                                var e = this.element.position();
                                return {
                                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                                }
                            }
                            return {
                                top: 0,
                                left: 0
                            }
                        },
                        _cacheMargins: function() {
                            this.margins = {
                                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                                top: parseInt(this.element.css("marginTop"), 10) || 0,
                                right: parseInt(this.element.css("marginRight"), 10) || 0,
                                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
                            }
                        },
                        _cacheHelperProportions: function() {
                            this.helperProportions = {
                                width: this.helper.outerWidth(),
                                height: this.helper.outerHeight()
                            }
                        },
                        _setContainment: function() {
                            var t, n, r, i = this.options;
                            if (!i.containment) {
                                this.containment = null;
                                return
                            }
                            if (i.containment === "window") {
                                this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                                return
                            }
                            if (i.containment === "document") {
                                this.containment = [0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                                return
                            }
                            if (i.containment.constructor === Array) {
                                this.containment = i.containment;
                                return
                            }
                            i.containment === "parent" && (i.containment = this.helper[0].parentNode), n = e(i.containment), r = n[0];
                            if (!r) return;
                            t = n.css("overflow") !== "hidden", this.containment = [(parseInt(n.css("borderLeftWidth"), 10) || 0) + (parseInt(n.css("paddingLeft"), 10) || 0), (parseInt(n.css("borderTopWidth"), 10) || 0) + (parseInt(n.css("paddingTop"), 10) || 0), (t ? Math.max(r.scrollWidth, r.offsetWidth) : r.offsetWidth) - (parseInt(n.css("borderRightWidth"), 10) || 0) - (parseInt(n.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(r.scrollHeight, r.offsetHeight) : r.offsetHeight) - (parseInt(n.css("borderBottomWidth"), 10) || 0) - (parseInt(n.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = n
                        },
                        _convertPositionTo: function(t, n) {
                            n || (n = this.position);
                            var r = t === "absolute" ? 1 : -1,
                                i = this.cssPosition !== "absolute" || this.scrollParent[0] !== document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
                            return this.offset.scroll || (this.offset.scroll = {
                                top: i.scrollTop(),
                                left: i.scrollLeft()
                            }), {
                                top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * r,
                                left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * r
                            }
                        },
                        _generatePosition: function(t) {
                            var n, r, i, s, o = this.options,
                                u = this.cssPosition !== "absolute" || this.scrollParent[0] !== document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                                a = t.pageX,
                                f = t.pageY;
                            return this.offset.scroll || (this.offset.scroll = {
                                top: u.scrollTop(),
                                left: u.scrollLeft()
                            }), this.originalPosition && (this.containment && (this.relative_container ? (r = this.relative_container.offset(), n = [this.containment[0] + r.left, this.containment[1] + r.top, this.containment[2] + r.left, this.containment[3] + r.top]) : n = this.containment, t.pageX - this.offset.click.left < n[0] && (a = n[0] + this.offset.click.left), t.pageY - this.offset.click.top < n[1] && (f = n[1] + this.offset.click.top), t.pageX - this.offset.click.left > n[2] && (a = n[2] + this.offset.click.left), t.pageY - this.offset.click.top > n[3] && (f = n[3] + this.offset.click.top)), o.grid && (i = o.grid[1] ? this.originalPageY + Math.round((f - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, f = n ? i - this.offset.click.top >= n[1] || i - this.offset.click.top > n[3] ? i : i - this.offset.click.top >= n[1] ? i - o.grid[1] : i + o.grid[1] : i, s = o.grid[0] ? this.originalPageX + Math.round((a - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, a = n ? s - this.offset.click.left >= n[0] || s - this.offset.click.left > n[2] ? s : s - this.offset.click.left >= n[0] ? s - o.grid[0] : s + o.grid[0] : s)), {
                                top: f - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
                            }
                        },
                        _clear: function() {
                            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] !== this.element[0] && !this.cancelHelperRemoval && this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
                        },
                        _trigger: function(t, n, r) {
                            return r = r || this._uiHash(), e.ui.plugin.call(this, t, [n, r]), t === "drag" && (this.positionAbs = this._convertPositionTo("absolute")), e.Widget.prototype._trigger.call(this, t, n, r)
                        },
                        plugins: {},
                        _uiHash: function() {
                            return {
                                helper: this.helper,
                                position: this.position,
                                originalPosition: this.originalPosition,
                                offset: this.positionAbs
                            }
                        }
                    }), e.ui.plugin.add("draggable", "connectToSortable", {
                        start: function(t, n) {
                            var r = e(this).data("ui-draggable"),
                                i = r.options,
                                s = e.extend({}, n, {
                                    item: r.element
                                });
                            r.sortables = [], e(i.connectToSortable).each(function() {
                                var n = e.data(this, "ui-sortable");
                                n && !n.options.disabled && (r.sortables.push({
                                    instance: n,
                                    shouldRevert: n.options.revert
                                }), n.refreshPositions(), n._trigger("activate", t, s))
                            })
                        },
                        stop: function(t, n) {
                            var r = e(this).data("ui-draggable"),
                                i = e.extend({}, n, {
                                    item: r.element
                                });
                            e.each(r.sortables, function() {
                                this.instance.isOver ? (this.instance.isOver = 0, r.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(t), this.instance.options.helper = this.instance.options._helper, r.options.helper === "original" && this.instance.currentItem.css({
                                    top: "auto",
                                    left: "auto"
                                })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, i))
                            })
                        },
                        drag: function(t, n) {
                            var r = e(this).data("ui-draggable"),
                                i = this;
                            e.each(r.sortables, function() {
                                var s = !1,
                                    o = this;
                                this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (s = !0, e.each(r.sortables, function() {
                                    return this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this !== o && this.instance._intersectsWith(this.instance.containerCache) && e.contains(o.instance.element[0], this.instance.element[0]) && (s = !1), s
                                })), s ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                                    return n.helper[0]
                                }, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = r.offset.click.top, this.instance.offset.click.left = r.offset.click.left, this.instance.offset.parent.left -= r.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= r.offset.parent.top - this.instance.offset.parent.top, r._trigger("toSortable", t), r.dropped = this.instance.element, r.currentItem = r.element, this.instance.fromOutside = r), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), r._trigger("fromSortable", t), r.dropped = !1)
                            })
                        }
                    }), e.ui.plugin.add("draggable", "cursor", {
                        start: function() {
                            var t = e("body"),
                                n = e(this).data("ui-draggable").options;
                            t.css("cursor") && (n._cursor = t.css("cursor")), t.css("cursor", n.cursor)
                        },
                        stop: function() {
                            var t = e(this).data("ui-draggable").options;
                            t._cursor && e("body").css("cursor", t._cursor)
                        }
                    }), e.ui.plugin.add("draggable", "opacity", {
                        start: function(t, n) {
                            var r = e(n.helper),
                                i = e(this).data("ui-draggable").options;
                            r.css("opacity") && (i._opacity = r.css("opacity")), r.css("opacity", i.opacity)
                        },
                        stop: function(t, n) {
                            var r = e(this).data("ui-draggable").options;
                            r._opacity && e(n.helper).css("opacity", r._opacity)
                        }
                    }), e.ui.plugin.add("draggable", "scroll", {
                        start: function() {
                            var t = e(this).data("ui-draggable");
                            t.scrollParent[0] !== document && t.scrollParent[0].tagName !== "HTML" && (t.overflowOffset = t.scrollParent.offset())
                        },
                        drag: function(t) {
                            var n = e(this).data("ui-draggable"),
                                r = n.options,
                                i = !1;
                            if (n.scrollParent[0] !== document && n.scrollParent[0].tagName !== "HTML") {
                                if (!r.axis || r.axis !== "x") n.overflowOffset.top + n.scrollParent[0].offsetHeight - t.pageY < r.scrollSensitivity ? n.scrollParent[0].scrollTop = i = n.scrollParent[0].scrollTop + r.scrollSpeed : t.pageY - n.overflowOffset.top < r.scrollSensitivity && (n.scrollParent[0].scrollTop = i = n.scrollParent[0].scrollTop - r.scrollSpeed);
                                if (!r.axis || r.axis !== "y") n.overflowOffset.left + n.scrollParent[0].offsetWidth - t.pageX < r.scrollSensitivity ? n.scrollParent[0].scrollLeft = i = n.scrollParent[0].scrollLeft + r.scrollSpeed : t.pageX - n.overflowOffset.left < r.scrollSensitivity && (n.scrollParent[0].scrollLeft = i = n.scrollParent[0].scrollLeft - r.scrollSpeed)
                            } else {
                                if (!r.axis || r.axis !== "x") t.pageY - e(document).scrollTop() < r.scrollSensitivity ? i = e(document).scrollTop(e(document).scrollTop() - r.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < r.scrollSensitivity && (i = e(document).scrollTop(e(document).scrollTop() + r.scrollSpeed));
                                if (!r.axis || r.axis !== "y") t.pageX - e(document).scrollLeft() < r.scrollSensitivity ? i = e(document).scrollLeft(e(document).scrollLeft() - r.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < r.scrollSensitivity && (i = e(document).scrollLeft(e(document).scrollLeft() + r.scrollSpeed))
                            }
                            i !== !1 && e.ui.ddmanager && !r.dropBehaviour && e.ui.ddmanager.prepareOffsets(n, t)
                        }
                    }), e.ui.plugin.add("draggable", "snap", {
                        start: function() {
                            var t = e(this).data("ui-draggable"),
                                n = t.options;
                            t.snapElements = [], e(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function() {
                                var n = e(this),
                                    r = n.offset();
                                this !== t.element[0] && t.snapElements.push({
                                    item: this,
                                    width: n.outerWidth(),
                                    height: n.outerHeight(),
                                    top: r.top,
                                    left: r.left
                                })
                            })
                        },
                        drag: function(t, n) {
                            var r, i, s, o, u, a, f, l, c, h, p = e(this).data("ui-draggable"),
                                d = p.options,
                                v = d.snapTolerance,
                                m = n.offset.left,
                                g = m + p.helperProportions.width,
                                y = n.offset.top,
                                b = y + p.helperProportions.height;
                            for (c = p.snapElements.length - 1; c >= 0; c--) {
                                u = p.snapElements[c].left, a = u + p.snapElements[c].width, f = p.snapElements[c].top, l = f + p.snapElements[c].height;
                                if (g < u - v || m > a + v || b < f - v || y > l + v || !e.contains(p.snapElements[c].item.ownerDocument, p.snapElements[c].item)) {
                                    p.snapElements[c].snapping && p.options.snap.release && p.options.snap.release.call(p.element, t, e.extend(p._uiHash(), {
                                        snapItem: p.snapElements[c].item
                                    })), p.snapElements[c].snapping = !1;
                                    continue
                                }
                                d.snapMode !== "inner" && (r = Math.abs(f - b) <= v, i = Math.abs(l - y) <= v, s = Math.abs(u - g) <= v, o = Math.abs(a - m) <= v, r && (n.position.top = p._convertPositionTo("relative", {
                                    top: f - p.helperProportions.height,
                                    left: 0
                                }).top - p.margins.top), i && (n.position.top = p._convertPositionTo("relative", {
                                    top: l,
                                    left: 0
                                }).top - p.margins.top), s && (n.position.left = p._convertPositionTo("relative", {
                                    top: 0,
                                    left: u - p.helperProportions.width
                                }).left - p.margins.left), o && (n.position.left = p._convertPositionTo("relative", {
                                    top: 0,
                                    left: a
                                }).left - p.margins.left)), h = r || i || s || o, d.snapMode !== "outer" && (r = Math.abs(f - y) <= v, i = Math.abs(l - b) <= v, s = Math.abs(u - m) <= v, o = Math.abs(a - g) <= v, r && (n.position.top = p._convertPositionTo("relative", {
                                    top: f,
                                    left: 0
                                }).top - p.margins.top), i && (n.position.top = p._convertPositionTo("relative", {
                                    top: l - p.helperProportions.height,
                                    left: 0
                                }).top - p.margins.top), s && (n.position.left = p._convertPositionTo("relative", {
                                    top: 0,
                                    left: u
                                }).left - p.margins.left), o && (n.position.left = p._convertPositionTo("relative", {
                                    top: 0,
                                    left: a - p.helperProportions.width
                                }).left - p.margins.left)), !p.snapElements[c].snapping && (r || i || s || o || h) && p.options.snap.snap && p.options.snap.snap.call(p.element, t, e.extend(p._uiHash(), {
                                    snapItem: p.snapElements[c].item
                                })), p.snapElements[c].snapping = r || i || s || o || h
                            }
                        }
                    }), e.ui.plugin.add("draggable", "stack", {
                        start: function() {
                            var t, n = this.data("ui-draggable").options,
                                r = e.makeArray(e(n.stack)).sort(function(t, n) {
                                    return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(n).css("zIndex"), 10) || 0)
                                });
                            if (!r.length) return;
                            t = parseInt(e(r[0]).css("zIndex"), 10) || 0, e(r).each(function(n) {
                                e(this).css("zIndex", t + n)
                            }), this.css("zIndex", t + r.length)
                        }
                    }), e.ui.plugin.add("draggable", "zIndex", {
                        start: function(t, n) {
                            var r = e(n.helper),
                                i = e(this).data("ui-draggable").options;
                            r.css("zIndex") && (i._zIndex = r.css("zIndex")), r.css("zIndex", i.zIndex)
                        },
                        stop: function(t, n) {
                            var r = e(this).data("ui-draggable").options;
                            r._zIndex && e(n.helper).css("zIndex", r._zIndex)
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function n(e, t, n) {
                        return e > t && e < t + n
                    }
                    e.widget("ui.droppable", {
                        version: "1.10.4",
                        widgetEventPrefix: "drop",
                        options: {
                            accept: "*",
                            activeClass: !1,
                            addClasses: !0,
                            greedy: !1,
                            hoverClass: !1,
                            scope: "default",
                            tolerance: "intersect",
                            activate: null,
                            deactivate: null,
                            drop: null,
                            out: null,
                            over: null
                        },
                        _create: function() {
                            var t, n = this.options,
                                r = n.accept;
                            this.isover = !1, this.isout = !0, this.accept = e.isFunction(r) ? r : function(e) {
                                return e.is(r)
                            }, this.proportions = function() {
                                if (!arguments.length) return t ? t : t = {
                                    width: this.element[0].offsetWidth,
                                    height: this.element[0].offsetHeight
                                };
                                t = arguments[0]
                            }, e.ui.ddmanager.droppables[n.scope] = e.ui.ddmanager.droppables[n.scope] || [], e.ui.ddmanager.droppables[n.scope].push(this), n.addClasses && this.element.addClass("ui-droppable")
                        },
                        _destroy: function() {
                            var t = 0,
                                n = e.ui.ddmanager.droppables[this.options.scope];
                            for (; t < n.length; t++) n[t] === this && n.splice(t, 1);
                            this.element.removeClass("ui-droppable ui-droppable-disabled")
                        },
                        _setOption: function(t, n) {
                            t === "accept" && (this.accept = e.isFunction(n) ? n : function(e) {
                                return e.is(n)
                            }), e.Widget.prototype._setOption.apply(this, arguments)
                        },
                        _activate: function(t) {
                            var n = e.ui.ddmanager.current;
                            this.options.activeClass && this.element.addClass(this.options.activeClass), n && this._trigger("activate", t, this.ui(n))
                        },
                        _deactivate: function(t) {
                            var n = e.ui.ddmanager.current;
                            this.options.activeClass && this.element.removeClass(this.options.activeClass), n && this._trigger("deactivate", t, this.ui(n))
                        },
                        _over: function(t) {
                            var n = e.ui.ddmanager.current;
                            if (!n || (n.currentItem || n.element)[0] === this.element[0]) return;
                            this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(n)))
                        },
                        _out: function(t) {
                            var n = e.ui.ddmanager.current;
                            if (!n || (n.currentItem || n.element)[0] === this.element[0]) return;
                            this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(n)))
                        },
                        _drop: function(t, n) {
                            var r = n || e.ui.ddmanager.current,
                                i = !1;
                            return !r || (r.currentItem || r.element)[0] === this.element[0] ? !1 : (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                                var t = e.data(this, "ui-droppable");
                                if (t.options.greedy && !t.options.disabled && t.options.scope === r.options.scope && t.accept.call(t.element[0], r.currentItem || r.element) && e.ui.intersect(r, e.extend(t, {
                                        offset: t.element.offset()
                                    }), t.options.tolerance)) return i = !0, !1
                            }), i ? !1 : this.accept.call(this.element[0], r.currentItem || r.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(r)), this.element) : !1)
                        },
                        ui: function(e) {
                            return {
                                draggable: e.currentItem || e.element,
                                helper: e.helper,
                                position: e.position,
                                offset: e.positionAbs
                            }
                        }
                    }), e.ui.intersect = function(e, t, r) {
                        if (!t.offset) return !1;
                        var i, s, o = (e.positionAbs || e.position.absolute).left,
                            u = (e.positionAbs || e.position.absolute).top,
                            a = o + e.helperProportions.width,
                            f = u + e.helperProportions.height,
                            l = t.offset.left,
                            c = t.offset.top,
                            h = l + t.proportions().width,
                            p = c + t.proportions().height;
                        switch (r) {
                            case "fit":
                                return l <= o && a <= h && c <= u && f <= p;
                            case "intersect":
                                return l < o + e.helperProportions.width / 2 && a - e.helperProportions.width / 2 < h && c < u + e.helperProportions.height / 2 && f - e.helperProportions.height / 2 < p;
                            case "pointer":
                                return i = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left, s = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top, n(s, c, t.proportions().height) && n(i, l, t.proportions().width);
                            case "touch":
                                return (u >= c && u <= p || f >= c && f <= p || u < c && f > p) && (o >= l && o <= h || a >= l && a <= h || o < l && a > h);
                            default:
                                return !1
                        }
                    }, e.ui.ddmanager = {
                        current: null,
                        droppables: {
                            "default": []
                        },
                        prepareOffsets: function(t, n) {
                            var r, i, s = e.ui.ddmanager.droppables[t.options.scope] || [],
                                o = n ? n.type : null,
                                u = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
                            e: for (r = 0; r < s.length; r++) {
                                if (s[r].options.disabled || t && !s[r].accept.call(s[r].element[0], t.currentItem || t.element)) continue;
                                for (i = 0; i < u.length; i++)
                                    if (u[i] === s[r].element[0]) {
                                        s[r].proportions().height = 0;
                                        continue e
                                    }
                                s[r].visible = s[r].element.css("display") !== "none";
                                if (!s[r].visible) continue;
                                o === "mousedown" && s[r]._activate.call(s[r], n), s[r].offset = s[r].element.offset(), s[r].proportions({
                                    width: s[r].element[0].offsetWidth,
                                    height: s[r].element[0].offsetHeight
                                })
                            }
                        },
                        drop: function(t, n) {
                            var r = !1;
                            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                                if (!this.options) return;
                                !this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance) && (r = this._drop.call(this, n) || r), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, n))
                            }), r
                        },
                        dragStart: function(t, n) {
                            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n)
                            })
                        },
                        drag: function(t, n) {
                            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, n), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function() {
                                if (this.options.disabled || this.greedyChild || !this.visible) return;
                                var r, i, s, o = e.ui.intersect(t, this, this.options.tolerance),
                                    u = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                                if (!u) return;
                                this.options.greedy && (i = this.options.scope, s = this.element.parents(":data(ui-droppable)").filter(function() {
                                    return e.data(this, "ui-droppable").options.scope === i
                                }), s.length && (r = e.data(s[0], "ui-droppable"), r.greedyChild = u === "isover")), r && u === "isover" && (r.isover = !1, r.isout = !0, r._out.call(r, n)), this[u] = !0, this[u === "isout" ? "isover" : "isout"] = !1, this[u === "isover" ? "_over" : "_out"].call(this, n), r && u === "isout" && (r.isout = !1, r.isover = !0, r._over.call(r, n))
                            })
                        },
                        dragStop: function(t, n) {
                            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n)
                        }
                    }
                }(jQuery),
                function(e, t) {
                    var n = "ui-effects-";
                    e.effects = {
                            effect: {}
                        },
                        function(e, t) {
                            function h(e, t, n) {
                                var r = u[t.type] || {};
                                return e == null ? n || !t.def ? null : t.def : (e = r.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : r.mod ? (e + r.mod) % r.mod : 0 > e ? 0 : r.max < e ? r.max : e)
                            }

                            function p(t) {
                                var n = s(),
                                    r = n._rgba = [];
                                return t = t.toLowerCase(), c(i, function(e, i) {
                                    var s, u = i.re.exec(t),
                                        a = u && i.parse(u),
                                        f = i.space || "rgba";
                                    if (a) return s = n[f](a), n[o[f].cache] = s[o[f].cache], r = n._rgba = s._rgba, !1
                                }), r.length ? (r.join() === "0,0,0,0" && e.extend(r, l.transparent), n) : l[t]
                            }

                            function d(e, t, n) {
                                return n = (n + 1) % 1, n * 6 < 1 ? e + (t - e) * n * 6 : n * 2 < 1 ? t : n * 3 < 2 ? e + (t - e) * (2 / 3 - n) * 6 : e
                            }
                            var n = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",
                                r = /^([\-+])=\s*(\d+\.?\d*)/,
                                i = [{
                                    re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                                    parse: function(e) {
                                        return [e[1], e[2], e[3], e[4]]
                                    }
                                }, {
                                    re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                                    parse: function(e) {
                                        return [e[1] * 2.55, e[2] * 2.55, e[3] * 2.55, e[4]]
                                    }
                                }, {
                                    re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
                                    parse: function(e) {
                                        return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                                    }
                                }, {
                                    re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
                                    parse: function(e) {
                                        return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                                    }
                                }, {
                                    re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                                    space: "hsla",
                                    parse: function(e) {
                                        return [e[1], e[2] / 100, e[3] / 100, e[4]]
                                    }
                                }],
                                s = e.Color = function(t, n, r, i) {
                                    return new e.Color.fn.parse(t, n, r, i)
                                },
                                o = {
                                    rgba: {
                                        props: {
                                            red: {
                                                idx: 0,
                                                type: "byte"
                                            },
                                            green: {
                                                idx: 1,
                                                type: "byte"
                                            },
                                            blue: {
                                                idx: 2,
                                                type: "byte"
                                            }
                                        }
                                    },
                                    hsla: {
                                        props: {
                                            hue: {
                                                idx: 0,
                                                type: "degrees"
                                            },
                                            saturation: {
                                                idx: 1,
                                                type: "percent"
                                            },
                                            lightness: {
                                                idx: 2,
                                                type: "percent"
                                            }
                                        }
                                    }
                                },
                                u = {
                                    "byte": {
                                        floor: !0,
                                        max: 255
                                    },
                                    percent: {
                                        max: 1
                                    },
                                    degrees: {
                                        mod: 360,
                                        floor: !0
                                    }
                                },
                                a = s.support = {},
                                f = e("<p>")[0],
                                l, c = e.each;
                            f.style.cssText = "background-color:rgba(1,1,1,.5)", a.rgba = f.style.backgroundColor.indexOf("rgba") > -1, c(o, function(e, t) {
                                t.cache = "_" + e, t.props.alpha = {
                                    idx: 3,
                                    type: "percent",
                                    def: 1
                                }
                            }), s.fn = e.extend(s.prototype, {
                                parse: function(n, r, i, u) {
                                    if (n === t) return this._rgba = [null, null, null, null], this;
                                    if (n.jquery || n.nodeType) n = e(n).css(r), r = t;
                                    var a = this,
                                        f = e.type(n),
                                        d = this._rgba = [];
                                    r !== t && (n = [n, r, i, u], f = "array");
                                    if (f === "string") return this.parse(p(n) || l._default);
                                    if (f === "array") return c(o.rgba.props, function(e, t) {
                                        d[t.idx] = h(n[t.idx], t)
                                    }), this;
                                    if (f === "object") return n instanceof s ? c(o, function(e, t) {
                                        n[t.cache] && (a[t.cache] = n[t.cache].slice())
                                    }) : c(o, function(t, r) {
                                        var i = r.cache;
                                        c(r.props, function(e, t) {
                                            if (!a[i] && r.to) {
                                                if (e === "alpha" || n[e] == null) return;
                                                a[i] = r.to(a._rgba)
                                            }
                                            a[i][t.idx] = h(n[e], t, !0)
                                        }), a[i] && e.inArray(null, a[i].slice(0, 3)) < 0 && (a[i][3] = 1, r.from && (a._rgba = r.from(a[i])))
                                    }), this
                                },
                                is: function(e) {
                                    var t = s(e),
                                        n = !0,
                                        r = this;
                                    return c(o, function(e, i) {
                                        var s, o = t[i.cache];
                                        return o && (s = r[i.cache] || i.to && i.to(r._rgba) || [], c(i.props, function(e, t) {
                                            if (o[t.idx] != null) return n = o[t.idx] === s[t.idx], n
                                        })), n
                                    }), n
                                },
                                _space: function() {
                                    var e = [],
                                        t = this;
                                    return c(o, function(n, r) {
                                        t[r.cache] && e.push(n)
                                    }), e.pop()
                                },
                                transition: function(e, t) {
                                    var n = s(e),
                                        r = n._space(),
                                        i = o[r],
                                        a = this.alpha() === 0 ? s("transparent") : this,
                                        f = a[i.cache] || i.to(a._rgba),
                                        l = f.slice();
                                    return n = n[i.cache], c(i.props, function(e, r) {
                                        var i = r.idx,
                                            s = f[i],
                                            o = n[i],
                                            a = u[r.type] || {};
                                        if (o === null) return;
                                        s === null ? l[i] = o : (a.mod && (o - s > a.mod / 2 ? s += a.mod : s - o > a.mod / 2 && (s -= a.mod)), l[i] = h((o - s) * t + s, r))
                                    }), this[r](l)
                                },
                                blend: function(t) {
                                    if (this._rgba[3] === 1) return this;
                                    var n = this._rgba.slice(),
                                        r = n.pop(),
                                        i = s(t)._rgba;
                                    return s(e.map(n, function(e, t) {
                                        return (1 - r) * i[t] + r * e
                                    }))
                                },
                                toRgbaString: function() {
                                    var t = "rgba(",
                                        n = e.map(this._rgba, function(e, t) {
                                            return e == null ? t > 2 ? 1 : 0 : e
                                        });
                                    return n[3] === 1 && (n.pop(), t = "rgb("), t + n.join() + ")"
                                },
                                toHslaString: function() {
                                    var t = "hsla(",
                                        n = e.map(this.hsla(), function(e, t) {
                                            return e == null && (e = t > 2 ? 1 : 0), t && t < 3 && (e = Math.round(e * 100) + "%"), e
                                        });
                                    return n[3] === 1 && (n.pop(), t = "hsl("), t + n.join() + ")"
                                },
                                toHexString: function(t) {
                                    var n = this._rgba.slice(),
                                        r = n.pop();
                                    return t && n.push(~~(r * 255)), "#" + e.map(n, function(e) {
                                        return e = (e || 0).toString(16), e.length === 1 ? "0" + e : e
                                    }).join("")
                                },
                                toString: function() {
                                    return this._rgba[3] === 0 ? "transparent" : this.toRgbaString()
                                }
                            }), s.fn.parse.prototype = s.fn, o.hsla.to = function(e) {
                                if (e[0] == null || e[1] == null || e[2] == null) return [null, null, null, e[3]];
                                var t = e[0] / 255,
                                    n = e[1] / 255,
                                    r = e[2] / 255,
                                    i = e[3],
                                    s = Math.max(t, n, r),
                                    o = Math.min(t, n, r),
                                    u = s - o,
                                    a = s + o,
                                    f = a * .5,
                                    l, c;
                                return o === s ? l = 0 : t === s ? l = 60 * (n - r) / u + 360 : n === s ? l = 60 * (r - t) / u + 120 : l = 60 * (t - n) / u + 240, u === 0 ? c = 0 : f <= .5 ? c = u / a : c = u / (2 - a), [Math.round(l) % 360, c, f, i == null ? 1 : i]
                            }, o.hsla.from = function(e) {
                                if (e[0] == null || e[1] == null || e[2] == null) return [null, null, null, e[3]];
                                var t = e[0] / 360,
                                    n = e[1],
                                    r = e[2],
                                    i = e[3],
                                    s = r <= .5 ? r * (1 + n) : r + n - r * n,
                                    o = 2 * r - s;
                                return [Math.round(d(o, s, t + 1 / 3) * 255), Math.round(d(o, s, t) * 255), Math.round(d(o, s, t - 1 / 3) * 255), i]
                            }, c(o, function(n, i) {
                                var o = i.props,
                                    u = i.cache,
                                    a = i.to,
                                    f = i.from;
                                s.fn[n] = function(n) {
                                    a && !this[u] && (this[u] = a(this._rgba));
                                    if (n === t) return this[u].slice();
                                    var r, i = e.type(n),
                                        l = i === "array" || i === "object" ? n : arguments,
                                        p = this[u].slice();
                                    return c(o, function(e, t) {
                                        var n = l[i === "object" ? e : t.idx];
                                        n == null && (n = p[t.idx]), p[t.idx] = h(n, t)
                                    }), f ? (r = s(f(p)), r[u] = p, r) : s(p)
                                }, c(o, function(t, i) {
                                    if (s.fn[t]) return;
                                    s.fn[t] = function(s) {
                                        var o = e.type(s),
                                            u = t === "alpha" ? this._hsla ? "hsla" : "rgba" : n,
                                            a = this[u](),
                                            f = a[i.idx],
                                            l;
                                        return o === "undefined" ? f : (o === "function" && (s = s.call(this, f), o = e.type(s)), s == null && i.empty ? this : (o === "string" && (l = r.exec(s), l && (s = f + parseFloat(l[2]) * (l[1] === "+" ? 1 : -1))), a[i.idx] = s, this[u](a)))
                                    }
                                })
                            }), s.hook = function(t) {
                                var n = t.split(" ");
                                c(n, function(t, n) {
                                    e.cssHooks[n] = {
                                        set: function(t, r) {
                                            var i, o, u = "";
                                            if (r !== "transparent" && (e.type(r) !== "string" || (i = p(r)))) {
                                                r = s(i || r);
                                                if (!a.rgba && r._rgba[3] !== 1) {
                                                    o = n === "backgroundColor" ? t.parentNode : t;
                                                    while ((u === "" || u === "transparent") && o && o.style) try {
                                                        u = e.css(o, "backgroundColor"), o = o.parentNode
                                                    } catch (f) {}
                                                    r = r.blend(u && u !== "transparent" ? u : "_default")
                                                }
                                                r = r.toRgbaString()
                                            }
                                            try {
                                                t.style[n] = r
                                            } catch (f) {}
                                        }
                                    }, e.fx.step[n] = function(t) {
                                        t.colorInit || (t.start = s(t.elem, n), t.end = s(t.end), t.colorInit = !0), e.cssHooks[n].set(t.elem, t.start.transition(t.end, t.pos))
                                    }
                                })
                            }, s.hook(n), e.cssHooks.borderColor = {
                                expand: function(e) {
                                    var t = {};
                                    return c(["Top", "Right", "Bottom", "Left"], function(n, r) {
                                        t["border" + r + "Color"] = e
                                    }), t
                                }
                            }, l = e.Color.names = {
                                aqua: "#00ffff",
                                black: "#000000",
                                blue: "#0000ff",
                                fuchsia: "#ff00ff",
                                gray: "#808080",
                                green: "#008000",
                                lime: "#00ff00",
                                maroon: "#800000",
                                navy: "#000080",
                                olive: "#808000",
                                purple: "#800080",
                                red: "#ff0000",
                                silver: "#c0c0c0",
                                teal: "#008080",
                                white: "#ffffff",
                                yellow: "#ffff00",
                                transparent: [null, null, null, 0],
                                _default: "#ffffff"
                            }
                        }(jQuery),
                        function() {
                            function i(t) {
                                var n, r, i = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                                    s = {};
                                if (i && i.length && i[0] && i[i[0]]) {
                                    r = i.length;
                                    while (r--) n = i[r], typeof i[n] == "string" && (s[e.camelCase(n)] = i[n])
                                } else
                                    for (n in i) typeof i[n] == "string" && (s[n] = i[n]);
                                return s
                            }

                            function s(t, n) {
                                var i = {},
                                    s, o;
                                for (s in n) o = n[s], t[s] !== o && !r[s] && (e.fx.step[s] || !isNaN(parseFloat(o))) && (i[s] = o);
                                return i
                            }
                            var n = ["add", "remove", "toggle"],
                                r = {
                                    border: 1,
                                    borderBottom: 1,
                                    borderColor: 1,
                                    borderLeft: 1,
                                    borderRight: 1,
                                    borderTop: 1,
                                    borderWidth: 1,
                                    margin: 1,
                                    padding: 1
                                };
                            e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(t, n) {
                                e.fx.step[n] = function(e) {
                                    if (e.end !== "none" && !e.setAttr || e.pos === 1 && !e.setAttr) jQuery.style(e.elem, n, e.end), e.setAttr = !0
                                }
                            }), e.fn.addBack || (e.fn.addBack = function(e) {
                                return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
                            }), e.effects.animateClass = function(t, r, o, u) {
                                var a = e.speed(r, o, u);
                                return this.queue(function() {
                                    var r = e(this),
                                        o = r.attr("class") || "",
                                        u, f = a.children ? r.find("*").addBack() : r;
                                    f = f.map(function() {
                                        var t = e(this);
                                        return {
                                            el: t,
                                            start: i(this)
                                        }
                                    }), u = function() {
                                        e.each(n, function(e, n) {
                                            t[n] && r[n + "Class"](t[n])
                                        })
                                    }, u(), f = f.map(function() {
                                        return this.end = i(this.el[0]), this.diff = s(this.start, this.end), this
                                    }), r.attr("class", o), f = f.map(function() {
                                        var t = this,
                                            n = e.Deferred(),
                                            r = e.extend({}, a, {
                                                queue: !1,
                                                complete: function() {
                                                    n.resolve(t)
                                                }
                                            });
                                        return this.el.animate(this.diff, r), n.promise()
                                    }), e.when.apply(e, f.get()).done(function() {
                                        u(), e.each(arguments, function() {
                                            var t = this.el;
                                            e.each(this.diff, function(e) {
                                                t.css(e, "")
                                            })
                                        }), a.complete.call(r[0])
                                    })
                                })
                            }, e.fn.extend({
                                addClass: function(t) {
                                    return function(n, r, i, s) {
                                        return r ? e.effects.animateClass.call(this, {
                                            add: n
                                        }, r, i, s) : t.apply(this, arguments)
                                    }
                                }(e.fn.addClass),
                                removeClass: function(t) {
                                    return function(n, r, i, s) {
                                        return arguments.length > 1 ? e.effects.animateClass.call(this, {
                                            remove: n
                                        }, r, i, s) : t.apply(this, arguments)
                                    }
                                }(e.fn.removeClass),
                                toggleClass: function(n) {
                                    return function(r, i, s, o, u) {
                                        return typeof i == "boolean" || i === t ? s ? e.effects.animateClass.call(this, i ? {
                                            add: r
                                        } : {
                                            remove: r
                                        }, s, o, u) : n.apply(this, arguments) : e.effects.animateClass.call(this, {
                                            toggle: r
                                        }, i, s, o)
                                    }
                                }(e.fn.toggleClass),
                                switchClass: function(t, n, r, i, s) {
                                    return e.effects.animateClass.call(this, {
                                        add: n,
                                        remove: t
                                    }, r, i, s)
                                }
                            })
                        }(),
                        function() {
                            function r(t, n, r, i) {
                                e.isPlainObject(t) && (n = t, t = t.effect), t = {
                                    effect: t
                                }, n == null && (n = {}), e.isFunction(n) && (i = n, r = null, n = {});
                                if (typeof n == "number" || e.fx.speeds[n]) i = r, r = n, n = {};
                                return e.isFunction(r) && (i = r, r = null), n && e.extend(t, n), r = r || n.duration, t.duration = e.fx.off ? 0 : typeof r == "number" ? r : r in e.fx.speeds ? e.fx.speeds[r] : e.fx.speeds._default, t.complete = i || n.complete, t
                            }

                            function i(t) {
                                return !t || typeof t == "number" || e.fx.speeds[t] ? !0 : typeof t == "string" && !e.effects.effect[t] ? !0 : e.isFunction(t) ? !0 : typeof t == "object" && !t.effect ? !0 : !1
                            }
                            e.extend(e.effects, {
                                version: "1.10.4",
                                save: function(e, t) {
                                    for (var r = 0; r < t.length; r++) t[r] !== null && e.data(n + t[r], e[0].style[t[r]])
                                },
                                restore: function(e, r) {
                                    var i, s;
                                    for (s = 0; s < r.length; s++) r[s] !== null && (i = e.data(n + r[s]), i === t && (i = ""), e.css(r[s], i))
                                },
                                setMode: function(e, t) {
                                    return t === "toggle" && (t = e.is(":hidden") ? "show" : "hide"), t
                                },
                                getBaseline: function(e, t) {
                                    var n, r;
                                    switch (e[0]) {
                                        case "top":
                                            n = 0;
                                            break;
                                        case "middle":
                                            n = .5;
                                            break;
                                        case "bottom":
                                            n = 1;
                                            break;
                                        default:
                                            n = e[0] / t.height
                                    }
                                    switch (e[1]) {
                                        case "left":
                                            r = 0;
                                            break;
                                        case "center":
                                            r = .5;
                                            break;
                                        case "right":
                                            r = 1;
                                            break;
                                        default:
                                            r = e[1] / t.width
                                    }
                                    return {
                                        x: r,
                                        y: n
                                    }
                                },
                                createWrapper: function(t) {
                                    if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                                    var n = {
                                            width: t.outerWidth(!0),
                                            height: t.outerHeight(!0),
                                            "float": t.css("float")
                                        },
                                        r = e("<div></div>").addClass("ui-effects-wrapper").css({
                                            fontSize: "100%",
                                            background: "transparent",
                                            border: "none",
                                            margin: 0,
                                            padding: 0
                                        }),
                                        i = {
                                            width: t.width(),
                                            height: t.height()
                                        },
                                        s = document.activeElement;
                                    try {
                                        s.id
                                    } catch (o) {
                                        s = document.body
                                    }
                                    return t.wrap(r), (t[0] === s || e.contains(t[0], s)) && e(s).focus(), r = t.parent(), t.css("position") === "static" ? (r.css({
                                        position: "relative"
                                    }), t.css({
                                        position: "relative"
                                    })) : (e.extend(n, {
                                        position: t.css("position"),
                                        zIndex: t.css("z-index")
                                    }), e.each(["top", "left", "bottom", "right"], function(e, r) {
                                        n[r] = t.css(r), isNaN(parseInt(n[r], 10)) && (n[r] = "auto")
                                    }), t.css({
                                        position: "relative",
                                        top: 0,
                                        left: 0,
                                        right: "auto",
                                        bottom: "auto"
                                    })), t.css(i), r.css(n).show()
                                },
                                removeWrapper: function(t) {
                                    var n = document.activeElement;
                                    return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === n || e.contains(t[0], n)) && e(n).focus()), t
                                },
                                setTransition: function(t, n, r, i) {
                                    return i = i || {}, e.each(n, function(e, n) {
                                        var s = t.cssUnit(n);
                                        s[0] > 0 && (i[n] = s[0] * r + s[1])
                                    }), i
                                }
                            }), e.fn.extend({
                                effect: function() {
                                    function o(n) {
                                        function u() {
                                            e.isFunction(i) && i.call(r[0]), e.isFunction(n) && n()
                                        }
                                        var r = e(this),
                                            i = t.complete,
                                            o = t.mode;
                                        (r.is(":hidden") ? o === "hide" : o === "show") ? (r[o](), u()) : s.call(r[0], t, u)
                                    }
                                    var t = r.apply(this, arguments),
                                        n = t.mode,
                                        i = t.queue,
                                        s = e.effects.effect[t.effect];
                                    return e.fx.off || !s ? n ? this[n](t.duration, t.complete) : this.each(function() {
                                        t.complete && t.complete.call(this)
                                    }) : i === !1 ? this.each(o) : this.queue(i || "fx", o)
                                },
                                show: function(e) {
                                    return function(t) {
                                        if (i(t)) return e.apply(this, arguments);
                                        var n = r.apply(this, arguments);
                                        return n.mode = "show", this.effect.call(this, n)
                                    }
                                }(e.fn.show),
                                hide: function(e) {
                                    return function(t) {
                                        if (i(t)) return e.apply(this, arguments);
                                        var n = r.apply(this, arguments);
                                        return n.mode = "hide", this.effect.call(this, n)
                                    }
                                }(e.fn.hide),
                                toggle: function(e) {
                                    return function(t) {
                                        if (i(t) || typeof t == "boolean") return e.apply(this, arguments);
                                        var n = r.apply(this, arguments);
                                        return n.mode = "toggle", this.effect.call(this, n)
                                    }
                                }(e.fn.toggle),
                                cssUnit: function(t) {
                                    var n = this.css(t),
                                        r = [];
                                    return e.each(["em", "px", "%", "pt"], function(e, t) {
                                        n.indexOf(t) > 0 && (r = [parseFloat(n), t])
                                    }), r
                                }
                            })
                        }(),
                        function() {
                            var t = {};
                            e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(e, n) {
                                t[n] = function(t) {
                                    return Math.pow(t, e + 2)
                                }
                            }), e.extend(t, {
                                Sine: function(e) {
                                    return 1 - Math.cos(e * Math.PI / 2)
                                },
                                Circ: function(e) {
                                    return 1 - Math.sqrt(1 - e * e)
                                },
                                Elastic: function(e) {
                                    return e === 0 || e === 1 ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin(((e - 1) * 80 - 7.5) * Math.PI / 15)
                                },
                                Back: function(e) {
                                    return e * e * (3 * e - 2)
                                },
                                Bounce: function(e) {
                                    var t, n = 4;
                                    while (e < ((t = Math.pow(2, --n)) - 1) / 11);
                                    return 1 / Math.pow(4, 3 - n) - 7.5625 * Math.pow((t * 3 - 2) / 22 - e, 2)
                                }
                            }), e.each(t, function(t, n) {
                                e.easing["easeIn" + t] = n, e.easing["easeOut" + t] = function(e) {
                                    return 1 - n(1 - e)
                                }, e.easing["easeInOut" + t] = function(e) {
                                    return e < .5 ? n(e * 2) / 2 : 1 - n(e * -2 + 2) / 2
                                }
                            })
                        }()
                }(jQuery),
                function(e, t) {
                    var n = /up|down|vertical/,
                        r = /up|left|vertical|horizontal/;
                    e.effects.effect.blind = function(t, i) {
                        var s = e(this),
                            o = ["position", "top", "bottom", "left", "right", "height", "width"],
                            u = e.effects.setMode(s, t.mode || "hide"),
                            a = t.direction || "up",
                            f = n.test(a),
                            l = f ? "height" : "width",
                            c = f ? "top" : "left",
                            h = r.test(a),
                            p = {},
                            d = u === "show",
                            v, m, g;
                        s.parent().is(".ui-effects-wrapper") ? e.effects.save(s.parent(), o) : e.effects.save(s, o), s.show(), v = e.effects.createWrapper(s).css({
                            overflow: "hidden"
                        }), m = v[l](), g = parseFloat(v.css(c)) || 0, p[l] = d ? m : 0, h || (s.css(f ? "bottom" : "right", 0).css(f ? "top" : "left", "auto").css({
                            position: "absolute"
                        }), p[c] = d ? g : m + g), d && (v.css(l, 0), h || v.css(c, g + m)), v.animate(p, {
                            duration: t.duration,
                            easing: t.easing,
                            queue: !1,
                            complete: function() {
                                u === "hide" && s.hide(), e.effects.restore(s, o), e.effects.removeWrapper(s), i()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.bounce = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "height", "width"],
                            s = e.effects.setMode(r, t.mode || "effect"),
                            o = s === "hide",
                            u = s === "show",
                            a = t.direction || "up",
                            f = t.distance,
                            l = t.times || 5,
                            c = l * 2 + (u || o ? 1 : 0),
                            h = t.duration / c,
                            p = t.easing,
                            d = a === "up" || a === "down" ? "top" : "left",
                            v = a === "up" || a === "left",
                            m, g, y, b = r.queue(),
                            w = b.length;
                        (u || o) && i.push("opacity"), e.effects.save(r, i), r.show(), e.effects.createWrapper(r), f || (f = r[d === "top" ? "outerHeight" : "outerWidth"]() / 3), u && (y = {
                            opacity: 1
                        }, y[d] = 0, r.css("opacity", 0).css(d, v ? -f * 2 : f * 2).animate(y, h, p)), o && (f /= Math.pow(2, l - 1)), y = {}, y[d] = 0;
                        for (m = 0; m < l; m++) g = {}, g[d] = (v ? "-=" : "+=") + f, r.animate(g, h, p).animate(y, h, p), f = o ? f * 2 : f / 2;
                        o && (g = {
                            opacity: 0
                        }, g[d] = (v ? "-=" : "+=") + f, r.animate(g, h, p)), r.queue(function() {
                            o && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                        }), w > 1 && b.splice.apply(b, [1, 0].concat(b.splice(w, c + 1))), r.dequeue()
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.clip = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "height", "width"],
                            s = e.effects.setMode(r, t.mode || "hide"),
                            o = s === "show",
                            u = t.direction || "vertical",
                            a = u === "vertical",
                            f = a ? "height" : "width",
                            l = a ? "top" : "left",
                            c = {},
                            h, p, d;
                        e.effects.save(r, i), r.show(), h = e.effects.createWrapper(r).css({
                            overflow: "hidden"
                        }), p = r[0].tagName === "IMG" ? h : r, d = p[f](), o && (p.css(f, 0), p.css(l, d / 2)), c[f] = o ? d : 0, c[l] = o ? 0 : d / 2, p.animate(c, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: function() {
                                o || r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.drop = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"],
                            s = e.effects.setMode(r, t.mode || "hide"),
                            o = s === "show",
                            u = t.direction || "left",
                            a = u === "up" || u === "down" ? "top" : "left",
                            f = u === "up" || u === "left" ? "pos" : "neg",
                            l = {
                                opacity: o ? 1 : 0
                            },
                            c;
                        e.effects.save(r, i), r.show(), e.effects.createWrapper(r), c = t.distance || r[a === "top" ? "outerHeight" : "outerWidth"](!0) / 2, o && r.css("opacity", 0).css(a, f === "pos" ? -c : c), l[a] = (o ? f === "pos" ? "+=" : "-=" : f === "pos" ? "-=" : "+=") + c, r.animate(l, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: function() {
                                s === "hide" && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.explode = function(t, n) {
                        function y() {
                            c.push(this), c.length === r * i && b()
                        }

                        function b() {
                            s.css({
                                visibility: "visible"
                            }), e(c).remove(), u || s.hide(), n()
                        }
                        var r = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3,
                            i = r,
                            s = e(this),
                            o = e.effects.setMode(s, t.mode || "hide"),
                            u = o === "show",
                            a = s.show().css("visibility", "hidden").offset(),
                            f = Math.ceil(s.outerWidth() / i),
                            l = Math.ceil(s.outerHeight() / r),
                            c = [],
                            h, p, d, v, m, g;
                        for (h = 0; h < r; h++) {
                            v = a.top + h * l, g = h - (r - 1) / 2;
                            for (p = 0; p < i; p++) d = a.left + p * f, m = p - (i - 1) / 2, s.clone().appendTo("body").wrap("<div></div>").css({
                                position: "absolute",
                                visibility: "visible",
                                left: -p * f,
                                top: -h * l
                            }).parent().addClass("ui-effects-explode").css({
                                position: "absolute",
                                overflow: "hidden",
                                width: f,
                                height: l,
                                left: d + (u ? m * f : 0),
                                top: v + (u ? g * l : 0),
                                opacity: u ? 0 : 1
                            }).animate({
                                left: d + (u ? 0 : m * f),
                                top: v + (u ? 0 : g * l),
                                opacity: u ? 1 : 0
                            }, t.duration || 500, t.easing, y)
                        }
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.fade = function(t, n) {
                        var r = e(this),
                            i = e.effects.setMode(r, t.mode || "toggle");
                        r.animate({
                            opacity: i
                        }, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: n
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.fold = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "height", "width"],
                            s = e.effects.setMode(r, t.mode || "hide"),
                            o = s === "show",
                            u = s === "hide",
                            a = t.size || 15,
                            f = /([0-9]+)%/.exec(a),
                            l = !!t.horizFirst,
                            c = o !== l,
                            h = c ? ["width", "height"] : ["height", "width"],
                            p = t.duration / 2,
                            d, v, m = {},
                            g = {};
                        e.effects.save(r, i), r.show(), d = e.effects.createWrapper(r).css({
                            overflow: "hidden"
                        }), v = c ? [d.width(), d.height()] : [d.height(), d.width()], f && (a = parseInt(f[1], 10) / 100 * v[u ? 0 : 1]), o && d.css(l ? {
                            height: 0,
                            width: a
                        } : {
                            height: a,
                            width: 0
                        }), m[h[0]] = o ? v[0] : a, g[h[1]] = o ? v[1] : 0, d.animate(m, p, t.easing).animate(g, p, t.easing, function() {
                            u && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.highlight = function(t, n) {
                        var r = e(this),
                            i = ["backgroundImage", "backgroundColor", "opacity"],
                            s = e.effects.setMode(r, t.mode || "show"),
                            o = {
                                backgroundColor: r.css("backgroundColor")
                            };
                        s === "hide" && (o.opacity = 0), e.effects.save(r, i), r.show().css({
                            backgroundImage: "none",
                            backgroundColor: t.color || "#ffff99"
                        }).animate(o, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: function() {
                                s === "hide" && r.hide(), e.effects.restore(r, i), n()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.pulsate = function(t, n) {
                        var r = e(this),
                            i = e.effects.setMode(r, t.mode || "show"),
                            s = i === "show",
                            o = i === "hide",
                            u = s || i === "hide",
                            a = (t.times || 5) * 2 + (u ? 1 : 0),
                            f = t.duration / a,
                            l = 0,
                            c = r.queue(),
                            h = c.length,
                            p;
                        if (s || !r.is(":visible")) r.css("opacity", 0).show(), l = 1;
                        for (p = 1; p < a; p++) r.animate({
                            opacity: l
                        }, f, t.easing), l = 1 - l;
                        r.animate({
                            opacity: l
                        }, f, t.easing), r.queue(function() {
                            o && r.hide(), n()
                        }), h > 1 && c.splice.apply(c, [1, 0].concat(c.splice(h, a + 1))), r.dequeue()
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.puff = function(t, n) {
                        var r = e(this),
                            i = e.effects.setMode(r, t.mode || "hide"),
                            s = i === "hide",
                            o = parseInt(t.percent, 10) || 150,
                            u = o / 100,
                            a = {
                                height: r.height(),
                                width: r.width(),
                                outerHeight: r.outerHeight(),
                                outerWidth: r.outerWidth()
                            };
                        e.extend(t, {
                            effect: "scale",
                            queue: !1,
                            fade: !0,
                            mode: i,
                            complete: n,
                            percent: s ? o : 100,
                            from: s ? a : {
                                height: a.height * u,
                                width: a.width * u,
                                outerHeight: a.outerHeight * u,
                                outerWidth: a.outerWidth * u
                            }
                        }), r.effect(t)
                    }, e.effects.effect.scale = function(t, n) {
                        var r = e(this),
                            i = e.extend(!0, {}, t),
                            s = e.effects.setMode(r, t.mode || "effect"),
                            o = parseInt(t.percent, 10) || (parseInt(t.percent, 10) === 0 ? 0 : s === "hide" ? 0 : 100),
                            u = t.direction || "both",
                            a = t.origin,
                            f = {
                                height: r.height(),
                                width: r.width(),
                                outerHeight: r.outerHeight(),
                                outerWidth: r.outerWidth()
                            },
                            l = {
                                y: u !== "horizontal" ? o / 100 : 1,
                                x: u !== "vertical" ? o / 100 : 1
                            };
                        i.effect = "size", i.queue = !1, i.complete = n, s !== "effect" && (i.origin = a || ["middle", "center"], i.restore = !0), i.from = t.from || (s === "show" ? {
                            height: 0,
                            width: 0,
                            outerHeight: 0,
                            outerWidth: 0
                        } : f), i.to = {
                            height: f.height * l.y,
                            width: f.width * l.x,
                            outerHeight: f.outerHeight * l.y,
                            outerWidth: f.outerWidth * l.x
                        }, i.fade && (s === "show" && (i.from.opacity = 0, i.to.opacity = 1), s === "hide" && (i.from.opacity = 1, i.to.opacity = 0)), r.effect(i)
                    }, e.effects.effect.size = function(t, n) {
                        var r, i, s, o = e(this),
                            u = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"],
                            a = ["position", "top", "bottom", "left", "right", "overflow", "opacity"],
                            f = ["width", "height", "overflow"],
                            l = ["fontSize"],
                            c = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"],
                            h = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"],
                            p = e.effects.setMode(o, t.mode || "effect"),
                            d = t.restore || p !== "effect",
                            v = t.scale || "both",
                            m = t.origin || ["middle", "center"],
                            g = o.css("position"),
                            y = d ? u : a,
                            b = {
                                height: 0,
                                width: 0,
                                outerHeight: 0,
                                outerWidth: 0
                            };
                        p === "show" && o.show(), r = {
                            height: o.height(),
                            width: o.width(),
                            outerHeight: o.outerHeight(),
                            outerWidth: o.outerWidth()
                        }, t.mode === "toggle" && p === "show" ? (o.from = t.to || b, o.to = t.from || r) : (o.from = t.from || (p === "show" ? b : r), o.to = t.to || (p === "hide" ? b : r)), s = {
                            from: {
                                y: o.from.height / r.height,
                                x: o.from.width / r.width
                            },
                            to: {
                                y: o.to.height / r.height,
                                x: o.to.width / r.width
                            }
                        };
                        if (v === "box" || v === "both") s.from.y !== s.to.y && (y = y.concat(c), o.from = e.effects.setTransition(o, c, s.from.y, o.from), o.to = e.effects.setTransition(o, c, s.to.y, o.to)), s.from.x !== s.to.x && (y = y.concat(h), o.from = e.effects.setTransition(o, h, s.from.x, o.from), o.to = e.effects.setTransition(o, h, s.to.x, o.to));
                        (v === "content" || v === "both") && s.from.y !== s.to.y && (y = y.concat(l).concat(f), o.from = e.effects.setTransition(o, l, s.from.y, o.from), o.to = e.effects.setTransition(o, l, s.to.y, o.to)), e.effects.save(o, y), o.show(), e.effects.createWrapper(o), o.css("overflow", "hidden").css(o.from), m && (i = e.effects.getBaseline(m, r), o.from.top = (r.outerHeight - o.outerHeight()) * i.y, o.from.left = (r.outerWidth - o.outerWidth()) * i.x, o.to.top = (r.outerHeight - o.to.outerHeight) * i.y, o.to.left = (r.outerWidth - o.to.outerWidth) * i.x), o.css(o.from);
                        if (v === "content" || v === "both") c = c.concat(["marginTop", "marginBottom"]).concat(l), h = h.concat(["marginLeft", "marginRight"]), f = u.concat(c).concat(h), o.find("*[width]").each(function() {
                            var n = e(this),
                                r = {
                                    height: n.height(),
                                    width: n.width(),
                                    outerHeight: n.outerHeight(),
                                    outerWidth: n.outerWidth()
                                };
                            d && e.effects.save(n, f), n.from = {
                                height: r.height * s.from.y,
                                width: r.width * s.from.x,
                                outerHeight: r.outerHeight * s.from.y,
                                outerWidth: r.outerWidth * s.from.x
                            }, n.to = {
                                height: r.height * s.to.y,
                                width: r.width * s.to.x,
                                outerHeight: r.height * s.to.y,
                                outerWidth: r.width * s.to.x
                            }, s.from.y !== s.to.y && (n.from = e.effects.setTransition(n, c, s.from.y, n.from), n.to = e.effects.setTransition(n, c, s.to.y, n.to)), s.from.x !== s.to.x && (n.from = e.effects.setTransition(n, h, s.from.x, n.from), n.to = e.effects.setTransition(n, h, s.to.x, n.to)), n.css(n.from), n.animate(n.to, t.duration, t.easing, function() {
                                d && e.effects.restore(n, f)
                            })
                        });
                        o.animate(o.to, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: function() {
                                o.to.opacity === 0 && o.css("opacity", o.from.opacity), p === "hide" && o.hide(), e.effects.restore(o, y), d || (g === "static" ? o.css({
                                    position: "relative",
                                    top: o.to.top,
                                    left: o.to.left
                                }) : e.each(["top", "left"], function(e, t) {
                                    o.css(t, function(t, n) {
                                        var r = parseInt(n, 10),
                                            i = e ? o.to.left : o.to.top;
                                        return n === "auto" ? i + "px" : r + i + "px"
                                    })
                                })), e.effects.removeWrapper(o), n()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.shake = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "height", "width"],
                            s = e.effects.setMode(r, t.mode || "effect"),
                            o = t.direction || "left",
                            u = t.distance || 20,
                            a = t.times || 3,
                            f = a * 2 + 1,
                            l = Math.round(t.duration / f),
                            c = o === "up" || o === "down" ? "top" : "left",
                            h = o === "up" || o === "left",
                            p = {},
                            d = {},
                            v = {},
                            m, g = r.queue(),
                            y = g.length;
                        e.effects.save(r, i), r.show(), e.effects.createWrapper(r), p[c] = (h ? "-=" : "+=") + u, d[c] = (h ? "+=" : "-=") + u * 2, v[c] = (h ? "-=" : "+=") + u * 2, r.animate(p, l, t.easing);
                        for (m = 1; m < a; m++) r.animate(d, l, t.easing).animate(v, l, t.easing);
                        r.animate(d, l, t.easing).animate(p, l / 2, t.easing).queue(function() {
                            s === "hide" && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                        }), y > 1 && g.splice.apply(g, [1, 0].concat(g.splice(y, f + 1))), r.dequeue()
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.slide = function(t, n) {
                        var r = e(this),
                            i = ["position", "top", "bottom", "left", "right", "width", "height"],
                            s = e.effects.setMode(r, t.mode || "show"),
                            o = s === "show",
                            u = t.direction || "left",
                            a = u === "up" || u === "down" ? "top" : "left",
                            f = u === "up" || u === "left",
                            l, c = {};
                        e.effects.save(r, i), r.show(), l = t.distance || r[a === "top" ? "outerHeight" : "outerWidth"](!0), e.effects.createWrapper(r).css({
                            overflow: "hidden"
                        }), o && r.css(a, f ? isNaN(l) ? "-" + l : -l : l), c[a] = (o ? f ? "+=" : "-=" : f ? "-=" : "+=") + l, r.animate(c, {
                            queue: !1,
                            duration: t.duration,
                            easing: t.easing,
                            complete: function() {
                                s === "hide" && r.hide(), e.effects.restore(r, i), e.effects.removeWrapper(r), n()
                            }
                        })
                    }
                }(jQuery),
                function(e, t) {
                    e.effects.effect.transfer = function(t, n) {
                        var r = e(this),
                            i = e(t.to),
                            s = i.css("position") === "fixed",
                            o = e("body"),
                            u = s ? o.scrollTop() : 0,
                            a = s ? o.scrollLeft() : 0,
                            f = i.offset(),
                            l = {
                                top: f.top - u,
                                left: f.left - a,
                                height: i.innerHeight(),
                                width: i.innerWidth()
                            },
                            c = r.offset(),
                            h = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
                                top: c.top - u,
                                left: c.left - a,
                                height: r.innerHeight(),
                                width: r.innerWidth(),
                                position: s ? "fixed" : "absolute"
                            }).animate(l, t.duration, t.easing, function() {
                                h.remove(), n()
                            })
                    }
                }(jQuery),
                function(e, t) {
                    e.widget("ui.menu", {
                        version: "1.10.4",
                        defaultElement: "<ul>",
                        delay: 300,
                        options: {
                            icons: {
                                submenu: "ui-icon-carat-1-e"
                            },
                            menus: "ul",
                            position: {
                                my: "left top",
                                at: "right top"
                            },
                            role: "menu",
                            blur: null,
                            focus: null,
                            select: null
                        },
                        _create: function() {
                            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                                role: this.options.role,
                                tabIndex: 0
                            }).bind("click" + this.eventNamespace, e.proxy(function(e) {
                                this.options.disabled && e.preventDefault()
                            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({
                                "mousedown .ui-menu-item > a": function(e) {
                                    e.preventDefault()
                                },
                                "click .ui-state-disabled > a": function(e) {
                                    e.preventDefault()
                                },
                                "click .ui-menu-item:has(a)": function(t) {
                                    var n = e(t.target).closest(".ui-menu-item");
                                    !this.mouseHandled && n.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), n.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer)))
                                },
                                "mouseenter .ui-menu-item": function(t) {
                                    var n = e(t.currentTarget);
                                    n.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(t, n)
                                },
                                mouseleave: "collapseAll",
                                "mouseleave .ui-menu": "collapseAll",
                                focus: function(e, t) {
                                    var n = this.active || this.element.children(".ui-menu-item").eq(0);
                                    t || this.focus(e, n)
                                },
                                blur: function(t) {
                                    this._delay(function() {
                                        e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t)
                                    })
                                },
                                keydown: "_keydown"
                            }), this.refresh(), this._on(this.document, {
                                click: function(t) {
                                    e(t.target).closest(".ui-menu").length || this.collapseAll(t), this.mouseHandled = !1
                                }
                            })
                        },
                        _destroy: function() {
                            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                                var t = e(this);
                                t.data("ui-menu-submenu-carat") && t.remove()
                            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
                        },
                        _keydown: function(t) {
                            function a(e) {
                                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
                            }
                            var n, r, i, s, o, u = !0;
                            switch (t.keyCode) {
                                case e.ui.keyCode.PAGE_UP:
                                    this.previousPage(t);
                                    break;
                                case e.ui.keyCode.PAGE_DOWN:
                                    this.nextPage(t);
                                    break;
                                case e.ui.keyCode.HOME:
                                    this._move("first", "first", t);
                                    break;
                                case e.ui.keyCode.END:
                                    this._move("last", "last", t);
                                    break;
                                case e.ui.keyCode.UP:
                                    this.previous(t);
                                    break;
                                case e.ui.keyCode.DOWN:
                                    this.next(t);
                                    break;
                                case e.ui.keyCode.LEFT:
                                    this.collapse(t);
                                    break;
                                case e.ui.keyCode.RIGHT:
                                    this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                                    break;
                                case e.ui.keyCode.ENTER:
                                case e.ui.keyCode.SPACE:
                                    this._activate(t);
                                    break;
                                case e.ui.keyCode.ESCAPE:
                                    this.collapse(t);
                                    break;
                                default:
                                    u = !1, r = this.previousFilter || "", i = String.fromCharCode(t.keyCode), s = !1, clearTimeout(this.filterTimer), i === r ? s = !0 : i = r + i, o = new RegExp("^" + a(i), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function() {
                                        return o.test(e(this).children("a").text())
                                    }), n = s && n.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : n, n.length || (i = String.fromCharCode(t.keyCode), o = new RegExp("^" + a(i), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function() {
                                        return o.test(e(this).children("a").text())
                                    })), n.length ? (this.focus(t, n), n.length > 1 ? (this.previousFilter = i, this.filterTimer = this._delay(function() {
                                        delete this.previousFilter
                                    }, 1e3)) : delete this.previousFilter) : delete this.previousFilter
                            }
                            u && t.preventDefault()
                        },
                        _activate: function(e) {
                            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(e) : this.select(e))
                        },
                        refresh: function() {
                            var t, n = this.options.icons.submenu,
                                r = this.element.find(this.options.menus);
                            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                                role: this.options.role,
                                "aria-hidden": "true",
                                "aria-expanded": "false"
                            }).each(function() {
                                var t = e(this),
                                    r = t.prev("a"),
                                    i = e("<span>").addClass("ui-menu-icon ui-icon " + n).data("ui-menu-submenu-carat", !0);
                                r.attr("aria-haspopup", "true").prepend(i), t.attr("aria-labelledby", r.attr("id"))
                            }), t = r.add(this.element), t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                                tabIndex: -1,
                                role: this._itemRole()
                            }), t.children(":not(.ui-menu-item)").each(function() {
                                var t = e(this);
                                /[^\-\u2014\u2013\s]/.test(t.text()) || t.addClass("ui-widget-content ui-menu-divider")
                            }), t.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur()
                        },
                        _itemRole: function() {
                            return {
                                menu: "menuitem",
                                listbox: "option"
                            }[this.options.role]
                        },
                        _setOption: function(e, t) {
                            e === "icons" && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), this._super(e, t)
                        },
                        focus: function(e, t) {
                            var n, r;
                            this.blur(e, e && e.type === "focus"), this._scrollIntoView(t), this.active = t.first(), r = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", r.attr("id")), this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), e && e.type === "keydown" ? this._close() : this.timer = this._delay(function() {
                                this._close()
                            }, this.delay), n = t.children(".ui-menu"), n.length && e && /^mouse/.test(e.type) && this._startOpening(n), this.activeMenu = t.parent(), this._trigger("focus", e, {
                                item: t
                            })
                        },
                        _scrollIntoView: function(t) {
                            var n, r, i, s, o, u;
                            this._hasScroll() && (n = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, r = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, i = t.offset().top - this.activeMenu.offset().top - n - r, s = this.activeMenu.scrollTop(), o = this.activeMenu.height(), u = t.height(), i < 0 ? this.activeMenu.scrollTop(s + i) : i + u > o && this.activeMenu.scrollTop(s + i - o + u))
                        },
                        blur: function(e, t) {
                            t || clearTimeout(this.timer);
                            if (!this.active) return;
                            this.active.children("a").removeClass("ui-state-focus"), this.active = null, this._trigger("blur", e, {
                                item: this.active
                            })
                        },
                        _startOpening: function(e) {
                            clearTimeout(this.timer);
                            if (e.attr("aria-hidden") !== "true") return;
                            this.timer = this._delay(function() {
                                this._close(), this._open(e)
                            }, this.delay)
                        },
                        _open: function(t) {
                            var n = e.extend({
                                of: this.active
                            }, this.options.position);
                            clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(n)
                        },
                        collapseAll: function(t, n) {
                            clearTimeout(this.timer), this.timer = this._delay(function() {
                                var r = n ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                                r.length || (r = this.element), this._close(r), this.blur(t), this.activeMenu = r
                            }, this.delay)
                        },
                        _close: function(e) {
                            e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active")
                        },
                        collapse: function(e) {
                            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
                            t && t.length && (this._close(), this.focus(e, t))
                        },
                        expand: function(e) {
                            var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
                            t && t.length && (this._open(t.parent()), this._delay(function() {
                                this.focus(e, t)
                            }))
                        },
                        next: function(e) {
                            this._move("next", "first", e)
                        },
                        previous: function(e) {
                            this._move("prev", "last", e)
                        },
                        isFirstItem: function() {
                            return this.active && !this.active.prevAll(".ui-menu-item").length
                        },
                        isLastItem: function() {
                            return this.active && !this.active.nextAll(".ui-menu-item").length
                        },
                        _move: function(e, t, n) {
                            var r;
                            this.active && (e === "first" || e === "last" ? r = this.active[e === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : r = this.active[e + "All"](".ui-menu-item").eq(0));
                            if (!r || !r.length || !this.active) r = this.activeMenu.children(".ui-menu-item")[t]();
                            this.focus(n, r)
                        },
                        nextPage: function(t) {
                            var n, r, i;
                            if (!this.active) {
                                this.next(t);
                                return
                            }
                            if (this.isLastItem()) return;
                            this._hasScroll() ? (r = this.active.offset().top, i = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                                return n = e(this), n.offset().top - r - i < 0
                            }), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]())
                        },
                        previousPage: function(t) {
                            var n, r, i;
                            if (!this.active) {
                                this.next(t);
                                return
                            }
                            if (this.isFirstItem()) return;
                            this._hasScroll() ? (r = this.active.offset().top, i = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                                return n = e(this), n.offset().top - r + i > 0
                            }), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item").first())
                        },
                        _hasScroll: function() {
                            return this.element.outerHeight() < this.element.prop("scrollHeight")
                        },
                        select: function(t) {
                            this.active = this.active || e(t.target).closest(".ui-menu-item");
                            var n = {
                                item: this.active
                            };
                            this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, n)
                        }
                    })
                }(jQuery),
                function(e, t) {
                    e.widget("ui.progressbar", {
                        version: "1.10.4",
                        options: {
                            max: 100,
                            value: 0,
                            change: null,
                            complete: null
                        },
                        min: 0,
                        _create: function() {
                            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                                role: "progressbar",
                                "aria-valuemin": this.min
                            }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue()
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove()
                        },
                        value: function(e) {
                            if (e === t) return this.options.value;
                            this.options.value = this._constrainedValue(e), this._refreshValue()
                        },
                        _constrainedValue: function(e) {
                            return e === t && (e = this.options.value), this.indeterminate = e === !1, typeof e != "number" && (e = 0), this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, e))
                        },
                        _setOptions: function(e) {
                            var t = e.value;
                            delete e.value, this._super(e), this.options.value = this._constrainedValue(t), this._refreshValue()
                        },
                        _setOption: function(e, t) {
                            e === "max" && (t = Math.max(this.min, t)), this._super(e, t)
                        },
                        _percentage: function() {
                            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
                        },
                        _refreshValue: function() {
                            var t = this.options.value,
                                n = this._percentage();
                            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(n.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({
                                "aria-valuemax": this.options.max,
                                "aria-valuenow": t
                            }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, this._trigger("change")), t === this.options.max && this._trigger("complete")
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function n(e) {
                        return parseInt(e, 10) || 0
                    }

                    function r(e) {
                        return !isNaN(parseInt(e, 10))
                    }
                    e.widget("ui.resizable", e.ui.mouse, {
                        version: "1.10.4",
                        widgetEventPrefix: "resize",
                        options: {
                            alsoResize: !1,
                            animate: !1,
                            animateDuration: "slow",
                            animateEasing: "swing",
                            aspectRatio: !1,
                            autoHide: !1,
                            containment: !1,
                            ghost: !1,
                            grid: !1,
                            handles: "e,s,se",
                            helper: !1,
                            maxHeight: null,
                            maxWidth: null,
                            minHeight: 10,
                            minWidth: 10,
                            zIndex: 90,
                            resize: null,
                            start: null,
                            stop: null
                        },
                        _create: function() {
                            var t, n, r, i, s, o = this,
                                u = this.options;
                            this.element.addClass("ui-resizable"), e.extend(this, {
                                _aspectRatio: !!u.aspectRatio,
                                aspectRatio: u.aspectRatio,
                                originalElement: this.element,
                                _proportionallyResizeElements: [],
                                _helper: u.helper || u.ghost || u.animate ? u.helper || "ui-resizable-helper" : null
                            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                                position: this.element.css("position"),
                                width: this.element.outerWidth(),
                                height: this.element.outerHeight(),
                                top: this.element.css("top"),
                                left: this.element.css("left")
                            })), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), this.elementIsWrapper = !0, this.element.css({
                                marginLeft: this.originalElement.css("marginLeft"),
                                marginTop: this.originalElement.css("marginTop"),
                                marginRight: this.originalElement.css("marginRight"),
                                marginBottom: this.originalElement.css("marginBottom")
                            }), this.originalElement.css({
                                marginLeft: 0,
                                marginTop: 0,
                                marginRight: 0,
                                marginBottom: 0
                            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                                position: "static",
                                zoom: 1,
                                display: "block"
                            })), this.originalElement.css({
                                margin: this.originalElement.css("margin")
                            }), this._proportionallyResize()), this.handles = u.handles || (e(".ui-resizable-handle", this.element).length ? {
                                n: ".ui-resizable-n",
                                e: ".ui-resizable-e",
                                s: ".ui-resizable-s",
                                w: ".ui-resizable-w",
                                se: ".ui-resizable-se",
                                sw: ".ui-resizable-sw",
                                ne: ".ui-resizable-ne",
                                nw: ".ui-resizable-nw"
                            } : "e,s,se");
                            if (this.handles.constructor === String) {
                                this.handles === "all" && (this.handles = "n,e,s,w,se,sw,ne,nw"), t = this.handles.split(","), this.handles = {};
                                for (n = 0; n < t.length; n++) r = e.trim(t[n]), s = "ui-resizable-" + r, i = e("<div class='ui-resizable-handle " + s + "'></div>"), i.css({
                                    zIndex: u.zIndex
                                }), "se" === r && i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[r] = ".ui-resizable-" + r, this.element.append(i)
                            }
                            this._renderAxis = function(t) {
                                var n, r, i, s;
                                t = t || this.element;
                                for (n in this.handles) {
                                    this.handles[n].constructor === String && (this.handles[n] = e(this.handles[n], this.element).show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (r = e(this.handles[n], this.element), s = /sw|ne|nw|se|n|s/.test(n) ? r.outerHeight() : r.outerWidth(), i = ["padding", /ne|nw|n/.test(n) ? "Top" : /se|sw|s/.test(n) ? "Bottom" : /^e$/.test(n) ? "Right" : "Left"].join(""), t.css(i, s), this._proportionallyResize());
                                    if (!e(this.handles[n]).length) continue
                                }
                            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function() {
                                o.resizing || (this.className && (i = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), o.axis = i && i[1] ? i[1] : "se")
                            }), u.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                                if (u.disabled) return;
                                e(this).removeClass("ui-resizable-autohide"), o._handles.show()
                            }).mouseleave(function() {
                                if (u.disabled) return;
                                o.resizing || (e(this).addClass("ui-resizable-autohide"), o._handles.hide())
                            })), this._mouseInit()
                        },
                        _destroy: function() {
                            this._mouseDestroy();
                            var t, n = function(t) {
                                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
                            };
                            return this.elementIsWrapper && (n(this.element), t = this.element, this.originalElement.css({
                                position: t.css("position"),
                                width: t.outerWidth(),
                                height: t.outerHeight(),
                                top: t.css("top"),
                                left: t.css("left")
                            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), n(this.originalElement), this
                        },
                        _mouseCapture: function(t) {
                            var n, r, i = !1;
                            for (n in this.handles) {
                                r = e(this.handles[n])[0];
                                if (r === t.target || e.contains(r, t.target)) i = !0
                            }
                            return !this.options.disabled && i
                        },
                        _mouseStart: function(t) {
                            var r, i, s, o = this.options,
                                u = this.element.position(),
                                a = this.element;
                            return this.resizing = !0, /absolute/.test(a.css("position")) ? a.css({
                                position: "absolute",
                                top: a.css("top"),
                                left: a.css("left")
                            }) : a.is(".ui-draggable") && a.css({
                                position: "absolute",
                                top: u.top,
                                left: u.left
                            }), this._renderProxy(), r = n(this.helper.css("left")), i = n(this.helper.css("top")), o.containment && (r += e(o.containment).scrollLeft() || 0, i += e(o.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                                left: r,
                                top: i
                            }, this.size = this._helper ? {
                                width: this.helper.width(),
                                height: this.helper.height()
                            } : {
                                width: a.width(),
                                height: a.height()
                            }, this.originalSize = this._helper ? {
                                width: a.outerWidth(),
                                height: a.outerHeight()
                            } : {
                                width: a.width(),
                                height: a.height()
                            }, this.originalPosition = {
                                left: r,
                                top: i
                            }, this.sizeDiff = {
                                width: a.outerWidth() - a.width(),
                                height: a.outerHeight() - a.height()
                            }, this.originalMousePosition = {
                                left: t.pageX,
                                top: t.pageY
                            }, this.aspectRatio = typeof o.aspectRatio == "number" ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1, s = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", s === "auto" ? this.axis + "-resize" : s), a.addClass("ui-resizable-resizing"), this._propagate("start", t), !0
                        },
                        _mouseDrag: function(t) {
                            var n, r = this.helper,
                                i = {},
                                s = this.originalMousePosition,
                                o = this.axis,
                                u = this.position.top,
                                a = this.position.left,
                                f = this.size.width,
                                l = this.size.height,
                                c = t.pageX - s.left || 0,
                                h = t.pageY - s.top || 0,
                                p = this._change[o];
                            if (!p) return !1;
                            n = p.apply(this, [t, c, h]), this._updateVirtualBoundaries(t.shiftKey);
                            if (this._aspectRatio || t.shiftKey) n = this._updateRatio(n, t);
                            return n = this._respectSize(n, t), this._updateCache(n), this._propagate("resize", t), this.position.top !== u && (i.top = this.position.top + "px"), this.position.left !== a && (i.left = this.position.left + "px"), this.size.width !== f && (i.width = this.size.width + "px"), this.size.height !== l && (i.height = this.size.height + "px"), r.css(i), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(i) || this._trigger("resize", t, this.ui()), !1
                        },
                        _mouseStop: function(t) {
                            this.resizing = !1;
                            var n, r, i, s, o, u, a, f = this.options,
                                l = this;
                            return this._helper && (n = this._proportionallyResizeElements, r = n.length && /textarea/i.test(n[0].nodeName), i = r && e.ui.hasScroll(n[0], "left") ? 0 : l.sizeDiff.height, s = r ? 0 : l.sizeDiff.width, o = {
                                width: l.helper.width() - s,
                                height: l.helper.height() - i
                            }, u = parseInt(l.element.css("left"), 10) + (l.position.left - l.originalPosition.left) || null, a = parseInt(l.element.css("top"), 10) + (l.position.top - l.originalPosition.top) || null, f.animate || this.element.css(e.extend(o, {
                                top: a,
                                left: u
                            })), l.helper.height(l.size.height), l.helper.width(l.size.width), this._helper && !f.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
                        },
                        _updateVirtualBoundaries: function(e) {
                            var t, n, i, s, o, u = this.options;
                            o = {
                                minWidth: r(u.minWidth) ? u.minWidth : 0,
                                maxWidth: r(u.maxWidth) ? u.maxWidth : Infinity,
                                minHeight: r(u.minHeight) ? u.minHeight : 0,
                                maxHeight: r(u.maxHeight) ? u.maxHeight : Infinity
                            };
                            if (this._aspectRatio || e) t = o.minHeight * this.aspectRatio, i = o.minWidth / this.aspectRatio, n = o.maxHeight * this.aspectRatio, s = o.maxWidth / this.aspectRatio, t > o.minWidth && (o.minWidth = t), i > o.minHeight && (o.minHeight = i), n < o.maxWidth && (o.maxWidth = n), s < o.maxHeight && (o.maxHeight = s);
                            this._vBoundaries = o
                        },
                        _updateCache: function(e) {
                            this.offset = this.helper.offset(), r(e.left) && (this.position.left = e.left), r(e.top) && (this.position.top = e.top), r(e.height) && (this.size.height = e.height), r(e.width) && (this.size.width = e.width)
                        },
                        _updateRatio: function(e) {
                            var t = this.position,
                                n = this.size,
                                i = this.axis;
                            return r(e.height) ? e.width = e.height * this.aspectRatio : r(e.width) && (e.height = e.width / this.aspectRatio), i === "sw" && (e.left = t.left + (n.width - e.width), e.top = null), i === "nw" && (e.top = t.top + (n.height - e.height), e.left = t.left + (n.width - e.width)), e
                        },
                        _respectSize: function(e) {
                            var t = this._vBoundaries,
                                n = this.axis,
                                i = r(e.width) && t.maxWidth && t.maxWidth < e.width,
                                s = r(e.height) && t.maxHeight && t.maxHeight < e.height,
                                o = r(e.width) && t.minWidth && t.minWidth > e.width,
                                u = r(e.height) && t.minHeight && t.minHeight > e.height,
                                a = this.originalPosition.left + this.originalSize.width,
                                f = this.position.top + this.size.height,
                                l = /sw|nw|w/.test(n),
                                c = /nw|ne|n/.test(n);
                            return o && (e.width = t.minWidth), u && (e.height = t.minHeight), i && (e.width = t.maxWidth), s && (e.height = t.maxHeight), o && l && (e.left = a - t.minWidth), i && l && (e.left = a - t.maxWidth), u && c && (e.top = f - t.minHeight), s && c && (e.top = f - t.maxHeight), !e.width && !e.height && !e.left && e.top ? e.top = null : !e.width && !e.height && !e.top && e.left && (e.left = null), e
                        },
                        _proportionallyResize: function() {
                            if (!this._proportionallyResizeElements.length) return;
                            var e, t, n, r, i, s = this.helper || this.element;
                            for (e = 0; e < this._proportionallyResizeElements.length; e++) {
                                i = this._proportionallyResizeElements[e];
                                if (!this.borderDif) {
                                    this.borderDif = [], n = [i.css("borderTopWidth"), i.css("borderRightWidth"), i.css("borderBottomWidth"), i.css("borderLeftWidth")], r = [i.css("paddingTop"), i.css("paddingRight"), i.css("paddingBottom"), i.css("paddingLeft")];
                                    for (t = 0; t < n.length; t++) this.borderDif[t] = (parseInt(n[t], 10) || 0) + (parseInt(r[t], 10) || 0)
                                }
                                i.css({
                                    height: s.height() - this.borderDif[0] - this.borderDif[2] || 0,
                                    width: s.width() - this.borderDif[1] - this.borderDif[3] || 0
                                })
                            }
                        },
                        _renderProxy: function() {
                            var t = this.element,
                                n = this.options;
                            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                                width: this.element.outerWidth() - 1,
                                height: this.element.outerHeight() - 1,
                                position: "absolute",
                                left: this.elementOffset.left + "px",
                                top: this.elementOffset.top + "px",
                                zIndex: ++n.zIndex
                            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
                        },
                        _change: {
                            e: function(e, t) {
                                return {
                                    width: this.originalSize.width + t
                                }
                            },
                            w: function(e, t) {
                                var n = this.originalSize,
                                    r = this.originalPosition;
                                return {
                                    left: r.left + t,
                                    width: n.width - t
                                }
                            },
                            n: function(e, t, n) {
                                var r = this.originalSize,
                                    i = this.originalPosition;
                                return {
                                    top: i.top + n,
                                    height: r.height - n
                                }
                            },
                            s: function(e, t, n) {
                                return {
                                    height: this.originalSize.height + n
                                }
                            },
                            se: function(t, n, r) {
                                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
                            },
                            sw: function(t, n, r) {
                                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
                            },
                            ne: function(t, n, r) {
                                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
                            },
                            nw: function(t, n, r) {
                                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
                            }
                        },
                        _propagate: function(t, n) {
                            e.ui.plugin.call(this, t, [n, this.ui()]), t !== "resize" && this._trigger(t, n, this.ui())
                        },
                        plugins: {},
                        ui: function() {
                            return {
                                originalElement: this.originalElement,
                                element: this.element,
                                helper: this.helper,
                                position: this.position,
                                size: this.size,
                                originalSize: this.originalSize,
                                originalPosition: this.originalPosition
                            }
                        }
                    }), e.ui.plugin.add("resizable", "animate", {
                        stop: function(t) {
                            var n = e(this).data("ui-resizable"),
                                r = n.options,
                                i = n._proportionallyResizeElements,
                                s = i.length && /textarea/i.test(i[0].nodeName),
                                o = s && e.ui.hasScroll(i[0], "left") ? 0 : n.sizeDiff.height,
                                u = s ? 0 : n.sizeDiff.width,
                                a = {
                                    width: n.size.width - u,
                                    height: n.size.height - o
                                },
                                f = parseInt(n.element.css("left"), 10) + (n.position.left - n.originalPosition.left) || null,
                                l = parseInt(n.element.css("top"), 10) + (n.position.top - n.originalPosition.top) || null;
                            n.element.animate(e.extend(a, l && f ? {
                                top: l,
                                left: f
                            } : {}), {
                                duration: r.animateDuration,
                                easing: r.animateEasing,
                                step: function() {
                                    var r = {
                                        width: parseInt(n.element.css("width"), 10),
                                        height: parseInt(n.element.css("height"), 10),
                                        top: parseInt(n.element.css("top"), 10),
                                        left: parseInt(n.element.css("left"), 10)
                                    };
                                    i && i.length && e(i[0]).css({
                                        width: r.width,
                                        height: r.height
                                    }), n._updateCache(r), n._propagate("resize", t)
                                }
                            })
                        }
                    }), e.ui.plugin.add("resizable", "containment", {
                        start: function() {
                            var t, r, i, s, o, u, a, f = e(this).data("ui-resizable"),
                                l = f.options,
                                c = f.element,
                                h = l.containment,
                                p = h instanceof e ? h.get(0) : /parent/.test(h) ? c.parent().get(0) : h;
                            if (!p) return;
                            f.containerElement = e(p), /document/.test(h) || h === document ? (f.containerOffset = {
                                left: 0,
                                top: 0
                            }, f.containerPosition = {
                                left: 0,
                                top: 0
                            }, f.parentData = {
                                element: e(document),
                                left: 0,
                                top: 0,
                                width: e(document).width(),
                                height: e(document).height() || document.body.parentNode.scrollHeight
                            }) : (t = e(p), r = [], e(["Top", "Right", "Left", "Bottom"]).each(function(e, i) {
                                r[e] = n(t.css("padding" + i))
                            }), f.containerOffset = t.offset(), f.containerPosition = t.position(), f.containerSize = {
                                height: t.innerHeight() - r[3],
                                width: t.innerWidth() - r[1]
                            }, i = f.containerOffset, s = f.containerSize.height, o = f.containerSize.width, u = e.ui.hasScroll(p, "left") ? p.scrollWidth : o, a = e.ui.hasScroll(p) ? p.scrollHeight : s, f.parentData = {
                                element: p,
                                left: i.left,
                                top: i.top,
                                width: u,
                                height: a
                            })
                        },
                        resize: function(t) {
                            var n, r, i, s, o = e(this).data("ui-resizable"),
                                u = o.options,
                                a = o.containerOffset,
                                f = o.position,
                                l = o._aspectRatio || t.shiftKey,
                                c = {
                                    top: 0,
                                    left: 0
                                },
                                h = o.containerElement;
                            h[0] !== document && /static/.test(h.css("position")) && (c = a), f.left < (o._helper ? a.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - a.left : o.position.left - c.left), l && (o.size.height = o.size.width / o.aspectRatio), o.position.left = u.helper ? a.left : 0), f.top < (o._helper ? a.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - a.top : o.position.top), l && (o.size.width = o.size.height * o.aspectRatio), o.position.top = o._helper ? a.top : 0), o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top, n = Math.abs((o._helper ? o.offset.left - c.left : o.offset.left - c.left) + o.sizeDiff.width), r = Math.abs((o._helper ? o.offset.top - c.top : o.offset.top - a.top) + o.sizeDiff.height), i = o.containerElement.get(0) === o.element.parent().get(0), s = /relative|absolute/.test(o.containerElement.css("position")), i && s && (n -= Math.abs(o.parentData.left)), n + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - n, l && (o.size.height = o.size.width / o.aspectRatio)), r + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - r, l && (o.size.width = o.size.height * o.aspectRatio))
                        },
                        stop: function() {
                            var t = e(this).data("ui-resizable"),
                                n = t.options,
                                r = t.containerOffset,
                                i = t.containerPosition,
                                s = t.containerElement,
                                o = e(t.helper),
                                u = o.offset(),
                                a = o.outerWidth() - t.sizeDiff.width,
                                f = o.outerHeight() - t.sizeDiff.height;
                            t._helper && !n.animate && /relative/.test(s.css("position")) && e(this).css({
                                left: u.left - i.left - r.left,
                                width: a,
                                height: f
                            }), t._helper && !n.animate && /static/.test(s.css("position")) && e(this).css({
                                left: u.left - i.left - r.left,
                                width: a,
                                height: f
                            })
                        }
                    }), e.ui.plugin.add("resizable", "alsoResize", {
                        start: function() {
                            var t = e(this).data("ui-resizable"),
                                n = t.options,
                                r = function(t) {
                                    e(t).each(function() {
                                        var t = e(this);
                                        t.data("ui-resizable-alsoresize", {
                                            width: parseInt(t.width(), 10),
                                            height: parseInt(t.height(), 10),
                                            left: parseInt(t.css("left"), 10),
                                            top: parseInt(t.css("top"), 10)
                                        })
                                    })
                                };
                            typeof n.alsoResize == "object" && !n.alsoResize.parentNode ? n.alsoResize.length ? (n.alsoResize = n.alsoResize[0], r(n.alsoResize)) : e.each(n.alsoResize, function(e) {
                                r(e)
                            }) : r(n.alsoResize)
                        },
                        resize: function(t, n) {
                            var r = e(this).data("ui-resizable"),
                                i = r.options,
                                s = r.originalSize,
                                o = r.originalPosition,
                                u = {
                                    height: r.size.height - s.height || 0,
                                    width: r.size.width - s.width || 0,
                                    top: r.position.top - o.top || 0,
                                    left: r.position.left - o.left || 0
                                },
                                a = function(t, r) {
                                    e(t).each(function() {
                                        var t = e(this),
                                            i = e(this).data("ui-resizable-alsoresize"),
                                            s = {},
                                            o = r && r.length ? r : t.parents(n.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                                        e.each(o, function(e, t) {
                                            var n = (i[t] || 0) + (u[t] || 0);
                                            n && n >= 0 && (s[t] = n || null)
                                        }), t.css(s)
                                    })
                                };
                            typeof i.alsoResize == "object" && !i.alsoResize.nodeType ? e.each(i.alsoResize, function(e, t) {
                                a(e, t)
                            }) : a(i.alsoResize)
                        },
                        stop: function() {
                            e(this).removeData("resizable-alsoresize")
                        }
                    }), e.ui.plugin.add("resizable", "ghost", {
                        start: function() {
                            var t = e(this).data("ui-resizable"),
                                n = t.options,
                                r = t.size;
                            t.ghost = t.originalElement.clone(), t.ghost.css({
                                opacity: .25,
                                display: "block",
                                position: "relative",
                                height: r.height,
                                width: r.width,
                                margin: 0,
                                left: 0,
                                top: 0
                            }).addClass("ui-resizable-ghost").addClass(typeof n.ghost == "string" ? n.ghost : ""), t.ghost.appendTo(t.helper)
                        },
                        resize: function() {
                            var t = e(this).data("ui-resizable");
                            t.ghost && t.ghost.css({
                                position: "relative",
                                height: t.size.height,
                                width: t.size.width
                            })
                        },
                        stop: function() {
                            var t = e(this).data("ui-resizable");
                            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
                        }
                    }), e.ui.plugin.add("resizable", "grid", {
                        resize: function() {
                            var t = e(this).data("ui-resizable"),
                                n = t.options,
                                r = t.size,
                                i = t.originalSize,
                                s = t.originalPosition,
                                o = t.axis,
                                u = typeof n.grid == "number" ? [n.grid, n.grid] : n.grid,
                                a = u[0] || 1,
                                f = u[1] || 1,
                                l = Math.round((r.width - i.width) / a) * a,
                                c = Math.round((r.height - i.height) / f) * f,
                                h = i.width + l,
                                p = i.height + c,
                                d = n.maxWidth && n.maxWidth < h,
                                v = n.maxHeight && n.maxHeight < p,
                                m = n.minWidth && n.minWidth > h,
                                g = n.minHeight && n.minHeight > p;
                            n.grid = u, m && (h += a), g && (p += f), d && (h -= a), v && (p -= f), /^(se|s|e)$/.test(o) ? (t.size.width = h, t.size.height = p) : /^(ne)$/.test(o) ? (t.size.width = h, t.size.height = p, t.position.top = s.top - c) : /^(sw)$/.test(o) ? (t.size.width = h, t.size.height = p, t.position.left = s.left - l) : (p - f > 0 ? (t.size.height = p, t.position.top = s.top - c) : (t.size.height = f, t.position.top = s.top + i.height - f), h - a > 0 ? (t.size.width = h, t.position.left = s.left - l) : (t.size.width = a, t.position.left = s.left + i.width - a))
                        }
                    })
                }(jQuery),
                function(e, t) {
                    e.widget("ui.selectable", e.ui.mouse, {
                        version: "1.10.4",
                        options: {
                            appendTo: "body",
                            autoRefresh: !0,
                            distance: 0,
                            filter: "*",
                            tolerance: "touch",
                            selected: null,
                            selecting: null,
                            start: null,
                            stop: null,
                            unselected: null,
                            unselecting: null
                        },
                        _create: function() {
                            var t, n = this;
                            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                                t = e(n.options.filter, n.element[0]), t.addClass("ui-selectee"), t.each(function() {
                                    var t = e(this),
                                        n = t.offset();
                                    e.data(this, "selectable-item", {
                                        element: this,
                                        $element: t,
                                        left: n.left,
                                        top: n.top,
                                        right: n.left + t.outerWidth(),
                                        bottom: n.top + t.outerHeight(),
                                        startselected: !1,
                                        selected: t.hasClass("ui-selected"),
                                        selecting: t.hasClass("ui-selecting"),
                                        unselecting: t.hasClass("ui-unselecting")
                                    })
                                })
                            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), this.helper = e("<div class='ui-selectable-helper'></div>")
                        },
                        _destroy: function() {
                            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy()
                        },
                        _mouseStart: function(t) {
                            var n = this,
                                r = this.options;
                            this.opos = [t.pageX, t.pageY];
                            if (this.options.disabled) return;
                            this.selectees = e(r.filter, this.element[0]), this._trigger("start", t), e(r.appendTo).append(this.helper), this.helper.css({
                                left: t.pageX,
                                top: t.pageY,
                                width: 0,
                                height: 0
                            }), r.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                                var r = e.data(this, "selectable-item");
                                r.startselected = !0, !t.metaKey && !t.ctrlKey && (r.$element.removeClass("ui-selected"), r.selected = !1, r.$element.addClass("ui-unselecting"), r.unselecting = !0, n._trigger("unselecting", t, {
                                    unselecting: r.element
                                }))
                            }), e(t.target).parents().addBack().each(function() {
                                var r, i = e.data(this, "selectable-item");
                                if (i) return r = !t.metaKey && !t.ctrlKey || !i.$element.hasClass("ui-selected"), i.$element.removeClass(r ? "ui-unselecting" : "ui-selected").addClass(r ? "ui-selecting" : "ui-unselecting"), i.unselecting = !r, i.selecting = r, i.selected = r, r ? n._trigger("selecting", t, {
                                    selecting: i.element
                                }) : n._trigger("unselecting", t, {
                                    unselecting: i.element
                                }), !1
                            })
                        },
                        _mouseDrag: function(t) {
                            this.dragged = !0;
                            if (this.options.disabled) return;
                            var n, r = this,
                                i = this.options,
                                s = this.opos[0],
                                o = this.opos[1],
                                u = t.pageX,
                                a = t.pageY;
                            return s > u && (n = u, u = s, s = n), o > a && (n = a, a = o, o = n), this.helper.css({
                                left: s,
                                top: o,
                                width: u - s,
                                height: a - o
                            }), this.selectees.each(function() {
                                var n = e.data(this, "selectable-item"),
                                    f = !1;
                                if (!n || n.element === r.element[0]) return;
                                i.tolerance === "touch" ? f = !(n.left > u || n.right < s || n.top > a || n.bottom < o) : i.tolerance === "fit" && (f = n.left > s && n.right < u && n.top > o && n.bottom < a), f ? (n.selected && (n.$element.removeClass("ui-selected"), n.selected = !1), n.unselecting && (n.$element.removeClass("ui-unselecting"), n.unselecting = !1), n.selecting || (n.$element.addClass("ui-selecting"), n.selecting = !0, r._trigger("selecting", t, {
                                    selecting: n.element
                                }))) : (n.selecting && ((t.metaKey || t.ctrlKey) && n.startselected ? (n.$element.removeClass("ui-selecting"), n.selecting = !1, n.$element.addClass("ui-selected"), n.selected = !0) : (n.$element.removeClass("ui-selecting"), n.selecting = !1, n.startselected && (n.$element.addClass("ui-unselecting"), n.unselecting = !0), r._trigger("unselecting", t, {
                                    unselecting: n.element
                                }))), n.selected && !t.metaKey && !t.ctrlKey && !n.startselected && (n.$element.removeClass("ui-selected"), n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, r._trigger("unselecting", t, {
                                    unselecting: n.element
                                })))
                            }), !1
                        },
                        _mouseStop: function(t) {
                            var n = this;
                            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function() {
                                var r = e.data(this, "selectable-item");
                                r.$element.removeClass("ui-unselecting"), r.unselecting = !1, r.startselected = !1, n._trigger("unselected", t, {
                                    unselected: r.element
                                })
                            }), e(".ui-selecting", this.element[0]).each(function() {
                                var r = e.data(this, "selectable-item");
                                r.$element.removeClass("ui-selecting").addClass("ui-selected"), r.selecting = !1, r.selected = !0, r.startselected = !0, n._trigger("selected", t, {
                                    selected: r.element
                                })
                            }), this._trigger("stop", t), this.helper.remove(), !1
                        }
                    })
                }(jQuery),
                function(e, t) {
                    var n = 5;
                    e.widget("ui.slider", e.ui.mouse, {
                        version: "1.10.4",
                        widgetEventPrefix: "slide",
                        options: {
                            animate: !1,
                            distance: 0,
                            max: 100,
                            min: 0,
                            orientation: "horizontal",
                            range: !1,
                            step: 1,
                            value: 0,
                            values: null,
                            change: null,
                            slide: null,
                            start: null,
                            stop: null
                        },
                        _create: function() {
                            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
                        },
                        _refresh: function() {
                            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
                        },
                        _createHandles: function() {
                            var t, n, r = this.options,
                                i = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                                s = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
                                o = [];
                            n = r.values && r.values.length || 1, i.length > n && (i.slice(n).remove(), i = i.slice(0, n));
                            for (t = i.length; t < n; t++) o.push(s);
                            this.handles = i.add(e(o.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function(t) {
                                e(this).data("ui-slider-handle-index", t)
                            })
                        },
                        _createRange: function() {
                            var t = this.options,
                                n = "";
                            t.range ? (t.range === !0 && (t.values ? t.values.length && t.values.length !== 2 ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), !this.range || !this.range.length ? (this.range = e("<div></div>").appendTo(this.element), n = "ui-slider-range ui-widget-header ui-corner-all") : this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                                left: "",
                                bottom: ""
                            }), this.range.addClass(n + (t.range === "min" || t.range === "max" ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), this.range = null)
                        },
                        _setupEvents: function() {
                            var e = this.handles.add(this.range).filter("a");
                            this._off(e), this._on(e, this._handleEvents), this._hoverable(e), this._focusable(e)
                        },
                        _destroy: function() {
                            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
                        },
                        _mouseCapture: function(t) {
                            var n, r, i, s, o, u, a, f, l = this,
                                c = this.options;
                            return c.disabled ? !1 : (this.elementSize = {
                                width: this.element.outerWidth(),
                                height: this.element.outerHeight()
                            }, this.elementOffset = this.element.offset(), n = {
                                x: t.pageX,
                                y: t.pageY
                            }, r = this._normValueFromMouse(n), i = this._valueMax() - this._valueMin() + 1, this.handles.each(function(t) {
                                var n = Math.abs(r - l.values(t));
                                if (i > n || i === n && (t === l._lastChangedValue || l.values(t) === c.min)) i = n, s = e(this), o = t
                            }), u = this._start(t, o), u === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = o, s.addClass("ui-state-active").focus(), a = s.offset(), f = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = f ? {
                                left: 0,
                                top: 0
                            } : {
                                left: t.pageX - a.left - s.width() / 2,
                                top: t.pageY - a.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0)
                            }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, r), this._animateOff = !0, !0))
                        },
                        _mouseStart: function() {
                            return !0
                        },
                        _mouseDrag: function(e) {
                            var t = {
                                    x: e.pageX,
                                    y: e.pageY
                                },
                                n = this._normValueFromMouse(t);
                            return this._slide(e, this._handleIndex, n), !1
                        },
                        _mouseStop: function(e) {
                            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
                        },
                        _detectOrientation: function() {
                            this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal"
                        },
                        _normValueFromMouse: function(e) {
                            var t, n, r, i, s;
                            return this.orientation === "horizontal" ? (t = this.elementSize.width, n = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, n = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), r = n / t, r > 1 && (r = 1), r < 0 && (r = 0), this.orientation === "vertical" && (r = 1 - r), i = this._valueMax() - this._valueMin(), s = this._valueMin() + r * i, this._trimAlignValue(s)
                        },
                        _start: function(e, t) {
                            var n = {
                                handle: this.handles[t],
                                value: this.value()
                            };
                            return this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._trigger("start", e, n)
                        },
                        _slide: function(e, t, n) {
                            var r, i, s;
                            this.options.values && this.options.values.length ? (r = this.values(t ? 0 : 1), this.options.values.length === 2 && this.options.range === !0 && (t === 0 && n > r || t === 1 && n < r) && (n = r), n !== this.values(t) && (i = this.values(), i[t] = n, s = this._trigger("slide", e, {
                                handle: this.handles[t],
                                value: n,
                                values: i
                            }), r = this.values(t ? 0 : 1), s !== !1 && this.values(t, n))) : n !== this.value() && (s = this._trigger("slide", e, {
                                handle: this.handles[t],
                                value: n
                            }), s !== !1 && this.value(n))
                        },
                        _stop: function(e, t) {
                            var n = {
                                handle: this.handles[t],
                                value: this.value()
                            };
                            this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._trigger("stop", e, n)
                        },
                        _change: function(e, t) {
                            if (!this._keySliding && !this._mouseSliding) {
                                var n = {
                                    handle: this.handles[t],
                                    value: this.value()
                                };
                                this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, n)
                            }
                        },
                        value: function(e) {
                            if (arguments.length) {
                                this.options.value = this._trimAlignValue(e), this._refreshValue(), this._change(null, 0);
                                return
                            }
                            return this._value()
                        },
                        values: function(t, n) {
                            var r, i, s;
                            if (arguments.length > 1) {
                                this.options.values[t] = this._trimAlignValue(n), this._refreshValue(), this._change(null, t);
                                return
                            }
                            if (!arguments.length) return this._values();
                            if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value();
                            r = this.options.values, i = arguments[0];
                            for (s = 0; s < r.length; s += 1) r[s] = this._trimAlignValue(i[s]), this._change(null, s);
                            this._refreshValue()
                        },
                        _setOption: function(t, n) {
                            var r, i = 0;
                            t === "range" && this.options.range === !0 && (n === "min" ? (this.options.value = this._values(0), this.options.values = null) : n === "max" && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (i = this.options.values.length), e.Widget.prototype._setOption.apply(this, arguments);
                            switch (t) {
                                case "orientation":
                                    this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue();
                                    break;
                                case "value":
                                    this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                                    break;
                                case "values":
                                    this._animateOff = !0, this._refreshValue();
                                    for (r = 0; r < i; r += 1) this._change(null, r);
                                    this._animateOff = !1;
                                    break;
                                case "min":
                                case "max":
                                    this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
                                    break;
                                case "range":
                                    this._animateOff = !0, this._refresh(), this._animateOff = !1
                            }
                        },
                        _value: function() {
                            var e = this.options.value;
                            return e = this._trimAlignValue(e), e
                        },
                        _values: function(e) {
                            var t, n, r;
                            if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t), t;
                            if (this.options.values && this.options.values.length) {
                                n = this.options.values.slice();
                                for (r = 0; r < n.length; r += 1) n[r] = this._trimAlignValue(n[r]);
                                return n
                            }
                            return []
                        },
                        _trimAlignValue: function(e) {
                            if (e <= this._valueMin()) return this._valueMin();
                            if (e >= this._valueMax()) return this._valueMax();
                            var t = this.options.step > 0 ? this.options.step : 1,
                                n = (e - this._valueMin()) % t,
                                r = e - n;
                            return Math.abs(n) * 2 >= t && (r += n > 0 ? t : -t), parseFloat(r.toFixed(5))
                        },
                        _valueMin: function() {
                            return this.options.min
                        },
                        _valueMax: function() {
                            return this.options.max
                        },
                        _refreshValue: function() {
                            var t, n, r, i, s, o = this.options.range,
                                u = this.options,
                                a = this,
                                f = this._animateOff ? !1 : u.animate,
                                l = {};
                            this.options.values && this.options.values.length ? this.handles.each(function(r) {
                                n = (a.values(r) - a._valueMin()) / (a._valueMax() - a._valueMin()) * 100, l[a.orientation === "horizontal" ? "left" : "bottom"] = n + "%", e(this).stop(1, 1)[f ? "animate" : "css"](l, u.animate), a.options.range === !0 && (a.orientation === "horizontal" ? (r === 0 && a.range.stop(1, 1)[f ? "animate" : "css"]({
                                    left: n + "%"
                                }, u.animate), r === 1 && a.range[f ? "animate" : "css"]({
                                    width: n - t + "%"
                                }, {
                                    queue: !1,
                                    duration: u.animate
                                })) : (r === 0 && a.range.stop(1, 1)[f ? "animate" : "css"]({
                                    bottom: n + "%"
                                }, u.animate), r === 1 && a.range[f ? "animate" : "css"]({
                                    height: n - t + "%"
                                }, {
                                    queue: !1,
                                    duration: u.animate
                                }))), t = n
                            }) : (r = this.value(), i = this._valueMin(), s = this._valueMax(), n = s !== i ? (r - i) / (s - i) * 100 : 0, l[this.orientation === "horizontal" ? "left" : "bottom"] = n + "%", this.handle.stop(1, 1)[f ? "animate" : "css"](l, u.animate), o === "min" && this.orientation === "horizontal" && this.range.stop(1, 1)[f ? "animate" : "css"]({
                                width: n + "%"
                            }, u.animate), o === "max" && this.orientation === "horizontal" && this.range[f ? "animate" : "css"]({
                                width: 100 - n + "%"
                            }, {
                                queue: !1,
                                duration: u.animate
                            }), o === "min" && this.orientation === "vertical" && this.range.stop(1, 1)[f ? "animate" : "css"]({
                                height: n + "%"
                            }, u.animate), o === "max" && this.orientation === "vertical" && this.range[f ? "animate" : "css"]({
                                height: 100 - n + "%"
                            }, {
                                queue: !1,
                                duration: u.animate
                            }))
                        },
                        _handleEvents: {
                            keydown: function(t) {
                                var r, i, s, o, u = e(t.target).data("ui-slider-handle-index");
                                switch (t.keyCode) {
                                    case e.ui.keyCode.HOME:
                                    case e.ui.keyCode.END:
                                    case e.ui.keyCode.PAGE_UP:
                                    case e.ui.keyCode.PAGE_DOWN:
                                    case e.ui.keyCode.UP:
                                    case e.ui.keyCode.RIGHT:
                                    case e.ui.keyCode.DOWN:
                                    case e.ui.keyCode.LEFT:
                                        t.preventDefault();
                                        if (!this._keySliding) {
                                            this._keySliding = !0, e(t.target).addClass("ui-state-active"), r = this._start(t, u);
                                            if (r === !1) return
                                        }
                                }
                                o = this.options.step, this.options.values && this.options.values.length ? i = s = this.values(u) : i = s = this.value();
                                switch (t.keyCode) {
                                    case e.ui.keyCode.HOME:
                                        s = this._valueMin();
                                        break;
                                    case e.ui.keyCode.END:
                                        s = this._valueMax();
                                        break;
                                    case e.ui.keyCode.PAGE_UP:
                                        s = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / n);
                                        break;
                                    case e.ui.keyCode.PAGE_DOWN:
                                        s = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / n);
                                        break;
                                    case e.ui.keyCode.UP:
                                    case e.ui.keyCode.RIGHT:
                                        if (i === this._valueMax()) return;
                                        s = this._trimAlignValue(i + o);
                                        break;
                                    case e.ui.keyCode.DOWN:
                                    case e.ui.keyCode.LEFT:
                                        if (i === this._valueMin()) return;
                                        s = this._trimAlignValue(i - o)
                                }
                                this._slide(t, u, s)
                            },
                            click: function(e) {
                                e.preventDefault()
                            },
                            keyup: function(t) {
                                var n = e(t.target).data("ui-slider-handle-index");
                                this._keySliding && (this._keySliding = !1, this._stop(t, n), this._change(t, n), e(t.target).removeClass("ui-state-active"))
                            }
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function n(e, t, n) {
                        return e > t && e < t + n
                    }

                    function r(e) {
                        return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
                    }
                    e.widget("ui.sortable", e.ui.mouse, {
                        version: "1.10.4",
                        widgetEventPrefix: "sort",
                        ready: !1,
                        options: {
                            appendTo: "parent",
                            axis: !1,
                            connectWith: !1,
                            containment: !1,
                            cursor: "auto",
                            cursorAt: !1,
                            dropOnEmpty: !0,
                            forcePlaceholderSize: !1,
                            forceHelperSize: !1,
                            grid: !1,
                            handle: !1,
                            helper: "original",
                            items: "> *",
                            opacity: !1,
                            placeholder: !1,
                            revert: !1,
                            scroll: !0,
                            scrollSensitivity: 20,
                            scrollSpeed: 20,
                            scope: "default",
                            tolerance: "intersect",
                            zIndex: 1e3,
                            activate: null,
                            beforeStop: null,
                            change: null,
                            deactivate: null,
                            out: null,
                            over: null,
                            receive: null,
                            remove: null,
                            sort: null,
                            start: null,
                            stop: null,
                            update: null
                        },
                        _create: function() {
                            var e = this.options;
                            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? e.axis === "x" || r(this.items[0].item) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
                            for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
                            return this
                        },
                        _setOption: function(t, n) {
                            t === "disabled" ? (this.options[t] = n, this.widget().toggleClass("ui-sortable-disabled", !!n)) : e.Widget.prototype._setOption.apply(this, arguments)
                        },
                        _mouseCapture: function(t, n) {
                            var r = null,
                                i = !1,
                                s = this;
                            if (this.reverting) return !1;
                            if (this.options.disabled || this.options.type === "static") return !1;
                            this._refreshItems(t), e(t.target).parents().each(function() {
                                if (e.data(this, s.widgetName + "-item") === s) return r = e(this), !1
                            }), e.data(t.target, s.widgetName + "-item") === s && (r = e(t.target));
                            if (!r) return !1;
                            if (this.options.handle && !n) {
                                e(this.options.handle, r).find("*").addBack().each(function() {
                                    this === t.target && (i = !0)
                                });
                                if (!i) return !1
                            }
                            return this.currentItem = r, this._removeCurrentsFromItems(), !0
                        },
                        _mouseStart: function(t, n, r) {
                            var i, s, o = this.options;
                            this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                                top: this.offset.top - this.margins.top,
                                left: this.offset.left - this.margins.left
                            }, e.extend(this.offset, {
                                click: {
                                    left: t.pageX - this.offset.left,
                                    top: t.pageY - this.offset.top
                                },
                                parent: this._getParentOffset(),
                                relative: this._getRelativeOffset()
                            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), this.domPosition = {
                                prev: this.currentItem.prev()[0],
                                parent: this.currentItem.parent()[0]
                            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), o.containment && this._setContainment(), o.cursor && o.cursor !== "auto" && (s = this.document.find("body"), this.storedCursor = s.css("cursor"), s.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(s)), o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML" && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions();
                            if (!r)
                                for (i = this.containers.length - 1; i >= 0; i--) this.containers[i]._trigger("activate", t, this._uiHash(this));
                            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
                        },
                        _mouseDrag: function(t) {
                            var n, r, i, s, o = this.options,
                                u = !1;
                            this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = u = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = u = this.scrollParent[0].scrollTop - o.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = u = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = u = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - e(document).scrollTop() < o.scrollSensitivity ? u = e(document).scrollTop(e(document).scrollTop() - o.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < o.scrollSensitivity && (u = e(document).scrollTop(e(document).scrollTop() + o.scrollSpeed)), t.pageX - e(document).scrollLeft() < o.scrollSensitivity ? u = e(document).scrollLeft(e(document).scrollLeft() - o.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < o.scrollSensitivity && (u = e(document).scrollLeft(e(document).scrollLeft() + o.scrollSpeed))), u !== !1 && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute");
                            if (!this.options.axis || this.options.axis !== "y") this.helper[0].style.left = this.position.left + "px";
                            if (!this.options.axis || this.options.axis !== "x") this.helper[0].style.top = this.position.top + "px";
                            for (n = this.items.length - 1; n >= 0; n--) {
                                r = this.items[n], i = r.item[0], s = this._intersectsWithPointer(r);
                                if (!s) continue;
                                if (r.instance !== this.currentContainer) continue;
                                if (i !== this.currentItem[0] && this.placeholder[s === 1 ? "next" : "prev"]()[0] !== i && !e.contains(this.placeholder[0], i) && (this.options.type === "semi-dynamic" ? !e.contains(this.element[0], i) : !0)) {
                                    this.direction = s === 1 ? "down" : "up";
                                    if (this.options.tolerance !== "pointer" && !this._intersectsWithSides(r)) break;
                                    this._rearrange(t, r), this._trigger("change", t, this._uiHash());
                                    break
                                }
                            }
                            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
                        },
                        _mouseStop: function(t, n) {
                            if (!t) return;
                            e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t);
                            if (this.options.revert) {
                                var r = this,
                                    i = this.placeholder.offset(),
                                    s = this.options.axis,
                                    o = {};
                                if (!s || s === "x") o.left = i.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);
                                if (!s || s === "y") o.top = i.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);
                                this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, function() {
                                    r._clear(t)
                                })
                            } else this._clear(t, n);
                            return !1
                        },
                        cancel: function() {
                            if (this.dragging) {
                                this._mouseUp({
                                    target: null
                                }), this.options.helper === "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                                for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
                            }
                            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.options.helper !== "original" && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                                helper: null,
                                dragging: !1,
                                reverting: !1,
                                _noFinalSort: null
                            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
                        },
                        serialize: function(t) {
                            var n = this._getItemsAsjQuery(t && t.connected),
                                r = [];
                            return t = t || {}, e(n).each(function() {
                                var n = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                                n && r.push((t.key || n[1] + "[]") + "=" + (t.key && t.expression ? n[1] : n[2]))
                            }), !r.length && t.key && r.push(t.key + "="), r.join("&")
                        },
                        toArray: function(t) {
                            var n = this._getItemsAsjQuery(t && t.connected),
                                r = [];
                            return t = t || {}, n.each(function() {
                                r.push(e(t.item || this).attr(t.attribute || "id") || "")
                            }), r
                        },
                        _intersectsWith: function(e) {
                            var t = this.positionAbs.left,
                                n = t + this.helperProportions.width,
                                r = this.positionAbs.top,
                                i = r + this.helperProportions.height,
                                s = e.left,
                                o = s + e.width,
                                u = e.top,
                                a = u + e.height,
                                f = this.offset.click.top,
                                l = this.offset.click.left,
                                c = this.options.axis === "x" || r + f > u && r + f < a,
                                h = this.options.axis === "y" || t + l > s && t + l < o,
                                p = c && h;
                            return this.options.tolerance === "pointer" || this.options.forcePointerForContainers || this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? p : s < t + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < o && u < r + this.helperProportions.height / 2 && i - this.helperProportions.height / 2 < a
                        },
                        _intersectsWithPointer: function(e) {
                            var t = this.options.axis === "x" || n(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                                r = this.options.axis === "y" || n(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                                i = t && r,
                                s = this._getDragVerticalDirection(),
                                o = this._getDragHorizontalDirection();
                            return i ? this.floating ? o && o === "right" || s === "down" ? 2 : 1 : s && (s === "down" ? 2 : 1) : !1
                        },
                        _intersectsWithSides: function(e) {
                            var t = n(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                                r = n(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                                i = this._getDragVerticalDirection(),
                                s = this._getDragHorizontalDirection();
                            return this.floating && s ? s === "right" && r || s === "left" && !r : i && (i === "down" && t || i === "up" && !t)
                        },
                        _getDragVerticalDirection: function() {
                            var e = this.positionAbs.top - this.lastPositionAbs.top;
                            return e !== 0 && (e > 0 ? "down" : "up")
                        },
                        _getDragHorizontalDirection: function() {
                            var e = this.positionAbs.left - this.lastPositionAbs.left;
                            return e !== 0 && (e > 0 ? "right" : "left")
                        },
                        refresh: function(e) {
                            return this._refreshItems(e), this.refreshPositions(), this
                        },
                        _connectWith: function() {
                            var e = this.options;
                            return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
                        },
                        _getItemsAsjQuery: function(t) {
                            function f() {
                                o.push(this)
                            }
                            var n, r, i, s, o = [],
                                u = [],
                                a = this._connectWith();
                            if (a && t)
                                for (n = a.length - 1; n >= 0; n--) {
                                    i = e(a[n]);
                                    for (r = i.length - 1; r >= 0; r--) s = e.data(i[r], this.widgetFullName), s && s !== this && !s.options.disabled && u.push([e.isFunction(s.options.items) ? s.options.items.call(s.element) : e(s.options.items, s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), s])
                                }
                            u.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                                options: this.options,
                                item: this.currentItem
                            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                            for (n = u.length - 1; n >= 0; n--) u[n][0].each(f);
                            return e(o)
                        },
                        _removeCurrentsFromItems: function() {
                            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
                            this.items = e.grep(this.items, function(e) {
                                for (var n = 0; n < t.length; n++)
                                    if (t[n] === e.item[0]) return !1;
                                return !0
                            })
                        },
                        _refreshItems: function(t) {
                            this.items = [], this.containers = [this];
                            var n, r, i, s, o, u, a, f, l = this.items,
                                c = [
                                    [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                                        item: this.currentItem
                                    }) : e(this.options.items, this.element), this]
                                ],
                                h = this._connectWith();
                            if (h && this.ready)
                                for (n = h.length - 1; n >= 0; n--) {
                                    i = e(h[n]);
                                    for (r = i.length - 1; r >= 0; r--) s = e.data(i[r], this.widgetFullName), s && s !== this && !s.options.disabled && (c.push([e.isFunction(s.options.items) ? s.options.items.call(s.element[0], t, {
                                        item: this.currentItem
                                    }) : e(s.options.items, s.element), s]), this.containers.push(s))
                                }
                            for (n = c.length - 1; n >= 0; n--) {
                                o = c[n][1], u = c[n][0];
                                for (r = 0, f = u.length; r < f; r++) a = e(u[r]), a.data(this.widgetName + "-item", o), l.push({
                                    item: a,
                                    instance: o,
                                    width: 0,
                                    height: 0,
                                    left: 0,
                                    top: 0
                                })
                            }
                        },
                        refreshPositions: function(t) {
                            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                            var n, r, i, s;
                            for (n = this.items.length - 1; n >= 0; n--) {
                                r = this.items[n];
                                if (r.instance !== this.currentContainer && this.currentContainer && r.item[0] !== this.currentItem[0]) continue;
                                i = this.options.toleranceElement ? e(this.options.toleranceElement, r.item) : r.item, t || (r.width = i.outerWidth(), r.height = i.outerHeight()), s = i.offset(), r.left = s.left, r.top = s.top
                            }
                            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                            else
                                for (n = this.containers.length - 1; n >= 0; n--) s = this.containers[n].element.offset(), this.containers[n].containerCache.left = s.left, this.containers[n].containerCache.top = s.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight();
                            return this
                        },
                        _createPlaceholder: function(t) {
                            t = t || this;
                            var n, r = t.options;
                            if (!r.placeholder || r.placeholder.constructor === String) n = r.placeholder, r.placeholder = {
                                element: function() {
                                    var r = t.currentItem[0].nodeName.toLowerCase(),
                                        i = e("<" + r + ">", t.document[0]).addClass(n || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                                    return r === "tr" ? t.currentItem.children().each(function() {
                                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(i)
                                    }) : r === "img" && i.attr("src", t.currentItem.attr("src")), n || i.css("visibility", "hidden"), i
                                },
                                update: function(e, i) {
                                    if (n && !r.forcePlaceholderSize) return;
                                    i.height() || i.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), i.width() || i.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10))
                                }
                            };
                            t.placeholder = e(r.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), r.placeholder.update(t, t.placeholder)
                        },
                        _contactContainers: function(t) {
                            var i, s, o, u, a, f, l, c, h, p, d = null,
                                v = null;
                            for (i = this.containers.length - 1; i >= 0; i--) {
                                if (e.contains(this.currentItem[0], this.containers[i].element[0])) continue;
                                if (this._intersectsWith(this.containers[i].containerCache)) {
                                    if (d && e.contains(this.containers[i].element[0], d.element[0])) continue;
                                    d = this.containers[i], v = i
                                } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0)
                            }
                            if (!d) return;
                            if (this.containers.length === 1) this.containers[v].containerCache.over || (this.containers[v]._trigger("over", t, this._uiHash(this)), this.containers[v].containerCache.over = 1);
                            else {
                                o = 1e4, u = null, p = d.floating || r(this.currentItem), a = p ? "left" : "top", f = p ? "width" : "height", l = this.positionAbs[a] + this.offset.click[a];
                                for (s = this.items.length - 1; s >= 0; s--) {
                                    if (!e.contains(this.containers[v].element[0], this.items[s].item[0])) continue;
                                    if (this.items[s].item[0] === this.currentItem[0]) continue;
                                    if (p && !n(this.positionAbs.top + this.offset.click.top, this.items[s].top, this.items[s].height)) continue;
                                    c = this.items[s].item.offset()[a], h = !1, Math.abs(c - l) > Math.abs(c + this.items[s][f] - l) && (h = !0, c += this.items[s][f]), Math.abs(c - l) < o && (o = Math.abs(c - l), u = this.items[s], this.direction = h ? "up" : "down")
                                }
                                if (!u && !this.options.dropOnEmpty) return;
                                if (this.currentContainer === this.containers[v]) return;
                                u ? this._rearrange(t, u, null, !0) : this._rearrange(t, null, this.containers[v].element, !0), this._trigger("change", t, this._uiHash()), this.containers[v]._trigger("change", t, this._uiHash(this)), this.currentContainer = this.containers[v], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[v]._trigger("over", t, this._uiHash(this)), this.containers[v].containerCache.over = 1
                            }
                        },
                        _createHelper: function(t) {
                            var n = this.options,
                                r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t, this.currentItem])) : n.helper === "clone" ? this.currentItem.clone() : this.currentItem;
                            return r.parents("body").length || e(n.appendTo !== "parent" ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(r[0]), r[0] === this.currentItem[0] && (this._storedCSS = {
                                width: this.currentItem[0].style.width,
                                height: this.currentItem[0].style.height,
                                position: this.currentItem.css("position"),
                                top: this.currentItem.css("top"),
                                left: this.currentItem.css("left")
                            }), (!r[0].style.width || n.forceHelperSize) && r.width(this.currentItem.width()), (!r[0].style.height || n.forceHelperSize) && r.height(this.currentItem.height()), r
                        },
                        _adjustOffsetFromHelper: function(t) {
                            typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {
                                left: +t[0],
                                top: +t[1] || 0
                            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
                        },
                        _getParentOffset: function() {
                            this.offsetParent = this.helper.offsetParent();
                            var t = this.offsetParent.offset();
                            this.cssPosition === "absolute" && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
                            if (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && e.ui.ie) t = {
                                top: 0,
                                left: 0
                            };
                            return {
                                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                            }
                        },
                        _getRelativeOffset: function() {
                            if (this.cssPosition === "relative") {
                                var e = this.currentItem.position();
                                return {
                                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                                }
                            }
                            return {
                                top: 0,
                                left: 0
                            }
                        },
                        _cacheMargins: function() {
                            this.margins = {
                                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                            }
                        },
                        _cacheHelperProportions: function() {
                            this.helperProportions = {
                                width: this.helper.outerWidth(),
                                height: this.helper.outerHeight()
                            }
                        },
                        _setContainment: function() {
                            var t, n, r, i = this.options;
                            i.containment === "parent" && (i.containment = this.helper[0].parentNode);
                            if (i.containment === "document" || i.containment === "window") this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e(i.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (e(i.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                            /^(document|window|parent)$/.test(i.containment) || (t = e(i.containment)[0], n = e(i.containment).offset(), r = e(t).css("overflow") !== "hidden", this.containment = [n.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, n.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, n.left + (r ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, n.top + (r ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
                        },
                        _convertPositionTo: function(t, n) {
                            n || (n = this.position);
                            var r = t === "absolute" ? 1 : -1,
                                i = this.cssPosition !== "absolute" || this.scrollParent[0] !== document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                                s = /(html|body)/i.test(i[0].tagName);
                            return {
                                top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : s ? 0 : i.scrollTop()) * r,
                                left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : s ? 0 : i.scrollLeft()) * r
                            }
                        },
                        _generatePosition: function(t) {
                            var n, r, i = this.options,
                                s = t.pageX,
                                o = t.pageY,
                                u = this.cssPosition !== "absolute" || this.scrollParent[0] !== document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                                a = /(html|body)/i.test(u[0].tagName);
                            return this.cssPosition === "relative" && (this.scrollParent[0] === document || this.scrollParent[0] === this.offsetParent[0]) && (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), i.grid && (n = this.originalPageY + Math.round((o - this.originalPageY) / i.grid[1]) * i.grid[1], o = this.containment ? n - this.offset.click.top >= this.containment[1] && n - this.offset.click.top <= this.containment[3] ? n : n - this.offset.click.top >= this.containment[1] ? n - i.grid[1] : n + i.grid[1] : n, r = this.originalPageX + Math.round((s - this.originalPageX) / i.grid[0]) * i.grid[0], s = this.containment ? r - this.offset.click.left >= this.containment[0] && r - this.offset.click.left <= this.containment[2] ? r : r - this.offset.click.left >= this.containment[0] ? r - i.grid[0] : r + i.grid[0] : r)), {
                                top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : a ? 0 : u.scrollTop()),
                                left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : a ? 0 : u.scrollLeft())
                            }
                        },
                        _rearrange: function(e, t, n, r) {
                            n ? n[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction === "down" ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                            var i = this.counter;
                            this._delay(function() {
                                i === this.counter && this.refreshPositions(!r)
                            })
                        },
                        _clear: function(e, t) {
                            function i(e, t, n) {
                                return function(r) {
                                    n._trigger(e, r, t._uiHash(t))
                                }
                            }
                            this.reverting = !1;
                            var n, r = [];
                            !this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null;
                            if (this.helper[0] === this.currentItem[0]) {
                                for (n in this._storedCSS)
                                    if (this._storedCSS[n] === "auto" || this._storedCSS[n] === "static") this._storedCSS[n] = "";
                                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                            } else this.currentItem.show();
                            this.fromOutside && !t && r.push(function(e) {
                                this._trigger("receive", e, this._uiHash(this.fromOutside))
                            }), (this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !t && r.push(function(e) {
                                this._trigger("update", e, this._uiHash())
                            }), this !== this.currentContainer && (t || (r.push(function(e) {
                                this._trigger("remove", e, this._uiHash())
                            }), r.push(function(e) {
                                return function(t) {
                                    e._trigger("receive", t, this._uiHash(this))
                                }
                            }.call(this, this.currentContainer)), r.push(function(e) {
                                return function(t) {
                                    e._trigger("update", t, this._uiHash(this))
                                }
                            }.call(this, this.currentContainer))));
                            for (n = this.containers.length - 1; n >= 0; n--) t || r.push(i("deactivate", this, this.containers[n])), this.containers[n].containerCache.over && (r.push(i("out", this, this.containers[n])), this.containers[n].containerCache.over = 0);
                            this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex), this.dragging = !1;
                            if (this.cancelHelperRemoval) {
                                if (!t) {
                                    this._trigger("beforeStop", e, this._uiHash());
                                    for (n = 0; n < r.length; n++) r[n].call(this, e);
                                    this._trigger("stop", e, this._uiHash())
                                }
                                return this.fromOutside = !1, !1
                            }
                            t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null;
                            if (!t) {
                                for (n = 0; n < r.length; n++) r[n].call(this, e);
                                this._trigger("stop", e, this._uiHash())
                            }
                            return this.fromOutside = !1, !0
                        },
                        _trigger: function() {
                            e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
                        },
                        _uiHash: function(t) {
                            var n = t || this;
                            return {
                                helper: n.helper,
                                placeholder: n.placeholder || e([]),
                                position: n.position,
                                originalPosition: n.originalPosition,
                                offset: n.positionAbs,
                                item: n.currentItem,
                                sender: t ? t.element : null
                            }
                        }
                    })
                }(jQuery),
                function(e) {
                    function t(e) {
                        return function() {
                            var t = this.element.val();
                            e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change")
                        }
                    }
                    e.widget("ui.spinner", {
                        version: "1.10.4",
                        defaultElement: "<input>",
                        widgetEventPrefix: "spin",
                        options: {
                            culture: null,
                            icons: {
                                down: "ui-icon-triangle-1-s",
                                up: "ui-icon-triangle-1-n"
                            },
                            incremental: !0,
                            max: null,
                            min: null,
                            numberFormat: null,
                            page: 10,
                            step: 1,
                            change: null,
                            spin: null,
                            start: null,
                            stop: null
                        },
                        _create: function() {
                            this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), this.value() !== "" && this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                                beforeunload: function() {
                                    this.element.removeAttr("autocomplete")
                                }
                            })
                        },
                        _getCreateOptions: function() {
                            var t = {},
                                n = this.element;
                            return e.each(["min", "max", "step"], function(e, r) {
                                var i = n.attr(r);
                                i !== undefined && i.length && (t[r] = i)
                            }), t
                        },
                        _events: {
                            keydown: function(e) {
                                this._start(e) && this._keydown(e) && e.preventDefault()
                            },
                            keyup: "_stop",
                            focus: function() {
                                this.previous = this.element.val()
                            },
                            blur: function(e) {
                                if (this.cancelBlur) {
                                    delete this.cancelBlur;
                                    return
                                }
                                this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e)
                            },
                            mousewheel: function(e, t) {
                                if (!t) return;
                                if (!this.spinning && !this._start(e)) return !1;
                                this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay(function() {
                                    this.spinning && this._stop(e)
                                }, 100), e.preventDefault()
                            },
                            "mousedown .ui-spinner-button": function(t) {
                                function r() {
                                    var e = this.element[0] === this.document[0].activeElement;
                                    e || (this.element.focus(), this.previous = n, this._delay(function() {
                                        this.previous = n
                                    }))
                                }
                                var n;
                                n = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), t.preventDefault(), r.call(this), this.cancelBlur = !0, this._delay(function() {
                                    delete this.cancelBlur, r.call(this)
                                });
                                if (this._start(t) === !1) return;
                                this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
                            },
                            "mouseup .ui-spinner-button": "_stop",
                            "mouseenter .ui-spinner-button": function(t) {
                                if (!e(t.currentTarget).hasClass("ui-state-active")) return;
                                if (this._start(t) === !1) return !1;
                                this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
                            },
                            "mouseleave .ui-spinner-button": "_stop"
                        },
                        _draw: function() {
                            var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
                            this.element.attr("role", "spinbutton"), this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), this.buttons.height() > Math.ceil(e.height() * .5) && e.height() > 0 && e.height(e.height()), this.options.disabled && this.disable()
                        },
                        _keydown: function(t) {
                            var n = this.options,
                                r = e.ui.keyCode;
                            switch (t.keyCode) {
                                case r.UP:
                                    return this._repeat(null, 1, t), !0;
                                case r.DOWN:
                                    return this._repeat(null, -1, t), !0;
                                case r.PAGE_UP:
                                    return this._repeat(null, n.page, t), !0;
                                case r.PAGE_DOWN:
                                    return this._repeat(null, -n.page, t), !0
                            }
                            return !1
                        },
                        _uiSpinnerHtml: function() {
                            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"
                        },
                        _buttonHtml: function() {
                            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span>" + "</a>" + "<a class='ui-spinner-button ui-spinner-down ui-corner-br'>" + "<span class='ui-icon " + this.options.icons.down + "'>&#9660;</span>" + "</a>"
                        },
                        _start: function(e) {
                            return !this.spinning && this._trigger("start", e) === !1 ? !1 : (this.counter || (this.counter = 1), this.spinning = !0, !0)
                        },
                        _repeat: function(e, t, n) {
                            e = e || 500, clearTimeout(this.timer), this.timer = this._delay(function() {
                                this._repeat(40, t, n)
                            }, e), this._spin(t * this.options.step, n)
                        },
                        _spin: function(e, t) {
                            var n = this.value() || 0;
                            this.counter || (this.counter = 1), n = this._adjustValue(n + e * this._increment(this.counter));
                            if (!this.spinning || this._trigger("spin", t, {
                                    value: n
                                }) !== !1) this._value(n), this.counter++
                        },
                        _increment: function(t) {
                            var n = this.options.incremental;
                            return n ? e.isFunction(n) ? n(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1
                        },
                        _precision: function() {
                            var e = this._precisionOf(this.options.step);
                            return this.options.min !== null && (e = Math.max(e, this._precisionOf(this.options.min))), e
                        },
                        _precisionOf: function(e) {
                            var t = e.toString(),
                                n = t.indexOf(".");
                            return n === -1 ? 0 : t.length - n - 1
                        },
                        _adjustValue: function(e) {
                            var t, n, r = this.options;
                            return t = r.min !== null ? r.min : 0, n = e - t, n = Math.round(n / r.step) * r.step, e = t + n, e = parseFloat(e.toFixed(this._precision())), r.max !== null && e > r.max ? r.max : r.min !== null && e < r.min ? r.min : e
                        },
                        _stop: function(e) {
                            if (!this.spinning) return;
                            clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", e)
                        },
                        _setOption: function(e, t) {
                            if (e === "culture" || e === "numberFormat") {
                                var n = this._parse(this.element.val());
                                this.options[e] = t, this.element.val(this._format(n));
                                return
                            }(e === "max" || e === "min" || e === "step") && typeof t == "string" && (t = this._parse(t)), e === "icons" && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up), this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)), this._super(e, t), e === "disabled" && (t ? (this.element.prop("disabled", !0), this.buttons.button("disable")) : (this.element.prop("disabled", !1), this.buttons.button("enable")))
                        },
                        _setOptions: t(function(e) {
                            this._super(e), this._value(this.element.val())
                        }),
                        _parse: function(e) {
                            return typeof e == "string" && e !== "" && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), e === "" || isNaN(e) ? null : e
                        },
                        _format: function(e) {
                            return e === "" ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e
                        },
                        _refresh: function() {
                            this.element.attr({
                                "aria-valuemin": this.options.min,
                                "aria-valuemax": this.options.max,
                                "aria-valuenow": this._parse(this.element.val())
                            })
                        },
                        _value: function(e, t) {
                            var n;
                            e !== "" && (n = this._parse(e), n !== null && (t || (n = this._adjustValue(n)), e = this._format(n))), this.element.val(e), this._refresh()
                        },
                        _destroy: function() {
                            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.uiSpinner.replaceWith(this.element)
                        },
                        stepUp: t(function(e) {
                            this._stepUp(e)
                        }),
                        _stepUp: function(e) {
                            this._start() && (this._spin((e || 1) * this.options.step), this._stop())
                        },
                        stepDown: t(function(e) {
                            this._stepDown(e)
                        }),
                        _stepDown: function(e) {
                            this._start() && (this._spin((e || 1) * -this.options.step), this._stop())
                        },
                        pageUp: t(function(e) {
                            this._stepUp((e || 1) * this.options.page)
                        }),
                        pageDown: t(function(e) {
                            this._stepDown((e || 1) * this.options.page)
                        }),
                        value: function(e) {
                            if (!arguments.length) return this._parse(this.element.val());
                            t(this._value).call(this, e)
                        },
                        widget: function() {
                            return this.uiSpinner
                        }
                    })
                }(jQuery),
                function(e, t) {
                    function i() {
                        return ++n
                    }

                    function s(e) {
                        return e = e.cloneNode(!1), e.hash.length > 1 && decodeURIComponent(e.href.replace(r, "")) === decodeURIComponent(location.href.replace(r, ""))
                    }
                    var n = 0,
                        r = /#.*$/;
                    e.widget("ui.tabs", {
                        version: "1.10.4",
                        delay: 300,
                        options: {
                            active: null,
                            collapsible: !1,
                            event: "click",
                            heightStyle: "content",
                            hide: null,
                            show: null,
                            activate: null,
                            beforeActivate: null,
                            beforeLoad: null,
                            load: null
                        },
                        _create: function() {
                            var t = this,
                                n = this.options;
                            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", n.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(t) {
                                e(this).is(".ui-state-disabled") && t.preventDefault()
                            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                                e(this).closest("li").is(".ui-state-disabled") && this.blur()
                            }), this._processTabs(), n.active = this._initialActive(), e.isArray(n.disabled) && (n.disabled = e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function(e) {
                                return t.tabs.index(e)
                            }))).sort()), this.options.active !== !1 && this.anchors.length ? this.active = this._findActive(n.active) : this.active = e(), this._refresh(), this.active.length && this.load(n.active)
                        },
                        _initialActive: function() {
                            var t = this.options.active,
                                n = this.options.collapsible,
                                r = location.hash.substring(1);
                            if (t === null) {
                                r && this.tabs.each(function(n, i) {
                                    if (e(i).attr("aria-controls") === r) return t = n, !1
                                }), t === null && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active")));
                                if (t === null || t === -1) t = this.tabs.length ? 0 : !1
                            }
                            return t !== !1 && (t = this.tabs.index(this.tabs.eq(t)), t === -1 && (t = n ? !1 : 0)), !n && t === !1 && this.anchors.length && (t = 0), t
                        },
                        _getCreateEventData: function() {
                            return {
                                tab: this.active,
                                panel: this.active.length ? this._getPanelForTab(this.active) : e()
                            }
                        },
                        _tabKeydown: function(t) {
                            var n = e(this.document[0].activeElement).closest("li"),
                                r = this.tabs.index(n),
                                i = !0;
                            if (this._handlePageNav(t)) return;
                            switch (t.keyCode) {
                                case e.ui.keyCode.RIGHT:
                                case e.ui.keyCode.DOWN:
                                    r++;
                                    break;
                                case e.ui.keyCode.UP:
                                case e.ui.keyCode.LEFT:
                                    i = !1, r--;
                                    break;
                                case e.ui.keyCode.END:
                                    r = this.anchors.length - 1;
                                    break;
                                case e.ui.keyCode.HOME:
                                    r = 0;
                                    break;
                                case e.ui.keyCode.SPACE:
                                    t.preventDefault(), clearTimeout(this.activating), this._activate(r);
                                    return;
                                case e.ui.keyCode.ENTER:
                                    t.preventDefault(), clearTimeout(this.activating), this._activate(r === this.options.active ? !1 : r);
                                    return;
                                default:
                                    return
                            }
                            t.preventDefault(), clearTimeout(this.activating), r = this._focusNextTab(r, i), t.ctrlKey || (n.attr("aria-selected", "false"), this.tabs.eq(r).attr("aria-selected", "true"), this.activating = this._delay(function() {
                                this.option("active", r)
                            }, this.delay))
                        },
                        _panelKeydown: function(t) {
                            if (this._handlePageNav(t)) return;
                            t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), this.active.focus())
                        },
                        _handlePageNav: function(t) {
                            if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP) return this._activate(this._focusNextTab(this.options.active - 1, !1)), !0;
                            if (t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN) return this._activate(this._focusNextTab(this.options.active + 1, !0)), !0
                        },
                        _findNextTab: function(t, n) {
                            function i() {
                                return t > r && (t = 0), t < 0 && (t = r), t
                            }
                            var r = this.tabs.length - 1;
                            while (e.inArray(i(), this.options.disabled) !== -1) t = n ? t + 1 : t - 1;
                            return t
                        },
                        _focusNextTab: function(e, t) {
                            return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e
                        },
                        _setOption: function(e, t) {
                            if (e === "active") {
                                this._activate(t);
                                return
                            }
                            if (e === "disabled") {
                                this._setupDisabled(t);
                                return
                            }
                            this._super(e, t), e === "collapsible" && (this.element.toggleClass("ui-tabs-collapsible", t), !t && this.options.active === !1 && this._activate(0)), e === "event" && this._setupEvents(t), e === "heightStyle" && this._setupHeightStyle(t)
                        },
                        _tabId: function(e) {
                            return e.attr("aria-controls") || "ui-tabs-" + i()
                        },
                        _sanitizeSelector: function(e) {
                            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
                        },
                        refresh: function() {
                            var t = this.options,
                                n = this.tablist.children(":has(a[href])");
                            t.disabled = e.map(n.filter(".ui-state-disabled"), function(e) {
                                return n.index(e)
                            }), this._processTabs(), t.active === !1 || !this.anchors.length ? (t.active = !1, this.active = e()) : this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active), this._refresh()
                        },
                        _refresh: function() {
                            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                                "aria-selected": "false",
                                tabIndex: -1
                            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                                "aria-expanded": "false",
                                "aria-hidden": "true"
                            }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                                "aria-selected": "true",
                                tabIndex: 0
                            }), this._getPanelForTab(this.active).show().attr({
                                "aria-expanded": "true",
                                "aria-hidden": "false"
                            })) : this.tabs.eq(0).attr("tabIndex", 0)
                        },
                        _processTabs: function() {
                            var t = this;
                            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                                role: "tab",
                                tabIndex: -1
                            }), this.anchors = this.tabs.map(function() {
                                return e("a", this)[0]
                            }).addClass("ui-tabs-anchor").attr({
                                role: "presentation",
                                tabIndex: -1
                            }), this.panels = e(), this.anchors.each(function(n, r) {
                                var i, o, u, a = e(r).uniqueId().attr("id"),
                                    f = e(r).closest("li"),
                                    l = f.attr("aria-controls");
                                s(r) ? (i = r.hash, o = t.element.find(t._sanitizeSelector(i))) : (u = t._tabId(f), i = "#" + u, o = t.element.find(i), o.length || (o = t._createPanel(u), o.insertAfter(t.panels[n - 1] || t.tablist)), o.attr("aria-live", "polite")), o.length && (t.panels = t.panels.add(o)), l && f.data("ui-tabs-aria-controls", l), f.attr({
                                    "aria-controls": i.substring(1),
                                    "aria-labelledby": a
                                }), o.attr("aria-labelledby", a)
                            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel")
                        },
                        _getList: function() {
                            return this.tablist || this.element.find("ol,ul").eq(0)
                        },
                        _createPanel: function(t) {
                            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0)
                        },
                        _setupDisabled: function(t) {
                            e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
                            for (var n = 0, r; r = this.tabs[n]; n++) t === !0 || e.inArray(n, t) !== -1 ? e(r).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");
                            this.options.disabled = t
                        },
                        _setupEvents: function(t) {
                            var n = {
                                click: function(e) {
                                    e.preventDefault()
                                }
                            };
                            t && e.each(t.split(" "), function(e, t) {
                                n[t] = "_eventHandler"
                            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, n), this._on(this.tabs, {
                                keydown: "_tabKeydown"
                            }), this._on(this.panels, {
                                keydown: "_panelKeydown"
                            }), this._focusable(this.tabs), this._hoverable(this.tabs)
                        },
                        _setupHeightStyle: function(t) {
                            var n, r = this.element.parent();
                            t === "fill" ? (n = r.height(), n -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function() {
                                var t = e(this),
                                    r = t.css("position");
                                if (r === "absolute" || r === "fixed") return;
                                n -= t.outerHeight(!0)
                            }), this.element.children().not(this.panels).each(function() {
                                n -= e(this).outerHeight(!0)
                            }), this.panels.each(function() {
                                e(this).height(Math.max(0, n - e(this).innerHeight() + e(this).height()))
                            }).css("overflow", "auto")) : t === "auto" && (n = 0, this.panels.each(function() {
                                n = Math.max(n, e(this).height("").height())
                            }).height(n))
                        },
                        _eventHandler: function(t) {
                            var n = this.options,
                                r = this.active,
                                i = e(t.currentTarget),
                                s = i.closest("li"),
                                o = s[0] === r[0],
                                u = o && n.collapsible,
                                a = u ? e() : this._getPanelForTab(s),
                                f = r.length ? this._getPanelForTab(r) : e(),
                                l = {
                                    oldTab: r,
                                    oldPanel: f,
                                    newTab: u ? e() : s,
                                    newPanel: a
                                };
                            t.preventDefault();
                            if (s.hasClass("ui-state-disabled") || s.hasClass("ui-tabs-loading") || this.running || o && !n.collapsible || this._trigger("beforeActivate", t, l) === !1) return;
                            n.active = u ? !1 : this.tabs.index(s), this.active = o ? e() : s, this.xhr && this.xhr.abort(), !f.length && !a.length && e.error("jQuery UI Tabs: Mismatching fragment identifier."), a.length && this.load(this.tabs.index(s), t), this._toggle(t, l)
                        },
                        _toggle: function(t, n) {
                            function o() {
                                r.running = !1, r._trigger("activate", t, n)
                            }

                            function u() {
                                n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), i.length && r.options.show ? r._show(i, r.options.show, o) : (i.show(), o())
                            }
                            var r = this,
                                i = n.newPanel,
                                s = n.oldPanel;
                            this.running = !0, s.length && this.options.hide ? this._hide(s, this.options.hide, function() {
                                n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), u()
                            }) : (n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), s.hide(), u()), s.attr({
                                "aria-expanded": "false",
                                "aria-hidden": "true"
                            }), n.oldTab.attr("aria-selected", "false"), i.length && s.length ? n.oldTab.attr("tabIndex", -1) : i.length && this.tabs.filter(function() {
                                return e(this).attr("tabIndex") === 0
                            }).attr("tabIndex", -1), i.attr({
                                "aria-expanded": "true",
                                "aria-hidden": "false"
                            }), n.newTab.attr({
                                "aria-selected": "true",
                                tabIndex: 0
                            })
                        },
                        _activate: function(t) {
                            var n, r = this._findActive(t);
                            if (r[0] === this.active[0]) return;
                            r.length || (r = this.active), n = r.find(".ui-tabs-anchor")[0], this._eventHandler({
                                target: n,
                                currentTarget: n,
                                preventDefault: e.noop
                            })
                        },
                        _findActive: function(t) {
                            return t === !1 ? e() : this.tabs.eq(t)
                        },
                        _getIndex: function(e) {
                            return typeof e == "string" && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), e
                        },
                        _destroy: function() {
                            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tabs.add(this.panels).each(function() {
                                e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
                            }), this.tabs.each(function() {
                                var t = e(this),
                                    n = t.data("ui-tabs-aria-controls");
                                n ? t.attr("aria-controls", n).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls")
                            }), this.panels.show(), this.options.heightStyle !== "content" && this.panels.css("height", "")
                        },
                        enable: function(n) {
                            var r = this.options.disabled;
                            if (r === !1) return;
                            n === t ? r = !1 : (n = this._getIndex(n), e.isArray(r) ? r = e.map(r, function(e) {
                                return e !== n ? e : null
                            }) : r = e.map(this.tabs, function(e, t) {
                                return t !== n ? t : null
                            })), this._setupDisabled(r)
                        },
                        disable: function(n) {
                            var r = this.options.disabled;
                            if (r === !0) return;
                            if (n === t) r = !0;
                            else {
                                n = this._getIndex(n);
                                if (e.inArray(n, r) !== -1) return;
                                e.isArray(r) ? r = e.merge([n], r).sort() : r = [n]
                            }
                            this._setupDisabled(r)
                        },
                        load: function(t, n) {
                            t = this._getIndex(t);
                            var r = this,
                                i = this.tabs.eq(t),
                                o = i.find(".ui-tabs-anchor"),
                                u = this._getPanelForTab(i),
                                a = {
                                    tab: i,
                                    panel: u
                                };
                            if (s(o[0])) return;
                            this.xhr = e.ajax(this._ajaxSettings(o, n, a)), this.xhr && this.xhr.statusText !== "canceled" && (i.addClass("ui-tabs-loading"), u.attr("aria-busy", "true"), this.xhr.success(function(e) {
                                setTimeout(function() {
                                    u.html(e), r._trigger("load", n, a)
                                }, 1)
                            }).complete(function(e, t) {
                                setTimeout(function() {
                                    t === "abort" && r.panels.stop(!1, !0), i.removeClass("ui-tabs-loading"), u.removeAttr("aria-busy"), e === r.xhr && delete r.xhr
                                }, 1)
                            }))
                        },
                        _ajaxSettings: function(t, n, r) {
                            var i = this;
                            return {
                                url: t.attr("href"),
                                beforeSend: function(t, s) {
                                    return i._trigger("beforeLoad", n, e.extend({
                                        jqXHR: t,
                                        ajaxSettings: s
                                    }, r))
                                }
                            }
                        },
                        _getPanelForTab: function(t) {
                            var n = e(t).attr("aria-controls");
                            return this.element.find(this._sanitizeSelector("#" + n))
                        }
                    })
                }(jQuery),
                function(e) {
                    function n(t, n) {
                        var r = (t.attr("aria-describedby") || "").split(/\s+/);
                        r.push(n), t.data("ui-tooltip-id", n).attr("aria-describedby", e.trim(r.join(" ")))
                    }

                    function r(t) {
                        var n = t.data("ui-tooltip-id"),
                            r = (t.attr("aria-describedby") || "").split(/\s+/),
                            i = e.inArray(n, r);
                        i !== -1 && r.splice(i, 1), t.removeData("ui-tooltip-id"), r = e.trim(r.join(" ")), r ? t.attr("aria-describedby", r) : t.removeAttr("aria-describedby")
                    }
                    var t = 0;
                    e.widget("ui.tooltip", {
                        version: "1.10.4",
                        options: {
                            content: function() {
                                var t = e(this).attr("title") || "";
                                return e("<a>").text(t).html()
                            },
                            hide: !0,
                            items: "[title]:not([disabled])",
                            position: {
                                my: "left top+15",
                                at: "left bottom",
                                collision: "flipfit flip"
                            },
                            show: !0,
                            tooltipClass: null,
                            track: !1,
                            close: null,
                            open: null
                        },
                        _create: function() {
                            this._on({
                                mouseover: "open",
                                focusin: "open"
                            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable()
                        },
                        _setOption: function(t, n) {
                            var r = this;
                            if (t === "disabled") {
                                this[n ? "_disable" : "_enable"](), this.options[t] = n;
                                return
                            }
                            this._super(t, n), t === "content" && e.each(this.tooltips, function(e, t) {
                                r._updateContent(t)
                            })
                        },
                        _disable: function() {
                            var t = this;
                            e.each(this.tooltips, function(n, r) {
                                var i = e.Event("blur");
                                i.target = i.currentTarget = r[0], t.close(i, !0)
                            }), this.element.find(this.options.items).addBack().each(function() {
                                var t = e(this);
                                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).attr("title", "")
                            })
                        },
                        _enable: function() {
                            this.element.find(this.options.items).addBack().each(function() {
                                var t = e(this);
                                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"))
                            })
                        },
                        open: function(t) {
                            var n = this,
                                r = e(t ? t.target : this.element).closest(this.options.items);
                            if (!r.length || r.data("ui-tooltip-id")) return;
                            r.attr("title") && r.data("ui-tooltip-title", r.attr("title")), r.data("ui-tooltip-open", !0), t && t.type === "mouseover" && r.parents().each(function() {
                                var t = e(this),
                                    r;
                                t.data("ui-tooltip-open") && (r = e.Event("blur"), r.target = r.currentTarget = this, n.close(r, !0)), t.attr("title") && (t.uniqueId(), n.parents[this.id] = {
                                    element: this,
                                    title: t.attr("title")
                                }, t.attr("title", ""))
                            }), this._updateContent(r, t)
                        },
                        _updateContent: function(e, t) {
                            var n, r = this.options.content,
                                i = this,
                                s = t ? t.type : null;
                            if (typeof r == "string") return this._open(t, e, r);
                            n = r.call(e[0], function(n) {
                                if (!e.data("ui-tooltip-open")) return;
                                i._delay(function() {
                                    t && (t.type = s), this._open(t, e, n)
                                })
                            }), n && this._open(t, e, n)
                        },
                        _open: function(t, r, i) {
                            function f(e) {
                                a.of = e;
                                if (s.is(":hidden")) return;
                                s.position(a)
                            }
                            var s, o, u, a = e.extend({}, this.options.position);
                            if (!i) return;
                            s = this._find(r);
                            if (s.length) {
                                s.find(".ui-tooltip-content").html(i);
                                return
                            }
                            r.is("[title]") && (t && t.type === "mouseover" ? r.attr("title", "") : r.removeAttr("title")), s = this._tooltip(r), n(r, s.attr("id")), s.find(".ui-tooltip-content").html(i), this.options.track && t && /^mouse/.test(t.type) ? (this._on(this.document, {
                                mousemove: f
                            }), f(t)) : s.position(e.extend({
                                of: r
                            }, this.options.position)), s.hide(), this._show(s, this.options.show), this.options.show && this.options.show.delay && (u = this.delayedShow = setInterval(function() {
                                s.is(":visible") && (f(a.of), clearInterval(u))
                            }, e.fx.interval)), this._trigger("open", t, {
                                tooltip: s
                            }), o = {
                                keyup: function(t) {
                                    if (t.keyCode === e.ui.keyCode.ESCAPE) {
                                        var n = e.Event(t);
                                        n.currentTarget = r[0], this.close(n, !0)
                                    }
                                },
                                remove: function() {
                                    this._removeTooltip(s)
                                }
                            };
                            if (!t || t.type === "mouseover") o.mouseleave = "close";
                            if (!t || t.type === "focusin") o.focusout = "close";
                            this._on(!0, r, o)
                        },
                        close: function(t) {
                            var n = this,
                                i = e(t ? t.currentTarget : this.element),
                                s = this._find(i);
                            if (this.closing) return;
                            clearInterval(this.delayedShow), i.data("ui-tooltip-title") && i.attr("title", i.data("ui-tooltip-title")), r(i), s.stop(!0), this._hide(s, this.options.hide, function() {
                                n._removeTooltip(e(this))
                            }), i.removeData("ui-tooltip-open"), this._off(i, "mouseleave focusout keyup"), i[0] !== this.element[0] && this._off(i, "remove"), this._off(this.document, "mousemove"), t && t.type === "mouseleave" && e.each(this.parents, function(t, r) {
                                e(r.element).attr("title", r.title), delete n.parents[t]
                            }), this.closing = !0, this._trigger("close", t, {
                                tooltip: s
                            }), this.closing = !1
                        },
                        _tooltip: function(n) {
                            var r = "ui-tooltip-" + t++,
                                i = e("<div>").attr({
                                    id: r,
                                    role: "tooltip"
                                }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
                            return e("<div>").addClass("ui-tooltip-content").appendTo(i), i.appendTo(this.document[0].body), this.tooltips[r] = n, i
                        },
                        _find: function(t) {
                            var n = t.data("ui-tooltip-id");
                            return n ? e("#" + n) : e()
                        },
                        _removeTooltip: function(e) {
                            e.remove(), delete this.tooltips[e.attr("id")]
                        },
                        _destroy: function() {
                            var t = this;
                            e.each(this.tooltips, function(n, r) {
                                var i = e.Event("blur");
                                i.target = i.currentTarget = r[0], t.close(i, !0), e("#" + n).remove(), r.data("ui-tooltip-title") && (r.attr("title", r.data("ui-tooltip-title")), r.removeData("ui-tooltip-title"))
                            })
                        }
                    })
                }(jQuery)
            }.apply(e, arguments)
        })
    }(this), define("common/text.spinner", ["jquery", "underscore", "jqueryUI"], function(e, t) {
        e.widget("ui.spinner", {
            options: {
                min: null,
                max: null,
                precision: null,
                step: 1
            },
            _create: function() {
                this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), this._draw(), this._bindEvents(), this._enableDisableButtons()
            },
            _draw: function() {
                var e = this.betterSpinner = this.element.addClass("better-spinner-input").wrap('<span class="better-spinner ui-widget ui-widget-content"></span>').parent().append(this._buttonHtml());
                this.buttons = e.find(".better-spinner-button").attr("tabIndex", -1).button()
            },
            _bindEvents: function() {
                this.betterSpinner.on("click", ".better-spinner-up", t.bind(this._increment, this)), this.betterSpinner.on("click", ".better-spinner-down", t.bind(this._decrement, this)), this.betterSpinner.on("change input", "input", t.bind(this._enableDisableButtons, this))
            },
            _buttonHtml: function() {
                return '<div class="spinner-buttons"><a class="better-spinner-button better-spinner-up"></a><a class="better-spinner-button better-spinner-down"></a></div>'
            },
            _enableDisableButtons: function() {
                var e = this.options.min === this._getValue() || this._isBelowMin(),
                    t = this.options.max === this._getValue() || this._isAboveMax();
                this.betterSpinner.find(".better-spinner-down").toggleClass("disabled", e), this.betterSpinner.find(".better-spinner-up").toggleClass("disabled", t)
            },
            _increment: function() {
                if (this._isAboveMax()) return;
                var e = this._getValue() + this.options.step;
                t.isNumber(this.options.max) && e > this.options.max && (e = this.options.max), this._setValue(e)
            },
            _decrement: function() {
                if (this._isBelowMin()) return;
                var e = this._getValue() - this.options.step;
                t.isNumber(this.options.min) && e < this.options.min && (e = this.options.min), this._setValue(e)
            },
            _isBelowMin: function() {
                return t.isNumber(this.options.min) ? this._getValue() < this.options.min : !1
            },
            _isAboveMax: function() {
                return t.isNumber(this.options.max) ? this._getValue() > this.options.max : !1
            },
            _getValue: function() {
                var e;
                return this.element.val() ? e = this.element.numberVal() : e = 0, t.isNaN(e) && (e = 0), e
            },
            _setValue: function(e) {
                t.isNaN(e) && (e = 0, BMT.logError("NaN value set in number spinner."));
                var n = this.options.precision || this.options.precision === 0;
                n && t.isNumber(e) && (e = e.toFixed(this.options.precision));
                var r = this.element.val();
                this.element.val(e), parseFloat(r) !== parseFloat(e) && this.element.change()
            },
            _setOptions: function(n, r) {
                (n === "max" || n === "min" || n === "step") && t.isString(r) && (r = parseInt(r, 10)), e.Widget.prototype._setOption.call(this, n, r)
            }
        })
    }), define("views/advice/autoTransactionRecommendationView", ["components/common/scripts/util/moneyHandler", "components/automaticTransaction/scripts/constants/automaticTransactionFrequency", "models/automaticTransaction", "models/automaticDeposit", "models/automaticWithdrawal", "components/automaticTransaction/scripts/services/automaticTransactionService", "components/common/scripts/services/projectorService", "viewHelpers/automaticTransactionViewHelpers", "views/advice/baseRecommendationView", "common/text.spinner"], function(e, t, n, r, i, s, o, u, a) {
        var f = "automaticDeposit",
            l = "automaticWithdrawal";
        return a.extend({
            template: "advice/autoTransactionRecommendation",
            ui: {
                transactionType: ".transaction-type-selector"
            },
            events: {
                "change @ui.transactionType": "reset",
                "keyup [name=monthlyAmount]": "amountChanged",
                "change [name=monthlyAmount]": "amountChanged",
                "blur [name=monthlyAmount]": "onBlur",
                "click .advice-value": "takeAdvice"
            },
            toolTips: {
                ".advice-label .withdrawal-label": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            templateHelpers: {
                account: function() {
                    return this.self.model
                },
                canAutoWithdraw: function() {
                    return this.account().isAllowedAutoWithdrawals()
                },
                autoTransactionTypeSelector: function() {
                    var e = [{
                        value: f,
                        label: "auto deposit"
                    }, {
                        value: l,
                        label: "auto withdrawal"
                    }];
                    return this.build_dropdown_menu(e, {
                        "class": "transaction-type-selector",
                        value: this.self.isDefaultAutoWithdrawal() ? l : f
                    })
                },
                currentValueText: function() {
                    var e = s.netMonthlyTransactionAmount(this.account()),
                        t = this.money(Math.abs(e));
                    return this.canAutoWithdraw() ? e < 0 ? "Net withdrawal " + t : e > 0 ? "Net deposit " + t : "Net " + t : t + " current"
                }
            },
            onRender: function() {
                this.$amountInput = this.$("[name=monthlyAmount]");
                var e = this.isDefaultAutoWithdrawal() ? l : f;
                this.prefillTransactionAmount(e), this.refreshAdvice(undefined, {
                    noAnimate: !0
                })
            },
            onShow: function() {
                this.$amountInput.spinner({
                    min: 10,
                    step: 100,
                    precision: 2
                })
            },
            takeAdvice: function() {
                this.setValue(this.getRecommended()), this.amountChanged()
            },
            refreshAdvice: function(e, t) {
                this.context = this.buildContextWithChanges(e || {});
                var n = this.getRecommended().round(2);
                if (n === this.getValue()) {
                    this.hideAdvice(t);
                    return
                }
                if (n > 0 && this.isAutoDepositSelected()) {
                    this.showAdvice(t), this.showDepositAdviceLabel(), this.setRecommendedAmount(n);
                    return
                }
                if (n < 0 && this.isAutoWithdrawalSelected() && this.model.isAllowedAutoWithdrawals()) {
                    this.showAdvice(t), this.showWithdrawalAdviceLabel(), this.setRecommendedAmount(n);
                    return
                }
                this.hideAdvice(t)
            },
            showDepositAdviceLabel: function() {
                this.$(".advice-label .deposit-label").show(), this.$(".advice-label .withdrawal-label").hide()
            },
            showWithdrawalAdviceLabel: function() {
                this.$(".advice-label .deposit-label").hide(), this.$(".advice-label .withdrawal-label").show()
            },
            setRecommendedAmount: function(e) {
                this.$(".advice-value").text(this.formatter.money(Math.abs(e)))
            },
            getSelectedType: function() {
                var e = this.ui.transactionType;
                return e.length ? e.val() : f
            },
            isAutoDepositSelected: function() {
                return this.getSelectedType() === f
            },
            isAutoWithdrawalSelected: function() {
                return this.getSelectedType() === l
            },
            reset: function() {
                this.prefillTransactionAmount(this.getSelectedType()), this.amountChanged(), this.validate(), this.trigger("valueReset")
            },
            getValue: function() {
                var e = this.$amountInput.numberVal();
                return this.isAutoWithdrawalSelected() && (e *= -1), e
            },
            setValue: function(e) {
                var t = e !== 0 ? Math.abs(e).toFixed(2) : "";
                this.$amountInput.val(t)
            },
            getModel: function() {
                if (!this.isDirty()) return null;
                var e = this.model.get(this.getSelectedType());
                if (e) return e;
                var n = Math.abs(this.getValue()),
                    s = this.isAutoDepositSelected() ? r : i;
                return new s({
                    amount: n,
                    frequency: t.MONTHLY
                })
            },
            getModelForSave: function() {
                var e = {},
                    t = this.getModel();
                if (t) {
                    var r = !0,
                        i = Math.abs(this.getValue());
                    i === 0 && (r = !1, i = t.monthlyAmount());
                    var s = n.demonthlyize(t.get("frequency"), i);
                    t.set({
                        enabled: r,
                        amount: s,
                        frequency: t.get("frequency")
                    }, {
                        silent: !0
                    }), t.isNew() && t.set("account", this.model)
                }
                return e[this.getSelectedType()] = t, e
            },
            getRecommended: function() {
                var e = o.getRecommendedMonthlyDepositForAccount(this.model, {
                        context: this.context || {},
                        totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                        defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                    }),
                    t = s.netMonthlyTransactionAmount(this.model);
    
            return e > 0 && t < 0 ? e += Math.abs(t) : e < 0 && t > 0 && (e -= t), e
            },
            amountChanged: function() {
                this.trigger("valueChanged", {
                    monthlyAmount: this.getValue()
                })
            },
            onBlur: function() {
                this.validate()
            },
            validate: function() {
                var e, t = $.trim(this.$amountInput.val()).length === 0;
                if (t || this.getValue() === 0) e = !1;
                else {
                    var n = this.getModel();
                    e = n && n.preValidate("amount", Math.abs(this.getValue()))
                }
                return this.updateFieldValidation(this.$amountInput, e), !!e
            },
            prefillTransactionAmount: function(e) {
                var t = s.monthlyAmount(this.model.get(e));
                this.setValue(t)
            },
            isDefaultAutoWithdrawal: function() {
                return u.isDefaultAutoWithdrawal(this.model)
            }
        })
    }), define("views/advice/depositRecommendationView", ["underscore", "common/slider", "components/transaction/scripts/services/transactionProperties", "models/transaction", "components/common/scripts/models/appData", "components/common/scripts/services/projectorService", "services/iraService", "views/advice/baseRecommendationView", "views/transfer/wireInstructionsView"], function(e, t, n, r, i, s, o, u, a) {
        return u.extend({
            template: "advice/depositRecommendation",
            events: {
                "keyup input[name=amount]": "triggerValueChanged",
                "change input[name=amount]": "triggerValueChanged",
                "click .advice-value": "takeAdvice"
            },
            toolTips: {
                ".cancel-deposit": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".ira-contribution-help": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                account: function() {
                    return this.self.model
                },
                pending: function() {
                    var e = this.totalPendingDeposits(),
                        t = "";
                    return !isNaN(e) && e > 0 && (t = this.money(e) + " pending"), t
                },
                pendingDepositsSummary: function() {
                    var e = this.totalPendingDeposits(),
                        t = "";
                    return !isNaN(e) && e > 0 && (t = this.money(e) + " pending"), t
                },
                totalPendingDeposits: function() {
                    return this.account().getTotalPendingDeposits()
                }
            },
            onShow: function() {
                this.refreshAdvice(undefined, {
                    noAnimate: !0
                })
            },
            onRender: function() {
                this.$amount = this.$("[name=amount]"), this.$amount.spinner({
                    min: 10,
                    step: 100,
                    precision: 2
                })
            },
            refreshAdvice: function(e, t) {
                this.context = this.buildContextWithChanges(e || {});
                var n = this.getRecommended().round(2);
                n > 0 && n !== this.getValue() ? (this.setRecommended(n), this.showAdvice(t)) : this.hideAdvice(t)
            },
            getRecommended: function(e) {
                var t = s.getRecommendedOneTimeDepositForAccount(this.model, {
                    context: this.context || {},
                    totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                    defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                });
                return t + this.getValue()
            },
            setRecommended: function(e) {
                this.$(".advice-value").text(this.formatter.money(e))
            },
            reset: function() {
                this.$amount.val(""), this.triggerValueChanged()
            },
            takeAdvice: function() {
                this.setValue(this.getRecommended()), this.triggerValueChanged()
            },
            setValue: function(e) {
                this.$amount.val(e.toFixed(2))
            },
            getValue: function() {
                return this.$amount.numberVal()
            },
            triggerValueChanged: function() {
                var e = this.getValue();
                this.trigger("valueChanged", {
                    oneTime: e
                }), e === 0 && this.trigger("valueReset")
            },
            getModel: function() {
                if (!this.isDirty()) return null;
                var t = {
                    type: "DEPOSIT",
                    amount: this.getValue(),
                    account: this.model
                };
                return this.model.isIRA() && e.extend(t, {
                    contributionType: i.getInstance().defaultContributionYear()
                }), new r.Model(t)
            }
        })
    }), define("hbs!views/advice/termRecommendation", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return " Age "
            }

            function h(e, t) {
                return " years "
            }

            function p(e, t) {
                return " age "
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = this,
                f = "function",
                l = this.escapeExpression;
            s += '<div class="clearfix">\n    <div class="controls-title left">Time</div>\n    <div class="current-value right">\n        <span class="prefix"></span> <input type="text" integer-input /> <span class="suffix"></span>\n    </div>\n    <div class="existing-value right">\n        ', o = n["if"].call(t, t && t.shouldShowTermAsAge, {
                hash: {},
                inverse: a.noop,
                fn: a.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n        ", (u = n.currentTerm) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.currentTerm, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "\n        ", o = n.unless.call(t, t && t.shouldShowTermAsAge, {
                hash: {},
                inverse: a.noop,
                fn: a.program(3, h, i)
            });
            if (o || o === 0) s += o;
            s += '\n    </div>\n</div>\n\n<div>\n    <div class="term-slider"></div>\n    <a class="reset-x-icon reset" data-help-content="Reset"></a>\n</div>\n<div class="slider-labels clearfix">\n    <div class="left min">', (u = n.minTerm) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.minTerm, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</div>\n    <div class="right max">', (u = n.maxTerm) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.maxTerm, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</div>\n    <div class="center">', o = n["if"].call(t, t && t.shouldShowTermAsAge, {
                hash: {},
                inverse: a.program(3, h, i),
                fn: a.program(5, p, i)
            });
            if (o || o === 0) s += o;
            return s += '</div>\n</div>\n\n<div class="advice-box clearfix info-tip">\n    <div class="arrow top"></div>\n    <div class="text">\n        <div class="advice-label">Recommended</div>\n        <div class="advice-value"></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/advice/termRecommendation", n), n
    }), define("views/advice/termRecommendationView", ["underscore", "hbs!views/advice/termRecommendation", "common/slider", "components/account/scripts/constants/accountConstants", "models/transaction", "components/common/scripts/services/projectorService", "components/account/scripts/services/goalService", "services/userService", "viewHelpers/accountViewHelpers", "views/advice/baseRecommendationView"], function(e, t, n, r, i, s, o, u, a, f) {
        function l() {
            return u.getCurrentUser()
        }
        return f.extend({
            template: t,
            events: {
                "click .advice-value": "takeAdvice",
                "keyup .current-value input": "changeTermFromInput",
                "change .current-value input": "changeTermFromInput",
                "blur .current-value input": "blurTermInput"
            },
            templateHelpers: {
                account: function() {
                    return this.self.model
                },
                shouldShowTermAsAge: function() {
                    return this.self.shouldShowTermAsAge()
                },
                currentTerm: function() {
                    return this.shouldShowTermAsAge() ? a.goalTermAsAge(this.account()) : this.account().remainingGoalTerm()
                },
                minTerm: function() {
                    return this.shouldShowTermAsAge() ? l().age(!0) + r.MIN_TERM : r.MIN_TERM
                },
                maxTerm: function() {
                    return this.shouldShowTermAsAge() ? l().age(!0) + r.MAX_TERM : r.MAX_TERM
                }
            },
            onRender: function() {
                this.$slider = this.createSlider()
            },
            onShow: function() {
                this.refreshAdvice(undefined, {
                    noAnimate: !0
                })
            },
            reset: function() {
                var e = this.model.remainingGoalTerm();
                this.setValue(e), this.valueChanged(), this.$(".existing-value").show(), this.$(".current-value").hide(), this.trigger("valueReset")
            },
            getModel: function() {
                return this.model.remainingGoalTerm() !== this.getValue() ? this.getValue() : null
            },
            refreshAdvice: function(e, t) {
                this.context = this.buildContextWithChanges(e || {});
                var n = this.getRecommended();
                n > 0 && n !== this.getValue() ? (this.showAdvice(t), this.setRecommended(n)) : this.hideAdvice(t)
            },
            getValue: function() {
                return this.$slider.slider("value")
            },
            setValue: function(e) {
                this.$slider.slider("value", e)
            },
            getRecommended: function() {
                return s.getRecommendedTermForAccount(this.model, {
                    context: this.context || {},
                    totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                    defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                })
            },
            setRecommended: function(e) {
                var t = e + " years";
                this.shouldShowTermAsAge() && (e += l().age(!0), t = "Age " + e), this.$(".advice-value").text(t)
            },
            takeAdvice: function() {
                this.setValue(this.getRecommended()), this.valueChanged()
            },
            valueChanged: function(e) {
                return e = e || this.getValue(), this.trigger("valueChanged", {
                    termYears: e
                }), e === this.model.remainingGoalTerm() ? (this.$(".existing-value").show(), this.$(".current-value").hide(), this.trigger("valueReset"), !1) : (this.updateYearsDisplay(e), !0)
            },
            changeTermFromInput: function(e) {
                var t = $(e.target),
                    n = t.intVal(),
                    i = r.MAX_TERM,
                    s = r.MIN_TERM;
                if (this.shouldShowTermAsAge()) {
                    var o = l().age(!0);
                    i += o, s += o
                }
                if (!n || n < 0) return;
                n > i && (n = i), n < s && n * 10 > i && (n = s), n >= s && (this.shouldShowTermAsAge() && (n -= l().age(!0)), this.valueChanged(n), this.updateYearsDisplay(n))
            },
            blurTermInput: function(e) {
                this.$(".reset").is(":visible") || (this.$(".existing-value").show(), this.$(".current-value").hide())
            },
            createSlider: function() {
                var e = this.slider(".term-slider", {
                    min: r.MIN_TERM,
                    max: r.MAX_TERM,
                    step: 1,
                    value: this.model.remainingGoalTerm(),
                    range: "min",
                    slide: function(e, t) {
                        this.valueChanged(t.value)
                    }.bind(this)
                });
                return this.bind("valueChanged", function(t) {
                    t.termYears && e.slider("value", t.termYears)
                }), e
            },
            updateYearsDisplay: function(e) {
                var t = e,
                    n;
                this.shouldShowTermAsAge() ? (this.$(".current-value .suffix").text(""), this.$(".current-value .prefix").text("Age"), t += l().age(!0)) : (n = "year", t > 1 && (n += "s"), this.$(".current-value .prefix").text(""), this.$(".current-value .suffix").text(n)), this.$(".existing-value").hide(), this.$(".current-value").show(), this.$(".current-value input").val(t)
            },
            shouldShowTermAsAge: function() {
                return o.isAccountDisplayedAsAge(this.model)
            },
            editPlanAge: function(e) {
                e.preventDefault(), BMT.router.navigate("retireGuideSetup/3", !0)
            }
        })
    }), define("hbs!views/advice/planRetirementAge", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="clearfix">\n    <div class="plan">\n        <div class="controls-title">Retirement Age</div>\n        <div class="age">', (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' years old</div>\n        <div class="help-note"><a href="#retireGuideSetup/3" class="edit-plan-age">Edit Retirement Age in your Plan</a></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/advice/planRetirementAge", n), n
    }), define("views/advice/planRetirementAgeView", ["backbone", "hbs!views/advice/planRetirementAge", "views/advice/baseRecommendationView"], function(e, t, n) {
        return n.extend({
            template: t,
            onInitialize: function() {
                this.model = new e.Model({
                    retirementAge: this.options.retirementAge
                })
            },
            getValue: function() {
                return this.model.get("retirementAge")
            },
            setValue: function(e) {},
            getModel: function() {
                return null
            },
            reset: function() {},
            refreshAdvice: function(e, t) {}
        })
    }), define("components/advice/scripts/baseGraph", ["jquery", "underscore", "backbone", "components/common/scripts/util/formatter", "projector", "components/common/scripts/constants/colors", "components/common/scripts/services/browserService"], function(e, t, n, r, i, s, o) {
        var u = i.C,
            a = Date.now().getTime(),
            f = 10,
            l = .15,
            c = 0,
            h = 1e6,
            p = function(e) {
                this.opts = e, this.width = e.width, this.height = e.height, this.margin = e.margin, this.term = e.term, this.startingBalance = e.startingBalance, this.currentBalance = e.currentBalance, this.status = e.status, this.hasPending = e.hasPending, this.goalBalance = e.goalBalance || 0, this.monthlyDeposit = e.monthlyDeposit, this.expectedReturn = e.expectedReturn, this.volatility = e.volatility, this.boundingReturns = e.boundingReturns, this.riskFreeRates = e.riskFreeRates, this.annualFeeRate = e.annualFeeRate, this.inflation = e.inflation || 0, this.timeAdjust = t.isUndefined(e.timeAdjust) ? !0 : !1, this.shouldHideCurrentBalanceTooltip = !!e.hideCurrentBalanceTooltip, this.shouldShowMouseTooltip = e.shouldShowMouseTooltip, this.updateProjectionContext(), this.resetGraphData(), this.layoutGraphArea(), this.createAxes(), this.createBackground(), this.definePlots()
            };
        return t.extend(p.prototype, n.Events, {
            go: function() {
                this.animate(), this.attachHandlers()
            },
            layoutGraphArea: function() {
                var e = this.width + this.margin.left + this.margin.right,
                    t = this.height + this.margin.top + this.margin.bottom,
                    n = d3.select(this.opts.selector).append("svg").style("width", e + "px").style("height", t + "px"),
                    r = this.width,
                    i = this.height;
                n.append("defs").append("clipPath").attr("id", "innerGraph").append("path").attr("d", "M 0 0 L 0 " + i + " L " + r + " " + i + " L " + r + " 0"), this.svg = n.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")")
            },
            createAxes: function() {
                this.x = this.createXAxis(), this.y = this.createYAxis(), this.updateScale(), this.svg.selectAll("g.below-axis").data([this.graphData]).enter().append("g").attr("class", "below-axis").attr("clip-path", "url(#innerGraph)"), this.xAxis = this.layoutXAxis(), this.svg.append("g").attr("class", "nv-x axis").attr("transform", "translate(0," + (this.y.range()[0] + 5) + ")").call(this.xAxis), this.yAxis = this.layoutYAxis(), this.svg.append("g").attr("class", "nv-y axis").attr("transform", "translate(" + this.x.range()[1] + ", 0)").call(this.yAxis)
            },
            createXAxis: function() {
                return d3.scale.linear().range([0, this.width])
            },
            layoutXAxis: function() {
                return nv.models.axis().scale(this.x).showMaxMin(!1).tickSize(10, 0).orient("bottom").ticks(6).tickPadding(8).tickFormat(function(e) {
                    var t = new Date(a + e);
                    return this.term > 10 ? t.getFullYear() : r.formatDate("m/yy", t)
                }.bind(this))
            },
            createYAxis: function() {
                return d3.scale.linear().range([this.height, 0])
            },
            layoutYAxis: function() {
                return nv.models.axis().scale(this.y).showMaxMin(!1).tickSize(-1 * this.width, 0).ticks(8).tickPadding(5).orient("right").tickFormat(function(e) {
                    return r.money(e, 0)
                })
            },
            createBackground: function() {
                this.bgArea = d3.svg.area().x(function(e, t) {
                    return this.x(e.x)
                }.bind(this)).y0(this.height).y1(0);
                var e = this.svg.select("g.below-axis");
                e.append("path").attr("class", "bg").attr("style", "stroke: none; fill: " + s.BASE_GRAPH.FILL + ";").attr("d", this.bgArea).attr("clip-path", "url(#innerGraph)")
            },
            attachHandlers: function() {
                this.opts.onChange && (this.onChange = this.opts.onChange, this.on("change", this.onChange)), e(this.opts.selector + " svg").on("mousemove", function(e) {
                    this.animating || !this.shouldShowMouseTooltip ? this.hideToolTip() : this.onMouseMove(e)
                }.bind(this)).on("mouseout", function(e) {
                    this.animating || !this.shouldShowMouseTooltip ? this.hideToolTip() : this.onMouseOut(e)
                }.bind(this))
            },
            definePlots: function() {
                throw new Error("Method not implemented")
            },
            redrawPaths: function() {
                throw new Error("Method not implemented")
            },
            minBalance: function(e, t, n) {
                throw new Error("Method not implemented")
            },
            maxBalance: function(e, t) {
                throw new Error("Method not implemented")
            },
            resetGraphData: function() {
                return this.graphData = [i.dataForIndex(0, this.projectionContextWithVolatility(0))], this.graphData
            },
            getProjectionContext: function() {
                return {
                    termYears: this.term,
                    targetBalance: this.goalBalance,
                    currentBalance: this.startingBalance,
                    monthlyDeposit: this.monthlyDeposit,
                    expectedReturn: this.expectedReturn,
                    volatility: this.volatility,
                    riskFreeRates: this.riskFreeRates,
                    annualFeeRate: this.annualFeeRate,
                    inflation: this.inflation,
                    timeAdjust: this.timeAdjust
                }
            },
            updateProjectionContext: function() {
                this.projectionContext = this.getProjectionContext(), this.projector = i.withRateContext(this.projectionContext)
            },
            projectionContextWithVolatility: function(e) {
                return t.extend({}, this.projectionContext, {
                    volatility: e
                })
            },
            draw: function(e, t) {
                this.redrawAxes(t), this.redrawPaths(t), this.updateCurrentBalanceTooltip(), e && this.trigger("change", this.graphData[this.graphData.length - 1])
            },
            stopAnimating: function() {
                this.animateInterval && (this.animating = !1, clearInterval(this.animateInterval), this.animateInterval = undefined)
            },
            animate: function(e) {
                this.animating = !0, this.resetGraphData();
                var n = this,
                    r = this.projectionContextWithVolatility(0),
                    s = this.projectionContext,
                    a = i.withRateContext(r),
                    c = i.withRateContext(s),
                    h = d3.range(u.points).map(function(e) {
                        return a.dataForIndex(e, r)
                    }),
                    p = d3.range(u.points).map(function(e) {
                        return c.dataForIndex(e, s)
                    });
                this.trigger("change", p[p.length - 1]);
                var d = function() {
                    n.graphData = p, n.draw(!1, f), n.trigger("afterAnimation")
                };
                if (!o.isMobile() && !o.isiPad()) {
                    var v = 0,
                        m = 30,
                        g = m;
                    this.animateInterval = setInterval(function() {
                        if (++v > g) {
                            n.stopAnimating(), d();
                            return
                        }
                        var e = function(e) {
                            return function(t, n) {
                                h[e][n] += (p[e][n] - t) * l
                            }
                        };
                        for (var r = 0; r < Math.min(v, u.points); r++) t.each(h[r], e(r)), n.graphData[r] = h[r];
                        n.draw(!1, f), v <= u.points && g++
                    }, 35)
                } else d()
            },
            setExpectedReturn: function(e, t) {
                this.oldVolatility = this.volatility, this.expectedReturn = e, this.volatility = t
            },
            setRiskFreeRates: function(e) {
                this.riskFreeRates = e
            },
            setAnnualFeeRate: function(e) {
                this.annualFeeRate = e
            },
            setTerm: function(e) {
                this.term = e
            },
            setStartingBalance: function(e) {
                this.startingBalance = e, this.updateTwoPart()
            },
            setMonthlyDeposit: function(e) {
                this.monthlyDeposit = e, this.updateTwoPart()
            },
            setContext: function(e) {
                var n = ["currentBalance", "startingBalance", "goalBalance", "monthlyDeposit", "expectedReturn", "volatility", "term", "expectedReturn", "volatility", "boundingReturns", "riskFreeRates"],
                    r = {},
                    i = {};
                t.each(n, function(t) {
                    r[t] = this[t], this[t] !== e[t] && (i[t] = !0, isNaN(e[t]) || (this[t] = e[t]))
                }, this);
                if (e.animationStyle === "onePart") this.update();
                else if (e.animationStyle === "twoPart") this.updateTwoPart();
                else {
                    var s = i.term && !r.term,
                        o = i.startingBalance || i.monthlyDeposit || i.goalBalance,
                        u = i.expectedReturn || i.volatility || i.term;
                    o && !u || s ? this.updateTwoPart() : this.update()
                }
            },
            updateTwoPart: function() {
                var e = this,
                    t = [],
                    n = 500;
                this.updateProjectionContext(), this.draw(!0, n);
                for (var r = 0; r < u.points; r++) t[r] = this.projector.dataForIndex(r, this.projectionContext);
                setTimeout(function() {
                    e.graphData = t, e.draw(!0, n)
                }, n)
            },
            update: function(e) {
                var t = this,
                    n = this.oldVolatility || this.volatility || 0,
                    r = [];
                this.updateProjectionContext(), this.animating && this.stopAnimating(), this.updateInterval && clearTimeout(this.updateInterval);
                var s = 0;
                this.updateInterval = setInterval(function() {
                    if (++s > 25) {
                        clearTimeout(t.updateInterval);
                        return
                    }
                    n += (t.projectionContext.volatility - n) * l;
                    for (var o = 0; o < u.points; o++) r[o] = i.dataForIndex(o, t.projectionContextWithVolatility(n));
                    t.graphData = r, t.draw(!0, e)
                }, f)
            },
            updateCurrentBalanceTooltip: function() {
                this.$balanceTooltip = this.$balanceTooltip || e(this.opts.selector).find(".current-balance-tooltip");
                if (!this.shouldHideCurrentBalanceTooltip) {
                    var t = "<p>Current balance<br /><span>" + r.money(this.startingBalance) + "</span></p>";
                    this.hasPending && (t += '<div class="note">includes pending</div>'), this.$balanceTooltip.find(".ui-tooltip-content").html(t), this.$balanceTooltip.show(), this.$balanceTooltip.css({
                        top: this.margin.top + (this.y(this.startingBalance) - this.$balanceTooltip.height() - 30),
                        left: this.margin.left
                    })
                } else this.$balanceTooltip.hide()
            },
            _goalBalanceY: function() {
                return Math.min(this.y(this.goalBalance) - 10, this.y(this.currentBalance) - 25)
            },
            updateScale: function() {
                var e = this.minBalance(this.projectionContext, this.currentBalance, this.boundingReturns),
                    t = this.maxBalance(this.projectionContext, this.boundingReturns);
                e === 0 && t === 0 && (e = c, t = h), this.x.domain([0, this.term * Date.MS_PER_YEAR]), this.y.domain([e, t])
            },
            updateXAxis: function() {
                this.xAxis.scale(this.x)
            },
            updateYAxis: function() {
                this.yAxis.scale(this.y)
            },
            redrawAxes: function(e) {
                this.updateScale(), this.xAxis && this.updateXAxis(), this.yAxis && this.updateYAxis(), this.svg.select("g.nv-x.axis").transition().duration(e || f).ease("in").call(this.xAxis), this.svg.select("g.nv-y.axis").transition().duration(e || f).ease("in").call(this.yAxis)
            },
            hideToolTip: function() {
                d3.transition(this.vertical).style("display", "none"), d3.transition(this.avgPoint).style("display", "none"), d3.transition(this.poorPoint).style("display", "none"), d3.transition(this.snapPoint).style("display", "none"), this.$tooltip && this.$tooltip.css({
                    display: "none"
                })
            },
            getMouseOffsets: function(t) {
                return {
                    x: isNaN(t.offsetX) ? t.pageX - e(t.currentTarget).offset().left - 6 : t.offsetX - this.margin.left,
                    y: isNaN(t.offsetY) ? t.pageY - e(t.currentTarget).offset().top - 6 : t.offsetY - this.margin.top
                }
            },
            onMouseMove: function(n) {
                var r = this.getMouseOffsets(n),
                    i = r.x,
                    o = r.y;
                d3.transition(this.vertical).attr("style", "display: inline; stroke: #" + s.BASE_GRAPH.STROKE + ";").attr("d", "M" + i + "," + this.height + "L" + i + "," + 0);
                var a = this.x.invert(i),
                    f = this.graphData,
                    l = f[0].x,
                    c = f[f.length - 1].x,
                    h = Math.round((u.points - 1) * (a - l) / (c - l));
                if (!f[h] || o >= this.height - 5 || o <= 0) this.onMouseOut(n);
                else {
                    this.hideCurrentBalanceTooltip();
                    var p;
                    if (this.opts.showSnapPoint) {
                        var d = this.y.invert(o);
                        t.each(this.snappers, function(e) {
                            if (!p || Math.abs(f[h][e.line] - d) < Math.abs(f[h][p.line] - d)) p = e
                        }), d3.transition(this.snapPoint).style("display", "inline").attr("cx", i).attr("cy", f[h][p.line] > 0 ? this.y(f[h][p.line]) : this.height)
                    }
                    this.$tooltip = e(this.opts.selector).find(".hover-tooltip");
                    var v = i - this.margin.left - this.$tooltip.outerWidth(),
                        m = this.margin.left + parseInt(e(this.opts.selector).css("padding-left"));
                    this.$tooltip.css({
                        display: "block",
                        left: i + m - (v > 0 ? this.$tooltip.outerWidth() + 30 : -30) + "px"
                    }), this.$tooltip.html(this.opts.tooltipContents ? this.opts.tooltipContents.call(this, f, a, h, p) : "")
                }
            },
            onMouseOut: function(e) {
                this.shouldHideCurrentBalanceTooltip = !1;
                var t = this.getMouseOffsets(e),
                    n = t.x,
                    r = t.y;
                if (n >= this.width || n <= 0 || r >= this.height - 5 || r <= 0) this.hideToolTip(), this.updateCurrentBalanceTooltip()
            },
            hideCurrentBalanceTooltip: function() {
                this.shouldHideCurrentBalanceTooltip = !0, this.$balanceTooltip && this.$balanceTooltip.hide()
            }
        }), p
    }), define("components/advice/scripts/investmentGraph", ["underscore", "components/common/scripts/util/formatter", "projector", "components/advice/scripts/baseGraph", "components/common/scripts/services/projectorService"], function(e, t, n, r, i) {
        function s(e) {
            r.call(this, e)
        }
        return e.extend(s.prototype, r.prototype, {
            definePlots: function() {
                var t = this,
                    n = "basis";
                this.svg.selectAll("g.above-axis").data([this.graphData]).enter().append("g").attr("class", "above-axis").attr("clip-path", "url(#innerGraph)");
                var r = this.svg.select("g.above-axis");
                r.append("path").attr("class", "light").attr("d", this.lightArea), r.append("path").attr("class", "dark").attr("d", this.darkArea), r.append("path").attr("class", "poor").attr("d", this.poorLine), r.append("path").attr("class", "avg").attr("d", this.avgLine), r.append("path").attr("class", "deposit").attr("d", this.depositLine);
                var i = [{
                        line: "light1",
                        pct: .025
                    }, {
                        line: "dark1",
                        pct: .1
                    }, {
                        line: "avg",
                        pct: .5
                    }, {
                        line: "dark0",
                        pct: .9
                    }, {
                        line: "light0",
                        pct: .975
                    }, {
                        line: "deposit",
                        pct: 0
                    }],
                    s = this.opts.snappersToSkip || [];
                this.snappers = e.reject(i, function(t) {
                    return e.contains(s, t.line)
                }), this.opts.showAvgLine !== !1 && (this.avgLine = d3.svg.line().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return t.y(e.avg)
                })), this.opts.showPoorLine !== !1 && (this.poorLine = d3.svg.line().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return t.y(e.light0)
                })), this.opts.showDepositLine !== !1 && (this.depositLine = d3.svg.line().x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return t.y(e.deposit)
                })), this.currentBalanceLine = d3.svg.line().x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return t.y(t.currentBalance)
                }), this.goalBalanceLine = d3.svg.line().x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return t.y(t.goalBalance)
                }), this.darkArea = d3.svg.area().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y0(function(e, n) {
                    return t.y(e.dark0)
                }).y1(function(e, n) {
                    return t.y(e.dark1)
                }), this.lightArea = d3.svg.area().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y0(function(e, n) {
                    return t.y(e.light0)
                }).y1(function(e, n) {
                    return t.y(e.light1)
                }), r.append("path").attr("class", "currentBalance").attr("d", t.currentBalanceLine), r.append("text").attr("class", "currentBalance").attr("x", 0).attr("y", t.y(t.currentBalance) - 10), r.append("path").attr("class", "goalBalance").attr("d", t.goalBalanceLine);
                var o = r.append("text").attr("class", "goalBalance").attr("x", 0).attr("y", t._goalBalanceY());
                o.append("tspan").attr("class", "status"), o.append("tspan").attr("class", "balance"), this.vertical = r.append("path").attr("class", "vertical"), this.poorPoint = r.append("circle").attr("class", "poor").attr("r", 4), this.avgPoint = r.append("circle").attr("class", "avg").attr("r", 4), this.snapPoint = r.append("circle").attr("class", "snap").attr("r", 2)
            },
            redrawPaths: function(e) {
                var n = this.svg.select("g.below-axis"),
                    r = this.svg.select("g.above-axis");
                n.datum(this.graphData), r.datum(this.graphData), r.select("path.bg").transition().duration(e).ease("in").attr("d", this.bgArea), r.select("path.avg").transition().duration(e).ease("in").attr("d", this.avgLine), r.select("path.dark").transition().duration(e).ease("in").attr("d", this.darkArea), r.select("path.poor").transition().duration(e).ease("in").attr("d", this.poorLine), r.select("path.light").transition().duration(e).ease("in").attr("d", this.lightArea), r.select("path.deposit").transition().duration(e).ease("in").attr("d", this.depositLine), r.select("path.goalBalance").transition().duration(e).ease("in").attr("d", this.goalBalanceLine), r.select("text.goalBalance").transition().duration(e).ease("in").attr("y", this._goalBalanceY()), r.select("path.currentBalance").transition().duration(e).ease("in").attr("d", this.currentBalanceLine), r.select("text.currentBalance").transition().duration(e).ease("in").attr("y", this.y(this.currentBalance) - 10).text("Current balance " + t.money(this.currentBalance, 0)), this._updateStatus(), this._updateGoalBalance(r), this.hideToolTip()
            },
            minBalance: function(t, r, i) {
                var s = r,
                    o = Math.min(t.termYears, 6),
                    u = o * 12;
                for (var a = 0; a < u; a++) {
                    var f = n.projectedBalanceAtMonth(a, e.extend({}, t, {
                        expectedReturn: i.max.expectedReturn,
                        volatility: i.max.volatility,
                        zscore: -n.C.z95Pct
                    }));
                    f < s && (s = f)
                }
                return .9 * s
            },
            maxBalance: function(t, r) {
                var i = e.extend({}, t, r.max),
                    s = n.dataForIndex(n.C.points - 1, i).light1;
                return Math.max(1.1 * t.targetBalance, s)
            },
            _updateStatus: function() {
                var e = this.graphData[this.graphData.length - 1].avg,
                    t = (new Date).addYears(this.term);
                this.status = i.determineGoalStatus(this.goalBalance, this.currentBalance, e, t)
            },
            _updateGoalBalance: function(e) {
                var n = e.select("path.goalBalance"),
                    r = this.status ? this.status["class"] : "grey";
                n.attr("class", "goalBalance " + r);
                var i = e.select("text.goalBalance tspan.status");
                this.status ? i.text(this.status.label).attr("class", "status " + r) : i.text("").attr("class", "status"), e.select("text.goalBalance tspan.balance").html('<tspan class="join"> to </tspan>target of ' + t.money(this.goalBalance, 0))
            }
        }), s
    }), define("components/advice/scripts/incomeGraph", ["underscore", "components/common/scripts/util/formatter", "projector", "components/advice/scripts/baseGraph"], function(e, t, n, r) {
        function i() {
            r.apply(this, arguments)
        }
        return e.extend(i.prototype, r.prototype, {
            definePlots: function() {
                function o(e, n) {
                    return n = n === undefined ? 0 : n, e > 0 ? t.y(e) + n : t.height + n
                }
                var t = this,
                    n = "basis";
                this.svg.selectAll("g.above-axis").data([this.graphData]).enter().append("g").attr("class", "above-axis").attr("clip-path", "url(#innerGraph)");
                var r = this.svg.select("g.above-axis");
                r.append("path").attr("class", "light").attr("d", this.lightArea), r.append("path").attr("class", "dark").attr("d", this.darkArea), r.append("path").attr("class", "poor").attr("d", this.poorLine), r.append("path").attr("class", "avg").attr("d", this.avgLine);
                var i = [{
                        line: "light1",
                        pct: .025
                    }, {
                        line: "dark1",
                        pct: .1
                    }, {
                        line: "avg",
                        pct: .5
                    }, {
                        line: "dark0",
                        pct: .9
                    }, {
                        line: "light0",
                        pct: .975
                    }],
                    s = this.snappersToSkip || [];
                this.snappers = e.reject(i, function(t) {
                    return e.contains(s, t.line)
                }), this.avgLine = d3.svg.line().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, t) {
                    return o(e.avg)
                }), this.poorLine = d3.svg.line().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, t) {
                    return o(e.light0)
                }), this.currentBalanceLine = d3.svg.line().x(function(e, n) {
                    return t.x(e.x)
                }).y(function(e, n) {
                    return o(t.currentBalance)
                }), this.darkArea = d3.svg.area().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y0(function(e, t) {
                    return o(e.dark0)
                }).y1(function(e, t) {
                    return o(e.dark1)
                }), this.lightArea = d3.svg.area().interpolate(n).x(function(e, n) {
                    return t.x(e.x)
                }).y0(function(e, t) {
                    return o(e.light0)
                }).y1(function(e, t) {
                    return o(e.light1)
                }), r.append("path").attr("class", "currentBalance").attr("d", t.currentBalanceLine), r.append("text").attr("class", "currentBalance").attr("x", 0).attr("y", o(t.currentBalance, -10)), this.vertical = r.append("path").attr("class", "vertical"), this.poorPoint = r.append("circle").attr("class", "poor").attr("r", 4), this.avgPoint = r.append("circle").attr("class", "avg").attr("r", 4), this.snapPoint = r.append("circle").attr("class", "snap").attr("r", 2)
            },
            createYAxis: function() {
                return d3.scale.linear().range([this.height, 0])
            },
            layoutYAxis: function() {
                return nv.models.axis().scale(this.y).showMaxMin(!1).tickSize(-1 * this.width, 0).tickPadding(10).orient("right").tickFormat(function(e) {
                    return t.money(e, 0)
                })
            },
            redrawPaths: function(e) {
                var n = this.svg.select("g.below-axis"),
                    r = this.svg.select("g.above-axis");
                n.datum(this.graphData), r.datum(this.graphData), r.select("path.bg").transition().duration(e).ease("in").attr("d", this.bgArea), r.select("path.avg").transition().duration(e).ease("in").attr("d", this.avgLine), r.select("path.dark").transition().duration(e).ease("in").attr("d", this.darkArea), r.select("path.poor").transition().duration(e).ease("in").attr("d", this.poorLine), r.select("path.light").transition().duration(e).ease("in").attr("d", this.lightArea), r.select("path.currentBalance").transition().duration(e).ease("in").attr("d", this.currentBalanceLine), r.select("text.currentBalance").transition().duration(e).ease("in").attr("y", this.y(this.currentBalance) - 10).text("Current balance " + t.money(this.currentBalance, 0)), this.hideToolTip()
            },
            getProjectionContext: function() {
                var e = r.prototype.getProjectionContext.call(this);
                if (!e.inflation) {
                    var t = e.termYears * 12,
                        i = [];
                    for (var s = 0; s <= t; s++) i[s] = e.monthlyDeposit * Math.exp(Math.log(1 + n.C.inflation / 100) / 12 * s);
                    e.monthlyDeposit = i, e.timeAdjust = !1
                }
                return e
            },
            minBalance: e.memoize(function(t, r, i) {
                var s = e.extend({}, t, i.max),
                    o = e.extend({}, t, i.min),
                    u = r;
                for (var a = 0; a < n.C.points; a++) {
                    var f = n.dataForIndex(a, s).light0,
                        l = n.dataForIndex(a, o).light0;
                    f < u && (u = f), l < u && (u = l)
                }
                return Math.max(.9 * u, 0)
            }, function(n, r, i) {
                var s = ["targetBalance", "termYears", "monthlyDeposit", "expectedReturn", "volatility"],
                    o = "currentBalance:" + r;
                return e.each(s, function(e) {
                    o += e + ":" + n[e]
                }), o
            }),
            maxBalance: e.memoize(function(t, r) {
                var i = e.extend({}, t, r.max),
                    s = t.currentBalance;
                for (var o = 0; o < n.C.points; o++) {
                    var u = n.dataForIndex(o, i).avg;
                    u > s && (s = u)
                }
                return 1.1 * s
            }, function(n, r) {
                var i = ["currentBalance", "targetBalance", "termYears", "monthlyDeposit", "expectedReturn", "volatility"],
                    s = "";
                return e.each(i, function(e) {
                    s += e + ":" + n[e]
                }), s
            })
        }), i
    }), define("components/advice/scripts/adviceGraphView", ["underscore", "components/common/scripts/views/baseViews", "components/account/scripts/services/goalService", "components/advice/scripts/investmentGraph", "components/advice/scripts/incomeGraph", "components/advice/scripts/adviceViewHelpers", "components/automaticTransaction/scripts/services/automaticTransactionService", "components/common/scripts/services/projectorService", "components/common/scripts/constants/accountStatus", "components/portfolio/scripts/services/portfolioSetService"], function(e, t, n, r, i, s, o, u, a, f) {
        return t.View.extend({
            template: "components/advice/templates/adviceGraph",
            ui: {
                disclaimer: ".disclaimer"
            },
            onShow: function() {
                this.renderGraph()
            },
            renderGraph: function() {
                var e = this,
                    t = this.model.num("allocation"),
                    s = f.getPortfolioSetForAccount(this.model),
                    a = s.getExpectedReturns(t),
                    l = (this.options.termYears || this.model.remainingGoalTerm()) * 12,
                    c = s.getExtendedRiskFreeRates(l),
                    h = this.model.getCurrentBalanceWithPending(),
                    p = o.netMonthlyTransactionAmount(this.model),
                    d = {
                        width: this.options.width || 600,
                        height: this.options.height || 305,
                        margin: {
                            top: 15,
                            bottom: 40,
                            left: 30,
                            right: 95
                        },
                        selector: ".projection-graph",
                        age: this.options.age,
                        startingBalance: h,
                        currentBalance: h,
                        goalBalance: this.options.goalBalance || this.model.num("goalAmount") || 0,
                        expectedReturn: a.expectedReturn,
                        volatility: a.volatility,
                        boundingReturns: s.getBoundingReturns(),
                        riskFreeRates: c,
                        annualFeeRate: this.options.defaultFeeRate,
                        term: this.options.termYears || this.model.remainingGoalTerm() || 0,
                        monthlyDeposit: p,
                        showSnapPoint: !0,
                        shouldShowMouseTooltip: !0,
                        tooltipContents: function(t, r, i, s) {
                            var o = this,
                                u = new Date,
                                a = (new Date(u.getTime() + r)).getFullYear(),
                                f = Math.max(a - u.getFullYear(), 0),
                                l = this.opts.age,
                                c = n.isAccountDisplayedAsAge(e.model) ? " (age " + (f + l) + ")" : " (" + f + " year" + (f === 1 ? "" : "s") + ")",
                                h, p = t[i][s.line];
                            return e.model.isIncome() ? h = p > 0 ? o.y(p) : o.height - 30 : h = o.y(p) - 30, this.$tooltip.css({
                                top: h + "px"
                            }), "<h2>Year " + a + c + "</h2>" + '<div class="clearfix">' + (s.line === "deposit" ? '<div class="left deposit-tip">What you\'ve invested</div>' : '<div class="left"><span class="bold-text">' + e.formatter.pct(s.pct, 1) + "</span> chance of having at least</div>") + '<div class="right">' + e.formatter.money(Math.max(p, 0)) + "</div>" + "</div>"
                        }
                    };
                this.model.isIncome() ? (this.graph = new i(d), this.ui.disclaimer.hide()) : (this.graph = new r(d), this.ui.disclaimer.show()), this.listenTo(this.graph, "change", function(e) {
                    this.trigger("projectionChanged", e), this.refreshStatus(this.graph.status)
                }), this.listenTo(this.graph, "afterAnimation", function() {
                    this.$el.addClass("initial-animation-finished"), this.trigger("afterAnimation")
                }), this.graph.go(), this.refreshStatus(u.getGoalStatus(this.model, {
                    totalCurrentBalance: this.options.totalCurrentBalance,
                    defaultFeeRate: this.options.defaultFeeRate
                }))
            },
            update: function(t, n, r) {
                if (t) {
                    var i = s.buildContextForAccountWithChanges(this.model, t);
                    this.graph.setContext({
                        startingBalance: i.currentBalance,
                        currentBalance: i.startingBalance,
                        goalBalance: i.targetBalance,
                        monthlyDeposit: i.monthlyDeposit,
                        expectedReturn: i.expectedReturn,
                        volatility: i.volatility,
                        term: i.termYears,
                        boundingReturns: i.boundingReturns,
                        riskFreeRates: i.riskFreeRates,
                        animationStyle: i.animationStyle
                    })
                }
                n && e.extend(this.options, n), r && e.extend(this.graph.opts, r)
            },
            refreshStatus: function(t) {
                e.contains([a.ON_TRACK, a.OFF_TRACK], t) ? this.$(".goalBalance").show() : this.$(".goalBalance").hide()
            }
        })
    }), define("hbs!views/advice/marketPerformance", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<li>\n    <h4>average market performance</h4>\n    <h1 class="avg-market"></h1>\n</li>\n\n<li>\n    <h4>poor market performance</h4>\n    <h1 class="poor-market"></h1>\n</li>\n'
        });
        return t.registerPartial("views/advice/marketPerformance", n), n
    }), define("views/advice/marketPerformanceView", ["common/betterment.views", "hbs!views/advice/marketPerformance"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "market-performance",
            tagName: "ul",
            update: function(e) {
                var t = Math.max(e.avg, 0),
                    n = Math.max(e.light0, 0);
                this.$(".avg-market").html(this.formatter.money(t, 0)), this.$(".poor-market").html(this.formatter.money(n, 0))
            }
        })
    }), define("views/notifications/iraDeadlineNotificationView", ["underscore", "common/betterment.views"], function(e, t) {
        var n = 2013;
        return t.View.extend({
            template: "notifications/iraDeadline2013",
            templateHelpers: {
                daysUntilDeadline: function() {
                    return (new Date).daysBetween(new Date(n + 1, 3, 15))
                },
                hasAvailableIRA: function() {
                    return this.self.hasAvailableIRA()
                }
            },
            events: {
                "click #closeNotification": "onClose",
                "click .cta-link": "clickedCallToAction"
            },
            onShow: function() {
                BMT.analytics.track("ElementViewed", {
                    Type: "Notification",
                    Location: "IRA/DeadlineNotification",
                    Name: this.hasAvailableIRA() ? n + "-IRA-HasIRA" : n + "-IRA-NoIRA"
                })
            },
            onDestroy: function() {
                window.localStorage.closedIRANotification = "true", BMT.analytics.track("ElementClicked", {
                    Type: "Button",
                    Name: "Close",
                    Location: "IRA/DeadlineNotification"
                })
            },
            hasAvailableIRA: function() {
                return BMT.accounts().hasIRA() && e.any(BMT.accounts().getIRAs(), function(e) {
                    return e.remainingContributionAmount(n) > 0
                })
            },
            clickedCallToAction: function() {
                var e = n + "-IRA-" + (this.hasAvailableIRA() ? "MakeContribution" : "Rollover");
                BMT.analytics.track("ElementClicked", {
                    Type: "Link",
                    Name: e,
                    Location: "IRA/DeadlineNotification"
                })
            }
        })
    }), define("models/notification", ["jquery", "underscore", "backbone", "common/betterment.views", "views/notifications/iraDeadlineNotificationView"], function(e, t, n, r, i) {
        var s = n.Model.extend({
            initialize: function(e, n) {
                this.options = this.options || {}, t.extend(this.options, n)
            },
            getView: function() {
                if (this.options.view) {
                    var e = this.options.view;
                    return new e(this.options)
                }
                return new r.View(this.options)
            }
        });
        return s
    }), define("modules/objects", ["underscore"], function(e) {
        var t = {
            hash: function(n) {
                return e.reduce(n, function(n, r, i) {
                    return n += i + ":", e.isArray(r) ? n += r.join(",") : e.isObject(r) ? n += t.hash(r) : n += r, n + ":"
                }, "")
            }
        };
        return t
    }), define("models/v2/retirementPlan", ["underscore", "backbone", "projector", "modules/objects", "components/common/scripts/models/appData", "components/account/scripts/constants/retirementConstants", "components/portfolio/scripts/services/portfolioSetService", "components/common/scripts/services/projectorService", "services/accountService", "components/automaticTransaction/scripts/services/automaticTransactionService", "services/retirementPlanService", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        function h(t) {
            return e.reduce(t, function(e, t) {
                return e + t
            }, 0)
        }

        function p() {
            return a.getAllAccounts()
        }
        var d = {
                initialize: function(e) {
                    this.set("financialProfile", e.financialProfile), this.set("financialPlan", e.financialPlan), this.listenTo(e.financialPlan, "change", this.trigger.bind(this, "change")), this.listenTo(e.financialProfile, "change", this.trigger.bind(this, "change"))
                },
                load: function() {
                    var e = o.getDefaultIraPortfolioSetId();
                    return o.loadPortfolioSet(e).then(function(e) {
                        return this.set("portfolioSet", e), this
                    }.bind(this))
                },
                getYearlySavings: function() {
                    return l.getTotalAnnualContributions(this.get("financialPlan"))
                },
                getTotalSavings: function() {
                    return l.getTotalBalance(this.get("financialPlan"))
                },
                getEffectiveRetirementAge: function() {
                    return u.getEffectiveRetirementAge(this.get("financialProfile"), this.get("financialPlan"))
                },
                getEffectiveSpouseRetirementAge: function() {
                    return u.getEffectiveSpouseRetirementAge(this.get("financialProfile"), this.get("financialPlan"))
                },
                getEffectiveLifeExpectancy: function() {
                    return u.getEffectiveLifeExpectancy(this.get("financialProfile"), this.get("financialPlan"))
                },
                getEffectiveSpouseLifeExpectancy: function() {
                    return u.getEffectiveSpouseLifeExpectancy(this.get("financialProfile"), this.get("financialPlan"))
                },
                getYearsUntilRetirement: function() {
                    return this.getEffectiveRetirementAge() - this.get("financialProfile").getAge()
                },
                getYearsInRetirement: function() {
                    return this.getEffectiveLifeExpectancy() - this.getEffectiveRetirementAge()
                },
                getRiskFreeRates: function() {
                    var e = (this.getYearsUntilRetirement() + this.getYearsInRetirement()) * 12;
                    return this.get("portfolioSet").getExtendedRiskFreeRates(e)
                },
                getPreRetirementReturns: function() {
                    var e = this.getPreRetirementAllocation();
                    return this.get("portfolioSet").getExpectedReturns(e)
                },
                getPostRetirementReturns: function() {
                    var e = this.getPostRetirementAllocation();
                    return this.get("portfolioSet").getExpectedReturns(e)
                },
                getRecommendedSavingsContributions: function() {
                    var e = this.getRecommendedSavingsByAccount().contributions;
                    return e.traditionalIraContribution = e.traditionalIraDeductibleContribution + e.traditionalIraNonDeductibleContribution, e.spouseTraditionalIraContribution = e.spouseTraditionalIraDeductibleContribution + e.spouseTraditionalIraNonDeductibleContribution, e
                },
                getRecommendedSavingsContributionForAccount: function(e) {
                    var t = this.getRecommendedSavingsContributions();
                    return e.isInvestingAccount() ? t.taxableContribution : e.isRothIRA() ? t.rothIraContribution : e.isTraditionalIRA() ? t.traditionalIraDeductibleContribution : 0
                },
                getRecommendedSavingsEligibilities: function() {
                    return this.getRecommendedSavingsByAccount().eligibilities
                },
                getRecommendedYearlySavings: function() {
                    return h(this.getRecommendedSavingsByAccount().contributions)
                },
                isSavingEnough: function(e) {
                    var t = e || this.getYearlySavings();
                    return t >= this.getRecommendedYearlySavings()
                },
                hasSavedEnoughAlready: function() {
                    return this.getRecommendedYearlySavings() <= 0
                },
                notSavingEnough: function(e) {
                    return !this.isSavingEnough(e) && !this.hasSavedEnoughAlready()
                },
                getRecommendedTargetBalance: function() {
                    return this.getRecommendedRetirementAgeAndContributions().targetBalance
                },
                getSocialSecurityCollectionInfo: function() {
                    return u.getSocialSecurityCollectionInfo(this.getSocialSecurityProjectionContext())
                },
                getAverageSocialSecurity: function() {
                    return u.calculateAverageSocialSecurity(this.getSocialSecurityProjectionContext())
                },
                getSocialSecurityProjectionContext: function() {
                    return u.buildSocialSecurityProjectionContext(this.get("financialProfile"), this.get("financialPlan"))
                },
                getFutureTaxRate: function() {
                    return this.getRecommendedSavingsByAccount().futureTaxRate
                },
                getAnnualFeeRate: function() {
                    return BMT.accountGroup.isAdvised() ? BMT.accountGroup.num("feeAmount") : s.ASSUMED_FEE_RATE
                },
                getPreRetirementAllocation: function() {
                    return u.getRecommendedAllocation({
                        termYears: this.getYearsUntilRetirement(),
                        age: this.get("financialProfile").getAge(),
                        goalType: "RETIREMENT"
                    })
                },
                getPostRetirementAllocation: function() {
                    return u.getRecommendedAllocation({
                        termYears: this.getYearsInRetirement(),
                        age: this.getEffectiveRetirementAge(),
                        goalType: "RETIREMENT",
                        employmentStatus: "RETIRED"
                    })
                },
                getBalancesAndContributionsByAccountType: function() {
                    var t = {
                            rothIra: 0,
                            traditionalIra: 0,
                            taxable: 0,
                            employerPlan: 0,
                            rothEmployerPlan: 0
                        },
                        n = e.clone(t),
                        r = {};
                    r[c.INVESTING] = "taxable", r[c.TRADITIONAL_IRA] = "traditionalIra", r[c.SEP_IRA] = "traditionalIra", r[c.ROTH_IRA] = "rothIra";
                    var i = {
                        transaction_cheque_account: "employerPlan",
                        savings_deposit_account: "employerPlan",
                        term_deposit_account: "employerPlan",
                        brokerage_account: "employerPlan",
                        my_super: "employerPlan",
                        super_fund: "employerPlan",
                        smsf: "employerPlan",
                        traditional_ira: "traditionalIra",
                        roth_ira: "rothIra",
                        health_savings_account: "rothIra",
                        roth_401k: "rothEmployerPlan",
                        sep_ira: "traditionalIra",
                        simple_ira: "traditionalIra",
                        "401k": "employerPlan",
                        pension_plan: "traditionalIra",
                        profit_sharing: "employerPlan",
                        "403b": "employerPlan",
                        "401a": "employerPlan",
                        "457b": "employerPlan",
                        thrift_savings_plan: "employerPlan",
                        individual_taxable: "taxable"
                    };
                    return e.each(this.get("financialPlan").get("accounts"), function(e) {
			var i = p().get(e.bettermentdbAccountId || e.bettermentdb_account_id),
                            s = i.get("currentBalance"),
                            o = r[i.get("accountType")];
                        t[o] += s, n[o] += f.netYearlyTransactionAmount(i)
                    }.bind(this)), this.get("financialPlan").get("externalAccounts").each(function(e) {
                        var r = i[e.get("accountType")];
                        t[r] += e.dollars("balance"), n[r] += e.dollars("annualContribution")
                    }.bind(this)), {
                        balances: t,
                        contributions: n
                    }
                },
                hasEmployerPlan: function() {
                    return this.get("financialPlan").get("externalAccounts").hasEmployerPlan()
                },
                hasSpouseEmployerPlan: function() {
                    return this.get("financialPlan").get("externalAccounts").hasSpouseEmployerPlan()
                },
                getEquivalentSpouseAge: function(e) {
                    var t = this.get("financialProfile").getSpouseAge() - this.get("financialProfile").getAge();
                    return e + t
                },
                getRetirementYearlyNeededCashflowAtAge: function(e) {
                    var t = e - this.getEffectiveRetirementAge();
                    if (t < 0) return 0;
                    var n = this.getMonthlyCashflowsNeededInRetirement(),
                        r = t * 12;
                    return h(n.slice(r, r + 12))
                },
                averageYearlyRetirementCashflow: function() {
                    var e = this.getMonthlyCashflowsNeededInRetirement();
                    return h(e) / e.length * 12
                },
                getBaseProjectionContext: function() {
                    return {
                        currentBalance: this.getTotalSavings(),
                        monthlyDeposit: this.getYearlySavings() / 12,
                        inflation: this.get("financialProfile").num("expectedInflation")
                    }
                },
                getPreRetirementProjectionContext: function() {
                    return e.extend(this.getBaseProjectionContext(), {
                        termYears: this.getYearsUntilRetirement(),
                        expectedReturn: this.getPreRetirementReturns().expectedReturn,
                        volatility: this.getPreRetirementReturns().volatility,
                        annualFeeRate: this.getAnnualFeeRate(),
                        riskFreeRates: this.getRiskFreeRates()
                    })
                },
                getRetirementProjectionContext: function() {
                    return e.extend(this.getBaseProjectionContext(), {
                        termYears: this.getYearsInRetirement(),
                        expectedReturn: this.getPostRetirementReturns().expectedReturn,
                        volatility: this.getPostRetirementReturns().volatility,
                        riskFreeRates: this.getRiskFreeRates().slice(this.getYearsUntilRetirement() * 12),
                        annualFeeRate: this.getAnnualFeeRate(),
                        zscore: n.C.z99Pct
                    })
                },
                getSpendingWithYearlySavings: function(e, t) {
                    var n = this.get("financialProfile"),
                        r = this.get("financialPlan"),
                        i = this.getBalancesAndContributionsByAccountType(),
                        s = {
                            grossIncome: r.dollars("desiredRetirementIncome"),
                            state: n.get("user").get("state"),
                            maritalStatus: n.get("maritalStatus"),
                            age: this.getEffectiveRetirementAge()
                        };
                    n.isMarried() && (s.spouseAge = this.getEffectiveSpouseRetirementAge());
                    var o = u.calculateAverageTaxRate(s),
                        a = u.calculateLongTermGainsRate(s),
                        f = {
                            targetBalance: 0,
                            age: n.getAge(),
                            retirementAge: this.getEffectiveRetirementAge(),
                            expectedReturn: this.getPreRetirementReturns().expectedReturn,
                            annualFeeRate: this.getAnnualFeeRate(),
                            volatility: this.getPreRetirementReturns().volatility,
                            riskFreeRates: this.getRiskFreeRates(),
                            inflation: n.num("expectedInflation"),
                            accountBalances: i.balances,
                            annualContributions: {
                                employerPlan: e
                            },
                            averageTaxRate: o,
                            longTermGainsRate: a,
                            zscore: t
                        },
                        l = this.getRetirementProjectionContext(),
                        c = u.getProjectedYearlyRetirementIncome(f, l),
                        h = n.pct("socialSecurityPercentExpected") * this.getAverageSocialSecurity(),
                        p = this.get("financialPlan").dollars("otherRetirementIncome") * (1 - o);
                    return c + p + h
                },
                getMonthlyCashflowsNeededInRetirement: function() {
                    var e = this.getRecommendedRetirementAgeAndContributions().monthlyNeededCashflows,
                        t = e[e.length - 1];
                    return e.concat(Array.fill(t, 12))
                },
                getRecommendedSavingsByAccount: function() {
                    var t = this.get("financialProfile"),
                        n = this.get("financialPlan"),
                        r = {
                            contributionLimits: i.getInstance().get("contributionTypes")[2015 + ""],
                            targetRetirementAmount: this.getRecommendedRetirementAgeAndContributions().targetAdditionalInvestmentBalance,
                            adjustedGrossIncome: t.grossIncome(),
                            age: t.getAge(),
                            maritalStatus: t.get("maritalStatus"),
                            retirementAge: this.getEffectiveRetirementAge(),
                            state: t.get("user").get("state"),
                            expectedReturn: this.getPreRetirementReturns().expectedReturn,
                            volatility: this.getPreRetirementReturns().volatility,
                            annualFeeRate: this.getAnnualFeeRate(),
                            riskFreeRates: this.getRiskFreeRates(),
                            savingsAdviceChance: n.num("savingsAdviceChance"),
                            hasEmployerPlan: this.hasEmployerPlan(),
                            inflation: t.num("expectedInflation")
                        };
                    return t.isMarried() && e.extend(r, {
                        spouseAge: t.getSpouseAge(),
                        hasSpouseEmployerPlan: this.hasSpouseEmployerPlan()
                    }), u.whichRetirementAccount(r)
                },
                getRecommendedRetirementAgeAndContributions: function() {
                    var t = this.get("financialProfile"),
                        n = this.get("financialPlan"),
                        r = this.getAnnualFeeRate(),
                        i = {
                            currentAge: t.getAge(),
                            retirementAge: this.getEffectiveRetirementAge(),
                            state: t.get("user").get("state"),
                            grossIncome: t.dollars("pretaxIncome"),
                            accountBalances: this.getBalancesAndContributionsByAccountType().balances,
                            preRetirementConsumption: n.dollars("desiredRetirementIncome"),
                            expectedReturn: this.getPreRetirementReturns().expectedReturn - r,
                            volatility: this.getPreRetirementReturns().volatility,
                            riskFreeRates: this.getRiskFreeRates(),
                            retirementAnnualReturn: this.getPostRetirementReturns().expectedReturn - r,
                            retirementVolatility: this.getPostRetirementReturns().volatility,
                            percentSocialSecurity: t.pct("socialSecurityPercentExpected"),
                            deathAge: this.getEffectiveLifeExpectancy(),
                            salaryGrowth: t.num("annualSalaryPercentGrowth"),
                            inflation: t.num("expectedInflation"),
                            otherRetirementIncome: n.dollars("otherRetirementIncome")
                        };
                    return t.isMarried() && e.extend(i, {
                        spouseAge: t.getSpouseAge(),
                        spouseRetirementAge: this.getEffectiveSpouseRetirementAge(),
                        spouseGrossIncome: t.dollars("spousePretaxIncome"),
                        spouseDeathAge: this.getEffectiveSpouseLifeExpectancy()
                    }), this._memoizedRecommendedRetirementAgeAndContributions(i)
                },
                _memoizedRecommendedRetirementAgeAndContributions: e.memoize(function(e) {
                    return u.getRecommendedRetirementAgeAndContribution(e)
                }, r.hash)
            },
            v = {
                create: function(e) {
                    return (new m(e)).load()
                }
            },
            m = t.Model.extend(d, v);
        return m
    }), define("hbs!views/notifications/adviceRetirementIncome", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h2>Retirement Income - Getting Started</h2>\n<ul>\n    <li>Try entering a sample initial deposit to see Safe Withdrawal advice.</li>\n    <li>Play with your withdrawal amount, allocation, time horizon to see the impact over time.</li>\n    <li>Use "Set" and "Reset" to save or undo any changes.</li>\n</ul>\n<button>Great! Got it.</button>\n'
        });
        return t.registerPartial("views/notifications/adviceRetirementIncome", n), n
    }), define("views/notifications/adviceRetirementIncomeView", ["common/betterment.views", "hbs!views/notifications/adviceRetirementIncome", "components/transaction/scripts/constants/transactionConstants"], function(e, t, n) {
        return e.View.extend({
            template: t,
            templateHelpers: {
                exampleDeposit: function() {
                    return this.money(n.DEPOSIT_MAXIMUM, 0)
                }
            },
            events: {
                "click button": "onCloseClick"
            },
            onCloseClick: function() {
                this.trigger("closeFlyover")
            }
        })
    }), define("views/notifications/dismissibleFlyoverView", ["common/betterment.views"], function(e, t) {
        return e.View.extend({
            events: {
                "click .dismiss-flyover": "onCloseClick"
            },
            onCloseClick: function() {
                this.trigger("closeFlyover")
            }
        })
    }), define("hbs!views/advice/planStartSaving", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression;
            return s += '<h2>Start Saving</h1>\n\n<p>\nContribute <strong class="bold-text">', o = (u = n.annualSavingsAmount || t && t.annualSavingsAmount, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "annualSavingsAmount", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + ' this year</strong>. We recommend automating\nyour savings with monthly deposits of <strong class="bold-text">', o = (u = n.monthlySavingsAmount || t && t.monthlySavingsAmount, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "monthlySavingsAmount", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + "</strong>. Or, you\ncan make one-time deposits.\n</p>\n\n<button>Great! Got it.</button>\n", s
        });
        return t.registerPartial("views/advice/planStartSaving", n), n
    }), define("views/advice/planStartSavingView", ["common/betterment.views", "hbs!views/advice/planStartSaving"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "plan-start-saving-flyover",
            templateHelpers: {
                annualSavingsAmount: function() {
                    var e = this.self.options.account,
                        t = this.self.options.retirementPlan;
                    return t.getRecommendedSavingsContributionForAccount(e)
                },
                monthlySavingsAmount: function() {
                    var e = this.annualSavingsAmount();
                    return e / 12
                }
            },
            triggers: {
                "click button": "closeFlyover"
            }
        })
    }), define("hbs!views/advice/planHeader", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function";
            return s += '<div class="plan-header">\n    <div class="left">\n        <h2>RetireSmart</h2>\n        <p>\n            Desired Retirement Spending ', o = (u = n.desiredSpending || t && t.desiredSpending, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "desiredSpending", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + "\n            &middot;\n            Required Annual Savings ", o = (u = n.requiredSavings || t && t.requiredSavings, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "requiredSavings", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + "\n            &middot;\n            Retirement Age ", (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n        </p>\n    </div>\n    <button class="edit-plan right secondary banner-button">See Plan</button>\n</div>\n', s
        });
        return t.registerPartial("views/advice/planHeader", n), n
    }), define("views/advice/planHeaderView", ["common/betterment.views", "hbs!views/advice/planHeader"], function(e, t) {
        return e.View.extend({
            template: t,
            templateHelpers: {
                requiredSavings: function() {
                    return this.self.options.retirementPlan.getRecommendedYearlySavings()
                },
                desiredSpending: function() {
                    return this.self.options.retirementPlan.get("financialPlan").dollars("desiredRetirementIncome")
                },
                retirementAge: function() {
                    return this.self.options.retirementPlan.get("financialPlan").num("retirementAge")
                }
            },
            ui: {
                editPlan: ".edit-plan"
            },
            events: {
                "click @ui.editPlan": "goToPlan"
            },
            goToPlan: function() {
                BMT.router.navigate("retireGuide", {
                    trigger: !0
                })
            }
        })
    }), define("hbs!views/common/flyover", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<a class="close-button close-gray" href="javascript:;"></a>\n<div class="flyover-body"></div>\n'
        });
        return t.registerPartial("views/common/flyover", n), n
    }), define("views/common/flyoverView", ["common/betterment.views", "hbs!views/common/flyover"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "flyover",
            events: {
                "click .close-gray": "onCloseClick"
            },
            regions: {
                flyoverBody: ".flyover-body"
            },
            onShow: function() {
                var e = this.model.getView();
                this.listenTo(e, "closeFlyover", function() {
                    this.trigger("closeFlyover")
                }), this.flyoverBody.show(e)
            },
            onCloseClick: function() {
                this.trigger("closeFlyover")
            }
        })
    }), define("services/flyoverService", ["underscore", "backbone", "views/common/flyoverView"], function(e, t, n) {
        return e.extend({}, t.Events, {
            showFlyover: function(t, r) {
                var i = {
                    model: t
                };
                r.viewOptions && e.extend(i, r.viewOptions);
                var s = new n(i);
                return this.listenTo(s, "closeFlyover", function() {
                    this.closeFlyover()
                }), r.beforeShow && r.beforeShow(s), BMT.flyoverRegion.show(s), s
            },
            closeFlyover: function() {
                BMT.flyoverRegion.empty()
            }
        })
    }),  define("views/advice/adviceAccountView", ["common/betterment.views", "views/common/addGoalView", "views/common/addGoal/addGoalCardDefinitions", "views/summary/deleteAccountView", "components/account/scripts/services/goalTypeService", "components/account/scripts/services/retirementService", "components/common/scripts/services/projectorService", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u) {
        var a = {
            my: "bottom center",
            at: "top center",
            adjust: {
                y: -5
            }
        };
        return e.View.extend({
            template: "#advice/adviceAccount",
            tagName: "li",
            className: "adviceAccount",
            options: {
                showGoalAmount: !0,
                showDelete: !1,
                showChange: !0,
                isRollover: !1
            },
            templateHelpers: {
                goalAmount: function() {
                    return this.money(this.self.model.num("goalAmount"), 0)
                },
                name: function() {
                    return this.self.model.get("name") || ""
                },
                showGoalAmount: function() {
                    return this.self.options.showGoalAmount && !this.self.model.isIncome()
                },
                showChange: function() {
                    return this.self.options.showChange
                },
                goalTypeLabel: function() {
                    return i.getLabelForAccount(this.self.model)
                },
                showDeleteAccount: function() {
                    return !BMT.accountGroup.isSuspended()
                }
            },
            toolTips: {
                ".type-tooltip": {
                    position: {
                        my: "bottom left",
                        at: "top center"
                    }
                },
                ".blue-x": {
                    position: a,
                    content: "Delete goal"
                },
                ".grey-x": {
                    position: a,
                    content: "Your first goal cannot be deleted,<br />but it can be edited."
                },
                ".goal-name .white-pen": {
                    position: a,
                    content: "Change goal name"
                },
                ".goal-name .grey-pen": {
                    position: a,
                    content: "IRAs have special tax status<br />and cannot be renamed."
                },
                ".goal-amount .white-pen": {
                    position: a,
                    content: "Change goal target"
                }
            },
            events: {
                "click .goal-name .white-pen": "editName",
                "blur  .goal-name input[name=name]": "saveName",
                "keyup .goal-name input[name=name]": "testSaveName",
                "click   .goal-amount .blue-pen": "editGoalAmount",
                "blur    .goal-amount input[name=goalAmount]": "saveGoalAmount",
                "keyup   .goal-amount input[name=goalAmount]": "testSaveGoalAmount",
                "click button.change-goal": "changeGoal",
                "click .blue-x": "showDeleteGoalModal"
            },
            onInitialize: function() {
                this.bindToGoalAmount(this.model), this.listenTo(BMT.vent, "advice:saved", this.updateStatus, this), this.listenTo(BMT.vent, "adviceAccount:changedAccount", this.refresh, this)
            },
            onRender: function() {
                this.$el.attr("id", this.model.getIdOrCid() || 0), this.$goalName = this.$(".goal-name"), this.$nameInput = this.$goalName.find("input[name=name]"), this.$goalAmount = this.$(".goal-amount"), this.$goalAmountInput = this.$goalAmount.find("input[name=goalAmount]")
            },
            refresh: function(e) {
                if (!this.model || this.model.isNew() || this.model.get("id") !== e.get("id")) this.bindToGoalAmount(e), this.model = e, this.render()
            },
            bindToGoalAmount: function(e) {
                this.stopListening(this.model, "change:goalAmount", this._goaAmountChanged), this.listenTo(e, "change:goalAmount", this._goaAmountChanged)
            },
            _goaAmountChanged: function() {
                this.$(".goal-amount .name").text(this.templateHelpers.goalAmount())
            },
            goalStatus: function() {
                return o.getGoalStatus(this.model, {
                    totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                    defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                })
            },
            updateStatus: function(e) {
                if (e.account === this.model) {
                    var t = this.goalStatus();
                    this.$(".status").removeClass().addClass("status " + t["class"])
                }
            },
            editField: function(e, t, n) {
                return this.editing = !0, e.find(".name").css("display", "none"), t.val(n).show(), t.focus(), !1
            },
            restoreField: function(e, t, n) {
                t.hide(), e.find(".name").css("display", "").text(n), this.updateStatus({
                    account: this.model
                }), BMT.vent.trigger("advice:selectGoal", {
                    account: this.model
                }), this.editing = !1
            },
            editName: function(e) {
                if (!this.model.nameIsEditable()) return;
                return this.editField(this.$goalName, this.$nameInput, this.model.get("name"))
            },
            saveName: function(e) {
                if (this.model.nameIsEditable() && this.editing) {
                    e && e.stopImmediatePropagation();
                    var t = this;
                    this.updateGoal({
                        name: this.$nameInput.val() || this.model.get("name")
                    }, function() {
                        t.restoreField(t.$goalName, t.$nameInput, t.templateHelpers.name())
                    })
                }
            },
            testSaveName: function(e) {
                e.keyCode === 13 && this.saveName(e)
            },
            editGoalAmount: function(e) {
                return this.editField(this.$goalAmount, this.$goalAmountInput, this.formatter.integer(this.model.get("goalAmount")))
            },
            saveGoalAmount: function(e) {
                if (this.editing) {
                    e && e.stopImmediatePropagation();
                    var t = this,
                        n = this.formatter.removeCommas(this.$goalAmountInput.val()) || 0;
                    this.updateGoal({
                        goalAmount: n
                    }, function() {
                        BMT.analytics.track("InputSubmitted", {
                            Name: "GoalTarget",
                            Value: n,
                            Type: "Field",
                            Location: "Advice"
                        }), t.restoreField(t.$goalAmount, t.$goalAmountInput, t.templateHelpers.goalAmount())
                    })
                }
            },
            testSaveGoalAmount: function(e) {
                e.keyCode === 13 && this.saveGoalAmount(e)
            },
            changeGoal: function(e) {
                var r = this,
                    i = this.model.get("goalType"),
                    s = this.model.get("accountType"),
                    o = this.model.is("rollover"),
                    u = {
                        model: this.model,
                        isRollover: this.options.isRollover || this.model.is("rollover"),
                        callback: function() {
                            var e = r.model.get("goalType") === i && r.model.get("accountType") === s && r.model.is("rollover") === o;
                            r.render(), BMT.vent.trigger("advice:selectGoal", {
                                account: r.model,
                                isSameType: e
                            })
                        }
                    };
                if (this.model && !this.model.isNew() && this.model.isIRA()) {
                    var a = [n.get(this.model.get("accountType")), n.get(this.model.get("accountType") + "_INCOME")];
                    u.cards = {
                        "tax-advantage": a
                    }
                }
                t.show(u)
            },
            updateGoal: function(e, t) {
                if (this.model.isNew()) this.model.set(e), !!t && t();
                else {
                    var n = this;
                    this.block(), this.model.save(e, {
                        complete: function() {
                            n.unblock(), !!t && t()
                        }
                    })
                }
            },
            showDeleteGoalModal: function(e) {
                r.show({
                    model: this.model,
                    callback: function() {
                        BMT.router.navigate("advice", !0)
                    }
                })
            }
        })
    }), define("views/advice/adviceGoalSelectionView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/advice/adviceAccountView", "models/account", "components/common/scripts/services/projectorService"], function(e, t, n, r, i, s, o) {
        return r.CollectionView.extend({
            getChildView: function() {
                return i
            },
            tagName: "ul",
            className: "select-goal",
            events: {
                "click li.adviceAccount:not(.active)": "activateGoal"
            },
            onInitialize: function() {
                this.childViewOptions = this.options.childViewOptions || {}, this.listenTo(this.collection, "remove", function() {
                    this.options.selectedAccount = BMT.selectedAccount, this.activateGoal()
                }), this.listenTo(BMT.vent, "addGoal:saved", function(e) {
                    this.options.selectedAccount = e, this.reRender(), this.activateGoal()
                })
            },
            onShow: function() {
                this.activateGoal()
            },
            highlightSelectedGoal: function(e) {
                this.$("li.active .goal-contents").hide(), this.$("li").removeClass("active");
                var t = this.$("li[id=" + (e.getIdOrCid() || 0) + "]");
                t.find(".goal-contents").slideDown(500), t.addClass("active")
            },
            activateGoal: function(t) {
                var n = t ? this.collection.get(e(t.currentTarget).attr("id")) : this.options.selectedAccount || this.collection.first();
                this.highlightSelectedGoal(n);
                if (t) {
                    var r = o.getGoalStatus(n, {
                            totalCurrentBalance: BMT.accounts().totalCurrentBalance(),
                            defaultFeeRate: BMT.accountGroup.defaultFeeRate()
                        }).name,
                        i = n.getIdOrCid(),
                        s = n.getGoalTypeLabel();
                    BMT.analytics.track("ElementClicked", {
                        Name: "GoalAdvice",
                        GoalId: i,
                        GoalStatus: r,
                        GoalType: s,
                        Location: "Advice/GoalSelection",
                        Type: "Link"
                    })
                }
                BMT.vent.trigger("advice:selectGoal", {
                    account: n
                })
            }
        })
    }), define("views/advice/narrativeView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "models/transaction", "components/common/scripts/models/appData", "common/depositAlertChain", "models/account", "components/account/scripts/services/goalTypeService", "components/portfolio/scripts/services/portfolioSetService", "services/accountService", "services/wireInstructionsEmailer", "components/account/scripts/constants/accountConstants", "components/transaction/scripts/services/transactionProperties", "components/account/scripts/constants/accountTypes", "components/common/scripts/viewHelpers/customerSupport", "views/transfer/pendingTrustAlert"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
        function g() {
            return {
                position: {
                    my: "top left",
                    at: "bottom center"
                },
                style: {
                    classes: "conversation-tooltip",
                    tip: {
                        mimic: "top center"
                    }
                }
            }
        }
        var y = {
                max: 99,
                min: h.MIN_TERM,
                "class": "term",
                type: "number"
            },
            b = {
                min: 1,
                "class": "money",
                "money-input": "",
                type: "text"
            },
            w = {
                attr_name: "goalCompletionDate",
                transform: function(e) {
                    return u.Model.convertTermToDate(parseInt(e, 10)).serverFormat()
                }
            },
            E = {
                attr_name: "goalCompletionDate",
                transform: function(e) {
                    return u.Model.convertAgeToDate(parseInt(e, 10)).serverFormat()
                }
            };
        return r.View.extend({
            template: "advice/narrative",
            toolTips: {
                ".narrative-help .help-text": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                },
                "input.blank-line:not(.no-tooltip)": t.extend(g(), {
                    show: "focus",
                    hide: "blur"
                })
            },
            templateHelpers: {
                pendingTrust: function() {
                    return this.self.isPendingTrust()
                },
                _hasRollover: function() {
                    return this.self._hasRollover()
                },
                why_we_ask_link: function() {
                    return this.self.model.isBuildWealth() ? "http://support.betasmartz.com/customer/portal/articles/1078929-can-i-have-a-goal-without-a-target" : "http://support.betasmartz.com/customer/portal/articles/1078904-why-do-you-ask-for-my-time-horizon-and-goal-target-amount"
                },
                current_age_text: function() {
                    if (!this.self._showAgeText()) return "";
                    var e = this.self.model,
                        n = e.get("accountGroup").get("parentUser") && e.get("parentUser").age(),
                        r = this.madlib_input(t.extend({
                            name: "currentAge",
                            "data-validation-model": "user",
                            "data-help-content": "Input your age so we can customize the calculations."
                        }, n ? {
                            value: n
                        } : {}, y), 20);
                    return this.text_wrapper("I am currently " + r + " years old.")
                },
                term_text: function() {
                    var e, n, r = 20,
                        i = this.self.model,
                        s = a.getGoalTypeByName(i.get("goalType")).term;
                    if (i.isRetirementGoalDisplayedAsAge()) {
                        n = "We recommend retiring at age 68 so you can receive your full Age Pension benefits.";
                        var o = isNaN(i.goalAge()) ? 68 : i.goalAge(),
                            u = this.madlib_input(t.extend({
                                name: "age",
                                "data-help-content": n
                            }, {
                                value: o
                            }, y), r);
                        e = "I want to retire when I am " + u + " years old,"
                    } else {
                        var f = t.extend({
                            name: "term"
                        }, y);
                        i.isBuildWealth() ? n = "The longer you let your money grow, the more time it has to work for you." : i.isEmergency() || i.isRetirement() ? n = null : n = "When is the latest you plan on making this purchase?", i.goalTerm() ? t.extend(f, {
                            value: i.goalTerm(),
                            style: "text-align: left;"
                        }) : i.isEmergency() ? t.extend(f, {
                            value: s
                        }) : i.isBuildWealth() && t.extend(f, {
                            value: s,
                            type: "hidden"
                        }), n ? t.extend(f, {
                            "data-help-content": n
                        }) : t.extend(f, {
                            "class": "term no-tooltip"
                        });
                        var l = this.madlib_input(f, r);
                        i.isBuildWealth() && !i.goalTerm() ? e = l : i.isEmergency() ? e = "I want my wealth protection funded in " + l + " years." : e = "I may need this money in " + l + " years."
                    }
                    return this.text_wrapper(e)
                },
                target_text: function() {
                    var e, r, i = "goalAmount",
                        s = this.self.model,
                        o = {},
                        u;
                    s.get("goalAmount") && (o = {
                        value: this.integer(s.get("goalAmount"))
                    });
                    if (s.isEmergency()) r = "If you're not sure, 6x your essential monthly expenses is a good rule of thumb.", u = this.madlib_input(t.extend({
                        name: i,
                        "data-help-content": r
                    }, o, b)), e = "I would like to have $" + u + " as a Wealth Protection for unexpected expenses.";
                    else if (s.isRetirementGoalDisplayedAsAge()) r = "If you're not sure, 8x your estimated income before retirement is a good rule of thumb. You can always change this later.", u = this.madlib_input(t.extend({
                        name: i,
                        "data-help-content": r
                    }, o, b)), e = "and I want to have $" + u + " in this goal when I retire.";
                    else {
                        var f = s.isOther() ? s.get("name") : a.getLabelForGoalType(s.get("goalType"));
                        r = "Estimate how much you would need for your " + n.e(f) + " goal.", u = this.madlib_input(t.extend({
                            name: i,
                            "data-help-content": r
                        }, o, b)), e = "I would like to have $" + u + " to pay for my <span class='other-label'>" + n.e(f) + "</span> goal."
                    }
                    return this.text_wrapper(e)
                },
                initial_deposit_text: function() {
                    var e, n, r = this.self.model;
                    if (!this.self._shouldShowInitialDeposit()) return "";
                    r.isIRA() ? (n = "Try to max out your SMSF contributions. This should not include rollovers", this._hasRollover() || (n += " (you can do a rollover after your SMSF is set up)"), n += ".") : n = "You can start this goal with an initial deposit, or enter 0 if you will deposit money later.";
                    var i = {};
                    r.isIRA() && (i.style = "text-align: left;");
                    var s = this.madlib_input(t.extend({
                        name: "amount",
                        placeholder: "optional",
                        "data-help-content": n,
                        "data-validation-model": "initialDeposit"
                    }, i, b));
                    if (r.isRetirementGoalDisplayedAsAge()) e = "I want to deposit $" + s + (r.isIRA() ? " into my IRA for the " : " initially."), r.isIRA() && (e += '<span class="selector-wrapper">' + this.contribution_type_selector() + "</span>.");
                    else if (r.isBuildWealth()) e = "I would like to start investing with an initial deposit of $" + s + ".";
                    else {
                        var o = "";
                        BMT.accountGroup.isPersonal() && (o = "From my current savings "), e = o + "I could deposit $" + s + " initially."
                    }
                    return this.text_wrapper(e)
                },
                contribution_type_selector: function() {
                    var e = this.self.model.get("contributionType");
                    return this.build_dropdown_menu(s.getInstance().contributionsForSelect(this.self.model, !0), t.extend({
                        name: "contributionType",
                        "class": "contribution-type-selector"
                    }, e ? {
                        value: e
                    } : {}))
                },
                text_wrapper: function(e) {
                    return '<span class="madlib-section">' + e + "</span>"
                },
                madlib_input: function(e, t) {
                    return t && (e.style = (e.style || "") + " width: " + t + "px;"), e["class"] = (e["class"] || "") + " blank-line", "<input " + this.build_attributes(e) + " />"
                },
                full_madlib: function() {
                    var e = this.self.model,
                        t = "";
                    return e.isEmergency() ? t = this.target_text() + this.term_text() + this.initial_deposit_text() : e.isBuildWealth() ? t = this.initial_deposit_text() + this.term_text() : e.isRetirementGoalDisplayedAsAge() ? t = this.current_age_text() + this.term_text() + this.target_text() + this.initial_deposit_text() : t = this.target_text() + this.term_text() + this.initial_deposit_text(), t
                }
            },
            events: {
                "keyup input[name=term]": "updateTerm",
                "keyup input[name=age]": "updateAge",
                "keyup input[name=goalAmount]": "updateGoalAmount",
                "keyup input[name=currentAge]": "updateCurrentAge",
                "keydown input.term": function(e) {
                    return this.restrictNumeric(e) && this.restrictLength(e, 2)
                },
                "change .contribution-type-selector": "contributionTypeChanged",
                "change .ira-type-selector": "iraTypeChanged",
                "click button.ok": "onOK",
                "click button.cancel": "cancel"
            },
            validation: {
                extraFields: ["amount", "currentAge"],
                extraModels: {
                    initialDeposit: function() {
                        return this.initialDeposit
                    },
                    user: function() {
                        return this.model.get("accountGroup").get("parentUser")
                    }
                },
                transformers: {
                    currentAge: {
                        attr_name: "dateOfBirth",
                        transform: function(e) {
                            return e = parseInt(e), (new Date((new Date).getTime() - e * Date.MS_PER_YEAR)).serverFormat()
                        }
                    },
                    term: w,
                    age: E
                },
                before: function(e) {
                    return this.allowValidation
                }
            },
            _hasRollover: function() {
                return !!this.options.rollover
            },
            _showAgeText: function() {
                return this.model.isRetirementGoalDisplayedAsAge() && !this.model.get("accountGroup").get("parentUser").has("dateOfBirth")
            },
            disable_button: function() {
                var e = !this.$targetInput.val() && !this.model.isBuildWealth(),
                    t = !this.$termInput.val() && !this.model.isEmergency(),
                    n = !this.$currentAgeInput.val() && this._showAgeText();
                return e || t || n
            },
            onRender: function() {
                this.$initialDepositInput = this.$("input[name=amount]"), this.$termInput = this.$("input[name=" + (this.model.isRetirementGoalDisplayedAsAge() ? "age" : "term") + "]"), this.$targetInput = this.$("input[name=goalAmount]"), this.$contributionTypeSelector = this.$(".contribution-type-selector"), this.$currentAgeInput = this.$("input[name=currentAge]"), this.$iraTypeSelector = this.$(".ira-type-selector")
            },
            onShow: function() {
                this.initialDeposit = new i.Model({
                    account: this.model,
                    type: "DEPOSIT"
                }), this.model.isNew() && this.model.isIRA() && this._shouldShowInitialDeposit() && this.contributionTypeChanged(), this.$("input.blank-line")[0].focus(), rivets.bind(this.$(".next-step"), {
                    model: this.model,
                    view: this
                }), this.allowValidation = !1
            },
            updateTerm: function(e) {
                this.trigger("change:goalCompletionDate")
            },
            updateAge: function(e) {
                this.trigger("change:goalCompletionDate")
            },
            updateGoalAmount: function(e) {
                this.trigger("change:goalAmount")
            },
            updateCurrentAge: function(e) {
                this.trigger("change:currentAge")
            },
            contributionTypeChanged: function(e) {
                var t = this.$contributionTypeSelector.val();
                this.initialDeposit.set("contributionType", t)
            },
            iraTypeChanged: function(e) {
                var t = this.$iraTypeSelector.val(),
                    n = d.getDisplayName(t);
                this.model.set({
                    accountType: t,
                    name: n
                }, {
                    forceUpdate: !0
                }), BMT.vent.trigger("adviceAccount:changedAccount", this.model)
            },
            _shouldShowInitialDeposit: function() {
                var e = BMT.accountGroup.get("bankAccount"),
                    t = e && e.isActiveAndConfirmed();
                return this.model.isNew() && !this._hasRollover() && t
            },
            _getAccountAttributes: function() {
                var e = parseInt(this.$termInput.val()),
                    t = parseFloat(this.formatter.removeCommas(this.$targetInput.val() || "")),
                    n;
                this._isTermValAge() ? n = u.Model.convertAgeToDate(e) : n = u.Model.convertTermToDate(e);
                var r = (n.getTime() - Date.now().getTime()) / Date.MS_PER_YEAR,
                    i = {
                        goalCompletionDate: n.serverFormat(),
                        allocation: u.Model.getAllocationRecommendation(r, this.model),
                        accountType: this.model.get("accountType")
                    };
                return this.model.isBuildWealth() || (i.goalAmount = t), i
            },
            _isTermValAge: function() {
                return this.model.isRetirementGoalDisplayedAsAge()
            },
            _getInitialDepositAttributes: function() {
                var e = parseFloat(this.formatter.removeCommas(this.$initialDepositInput.val() || "")),
                    t = this.$contributionTypeSelector.val();
                return {
                    amount: e,
                    contributionType: this.model.isIRA() ? t : null
                }
            },
            _getUserAttributes: function() {
                var e = this.$currentAgeInput.val(),
                    t = this.validation.transformers.currentAge.transform(e);
                return {
                    dateOfBirth: t
                }
            },
            onOK: function() {
                if (this._showAgeText()) {
                    var e = this._getUserAttributes();
                    if (!this.model.get("accountGroup").get("parentUser").set(e)) {
                        this._showValidationErrors(["currentAge"]);
                        return
                    }
                }
                var n = this._getAccountAttributes(),
                    r = this.model.validate(n);
                if (r) {
                    this._showValidationErrors(t.keys(r));
                    return
                }
                var i = this._getInitialDepositAttributes(),
                    s = i.amount,
                    u = s > 0,
                    a = !u || !this.initialDeposit.validate(i);
                if (!a && !this.shouldInterruptDeposit(s)) {
                    this._showValidationErrors(["amount"]);
                    return
                }
                var f = this,
                    l = function() {
                        f.doSaveChain({
                            isNew: f.model.isNew(),
                            attributes: n,
                            hasInitialDeposit: u
                        })
                    };
                u ? (this.initialDeposit.set(i), this.shouldInterruptDeposit(s) ? this.showDepositInterruptModal(s, l) : o.start(this.initialDeposit, this.initialDeposit.attributes, function(e, t) {
                    t && BMT.modal.close(t), l()
                }, {
                    goalSetup: !0
                }, function(e) {
                    e && BMT.modal.close(e), setTimeout(function() {
                        f.$initialDepositInput.focus()
                    }, 0)
                })) : l()
            },
            doSaveChain: function(e) {
                this.block();
                var t = [this.saveAccount, this.saveRollover, this.saveInitialDeposit, this.loadPortfolioSet],
                    n = this;
                (function r(i) {
                    var s = t[i];
                    s ? s.call(n, function() {
                        r(i + 1)
                    }, e) : (BMT.vent.trigger("goalSetup:goalSaved", {
                        isNew: e.isNew
                    }), BMT.analytics.track(e.isNew ? "GoalAdded" : "GoalUpdated", {
                        Location: "GoalNarrative",
                        GoalType: n.model.get("goalType"),
                        IncomeGoal: n.model.is("income")
                    }))
                })(0)
            },
            saveAccount: function(e, t) {
                var n = this;
                this.model.save(t.attributes, {
                    success: function() {
                        t.isNew ? (BMT.accounts().add(n.model), BMT.refreshAccounts(e)) : e()
                    },
                    error: function() {
                        n.unblock()
                    }
                })
            },
            saveRollover: function(e, t) {
                t.isNew && this._hasRollover() ? this.options.rollover.save({}, {
                    complete: e
                }) : e()
            },
            saveInitialDeposit: function(e, t) {
                t.hasInitialDeposit && t.isNew ? this.shouldInterruptDeposit(this.initialDeposit.get("amount")) && !this.isPendingTrust() ? (this.sendWireInstructionsEmail(this.initialDeposit), e()) : this.initialDeposit.save({}, {
                    success: function(e) {
                        BMT.flash("Your deposit was initiated successfully.")
                    },
                    complete: e
                }) : e()
            },
            loadPortfolioSet: function(e) {
                f.loadPortfolioSetForAccount(this.model).done(e)
            },
            _showValidationErrors: function(e) {
                this.allowValidation = !0, e ? this.triggerValidation(e) : this.triggerAllValidation(), this.allowValidation = !1
            },
            shouldInterruptDeposit: function(e) {
                var t = this.initialDeposit.get("account"),
                    n = p.maxACHTransferAmount(t);
                return e > n && t && !t.isIRA()
            },
            isPendingTrust: function() {
                return BMT.accountGroup.isPendingTrust()
            },
            showDepositInterruptModal: function(e, t) {
                if (this.isPendingTrust()) {
                    BMT.modal.show(m.create(t));
                    return
                }
                BMT.alert({
                    title: "Wire transfer required",
                    body: "Your deposit of " + this.formatter.money(e) + " is over our electronic transfer limit. We will email you instructions on how to complete a wire transfer.",
                    buttons: [{
                        id: "ok",
                        title: "Continue"
                    }],
                    handler: t,
                    bodyAttrs: {
                        style: "width: auto;"
                    }
                })
            },
            sendWireInstructionsEmail: function() {
                var e = this.initialDeposit.get("amount"),
                    t = this.initialDeposit.get("account");
                c.sendToAccountForAmount(t, e).done(function() {
                    BMT.flash("Wire instructions emailed successfully.")
                })
            },
            cancel: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "Cancel",
                    Location: "GoalSetup",
                    Type: "Button"
                }), BMT.router.navigate("advice", !0)
            }
        })
    }), define("hbs!views/common/loadingModal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="spinner"></div>\n\n<h2>', (u = n.message) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.message, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</h2>\n", s
        });
        return t.registerPartial("views/common/loadingModal", n), n
    }), define("views/common/loadingModalView", ["common/betterment.views", "hbs!views/common/loadingModal"], function(e, t) {
        return e.ModalView.extend({
            template: t,
            className: "loading-modal",
            fadeIn: !0,
            fadeOut: !0,
            options: {
                hideCloseButton: !0
            },
            templateHelpers: {
                message: function() {
                    return this.self.message
                }
            },
            onInitialize: function() {
                var e = this;
                this.superClassName = "thin-panel", this.message = this.options.message || "", this.duration = this.options.duration || 2e3, this.next = this.options.next || function() {
                    BMT.modal.close(e)
                }
            },
            onShow: function() {
                var e = this;
                setTimeout(function() {
                    e.next()
                }, e.duration)
            }
        })
    }), define("hbs!views/advice/goalSetup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<h1 class="tab-header">', (u = n.headerText) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.headerText, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</h1>\n<div class="panel card body clearfix">\n    <div class="controls">\n        <div id="goalSelection"></div>\n    </div>\n    <div class="info">\n        <div>\n            <div class="narrative"></div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/advice/goalSetup", n), n
    }), define("views/advice/goalSetupView", ["underscore", "models/account", "common/betterment.views", "views/advice/adviceGoalSelectionView", "views/advice/narrativeView", "views/common/loadingModalView", "views/advice/goalCompleteView", "hbs!views/advice/goalSetup"], function(e, t, n, r, i, s, o, u) {
        return n.View.extend({
            id: "goalSetup",
            template: u,
            templateHelpers: {
                headerText: function() {
                    var e = this.self.model;
                    return e && e.isNew() ? "Goal set up" : "Your goals"
                }
            },
            regions: {
                goalSelection: "#goalSelection",
                narrative: ".narrative"
            },
            onInitialize: function() {
                this.model = BMT.selectedAccount, this.listenTo(BMT.vent, "advice:selectGoal", this.showGoalInfo, this), this.listenTo(BMT.vent, "goalSetup:goalSaved", this.showGoalCompletion, this)
            },
            onShow: function() {
                if (!this.model) {
                    BMT.router.navigate("summary", !0);
                    return
                }
                this.model.isNew() && this.model.set("accountGroup", BMT.accountGroup, {
                    silent: !0
                }), this.showSelector()
            },
            onDestroy: function() {
                this.model && this.model.isNew() && !this.model.isComplete() && this.model.set("accountGroup", null), BMT.refreshAccounts()
            },
            showSelector: function() {
                var e = new t.Collection([this.model]);
                this.goalSelection.show(new r({
                    collection: e,
                    childViewOptions: {
                        showGoalAmount: !1,
                        showDelete: !0
                    }
                }))
            },
            showGoalInfo: function(e) {
                this.model = BMT.selectedAccount = e.account, this.narrative.show(new i({
                    model: this.model,
                    rollover: this.options.rollover
                }))
            },
            showGoalCompletion: function(t) {
                if (t.isNew) BMT.modal.show(new s({
                    message: "Customizing a portfolio for you.",
                    duration: 3e3,
                    next: function() {
                        var e = BMT.selectedAccount;
                        BMT.modal.replaceWith(new o({
                            isRollover: !!this.options.rollover,
                            model: e
                        })), BMT.router.navigate("advice", !0), this.options.rollover && BMT.flash("Rollover request sent. Check your email for detailed instructions.")
                    }.bind(this)
                }));
                else {
                    var n = "Your " + e.escape(this.model.get("name")) + " goal has been updated.";
                    BMT.navigateWithFlash("summary", n)
                }
            }
        })
    }), define("views/common/addGoalEmptyPageView", ["common/betterment.views", "views/common/addGoalView"], function(e, t) {
        return e.View.extend({
            onShow: function() {
                BMT.router.navigate("summary", !0), t.show()
            }
        })
    }), define("hbs!views/advice/rolloverSetup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<h1 class="tab-header">Rollover Request</h1>\n<div class="panel card body clearfix">\n    <div class="controls">\n        <div id="goalSelection"></div>\n        ', (u = n.prevPageLink) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.prevPageLink, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n    </div>\n    <div class="info">\n        <div>\n            <div class="narrative"></div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/advice/rolloverSetup", n), n
    }), define("views/advice/rolloverAccountSelectorView", ["underscore", "backbone", "views/common/dropdown/dropdownView"], function(e, t, n) {
        function r(t) {
            return e.map(t, function(e) {
                return {
                    name: e.isNew() ? e.get("name") + " - New Account" : e.get("name") + " - Existing Account",
                    value: e.isNew() ? e.get("accountType") : e.get("id"),
                    action: e.get("accountType"),
                    eventName: "accountChanged"
                }
            })
        }

        function i(e) {
            return e.isNew() ? e.get("accountType") : e.get("id")
        }
        var s = n.extend({
            onSelected: function(e) {
                e.preventDefault();
                var t = $(e.currentTarget),
                    n = t.data("value"),
                    r = t.data("actionName"),
                    i = t.data("eventName");
                i && this.trigger(i, {
                    value: n,
                    accountType: r
                })
            }
        }, {
            create: function(e) {
                var t = r(e.accounts),
                    n = e.selectedAccount ? i(e.selectedAccount) : null;
                return new s({
                    defaultPlaceholder: "Select One",
                    items: t,
                    accounts: e.accounts,
                    selectedValue: n
                })
            }
        });
        return s
    }), define("hbs!views/advice/rolloverNarrative", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="heading">\n    We need a little bit more information on your rollover\n</div>\n<div class="narrative-container">\n    <div class="narrative-outline">\n        <div class="narrative-inside">\n\n            <div class="madlib rollover">\n                <span class="madlib-section">\n                    I want to rollover a ', (u = n.rolloverSelector) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.rolloverSelector, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n                    <span data-hide="view:has_selected_rollover < view.selectedRollover">\n                        into a <span class="ira-name grey">BetaSmartz IRA</span>.\n                    </span>\n                    <span data-show="view:show_rollover_account_type < view.selectedRollover">\n                        into a <span class="ira-name grey"></span>.\n                    </span>\n                    <span data-show="view:show_fund_type_selector < view.selectedRollover">\n                        <span style="margin-left: 10px;">\n                            This plan contains ', (u = n.fundTypeSelector) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.fundTypeSelector, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '.\n                        </span>\n                    </span>\n                    <span data-show="view:show_account_selector < view.selectedRollover">\n                        <span style="margin-left: 10px;">\n                            into a BetaSmartz <span class="account-selector"></span>.\n                        </span>\n                    </span>\n                </span>\n\n                <span data-show="view:show_provider < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                    <span class="madlib-section">\n                        My old retirement provider is\n                        <span data-show="view:show_other_provider < view.selectedProvider">\n                            <input type="text" class="blank-line" name="previousProvider" data-help-content="Enter the name of your old retirement provider." />\n                        </span>\n                        ', (u = n.providerSelector) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.providerSelector, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '.\n                    </span>\n\n                    <span class="madlib-section" data-show="view:show_default_flow_text < view.selectedRollover view.selectedProvider">\n                        I&#39;m rolling over an account with approximately\n                        $<input type="text" class="blank-line money" name="approximateValue" data-help-content="This can be an estimate." money-input />.\n                    </span>\n\n                    <span class="madlib-section" data-show="view:show_direct_transfer_flow_text < view.selectedRollover view.selectedProvider">\n                        I&#39;m ready to begin a direct transfer now.\n                    </span>\n\n                </span>\n\n                <div class="clear-left tos-area" data-show="view:should_create_account < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                    <p>Since you are adding an IRA, we need you to agree to the IRA terms below.</p>\n                    <div class="terms-of-service"></div>\n                </div>\n            </div>\n            <div class="next-step">\n                <div class="vertical-align">\n                    <span class="next-step-text">\n\n                        <!-- if the rollover type requires matched/unmatched show the checkbox for that -->\n                        <span class="match-line" data-show="view:show_matched < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                            <input type="checkbox" name="matched" />\n                            My employer has matched my contributions to my\n                            <span data-html="view:rollover_label < view.selectedRollover"></span>\n                        </span>\n\n                        <!-- if the rollover type Does NOT require matched/unmatched, show a FAQ link -->\n                        <span data-hide="view:hide_help < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                            Not sure which plan you currently have?\n                            \n                        </span>\n\n                        <span data-show="view:show_fund_type_both < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                            <span class="contact-support both">\n                                Having mixed Traditional and Roth funds is a special case, so we ask that you call us at <strong class="bold-text">888.428.9482</strong> or email <a href="mailto:support@betasmartz.com">support@betasmartz.com</a> so we can walk you through the process.\n                            </span>\n                        </span>\n\n                        <span data-show="view:show_fund_type_not_sure < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                            <span class="contact-support not-sure">\n                                Generally, if you deducted your contributions from your income, they are Traditional funds.  If your employer made contributions, such as a match, they are Traditional funds.  Roth funds are post-tax.\n                                <br />\n                                <br />\n                                If you still are not sure, call your plan provider.  For further assistance, call us at <strong class="bold-text">888.428.9482</strong>.\n                            </span>\n                        </span>\n\n                    </span>\n                    <button class="right orange ok"\n                        data-enabled="view:enable_button < view.selectedRollover view.selectedFundType view.selectedAccountType view.selectedProvider view.approximateValue view.termsAcceptance"\n                        data-text="view:button_text < view.selectedRollover view.selectedFundType view.selectedAccountType view.selectedProvider"\n                        data-class="view:button_class < view.selectedRollover view.selectedFundType view.selectedAccountType">\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/advice/rolloverNarrative", n), n
    }), define("views/advice/rolloverNarrativeView", ["jquery", "underscore", "common/betterment.views", "components/portfolio/scripts/services/portfolioSetService", "components/account/scripts/services/retirementService", "components/account/scripts/services/goalService", "models/rolloverFollowup", "models/account", "components/common/scripts/models/appData", "views/common/inheritedIRAWarningView", "views/common/termsOfServiceView", "views/advice/rolloverAccountSelectorView", "hbs!views/advice/rolloverNarrative", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        function y() {
            return {
                position: {
                    my: "top left",
                    at: "bottom center"
                },
                style: {
                    classes: "conversation-tooltip",
                    tip: {
                        mimic: "top center"
                    }
                },
                show: "focus",
                hide: "blur"
            }
        }
        var d = "OTHER",
            v = null,
            m = null,
            g = null;
        return n.View.extend({
            template: h,
            toolTips: {
                "input.blank-line[name=approximateValue]": y(),
                "input.blank-line[name=previousProvider]": y()
            },
            regions: {
                termsOfServiceRegion: ".terms-of-service",
                accountSelectorRegion: ".account-selector"
            },
            templateHelpers: {
                rolloverSelector: function() {
                    var e = [{
                        label: "IRA",
                        children: [m.TRADITIONAL_IRA, m.ROTH_IRA, m.SEP_IRA, m.SIMPLE_IRA]
                    }, {
                        label: "Company Plan",
                        children: [m.FOUR_OH_ONE_K, m.PENSION_PLAN, m.PROFIT_SHARING]
                    }, {
                        label: "Non-profit / Education",
                        children: [m.FOUR_OH_THREE_B, m.FOUR_OH_ONE_A]
                    }, {
                        label: "Government Plan",
                        children: [m.FOUR_FIFTY_SEVEN_B, m.THRIFT_SAVINGS_PLAN]
                    }];
                    return this.build_dropdown_menu(e, {
                        "class": "rollover-selector"
                    }, {
                        title: "Select One"
                    })
                },
                providerSelector: function() {
                    return this.build_dropdown_menu(this._organizedProviders(), {
                        "class": "provider-selector",
                        name: "previousProvider"
                    }, {
                        title: "Select One"
                    })
                },
                _organizedProviders: function() {
                    var e = t.map(this.self.SourceProviders, function(e, t) {
                        return {
                            label: t === "UNKNOWN" ? "I don't know" : e.displayName,
                            value: t
                        }
                    });
                    return t.sortBy(e, function(e) {
                        return e.value === "UNKNOWN" || e.value === "OTHER" ? "~" : e.value
                    })
                },
                fundTypeSelector: function() {
                    var e = [{
                        label: "Traditional funds only (most common)",
                        value: v.TRADITIONAL
                    }, {
                        label: "Traditional and Roth funds",
                        value: v.BOTH
                    }, {
                        label: "Roth funds only",
                        value: v.ROTH
                    }, {
                        label: "I'm not sure",
                        value: v.NOT_SURE
                    }];
                    return this.build_dropdown_menu(e, {
                        "class": "fund-type-selector",
                        name: "fundType",
                        value: v.UNKNOWN
                    }, {
                        title: "Select One"
                    })
                },
                accountSelector: function() {
                    var e = [{
                        label: "SEP IRA",
                        value: p.SEP_IRA
                    }, {
                        label: "SMSF",
                        value: p.TRADITIONAL_IRA
                    }];
                    return this.build_dropdown_menu(e, {
                        "class": "account-selector",
                        name: "accountType",
                        value: p.UNKNOWN
                    }, {
                        title: "Select One"
                    })
                }
            },
            events: {
                "change .rollover-selector": "rolloverChanged",
                "change .provider-selector": "providerChanged",
                "change .fund-type-selector": "fundTypeChanged",
                "change .terms-of-service input[type=checkbox]": "termsAcceptanceUpdated",
                "keyup input[name=previousProvider]": "otherProviderChange",
                "keyup input[name=approximateValue]": "approximateValueChange",
                "click .match-line": "toggleMatched",
                "click button.ok": "next"
            },
            validation: {
                before: function(e) {
                    return this.allowValidation
                },
                model: function() {
                    return new o.Model({
                        account: this.view._account(),
                        sourceType: this.view.selectedRollover,
                        fundType: this.view.selectedFundType
                    })
                },
                extraModels: {
                    account: function() {
                        return this._account()
                    }
                },
                extraFields: ["iraAgreement", "iraWithholding", "sepAgreement"]
            },
            _account: function() {
                return this.options.account
            },
            _setSelectedAccount: function(e) {
                this.options.account = BMT.selectedAccount = e
            },
            onInitialize: function() {
                this.listenTo(this, "change:selectedFundType", this._populateAccount, this), this.listenTo(this, "change:selectedAccountType", this._populateAccount, this), this.listenTo(this, "change:selectedFundType", this.hideAllValidation, this), this.listenTo(this, "change:selectedAccountType", this.hideAllValidation, this), p.UNKNOWN = "-", this.FundTypes = v = t.extend({}, a.getInstance().get("fundTypes"), {
                    BOTH: "BOTH",
                    NOT_SURE: "NOT_SURE",
                    UNKNOWN: "-"
                }), this.SourceTypes = m = t.reduce(a.getInstance().get("sourceTypes"), function(e, n, r) {
                    return n.accountTypes || (n = t.clone(n), n.accountTypes = [p.UNKNOWN]), e[r] = n, e
                }, {}), this.SourceProviders = g = a.getInstance().get("rolloverProviders")
            },
            onRender: function() {
                this.$matchedCheckbox = this.$("input[name=matched]"), this.$approximateValueInput = this.$("input[name=approximateValue]"), this.$previousProviderInput = this.$("input[name=previousProvider]")
            },
            onShow: function() {
                this.termsOfServiceRegion.show(new l({
                    showIraAgreement: !0,
                    expandHeight: 80,
                    hideErrors: !0
                })), BMT.analytics.track("PageVisited", {
                    Location: "RolloverNarrative"
                }), this.allowValidation = !1, rivets.bind(this.$(".narrative-inside"), {
                    view: this
                })
            },
            rolloverChanged: function(n) {
                var r = e(n.currentTarget).val();
                this.selectedRollover = t.chain(m).values().where({
                    value: r
                }).first().value(), this.selectedAccountType = null, this.selectedFundType = null, this.termsOfServiceRegion.currentView.setAccountType(this.selectedAccountType), this.trigger("change:selectedAccountType"), t.contains(this.selectedRollover.accountTypes, p.UNKNOWN) ? this.fundTypeChanged() : this.show_account_selector() ? this.renderAccountSelector() : this.show_rollover_account_type() && this.accountChanged({
                    accountType: this.selectedRollover.accountTypes[0]
                }), this.$(".ira-name").text(this._getName()).removeClass("grey").addClass("blue"), this.trigger("change:selectedRollover"), BMT.analytics.track("InputSubmitted", {
                    Name: "RolloverAccountType",
                    Type: "Field",
                    Location: "RolloverNarrative"
                })
            },
            fundTypeChanged: function(e) {
                var t = this.$(".fund-type-selector"),
                    n = t.val();
                this.selectedFundType = n, this.trigger("change:selectedFundType"), this.selectedAccountType = null, this.termsOfServiceRegion.currentView.setAccountType(this.selectedAccountType), this.trigger("change:selectedAccountType")
            },
            accountChanged: function(e) {
                var t = e && e.accountType,
                    n = e && e.accountId;
                this.selectedAccountType = t, this.options.account = this._getOrCreateAccount(n, t), this.termsOfServiceRegion.currentView.setAccountType(t), this.trigger("change:selectedAccountType"), this.selectedFundType = null, this.trigger("change:selectedFundType")
            },
            renderAccountSelector: function(t) {
                this.accountSelectorView && this.accountSelectorView.remove();
                var n = {
                    accounts: this._getAccountsForSelector(),
                    selectedAccount: t
                };
                this.accountSelectorView = c.create(n), this.listenTo(this.accountSelectorView, "accountChanged", function(t) {
                    var n = e.isNumeric(t.value) ? parseInt(t.value) : null;
                    this.accountChanged({
                        accountId: n,
                        accountType: t.accountType
                    }), this.renderAccountSelector(this._getOrCreateAccount(n, t.accountType))
                }), this.accountSelectorRegion.show(this.accountSelectorView)
            },
            _getOrCreateAccount: function(e, t) {
                var n = BMT.accounts().where({
                    accountType: t,
                    id: e
                })[0];
                return n && !n.is("inherited") ? BMT.accounts().where({
                    accountType: t,
                    inherited: !1,
                    id: e
                })[0] : u.Model.buildIRA(p.getDisplayName(t), t)
            },
            termsAcceptanceUpdated: function() {
                this.trigger("change:termsAcceptance")
            },
            providerChanged: function(n) {
                var r = e(n.currentTarget),
                    i = r.val(),
                    s = i === d;
                this.selectedProvider = i, r[(s ? "add" : "remove") + "Class"]("other"), this.trigger("change:selectedProvider"), s && setTimeout(t.bind(function() {
                    this.$previousProviderInput.focus()
                }, this), 0), BMT.analytics.track("InputSubmitted", {
                    Name: "PreviousProvider",
                    Type: "Field",
                    Location: "RolloverNarrative"
                })
            },
            otherProviderChange: function(e) {
                this.trigger("change:selectedProvider")
            },
            approximateValueChange: function(e) {
                this.trigger("change:approximateValue"), BMT.analytics.track("InputSubmitted", {
                    Name: "ApproximateValue",
                    Type: "Field",
                    Location: "RolloverNarrative"
                })
            },
            toggleMatched: function(t) {
                if (e(t.target).is("input")) return;
                var n = e(t.currentTarget).find("input[type=checkbox]");
                n.attr("checked", !n.attr("checked"))
            },
            _getAccountType: function() {
                return this.selectedAccountType || this._fundTypeToAccountType(this._getFundType()) || p.UNKNOWN
            },
            _getFundType: function() {
                return this.selectedFundType || v.UNKNOWN
            },
            _getName: function() {
                return p.getDisplayName(this._getAccountType()) || "BetaSmartz IRA"
            },
            _isRealFundType: function() {
                return o.Model.isRealFundType(this._getFundType())
            },
            _isRealAccountType: function() {
                return p.isValid(this._getAccountType())
            },
            _isRealFundOrAccountType: function() {
                return this._isRealFundType() || this._isRealAccountType()
            },
            _isAmbiguousFundType: function() {
                return t.contains([v.BOTH, v.NOT_SURE], this._getFundType())
            },
            _isIraSourceType: function() {
                return t.contains([m.TRADITIONAL_IRA, m.ROTH_IRA, m.SEP_IRA, m.SIMPLE_IRA], this.selectedRollover)
            },
            _fundTypeToAccountType: function(e) {
                return e === v.ROTH ? p.ROTH_IRA : e === v.TRADITIONAL ? p.TRADITIONAL_IRA : null
            },
            _populateAccount: function() {
                var e = this._getAccountType(),
                    t = this._getName(),
                    n = null;
                if (this._isRealAccountType()) {
                    n = BMT.accounts().where({
                        accountType: e,
                        inherited: !1
                    });
                    if (n.length === 0) this._setSelectedAccount(u.Model.buildIRA(t, e));
                    else if (n.length === 1) this._setSelectedAccount(n[0]);
                    else if (n.length > 1) {
                        var r = this.options.account;
                        r && r.get("accountType") === e && this._setSelectedAccount(r)
                    }
                } else {
                    var i = this._fundTypeToAccountType(v.TRADITIONAL);
                    this._setSelectedAccount(u.Model.buildIRA("IRA", i))
                }
                BMT.vent.trigger("adviceAccount:changedAccount", this._account())
            },
            _canDirectTransfer: function() {
                return this._isIraSourceType()
            },
            _hasMultipleIRAsForSourceType: function(e) {
                return BMT.accounts().where({
                    inherited: !1
                }).filter(function(n) {
                    return t.contains(e.accountTypes, n.get("accountType"))
                }).length > 1
            },
            _getAccountsForSelector: function() {
                var e = [];
                return t.each(this.selectedRollover.accountTypes, function(t) {
                    var n = BMT.accounts().where({
                        inherited: !1,
                        accountType: t
                    });
                    n.length > 0 ? e = e.concat(n) : e.push(u.Model.buildIRA(p.getDisplayName(t), t))
                }), e
            },
            show_other_provider: function() {
                return this.selectedProvider === "OTHER"
            },
            show_default_flow_text: function() {
                var e = !t.isUndefined(this.selectedProvider) && !this._canDirectTransfer();
                return e || (this.$approximateValueInput.val(""), this.approximateValueChange()), e
            },
            show_direct_transfer_flow_text: function() {
                return this._canDirectTransfer()
            },
            show_provider: function() {
                return this._isRealFundOrAccountType()
            },
            rollover_label: function() {
                return this.$(".rollover-selector").find(".dropdown-label").html()
            },
            has_selected_rollover: function() {
                return !!this.selectedRollover
            },
            show_rollover_account_type: function() {
                return this.selectedRollover && !this.show_fund_type_selector() && !this.show_account_selector()
            },
            show_fund_type_selector: function() {
                return this.selectedRollover && this.selectedRollover.accountTypes[0] === p.UNKNOWN
            },
            show_account_selector: function() {
                return this.selectedRollover && (this._hasMultipleIRAsForSourceType(this.selectedRollover) || this.selectedRollover.accountTypes.length > 1)
            },
            show_matched: function() {
                var e = this._getFundType();
                return e !== v.ROTH ? !1 : this.selectedRollover && this.selectedRollover.supportsMatching
            },
            hide_help: function() {
                return this.show_matched() || this.show_fund_type_both() || this.show_fund_type_not_sure()
            },
            show_fund_type_both: function() {
                return this.selectedFundType === v.BOTH
            },
            show_fund_type_not_sure: function() {
                return this.selectedFundType === v.NOT_SURE
            },
            enable_button: function() {
                var e = this.selectedProvider && (this.selectedProvider !== d || this.$previousProviderInput.val()),
                    t = this.$approximateValueInput.val(),
                    n = this._isRealFundOrAccountType(),
                    r = this._isAmbiguousFundType(),
                    i = this._canDirectTransfer(),
                    s = !this.should_create_account() || this.termsOfServiceRegion.currentView.hasUserAcceptedAgreements();
                return s && (r || n && e && (i || t))
            },
            button_text: function() {
                return this._canDirectTransfer() ? "Next" : this._isAmbiguousFundType() ? "OK" : this._account() && this._account().isNew() ? "Next" : "Request"
            },
            button_class: function() {
                var e = "right blue ok ";
                return e += this._isAmbiguousFundType() ? "ambiguous" : "", e
            },
            should_create_account: function() {
                return this._account() && this._account().isNew() && this._isRealFundOrAccountType()
            },
            quit: function() {
                this.options.callback ? this.options.callback() : BMT.router.navigate(this.options.prevPage || "summary", !0)
            },
            next: function() {
                var e = this._account();
                if (e.isInheritedIRA()) {
                    f.show();
                    return
                }
                if (this._isAmbiguousFundType()) {
                    this.quit();
                    return
                }
                var n = this.should_create_account(),
                    u = i.canGiveRetireeAdvice(BMT.user) || this._canDirectTransfer(),
                    a = t.extend({
                        name: this._getName(),
                        accountType: this._getAccountType()
                    }, n ? {
                        iraAgreement: this.termsOfServiceRegion.currentView.hasUserAcceptedUserAgreement(),
                        iraWithholding: this.termsOfServiceRegion.currentView.hasUserAcceptedIRAAgreement()
                    } : {});
                this._getAccountType() === p.SEP_IRA && (a.sepAgreement = this.termsOfServiceRegion.currentView.hasUserAcceptedSEPAgreement(), a.sepSingleEmployee = this.termsOfServiceRegion.currentView.getSEPEmployeesVal());
                var l = {
                        sourceType: this.selectedRollover.value,
                        sourceTypeEnum: this.selectedRollover,
                        fundType: this.selectedFundType,
                        previousProvider: this.selectedProvider === d ? this.$previousProviderInput.val() : this.SourceProviders[this.selectedProvider].displayName,
                        sourceProviderOther: this.selectedProvider === d ? this.$previousProviderInput.val() : null,
                        sourceProvider: this.selectedProvider,
                        matched: this.$matchedCheckbox.is(":checked"),
                        approximateValue: this.formatter.removeCommas(this.$approximateValueInput.val()) || undefined,
                        account: e
                    },
                    c = new o.Model,
                    h = !e.validate(a),
                    v = !c.validate(l);
                if ((!n || h) && (this._canDirectTransfer() || v)) {
                    c.set(l);
                    if (n) {
                        e.set(a);
                        if (u) {
                            e.set("accountGroup", BMT.accountGroup);
                            var m = s.getDefaultTermForContext({
                                goalType: e.get("goalType"),
                                income: e.get("income"),
                                isRetired: BMT.user.isRetired(),
                                age: BMT.user.getAge(),
                                isPersonal: e.get("accountGroup").isPersonal()
                            });
                            e.setGoalTerm(m), e.set("allocation", e.allocationRecommendation()), this.block();
                            var g = e.save().then(function() {
                                return r.loadPortfolioSetForAccount(e)
                            });
                            this._canDirectTransfer() ? (g.then(function() {
                                BMT.router.navigate("rollover-request", !0, {
                                    rollover: c,
                                    nextFlow: "advice"
                                })
                            }).always(this.unblock.bind(this)), this._recordDirectTransferFlow()) : (g.then(function() {
                                c.save().then(this._callbackOrNavigate("advice")).always(this.unblock.bind(this))
                            }.bind(this)).always(this.unblock.bind(this)), this._recordManualFlow())
                        } else BMT.router.navigate("goalSetup", !0, {
                            rollover: c
                        }), this._recordManualFlow()
                    } else this.block(), this._canDirectTransfer() ? BMT.router.navigate("rollover-request", !0, {
                        rollover: c,
                        nextFlow: "advice"
                    }) : (c.save().then(this._callbackOrNavigate("summary")).always(this.unblock.bind(this)), this._recordManualFlow())
                } else this.allowValidation = !0, this.termsOfServiceRegion.currentView.checkAgreements(), this.triggerAllValidation(), this.allowValidation = !1
            },
            _recordManualFlow: function() {
                BMT.analytics.track("InfoRequested", {
                    Location: "RolloverNarrative",
                    Subject: "Rollover",
                    SourceType: this.selectedRollover.value,
                    FundType: this.selectedFundType,
                    PreviousProvider: this._previousProviderName(),
                    Matched: this.$matchedCheckbox.is(":checked"),
                    ApproximateValue: this.formatter.removeCommas(this.$approximateValueInput.val()) || undefined,
                    RolloverProcess: "Manual"
                })
            },
            _recordDirectTransferFlow: function() {
                BMT.analytics.track("ElementClicked", {
                    Location: "RolloverNarrative",
                    Name: "BeginDirectTransfer",
                    Type: "Button"
                })
            },
            _previousProviderName: function() {
                return this.selectedProvider === d ? this.$previousProviderInput.val() : this.selectedProvider
            },
            _callbackOrNavigate: function(e) {
                var t = this.options.callback;
                return function() {
                    var n = "Rollover Request Sent.",
                        r = "Check your email for detailed instructions.";
                    t ? BMT.alert({
                        icon: "accept",
                        title: n,
                        body: r,
                        handler: t
                    }) : BMT.navigateWithFlash(e, n + " " + r)
                }
            }
        })
    }), define("views/advice/rolloverSetupView", ["components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/advice/rolloverSetup", "models/account", "views/advice/adviceGoalSelectionView", "views/advice/rolloverNarrativeView", "models/rolloverFollowup", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u) {
        return t.View.extend({
            id: "rollover",
            template: n,
            templateHelpers: {
                prevPageLink: function() {
                    var t = this.self.options.prevPage;
                    if (t) {
                        var n = this.self.options.prevPageText || "&lt; Back to " + t.capitalize();
                        return e.s('<a href="#' + t + '" class="back-link">' + n + "</a>")
                    }
                    return ""
                }
            },
            regions: {
                goalSelection: "#goalSelection",
                narrative: ".narrative"
            },
            events: {
                "click a.back-link": "goBack"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "advice:selectGoal", this.showGoalInfo, this)
            },
            onShow: function() {
                var e = r.Model.buildIRA("IRA", u.TRADITIONAL_IRA);
                this.goalSelection.show(new i({
                    collection: new r.Collection([e]),
                    childViewOptions: {
                        showGoalAmount: !1,
                        showDelete: !0,
                        showChange: !1,
                        isRollover: !0
                    }
                }))
            },
            onDestroy: function() {
                BMT.refreshAccounts()
            },
            showGoalInfo: function(e) {
                BMT.selectedAccount = e.account, e.isSameType || this.narrative.show(new s({
                    callback: this.options.callback
                }))
            },
            goBack: function(e) {
                e && e.preventDefault(), this.options.callback ? this.options.callback() : BMT.router.navigate(this.options.prevPage || "summary", !0)
            }
        })
    }), define("hbs!views/activity/activity", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i;
                r += "\n        ", i = n["if"].call(e, e && e.hasTaxStatements, {
                    hash: {},
                    inverse: l.program(4, p, t),
                    fn: l.program(2, h, t)
                });
                if (i || i === 0) r += i;
                return r += "\n    ", r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <button class="right clearfix green get-tax-information">\n                <span class="left tax-download-arrow"></span>\n                <span class="left">\n                    Download your ', (s = n.taxYear) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.taxYear, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + " Tax Information\n                </span>\n            </button>\n        ", r
            }

            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="right taxes-coming-soon">\n                ', (s = n.taxFormAvailabilityMessage) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.taxFormAvailabilityMessage, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            </div>\n        ", r
            }

            function d(e, t) {
                return '\n                <a class="csv-download" data-track-event="ElementClicked" data-track-location="Activity" data-track-name="DownloadAsCSV" href="#" target="_blank">\n                    <span class="download-icon"></span>\n                    <span class="text-link">Download Activity as CSV</span>\n                </a>\n            '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="clearfix">\n    <h1 class="tab-header">View your account activity</h1>\n    ', o = n["if"].call(t, t && t.isTaxSeason, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += '\n</div>\n\n<div class="card">\n    <div class="panel header">\n        <div class="clearfix" style="margin-bottom: 20px;">\n            <div class="goal-selector-region"></div>\n\n            <ul class="toggle-graph-type time-range-selector">\n                ', (u = n.date_range_items) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.date_range_items, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n            </ul>\n\n            ", (u = n.transactionTypeDropdown) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.transactionTypeDropdown, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n        </div>\n    </div>\n\n    <div class="transaction-table-region"></div>\n\n    <div class="panel footer clearfix">\n        <div class="download-adobe-reader">\n            Statements and confirmations can be viewed as PDFs by downloading and\n            installing the free <a target="_blank" href="http://get.adobe.com/reader/">Adobe Reader</a>.\n        </div>\n        <div class="download-activity">\n            ', o = n["if"].call(t, t && t.showCsvLink, {
                hash: {},
                inverse: l.noop,
                fn: l.program(6, d, i)
            });
            if (o || o === 0) s += o;
            return s += "\n        </div>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/activity/activity", n), n
    }), define("models/v2/transactionMemoCollection", ["components/common/scripts/util/strings", "components/common/scripts/models/v2/baseCollection", "models/v2/transactionMemo"], function(e, t, n) {
        var r = {
                endpoint: "/transaction_memos",
                model: n
            },
            i = {
                addToTransactions: function(t) {
                    var n = new s;
                    return n.fetch({
                        data: e.snakeCaseKeys(t.getForeignIdParams())
                    }).then(function() {
                        t.each(function(e) {
                            var t = n.findWhere(e.getIdParams());
                            t && (t.set("transactionType", e.get("type")), e.set("transactionMemo", t))
                        })
                    })
                }
            },
            s = t.extend(r, i);
        return s
    }), define("components/common/scripts/templateHelpers/dasherize", ["hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t) {
        e.registerHelper("dasherize", function(e) {
            return t.dasherize(e)
        })
    }), define("hbs!views/activity/taxForms", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/dasherize"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i;
                r += '\n        <tr>\n            <td class="icons">\n                ', i = n["if"].call(e, e && e.isAvailable, {
                    hash: {},
                    inverse: l.program(4, p, t),
                    fn: l.program(2, h, t)
                });
                if (i || i === 0) r += i;
                r += '\n            </td>\n            <td class="links">\n                ', i = n["if"].call(e, e && e.isAvailable, {
                    hash: {},
                    inverse: l.program(8, v, t),
                    fn: l.program(6, d, t)
                });
                if (i || i === 0) r += i;
                return r += "\n            </td>\n        </tr>\n    ", r
            }

            function h(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                    <a href="/document/Betterment-' + a((s = n.dasherize || e && e.dasherize, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.statement, i == null || i === !1 ? i : i.title), o) : u.call(e, "dasherize", (i = e && e.statement, i == null || i === !1 ? i : i.title), o))) + ".pdf?hash=" + a((i = (i = e && e.statement, i == null || i === !1 ? i : i.hash), typeof i === f ? i.apply(e) : i)) + '" target="_blank" class="tax-download-icon"><span class="pdf-small-icon"></span></a>\n                    <a href="/taxStatement?format=csv&accountGroupID=' + a((i = (i = e && e.accountGroup, i == null || i === !1 ? i : i.id), typeof i === f ? i.apply(e) : i)) + '" target="_blank" class="tax-download-icon"><span class="excel-small-icon"></span></a>\n                ', r
            }

            function p(e, t) {
                return '\n                    <span class="pdf-small-grey-icon tax-download-icon"></span>\n                    <span class="excel-small-grey-icon tax-download-icon"></span>\n                '
            }

            function d(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                    <a class="download-pdf" target="_blank" href="/document/Betterment-' + a((s = n.dasherize || e && e.dasherize, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.statement, i == null || i === !1 ? i : i.title), o) : u.call(e, "dasherize", (i = e && e.statement, i == null || i === !1 ? i : i.title), o))) + ".pdf?hash=" + a((i = (i = e && e.statement, i == null || i === !1 ? i : i.hash), typeof i === f ? i.apply(e) : i)) + '">' + a((i = e && e.accountName, typeof i === f ? i.apply(e) : i)) + " Tax Form</a>\n                ", r
            }

            function v(e, t) {
                var r = "",
                    i;
                r += "\n                    ", i = n["if"].call(e, e && e.notAvailableYet, {
                    hash: {},
                    inverse: l.program(11, g, t),
                    fn: l.program(9, m, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                ", r
            }

            function m(e, t) {
                var n = "",
                    r;
                return n += '\n                        <span class="not-available">' + a((r = e && e.accountName, typeof r === f ? r.apply(e) : r)) + " Tax Form - Available by February 17th</span>\n                    ", n
            }

            function g(e, t) {
                var n = "",
                    r;
                return n += '\n                        <span class="not-required">' + a((r = e && e.accountName, typeof r === f ? r.apply(e) : r)) + " Tax Form - Not required</span>\n                    ", n
            }

            function y(e, t) {
                var r = "",
                    i;
                r += '\n        <h2>Download your SMSF Tax Form</h2>\n        <p>Download a printable PDF copy of your SMSF Tax Form (1099-R and/or FMV &amp; RMD).</p>\n        <table class="tax-form-list">\n        ', i = n.each.call(e, (i = e && e.self, i == null || i === !1 ? i : i.iraStatements), {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(14, b, t)
                });
                if (i || i === 0) r += i;
                return r += "\n        </table>\n    ", r
            }

            function b(e, t) {
                var r = "",
                    i;
                r += '\n            <tr>\n                <td class="icons">\n                    ', i = n["if"].call(e, e && e.isAvailable, {
                    hash: {},
                    inverse: l.program(17, E, t),
                    fn: l.program(15, w, t)
                });
                if (i || i === 0) r += i;
                r += '\n                </td>\n                <td class="links">\n                    ', i = n["if"].call(e, e && e.isAvailable, {
                    hash: {},
                    inverse: l.program(21, x, t),
                    fn: l.program(19, S, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                </td>\n            </tr>\n        ", r
            }

            function w(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                        <a href="/document/Betterment-' + a((s = n.dasherize || e && e.dasherize, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.statement, i == null || i === !1 ? i : i.title), o) : u.call(e, "dasherize", (i = e && e.statement, i == null || i === !1 ? i : i.title), o))) + ".pdf?hash=" + a((i = (i = e && e.statement, i == null || i === !1 ? i : i.hash), typeof i === f ? i.apply(e) : i)) + '" target="_blank" class="tax-download-icon"><span class="pdf-small-icon"></span></a>\n                    ', r
            }

            function E(e, t) {
                return '\n                        <span class="pdf-small-grey-icon tax-download-icon"></span>\n                    '
            }

            function S(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                        <a class="download-pdf" target="_blank" href="/document/Betterment-' + a((s = n.dasherize || e && e.dasherize, o = {
                    hash: {}
                }, s ? s.call(e, (i = e && e.statement, i == null || i === !1 ? i : i.title), o) : u.call(e, "dasherize", (i = e && e.statement, i == null || i === !1 ? i : i.title), o))) + ".pdf?hash=" + a((i = (i = e && e.statement, i == null || i === !1 ? i : i.hash), typeof i === f ? i.apply(e) : i)) + '">' + a((i = e && e.accountName, typeof i === f ? i.apply(e) : i)) + " IRA Tax Form</a>\n                    ", r
            }

            function x(e, t) {
                var r = "",
                    i;
                r += "\n                        ", i = n["if"].call(e, e && e.notAvailableYet, {
                    hash: {},
                    inverse: l.program(24, N, t),
                    fn: l.program(22, T, t)
                });
                if (i || i === 0) r += i;
                return r += "\n                    ", r
            }

            function T(e, t) {
                var n = "",
                    r;
                return n += '\n                            <span class="not-available">' + a((r = e && e.accountName, typeof r === f ? r.apply(e) : r)) + " IRA Tax Form - Available by February 17th</span>\n                        ", n
            }

            function N(e, t) {
                var n = "",
                    r;
                return n += '\n                            <span class="not-required">' + a((r = e && e.accountName, typeof r === f ? r.apply(e) : r)) + " IRA Tax Form - Not required</span>\n                        ", n
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = n.helperMissing,
                a = this.escapeExpression,
                f = "function",
                l = this;
            s += "<h1>Download your " + a((o = (o = (o = t && t.self, o == null || o === !1 ? o : o.options), o == null || o === !1 ? o : o.taxYear), typeof o === f ? o.apply(t) : o)) + ' Tax Forms</h1>\n<div class="tax-forms">\n    <h2>Download your Consolidated Tax Forms</h2>\n    <p>Download a printable PDF copy of your Consolidated Tax Form (1099-B and/or 1099-DIV).</p>\n    <table class="tax-form-list">\n    ', o = n.each.call(t, (o = t && t.self, o == null || o === !1 ? o : o.taxableStatements), {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n    </table>\n\n    ", o = n["if"].call(t, t && t.shouldHaveIraStatements, {
                hash: {},
                inverse: l.noop,
                fn: l.program(13, y, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n    <hr />\n\n    <h3 class="subtitle">Also Available for Automatic Import</h3>\n\n    <div class="form-type horizontal">\n        <div class="icon">\n            <span class="turbotax-large-icon"></span>\n        </div>\n        <article>\n            <h2>TurboTax<sup>&reg;</sup> Import</h2>\n            <p>Import your tax information automatically through TurboTax by selecting "Import from my bank or brokerage."</p>\n        </article>\n    </div>\n\n    <div class="form-type horizontal">\n        <div class="icon">\n            <span class="hr-block-large-icon"></span>\n        </div>\n        <article>\n            <h2>H&amp;R Block<sup>&trade;</sup> Import</h2>\n            <p>Import your tax information automatically through H&amp;R Block Tax Software by selecting Financial Institution import when entering income information.</p>\n        </article>\n    </div>\n    <div class="form-type horizontal">\n        <div class="icon">\n            <span class="taxact-large-icon"></span>\n        </div>\n        <article>\n            <h2>TaxACT<sup>&trade;</sup> Import</h2>\n            <p>Import your tax information automatically through TaxACT by selecting &quot;Stock Data Import&quot; when entering investment income information.</p>\n        </article>\n    </div>\n</div>\n\n<div class="modal-buttons">\n    <button id="cancel" class="cancel">Done</button>\n</div>\n', s
        });
        return t.registerPartial("views/activity/taxForms", n), n
    }), define("views/activity/taxFormsView", ["jquery", "underscore", "backbone", "common/betterment.views", "hbs!views/activity/taxForms"], function(e, t, n, r, i) {
        return r.ModalView.extend({
            template: i,
            templateHelpers: {
                shouldHaveIraStatements: function() {
                    return this.self.options.taxStatements.shouldHaveIraStatement()
                }
            },
            events: {
                "click button#cancel": "onCancel",
                "click .download-pdf": "onDownloadPDF"
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            },
            onInitialize: function() {
                this.taxableStatements = this.options.taxStatements.getTaxableStatements(), this.iraStatements = this.options.taxStatements.getIraStatements()
            },
            onDownloadPDF: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "PDF",
                    Location: "TaxModal",
                    Type: "Link",
                    TaxYear: this.options.taxYear
                })
            }
        })
    }), define("models/taxStatements", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        function s() {
            var e = Date.now();
            return e.isAfter(i)
        }
        var i = new Date((new Date).getFullYear(), 1, 9),
            o = r.Model.extend({
                onInitialize: function(e) {
                    this.statement = e.statement, this.statementType = e.statementType, this.accountGroup = e.accountGroup
                },
                accountName: function() {
                    return this.accountGroup.get("name")
                },
                isTaxable: function() {
                    return this.statementType === "TEN_NINE_NINE_B_DIV"
                },
                isAvailable: function() {
                    return !!this.statement
                },
                notAvailableYet: function() {
                    return !s()
                }
            }),
            u = r.Model.extend({
                onInitialize: function(e) {
                    this.statements = e.accountGroups.reduce(function(e, n) {
                        var r = ["TEN_NINE_NINE_B_DIV"];
                        n.isPersonal() && r.push("TEN_NINE_NINE_R");
                        var i = t.map(r, function(e) {
                            var r = t.findWhere(n.get("taxStatements"), {
                                statementType: e
                            });
                            return new o({
                                accountGroup: n,
                                statement: r,
                                statementType: e
                            })
                        });
                        return e.concat(i)
                    }, [])
                },
                getAvailabilityDate: function() {
                    return i
                },
                hasStatements: function() {
                    return t.any(this.statements, function(e) {
                        return e.isAvailable()
                    })
                },
                areAvailable: function() {
                    return s()
                },
                getTaxableStatements: function() {
                    return t.filter(this.statements, function(e) {
                        return e.isTaxable()
                    })
                },
                getIraStatements: function() {
                    return t.filter(this.statements, function(e) {
                        return !e.isTaxable()
                    })
                },
                shouldHaveIraStatement: function() {
                    return t.any(this.statements, function(e) {
                        return e.accountGroup.is("shouldHaveIraStatement")
                    })
                }
            });
        return u
    }), define("views/activity/activityView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "hbs!views/activity/activity", "backbone", "marionette", "common/betterment.models", "models/transaction", "models/v2/transactionMemoCollection", "common/betterment.views", "views/activity/transactionTableView", "views/activity/taxFormsView", "views/common/dropdown/goalSelectorView", "components/common/scripts/analytics/analytics", "models/taxStatements"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d) {
        var v;
        return f.View.extend({
            template: r,
            id: "activity",
            regions: {
                tableRegion: ".transaction-table-region",
                goalSelectorRegion: ".goal-selector-region"
            },
            events: {
                "change .transaction-type-selector": "onTypeChange",
                "click  .time-range-selector li": "onDateRangeChange",
                "click  .get-tax-information": "showTaxDownloadModal",
                "click  .document-download a": "onStatementDownload"
            },
            toolTips: {
                ".tax-help": {
                    position: {
                        my: "top right",
                        at: "bottom center"
                    }
                }
            },
            templateHelpers: {
                hasTaxStatements: function() {
                    return this.self.taxStatements.hasStatements()
                },
                taxFormAvailabilityMessage: function() {
                    return !this.self.taxStatements.hasStatements() && this.self.taxStatements.areAvailable() ? "Good news, no tax forms for " + this.taxYear() + "." : "All tax forms will be available by " + this.self.taxStatements.getAvailabilityDate().toString("MMMM d")
                },
                transactions: function() {
                    return v
                },
                date_range_items: function() {
                    var e = [{
                            label: "1 mo",
                            value: "30"
                        }, {
                            label: "1 yr",
                            value: "365"
                        }, {
                            label: "All",
                            value: ""
                        }],
                        r = t.map(e, function(t, r) {
                            var i = "time-range";
                            return r === 0 ? i += " first" : r === e.length - 1 && (i += " last"), i += v.startDaysAgo === t.value ? " active" : "", n.s('<li data-range="' + n.e(t.value) + '" class="' + n.e(i) + '">' + n.e(t.label) + "</li>")
                        });
                    return n.join(r, "")
                },
                transactionTypeDropdown: function() {
                    return this.build_dropdown_menu({
                        all: "All Activity",
                        DEPOSIT: "Deposits",
                        WITHDRAWAL: "Withdrawals",
                        DIVIDEND: "Dividends",
                        ALLOCATION_CHANGE: "Allocation Changes",
                        FEE: "Fees",
                        STATEMENT: "Statements",
                        other: "Other"
                    }, {
                        "class": "transaction-type-selector",
                        value: v.typeFilter
                    })
                },
                showCsvLink: function() {
                    return BMT.user.isFull()
                }
            },
            onInitialize: function() {
                this.taxStatements = new d({
                    accountGroups: BMT.user.get("accountGroups")
                }), BMT.selectedAccount = BMT.selectedAccount || BMT.accounts().at(0), v || (v = new u.Collection), v.accountID = BMT.selectedAccount && BMT.selectedAccount.getIdOrCid() || "", v.accountGroupId = BMT.accountGroup.get("id"), BMT.accountGroup.isClosed() ? (v.startDaysAgo = "", v.typeFilter = "STATEMENT") : v.startDaysAgo = v.startDaysAgo === "" ? "" : v.startDaysAgo || "365"
            },
            onRender: function() {
                (BMT.accounts().length > 1 || BMT.user.is("hasClosedAccounts")) && this.renderGoalSelector()
            },
            onShow: function() {
                p.track("PageVisited", {
                    Location: "Activity"
                }), this.$dateSelector = this.$(".time-range-selector"), this.$csvDownload = this.$(".csv-download"), this.table = new l({
                    collection: v
                }), this.tableRegion.show(this.table), this.onDateRangeChange()
            },
            renderGoalSelector: function() {
                var e = {
                        prepend: [{
                            name: "All Goals",
                            eventName: "allGoalsSelected",
                            value: undefined
                        }]
                    },
                    t = h.create(e);
                this.listenTo(t, "accountChanged", function() {
                    v.accountID = BMT.selectedAccount.get("id"), this.fetchTransactions()
                }), this.listenTo(t, "allGoalsSelected", function() {
                    v.accountID = null, this.fetchTransactions()
                }), this.goalSelectorRegion.show(t)
            },
            showTaxDownloadModal: function(e) {
                p.track("ElementClicked", {
                    Name: "GetTaxInfo",
                    Location: "Activity",
                    Type: "Link"
                }), BMT.modal.show(new c({
                    taxYear: this.templateHelpers.taxYear(),
                    taxStatements: this.taxStatements
                }))
            },
            onTypeChange: function(t) {
                if (!BMT.user.isFull()) return;
                v.typeFilter = e(t.currentTarget).val(), this.fetchTransactions(), this.$csvDownload.css("display", v.typeFilter === "STATEMENT" ? "none" : "block")
            },
            onStatementDownload: function(t) {
                var n = e(t.target).closest(".document-download").find(".document-description"),
                    r = n ? n.html().trim() : "Unknown";
                p.track("ElementClicked", {
                    Name: "Statement",
                    Location: "Activity",
                    Type: r
                })
            },
            onDateRangeChange: function(t) {
                if (!t || this.$dateSelector.find("li.active")[0] !== e(t.currentTarget)[0]) {
                    var n;
                    t ? (this.$dateSelector.find(".active").removeClass("active"), n = e(t.currentTarget), n.addClass("active")) : n = this.$dateSelector.find("li.active"), v.startDaysAgo = String(n.data("range")), this.fetchTransactions()
                }
            },
            fetchTransactions: function() {
                this.table.block(), v.fetch({
                    silent: !0
                }).then(this.addTransactionMemos.bind(this)).then(this.updateTable.bind(this))
            },
            addTransactionMemos: function() {
                return a.addToTransactions(v)
            },
            updateTable: function() {
                var e = v.filter(function(e) {
                    var n = e.num("typeID"),
                        r = u.Model.filters[v.typeFilter];
                    return t.isEmpty(r) || t.include(r, n)
                }, this);
                this.$("a.csv-download").attr("href", v.url("csv")), this.table.collection = new u.Collection(e), this.table.options.aggregate = !v.accountID, this.table.options.typeFilter = v.typeFilter, this.table.render()
            }
        })
    }), define("hbs!views/performance/performance", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h1 class="tab-header">Review and compare performance</h1>\n\n<div class="card">\n\n    <div class="header-region clearfix"></div>\n\n    <div class="panel body clearfix">\n\n        <div class="controls">\n            <div class="sidebar">\n\n                <!-- Sidebar Selector Region -->\n                <div id="sidebarSelector"></div>\n\n            </div>\n        </div>\n\n        <div class="info">\n            <div class="filter-bar">\n                <ul class="time-range-selector button-filters right">\n                    <li><a href="#" data-range="180">6m</a></li>\n                    <li><a href="#" data-range="360">1y</a></li>\n                    <li class="year-to-date" data-help-content="Year To Date"><a href="#" data-range="ytd">YTD</a></li>\n                    <li><a href="#" data-range="all">All</a></li>\n                </ul>\n            </div>\n\n            <!-- Graph Region -->\n            <div id="performanceGraph"></div>\n\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/performance/performance", n), n
    }), define("models/analysisReturn", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
                url: "/analysisReturns",
                idAttribute: "lineID"
            }, {
                GROUPS: {
                    ACCOUNT: {
                        title: "Your Goals",
                        order: 0
                    },
                    STRATEGY: {
                        title: "BetaSmartz Allocations",
                        order: 1
                    },
                    BENCHMARK: {
                        title: "Benchmarks",
                        order: 2
                    },
                    BOND: {
                        title: "Bonds",
                        order: 3
                    },
                    STOCK: {
                        title: "Stocks",
                        order: 4
                    }
                },
                POSITION_COLORS: ["blue", "green", "orange", "purple", "teal", "yellow"]
            }),
            s = "performance_returns_comparisons",
            o = r.Collection.extend({
                model: i,
                url: "/analysisReturns",
                parse: function(e, n) {
                    if (e.length === 0) {
                        BMT.logError("Expected Analysis Returns data from server.");
                        return
                    }
                    this.availableColors = i.POSITION_COLORS;
                    var r = this,
                        o = BMT.getCookie(s),
                        u = o ? o.split(",") : [],
                        a = !1,
                        f = t.reduce(e, function(e, t) {
                            return e[t.lineID] = !0, e
                        }, {});
                    u = u.filter(function(e) {
                        return !t.isUndefined(f[e])
                    });
                    var l = !!u.length;
                    return t.each(e, function(e) {
                        if (l) {
                            var n = u.indexOf(e.lineID.toString()) > -1;
                            e.initial = n
                        }
                        a = a || e.initial, e.color = e.initial && r.availableColors.shift();
                        var i;
                        t.each(e.returns, function(e) {
                            i = typeof e.ac == "undefined" ? i : e.ac, e.ac = i, e.d = new Date(Number(e.d))
                        })
                    }), a || (BMT.logError("Expected default values from /analysisReturns"), e[0].initial = !0, e[0].color = this.availableColors.shift()), e
                },
                activate: function(e) {
                    e.set({
                        initial: !0,
                        color: this.availableColors.shift()
                    })
                },
                deactivate: function(e) {
                    this.availableColors.unshift(e.get("color")), e.set({
                        initial: !1,
                        color: !1
                    })
                },
                forSelect: function(e) {
                    var n = e ? t.filter(this.models, e) : this.models;
                    return n = t.groupBy(n, function(e) {
                        return e.get("group")
                    }), n = t.map(n, function(e, n) {
                        return {
                            value: n,
                            label: i.GROUPS[n].title,
                            children: t.map(e, function(e, t) {
                                return {
                                    value: e.get("lineID"),
                                    label: e.get("name"),
                                    color: e.get("color")
                                }
                            })
                        }
                    }), n = t.sortBy(n, function(e) {
                        return i.GROUPS[e.value].order
                    }), n
                },
                forGraphing: function(e) {
                    return this.filter(function(e) {
                        return e.get("initial")
                    }).map(function(t, n) {
                        var r = 1,
                            i, s = e ? t.get("returns").filter(e) : t.get("returns");
                        return {
                            key: t.get("name"),
                            lineID: t.get("lineID"),
                            group: t.get("group"),
                            createdDate: t.date("createdDate").getTime(),
                            color: t.get("color"),
                            values: s.map(function(e, t) {
                                var n = e.zero_balance || !1;
                                return n ? r = 1 : r *= (e.i || 0) + 1, i = {
                                    date: e.d,
                                    inc: e.i,
                                    val: r - 1,
                                    ac: e.ac
                                }, i
                            })
                        }
                    }).filter(function(e) {
                        return e.values.length
                    })
                }
            });
        return {
            Model: i,
            Collection: o
        }
    }), define("models/analysisBalance", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        var i = r.RelationalModel.extend({
                dated: function() {
                    return this.date("d")
                },
                invested: function() {
                    return this.num("inv") || 0
                },
                balance: function() {
                    return this.num("bal") || 0
                }
            }),
            s = r.Collection.extend({
                model: i,
                urlRoot: "/analysisBalances",
                url: function() {
                    return this.urlRoot + "?account=" + this.accountId
                }
            });
        return {
            Model: i,
            Collection: s
        }
    }), define("hbs!views/performance/performanceHeader", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="info-tip advice-box">\n        <div class="lightbulb-tip-icon left"></div>\n        <div class="tip-body center">\n            ', (s = n.negativeReturnsTipMessage) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.negativeReturnsTipMessage, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '\n            <a data-track-event="ElementClicked" data-track-location="Performance" data-track-name="NegativeReturnsAnalysis" href="', (s = n.marketTimingUrl) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.marketTimingUrl, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '" target="_blank">Learn more&nbsp;&gt;</a>\n        </div>\n        <div data-track-event="ElementClicked" data-track-location="Performance" data-track-name="NegativeReturnsProtTipClose" data-track-type="ProTip" class="tip-close close right">\n            +\n        </div>\n    </div>\n', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            o = n["if"].call(t, t && t.showNegativeReturnsInfoTip, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n<div class="graph-type-selector-container">\n    <ul class="graph-type-selector button-filters left">\n        <li><a href="#" data-type="returns">% Returns</a></li>\n        <li><a href="#" data-type="balances">$ Values</a></li>\n    </ul>\n</div>\n', s
        });
        return t.registerPartial("views/performance/performanceHeader", n), n
    }), define("views/performance/performanceHeaderView", ["jquery", "underscore", "common/betterment.views", "hbs!views/performance/performanceHeader", "common/constants/returnsConstants", "models/visitor", "components/common/scripts/util/formatter"], function(e, t, n, r, i, s, o) {
        var u = {
                template: r,
                className: "performanceHeader panel",
                events: {
                    "click .tip-close": "closeTip"
                },
                ui: {
                    infoTip: "div.info-tip"
                },
                templateHelpers: {
                    showNegativeReturnsInfoTip: function() {
                        if (!s.hasVariation("negative_returns_tooltip_on")) return !1;
                        if (f.tipHidden) return !1;
                        var e = i.NEGATIVE_RETURNS_PERCENTAGE_THRESHOLD / 100,
                            t = i.NEGATIVE_RETURNS_AGE_THRESHOLD_IN_YEARS.years().ago();
                        return BMT.accountGroup.meetsNegativeReturnsPercentageThreshold(e) && BMT.accountGroup.meetsNegativeReturnsAgeThreshold(t) ? (BMT.analytics.track("ElementViewed", {
                            Type: "ProTip",
                            Name: "NegativeReturnsProTip",
                            Location: "Performance",
                            Path: "#performance"
                        }), !0) : BMT.accounts().any(function(n) {
                            return n.meetsNegativeReturnsPercentageThreshold(e) && n.meetsNegativeReturnsAgeThreshold(t) ? (BMT.analytics.track("ElementViewed", {
                                Type: "ProTip",
                                Name: "NegativeReturnsProTip",
                                Location: "Performance",
                                Path: "#performance"
                            }), !0) : !1
                        })
                    },
                    negativeReturnsTipMessage: function() {
                        return i.NEGATIVE_RETURNS_TIP_STRING
                    },
                    marketTimingUrl: function() {
                        return this.brochure_url("resources/investment-strategy/portfolio-management/its-about-time-in-the-market-not-market-timing/")
                    }
                },
                closeTip: function() {
                    this.ui.infoTip.slideUp(), f.tipHidden = !0
                }
            },
            a = {
                tipHidden: !1
            },
            f = n.View.extend(u, a);
        return f
    }), define("views/performance/performanceReturnsSelectorView", ["jquery", "underscore", "backbone", "marionette", "common/betterment.views", "models/analysisReturn"], function(e, t, n, r, i, s) {
        var o = "performance_returns_comparisons",
            u = 6;
        return i.View.extend({
            template: "performance/performanceReturnsSelector",
            tagName: "div",
            events: {
                "click .goals-list li a.remove": "onRemoveComparison",
                "change .comparison-selector": "onAddComparison"
            },
            templateHelpers: {
                comparison_accounts: function(e) {
                    return this.self.collection.forSelect(function(t) {
                        return e && t.get("initial") || !e && !t.get("initial")
                    })
                },
                build_comparison_selector: function() {
                    var e = this.comparison_accounts(!1);
                    return this.build_dropdown_menu(e, {
                        "class": "left comparison-selector",
                        value: ""
                    }, {
                        title: "Add a comparison"
                    })
                }
            },
            onInitialize: function() {
                this.listenTo(this.collection, "reset change", this.render)
            },
            onRender: function() {
                this.$comparisonSelector = this.$(".comparison-selector button"), this.$maxComparisons = this.$(".max-comparisons"), this.collection.length ? this.onComparisonsChanged() : this.$comparisonSelector.attr({
                    title: "Loading data, please wait...",
                    disabled: "disabled"
                })
            },
            onAddComparison: function(e) {
                var t = this.$(e.currentTarget).val(),
                    n = this.collection.get(t);
                if (n) {
                    if (n.get("group") === "ACCOUNT") BMT.analytics.track("GoalComparisonAdded", {
                        Location: "Analysis",
                        Group: "Account"
                    });
                    else if (n.get("group") === "STRATEGY") {
                        var r = n.get("name").match(/(\d{1,3})%.+\/\s*?(\d{1,3})%/);
                        BMT.analytics.track("GoalComparisonAdded", {
                            Location: "Analysis",
                            Group: "Strategy",
                            Comparison: r[1] + "-" + r[2]
                        })
                    } else if (n.get("group") === "BENCHMARK") {
                        var i = n.get("name").match(/\(([\^\.A-Z]+)\)/);
                        BMT.analytics.track("GoalComparisonAdded", {
                            Location: "Analysis",
                            Group: "Benchmark",
                            Comparison: i[1]
                        })
                    }
                    this.collection.activate(n)
                }
                return !1
            },
            onRemoveComparison: function(e) {
                var t = this.$(e.currentTarget).data("id"),
                    r = this.collection.get(t),
                    i = new n.Collection(this.collection.where({
                        initial: !0
                    }));
                return i.length === 1 ? BMT.alert({
                    title: "Can't Remove Comparison",
                    body: "You must have at least one comparison selected. In order to remove this one you must add another one.",
                    icon: "warning"
                }) : r && this.collection.deactivate(r), !1
            },
            onComparisonsChanged: function() {
                var e = new n.Collection(this.collection.where({
                    initial: !0
                }));
                BMT.setCookie(o, e.pluck("lineID").join(",")), !e.length || e.length >= u ? (this.$comparisonSelector.attr({
                    title: "Maximum of 6 comparisons allowed. Remove some comparisons in order to add new ones.",
                    disabled: "disabled"
                }), this.$maxComparisons.show()) : (this.$comparisonSelector.prop("disabled", !1).attr("title", ""), this.$maxComparisons.hide())
            }
        })
    }), define("views/performance/performanceBalancesSelectorView", ["jquery", "underscore", "backbone", "marionette", "common/betterment.views"], function(e, t, n, r, i) {
        var s = "performance_balances_account",
            o = "performance_show_contributions";
        return i.View.extend({
            template: "performance/performanceBalancesSelector",
            tagName: "div",
            events: {
                "click .special-toggle": "onToggleContributions",
                "click .toggle-views li a.toggle-row": "onAccountSelected"
            },
            templateHelpers: {
                show_contributions: function() {
                    return this.self.showContributions
                }
            },
            onInitialize: function() {
                var e = BMT.getCookie(o);
                this.showContributions = e === null ? !0 : e === "true", this.initialAccount = BMT.getCookie(s)
            },
            onRender: function() {
                var e;
                this.$accountSelector = this.$(".toggle-views"), this.initialAccount ? e = this.$accountSelector.find('a.toggle-row[data-account="' + this.initialAccount + '"]') : e = this.$accountSelector.find("a.toggle-row:first"), e && e.length && e.trigger("click")
            },
            onToggleContributions: function(e) {
                return this.showContributions = !this.showContributions, this.$(e.currentTarget).find(".toggle-legend").html(this.showContributions ? "Hide" : "Show"), BMT.setCookie(o, this.showContributions), BMT.vent.trigger("change:performanceContributions", this.showContributions), !1
            },
            onAccountSelected: function(e) {
                var t = this.$(e.currentTarget);
                if (!t.hasClass("active")) {
                    var n = t.data("account");
                    this.$accountSelector.find("a.active").removeClass("active"), t.addClass("active"), BMT.setCookie(s, n), BMT.vent.trigger("change:loadingAccount", n)
                }
                return !1
            }
        })
    }), define("hbs!views/performance/performanceReturnsGraph", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="performance-graph">\n    <svg class="graph"></svg>\n\n    <!-- Tooltip -->\n    <div class="hover-tooltip ui-tooltip qtip ui-tooltip-default ui-tooltip-rounded ui-tooltip-pos-rc ui-tooltip-focus">\n        <table class="chart-details returns-graph" border="0">\n            <tr>\n                <td><h3 class="tooltip-date"></h3></td>\n                <td>Returns</td>\n                <td>Bonds/Stocks</td>\n            </tr>\n        </table>\n    </div>\n\n    <div class="graph-helper">\n        <div class="helper-group">\n            <a class="view-about right" href="#">About this data</a>\n        </div>\n    </div>\n</div>\n\n<div id="aboutDataCopy" class="start-warning">\n    <p><strong>% Returns for data with different starting points should not be compared.</strong></p>\n</div>\n\n<div id="aboutDataCopy">\n    <p><strong>About the data</strong></p>\n    <p>\n    This graph shows the time-weighted return of your portfolio and comparisons at the selected time points.  Time-weighted returns compensate for external cash flows such as deposits, withdrawals, and dividends which are inherent in a typical portfolio.  This allows apples-to-apples comparison to other possible BetaSmartz allocations and benchmarks where similar flows may not have occurred.  <a href="', (u = n.timeWeightedReturnsLink) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.timeWeightedReturnsLink, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" target="_blank">More about time-weighted return</a>.\n    </p>\n</div>\n', s
        });
        return t.registerPartial("views/performance/performanceReturnsGraph", n), n
    }), define("views/performance/allocationPieGraph", ["jquery", "components/common/scripts/constants/colors"], function(e, t) {
        var n = function(e) {
            var n = 50,
                r = 25,
                i = Math.min(n, r) / 2,
                s = d3.scale.ordinal().range([t.ALLOCATION_PIE_GRAPH.LOW_RANGE, t.ALLOCATION_PIE_GRAPH.HIGH_RANGE]),
                o = d3.svg.arc().outerRadius(i),
                u = [e.bonds, e.stocks],
                a = d3.layout.pie().startAngle(-90 * Math.PI / 180).endAngle(90 * Math.PI / 180).sort(null).value(function(e) {
                    return e
                }),
                f = d3.select(e.selector).append("svg").attr("width", n).attr("height", r).append("g").attr("transform", "translate(" + n / 2 + "," + r / 2 + ")");
            f.selectAll(".arc").data(a(u)).enter().append("g").attr("class", "arc").append("path").attr("d", o).style("fill", function(e, t) {
                return s(t)
            })
        };
        return n
    }), define("views/performance/performanceReturnsGraphView", ["jquery", "underscore", "common/betterment.views", "hbs!views/performance/performanceReturnsGraph", "components/common/scripts/util/formatter", "models/analysisReturn", "views/performance/allocationPieGraph", "components/common/scripts/constants/colors", "components/common/scripts/services/domainService"], function(e, t, n, r, i, s, o, u, a) {
        var f = 500,
            l = function(e) {
                return e.lineID
            };
        return n.View.extend({
            template: r,
            tagName: "div",
            events: {
                "click .view-about": "onToggleAboutData"
            },
            templateHelpers: {
                timeWeightedReturnsLink: function() {
                    return a.brochureHost() + "/resources/investment-strategy/portfolio-management/betterment-calculate-investment-returns/"
                }
            },
            onInitialize: function(e) {
                this.listenTo(BMT.vent, "change:performanceRange", this.setRange), this.listenTo(this.collection, "reset change", this.render)
            },
            onShow: function() {
                this.initializeGraph()
            },
            onRender: function() {
                this.initializeGraph()
            },
            onToggleAboutData: function(e) {
                var t = this.$aboutDataCopy.is(":visible"),
                    n = t ? '<span class="caret-right"></span> About the data' : "Hide";
                return this.$(e.currentTarget).html(n), this.$aboutDataCopy.slideToggle(), !1
            },
            initializeGraph: function() {
                this.$aboutDataCopy = this.$("#aboutDataCopy:not(.start-warning)"), this.$startWarning = this.$(".start-warning"), this.$tooltip = this.$(".hover-tooltip"), this.$container = this.$(".performance-graph");
                var t = e('<div class="spinner-container">');
                this.$container.append(t), this.block(this.$(".spinner-container")), this.margin = {
                    top: 15,
                    right: 40,
                    bottom: 150,
                    left: 15
                }, this.margin2 = {
                    top: 400,
                    right: 40,
                    bottom: 40,
                    left: 15
                }, this.width = 635 - this.margin.left - this.margin.right, this.height = 500 - this.margin.top - this.margin.bottom, this.height2 = 500 - this.margin2.top - this.margin2.bottom, this.x = d3.time.scale().range([0, this.width]), this.x2 = d3.time.scale().range([0, this.width]), this.y = d3.scale.linear().range([this.height, 0]), this.y2 = d3.scale.linear().range([this.height2, 0]), this.svg = d3.select(".performance-graph svg").attr("width", this.width + this.margin.left + this.margin.right).attr("height", this.height + this.margin.top + this.margin.bottom), this.svg.append("defs").append("clipPath").attr("id", "clip").append("rect").attr("width", this.width).attr("height", this.height), this.focus = this.svg.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")"), this.context = this.svg.append("g").attr("transform", "translate(" + this.margin2.left + "," + this.margin2.top + ")"), this.setupGenerators(), this.setupAxes(), this.collection && this.collection.length && (this.drawData(), this.$(".spinner-container").remove(), this.unblock())
            },
            setupGenerators: function() {
                var e = this;
                this.brush = this.brush = d3.svg.brush().x(this.x2).on("brush", this.onBrushChanged), this.line = d3.svg.line().x(function(t, n) {
                    return e.x(t.date)
                }).y(function(t, n) {
                    return e.y(t.val || 0)
                }), this.line2 = d3.svg.line().x(function(t, n) {
                    return e.x2(t.date)
                }).y(function(t, n) {
                    return e.y2(t.val || 0)
                })
            },
            setupAxes: function() {
                function t(e, t) {
                    var n = t[1] - t[0];
                    return n <= 1578e8 ? d3.time.format("%b %Y")(e) : d3.time.format("%Y")(e)
                }
                var e = this;
                this.xAxis = nv.models.axis().scale(this.x).showMaxMin(!1).tickSize(10, 0).orient("bottom").ticks(6).tickPadding(8).tickFormat(function(n) {
                    return t(n, e.x.domain())
                }), this.xAxis2 = nv.models.axis().scale(this.x2).showMaxMin(!1).tickSize(10, 0).orient("bottom").ticks(6).tickPadding(8).tickFormat(function(n) {
                    return t(n, e.x2.domain())
                }), this.yAxis = nv.models.axis().scale(this.y).showMaxMin(!1).tickSize(-1 * this.width, 0).ticks(8).orient("right").tickFormat(function(e) {
                    return i.pct(e, 1)
                }), this.focus.append("g").attr("class", "nv-x axis").attr("transform", "translate(0," + (this.y.range()[0] + 5) + ")").call(this.xAxis), this.focus.append("g").attr("class", "nv-y axis").attr("transform", "translate(" + this.x.range()[1] + ", 0)").call(this.yAxis), this.context.append("g").attr("class", "nv-x axis").attr("transform", "translate(0," + (this.y2.range()[0] + 5) + ")").call(this.xAxis2), this.context.append("g").attr("class", "x brush").call(this.brush).selectAll("rect").attr("y", -6).attr("height", this.height2 + 7), this.context.select(".x.brush").selectAll(".resize").append("path").attr("d", this.resizePath), this.hoverBar = this.focus.append("path").style("stroke", u.BASE_GRAPH.STROKE).attr("display", "none").attr("class", "hover-bar")
            },
            resizePath: function(e) {
                var t = +(e === "e"),
                    n = t ? 1 : -1,
                    r = this.height2 / 3;
                return "M" + .5 * n + "," + r + "A6,6 0 0 " + t + " " + 6.5 * n + "," + (r + 6) + "V" + (2 * r - 6) + "A6,6 0 0 " + t + " " + .5 * n + "," + 2 * r + "Z" + "M" + 2.5 * n + "," + (r + 8) + "V" + (2 * r - 8) + "M" + 4.5 * n + "," + (r + 8) + "V" + (2 * r - 8)
            },
            onComparisonsChanged: function() {
                var e = this.collection.forGraphing().filter(function(e) {
                    return e.group === "ACCOUNT"
                });
                e && e.length > 0 && this.onRangeChanged(!0), this.drawData()
            },
            drawData: function() {
                var e = this;
                this.updateData(), this.updateScale();
                var t = this.focus.selectAll(".focus-line").data(this.focusData, l);
                t.transition().duration(f).attr("d", function(t) {
                    return e.line(t.values)
                }).attr("class", function(e) {
                    return "focus-line " + e.color
                }), t.enter().append("g").append("path").attr("clip-path", "url(#clip)").attr("d", function(t) {
                    return e.line(t.values)
                }).attr("class", function(e) {
                    return "focus-line " + e.color
                }), t.exit().remove();
                var n = this.focus.selectAll(".focus-point").data(this.focusData, l);
                n.attr("class", function(e) {
                    return "focus-point " + e.color
                }), n.enter().append("g").append("circle").attr("r", 2).style("display", "none").attr("class", function(e) {
                    return "focus-point " + e.color
                }), n.exit().remove();
                var r = this.context.selectAll(".context-line").data(this.contextData, l);
                r.transition().duration(f).attr("d", function(t) {
                    return e.line2(t.values)
                }), r.enter().append("g").append("path").attr("d", function(t) {
                    return e.line2(t.values)
                }).attr("class", function(e) {
                    return "context-line " + e.color
                }), r.exit().remove(), this.setRange(this.options.range), this.svg.on("mouseout", function() {
                    e.hideTooltip(this)
                }).on("mousemove", function() {
                    e.updateTooltip(this)
                })
            },
            updateData: function(e) {
                this.focusData = this.collection.forGraphing(e), this.contextData = this.collection.forGraphing();
                var n = {};
                this.focusData.forEach(function(e) {
                    e.values.forEach(function(t) {
                        var r = t.date.getTime();
                        n[r] = n[r] || [], n[r].push({
                            name: e.key,
                            color: e.color,
                            val: t.val || 0,
                            ac: t.ac
                        })
                    })
                }), this.focusMap = t.map(n, function(e, t) {
                    return {
                        date: new Date(Number(t)),
                        points: e
                    }
                })
            },
            updateScale: function() {
                var e;
                this.x2.domain([d3.min(this.contextData, function(e) {
                    return d3.min(e.values, function(e) {
                        return e.date
                    })
                }), d3.max(this.contextData, function(e) {
                    return d3.max(e.values, function(e) {
                        return e.date
                    })
                })]), this.y2.domain([d3.min(this.contextData, function(e) {
                    return d3.min(e.values, function(e) {
                        return e.val || 0
                    })
                }), d3.max(this.contextData, function(e) {
                    return d3.max(e.values, function(e) {
                        return e.val || 0
                    })
                })]), e = this.brush.empty() ? this.x2.domain() : this.brush.extent(), !this.brush.empty() && this.updateData(function(t, n) {
                    var r = t.d;
                    return r >= e[0] && r <= e[1]
                }), this.x.domain(e), this.y.domain([d3.min(this.focusData, function(e) {
                    return d3.min(e.values, function(e) {
                        return e.val || 0
                    })
                }), d3.max(this.focusData, function(e) {
                    return d3.max(e.values, function(e) {
                        return e.val || 0
                    })
                })])
            },
            updateAxes: function() {
                this.focus.select("g.nv-x.axis").transition().duration(10).call(this.xAxis), this.focus.select("g.nv-y.axis").transition().duration(10).call(this.yAxis), this.context.select("g.nv-x.axis").transition().duration(10).call(this.xAxis2)
            },
            updateGraph: function() {
                var e = this;
                this.updateScale(), this.focus.selectAll(".focus-line").data(this.focusData, l), this.focus.selectAll("path.focus-line").attr("d", function(t) {
                    return e.line(t.values)
                }).attr("class", function(e) {
                    return "focus-line " + e.color
                }), this.context.selectAll(".context-line").data(this.contextData, l), this.context.selectAll("path.context-line").attr("d", function(t) {
                    return e.line2(t.values)
                }).attr("class", function(e) {
                    return "context-line " + e.color
                }), this.updateAxes();
                var n = this.brush.empty() ? this.x2.domain() : this.brush.extent(),
                    r = t.find(this.focusData, function(e) {
                        return e && e.createdDate && Number(e.createdDate) > n[0].getTime()
                    });
                this.$startWarning.toggle(!!r)
            },
            hideTooltip: function(e) {
                var t = d3.mouse(e)[0] - this.margin.left,
                    n = d3.mouse(e)[1];
                if (t <= 0 || t > this.width || n <= 0 || n > this.height) this.$tooltip.hide(), this.hoverBar.style("display", "none"), this.focus.selectAll(".focus-point").style("display", "none")
            },
            updateTooltip: function(e) {
                var n = this,
                    r = d3.mouse(e)[0] - this.margin.left,
                    s = d3.mouse(e)[1],
                    u = this.x.invert(r);
                if (r >= 0 && r <= this.width && s >= 0 && s <= this.height) {
                    this.hoverBar.style("display", "block").attr("d", "M" + r + "," + this.height + "L" + r + "," + 0);
                    var a = d3.bisector(function(e) {
                            return e.date
                        }),
                        f = a.right(this.focusMap, u),
                        l = u.getTime(),
                        c = this.focusMap[f ? f - 1 : 0],
                        h = this.focusMap[f];
                    if (c.date < u) {
                        var p = (l - c.date.getTime()) / (h.date.getTime() - c.date.getTime()),
                            d = t.map(this.focusData, function(e) {
                                var n = function(t) {
                                        return t.name === e.key
                                    },
                                    r = t.find(c.points, n),
                                    i = t.find(h.points, n);
                                return {
                                    name: e.key,
                                    color: e.color,
                                    lineID: e.lineID,
                                    ac: r && r.ac,
                                    val: r && i && d3.interpolate(r.val, i.val)(p)
                                }
                            });
                        this.focus.selectAll(".focus-point").data(d, this.keyfunc).attr("cx", r).style("display", function(e) {
                            return e.val ? "inline" : "none"
                        }).attr("cy", function(e) {
                            return n.y(e.val || 0)
                        });
                        var v = [];
                        this.$tooltip.find(".tooltip-date").html(i.formatDate("MM dd, yy", h.date)), this.$tooltip.find("tr:gt(0)").remove(), d.forEach(function(e) {
                            e.val && (v = v.concat(["<tr>", '<td><span class="', e.color, '">', e.name, "</span></td>", '<td class="right-align"><strong>', i.pct(e.val, 1), "</strong></td>", '<td class="allocation-pie" data-ratio="', e.ac, '"></td>', "</tr>"]))
                        }), this.$tooltip.find("tr:first").after(v.join(""));
                        var m = this.$tooltip.outerWidth(),
                            g = r - m,
                            y = this.margin.left + parseInt(this.$container.css("padding-left"));
                        this.$tooltip.css({
                            display: "block",
                            left: r + y - (g > 0 ? m + 30 : -30)
                        }), this.$tooltip.find(".allocation-pie").each(function() {
                            var e = n.$(this),
                                t = e.data("ratio");
                            t !== "" && new o({
                                stocks: t * 100,
                                bonds: (1 - t) * 100,
                                selector: this
                            })
                        })
                    }
                } else this.hideTooltip(e)
            },
            onBrushChanged: function() {
                this.onRangeChanged(), this.updateGraph()
            },
            onRangeChanged: function(e) {
                var t = this.brush.empty() ? this.x2.domain() : this.brush.extent(),
                    n = e ? null : (this.x2.domain()[1] - t[0].getTime()) / 864e5;
                this.options.range = n, BMT.vent.trigger("clear:performanceRange", n)
            },
            setRange: function(e) {
                this.options.range = e;
                if (this.svg && this.focusData) {
                    var n = this.x2.domain(),
                        r = n[0],
                        i = n[1];
                    if (!e || e === "all") {
                        var s = this.contextData.filter(function(e) {
                                return e.group === "ACCOUNT"
                            }),
                            o = t.map(s, function(e) {
                                return t.find(e.values, function(e) {
                                    return e.val !== 0
                                })
                            }),
                            u = t.max(o, function(e) {
                                return e.date
                            });
                        r = s.length && u ? u.date : r
                    } else if (typeof e == "number") e = 864e5 * e, r = new Date(n[1] - e);
                    else if (e === "ytd") {
                        var a = new Date;
                        a.setMonth(0), a.setDate(1), r = a
                    }
                    i = this.getEarliestEndDate();
                    if (!r || r < n[0]) r = n[0];
                    if (!r || r > n[1]) r = n[1];
                    this.svg.select(".brush").call(this.brush.extent([r, i])), this.updateGraph()
                }
            },
            getEarliestEndDate: function() {
                var e = t.map(this.contextData, function(e) {
                    return t.last(e.values).date
                });
                return t.min(e)
            }
        })
    }), define("hbs!views/performance/performanceBalancesGraph", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="performance-graph">\n    <svg class="graph"></svg>\n\n    <div class="zero-tooltip ui-tooltip qtip ui-tooltip-default ui-tooltip-rounded ui-tooltip-focus">\n        There&#39;s not enough history in your account to graph. Please check out this section again once there is money in your account.\n    </div>\n\n    <!-- Tooltip -->\n    <div class="hover-tooltip ui-tooltip qtip ui-tooltip-default ui-tooltip-rounded ui-tooltip-pos-rc ui-tooltip-focus">\n        <table class="chart-details balances-graph" border="0">\n            <tr>\n                <td><h3 class="tooltip-date"></h3></td>\n                <td></td>\n            </tr>\n            <tr>\n                <td><span class="balance">Balance</span></td>\n                <td><span class="balance-value"></span></td>\n            </tr>\n            <tr>\n                <td><span class="invested">What you&#39;ve invested</span></td>\n                <td><span class="invested-value"></span></td>\n            </tr>\n            <tr>\n                <td><span class="earned">What you&#39;ve earned</span></td>\n                <td><span class="earned-value"></span></td>\n            </tr>\n        </table>\n    </div>\n\n    <div class="graph-helper">\n        <div class="helper-group">\n            <a class="view-about right" href="#">About this data</a>\n        </div>\n    </div>\n</div>\n\n<div id="aboutDataCopy">\n    <p><strong>About the data</strong></p>\n    <p>This graph shows your account or goal value over time, along with the contributions you have made.  Hover over the line to see values at each point.</p>\n</div>\n'
        });
        return t.registerPartial("views/performance/performanceBalancesGraph", n), n
    }), define("views/performance/performanceBalancesGraphView", ["jquery", "common/betterment.views", "hbs!views/performance/performanceBalancesGraph", "components/common/scripts/util/formatter", "models/analysisBalance", "components/common/scripts/constants/colors"], function(e, t, n, r, i, s) {
        var o = 500;
        return t.View.extend({
            template: n,
            tagName: "div",
            events: {
                "click .view-about": "onToggleAboutData"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "change:performanceRange", this.setRange), this.listenTo(BMT.vent, "change:performanceContributions", this.toggleContributions), this.listenTo(BMT.vent, "change:loadingAccount", this.showAccount)
            },
            onRender: function() {
                this.collection.length && (this.initializeGraph(), this.drawData())
            },
            onShow: function() {
                this.initializeGraph()
            },
            onToggleAboutData: function(e) {
                var t = this.$aboutDataCopy.is(":visible"),
                    n = t ? '<span class="caret-right"></span> About the data' : "Hide";
                return this.$(e.currentTarget).html(n), this.$aboutDataCopy.slideToggle(), !1
            },
            showAccount: function(t) {
                this.collection.accountId = t;
                if (!this.$(".spinner-container").length) {
                    var n = e('<div class="spinner-container">');
                    this.$container.append(n)
                }
                this.block(this.$(".spinner-container")), this.collection.fetch({
                    reset: !0,
                    success: function() {
                        this.$(".spinner-container").remove(), this.unblock(), this.render()
                    }.bind(this)
                })
            },
            initializeGraph: function() {
                this.$aboutDataCopy = this.$("#aboutDataCopy"), this.$tooltip = this.$(".hover-tooltip"), this.$container = this.$(".performance-graph"), this.margin = {
                    top: 15,
                    right: 50,
                    bottom: 150,
                    left: 15
                }, this.margin2 = {
                    top: 400,
                    right: 50,
                    bottom: 40,
                    left: 15
                }, this.width = 635 - this.margin.left - this.margin.right, this.height = 500 - this.margin.top - this.margin.bottom, this.height2 = 500 - this.margin2.top - this.margin2.bottom, this.x = d3.time.scale().range([0, this.width]), this.x2 = d3.time.scale().range([0, this.width]), this.y = d3.scale.linear().range([this.height, 0]), this.y2 = d3.scale.linear().range([this.height2, 0]), this.svg = d3.select(".performance-graph svg").attr("width", this.width + this.margin.left + this.margin.right).attr("height", this.height + this.margin.top + this.margin.bottom), this.svg.append("defs").append("clipPath").attr("id", "clip").append("rect").attr("width", this.width).attr("height", this.height), this.focus = this.svg.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")"), this.context = this.svg.append("g").attr("transform", "translate(" + this.margin2.left + "," + this.margin2.top + ")"), this.setupGenerators(), this.setupAxes()
            },
            setupGenerators: function() {
                var e = this;
                this.brush = this.brush = d3.svg.brush().x(this.x2).on("brush", this.onBrushChanged), this.balancesLine = d3.svg.area().interpolate("basis").x(function(t) {
                    return e.x(t.dated())
                }).y(function(t) {
                    return e.y(t.balance())
                }), this.contributionLine = d3.svg.line().interpolate("basis").x(function(t) {
                    return e.x(t.dated())
                }).y(function(t) {
                    return e.y(t.invested())
                }), this.contributionArea = d3.svg.area().interpolate("basis").x(this.contributionLine.x()).y1(this.contributionLine.y()).y0(this.y(0)), this.area = d3.svg.area().interpolate("basis").x(function(t) {
                    return e.x(t.dated())
                }).y1(function(t) {
                    return e.y(t.balance())
                }), this.contextLine = d3.svg.line().x(function(t) {
                    return e.x2(t.dated())
                }).y(function(t) {
                    return e.y2(t.balance())
                })
            },
            setupAxes: function() {
                function t(e, t) {
                    var n = t[1] - t[0];
                    return n <= 1578e8 ? d3.time.format("%b %Y")(e) : d3.time.format("%Y")(e)
                }
                var e = this;
                this.xAxis = nv.models.axis().scale(this.x).showMaxMin(!1).tickSize(10, 0).orient("bottom").ticks(6).tickPadding(8).tickFormat(function(n) {
                    return t(n, e.x.domain())
                }), this.xAxis2 = nv.models.axis().scale(this.x2).showMaxMin(!1).tickSize(10, 0).orient("bottom").ticks(6).tickPadding(8).tickFormat(function(n) {
                    return t(n, e.x2.domain())
                }), this.yAxis = nv.models.axis().scale(this.y).showMaxMin(!1).tickSize(-1 * this.width, 0).ticks(8).orient("right").tickFormat(function(e) {
                    return r.money(e, 0)
                }), this.focus.append("g").attr("class", "nv-x axis").attr("transform", "translate(0," + (this.y.range()[0] + 5) + ")").call(this.xAxis), this.focus.append("g").attr("class", "nv-y axis").attr("transform", "translate(" + this.x.range()[1] + ", 0)").call(this.yAxis), this.context.append("g").attr("class", "nv-x axis").attr("transform", "translate(0," + (this.y2.range()[0] + 5) + ")").call(this.xAxis2), this.context.append("g").attr("class", "x brush").call(this.brush).selectAll("rect").attr("y", -6).attr("height", this.height2 + 7), this.context.select(".x.brush").selectAll(".resize").append("path").attr("d", this.resizePath), this.hoverBar = this.focus.append("path").style("stroke", s.BASE_GRAPH.STROKE).attr("display", "none").attr("class", "hover-bar")
            },
            resizePath: function(e) {
                var t = +(e === "e"),
                    n = t ? 1 : -1,
                    r = this.height2 / 3;
                return "M" + .5 * n + "," + r + "A6,6 0 0 " + t + " " + 6.5 * n + "," + (r + 6) + "V" + (2 * r - 6) + "A6,6 0 0 " + t + " " + .5 * n + "," + 2 * r + "Z" + "M" + 2.5 * n + "," + (r + 8) + "V" + (2 * r - 8) + "M" + 4.5 * n + "," + (r + 8) + "V" + (2 * r - 8)
            },
            drawData: function() {
                var e = this,
                    t = this.options.showContributions ? "inline" : "none";
                this.updateData(), this.updateScale(), this.focus.datum(this.focusData), this.focus.append("path").attr("class", "contribution-area").attr("clip-path", "url(#clip)").style("display", t).attr("d", this.contributionArea), this.focus.append("clipPath").attr("id", "clip-below").append("path").attr("clip-path", "url(#clip)").attr("d", this.area.y0(this.height)), this.focus.append("clipPath").attr("id", "clip-above").append("path").attr("clip-path", "url(#clip)").attr("d", this.area.y0(0)), this.focus.append("path").attr("class", "area above").attr("clip-path", "url(#clip-above)").style("display", t).attr("d", this.area.y0(function(t) {
                    return e.y(t.invested())
                })), this.focus.append("path").attr("class", "area below").attr("clip-path", "url(#clip-below)").style("display", t).attr("d", this.area), this.focus.append("path").attr("class", "balance-line").attr("clip-path", "url(#clip)").attr("d", this.balancesLine), this.focus.append("path").attr("class", "contribution-line").attr("clip-path", "url(#clip)").style("display", t).attr("d", this.contributionLine), this.context.datum(this.contextData), this.context.append("path").attr("class", "balance-line").attr("d", this.contextLine), this.setRange(this.options.range), this.focus.append("circle").attr("r", 2).style("display", "none").attr("class", "focus-point balance"), this.focus.append("circle").attr("r", 2).style("display", "none").attr("class", "focus-point contribution"), this.svg.on("mouseout", function() {
                    e.hideTooltip(this)
                }).on("mousemove", function() {
                    e.updateTooltip(this)
                })
            },
            updateData: function(e) {
                this.focusData = e ? this.collection.models.filter(e) : this.collection.models, this.contextData = this.collection.models
            },
            updateScale: function() {
                var e;
                this.x2.domain(d3.extent(this.contextData, function(e) {
                    return e.dated()
                })), this.y2.domain([d3.min(this.contextData, function(e) {
                    return Math.min(e.balance(), e.invested())
                }), d3.max(this.contextData, function(e) {
                    return Math.max(e.balance(), e.invested())
                })]), e = this.brush.empty() ? this.x2.domain() : this.brush.extent(), !this.brush.empty() && this.updateData(function(t, n) {
                    return t.dated() >= e[0].getTime() && t.dated() <= e[1].getTime()
                }), this.x.domain(e), this.y.domain([d3.min(this.focusData, function(e) {
                    return Math.min(e.balance(), e.invested())
                }), d3.max(this.focusData, function(e) {
                    return Math.max(e.balance(), e.invested())
                })])
            },
            updateAxes: function() {
                this.focus.select("g.nv-x.axis").transition().duration(10).call(this.xAxis), this.focus.select("g.nv-y.axis").transition().duration(10).call(this.yAxis), this.context.select("g.nv-x.axis").transition().duration(10).call(this.xAxis2)
            },
            updateGraph: function() {
                var e = this,
                    t = this.options.showContributions ? "inline" : "none";
                this.updateScale(), this.focus.datum(this.focusData), this.focus.select(".contribution-area").style("display", t).attr("d", this.contributionArea), this.focus.select("#clip-below path").attr("d", this.area.y0(this.height)), this.focus.select("#clip-above path").attr("d", this.area.y0(0)), this.focus.select(".area.above").style("display", t).attr("d", this.area.y0(function(t) {
                    return e.y(t.invested())
                })), this.focus.select(".area.below").style("display", t).attr("d", this.area), this.focus.select(".balance-line").attr("d", this.balancesLine), this.focus.select(".contribution-line").style("display", t).attr("d", this.contributionLine), this.focus.select(".focus-line").attr("d", function(t) {
                    return e.line(t.values)
                }), this.updateAxes()
            },
            hideTooltip: function(e) {
                var t = d3.mouse(e)[0] - this.margin.left,
                    n = d3.mouse(e)[1];
                if (t <= 0 || t > this.width || n <= 0 || n > this.height) this.$tooltip.hide(), this.hoverBar.style("display", "none"), this.focus.selectAll(".focus-point").style("display", "none")
            },
            updateTooltip: function(e) {
                var t = d3.mouse(e)[0] - this.margin.left,
                    n = d3.mouse(e)[1],
                    i = this.x.invert(t),
                    s = this.getClosestDataPoint(i),
                    o = this.$tooltip.outerWidth(),
                    u = t - o,
                    a = this.margin.left + parseInt(this.$container.css("padding-left"));
                t >= 0 && t <= this.width && n >= 0 && n <= this.height ? (this.hoverBar.style("display", "block").attr("d", "M" + t + "," + this.height + "L" + t + "," + 0), s && (this.focus.select(".focus-point.balance").style("display", "inline").attr("cx", t).attr("cy", this.y(s.balance())), this.focus.select(".focus-point.contribution").style("display", this.options.showContributions ? "inline" : "none").attr("cx", t).attr("cy", this.y(s.invested()))), s && (this.$tooltip.find(".tooltip-date").html(r.formatDate("MM dd, yy", s.dated())), this.$tooltip.find(".balance-value").html(r.money(s.balance())), this.$tooltip.find(".invested-value").html(r.money(s.invested())), this.$tooltip.find(".earned-value").html(r.money(s.balance() - s.invested())), this.$tooltip.css({
                    display: "block",
                    left: t + a - (u > 0 ? o + 30 : -30)
                }))) : this.hideTooltip(e)
            },
            getClosestDataPoint: function(e) {
                var t = d3.bisector(function(e) {
                        return e.dated()
                    }).right,
                    n = t(this.contextData, e);
                return this.contextData[n]
            },
            onBrushChanged: function() {
                this.onRangeChanged(), this.updateGraph()
            },
            onRangeChanged: function(e) {
                var t = this.brush.empty() ? this.x2.domain() : this.brush.extent(),
                    n = e ? null : (this.x2.domain()[1] - t[0].getTime()) / 864e5;
                this.options.range = n, BMT.vent.trigger("clear:performanceRange", n)
            },
            setRange: function(e) {
                this.options.range = e;
                if (this.svg && this.focusData) {
                    var t = this.x2.domain(),
                        n = t[0],
                        r = t[1];
                    if (e && typeof e == "number") e = 864e5 * e, n = new Date(t[1] - e);
                    else if (e === "ytd") {
                        var i = new Date;
                        i.setMonth(0), i.setDate(1), n = i
                    }
                    if (!n || n < t[0]) n = t[0];
                    if (!n || n > t[1]) n = t[1];
                    this.svg.select(".brush").call(this.brush.extent([n, r])), this.updateGraph()
                }
            },
            toggleContributions: function(e) {
                var t = e ? "inline" : "none";
                this.options.showContributions = e, this.focus.selectAll(".area.above").transition().duration(o).style("display", t), this.focus.selectAll(".area.below").transition().duration(o).style("display", t), this.focus.selectAll(".focus-line").transition().duration(o).style("display", t), this.focus.selectAll(".contribution-line").transition().duration(o).style("display", t), this.focus.selectAll(".contribution-area").transition().duration(o).style("display", t)
            }
        })
    }), define("views/performance/performanceView", ["common/betterment.views", "hbs!views/performance/performance", "models/analysisReturn", "models/analysisBalance", "views/performance/performanceHeaderView", "views/performance/performanceReturnsSelectorView", "views/performance/performanceBalancesSelectorView", "views/performance/performanceReturnsGraphView", "views/performance/performanceBalancesGraphView"], function(e, t, n, r, i, s, o, u, a) {
        var f = "performance_graph_type",
            l = "performance_graph_range",
            c = "analysis_show_contributions";
        return e.View.extend({
            template: t,
            tagName: "div",
            id: "performance",
            events: {
                "click .graph-type-selector li a": "onGraphTypeChange",
                "click .time-range-selector li a": "onDateRangeChange"
            },
            regions: {
                headerRegion: ".header-region",
                sidebarSelector: "#sidebarSelector",
                performanceGraph: "#performanceGraph"
            },
            toolTips: {
                ".year-to-date": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "clear:performanceRange", this.clearRange), BMT.user.returnsCollection || (BMT.user.returnsCollection = new n.Collection, BMT.user.returnsCollection.fetch({
                    force: !0,
                    reset: !0
                })), this.balancesCollection = new r.Collection
            },
            onRender: function() {
                this.headerRegion.show(new i)
            },
            onShow: function() {
                BMT.analytics.track("PageVisited", {
                    Location: "Analysis"
                }), this.$typeSelector = this.$(".graph-type-selector"), this.$dateSelector = this.$(".time-range-selector"), this.highlightDateRange(BMT.getCookie(l) || "all", !0), this.highlightGraphType(BMT.getCookie(f) || "returns")
            },
            showReturnsView: function() {
                this.performanceGraph.show(new u({
                    collection: BMT.user.returnsCollection,
                    range: this.currentRange
                })), this.sidebarSelector.show(new s({
                    collection: BMT.user.returnsCollection
                }))
            },
            showBalancesView: function() {
                var e = BMT.getCookie(c);
                e = e === null ? !0 : e === "true", this.performanceGraph.show(new a({
                    collection: this.balancesCollection,
                    range: this.currentRange,
                    showContributions: e
                })), this.sidebarSelector.show(new o({
                    balances: this.balancesCollection
                }))
            },
            highlightGraphType: function(e) {
                var t = typeof e == "string" ? this.$typeSelector.find('a[data-type="' + e + '"]') : this.$(e);
                t.hasClass("active") || (this.currentType = t.data("type"), this.$typeSelector.find("a.active").removeClass("active"), t.addClass("active"), BMT.setCookie(f, this.currentType), this.currentType === "returns" ? (BMT.analytics.track("ElementViewed", {
                    Name: "PercentReturns",
                    Type: "Chart",
                    Location: "Analysis"
                }), this.showReturnsView()) : (BMT.analytics.track("ElementViewed", {
                    Name: "DollarValues",
                    Type: "Chart",
                    Location: "Analysis"
                }), this.showBalancesView()))
            },
            onGraphTypeChange: function(e) {
                return this.highlightGraphType(e.currentTarget), !1
            },
            clearRange: function(e) {
                this.$dateSelector.find("a.active").removeClass("active"), BMT.setCookie(l, e)
            },
            highlightDateRange: function(e, t) {
                var n = typeof e == "string" ? this.$dateSelector.find('a[data-range="' + e + '"]') : this.$(e);
                this.currentRange = e, n.length && !n.hasClass("active") && (this.currentRange = n.data("range"), this.$dateSelector.find("a.active").removeClass("active"), n.addClass("active"), BMT.setCookie(l, this.currentRange), t || BMT.vent.trigger("change:performanceRange", this.currentRange))
            },
            onDateRangeChange: function(e) {
                return this.highlightDateRange(e.currentTarget), !1
            }
        })
    }), define("hbs!views/profile/contactPreferences", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return 'checked="true"'
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<h1>Email Preferences</h1>\n<div class="modal-body">\n    We want to keep in touch in ways that you find helpful.\n</div>\n<div class="clearfix"></div>\n\n<form method="POST" class="emailPreferences" action="#">\n    <section>\n        <h2><span class="mail-icon"></span> Transaction Confirmations</h2>\n        <p>\n            SEC regulations require that we notify our customers when confirmations are available\n        </p>\n        <ul>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When my deposits are invested</label>\n            </li>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When my withdrawals have traded and are en route back to me</label>\n            </li>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When my dividends are reinvested</label>\n            </li>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When my transfer or allocation change completes</label>\n            </li>\n        </ul>\n    </section>\n\n    <section>\n        <h2><span class="mail-icon"></span> Alerts</h2>\n        <ul>\n            <li>\n                <input type="checkbox" name="autoDeposit" ', o = n["if"].call(t, t && t.autoDeposit, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += ' />\n                <label>To remind me a day before my automatic deposits will be transferred</label>\n            </li>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When I make changes to my account (required for your security)</label>\n            </li>\n            <li>\n                <input type="checkbox" disabled="true" checked="true"/>\n                <label>When my quarterly statement is available (required by the SEC)</label>\n            </li>\n            <li>\n                <input type="checkbox" name="tenMillBalance" ', o = n["if"].call(t, t && t.tenMillBalance, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += ' />\n                <label>When my account balance hits $10,000,000</label>\n            </li>\n        </ul>\n    </section>\n\n    <section class="unadvised-user-only">\n        <h2><span class="mail-icon"></span> Advice</h2>\n        <ul>\n            <li>\n                <input type="checkbox" name="advice" ', o = n["if"].call(t, t && t.advice, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += ' />\n                <label>Advice about your account and goals (e.g., are you on track?)</label>\n            </li>\n            <li>\n                <input type="checkbox" name="newsletter" ', o = n["if"].call(t, t && t.newsletter, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += ' />\n                <label>News about BetaSmartz (e.g., new features)</label>\n            </li>\n            <li>\n                <input type="checkbox" name="specialOffer" ', o = n["if"].call(t, t && t.specialOffer, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            return s += ' />\n                <label>Premium Offers (e.g., bonus for depositing or inviting friends)</label>\n            </li>\n        </ul>\n    </section>\n</form>\n\n<div class="modal-buttons">\n    <button class="update-preferences">Update preferences</button>\n    <button class="cancel">Cancel</button>\n</div>\n', s
        });
        return t.registerPartial("views/profile/contactPreferences", n), n
    }), define("views/profile/contactPreferencesView", ["jquery", "components/common/scripts/util/handlebarsHelpers", "hbs!views/profile/contactPreferences", "backbone", "common/betterment.views"], function(e, t, n, r, i) {
        return i.ModalView.extend({
            template: n,
            events: {
                "click .update-preferences": "onOK",
                "click .cancel": "onCancel",
                "click li label": "changePreference"
            },
            onOK: function(e) {
                this.block();
                var t = r.Syphon.serialize(this, {
                    exclude: [""]
                });
                this.model.save(t, {
                    success: function() {
                        BMT.modal.close(this), BMT.flash("Your email preferences were updated successfully.")
                    }.bind(this),
                    complete: function() {
                        this.unblock()
                    }.bind(this)
                })
            },
            changePreference: function(t) {
                var n = e(t.currentTarget).prev("input");
                n.prop("disabled") || (n.is(":checked") ? n.removeAttr("checked") : n.prop("checked", !0))
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("hbs!views/profile/changePassword", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h1>Edit Password</h1>\n<form method="POST" class="changePassword" action="#">\n    <section>\n        <label>Current Password</label>\n        <input type="password" name="oldPassword" />\n    </section>\n    <section>\n        <label>New password</label>\n        <input type="password" name="newPassword" />\n    </section>\n</form>\n\n<div class="security-question">\n</div>\n\n<div class="modal-buttons">\n    <button class="ok">Change password</button>\n    <button class="cancel">Cancel</button>\n</div>\n'
        });
        return t.registerPartial("views/profile/changePassword", n), n
    }), define("views/profile/changePasswordView", ["jquery", "underscore", "backbone", "hbs!views/profile/changePassword", "common/betterment.views", "views/profile/securityQuestionView"], function(e, t, n, r, i, s) {
        return i.ModalView.extend({
            template: r,
            regions: {
                securityQuestion: ".security-question"
            },
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel"
            },
            onRender: function() {
                this.securityQuestionView = new s(t.extend({
                    inline: !0,
                    body: "Please answer the following security question"
                }, this.model.randomSecurityQuestion())), this.securityQuestion.show(this.securityQuestionView), this.applyValidation()
            },
            onOK: function(e) {
                var r = n.Syphon.serialize(this);
                if (!this.model.validate(r)) {
                    var i = this,
                        s = this.securityQuestionView.getResults();
                    s && (this.block(), i.model.save(t.extend(r, s), {
                        success: function() {
                            BMT.modal.close(i), BMT.flash("Your password was changed successfully.")
                        },
                        complete: function() {
                            i.unblock(), i.removeExtraAttributes()
                        }
                    }))
                }
            },
            removeExtraAttributes: function() {
                this.model.unset("oldPassword", {
                    silent: !0
                }), this.model.unset("newPassword", {
                    silent: !0
                }), s.removeResults(this.model)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("hbs!views/common/flash", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function";
            s += '<div id="flash-spacer"></div>\n<div id="flash" class="clearfix">\n    <div id="flash-wrapper">\n        <div id="flash-check"></div>\n            <div id="flash-message">', (u = n.message) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.message, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u);
            if (o || o === 0) s += o;
            return s += '</div>\n        <div id="flash-close"></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/common/flash", n), n
    }), define("views/common/flashView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/flash"], function(e, t, n, r) {
        var i = e("header").outerHeight() + e("nav").outerHeight() + 1;
        return n.View.extend({
            template: r,
            tagName: "div",
            events: {
                "click #flash": "fadeClose"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "goto", this.destroy)
            },
            onShow: function() {
                this.scrollFlash(), this.$("#flash").hide(), this.$("#flash").slideDown(), e(window).scroll(this.scrollFlash), this.closeTimeout = setTimeout(this.fadeClose.bind(this), 1e4)
            },
            scrollFlash: function() {
                this.hasScrolledPastTop() ? (this.$("#flash, #flash-spacer").addClass("fixed"), this.$("#flash").css("top", "0px")) : this.$("#flash, #flash-spacer").removeClass("fixed")
            },
            hasScrolledPastTop: function() {
                return i < e(window).scrollTop()
            },
            fadeClose: function() {
                var e = this;
                this.$("#flash, #flash-spacer.fixed").slideUp(function() {
                    e.destroy()
                })
            },
            onDestroy: function() {
                e(window).off("scroll", this.scrollFlash), this.closeTimeout && clearTimeout(this.closeTimeout)
            }
        })
    }), define("hbs!views/profile/changeDefaultAccountGroup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                r += "\n            <li>\n                <input ", (s = n.checkedString) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.checkedString, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s);
                if (i || i === 0) r += i;
                return r += ' type="radio" name="defaultAccountGroupId" id="option_', (s = n.id) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.id, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '" value="', (s = n.id) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.id, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '"/>\n                <label for="option_', (s = n.id) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.id, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '">', (s = n.name) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.name, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</label>\n            </li>\n        ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<h1>Default Account Preferences</h1>\n<div class="description">\n    The account that you select to be your default account will be displayed when you log in to your BetaSmartz account.  Selecting a default account does not change how we manage your portfolio.\n</div>\n<div class="clearfix"></div>\n\n<form method="POST" class="defaultAccountPreferences" action="#">\n    <h2>Select Default BetaSmartz Account</h2>\n    <ul>\n        ', o = n.each.call(t, t && t.accountGroups, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    </ul>\n</form>\n\n<div class="modal-buttons">\n    <button class="ok">Update preferences</button>\n    <button class="cancel">Cancel</button>\n</div>\n', s
        });
        return t.registerPartial("views/profile/changeDefaultAccountGroup", n), n
    }), define("views/profile/changeDefaultAccountGroupView", ["jquery", "underscore", "components/common/scripts/util/handlebarsHelpers", "hbs!views/profile/changeDefaultAccountGroup", "backbone", "common/betterment.views"], function(e, t, n, r, i, s) {
        return s.ModalView.extend({
            template: r,
            className: "change-default-account",
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel"
            },
            templateHelpers: {
                accountGroups: function() {
                    var e = BMT.user.getDefaultAccountGroup().id,
                        n = BMT.user.get("accountGroups").models;
                    return t.map(n, function(t, n) {
                        var r = e === t.id ? 'checked="checked"' : "";
                        return {
                            id: t.id,
                            name: t.get("name"),
                            checkedString: r
                        }
                    })
                }
            },
            onOK: function(e) {
                this.block(), this.model.save(i.Syphon.serialize(this)).then(function() {
                    BMT.modal.close(this), BMT.flash("Your default account was changed successfully.")
                }.bind(this), function() {
                    this.unblock()
                }.bind(this))
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("hbs!views/profile/externalAccounts", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<h1>Link External Accounts</h1>\n<div class="description">\n    Link all accounts to get the most accurate advice during your consultation. Service provided by Quovo.\n    <div class="quovo-tip help-icon">\n        This functionality is provided by Quovo, a third party service with which BetaSmartz has\n        partnered. Use of Quovo is completely optional. By using this service and thereby Quovo,\n        you understand that you are sending your personal data to a third party that BetaSmartz\n        cannot control, agree to do so, and accept all the associated risks. By using this functionality\n        and Quovo through Betterment, you agree to hold BetaSmartz harmless from losses of any kind\n        that may result from Quovo\'s use, misuse, or loss of your personal information. You also agree\n        to abide by Quovo\'s <a href="https://www.quovo.com/splash/terms.php" target="_blank">Terms of Use</a>.\n    </div>\n</div>\n<div class="clearfix"></div>\n\n<iframe src="', (u = n.quovoIframeUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.quovoIframeUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n\n<div class="modal-buttons">\n    <button class="ok">Done Linking Accounts</button>\n</div>\n', s
        });
        return t.registerPartial("views/profile/externalAccounts", n), n
    }), define("views/profile/externalAccountsView", ["hbs!views/profile/externalAccounts", "common/betterment.views"], function(e, t) {
        return t.ModalView.extend({
            template: e,
            className: "link-external-accounts",
            events: {
                "click button.ok": "onOK"
            },
            toolTips: {
                ".quovo-tip": {
                    position: {
                        at: "bottom center",
                        my: "top center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            templateHelpers: {
                quovoIframeUrl: function() {
                    return "https://www.quovo.com/?action=remoteaccess&u=" + BMT.user.id + "&k=" + encodeURIComponent(this.self.model.get("quovoKey"))
                }
            },
            onOK: function() {
                BMT.modal.close(this), BMT.flash("Your external account holdings are now available for our portfolio team.  We'll contact you soon.")
            }
        })
    }), define("models/v1/defaultAccountGroupUpdater", ["models/v1/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return "/default-account-group"
            },
            updateUser: function() {
                this.get("user").set("defaultAccountGroupId", this.get("defaultAccountGroupId"))
            }
        };
        return e.Model.extend(t)
    }), define("models/v1/quovoCredentials", ["models/v1/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return "/external-accounts/quovo-credentials"
            }
        };
        return e.Model.extend(t)
    }), define("hbs!views/profile/retireGuidePreferences", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '', s
        });
        return t.registerPartial("views/profile/retireGuidePreferences", n), n
    }), define("hbs!views/profile/personal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += "\n            ", (s = n.incomeDropdown) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.incomeDropdown, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n        ", r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n            $ <input type="text" name="annualIncome" class="money" money-input="int" value="', (s = n.annualIncome) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.annualIncome, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" />\n        ', r
            }

            function p(e, t) {
                var r = "",
                    i, s;
                return r += "\n            ", (s = n.netWorthDropdown) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.netWorthDropdown, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n        ", r
            }

            function d(e, t) {
                var r = "",
                    i, s;
                return r += '\n            $ <input type="text" name="netWorth" class="money" money-input="int" value="', (s = n.netWorth) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.netWorth, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" />\n        ', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<form method="POST" action="#">\n    <section>\n        <label>Employment Status</label>\n        ', (u = n.employmentStatusDropdown) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.employmentStatusDropdown, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n    </section>\n\n    <div class="extra-employment-section">\n        <section>\n            <label>Occupation</label>\n            <input type="text" name="occupation" class="long" value="', (u = n.occupation) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.occupation, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n        </section>\n\n        <section>\n            <label>Employer</label>\n            <input type="text" name="employer" class="long" value="', (u = n.employer) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.employer, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n        </section>\n    </div>\n\n    <section>\n        <label>Annual Income</label>\n        ', o = n["if"].call(t, t && t.showIncomeSelect, {
                hash: {},
                inverse: l.program(3, h, i),
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n    </section>\n\n    <section>\n        <label>Liquid Net Worth</label>\n        ", o = n["if"].call(t, t && t.showNetWorthSelect, {
                hash: {},
                inverse: l.program(7, d, i),
                fn: l.program(5, p, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    </section>\n</form>\n\n<button class="update" disabled="true">Update info</button>\n', s
        });
        return t.registerPartial("views/profile/personal", n), n
    }), define("views/profile/personalView", ["jquery", "underscore", "backbone", "hbs!views/profile/personal", "common/betterment.views", "views/profile/securityQuestionView"], function(e, t, n, r, i, s) {
        return i.View.extend({
            template: r,
            tagName: "div",
            ui: {
                employmentStatus: ".employment-selector",
                extraEmployment: ".extra-employment-section",
                occupation: "input[name=occupation]",
                employer: "input[name=employer]",
                updateButton: "button.update"
            },
            events: {
                "change @ui.employmentStatus": "employmentStatusChange",
                "click @ui.updateButton": "update",
                "keyup input[name]": "inputChanged",
                "change :not(.employment-selector)": "inputChanged"
            },
            templateHelpers: {
                incomeSelectOptions: {
                    7500: "$0 to $15,000",
                    22500: "$15,000 to $30,000",
                    4e4: "$30,000 to $50,000",
                    62500: "$50,000 to $75,000",
                    87500: "$75,000 to $100,000",
                    15e4: "$100,000 or more"
                },
                incomeDropdown: function() {
                    return this.build_dropdown_menu(this.incomeSelectOptions, {
                        name: "annualIncome",
                        value: this.self.model.get("annualIncome").toString()
                    })
                },
                netWorthSelectOptions: {
                    3e3: "$0 to $5,000",
                    15e3: "$5,000 to $25,000",
                    37500: "$25,000 to $50,000",
                    75e3: "$50,000 to $100,000",
                    175e3: "$100,000 to $250,000",
                    4e5: "$250,000 or more"
                },
                netWorthDropdown: function() {
                    return this.build_dropdown_menu(this.netWorthSelectOptions, {
                        name: "netWorth",
                        value: this.self.model.get("netWorth").toString()
                    })
                },
                employmentStatusOptions: {
                    FULL_TIME: "Employed (full-time)",
                    PART_TIME: "Employed (part-time)",
                    SELF_EMPLOYED: "Self-Employed",
                    STUDENT: "Student",
                    RETIRED: "Retired",
                    HOMEMAKER: "Homemaker",
                    UNEMPLOYED: "Not Employed"
                },
                employmentStatusDropdown: function() {
                    return this.build_dropdown_menu(this.employmentStatusOptions, {
                        "class": "employment-selector",
                        name: "employmentStatus",
                        value: this.self.model.get("employmentStatus")
                    })
                },
                showIncomeSelect: function() {
                    return this.self.model.get("annualIncome").toString() in this.incomeSelectOptions
                },
                showNetWorthSelect: function() {
                    return this.self.model.get("netWorth").toString() in this.netWorthSelectOptions
                }
            },
            onShow: function() {
                this.employmentStatusChange(), this.applyValidation()
            },
            employmentStatusChange: function(e) {
                this.hideAllValidation();
                var t = this.ui.employmentStatus.val(),
                    n = t === "FULL_TIME" || t === "PART_TIME";
                this.ui.occupation.val(n ? this.model.get("occupation") || "" : ""), this.ui.employer.val(n ? this.model.get("employer") || "" : ""), this.ui.extraEmployment[n ? e ? "slideDown" : "show" : e ? "slideUp" : "hide"]()
            },
            inputChanged: function(t) {
                var n = this,
                    r = !1,
                    i = this.$("input[name]"),
                    s, o, u, a;
                for (u = 0; u < i.length; u++) a = e(i[u]), s = a.attr("name"), o = a.val(), r = r || n.model.get(s) !== o;
                this.ui.updateButton.prop("disabled", !r)
            },
            update: function(e) {
                var r = this,
                    i, o = n.Syphon.serialize(this);
                this.model.validate(o) ? this.triggerAllValidation(o) : BMT.modal.show(i = new s(t.extend({
                    title: "Confirm Personal Info Update",
                    body: "To update your info please answer the following security question",
                    className: "confirm-update-modal securityQuestion",
                    handler: function(e) {
                        e && (i.block(), r.model.store(), r.model.save(t.extend(o, e), {
                            success: function() {
                                BMT.modal.close(i), BMT.flash("Your info was updated successfully."), s.removeResults(r.model)
                            },
                            error: function() {
                                r.model.restart()
                            },
                            complete: function() {
                                i.unblock()
                            }
                        }))
                    }
                }, this.model.randomSecurityQuestion())))
            }
        })
    }), define("components/common/scripts/templateHelpers/link", ["hbs/handlebars", "components/common/scripts/services/domainService"], function(e, t) {
        e.registerHelper("link", function(n) {
            var r = n.url,
                i = e.Utils.escapeExpression(n.text),
                s = n.target || "_blank";
            return n.brochureUrl ? r = t.brochureHost() + "/" + n.brochureUrl : n.supportUrl && (r = t.getBaseSupportUrl() + "/" + n.supportUrl), r = e.Utils.escapeExpression(r), new e.SafeString('<a target="' + s + '" href="' + r + '">' + i + "</a>")
        })
    }), define("hbs!views/profile/pricingPlan", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="panel">\n            <p>\n                You are currently subscribed to the <span class="bold-text">', (s = n.displayName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.displayName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '</span>\n                pricing plan, which costs\n\n                <span class="bold-text">0.15%/year</span>.\n            </p>\n        </div>\n    ', r
            }

            function d(e, t) {
                var r = "",
                    i;
                r += "\n        ", i = n["if"].call(e, e && e.canShowChevron, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(4, v, t)
                });
                if (i || i === 0) r += i;
                return r += "\n    ", r
            }

            function v(e, t) {
                var r = "",
                    i, s, o;
                r += "\n            <table>\n                <tr>\n                    <td>", i = (s = n.highlightPlan || e && e.highlightPlan, o = {
                    hash: {}
                }, s ? s.call(e, "builder", o) : c.call(e, "highlightPlan", "builder", o)), i = n["if"].call(e, i, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(5, m, t)
                });
                if (i || i === 0) r += i;
                r += "</td>\n                    <td>", i = (s = n.highlightPlan || e && e.highlightPlan, o = {
                    hash: {}
                }, s ? s.call(e, "better", o) : c.call(e, "highlightPlan", "better", o)), i = n["if"].call(e, i, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(5, m, t)
                });
                if (i || i === 0) r += i;
                r += "</td>\n                    <td>", i = (s = n.highlightPlan || e && e.highlightPlan, o = {
                    hash: {}
                }, s ? s.call(e, "best", o) : c.call(e, "highlightPlan", "best", o)), i = n["if"].call(e, i, {
                    hash: {},
                    inverse: h.noop,
                    fn: h.program(5, m, t)
                });
                if (i || i === 0) r += i;
                return r += "</td>\n                </tr>\n            </table>\n        ", r
            }

            function m(e, t) {
                var r, i;
                return (i = n.chevron) ? r = i.call(e, {
                    hash: {}
                }) : (i = e && e.chevron, r = typeof i === f ? i.call(e, {
                    hash: {}
                }) : i), r || r === 0 ? r : ""
            }

            function g(e, t) {
                return "current-plan"
            }

            function y(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <p>\n            Your pricing plan will begin after your free time expires in \n            <span class="bold-text">\n                ', (s = n.daysFree) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.daysFree, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " days.\n            </span>\n        </p>\n    ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += '<h1>Pricing Plan</h1>\n\n<section class="header">\n    ', o = n["if"].call(t, t && t.showAlternativeFeeSummary, {
                hash: {},
                inverse: h.program(3, d, i),
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '\n</section>\n\n<section>\n    <table class="plan-table" cellpadding="0" cellspacing="0">\n        <tr>\n            <td class="', o = (u = n.highlightPlan || t && t.highlightPlan, a = {
                hash: {}
            }, u ? u.call(t, "builder", a) : c.call(t, "highlightPlan", "builder", a)), o = n["if"].call(t, o, {
                hash: {},
                inverse: h.noop,
                fn: h.program(7, g, i)
            });
            if (o || o === 0) s += o;
            s += '">\n                <h2 class="plan-type">Builder</h2>\n                <div class="icon pricing-builder"></div>\n                <h2>0.', (u = n.builderFeeRate) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.builderFeeRate, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '% per year</h2>\n\n                <p class="explanation">\n                    With a balance of less than<br/>', o = (u = n.betterMinimumBalance || t && t.betterMinimumBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "betterMinimumBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' and at least $100/month <br/>\n                    <span class="dotted-underline" id="builderHelp">\n                        automatic deposit\n                        <span class="help-content">You may select different auto deposit amounts and frequencies as long as they add up to at least ', o = (u = n.builderAutoDepositMinimum || t && t.builderAutoDepositMinimum, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "builderAutoDepositMinimum", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + " per month.</span>\n                    </span>", (u = n.builderIraMessage) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.builderIraMessage, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '.\n                </p>\n\n                <p class="or-text"><span class="bold-text">- or -</span></p>\n\n                <h2>', o = (u = n.builderFlatFee || t && t.builderFlatFee, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "builderFlatFee", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' per month</h2>\n                <p class="explanation">\n                    With a balance of less than<br/>', o = (u = n.betterMinimumBalance || t && t.betterMinimumBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "betterMinimumBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' and no auto deposit.\n                </p>\n\n            </td>\n            <td class="', o = (u = n.highlightPlan || t && t.highlightPlan, a = {
                hash: {}
            }, u ? u.call(t, "better", a) : c.call(t, "highlightPlan", "better", a)), o = n["if"].call(t, o, {
                hash: {},
                inverse: h.noop,
                fn: h.program(7, g, i)
            });
            if (o || o === 0) s += o;
            s += " ", (u = n.centerPanelBorderClass) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.centerPanelBorderClass, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                <h2 class="plan-type">Better</h2>\n                <div class="icon pricing-better"></div>\n                <h2>0.', (u = n.betterFeeRate) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.betterFeeRate, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '% per year</h2>\n\n                <p class="explanation">With a balance of ', o = (u = n.betterMinimumBalance || t && t.betterMinimumBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "betterMinimumBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' or more</p>\n            </td>\n            <td class="', o = (u = n.highlightPlan || t && t.highlightPlan, a = {
                hash: {}
            }, u ? u.call(t, "best", a) : c.call(t, "highlightPlan", "best", a)), o = n["if"].call(t, o, {
                hash: {},
                inverse: h.noop,
                fn: h.program(7, g, i)
            });
            if (o || o === 0) s += o;
            s += '">\n                <h2 class="plan-type">Best</h2>\n                <div class="icon pricing-best"></div>\n                <h2>0.', (u = n.bestFeeRate) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.bestFeeRate, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '% per year</h2>\n\n                <p class="explanation">With a balance of ', o = (u = n.bestMinimumBalance || t && t.bestMinimumBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "bestMinimumBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' or more</p>\n\n                <p class="or-text"><span class="bold-text">- includes -</span></p>\n\n                <p class="explanation">\n                <span class="feature dotted-underline" id="customHelp">\n                    Personal Consultation\n                    <span class="help-content">A BetaSmartz financial professional will work with you to discuss your needs and create your personalized financial plan.</span>\n                </span> if your balance is ', o = (u = n.consultationMinimum || t && t.consultationMinimum, a = {
                hash: {}
            }, u ? u.call(t, a) : c.call(t, "consultationMinimum", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : c.call(t, "money", o, 0, a))) + ' or more.</p>\n            </td>\n        </tr>\n\n    </table>\n</section>\n\n<section class="footer">\n    <p>*Balance and automatic deposit amounts are calculated across <span class="bold-text">all</span> goals/accounts.</p>\n\n    ', o = n["if"].call(t, t && t.inFreeTime, {
                hash: {},
                inverse: h.noop,
                fn: h.program(9, y, i)
            });
            if (o || o === 0) s += o;
            return s += '\n</section>\n\n<div class="modal-buttons">\n    <button id="ok">OK</button>\n</div>\n', s
        });
        return t.registerPartial("views/profile/pricingPlan", n), n
    }), define("hbs!views/profile/planChevron", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="chevron">\n    <div>\n        Your<br />Plan\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/profile/planChevron", n), n
    }), define("modules/pricingPlans", [], function() {
        return {
            PLANS: {
                BUILDER: {
                    BASIS_POINTS: 35,
                    AUTO_DEPOSIT: 100,
                    FLAT_FEE: 3
                },
                BETTER: {
                    BASIS_POINTS: 25,
                    MINIMUM_BALANCE: 1e4
                },
                BEST: {
                    BASIS_POINTS: 15,
                    MINIMUM_BALANCE: 1e5
                }
            },
            FEATURE_MINIMUM_BALANCES: {
                PERSONAL_CONSULTATION: 5e5
            },
            shouldBeBuilder: function(e) {
                return e < this.PLANS.BETTER.MINIMUM_BALANCE
            },
            shouldBeBetter: function(e) {
                return e >= this.PLANS.BETTER.MINIMUM_BALANCE && e < this.PLANS.BEST.MINIMUM_BALANCE
            },
            shouldBeBest: function(e) {
                return e >= this.PLANS.BEST.MINIMUM_BALANCE
            }
        }
    }), define("views/profile/pricingPlanView", ["jquery", "underscore", "backbone", "common/betterment.views", "hbs!views/profile/pricingPlan", "hbs!views/profile/planChevron", "modules/pricingPlans"], function(e, t, n, r, i, s, o) {
        return r.ModalView.extend({
            template: i,
            className: "pricing-plan",
            toolTips: {
                "#builderHelp": {},
                "#customHelp": {
                    position: {
                        my: "bottom right",
                        at: "top left"
                    }
                }
            },
            templateHelpers: {
                highlightPlan: function(e) {
                    return this.self.model.isStandardPlan() ? this.self.model.displayName() === e.capitalize() : !1
                },
                displayName: function() {
                    return this.self.model.displayName()
                },
                inFreeTime: function() {
                    return this.self.model.has("freeDaysRemaining")
                },
                daysFree: function() {
                    return this.self.model.num("freeDaysRemaining")
                },
                builderFeeRate: function() {
                    return o.PLANS.BUILDER.BASIS_POINTS
                },
                betterFeeRate: function() {
                    return o.PLANS.BETTER.BASIS_POINTS
                },
                bestFeeRate: function() {
                    return o.PLANS.BEST.BASIS_POINTS
                },
                betterMinimumBalance: function() {
                    return o.PLANS.BETTER.MINIMUM_BALANCE
                },
                builderAutoDepositMinimum: function() {
                    return o.PLANS.BUILDER.AUTO_DEPOSIT
                },
                builderFlatFee: function() {
                    return o.PLANS.BUILDER.FLAT_FEE
                },
                bestMinimumBalance: function() {
                    return o.PLANS.BEST.MINIMUM_BALANCE
                },
                consultationMinimum: function() {
                    return o.FEATURE_MINIMUM_BALANCES.PERSONAL_CONSULTATION
                },
                builderIraMessage: function() {
                    return BMT.accounts().hasIRA() ? "or by maxing out your SMSF contribution" : ""
                },
                showAlternativeFeeSummary: function() {
                    return this.self.model.isClassic() || this.self.model.isEmployer()
                },
                canShowChevron: function() {
                    return this.self.model.is("inFreeTrial") || this.self.model.isStandardPlan()
                },
                chevron: function() {
                    return s()
                },
                centerPanelBorderClass: function() {
                    return this.highlightPlan("better") ? "" : this.highlightPlan("builder") ? "border-right" : this.highlightPlan("best") ? "border-left" : "border-right border-left"
                }
            },
            events: {
                "click button#ok": "onOK"
            },
            onOK: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("views/profile/closeAccountView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/profile/securityQuestionView", "common/betterment.models"], function(e, t, n, r, i, s) {
        var o = s.Model.extend({
            urlRoot: "/hypotheticalWithdrawAll"
        });
        return r.ModalView.extend({
            template: "profile/closeAccount",
            className: "closeAccount",
            regions: {
                securityQuestion: "#securityQuestion"
            },
            events: {
                "click button#ok": "onOK",
                "click button#cancel": "onCancel",
                "change .why-closing-selector": "onToggle"
            },
            onRender: function() {
                this.securityQuestionView = new i(t.extend({
                    inline: !0,
                    body: "Please answer the following security question"
                }, this.model.randomSecurityQuestion())), this.securityQuestion.show(this.securityQuestionView)
            },
            onShow: function() {
                this.block();
                var e = this;
                (this.hypotheticalWithdrawAll = new o).fetch({
                    success: function() {
                        if (e.hypotheticalWithdrawAll.is("delayed")) {
                            var t = e.hypotheticalWithdrawAll.date("estimatedCompletionDate"),
                                n = e.formatter.formatDate("MM d", t) + e.formatter.ordinalSuffix(t.getDate());
                            e.hypotheticalWithdrawAll.set("message", "Please note that some of the funds in your account have not settled and are being held, so your money transfer will be delayed until " + n + "."), e.$(".held-funds-info").html(e.hypotheticalWithdrawAll.get("message"))
                        }
                    },
                    error: function() {
                        e.hypotheticalWithdrawAll.set("delayed", !1)
                    },
                    complete: function() {
                        e.unblock()
                    }
                })
            },
            onOK: function(e) {
                var r = n.Syphon.serialize(this);
                if (!this.model.validate(r)) {
                    var i = this,
                        s = this.securityQuestionView.getResults();
                    if (s) {
                        this.block(), i.model.set(t.extend(r, s), {
                            silent: !0
                        });
                        var o = i.model.get("whyClosing") === "Other";
                        o && i.model.set("whyClosing", "Other: " + this.$("input#otherReason").val().substring(0, 200)), i.model.destroy({
                            success: function() {
                                BMT.alert({
                                    title: "Close account successful",
                                    body: "You have successfully closed your account. " + (i.hypotheticalWithdrawAll.is("delayed") ? i.hypotheticalWithdrawAll.get("message") : ""),
                                    icon: "accept",
                                    className: "close-account-success",
                                    handler: function(e) {
                                        BMT.vent.trigger("logout", {
                                            timeout: !1
                                        }), BMT.modal.close(i)
                                    }
                                })
                            },
                            error: function() {
                                i.removeExtraAttributes()
                            },
                            complete: function() {
                                i.unblock()
                            }
                        })
                    }
                }
            },
            removeExtraAttributes: function() {
                this.model.unset("whyClosing", {
                    silent: !0
                }), i.removeResults(this.model)
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            },
            onToggle: function(e) {
                var t = n.Syphon.serialize(this).whyClosing === "Other";
                this.$("div.whyClosingReason")[t ? "slideDown" : "hide"]()
            }
        })
    }), define("views/profile/accountAdministrationView", ["jquery", "underscore", "backbone", "hbs!views/profile/accountAdministration", "common/betterment.views", "views/profile/changeBankAccountView", "views/profile/pricingPlanView", "views/profile/closeAccountView", "models/automaticDeposit", "components/common/scripts/viewHelpers/customerSupport", "modules/modals", "views/linkBankAccount/setupView"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        return i.View.extend({
            template: r,
            tagName: "div",
            ui: {
                changeBankAccount: "button.change-bank-account",
                reviewPricingPlan: "button.review-pricing-plan",
                closeAccount: "button.close-account",
                closeInfo: ".close-info"
            },
            events: {
                "click @ui.changeBankAccount": "changeBankAccount",
                "click @ui.reviewPricingPlan": "reviewPricingPlan",
                "click @ui.closeAccount": "closeAccount",
                "click @ui.closeInfo": "toggleCloseInfo"
            },
            toolTips: {
                "#advisedFeeHelp": {
                    position: {
                        my: "bottom left",
                        at: "top center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            onInitialize: function() {
                this.model.get("bankAccount").bind("change:description", this.render, this), this.listenTo(BMT.user, "sync", function() {
                    this.render(), BMT.refreshBanners()
                })
            },
            templateHelpers: {
                advisorAgreementLink: {
                    brochureUrl: "advisedcustomeragreement",
                    text: "here"
                },
                bankAccountDescription: function() {
                    var e = this.self.model.get("bankAccount");
                    return e.get("active") ? e.get("description") : "No linked account"
                },
                feeTypeDisplayName: function() {
                    return BMT.user.get("pricingSummary").displayName()
                },
                advisedFeeTypeDisplayAmount: function() {
                    return this.pctTrimZeros(this.self.model.num("feeAmount"), 2) + " / year"
                },
                accountStatus: function() {
                    var e = this.self.model.get("accountGroupState"),
                        t;
                    return e === "NORMAL" ? t = "Active" : t = e, t
                },
                supportPhoneNumber: function() {
                    return f.getSupportNumber()
                }
            },
            changeBankAccount: function(e) {
                var t = new c({
                    relink: !1,
                    alwaysHideProgress: !1,
                    accountGroup: this.model
                });
                this.listenTo(t, "close", function() {
                    BMT.user.fetch()
                }), l.show(t)
            },
            reviewPricingPlan: function(e) {
                BMT.modal.show(new o({
                    model: BMT.user.get("pricingSummary")
                }))
            },
            toggleCloseInfo: function() {
                this.ui.closeInfo.toggle()
            },
            closeAccount: function(e) {
                BMT.accountGroup.isPersonal() ? (e.preventDefault(), BMT.modal.show(new u({
                    model: BMT.user
                }))) : this.toggleCloseInfo()
            }
        })
    }), define("hbs!views/profile/beneficiaryCollection", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function h(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n<div class="ira-balance">Balance: ', i = (s = n.collectionBalance || e && e.collectionBalance, o = {
                    hash: {}
                }, s ? s.call(e, o) : a.call(e, "collectionBalance", o)), r += f((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, o) : a.call(e, "money", i, o))) + "</div>\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression,
                l = "function",
                c = this;
            s += "<label>\n", (u = n.collectionName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.collectionName, o = typeof u === l ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", o = n["if"].call(t, t && t.collectionBalance, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, h, i)
            });
            if (o || o === 0) s += o;
            return s += '\n</label>\n<span class="item-content">', (u = n.listBeneficiaries) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.listBeneficiaries, o = typeof u === l ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span>\n\n<button class="edit blue">Change</button>\n<div class="clearfix"></div>\n', s
        });
        return t.registerPartial("views/profile/beneficiaryCollection", n), n
    }), define("views/profile/beneficiaryCollectionView", ["common/betterment.views", "hbs!views/profile/beneficiaryCollection", "views/profile/editBeneficiariesView"], function(e, t, n) {
        return e.View.extend({
            template: t,
            tagName: "li",
            events: {
                "click button.edit": "editBeneficiaries"
            },
            ui: {
                content: ".item-content"
            },
            collectionEvents: {
                sync: "onSync"
            },
            templateHelpers: {
                collectionName: function() {
                    return this.self.options.collectionName
                },
                collectionBalance: function() {
                    return this.self.options.collectionBalance
                },
                listBeneficiaries: function() {
                    var e = this.self.collection;
                    return !e || e.isEmpty() ? "None" : e.pluck("name").slice(0, 3).join(", ")
                }
            },
            onSync: function() {
                this.ui.content.text(this.templateHelpers.listBeneficiaries())
            },
            editBeneficiaries: function() {
                BMT.modal.show(new n({
                    collection: this.collection,
                    collectionName: this.options.collectionName,
                    isIRA: this.options.isIRA
                }))
            }
        })
    }), define("views/profile/beneficiariesView", ["jquery", "underscore", "common/betterment.views", "views/profile/beneficiaryCollectionView"], function(e, t, n, r) {
        return n.View.extend({
            tagName: "ul",
            onShow: function() {
                BMT.accounts().hasInvestingAccount() && this.renderBeneficiaryCollection(new r({
                    collection: this.options.investingAcctBeneficiaries,
                    collectionName: "Investing Accounts",
                    collectionBalance: "",
                    isIRA: !1
                })), t.each(this.options.iraBeneficiaryGroups, function(e) {
                    t.each(e, function(e) {
                        var t = e.options.account,
                            n = new r({
                                collection: e,
                                collectionName: t.getIRADisplayName(),
                                collectionBalance: t.get("currentBalance"),
                                isIRA: !0
                            });
                        this.renderBeneficiaryCollection(n)
                    }, this)
                }, this)
            },
            renderBeneficiaryCollection: function(e) {
                e.render(), this.$el.append(e.el)
            }
        })
    }), define("models/v1/trustDocument", ["models/v1/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return "/trust/" + this.get("trust").id + "/documents"
            }
        };
        return e.Model.extend(t)
    }), define("common/constants/uploadLimits", [], function() {
        var e = 10,
            t = 1048576;
        return {
            MAX_UPLOAD_SIZE_MB: e,
            MAX_UPLOAD_SIZE_BYTES: e * t
        }
    }), define("views/trust/documentUploadModal", ["jquery", "underscore", "common/betterment.views", "models/v1/trustDocument", "models/v1/baseCollection", "common/constants/uploadLimits", "components/common/scripts/services/browserService"], function(e, t, n, r, i, s, o) {
        return n.ModalView.extend({
            template: "trust/documentUploadModal",
            className: "document-upload",
            events: {
                "click button.ok": "onOK",
                "click button.cancel": "onCancel",
                "click .grey-x": "deleteDocument"
            },
            templateHelpers: {
                uploadLimit: s.MAX_UPLOAD_SIZE_MB,
                dragDrop: window.FileReader ? " or Drag Here" : "",
                canUpload: o.canUploadAjaxFiles()
            },
            removeDocumentFromServer: function(e, t) {
                (new r({
                    id: e,
                    trust: t
                })).destroy({
                    data: {}
                }), this.numUploaded--
            },
            deleteDocument: function(t) {
                var n = e(t.target).closest(".upload-row"),
                    r = n.data("serialNumber"),
                    i = this.documentIdLookup[r];
                this.removeDocumentFromServer(i, BMT.accountGroup.get("trust")), n.remove(), delete this.documentIdLookup[r]
            },
            onInitialize: function() {
                this.nextFileSerialNumber = 0, this.numUploaded = 0, this.nextFileSerialNumber = 0, this.documentIdLookup = {}
            },
            onRender: function() {
                var t = this.$(".choose-file input"),
                    n = this.$(".choose-file"),
                    r = this.$(".dropzone-previews"),
                    o = 0,
                    u;
                e(window.document).bind("dragover", function(e) {
                    u ? clearTimeout(u) : n.addClass("in");
                    var t = !1,
                        r = e.target;
                    do {
                        if (r === n[0]) {
                            t = !0;
                            break
                        }
                        r = r.parentNode
                    } while (r !== null);
                    t ? n.addClass("hover") : n.removeClass("hover"), u = setTimeout(function() {
                        u = null, n.removeClass("in hover")
                    }, 100)
                });
                var a = function() {
                        o--, o || this.$(".modal-buttons button").prop("disabled", !1)
                    },
                    f = function(e, t) {
                        this.$("#trust-document-upload-file-" + t.files[0].serialNumber).remove(), this.$(".trust-upload-error-duplicate").show(), a()
                    },
                    l = function(e, t) {
                        a();
                        var n = t.files[0];
                        if (n.error) return f(e, t);
                        t.result && (this.documentIdLookup[n.serialNumber] = t.result.id), this.numUploaded++, this.$("#trust-document-upload-file-" + n.serialNumber + " .success-mark").text("✔"), this.$("#trust-document-upload-file-" + n.serialNumber + " .upload-progress").text("").append('<div class="grey-x"></div>')
                    };
                t.fileupload({
                    url: i.API_URL + "/trust/" + BMT.accountGroup.get("trust").id + "/documents",
                    autoUpload: !0,
                    maxFilesize: s.MAX_UPLOAD_SIZE_BYTES,
                    add: function(t, n) {
                        this.$(".trust-upload-error").hide();
                        var i = n.files[0];
                        if (i.size > s.MAX_UPLOAD_SIZE_BYTES) {
                            this.$(".trust-upload-error-size").show();
                            return
                        }
                        this.$("button").prop("disabled", "disabled"), i.serialNumber = this.nextFileSerialNumber++;
                        var u = e('<div class="upload-row clearfix" id="trust-document-upload-file-' + i.serialNumber + '" />').data("serialNumber", i.serialNumber);
                        u.append('<div class="success-mark" />'), u.append('<div class="filename">' + i.name + "</div>"), u.append('<div class="upload-progress">Uploading...</div>'), r.prepend(u), o++, n.submit(), window.FileReader || l(null, {
                            files: [i]
                        })
                    }.bind(this)
                }).on("fileuploadfail", f.bind(this)).on("fileuploaddone", l.bind(this))
            },
            closeModal: function() {
                BMT.modal.close(this)
            },
            onOK: function(e) {
                this.numUploaded ? (this.block(), BMT.user.fetch().then(function() {
                    BMT.vent.trigger("trust:documents:uploaded"), BMT.flash("Documents have been successfully uploaded. You will receive an email once your trust is approved."), this.unblock(), this.closeModal()
                }.bind(this))) : this.closeModal()
            },
            onCancel: function(e) {
                for (var t = 0; t < this.nextFileSerialNumber; t++) this.documentIdLookup[t] && this.removeDocumentFromServer(this.documentIdLookup[t], BMT.accountGroup.get("trust"));
                this.numUploaded = 0, this.closeModal()
            }
        })
    }), define("views/profile/trustInformationView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/trust/documentUploadModal"], function(e, t, n, r, i) {
        return r.View.extend({
            template: "profile/trustInformation",
            tagName: "div",
            events: {
                "click .trust-document-upload button": "openUploadModal"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "trust:documents:uploaded", function() {
                    BMT.accountGroup.get("trust").needsDocuments() || this.$(".trust-document-upload .item-content").text("Uploaded")
                })
            },
            templateHelpers: {
                legal_name: function() {
                    return this.self.model.get("legalName")
                },
                nickname: function() {
                    return this.self.model.get("nickname")
                },
                address1: function() {
                    return this.self.model.get("address1")
                },
                address2: function() {
                    return this.self.model.get("address2")
                },
                city_state: function() {
                    return this.self.model.get("city") + ", " + this.self.model.get("state")
                },
                document_upload_prefix: function() {
                    return BMT.accountGroup.get("trust") && BMT.accountGroup.get("trust").needsDocuments() ? " Not " : ""
                }
            },
            openUploadModal: function() {
                BMT.modal.show(new i)
            }
        })
    }), define("hbs!views/profile/jointAccountHolder", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="primary-holder-info">\n    <h1>Primary Account Holder</h1>\n    <div class="item-content">', (u = n.primaryAccountHolder) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.primaryAccountHolder, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</div>\n</div>\n<h1 class="other-account-holder">Other Account Holder</h1>\n<section>\n    <label>Name</label>\n    <input disabled="disabled" type="text" value="', (u = n.firstName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.firstName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    <input disabled="disabled" type="text" class="middleName" value="', (u = n.middleName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.middleName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    <input disabled="disabled" type="text" class="lastName" value="', (u = n.lastName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.lastName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<section>\n    <label>Address 1</label>\n    <input disabled="disabled" type="text" class="long" value="', (u = n.address1) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.address1, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<section>\n    <label>Address 2</label>\n    <input disabled="disabled" type="text" class="long" value="', (u = n.address2) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.address2, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<section>\n    <label>City/State</label>\n    <input disabled="disabled" type="text" value="', (u = n.city) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.city, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    <input disabled="disabled" type="text" class="stateAbbreviation middleName" value="', (u = n.stateAbbreviation) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.stateAbbreviation, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    <input disabled="disabled" type="text" class="zip" value="', (u = n.zip) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.zip, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<section>\n    <label>Phone</label>\n    <input disabled="disabled" type="tel" class="long" value="', (u = n.phone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.phone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<section>\n    <label>Email</label>\n    <input disabled="disabled" type="email" class="long" value="', (u = n.userName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.userName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n</section>\n\n<hr/>\n', s
        });
        return t.registerPartial("views/profile/jointAccountHolder", n), n
    }), define("views/profile/jointAccountHolderView", ["common/betterment.views", "components/common/scripts/util/handlebarsHelpers", "hbs!views/profile/jointAccountHolder"], function(e, t, n) {
        return e.View.extend({
            template: n,
            templateHelpers: {
                primaryAccountHolder: function() {
                    return BMT.accountGroup.get("primaryAccountHolderId") === BMT.user.id ? BMT.user.fullName() : this.self.model.get("firstName") + " " + (this.self.model.get("middleName") || "") + " " + this.self.model.get("lastName")
                }
            }
        })
    }), define("models/v1/jointAccountHolder", ["models/v1/baseModels"], function(e) {
        var t = {
            relatedModels: ["accountGroup"],
            endpoint: function() {
                return this.get("accountGroup").getEndpoint() + "/joint-account-holder"
            }
        };
        return e.Model.extend(t)
    }), define("models/v1/contactPreferences", ["models/v1/baseModels"], function(e) {
        var t = {
            endpoint: "/contact-preference",
            hasDefaultPreferences: function() {
                return this.is("advice") && this.is("newsletter") && this.is("specialOffer") && this.is("autoDeposit") && !this.is("tenMillBalance")
            }
        };
        return e.Model.extend(t)
    }), define("models/v1/beneficiaryCollection", ["underscore", "backbone", "models/v1/baseCollection", "models/v1/beneficiary"], function(e, t, n, r) {
        var i = {
            model: r,
            save: function(e) {
                return t.sync("create", this, e)
            }
        };
        return n.extend(i)
    }), define("models/v1/accountGroupBeneficiaries", ["models/v1/beneficiaryCollection"], function(e) {
        var t = {
            relatedModels: ["accountGroup"],
            initialize: function(e, t) {
                this.accountGroup = t.accountGroup
            },
            endpoint: function() {
                return this.accountGroup.getEndpoint() + "/beneficiaries"
            }
        };
        return e.extend(t)
    }), define("models/v1/accountBeneficiaries", ["models/v1/beneficiaryCollection"], function(e) {
        var t = {
            relatedModels: ["account"],
            endpoint: function() {
                return this.options.account.getEndpoint() + "/beneficiaries"
            }
        };
        return e.extend(t)
    }), define("views/profile/profileView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/profile/contactInfoView", "views/profile/personalView", "views/profile/accountAdministrationView", "views/profile/beneficiariesView", "views/profile/trustInformationView", "views/profile/jointAccountHolderView", "models/v1/jointAccountHolder", "models/v1/contactPreferences", "models/v1/accountGroupBeneficiaries", "models/v1/accountBeneficiaries", "components/common/scripts/viewHelpers/customerSupport", "services/accountService", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
        return r.View.extend({
            template: "profile/profile",
            templateHelpers: {
                customerSupportNumber: function() {
                    return d.getSupportNumber()
                }
            },
            id: "profile",
            regions: {
                contactInfo: "#contactInfo",
                personal: "#personal",
                accountAdministration: "#accountAdministration",
                beneficiaries: "#beneficiaries",
                trustInformation: "#trustInformation",
                jointAccountHolder: "#joint-account-holder"
            },
            onInitialize: function() {
                this.model = BMT.accountGroup
            },
            onShow: function() {
                BMT.analytics.track("PageVisited", {
                    Location: "Profile"
                }), this.showContactInfo(), this.showBeneficiariesInfo(BMT.accounts()), this.personal.show(new s({
                    model: BMT.user
                })), this.accountAdministration.show(new o({
                    model: BMT.accountGroup
                })), BMT.accountGroup.get("trust") && this.trustInformation.show(new a({
                    model: BMT.accountGroup.get("trust")
                }));
                if (BMT.accountGroup.isJointAccount() && !BMT.accountGroup.isPendingApproval()) {
                    var e = new l({
                        accountGroup: BMT.accountGroup
                    });
                    e.fetch().then(function() {
                        this.jointAccountHolder.show(new f({
                            model: e
                        }))
                    }.bind(this))
                }
            },
            showContactInfo: function() {
                var e = new c;
                e.fetch().then(function() {
                    var t = new i({
                        model: BMT.user,
                        contactPreferences: e
                    });
                    this.contactInfo.show(t)
                }.bind(this))
            },
            showBeneficiariesInfo: function(n) {
                var r = new h([], {
                        accountGroup: this.model
                    }),
                    i = {};
                t.each(m.getIRATypes(), function(e) {
                    i[e] = t.map(n.where({
                        accountType: e
                    }), function(e) {
                        return new p([], {
                            account: e
                        })
                    })
                }, this);
                var s = [r].concat(t.flatten(t.values(i))),
                    o = t.invoke(s, "fetch");
                e.when.apply(e, o).done(function() {
                    this.beneficiaries.show(new u({
                        model: BMT.accountGroup,
                        investingAcctBeneficiaries: r,
                        iraBeneficiaryGroups: i
                    }))
                }.bind(this))
            }
        })
    }), define("hbs!views/login/passwordReset", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel card horizontal-center logged-out">\n    <div class="inner">\n        <h1 class="tab-header">\n            Create a new password\n        </h1>\n        <form method="POST" class="passwordReset" action="#">\n            <!-- nested forms will be here, this is necessary;\n                Syphon gets the first form to extract inputs from  -->\n            <section id="securityQuestion">\n            </section>\n\n            <section class="newPassword">\n                <label>New password</label>\n                <input type="password" name="password" />\n                <span class="note">8 characters minimum</span>\n            </section>\n        </form>\n        <button id="changePassword" class="blue">Change Password</button>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/login/passwordReset", n), n
    }), define("views/login/passwordResetView", ["underscore", "backbone", "common/betterment.views", "hbs!views/login/passwordReset", "views/profile/securityQuestionView"], function(e, t, n, r, i) {
        return n.View.extend({
            template: r,
            id: "passwordReset",
            regions: {
                securityQuestion: "#securityQuestion"
            },
            events: {
                "click button#changePassword": "changePassword"
            },
            options: {
                setResponsiveLayout: !0
            },
            onRender: function() {
                this.model.has("securityQuestion") && this.securityQuestion.show(this.securityQuestionView = new i(e.extend({
                    inline: !0,
                    body: "For security reasons, please answer the security question before creating a new password."
                }, this.model.attributes)))
            },
            onShow: function() {
                this.applyValidation()
            },
            changePassword: function(n) {
                var r = this,
                    i = t.Syphon.serialize(this);
                if (!this.model.validate(i)) {
                    var r = this,
                        s = this.securityQuestionView,
                        o = s ? s.getResults() : null;
                    if (!s || o) this.block(), this.model.save(e.extend(i, o), {
                        forceSave: !0,
                        success: function() {
                            BMT.alert({
                                title: "Password change Successful",
                                body: "Your password has been changed successfully. You can now log in to your account.",
                                icon: "accept"
                            }), BMT.router.navigate("", !0)
                        },
                        complete: function() {
                            r.unblock()
                        }
                    })
                }
            }
        })
    }), define("hbs!views/login/forgotPassword", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel horizontal-center forgotPassword logged-out">\n    <div class="inner">\n        <h1 class="tab-header">Forgot your password?</h1>\n        <h2 class="modal-body">\n            If you forgot your password, please enter the email address associated with your account to reset your password.\n        </h2>\n\n        <form method="POST" action="#">\n            <label>Email</label>\n            <input type="email" name="forgotPasswordEmail" />\n        </form>\n        <button id="submitForgotPassword" class="blue">Send reset email</button>\n        <a href="#login">Back to log in</a>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/login/forgotPassword", n), n
    }), define("models/passwordReset", ["jquery", "underscore", "backbone", "common/betterment.models"], function(e, t, n, r) {
        return r.Model.extend({
            urlRoot: "/passwordReset",
            idAttribute: "key",
            url: function() {
                return this.urlRoot + (this.isNew() ? "" : "?key=" + this.id)
            },
            validation: {
                password: {
                    required: !0,
                    minLength: 8
                }
            }
        })
    }), define("views/login/forgotPasswordView", ["common/betterment.views", "hbs!views/login/forgotPassword", "models/passwordReset"], function(e, t, n) {
        return e.View.extend({
            template: t,
            id: "forgotPassword",
            options: {
                setResponsiveLayout: !0
            },
            events: {
                "click button#submitForgotPassword": "submitForgotPassword"
            },
            onRender: function() {
                this.$forgotEmail = this.$("input[name=forgotPasswordEmail]")
            },
            submitForgotPassword: function(e) {
                var t = this;
                this.block(this.$(".panel")), (new n).save({
                    userName: this.$forgotEmail.val()
                }, {
                    forceSave: !0,
                    success: function() {
                        BMT.flash("Password reset email sent. Please check your inbox.")
                    },
                    complete: function() {
                        t.unblock()
                    }
                })
            }
        })
    }), define("views/signup/baseSectionView", ["underscore", "common/betterment.views"], function(e, t) {
        return t.View.extend({
            onInitialize: function() {
                this.attrs = this.options.attrs, this.name = this.options.name, this.position = this.options.position, this.setupConversation(), this.listenTo(this, "signup:unlockSection", this.unlockSection), this.listenTo(this, "conversation:updated", this.checkSectionComplete), this.on("show", function() {
                    this.attrs = e.pick(this.attrs, this.getFields().concat(this.extraFields || [])), e.isEmpty(this.attrs) && this.options.locked && (this.block(null, null, !0), this.$(":input").prop("disabled", !0), this.$el.addClass("signup-section-locked")), this.populateValues(this.attrs)
                }), e.extend(this.templateHelpers, {
                    attr: this.getAttr,
                    prefilled_select: function(e, t, n) {
                        return n.name = e, this.self.attrs && this.self.attrs[e] && (n.value = this.self.attrs[e]), this.build_select_input(t, n)
                    }
                }), this.onInitializeSection()
            },
            onInitializeSection: function() {},
            onRender: function() {
                this.onRenderSection(), this.bindUnlockBehavior(), this.$el.addClass("section-container").data("section", this.name), this.$el.on("change", ":input", function() {
                    var t = $(this),
                        n = t.attr("name"),
                        r = t.val();
                    BMT.analytics.trackOnce("SignupSectionCompleted", e.extend({
                        Name: n.capitalize(),
                        Location: "BigForm"
                    }, {
                        Value: n === "employmentStatus" ? r : undefined
                    }))
                })
            },
            onRenderSection: function() {},
            bindUnlockBehavior: function() {
                this.$("input").last().one("keydown", function() {
                    BMT.vent.trigger("signup:sectionAlmostComplete", this)
                }.bind(this))
            },
            showErrors: function(t) {
                var n = this.getFields().concat(this.extraFields || []),
                    r = e.pick(t, n);
                if (e.isEmpty(r)) return;
                e.each(r, function(n, r) {
                    e.isArray(n) && (n = n.join("<br />")), this.conversation.forceShowError(r, n), delete t[r]
                }, this)
            },
            setupConversation: function() {},
            gatherAttributes: function() {
                return this.conversation.serialize()
            },
            getAttr: function(e) {
                return this.attrs && this.attrs[e]
            },
            unlockSection: function() {
                this.options.locked = !1, this.blocking && (this.$el.removeClass("signup-section-locked"), this.$(":input").removeAttr("disabled"), this.unblock())
            },
            checkSectionComplete: function() {
                this.isValid() && BMT.vent.trigger("signup:sectionAlmostComplete", this)
            },
            validate: function() {
                return this.conversation.validate()
            },
            isValid: function() {
                var e = this.$("section .input-line[data-required]"),
                    t = !0;
                return e.each(function(e, n) {
                    var r = $(this),
                        i = r.data("valid");
                    if (!i) return t = !1, !1
                }), t
            },
            getFields: function() {
                var t = [];
                return this.$(":input").each(function() {
                    t.push($(this).attr("name"))
                }), this.$("[data-group]").each(function() {
                    t.push($(this).data("group"))
                }), e.unique(t)
            },
            getPosition: function() {
                return this.position
            },
            getName: function() {
                return this.name
            },
            getDisplayPosition: function() {
                return this.position + 1
            },
            populateValues: function(t) {
                if (e.isEmpty(t)) return;
                this.beforePopulateValues(t);
                var n = this,
                    r = e.clone(t);
                e.each(t, function(t, i) {
                    var s = n.conversation.transform(i, t, "receive");
                    e.extend(r, s)
                }), e.each(r, function(e, t) {
                    n.$("[name=" + t + "]").val(e)
                }), this.afterPopulateValues()
            },
            beforePopulateValues: function(e) {},
            afterPopulateValues: function() {
                this.conversation.validate({
                    silent: !0
                })
            },
            resume: function(e) {
                return this.conversation.resume(e)
            }
        })
    }), define("views/signup/dateOfBirthTransformer", ["components/common/scripts/services/dateService"], function(e) {
        return {
            send: function(e) {
                var t = parseInt(e.dobYear, 10),
                    n = parseInt(e.dobMonth, 10),
                    r = parseInt(e.dobDate, 10),
                    i;
                return n < 1 || n > 12 || r < 1 || r > 31 ? i = new Date(undefined) : i = new Date(t, n - 1, r), {
                    dateOfBirth: i.isValid() ? i.serverFormat() : null
                }
            },
            receive: function(t) {
                var n = e.parseServerDate(t),
                    r = {};
                return n.isValid() && (r = {
                    dobYear: n.getFullYear(),
                    dobMonth: n.getMonth() + 1,
                    dobDate: n.getDate()
                }), r
            }
        }
    }), define("components/signup/scripts/models/v1/lead", ["components/common/scripts/models/v1/baseModels"], function(e) {
        var t = {
            endpoint: "/leads"
        };
        return t.validation = {
            email: {
                required: !0,
                pattern: "email"
            },
            firstName: {
                required: !0,
                pattern: "alphaPlus"
            },
            middleName: {
                required: !1,
                pattern: "alpha",
                length: 1
            },
            lastName: {
                required: !0,
                pattern: "alphaPlus"
            }
        }, e.Model.extend(t)
    }), define("views/signup/basicContactView", ["underscore", "views/signup/baseSectionView", "components/common/scripts/constants/addressConstants", "views/signup/dateOfBirthTransformer", "components/signup/scripts/models/v1/lead"], function(e, t, n, r, i) {
        return t.extend({
            template: "signup/basicContact",
            templateHelpers: {
                state_select: function(t) {
                    var r = [{
                            label: "-",
                            value: ""
                        }].concat(n.unitedStates()),
                        i = e.extend({
                            "class": "state-selector"
                        }, t || {});
                    return this.prefilled_select("state", r, i)
                }
            },
            events: {
                "click .radio-area": "toggleGenderRadio",
                "keydown input[name=phone], input[name=zip], input[name=dobMonth], input[name=dobDate], input[name=dobYear]": "restrictNumeric",
                "keyup input[name=dobMonth], input[name=dobDate], input[name=dobYear]": "dateJumper",
                "blur [name=firstName], [name=middleName], [name=lastName], [name=userName]": "saveLead"
            },
            onInitializeSection: function() {
                this.lead = new i
            },
            onRenderSection: function() {
                this.$("input[name=phone]").mask("(999) 999-9999")
            },
            toggleGenderRadio: function(e) {
                if ($(e.target).is("input")) return;
                this.$("input[name=gender]").prop("checked", !1).removeAttr("checked");
                var t = $(e.currentTarget).find("input[type=radio]");
                t.prop("checked", !0).blur()
            },
            dateJumper: function(e) {
                var t = $(e.currentTarget),
                    n = t.prev("input"),
                    r = t.next("input"),
                    i = this._normalizedCode(e),
                    s = t.val();
                i === 8 && !s && n.length ? n.focus() : s.length === parseInt(t.attr("maxlength"), 10) && r.length && r.focus(), BMT.vent.trigger("signup:dateOfBirthChanged")
            },
            afterPopulateValues: function() {
                this.conversation.validate({
                    silent: !0
                }), this.saveLead()
            },
            isLeadComplete: function() {
                return !this.lead.validate(this.gatherLeadAttributes())
            },
            gatherLeadAttributes: function() {
                return {
                    email: this.$("[name=userName]").val(),
                    firstName: this.$("[name=firstName]").val(),
                    middleName: this.$("[name=middleName]").val(),
                    lastName: this.$("[name=lastName]").val()
                }
            },
            saveLead: function() {
                !this.model.get("advisorToken") && !this.lead.is("saved") && this.isLeadComplete() && this.lead.save(this.gatherLeadAttributes(), {
                    skipErrorAlert: !0
                }).then(function() {
                    this.lead.set("saved", !0)
                }.bind(this))
            },
            setupConversation: function() {
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    messages: e.extend({}, this.model.conversation),
                    validationModels: {
                        User: this.model
                    },
                    transformers: {
                        dateOfBirth: r,
                        phone: function(e) {
                            return e.replace(/[^0-9]/g, "")
                        }
                    }
                }
            }
        })
    }), define("views/signup/ssnTransformer", [], function() {
        return {
            send: function(e) {
                return e ? e.replace(/\D/g, "") : ""
            },
            receive: function(e) {
                return {
                    ssn: e.replace(/(\d{3})(\d{2})(\d{4})/, "$1-$2-$3")
                }
            }
        }
    }), define("views/signup/identityVerificationView", ["underscore", "views/signup/baseSectionView", "views/signup/ssnTransformer"], function(e, t, n) {
        return t.extend({
            template: "signup/identityVerification",
            events: {
                "keypress input[name=ssn]": "restrictNumeric",
                "blur input[name=ssn]": "maskText",
                "focus input[name=ssn]": "revealText"
            },
            extraFields: ["ssnLastFour"],
            onRenderSection: function() {
                this.$ssnInput = this.$("input[name=ssn]"), this.$ssnOverlay = this.$(".fake-ssn"), this.$ssnInput.mask("999-99-9999")
            },
            afterPopulateValues: function() {
                this.$ssnInput.val("***-**-" + this.attrs.ssnLastFour), this.conversation.validate({
                    silent: !0
                })
            },
            setupConversation: function() {
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    messages: e.extend({}, this.model.conversation),
                    validationModels: {
                        User: this.model
                    },
                    transformers: {
                        ssn: n
                    }
                }
            },
            maskText: function() {
                this.$ssnOverlay.addClass("showing"), this.$ssnOverlay.text(this.formattedStarString())
            },
            revealText: function() {
                this.$ssnOverlay.removeClass("showing")
            },
            formattedStarString: function() {
                return this.$ssnInput.val().replace(/\d/g, "*")
            }
        })
    }), define("components/common/scripts/constants/securityQuestions", [], function() {
        return {
            securityQuestion1: ["What was the name of your elementary school?", "What was the name of your favourite childhood friend?", "What was the name of your childhood pet?"],
            securityQuestion2: ["What street did you live on in third grade?", "What is your oldest sibling's birth month?", "In what city did your mother and father meet?"]
        }
    }), define("views/signup/securityView", ["underscore", "views/signup/baseSectionView", "components/common/scripts/constants/securityQuestions"], function(e, t, n) {
        return t.extend({
            template: "signup/security",
            templateHelpers: {
                question_one: function(t) {
                    var r = e.extend({
                            "class": "question-selector question-selector-1"
                        }, t || {}),
                        i = [{
                            label: "Please select",
                            value: ""
                        }].concat(n.securityQuestion1);
                    return this.prefilled_select("securityQuestion1", i, r)
                },
                question_two: function(t) {
                    var r = e.extend({
                            "class": "question-selector question-selector-2"
                        }, t || {}),
                        i = [{
                            label: "Please select",
                            value: ""
                        }].concat(n.securityQuestion2);
                    return this.prefilled_select("securityQuestion2", i, r)
                }
            },
            setupConversation: function() {
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    validationModels: {
                        custom: {
                            preValidate: function(e, t) {
                                return t && t.trim() ? "" : "Security questions and answers are required"
                            }
                        }
                    },
                    messages: {
                        securityQuestion1: {
                            bad: "You must select security questions."
                        },
                        securityQuestion2: {
                            bad: "You must select security questions."
                        },
                        securityAnswer1: {
                            bad: "Security questions are required to protect your account."
                        },
                        securityAnswer2: {
                            bad: "We need two security questions to be extra safe."
                        }
                    }
                }
            }
        })
    }), define("components/common/scripts/constants/employmentConstants", [], function() {
        return {
            FULL_TIME: "Employed (full-time)",
            PART_TIME: "Employed (part-time)",
            SELF_EMPLOYED: "Self-employed",
            STUDENT: "Student",
            RETIRED: "Retired",
            HOMEMAKER: "Homemaker",
            UNEMPLOYED: "Not employed"
        }
    }), define("views/signup/employmentView", ["jquery", "underscore", "common/betterment.models", "components/common/scripts/util/formatter", "common/slider", "views/signup/baseSectionView", "components/common/scripts/constants/employmentConstants"], function(e, t, n, r, i, s, o) {
        var u = [{
                max: 74,
                min: 0,
                step: 1e3,
                base: 0
            }, {
                max: 147,
                min: 74,
                step: 2e3,
                base: 74e3
            }, {
                max: 225,
                min: 147,
                step: 5e3,
                base: 22e4
            }, {
                max: 245,
                min: 225,
                step: 1e4,
                base: 6e5
            }, {
                max: Number.POSITIVE_INFINITY,
                min: 245,
                step: 4e4,
                base: 8e5
            }],
            a = [{
                max: 100,
                min: 0,
                step: 1e3,
                base: 0
            }, {
                max: 140,
                min: 100,
                step: 1e4,
                base: 1e5
            }, {
                max: 190,
                min: 140,
                step: 5e4,
                base: 5e5
            }, {
                max: Number.POSITIVE_INFINITY,
                min: 190,
                step: 5e5,
                base: 3e6
            }],
            f = 1e6,
            l = 1e7;
        return s.extend({
            template: "signup/employment",
            events: {
                "change .employment-status-selector": "employmentStatusChanged"
            },
            templateHelpers: {
                employment_status: function(e) {
                    var n = t.extend({
                            "class": "employment-status-selector"
                        }, e || {}),
                        r = t.extend({
                            "": "Please select"
                        }, o);
                    return this.prefilled_select("employmentStatus", r, n)
                }
            },
            onRenderSection: function() {
                this.$netWorthSlider = this.makeSlider(".net-worth-slider", {
                    min: 0,
                    max: 204,
                    step: 1,
                    fromSliderValue: function(e) {
                        return i.ticksToValue(e, a)
                    },
                    toSliderValue: function(e) {
                        return i.valueToTicks(e, a)
                    },
                    onStop: function(e, t) {
                        e === l && t.focus().select()
                    }
                }), this.$annualIncomeSlider = this.makeSlider(".annual-income-slider", {
                    min: 0,
                    max: 250,
                    step: 1,
                    value: this.model.get("annualIncome") || 8e4,
                    fromSliderValue: function(e) {
                        return i.ticksToValue(e, u)
                    },
                    toSliderValue: function(e) {
                        return i.valueToTicks(e, u)
                    },
                    onStop: function(e, t) {
                        e === f && t.focus().select()
                    }
                }), this.listenTo(this, "signup:unlockSection", function() {
                    this.conversation.validate({
                        silent: !0
                    })
                }), this.attrs.employmentStatus === "RETIRED" && this.toggleAnnualIncomePrompt("RETIRED")
            },
            bindUnlockBehavior: function() {
                this.$(".net-worth-slider").one("slidechange", t.bind(function() {
                    BMT.vent.trigger("signup:sectionAlmostComplete", this)
                }, this))
            },
            afterPopulateValues: function() {
                t.contains(["FULL_TIME", "PART_TIME"], this.attrs.employmentStatus) && this.$(".occupation, .employer").show(), t.each(["annualIncome", "netWorth"], function(e) {
                    this.$("[name=" + e + "]").triggerHandler("keyup"), this.$("[name=" + e + "]").triggerHandler("change")
                }, this), this.conversation.validate({
                    silent: !0
                })
            },
            employmentStatusChanged: function(t) {
                var n = e(t.currentTarget).val();
                this.toggleEmploymentDetails(n), this.toggleAnnualIncomePrompt(n), BMT.vent.trigger("signup:employmentStatusChanged")
            },
            toggleEmploymentDetails: function(e) {
                var t = this.$(".occupation, .employer");
                e === "FULL_TIME" || e === "PART_TIME" ? t.data("required", "true").slideDown() : t.data("required", "false").slideUp()
            },
            toggleAnnualIncomePrompt: function(e) {
                e === "RETIRED" ? (this.conversation.messages.annualIncome = this.model.conversation.annualIncomeRetired, this.$("input[name=annualIncome]").focus()) : e === "HOMEMAKER" ? (this.conversation.messages.annualIncome = this.model.conversation.annualIncomeHomemaker, this.$("input[name=annualIncome]").focus()) : this.conversation.messages.annualIncome = this.model.conversation.annualIncome
            },
            setupConversation: function() {
                var e = this;
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    validationModels: {
                        User: this.model,
                        Employment: {
                            preValidate: function(n, r) {
                                var i = e.$(".employment-status-selector").val();
                                return t.contains(["FULL_TIME", "PART_TIME"], i) && !r.trim() ? "Employment details are required." : !1
                            }
                        }
                    },
                    messages: t.extend({}, this.model.conversation),
                    transformers: {
                        annualIncome: function(e) {
                            return t.isString(e) ? e.replace(/[^0-9\.]/g, "") : e
                        },
                        netWorth: function(e) {
                            return t.isString(e) ? e.replace(/[^0-9\.]/g, "") : e
                        }
                    }
                }
            },
            makeSlider: function(n, i) {
                var s = this.$(n).closest(".input-area").find("input"),
                    o = function(e) {
                        return parseInt(e.replace(/[^0-9]+/g, "")) || 0
                    };
                t.isNumber(i.value) && (s.val(r.integer(i.value)), i.value = i.toSliderValue(i.value)), i = t.extend({
                    min: 0,
                    max: 100,
                    step: 1,
                    value: 0,
                    tooltip: !1,
                    start: function(e, t) {
                        BMT.analytics.trackOnce("InputSubmitted", {
                            Name: s.attr("name").capitalize(),
                            Location: "BigForm/Employment",
                            Type: "Slider"
                        }), s.triggerHandler("focus")
                    },
                    slide: function(e, t) {
                        var n = r.integer(i.fromSliderValue(t.value));
                        s.val(n)
                    },
                    stop: function(e, t) {
                        s.triggerHandler("blur"), s.triggerHandler("change"), i.onStop && i.onStop(o(s.val()), s)
                    }
                }, i);
                var u = this.slider(n, i);
                return s.on("keyup", function() {
                    var t = o(e(this).val());
                    u.slider("value", i.toSliderValue(t))
                }), s.on("change", function() {
                    var t = r.integer(e(this).val());
                    e(this).val(t)
                }), u
            }
        })
    }), define("views/signup/goalView", ["underscore", "views/signup/baseSectionView", "models/user", "models/account", "components/account/scripts/services/goalService", "components/account/scripts/services/goalTypeService", "components/account/scripts/constants/accountConstants", "projector", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a) {
        var f = {
                TRADITIONAL: a.TRADITIONAL_IRA,
                ROTH: a.ROTH_IRA,
                SEP: a.SEP_IRA,
                _default: a.INVESTING
            },
            l = ["TRADITIONAL", "ROTH", "SEP"];
        return t.extend({
            template: "signup/goal",
            templateHelpers: {
                goal_type: function(e) {
                    var e = e || {};
                    return this.prefilled_select("goalType", this.self.buildGoalTypes(), e)
                },
                account_type: function(e) {
                    var e = e || {};
                    return this.prefilled_select("accountType", this.self.buildAccountTypes(), e)
                }
            },
            toolTips: {
                ".trust-info-tip": {
                    position: {
                        my: "left center",
                        at: "right center"
                    },
                    hide: {
                        fixed: !0,
                        delay: 300
                    }
                }
            },
            events: {
                "change [name=goalType]": "goalTypeChanged",
                "change [name=accountType]": "goalTypeChanged",
                "keydown input[name=goalCompletionDate]": "restrictNumeric",
                "keyup input[name=goalCompletionDate]": "updateAllocationRecommendation"
            },
            extraFields: ["accountType", "income"],
            onInitializeSection: function() {
                this.goalTypes = s.goalTypes(), this.listenTo(BMT.vent, "signup:dateOfBirthChanged signup:employmentStatusChanged", this.goalTypeChanged)
            },
            goalTypeChanged: function() {
                var e = this.getGoalType(),
                    t = s.getGoalTypeByName(e),
                    n = this.getAccountType();
                this.updateInputFields(e), BMT.vent.trigger("signup:accountTypeChanged", n), t && this.conversation.validate(), this.updateAllocationRecommendation()
            },
            updateAllocationRecommendation: function() {
                var e = this._getContextForAllocationRecommendation();
                if (e.age && e.employmentStatus && e.goalType && e.termYears) {
                    var t = u.recommendedAllocation(e).allocation;
                    this.$(".allocation-info .allocation-stocks").text(Math.round(t * 100)), this.$(".allocation-info .allocation-bonds").text(Math.round((1 - t) * 100)), this.$(".allocation-info").toggle(this.isValid()), this.model.set("recommendation", t)
                }
            },
            _getContextForAllocationRecommendation: function() {
                var e = this.getGoalType(),
                    t = this.getDateOfBirthFromContactSection(),
                    n = this.getUserAge(),
                    r;
                return s.isRetirement(e) && this.getGoalTermOrAge() ? r = i.convertAgeToTerm(this.getGoalTermOrAge(), t) : r = this.getGoalTermOrAge(), {
                    age: n,
                    employmentStatus: this.getEmploymentStatusFromEmploymentSection(),
                    goalType: s.isRetirement(e) ? "RETIREMENT" : e,
                    termYears: r
                }
            },
            updateInputFields: function(e) {
                var t = {
                        goalType: e,
                        age: this.getUserAge(),
                        isRetired: this.isRetired(),
                        isPersonal: !0
                    },
                    n = this.getUserAge() ? i.getDefaultTermForContext(t) : "";
                this.toggleTermInput(t), this.toggleAccountTypeInput(t), this.updateTermOrAgeLabel(e), s.isRetirement(this.getGoalType()) && n && (n = i.convertTermToAge(n, this.getDateOfBirthFromContactSection())), this.$("input[name=goalCompletionDate]").val(n || ""), this.$("input[name=goalCompletionDate]").trigger("blur"), this.$("input[name=goalType]").trigger("blur")
            },
            toggleTermInput: function(e) {
                var t = this.$(".input-line.term"),
                    n = e.goalType,
                    r = s.isRetirement(n) && e.isRetired;
                r || n === "EMERGENCY" || n === "BUILD_WEALTH" || n === "RETIREMENT_INCOME"|| n === "EMERGENCY_ETHICAL" || n === "BUILD_WEALTH_ETHICAL" || n === "RETIREMENT_INCOME_ETHICAL"  ? t.slideUp() : t.slideDown()
            },
            toggleAccountTypeInput: function(e) {
                var t = this.$(".account-type"),
                    n = e.goalType === "RETIREMENT_INCOME" && e.isRetired;
                t[n ? "slideDown" : "slideUp"]()
            },
            updateTermOrAgeLabel: function(e) {
                var t = s.isRetirement(e) ? "Retirement age" : "Years until goal";
                this.$(".input-line.term label").text(t)
            },
            getUserAge: function() {
                var e = this.getDateOfBirthFromContactSection(),
                    t = 0;
                return e.isValid() && (t = e.yearsBetween(Date.now())), t
            },
            getDateOfBirthFromContactSection: function() {
                var e = parseInt($("input[name=dobYear]").val()),
                    t = parseInt($("input[name=dobMonth]").val()),
                    r = parseInt($("input[name=dobDate]").val());
                return n.buildDateOfBirth(e, t, r)
            },
            getEmploymentStatusFromEmploymentSection: function() {
                return $("select[name=employmentStatus]").val()
            },
            afterPopulateValues: function() {
                this.setAccountType(), this.setGoalType(), this.goalTypeChanged(), this.$("input[name=goalCompletionDate]").trigger("keydown")
            },
            isRetired: function() {
                return $(".employment-status-selector").val() === "RETIRED"
            },
            setAccountType: function() {
                var e = this.attrs.accountType || a.INVESTING;
                this.$("[name=accountType]").val(e)
            },
            setGoalType: function() {
                var e = this.attrs.goalType;
                this.attrs.income && (e = "RETIREMENT_INCOME"), this.$("[name=goalType]").val(e)
            },
            getAccountType: function() {
                var e = this.getGoalType(),
                    t = this.$("[name=accountType]").val(),
                    n = f._default;
                return e === "RETIREMENT_INCOME" && t ? n = t : f[e] && (n = f[e]), n
            },
            getGoalType: function() {
                return this.$("[name=goalType]").val()
            },
            getGoalTermOrAge: function() {
                return this.$("[name=goalCompletionDate]").numberVal()
            },
            buildGoalTypes: function() {
                var t = [{
                        term: null,
                        value: "",
                        label: "Please select"
                    }],
                    n = e.reduce(this.goalTypes, function(t, n) {
                        return e.contains(["BABY_KIDS", "WEDDING", "PURCHASE"], n.value) || t.push(n), t
                    }, t);
                return n
            },
            buildAccountTypes: function() {
                var e = [{
                    value: "",
                    label: "Please select"
                }];
                return e.concat(s.accountTypes())
            },
            setupConversation: function() {
                var t = this;
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    validationModels: {
                        custom: {
                            preValidate: function(e, t) {
                                return e === "goalCompletionDate" ? this.validateGoalCompletionDate(t) : e === "goalType" ? this.validateGoalType() : e === "accountType" ? this.validateAccountType() : e === "income" ? !1 : "Please provide details for your goal."
                            },
                            validateGoalType: function() {
                                return t.getGoalType() === "RETIREMENT_INCOME" && !t.isRetired() ? "Income goals are only available for Retirees right now. Please update your employment status to use this type." : t.getUserAge() ? t.getGoalType() ? !1 : "Please select a type for your first goal." : "Please enter your date of birth so we can provide advice."
                            },
                            validateAccountType: function() {
                                var e = $("[name=accountType]").val();
                                return t.getGoalType() === "RETIREMENT_INCOME" && t.isRetired() && !e ? "Please select the type of retirement account." : !1
                            },
                            validateGoalCompletionDate: function(n) {
                                var u = t.getUserAge(),
                                    a = t.getGoalType(),
                                    f = a && e.contains(l, a),
                                    c = a && f ? "RETIREMENT" : a,
                                    h = s.isRetirement(c);
                                if (!u || !a || !c) return !1;
                                if (!n) return "Please provide details for your goal.";
                                var n = r.Model.date(n),
                                    p = r.Model.goalTerm(n),
                                    d = i.convertTermToAge(p, t.getDateOfBirthFromContactSection());
                                if (f) {
                                    if (d < 59) return "Must be at least 59 years old at retirement.";
                                    if (a === "ROTH" && d > u + o.MAX_TERM) return "Must be at most " + o.MAX_TERM + " years from now.";
                                    if (d < u + 1) return "Must be at least " + o.MIN_TERM + " year from now."
                                } else if (h) {
                                    if (d < u + 1) return "Must be at least " + o.MIN_TERM + " year from now.";
                                    if (d > u + o.MAX_TERM) return "Must be at most " + o.MAX_TERM + " years from now."
                                } else {
                                    if (p < 1) return "Must be at least " + o.MIN_TERM + " year.";
                                    if (p > o.MAX_TERM) return "Must be at most " + o.MAX_TERM + " years."
                                }
                            }
                        }
                    },
                    transformers: {
                        accountAndGoalType: {
                            send: function(e) {
                                var n = e.goalType;
                                return {
                                    accountType: t.getAccountType(),
                                    goalType: s.isRetirement(n) ? "RETIREMENT" : n,
                                    income: n === "RETIREMENT_INCOME"
                                }
                            }
                        },
                        goalCompletionDate: {
                            send: function(e) {
                                var n = parseInt(e, 10),
                                    o;
                                return s.isRetirement(t.getGoalType()) ? o = i.convertAgeToTerm(n, t.getDateOfBirthFromContactSection()) : o = n, r.Model.convertTermToDate(o).serverFormat()
                            },
                            receive: function(e) {
                                var n = r.Model.goalTerm(r.Model.date(e));
                                return s.isRetirement(t.getGoalType()) ? i.convertTermToAge(n, t.getDateOfBirthFromContactSection()) : n
                            }
                        }
                    }
                }
            }
        })
    }), define("components/common/scripts/constants/howHeardConstants", [], function() {
        return {
            howHeardItems: function() {
                return ["Friend", "Facebook / Twitter / Quora", "Print / TV", "Mobile Advertising", "Mint", "Podcast", "Radio", "Posters / Outdoor Advertising", "Other"]
            }
        }
    }), define("views/signup/regulatoryView", ["underscore", "views/signup/baseSectionView", "views/common/termsOfServiceView", "components/account/scripts/constants/accountTypes", "components/common/scripts/constants/howHeardConstants"], function(e, t, n, r, i) {
        return t.extend({
            template: "signup/regulatory",
            toolTips: {
                "#assBDhelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                "#tenPIhelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                "#backuphelp": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            regions: {
                termsOfServiceRegion: ".tos-area"
            },
            events: {
                "change input[type=radio]": "confirmAnswerChange",
                "change .how-heard-selector": "checkHowHeard"
            },
            templateHelpers: {
                how_heard: function(t) {
                    var n = e.extend({
                            "class": "how-heard-selector"
                        }, t || {}),
                        r = [{
                            label: "Please select",
                            value: ""
                        }].concat(i.howHeardItems());
                    return this.prefilled_select("howHeard", r, n)
                }
            },
            confirmations: {
                associatedToBrokerDealer: {
                    title: "Broker dealer association",
                    body: '<div class="broker-dealer-confirmation">If you are associated with or employed by a broker dealer you will need to provide us with written approval from your firm\'s compliance officer before you will be able to use your account. By giving us the firm name, we can provide you with a letter to take to the compliance officer explaining the account.<br /><br /><label>Firm name:</label> <input type="text" name="firm" class="required" /></div>',
                    buttons: [{
                        id: "yes",
                        title: "Submit"
                    }, {
                        id: "no",
                        title: "Cancel"
                    }]
                },
                tenPercentInsider: {
                    title: "Are you sure you are affiliated with a public company?",
                    body: "If you are an affiliated person, your account may be subject to additional oversight."
                },
                subjectToBackupWithholding: {
                    title: "Are you sure you are subject to backup withholding?",
                    body: "If you are subject to backup witholding, we cannot open an account for you. Most people are NOT subject to backup withholding.<br /><br />Backup withholding is a 28% tax which is withheld from any taxable activity, such as the posting of a dividend or the sale of securities.<br /><br />IMPORTANT: if you have been notified by the IRS concerning your backup withholding status, you must state so when opening a BetaSmartz account. Also, please be aware that BetaSmartz cannot provide any advice concerning tax matters, all questions should be directed to a tax advisor or the IRS."
                }
            },
            extraFields: ["accountType"],
            onInitializeSection: function() {
                this.listenTo(BMT.vent, "signup:accountTypeChanged", function(e) {
                    this.renderTOS(e)
                }, this)
            },
            onRenderSection: function() {
                this.renderTOS()
            },
            showIraTOS: function() {
                var e = this.attrs.accountType && r.isIRA(this.attrs.accountType),
                    t = BMT.accountGroup.has("accounts") && BMT.accounts().size() > 0 && BMT.accounts().at(0).isIRA();
                return e || t
            },
            showSepTOS: function() {
                return this.attrs.accountType === r.SEP_IRA
            },
            renderTOS: function(e) {
                this.termsOfServiceRegion.show(new n({
                    isNewUser: !0,
                    showIraAgreement: this.showIraTOS() || r.isIRA(e),
                    showSEPAgreement: this.showSepTOS() || e === r.SEP_IRA,
                    expandHeight: 120
                }))
            },
            confirmAnswerChange: function(e) {
                var t = $(e.currentTarget),
                    n = t.attr("name"),
                    r = t.closest("li").find(".cannot-say-yes"),
                    i = this;
                if (t.val() === "true") {
                    var s = this.confirmations[n];
                    BMT.alert({
                        title: s.title,
                        icon: "warning",
                        width: 490,
                        body: s.body,
                        noClose: !0,
                        buttons: s.buttons || [{
                            id: "yes",
                            title: "Yes"
                        }, {
                            id: "no",
                            title: "No"
                        }],
                        handler: function(e) {
                            if (n === "associatedToBrokerDealer") {
                                if (e === "no") BMT.modal.close(this), i.model.unset("firmName"), i.$("[name=" + n + "][value=false]").prop("checked", "checked");
                                else if (e === "yes") {
                                    var t = this.$("[name=firm]");
                                    t.val() ? (BMT.modal.close(this), i.model.set("firmName", this.$("input[name=firm]").val()), BMT.alert({
                                        title: "Broker dealer association",
                                        icon: "accept",
                                        body: "Thanks! We'll send you an email with further instructions as soon as you've finished signing up.",
                                        buttons: [{
                                            id: "okay",
                                            title: "Okay, got it"
                                        }]
                                    })) : this.updateFieldValidation(t, "Please provide a firm name.")
                                }
                            } else BMT.modal.close(this), e === "no" ? i.$("[name=" + n + "][value=false]").prop("checked", "checked") : r.length && r.slideDown()
                        }
                    })
                } else n === "associatedToBrokerDealer" ? i.model.unset("firmName") : r.length && r.slideUp()
            },
            unlockSection: function() {
                t.prototype.unlockSection.apply(this), this.$(".regulatory-error").hide()
            },
            gatherAttributes: function() {
                var t = this.$(":input"),
                    n = {};
                return t.each(function() {
                    var t = {},
                        r = $(this),
                        i = r.attr("name");
                    if (r.is("[type=radio]") && !r.is(":checked")) return;
                    t[i] = r.val(), e.extend(n, t)
                }), n.firmName = this.model.get("firmName"), e.extend(n, this.termsOfServiceRegion.currentView.getAgreementValues()), n
            },
            agreedToAll: function() {
                return this.termsOfServiceRegion.currentView.hasUserAcceptedAgreements()
            },
            checkHowHeard: function() {
                var e = (this.$(".how-heard-selector").val() || "").trim();
                return this.$(".how-heard-error")[e ? "slideUp" : "slideDown"](), e
            },
            hasAcceptableAnswers: function() {
                return this.$("[name=subjectToBackupWithholding]:checked").val() === "false"
            },
            isValid: function() {
                return this.agreedToAll() && this.hasAcceptableAnswers() && !!this.checkHowHeard()
            },
            validate: function() {
                return this.checkHowHeard(), this.termsOfServiceRegion.currentView.checkAgreements(), !!this.isValid()
            },
            showErrors: function(t) {
                t.clientAgreement ? (this.termsOfServiceRegion.currentView.showClientAgreementError(), delete t.clientAgreement) : this.termsOfServiceRegion.currentView.hideClientAgreementError(), t.userAgreement ? (this.termsOfServiceRegion.currentView.showUserAgreementError(), delete t.userAgreement) : this.termsOfServiceRegion.currentView.hideUserAgreementError(), t.iraWithholding ? (this.termsOfServiceRegion.currentView.showIRAAgreementError(), delete t.iraWithholding) : this.termsOfServiceRegion.currentView.hideIRAAgreementError(), t.howHeard && (this.$(".how-heard-error").slideDown(), delete t.howHeard);
                var n = ["associatedToBrokerDealer", "tenPercentInsider", "subjectToBackupWithholding"];
                e.each(n, function(e) {
                    t[e] && (this.$(".regulatory-error").slideDown(), delete t[e])
                }, this)
            },
            populateValues: function(e) {},
            resume: function(e) {
                var t = $.Deferred(),
                    n;
                return this.hasAcceptableAnswers() ? this.checkHowHeard() ? this.agreedToAll() || (n = this.$(".tos .tos-line").first()) : n = this.$(".input-line.how-heard") : n = this.$(".questions"), n && n.qtip({
                    content: {
                        text: e
                    },
                    position: {
                        my: "center right",
                        at: "center left",
                        adjust: {
                            x: -20
                        }
                    },
                    style: {
                        classes: "conversation-tooltip"
                    },
                    show: {
                        ready: !0
                    },
                    hide: {
                        event: "blur change"
                    },
                    events: {
                        hide: function() {
                            $(this).qtip("destroy", !0)
                        }
                    }
                }), t.resolve(), t
            }
        })
    }), define("hbs!views/signup/identityCorrection", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                return '\n        <div class="guest-form">\n            <div class="input-line" data-required="true" data-group="name">\n                <label>Name</label>\n                <span class="input-area">\n                    <input class="white" type="text" name="firstName" placeholder="First" tabindex="1" />\n                    <input class="white" type="text" name="middleName" placeholder="M" tabindex="20" maxlength="1" />\n                    <input class="white" type="text" name="lastName" placeholder="Last" tabindex="30" />\n                    <div class="conversation-text"></div>\n                </span>\n            </div>\n        </div>\n    '
            }

            function c(e, t) {
                return '\n        <div class="input-line" data-required="true" data-group="dateOfBirth">\n            <label>Date of birth</label>\n            <span class="input-area">\n                <input type="text" class="white dob" name="dobMonth" maxlength="2" placeholder="MM" tabindex="60" />\n                <input type="text" class="white dob" name="dobDate" maxlength="2" placeholder="DD" tabindex="70" />\n                <input type="text" class="white dob" name="dobYear" maxlength="4" placeholder="YYYY" tabindex="80" />\n                <div class="conversation-text"></div>\n            </span>\n        </div>\n    '
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n        <div class="input-line" data-required="true">\n            <label>Age Pension <span class="security-icon"></span></label>\n            <span class="input-area">\n                <input class="white" type="text" name="ssn" placeholder="" tabindex="170" />\n                <div class="fake-ssn"></div>\n                <p class="indent"><a target="_blank" href="', (s = n.brochureSecurityUrl) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.brochureSecurityUrl, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '">Bank-Level Security &gt;</a></p>\n                <div class="conversation-text"></div>\n            </span>\n        </div>\n    ', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<section data-validation-model="User">\n\n    ', o = n["if"].call(t, t && t.showDefaultFieldGroup, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n    ", o = n["if"].call(t, t && t.showDobFieldGroup, {
                hash: {},
                inverse: f.noop,
                fn: f.program(3, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n    ", o = n["if"].call(t, t && t.showDefaultFieldGroup, {
                hash: {},
                inverse: f.noop,
                fn: f.program(5, h, i)
            });
            if (o || o === 0) s += o;
            return s += "\n</section>\n\n", s
        });
        return t.registerPartial("views/signup/identityCorrection", n), n
    }), define("views/signup/identityCorrectionView", ["underscore", "views/signup/baseSectionView", "views/signup/dateOfBirthTransformer", "views/signup/ssnTransformer", "hbs!views/signup/identityCorrection"], function(e, t, n, r, i) {
        return t.extend({
            template: i,
            events: {
                "keydown input[name=zip], input[name=dobMonth], input[name=dobDate], input[name=dobYear]": "restrictNumeric"
            },
            templateHelpers: {
                displayPosition: function() {
                    return this.self.getDisplayPosition()
                },
                showDefaultFieldGroup: function() {
                    return e.contains(this.self.options.fieldGroups, "default")
                },
                showDobFieldGroup: function() {
                    return e.contains(this.self.options.fieldGroups, "dob")
                },
                brochureSecurityUrl: function() {
                    return this.brochure_url("security")
                }
            },
            onRenderSection: function() {
                this.$("input[name=ssn]").mask("999-99-9999")
            },
            afterPopulateValues: function() {
                this.conversation.validate({
                    silent: !0
                })
            },
            setupConversation: function() {
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    messages: e.extend({}, this.model.conversation),
                    validationModels: {
                        User: this.model
                    },
                    transformers: {
                        dateOfBirth: n,
                        ssn: r
                    }
                }
            }
        })
    }), define("components/common/scripts/models/v1/userSignup", ["underscore", "backbone", "components/common/scripts/models/v1/baseModels", "components/common/scripts/services/dateService", "components/account/scripts/constants/accountTypes", "components/account/scripts/constants/accountConstants"], function(e, t, n, r, i, s) {
        var o = {
            endpoint: "/users",
            hasData: function() {
                return !e.isEmpty(this.attributes)
            },
            hasGoalInfo: function() {
                return this.has("goalType") && i.isValid(this.get("accountType")) && this.has("goalCompletionDate")
            },
            hasUserInfo: function() {
                return this.has("userName") && this.has("firstName") && this.has("lastName")
            },
            getAge: function() {
                return this.dateOfBirth() ? Math.floor(((new Date).getTime() - this.dateOfBirth().getTime()) / Date.MS_PER_YEAR) : null
            },
            dateOfBirth: function() {
                return this.date("dateOfBirth").isValid() ? this.date("dateOfBirth") : this.date("estimatedDateOfBirth")
            },
            getTerm: function() {
                return this.has("goalCompletionDate") ? Date.now().yearsBetween(this.date("goalCompletionDate")) : null
            }
        };
        return o.labels = {
            userName: "Email Address",
            phone: "Phone Number",
            address1: "Address Line 1",
            address2: "Address Line 2",
            zip: "Zip Code"
        }, o.validation = {
            userName: {
                required: !0,
                pattern: "email"
            },
            firstName: {
                required: !0,
                pattern: "alphaPlus",
                msg: "First name can only contain letters and hyphens."
            },
            middleName: {
                required: !1,
                pattern: "alpha",
                length: 1
            },
            lastName: function(e, n, r) {
                var i = (e || "").trim();
                return i ? i.length < 2 ? "Last name must be at least two characters" : i.match(t.Validation.patterns.alphaPlus) ? !1 : "Last name must only contain letters and hyphens." : "Last name is required."
            },
            password: {
                required: !0,
                minLength: 8
            },
            dateOfBirth: function(e, t, n) {
                if (!e) return "Your date of birth is required.";
                var i = r.parseServerDate(e);
                if (!i.isValid()) return "Please enter a valid date.";
                var s = (new Date).clearTime().addYears(-18);
                if (i.isAfter(s)) return "Must be at least 18 years old.";
                var o = (new Date).clearTime().addYears(-115);
                return i.isBefore(o) ? "Must be at most 115 years old." : !1
            },
            gender: {
                required: !0,
                oneOf: ["m", "f"]
            },
            address1: {
                required: !0,
                pattern: "ascii"
            },
            address2: {
                required: !1,
                pattern: "ascii"
            },
            city: {
                required: !0,
                pattern: "ascii"
            },
            state: {
                required: !0,
                length: 2
            },
            zip: {
                required: !0,
                pattern: "digits",
                length: 5
            },
            phone: {
                required: !0,
                pattern: "digits",
                length: 10
            },
            ssn: {
                required: !0,
                pattern: "digits",
                length: 9,
                msg: "That doesn't look like a valid Age Pension number."
            },
            securityQuestion1: {
                required: !0
            },
            securityAnswer1: {
                required: !0
            },
            securityQuestion2: {
                required: !0
            },
            securityAnswer2: {
                required: !0
            },
            employmentStatus: {
                required: !0
            },
            occupation: {
                required: function(t, n, r) {
                    return e.contains(["FULL_TIME", "PART_TIME"], r.employmentStatus)
                }
            },
            employer: {
                required: function(t, n, r) {
                    return e.contains(["FULL_TIME", "PART_TIME"], r.employmentStatus)
                }
            },
            annualIncome: function(t, n, r) {
                return e.isString(t) && (t = parseInt(t.trim(), 10)), t === 0 || t && t > 0 ? !1 : "Your annual gross income is required by law and also helps us give you better advice."
            },
            netWorth: function(t, n, r) {
                return e.isString(t) && (t = parseInt(t.trim(), 10)), t && t >= 0 ? !1 : "Your net worth is required by law and also helps us give you better advice."
            },
            goalType: {
                required: !0
            },
            accountType: {
                required: !0,
                oneOf: i.getAll()
            },
            goalCompletionDate: function(e) {
                if (!e) return "Goal term is required.";
                var t = r.parseServerDate(e).clearTime(),
                    n = (new Date).clearTime().addYears(1);
                if (t.isBefore(n)) return "Goal term must be at least one year.";
                var i = (new Date).clearTime().addYears(50);
                return t.isAfter(i) ? "Goal term may only go up to fifty years." : !1
            },
            goalAmount: {
                required: !1,
                pattern: "digits",
                max: s.MAX_TARGET_AMOUNT
            },
            income: {
                required: !0
            },
            recommendation: {
                required: !0,
                pattern: "number"
            },
            howHeard: {
                required: !0
            },
            associatedToBrokerDealer: {
                required: !0
            },
            firmName: {
                required: !1,
                pattern: "ascii"
            },
            tenPercentInsider: {
                required: !0
            },
            subjectToBackupWithholding: {
                required: !0
            },
            iraWithholding: function(e, t, n) {
                return i.isIRA(n.accountType) && !e ? "IRA withholding agreement is required." : !1
            },
            userAgreement: {
                required: !0,
                acceptance: !0,
                msg: "You must accept the terms and conditions to continue"
            },
            sepAgreement: function(e, t, n) {
                return n.accountType === i.SEP_IRA && !e ? "SEP IRA agreement is required." : !1
            }
        }, o.conversation = {
            name: {
                prompt: "What&#39;s your full name?",
                good: function(e) {
                    return "Hello, " + e.firstName + "!"
                },
                bad: function(e, t, n) {
                    return e.firstName && e.lastName ? e.lastName.trim().length < 2 ? "Your last name must be at least two characters." : "Please use letters, hyphens and apostrophes only." : "Your full name is required."
                }
            },
            userName: {
                prompt: "This will be used to log in to your account.",
                working: "Validating your email address...",
                good: "Looks good.",
                bad: function(e, t, n) {
                    return n && n.exists ? 'This email is already registered. Want to <a href="#"" class="goToLogin">log in</a> or <a href="/app/#forgotPassword">forgot your password</a>?' : e.userName && !t ? "Invalid email address." : t ? t : "Your email address is required."
                }
            },
            password: {
                prompt: "Use 8 characters or more.",
                good: "Perfect! Password looks good.",
                bad: "Please use at least 8 characters."
            },
            dateOfBirth: {
                prompt: "We use this to customize advice for you.",
                good: function(e) {
                    var t = r.parseServerDate(e.dateOfBirth),
                        n = new Date,
                        i = new Date(n.getFullYear(), t.getMonth(), t.getDate());
                    n.setHours(0, 0, 0, 0), i < n && i.setYear(n.getFullYear() + 1);
                    var s = Math.ceil((i.getTime() - n.getTime()) / Date.MS_PER_DAY);
                    if (s === 0) return "Happy birthday!";
                    var o = s === 1 ? "" : "s";
                    return "Great! " + s + " day" + o + " until your next birthday."
                },
                bad: function(e, t, n) {
                    return n.mismatch ? "Your date of birth doesn&#39;t match your name. Was the date entered correctly?" : t ? t : "Your date of birth is required."
                }
            },
            gender: {
                bad: "Please fill in your gender."
            },
            address1: {
                prompt: "We use your address to verify your identity and won&#39;t sell this information. No P.O. boxes and U.S. residents only.",
                good: "Thanks! Address looks good.",
                bad: function(e, t, n) {
                    return n.mismatch ? "Have you moved or changed your address within the last 12 months? If so, enter your previous address." : n.badFormat ? "This looks like a PO Box or a non-residential address. Please use the residential address you most recently paid a bill from." : "Your street address is required."
                }
            },
            cityAndState: {
                prompt: "In which city can we find that address?",
                good: "Thanks!",
                bad: "Your city and state are required."
            },
            zip: {
                prompt: "What&#39;s your zip code?",
                good: "Great!",
                bad: function(e, t, n) {
                    return n.badFormat ? "Invalid zip code." : "Your zip code is required."
                }
            },
            phone: {
                prompt: "We will only call you for support or to verify your information.",
                good: "Well done! Your first step is complete.",
                bad: function(e, t, n) {
                    return e.phone ? "That doesn&#39;t look like a valid phone number." : "Your phone number is required."
                }
            },
            ssn: {
                prompt: "Since this is a financial account, we are required to have your Age Pension number on file. Your information is safe and secure.",
                good: "Perfect!",
                bad: function(e, t, n) {
                    return e.ssn ? "Your Age Pension number appears to be invalid. Is there a typo?" : "We are required to ask for your Age Pension number."
                }
            },
            employmentStatus: {
                prompt: "We are required by law to understand your employment status.",
                bad: "Your employment status is required. Please select one."
            },
            occupation: {
                prompt: "What do you do for a living?",
                bad: "Your occupation information is required. This helps us tailor our advice and it is also required by law."
            },
            employer: {
                prompt: "Where do you work?",
                bad: "Your employer information is required by law."
            },
            annualIncome: {
                prompt: "Your annual income is your total income before taxes. The more accurate your income, the better we can tailor our advice for you.",
                bad: "Your annual gross income is required by law and also helps us give you better advice."
            },
            annualIncomeRetired: {
                prompt: "This is your current annual income from all sources (Age Pension, pension, etc) in retirement. It may be different than your desired income.",
                bad: "Your annual gross income is required by law and also helps us give you better advice."
            },
            annualIncomeHomemaker: {
                prompt: "Your household annual income is your total household income before taxes. The more accurate your income, the better we can tailor our advice for you.",
                bad: "Your household annual gross income is required by law and also helps us give you better advice."
            },
            netWorth: {
                prompt: "Estimate your net worth by taking the value of your bank account and investments, minus any loans or debts. This should not include your primary home or mortgage.",
                good: "Got it! You can change this later in your Account Settings.",
                bad: "Your net worth is required by law and also helps us give you better advice."
            }
        }, n.Model.extend(o)
    }), define("components/common/scripts/services/cookieService", ["jquery", "underscore", "components/common/scripts/models/appData", "jqueryCookie"], function(e, t, n) {
        return {
            setCookie: function(e, t) {
                return this._setCookie(e, t, {
                    domain: document.location.hostname
                })
            },
            setCookieWithWildcardDomain: function(e, t) {
                return this._setCookie(e, t, {
                    domain: this.getWildcardDomain()
                })
            },
            getWildcardDomain: function(e) {
                var t = (e || document.location.hostname).split("."),
                    n = "." + t.slice(-2).join(".");
                return n
            },
            removeCookie: function(t) {
                return e.removeCookie(t)
            },
            removeCookieWithWildcardDomain: function(t) {
                return e.removeCookie(t, {
                    domain: this.getWildcardDomain()
                })
            },
            _setCookie: function(n, r, i) {
                return t.extend(i, {
                    path: "/"
                }), e.cookie(n, r, i)
            },
            getCookie: function(t) {
                return e.cookie(t)
            },
            getVisitorKey: function() {
                return this.getCookie(n.getInstance().get("visitorCookieKey"))
            },
            setVisitorKey: function(e) {
                return this.setCookieWithWildcardDomain(n.getInstance().get("visitorCookieKey"), e)
            }
        }
    }), define("components/signup/scripts/models/explorer", ["underscore", "components/common/scripts/models/baseModels", "components/common/scripts/services/cookieService"], function(e, t, n) {
        var r = "__explorer",
            i = function() {
                var e = n.getCookie(r);
                return e && JSON.parse(e) || {}
            },
            s = function(e) {
                return n.setCookieWithWildcardDomain(r, JSON.stringify(e))
            },
            o = t.Model.extend({
                set: function() {
                    var e = t.Model.prototype.set.apply(this, arguments);
                    return s(this.toJSON()), e
                }
            });
        return {
            getInstance: e.memoize(function() {
                return new o(i())
            })
        }
    }), define("components/common/scripts/services/signupService", ["underscore", "jquery", "projector", "components/common/scripts/util/errorHandler", "components/common/scripts/models/v1/userSignup", "components/signup/scripts/models/explorer", "components/common/scripts/services/cookieService"], function(e, t, n, r, i, s, o) {
        function a() {
            return u || (u = new i(f())), u
        }

        function f() {
            var t = s.getInstance().toJSON(),
                n = {
                    firstName: t.firstName,
                    lastName: t.lastName,
                    userName: t.userName,
                    annualIncome: t.income,
                    goalType: t.goalType,
                    accountType: t.accountType,
                    goalCompletionDate: (new Date).addYears(t.term).serverFormat(),
                    recommendation: t.allocation,
                    goalAmount: t.target,
                    income: t.isRetirementIncomeGoal || !1
                };
            return e.reduce(n, function(t, n, r) {
                return e.isUndefined(n) || (t[r] = n), t
            }, {})
        }

        function l() {
            var e = a(),
                t = {
                    age: e.getAge(),
                    employmentStatus: e.get("employmentStatus"),
                    goalType: e.get("goalType"),
                    termYears: e.getTerm()
                };
            return n.recommendedAllocation(t).allocation
        }

        function c(e) {
            function t() {
                BMT.alert(r.getErrorContentForCode("UNKNOWN")), BMT.logError("New Big Form signup error: \nerror code: " + e.status + " something bad happened")
            }
            if (!e || !e.status || e.status === 500) return t(), {};
            var n;
            try {
                n = JSON.parse(e.responseText)
            } catch (i) {
                return t(), {}
            }
            return n.errorMessages ? n.errorMessages : n.errorCode ? (BMT.alert(r.getErrorContentForCode(n.errorCode)), {}) : (t(), {})
        }
        var u;
        return {
            getModel: function() {
                return a()
            },
            reset: function() {
                u = null
            },
            loadExplorerData: function() {
                return f()
            },
            signup: function() {
                var e = new t.Deferred,
                    n = a();
                n.set("visitorKey", o.getVisitorKey()), n.has("recommendation") || n.set("recommendation", l());
                var r = a().validate();
                return r ? (e.reject(r), e.promise()) : (n.save({}, {
                    skipErrorAlert: !0
                }).then(function() {
                    BMT.user.fetch().then(function() {
                        BMT.session.parse(), BMT.session.refreshTokens().then(function() {
                            e.resolve(BMT.user)
                        })
                    })
                }).fail(function(t) {
                    var n = c(t);
                    e.reject(n)
                }), e.promise())
            }
        }
    }), define("views/signup/signupView", ["underscore", "common/betterment.views", "common/errorHandler", "views/signup/basicContactView", "views/signup/identityVerificationView", "views/signup/securityView", "views/signup/employmentView", "views/signup/goalView", "views/signup/regulatoryView", "views/signup/identityCorrectionView", "components/common/scripts/modules/async", "models/user", "models/visitor", "models/session", "components/common/scripts/services/domainService", "projector", "models/v1/advisor", "components/common/scripts/services/signupService", "services/firmFetcher"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y) {
        var b = {
            Location: "Signup",
            Module: "BigForm"
        };
        return t.View.extend({
            template: "signup/signup",
            id: "signup",
            events: {
                "click .open-live-chat": "openLiveChat",
                "click #welcomeBackPanel .x-close": "hideWelcomeBack",
                "click a.goToLogin": "goToLogin",
                "click #signup-complete": "onOK"
            },
            regions: {
                basicContactRegion: "#basicContact",
                identityVerificationRegion: "#identityVerification",
                securityRegion: "#security",
                employmentRegion: "#employment",
                goalRegion: "#goalDetails",
                regulatoryRegion: "#regulatory",
                identityCorrectionRegion: "#identityCorrection",
                benefitsRegion: ".benefits-pane"
            },
            ui: {
                uncaughtErrors: ".uncaught-errors",
                errorList: ".uncaught-errors ul"
            },
            templateHelpers: {
                advisor_name: function() {
                    return this.self.advisor.get("name")
                },
                advisor_email: function() {
                    return this.self.advisor.get("email")
                },
                advisor_phone: function() {
                    return this.self.advisor.get("workPhone")
                }
            },
            onInitialize: function() {
                this.sections = [], this.sectionsByName = {}, this.model = g.getModel(), this.advisor = this.options.advisor, this.listenTo(BMT.vent, "signup:sectionAlmostComplete", this.unlockNext), this.sectionCount = 0
            },
            onShow: function() {
                this.renderSections(), window.dataLayer.push({
                    event: "signupFormVisited"
                })
            },
            renderSections: function() {
                this.basicContactRegion.show(this._addSection("basicContact", r, !1, !0)), this.identityVerificationRegion.show(this._addSection("identity", i)), this.securityRegion.show(this._addSection("security", s)), this.employmentRegion.show(this._addSection("employment", o)), this.model.hasGoalInfo() || this.goalRegion.show(this._addSection("goal", u)), this.regulatoryRegion.show(this._addSection("regulatory", a)), this.model.hasData() && (this.$("#welcomeBackPanel").show(), this.model.hasUserInfo() && this.$("#signupWelcomeHeader").text("Welcome, " + this.model.get("firstName")), this._focusFirstSection()), this.isAdvisedSignup() && (BMT.toggleAdvisedBranding(y.get()), this.$(".advisor-phone").mask("9-999-999-9999"), this.$(".how-heard-selector").val("Other"), this.model.set("advisorToken", this.advisor.get("token")), this.model.set("clientAgreementToken", this.advisor.get("firmClientAgreementToken"))), BMT.analytics.track("PageVisited", b), BMT.vent.trigger("snapEngage:enable"), BMT.vent.trigger("crazyEgg:enable")
            },
            onDestroy: function() {
                g.reset()
            },
            onOK: function(t) {
                this.blockForSave(), this.ui.uncaughtErrors.hide(), this.ui.errorList.empty(), l.every(this.sections, function(e) {
                    return e.blocking ? !1 : e.validate()
                }).done(function() {
                    var t = e.reduce(this.sections, function(t, n) {
                        return n.isValid() ? e.extend(t, n.gatherAttributes()) : t
                    }, {});
                    this.model.set(t), e.isUndefined(this.model.get("skipIdentityCheckFeedback")) ? this.model.set("skipIdentityCheckFeedback", !1) : this.model.set("skipIdentityCheckFeedback", !0), g.signup().then(function(e) {
                        window.dataLayer && window.dataLayer.push({
                            event: "signupComplete"
                        }), BMT.user = e, BMT.vent.trigger("login")
                    }).fail(function(e) {
                        this.unblockForSave();
                        if (e.identityCheck) {
                            this.showIdentityCorrection(e.identityCheck);
                            return
                        }
                        this._showErrors(e), this.jumpToUnfinishedSection()
                    }.bind(this))
                }.bind(this)).fail(function() {
                    this.unblockForSave(), this.jumpToUnfinishedSection()
                }.bind(this))
            },
            showIdentityCorrection: function(t) {
                var n = this._addSection("identityCorrection", f);
                n.options.fieldGroups = t, this.identityCorrectionRegion.show(n), this.$(".big-form").hide(), this.$(".identity-correction-form").show(), e.contains(t, "ssn") && this.$(".identity-correction-form h2.form-header").text("Please check your name and Age Pension number."), this.$("#signupWelcomeHeader").addClass("error-header").text("Whoops, something doesn't look right"), this._scrollToTarget($("body"))
            },
            isAdvisedSignup: function() {
                return !this.advisor.isNew()
            },
            basicContactComplete: function() {
                return this._getSectionByName("basicContact").isValid()
            },
            blockForSave: function() {
                this.block(this.$(".big-form")), this.$("#signup-complete").text("Saving..."), this.$spinner = this.$(".big-form .spinner"), this.$spinnerRange = this.$(".big-form"), this._repositionSpinner(), $(window).scroll(this._repositionSpinner)
            },
            unblockForSave: function() {
                this.$("#signup-complete").text("Submit"), this.unblock(this.$(".big-form")), $(window).off("scroll", this._repositionSpinner)
            },
            jumpToUnfinishedSection: function() {
                var e, t = null;
                this.ui.uncaughtErrors.is(":visible") ? e = this.ui.uncaughtErrors : (e = this.$(".conversation-text").has(".bad:visible").first(), e.length === 0 && (e = this.$("form").not(this.$("form").has(".signup-section-locked")).last(), t = e.find(".section-container").data("section"), this._getSectionByName(t).validate())), this._scrollToTarget(e)
            },
            _scrollToTarget: function(e) {
                $("html, body").animate({
                    scrollTop: e.offset().top - 100
                }, 500, function() {
                    var t = e.is(".conversation-text") ? e : e.find(".conversation-text");
                    t.length === 0 && (t = e), t.find("span.bad:visible").addClass("glow", 200, function() {
                        $(this).removeClass("glow", 100)
                    })
                })
            },
            unlockNext: function(e) {
                var t = this._getNextSection(e.getPosition());
                t && t.trigger("signup:unlockSection")
            },
            hideWelcomeBack: function() {
                this.$("#welcomeBackPanel").hide(), this.$(".input-line").qtip("reposition")
            },
            openLiveChat: function(e) {
                e && e.preventDefault(), SnapEngage.openProactiveChat(!0, !0)
            },
            unblock: function(e) {
                this.blocking && (this.blockedEl.children(".spinner-bg, .svg-circle-spinner").remove(), this.blockedEl.css("position", "auto"), this._delegateDOMEvents(), this.blocking = !1, delete this.blockedEl)
            },
            goToLogin: function(e) {
                e && e.preventDefault(), BMT.goToLogin()
            },
            _focusFirstSection: function() {
                var e = this;
                l.chain(this.sections, function(t) {
                    var n = $.Deferred(),
                        r = e.model.hasUserInfo() ? e.model.get("firstName") + ", start here." : "Start here.",
                        i = t.resume(r);
                    return i.done(n.reject), i.fail(n.resolve), n.promise()
                })
            },
            _addSection: function(e, t, n, r) {
                var i = new t({
                    model: this.model,
                    position: this.sectionCount,
                    name: e,
                    attrs: this.model.attributes,
                    disableFocusConversation: !n,
                    locked: !r,
                    advisor: this.advisor
                });
                return this.sections.push(i), this.sectionsByName[e] = i, this.sectionCount = this.sectionCount + 1, i
            },
            _getNextSection: function(e) {
                var t = e + 1,
                    n = this._findSectionByPosition(t);
                return n
            },
            _findSectionByPosition: function(t) {
                return e.find(this.sections, function(e) {
                    return e.getPosition() === t
                })
            },
            _getSectionByName: function(e) {
                return this.sectionsByName[e]
            },
            _showErrors: function(t) {
                e.each(this.sections, function(e) {
                    e.showErrors(t)
                }), e.isEmpty(t) || (e.each(t, function(e) {
                    this.ui.errorList.append("<li>" + e + "</li>")
                }, this), this.ui.uncaughtErrors.show())
            },
            _repositionSpinner: function() {
                var e = $(window).scrollTop(),
                    t = this.$spinnerRange.position().top + 150,
                    n = this.$spinnerRange.outerHeight() - 300;
                e > t && e < n && this.$spinner.css("top", e + "px")
            }
        }, {
            loadAdvisor: function(e) {
                var t = new $.Deferred;
                if (e) m.fetchByToken(e, {
                    skipErrorAlert: !0,
                    success: function(e) {
                        y.setFirmForAdvisor(e), t.resolve(e)
                    },
                    error: function() {
                        location.href = "/404"
                    }
                });
                else {
                    var n = y.get();
                    n ? location.href = "/404" : t.resolve(new m)
                }
                return t.promise()
            }
        })
    }), define("hbs!views/common/accountGroupSwitcher", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="notification-popover info-tip clearfix">\n    <p>\n        <span class="callout-text">New!</span> Use this menu to switch between your accounts.\n    </p>\n    <p>\n        <button class="close-popover">Ok, got it</button>\n    </p>\n</div>\n'
        });
        return t.registerPartial("views/common/accountGroupSwitcher", n), n
    }), define("hbs!views/common/jointAccountAdded", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="notification-popover info-tip clearfix">\n    <p>\n        <span class="callout-text">Congrats!</span> Your new joint account has been created. Use this menu to switch between your accounts.\n    </p>\n    <p>\n        <button class="close-popover">Ok, got it</button>\n    </p>\n</div>\n'
        });
        return t.registerPartial("views/common/jointAccountAdded", n), n
    }), define("hbs!views/common/trustAdded", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="notification-popover info-tip clearfix">\n    <p>\n        <span class="callout-text">Congrats!</span> Your new trust account has been created. Use this menu to switch between your accounts.\n    </p>\n    <p>\n        <button class="close-popover">Ok, got it</button>\n    </p>\n</div>\n'
        });
        return t.registerPartial("views/common/trustAdded", n), n
    }), define("views/common/popoverView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/accountGroupSwitcher", "hbs!views/common/jointAccountAdded", "hbs!views/common/trustAdded"], function(e, t, n, r, i, s) {
        var o = {
            accountGroupSwitcher: r,
            jointAccountAdded: i,
            trustAdded: s
        };
        return n.View.extend({
            events: {
                "click button.close-popover": "hide"
            },
            onInitialize: function() {
                this.options.template = o[this.options.template]
            },
            hide: function() {
                this.trigger("closePopover")
            }
        })
    }), define("services/popoverService", ["underscore", "backbone", "views/common/popoverView"], function(e, t, n) {
        var r = {},
            i = function(e) {
                var t = new n({
                    template: e
                });
                this.listenTo(t, "closePopover", function() {
                    s()
                }), BMT.popoverRegion.show(t), u(e)
            },
            s = function() {
                BMT.popoverRegion.empty()
            },
            o = function(e) {
                return r[e] === !0
            },
            u = function(e) {
                r[e] = !0
            };
        return e.extend({}, t.Events, {
            hasShown: o,
            show: i,
            hide: s
        })
    }), define("models/v1/trustSignup", ["underscore", "backbone", "models/v1/baseModels", "components/common/scripts/services/dateService", "backboneValidation"], function(e, t, n, r) {
        var i = {
                endpoint: "/trust-signup"
            },
            s = {
                domestic: [{
                    required: !0,
                    msg: "You must specify whether this is an Australian domiciled trust"
                }, {
                    acceptance: !0,
                    msg: 'We only accept Australian domiciled trusts. If you have questions please email us at <a href="mailto:trusts@betasmartz.com">trusts@betasmartz.com</a> or call us at 1800-888-8888.'
                }],
                legalName: {
                    required: !0
                },
                nickname: {
                    required: !0
                },
                establishedDate: function(e, t, n) {
                    if (!e) return "Date of establishment is required";
                    if (r.isValidServerFormattedDate(e)) return "That doesn't look like a valid date"
                },
                stateOfOrganization: {
                    required: !0
                },
                tinOrSsn: [{
                    required: !0,
                    msg: "TFN is required"
                }, {
                    length: 9,
                    pattern: "digits",
                    msg: "TFN must be valid and in a valid format"
                }],
                address: {
                    required: !0,
                    pattern: "ascii",
                    msg: "Address is required"
                },
                city: {
                    required: !0,
                    pattern: "ascii",
                    msg: "Your city and state are required"
                },
                state: {
                    required: !0,
                    length: 2,
                    msg: "Your city and state are required"
                },
                zip: {
                    required: !0,
                    pattern: "digits",
                    length: 4,
                    msg: "Post Code is required and must be valid with 4 digits"
                },
                userAgreement: {
                    required: !0,
                    acceptance: !0,
                    msg: "You must accept the terms and conditions to continue"
                }
            },
            o = {},
            u = {},
            a = {};
        i = e.extend(i, {
            validation: s,
            labels: o,
            conversation: u
        }, t.Validation.mixin);
        var f = n.Model.extend(i, a);
        return f
    }), define("views/trust/trustSignupView", ["jquery", "underscore", "backbone", "common/betterment.views", "components/account/scripts/services/goalTypeService", "components/common/scripts/constants/addressConstants", "components/common/scripts/services/dateService", "services/popoverService", "models/accountGroup", "models/v1/trustSignup", "components/common/scripts/analytics/analytics", "views/common/termsOfServiceView"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        return r.View.extend({
            id: "trust-signup",
            template: "trust/trustSignup",
            regions: {
                termsOfServiceRegion: ".terms-of-service"
            },
            events: {
                "click button.ok": "onSubmit",
                "submit form": "onSubmit",
                "change select[name=typeOfTin]": "changeTypeOfTin"
            },
            templateHelpers: {
                stateSelect: function(e) {
                    var n = [{
                            label: "-",
                            value: ""
                        }].concat(s.unitedStates()),
                        r = t.extend({
                            "class": "state-selector"
                        }, e || {});
                    return this.build_select_input(n, r)
                }
            },
            toolTips: {
                ".document-info-tip": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            onInitialize: function() {
                this.model = new f, this.setupConversation()
            },
            onShow: function() {
                this.termsOfServiceRegion.show(new c({
                    showTrustAgreement: !0,
                    expandHeight: 80
                }))
            },
            onRender: function() {
                this.$("input[name=tinOrSsn]").mask("999-99-9999")
            },
            onSubmit: function() {
                var e = this,
                    t = e.conversation.serialize();
                e.conversation.validate().done(function() {
                    e._blockForSave(), e.model.save(t).done(function() {
                        BMT.user.fetch().done(function() {
                            var t = BMT.user.get("accountGroups").where({
                                id: e.model.get("accountGroupId")
                            })[0];
                            BMT.setAccountGroup(t), l.track("TrustAdded", {
                                Module: "TrustSignup"
                            }), u.show("trustAdded")
                        })
                    }).fail(function(t) {
                        e.unblock(), e.showServerSideErrors(t)
                    })
                }).fail(function() {
                    e._unblockForSave()
                })
            },
            changeTypeOfTin: function(e) {
                return null;
                var t = e.currentTarget.value,
                    n = this.$("input[name=tinOrSsn]").val().replace(/[^\d]/g, "");
                t === "SSN" ? (this.$("input[name=tinOrSsn]").mask("999-99-9999"), this.$("input[name=tinOrSsn]").attr("placeholder", "123-45-6789"), this.$("input[name=tinOrSsn]").val(n)) : (this.$("input[name=tinOrSsn]").mask("99-9999999"), this.$("input[name=tinOrSsn]").attr("placeholder", "12-3456789"), this.$("input[name=tinOrSsn]").val(n))
            },
            setupConversation: function() {
                var e = this;
                this.conversation = {
                    view: e,
                    exchangeSelector: ".input-line",
                    messages: e.model.conversation,
                    transformers: {
                        establishedDate: {
                            send: function(e) {
                                var t = parseInt(e["establishedDate[year]"], 10),
                                    n = parseInt(e["establishedDate[month]"], 10),
                                    r = parseInt(e["establishedDate[day]"], 10),
                                    i = o.buildDateFromParts(t, n, r);
                                return {
                                    establishedDate: i.isInvalid() ? i.toString() : i.serverFormat()
                                }
                            }
                        },
                        tinOrSsn: {
                            send: function(e) {
                                return e ? e.replace(/[^\d]/g, "") : e
                            }
                        }
                    }
                }
            },
            showServerSideErrors: function(e) {
                var n = this,
                    r;
                BMT.logError("Trust Signup failed." + e);
                try {
                    r = JSON.parse(e.responseText), r = r.errorMessages
                } catch (i) {
                    r = {}
                }
                if (t.isEmpty(r)) return;
                t.chain(r).map(function(e, r) {
                    t.each(e, function(e) {
                        r = n.errorMessageMapping[r] || r, n.conversation.forceShowError(r, e)
                    })
                })
            },
            errorMessageMapping: {
                socialSecurityNumber: "tinOrSsn",
                taxpayerIdentificationNumber: "tinOrSsn"
            },
            _blockForSave: function() {
                this.block(this.$(".big-form")), this.$("#signup-complete").text("Saving..."), this.$spinner = this.$(".big-form .spinner"), this.$spinnerRange = this.$(".big-form"), this._repositionSpinner(), e(window).scroll(this._repositionSpinner)
            },
            _unblockForSave: function() {
                this.$("#signup-complete").text("Submit"), this.unblock(this.$(".big-form")), e(window).off("scroll", this._repositionSpinner)
            },
            _repositionSpinner: function() {
                var t = e(window).scrollTop(),
                    n = this.$spinnerRange.position().top + 150,
                    r = this.$spinnerRange.outerHeight() - 300;
                t > n && t < r && this.$spinner.css("top", t + "px")
            }
        })
    }), define("hbs!views/rollover/rolloverRequest", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), "<h1 class=\"tab-header\">Rollover Request</h1>\n<div class='main-region'></div>"
        });
        return t.registerPartial("views/rollover/rolloverRequest", n), n
    }), define("models/v1/rolloverRequest", ["models/v1/baseModels"], function(e) {
        var t = {
            endpoint: function() {
                return this.get("account").getEndpoint() + "/rollover-requests"
            },
            defaults: {
                fullRollover: !1
            },
            relatedModels: ["account"]
        };
        return t.validation = {
            sourceProvider: {
                required: !0,
                msg: "You must select a valid IRA Provider"
            },
            sourceAccountNumber: {
                required: !0,
                maxLength: 32,
                msg: "Please enter a valid Account number"
            },
            sourceType: {
                required: !0,
                msg: "Please select a valid IRA type"
            },
            account: {
                required: !0
            },
            amount: {
                required: !0,
                pattern: "number",
                msg: "Please enter a number for the amount"
            }
        }, e.Model.extend(t)
    }), define("hbs!views/rollover/rolloverForm", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="panel card top explanation-copy">\n    Complete this form to prepare your direct transfer request\n</div>\n\n<form class="panel card big-form" id="rolloverForm">\n    <div class="big-form-inner">\n        <article>\n            <section>\n                <div class="input-line" data-field="sourceAccountNumber">\n                    <label>', (u = n.sourceProviderName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.sourceProviderName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' IRA Account Number</label>\n                    <span class="input-area">\n                        <input class="white" type="text" name="sourceAccountNumber" placeholder="Ex. 109238123" autofocus="autofocus"/>\n                        <div class="conversation-text"></div>\n                    </span>\n                </div>\n\n                <div class="input-line" data-field="fullRollover">\n\n                    <label class="transfer-type-label">Select type of transfer</label>\n\n                    <div class="no-label transfer-type">\n                        <span class="input-area radio-option">\n                            <input class="white full-rollover" type="radio" name="fullRollover" value="true" checked />\n                            Transfer Full Balance\n                        </span>\n                        <span class="input-area radio-option">\n                            <input class="white partial-rollover" type="radio" name="fullRollover" value="false" />\n                            Transfer Partial Balance\n                        </span>\n                    </div>\n\n                    <label class="amount-label"></label>\n\n                    <span class="input-area">\n                        <span class="almighty-dollar">$</span>\n                        <input class="money" money-input="int" type="text" name="amount" placeholder="Dollar amount" />\n                        <div class="conversation-text"></div>\n                    </span>\n                </div>\n\n            </section>\n        </article>\n\n        <hr />\n\n        <div class="legal-text">\n            By proceeding with form submission, you:\n            <ul>\n                <li>\n                    Direct BetaSmartz and the delivering firm to act on all instructions given on this form, including transferring assets to Betterment.\n                </li>\n                <li>\n                    Accept that any assets not readily transferable might not be transferred within the time frames set by FINRA or other applicable authorities.\n                </li>\n                <li>\n                    Accept that BetaSmartz is not responsible for changes in the value of assets that may occur during the transfer process.\n                </li>\n                <li>\n                    Affirm that you are aware of any tax or financial implications that may arise in connection with this transfer or with the sale or liquidation of any assets prior to transfer, including penalties, fees, financial losses, or losses of product features or benefits.\n                </li>\n            </ul>\n        </div>\n\n        <div class="wizard-buttons" style="clear:both;">\n            <button class="complete-form" disabled="disabled">', (u = n.proceedButtonText) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.proceedButtonText, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</button>\n        </div>\n    </div>\n</form>\n", s
        });
        return t.registerPartial("views/rollover/rolloverForm", n), n
    }), define("views/rollover/rolloverFormView", ["common/betterment.views", "components/common/scripts/util/handlebarsHelpers", "hbs!views/rollover/rolloverForm"], function(e, t, n) {
        return e.View.extend({
            className: "rollover-form",
            template: n,
            events: {
                "click .complete-form": "onNext",
                "click .cancel": "onCancel",
                "click .full-rollover": "showFullAmount",
                "click .partial-rollover": "showPartialAmount",
                "change input[name=sourceAccountNumber]": "sourceAccountNumberChange",
                "click input[name=fullRollover]": "fullRolloverClick",
                "change input[name=amount]": "amountChange",
                "keyup input[name=amount], input[name=sourceAccountNumber]": "updateButtonState"
            },
            templateHelpers: {
                targetIra: function() {
                    var e = this.self.model.get("account");
                    return e ? e.get("name") : ""
                },
                sourceType: function() {
                    return this.self.options.rollover.get("sourceTypeEnum")
                },
                sourceProviderName: function() {
                    var e = this.self.model.get("sourceProvider");
                    return e && e !== "OTHER" && e !== "UNKNOWN" ? this.self.options.sourceProviderOptions.displayName : this.self.model.get("sourceProviderOther")
                },
                sourceTypeValue: function() {
                    return this.sourceType().value
                },
                sourceTypeLabel: function() {
                    return this.sourceType().label
                },
                proceedButtonText: function() {
                    return this.self.isSignable() ? "Proceed to signature page" : "Create my transfer request"
                }
            },
            ui: {
                amountLabel: ".amount-label",
                completeButton: "button.complete-form"
            },
            onInitialize: function() {
                this.setupConversation()
            },
            onRender: function() {
                this.showFullAmount()
            },
            onNext: function(e) {
                e && e.preventDefault();
                var t = this.conversation.serialize();
                t.amount = t.amount.replace(/,/g, ""), this.conversation.validate().done(function() {
                    this.model.set(t), this.trigger("completeForm")
                }.bind(this)), BMT.analytics.track("ElementClicked", {
                    Location: "RolloverNarrative/DirectTransferForm",
                    Name: this.isSignable() ? "ProceedToSignature" : "CreateTransferRequest",
                    Type: "Button"
                })
            },
            onCancel: function(e) {
                e && e.preventDefault(), BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate("summary", !0)
            },
            isSignable: function() {
                return this.options.sourceProviderOptions.signable
            },
            updateButtonState: function() {
                this.conversation.validate({
                    silent: !0
                }).done(function() {
                    this.ui.completeButton.prop("disabled", !1)
                }.bind(this)).fail(function() {
                    this.ui.completeButton.prop("disabled", !0)
                }.bind(this))
            },
            sourceAccountNumberChange: function() {
                BMT.analytics.track("InputSubmitted", {
                    Name: "PreviousAccountNumber",
                    Type: "Field",
                    Location: "RolloverNarrative/DirectTransferForm"
                })
            },
            fullRolloverClick: function() {
                BMT.analytics.track("InputSubmitted", {
                    Name: "PartialRollover",
                    Type: "Field",
                    Location: "RolloverNarrative/DirectTransferForm"
                })
            },
            amountChange: function() {
                BMT.analytics.track("InputSubmitted", {
                    Name: "RolloverAmount",
                    Type: "Field",
                    Location: "RolloverNarrative/DirectTransferForm"
                })
            },
            setupConversation: function() {
                this.conversation = {
                    view: this,
                    exchangeSelector: ".input-line",
                    messages: {}
                }
            },
            showFullAmount: function() {
                this.ui.amountLabel.html("Enter an estimate of your SMSF balance:")
            },
            showPartialAmount: function() {
                this.ui.amountLabel.html("Enter exact amount to transfer:")
            }
        })
    }), define("hbs!views/rollover/rolloverSignature", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '    <div class="signature-preview">\n        <h2>TRUSTEE-TO-TRUSTEE</h2>\n        <h1>IRA Transfer Request</h1>\n        <hr>\n        <table>\n            <tbody>\n                <tr>\n                    <td><h3>Customer Name:</h3> ', (u = n.fullName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.fullName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</td>\n                    <td><h3>Date of Birth:</h3> ", (u = n.dateOfBirth) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.dateOfBirth, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</td>\n                </tr>\n                <tr>\n                    <td><h3>Current IRA Provider:</h3> ", (u = n.sourceProviderName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.sourceProviderName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</td>\n                    <td><h3>Current IRA Account #:</h3> ", (u = n.accountNumber) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountNumber, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</td>\n                </tr>\n                <tr>\n                    <td><h3>Current IRA Type:</h3> ", (u = n.accountType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountType, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + " </td>\n                    <td><h3>Amount to be transferred:</h3> ", (u = n.amount) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.amount, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' </td>\n                </tr>\n            </tbody>\n        </table>\n        <hr>\n        <h3>Authorization &amp; Signature</h3>\n        <p>Please accept this letter as authorization to liquidate and transfer the assets in the account(s) specified above to Betterment, C/O Sunwest Trust, as a custodian for my IRA.</p>\n        <h3 style="display: inline-block">Amount to be transferred:</h3> ', (u = n.amount) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.amount, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n\n        <div class="explanation-copy">\n        Sign the transfer request below using your mouse\n        </div>\n\n        <div class="signature-pad unsigned">\n            <div class="wizard-buttons">\n                <button class="cancel clear-signature">Clear</button>\n            </div>\n        </div>\n\n        <div class="legal-text">\n            <p>\n                I understand that attaching my e-signature is the legal equivalent of submitting a document signed by hand, and that clicking the “Sign &amp; Submit” button manifests my desire and intent to transfer my IRA to Betterment.\n            </p>\n            <p>\n                BetaSmartz uses a third-party service to send faxes on your behalf. Per its policies, this third-party service keeps your faxed information confidential; you may review its privacy policies <a href="http://www.interfax.net/en/privacy" target="_blank">here</a>. By submitting this form you acknowledge and accept the use of this third-party service.\n            </p>\n        </div>\n\n        <div class="wizard-buttons" style="clear:both;">\n            <button class="ok submit-signature">Sign &amp; Submit To ', (u = n.sourceProviderName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.sourceProviderName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</button>\n            <button class="cancel cancel-signature">Cancel</button>\n        </div>\n    </div>\n', s
        });
        return t.registerPartial("views/rollover/rolloverSignature", n), n
    }), define("views/rollover/rolloverSignatureView", ["underscore", "common/betterment.views", "hbs!views/rollover/rolloverSignature", "components/common/scripts/models/appData", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i) {
        return t.View.extend({
            className: "rollover-preview",
            template: n,
            templateHelpers: {
                dateOfBirth: function() {
                    return this.self.formatter.formatDate("MM d, yy", BMT.user.dateOfBirth())
                },
                sourceProviderName: function() {
                    var e = this.self.model.get("sourceProvider");
                    return e && e !== "OTHER" && e !== "UNKNOWN" ? r.getInstance().get("rolloverProviders")[e].displayName : this.self.model.get("sourceProviderOther")
                },
                accountNumber: function() {
                    return this.self.model.get("sourceAccountNumber")
                },
                accountType: function() {
                    var e = {
                        TraditionalIRA: "SMSF",
                        RothIRA: "SMSF",
                        SepIRA: "SEP IRA",
                        SimpleIRA: "SIMPLE IRA",
                        "401K": "401(k)",
                        PensionPlan: "Pension Plan",
                        ProfitSharing: "Profit Sharing",
                        "403B": "403(b)",
                        "401A": "401(a)",
                        "457B": "457(b)",
                        ThriftSavingsPlan: "Thrift Savings Plan"
                    };
                    return e[this.self.model.get("sourceType")]
                },
                amount: function() {
                    return this.self.model.get("fullRollover") === "true" ? "Full Amount" : this.money(this.self.model.num("amount"))
                },
                fullName: function() {
                    return BMT.user.fullName()
                }
            },
            events: {
                "click .clear-signature": "clearSignature",
                "click .submit-signature": "submitSignature",
                "click .cancel-signature": "cancelSignature",
                "mousedown .signature-pad canvas": "setSignatureBackground"
            },
            onShow: function() {
                this.$signaturePad = this.$el.find(".signature-pad").jSignature({
                    "decor-color": "transparent"
                }).append('<hr class="signature-line">')
            },
            setSignatureBackground: function() {
                this.$signaturePad.toggleClass("unsigned", !this.isValidSignature())
            },
            clearSignature: function() {
                this.$signaturePad.jSignature("clear"), this.setSignatureBackground()
            },
            cancelSignature: function(e) {
                e && e.preventDefault(), BMT.scrollToTop({
                    duration: 0
                }), BMT.router.navigate("summary", !0)
            },
            isValidSignature: function() {
                return this.$signaturePad.jSignature("getData", "native").length > 0
            },
            submitSignature: function() {
                this.isValidSignature() ? this.confirmTransfer() : BMT.alert({
                    icon: "warning",
                    title: "Signature Required",
                    body: "<p>Please sign the form in order to process your SMSF transfer.</p>"
                }), BMT.analytics.track("ElementClicked", {
                    Name: "SignAndSubmit",
                    Type: "Button",
                    Location: "RolloverNarrative/DirectTransferForm"
                })
            },
            confirmTransfer: function() {
                BMT.alert({
                    title: "Please Confirm Transfer",
                    body: "Are you sure you want to initiate a direct transfer out of your " + this.model.get("sourceProvider") + " IRA? This will immediately send the request to your provider.",
                    bodyAttrs: {
                        style: "width: 100%;"
                    },
                    buttons: [{
                        id: "yes",
                        title: "Transfer"
                    }, {
                        id: "no",
                        title: "Cancel",
                        attributes: {
                            "class": "cancel"
                        }
                    }],
                    handler: function(e) {
                        e === "yes" && this.saveRequestAndNavigate()
                    }.bind(this)
                })
            },
            saveRequestAndNavigate: function() {
                this.block(this.$el), this.model.set("signatureImage", this.$signaturePad.jSignature("getData")), this.model.save().done(function() {
                    this.unblock(), BMT.selectedAccount = this.model.get("account");
                    var e = this.options.nextFlow ? this.options.nextFlow : "summary";
                    BMT.analytics.track("InfoRequested", {
                        Location: "RolloverNarrative",
                        Subject: "Rollover",
                        RolloverProcess: "Automatic",
                        SourceType: this.model.get("sourceType"),
                        PreviousProvider: this.model.get("sourceProvider"),
                        ApproximateValue: this.model.num("amount")
                    }), BMT.navigateWithFlash(e, "Direct transfer initiated. Check your email for more details."), BMT.scrollToTop({
                        duration: 0
                    })
                }.bind(this)).fail(function() {
                    this.unblock()
                }.bind(this))
            }
        })
    }), define("hbs!views/rollover/rolloverPreview", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return "\n                        <strong>Submit your transfer request to your provider</strong>\n                    "
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += "\n                        <strong>Submit your transfer request to ", (s = n.sourceProviderName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.sourceProviderName, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</strong>\n                    ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="rollover-preview">\n    <div class="panel card top explanation-copy">\n        ', (u = n.sourceProviderName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.sourceProviderName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' requires additional paperwork\n        <span class="go-to-account">+</span>\n    </div>\n\n    <div class="panel card instructions-wrapper">\n        <p>Detailed instructions to initiate the transfer are included with your form.\n            You can also find a copy on the <a href="#activity">Activity</a> tab.</p>\n\n        <div class="form-preview"></div>\n        <div class="instructions">\n            <ul>\n                <li>\n                    <strong>Print your transfer request</strong>\n                </li>\n                <li>\n                    <strong>Follow the detailed instructions included in the transfer request paperwork</strong>\n                </li>\n                <li>\n                    ', o = n["if"].call(t, t && t.sourceProviderIsUnknown, {
                hash: {},
                inverse: l.program(3, h, i),
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += '\n                </li>\n            </ul>\n\n            <div class="buttons">\n                <button class="print-request">Print my transfer request</button>\n                <a class="download-request"><span class="download-blue-icon"></span> Download as a PDF</a>\n            </div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/rollover/rolloverPreview", n), n
    }), define("views/rollover/rolloverPreviewView", ["jquery", "common/betterment.views", "hbs!views/rollover/rolloverPreview", "models/v1/rolloverDocument"], function(e, t, n, r) {
        var i = {
            template: n,
            templateHelpers: {
                sourceProviderIsUnknown: function() {
                    return this.self.model.get("sourceProvider") === "UNKNOWN"
                },
                sourceProviderName: function() {
                    var e = this.self.model.get("sourceProvider");
                    return e && e !== "OTHER" && e !== "UNKNOWN" ? this.self.options.sourceProviderOptions.displayName : this.self.model.get("sourceProviderOther") || "Your provider"
                }
            },
            events: {
                "click .go-to-account": "goToAccount",
                "click .print-request": "printRequest",
                "click .download-request": "downloadRequest"
            },
            onInitialize: function() {
                BMT.analytics.track("InfoRequested", {
                    Location: "RolloverNarrative",
                    Subject: "Rollover",
                    RolloverProcess: "UserPrint",
                    SourceType: this.model.get("sourceType"),
                    PreviousProvider: this.model.get("sourceProvider"),
                    ApproximateValue: this.model.num("amount")
                })
            },
            beforeRender: function() {
                var t = new e.Deferred;
                return this.model.save().always(function() {
                    BMT.refreshAccounts(t.resolve, t.resolve)
                }.bind(this)), t.promise()
            },
            goToAccount: function() {
                BMT.analytics.track("ElementClicked", {
                    Location: "RolloverNarrative/RequestPreview",
                    Name: "GoToAccount",
                    Type: "Button"
                }), BMT.selectedAccount = this.model.get("account"), BMT.router.navigate("advice", !0)
            },
            printRequest: function() {
                BMT.analytics.track("ElementClicked", {
                    Location: "RolloverNarrative/RequestPreview",
                    Name: "PrintRequest",
                    Type: "Button"
                });
                var e = window.open(this._getDocument().url());
                e.print()
            },
            downloadRequest: function() {
                BMT.analytics.track("ElementClicked", {
                    Location: "RolloverNarrative/RequestPreview",
                    Name: "DownloadRequest",
                    Type: "Button"
                }), window.open(this._getDocument().getDownloadUrl())
            },
            _getDocument: function() {
                return this._document || (this._document = new r({
                    id: this.model.get("id")
                })), this._document
            }
        };
        return t.View.extend(i)
    }), define("views/rollover/rolloverRequestView", ["underscore", "common/betterment.views", "components/common/scripts/util/handlebarsHelpers", "hbs!views/rollover/rolloverRequest", "models/v1/rolloverRequest", "views/rollover/rolloverFormView", "views/rollover/rolloverSignatureView", "views/rollover/rolloverPreviewView", "components/common/scripts/models/appData"], function(e, t, n, r, i, s, o, u, a) {
        return t.View.extend({
            className: "rollover-request",
            template: r,
            regions: {
                mainRegion: ".main-region"
            },
            onShow: function() {
                if (e.isUndefined(this.options.rollover)) {
                    BMT.router.navigate("summary", {
                        trigger: !0
                    });
                    return
                }
                this.model = new i({
                    account: this.options.rollover.get("account"),
                    sourceProvider: this.options.rollover.get("sourceProvider"),
                    sourceType: this.options.rollover.get("sourceType"),
                    sourceProviderOther: this.options.rollover.get("sourceProviderOther")
                }), this.formView = new s({
                    model: this.model,
                    rollover: this.options.rollover,
                    sourceProviderOptions: this.getProviderOptions()
                }), this.listenTo(this.formView, "completeForm", this.goToFinalStep), this.mainRegion.show(this.formView)
            },
            goToFinalStep: function() {
                var e;
                this.getProviderOptions().signable ? e = o : e = u;
                var t = new e({
                        model: this.model,
                        nextFlow: this.options.nextFlow,
                        sourceProviderOptions: this.getProviderOptions()
                    }),
                    n = function() {
                        this.mainRegion.show(t)
                    }.bind(this);
                t.beforeRender ? (this.preloadStart(), t.beforeRender().then(function() {
                    n(), this.preloadComplete()
                }.bind(this))) : n()
            },
            getProviderOptions: function() {
                var e = a.getInstance().get("rolloverProviders");
                return e[this.options.rollover.get("sourceProvider")] || e[this.options.rollover.get("sourceProviderOther")]
            }
        })
    }), define("hbs!views/jointAccountSignup/acceptInvite", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="panel card logged-out"></div>\n'
        });
        return t.registerPartial("views/jointAccountSignup/acceptInvite", n), n
    }), define("models/v1/jointAccountInvite", ["models/v1/baseModels"], function(e) {
        var t = {
            validation: {
                invitedEmail: {
                    required: !0,
                    pattern: "email"
                },
                acceptedAgreement: {
                    required: !0,
                    acceptance: !0
                }
            },
            endpoint: function() {
                return "/joint-account-invites"
            }
        };
        return e.Model.extend(t)
    }), define("hbs!views/jointAccountSignup/acceptInviteLogin", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="acceptance-form">\n    <h1>', (u = n.inviterFirstName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.inviterFirstName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + " has invited you to open a joint account</h1>\n    <p>Log in to verify your identity and to accept ", (u = n.inviterFirstName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.inviterFirstName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\'s invitation.  Please note, we will turn off Tax Loss Harvesting if you have enabled it in your personal account.</p>\n    <form class="login-form">\n        <div class="input-width-adjust">\n            <input class="full-width" type="email" name="userName" placeholder="Email" />\n            <input class="full-width" type="password" name="password" placeholder="Password" />\n            <div class="terms-of-service"></div>\n        </div>\n        <button class="full-width">Log in</button>\n        <div class="full-width forgot-password">\n            <a href="#forgotPassword" target="_blank">Forgot your password?</a>\n        </div>\n        <input type="hidden" name="inviteCode" value="', (u = n.inviteCode) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.inviteCode, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n    </form>\n</div>\n', s
        });
        return t.registerPartial("views/jointAccountSignup/acceptInviteLogin", n), n
    }), define("views/jointAccountSignup/acceptInviteLoginView", ["backbone", "common/betterment.views", "hbs!views/jointAccountSignup/acceptInviteLogin", "components/common/scripts/services/domainService", "views/common/termsOfServiceView"], function(e, t, n, r, i) {
        return t.View.extend({
            events: {
                "click button": "next"
            },
            regions: {
                termsOfServiceRegion: ".terms-of-service"
            },
            template: n,
            templateHelpers: {
                inviterFirstName: function() {
                    return this.self.options.invite.get("createdByFirstName")
                },
                customerAgreementUrl: function() {
                    return r.getCustomerAgreementUrl()
                },
                inviteCode: function() {
                    return this.self.options.invite.id
                }
            },
            ui: {
                acceptCheckbox: "input[type=checkbox]"
            },
            onShow: function() {
                this.$("input[name=userName]").placeholder(), this.$("input[name=password]").placeholder(), this.termsOfServiceRegion.show(new i({
                    showJointAccountAgreement: !0
                })), this.$acceptsUserAgreement = this.$("input[name=userAgreement]"), this.applyValidation()
            },
            submitAcceptance: function(e) {
                if (!e.userAgreement) return BMT.alert({
                    title: "Customer Agreement",
                    body: "Please accept the customer agreement to continue and confirm the creation of your joint account.",
                    icon: "warning"
                });
                this.block(), this.options.invite.save({
                    acceptedAgreement: this.$acceptsUserAgreement.is(":checked"),
                    inviteCode: this.options.invite.id
                }).always(this.unblock).then(function() {
                    this.trigger("next")
                }.bind(this))
            },
            next: function(t) {
                t.preventDefault();
                var n = e.Syphon.serialize(this);
                this.options.invite.get("requireLogin") ? this.model.validate(n) || (BMT.session = this.model, this.block(), this.model.save(n, {
                    silent: !0
                }).always(this.unblock).then(function() {
                    this.submitAcceptance(n)
                }.bind(this))) : this.submitAcceptance(n)
            }
        })
    }), define("hbs!views/jointAccountSignup/acceptInviteConfirm", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="confirmation-form">\n    <h1>You have successfully opened a joint account</h1>\n    <form class="login-form">\n        <button class="full-width full-login">Continue to your account</button>\n    </form>\n</div>\n'
        });
        return t.registerPartial("views/jointAccountSignup/acceptInviteConfirm", n), n
    }), define("views/jointAccountSignup/acceptInviteConfirmView", ["common/betterment.views", "hbs!views/jointAccountSignup/acceptInviteConfirm", "services/popoverService"], function(e, t, n) {
        return e.View.extend({
            events: {
                "click button": "next"
            },
            template: t,
            next: function() {
                this.block(), BMT.user.fetch({
                    success: function() {
                        BMT.vent.trigger("login"), n.show("jointAccountAdded")
                    }
                })
            }
        })
    }), define("views/jointAccountSignup/acceptInviteController", ["common/betterment.views", "hbs!views/jointAccountSignup/acceptInvite", "models/v1/jointAccountInvite", "views/jointAccountSignup/acceptInviteLoginView", "views/jointAccountSignup/acceptInviteConfirmView", "models/session"], function(e, t, n, r, i, s) {
        return e.View.extend({
            className: "joint-account-acceptance",
            template: t,
            options: {
                setResponsiveLayout: !0
            },
            regions: {
                contentRegion: ".card"
            },
            onInitialize: function() {
                this.model = new n({
                    id: this.options.inviteCode
                })
            },
            onRender: function() {
                this.model.fetch({
                    skipErrorAlert: !0
                }).done(function() {
                    this.showLoginView()
                }.bind(this)).fail(function() {
                    BMT.showLoading(), BMT.goToLogin()
                }.bind(this))
            },
            showLoginView: function() {
                BMT.subnav.currentView.emptyContent(), BMT.emptyBanners();
                var e = new r({
                    model: new s,
                    invite: this.model
                });
                this.listenTo(e, "next", this.goToConfirmation), this.contentRegion.show(e)
            },
            goToConfirmation: function() {
                this.contentRegion.show(new i)
            }
        })
    }), define("hbs!views/retirementPlanning/splash", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header-region">\n</div>\n\n<div class="upper">\n    <h1>See if you are invested correctly for retirement</h1>\n    <p>In 5 minutes, RetireSmart&#8482; will advise you on these questions</p>\n</div>\n<div class="middle">\n    <div class="left bubble-region">\n\n    </div>\n    <div class="right">\n\n        <div class="question">\n            <div>\n                <h3>Am I saving enough?</h3>\n                <p>You know that savings are critical. We\'ll help you figure out how much you need to save to retire on your terms.</p>\n            </div>\n        </div>\n\n        <div class="question">\n            <div>\n                <h3>When can I retire?</h3>\n                <p>Retiring early is a dream of many.  You\'ll see how different retirement age choices affect how much you need to save.</p>\n            </div>\n        </div>\n\n        <div class="question">\n            <div>\n                <h3>Am I invested correctly?</h3>\n                <p>We\'ll help you decide the best accounts or IRAs to use for your situation, so you can maximize your savings after taxes.</p>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="lower">\n    <button class="next">Customize your plan</button>\n</div>\n'
        });
        return t.registerPartial("views/retirementPlanning/splash", n), n
    }), define("hbs!views/retirementPlanning/sharedHeader", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="goal-selector-region"></div>\n'
        });
        return t.registerPartial("views/retirementPlanning/sharedHeader", n), n
    }), define("views/retirementPlanning/sharedHeaderView", ["common/betterment.views", "hbs!views/retirementPlanning/sharedHeader", "views/common/dropdown/planGoalSelectorView"], function(e, t, n) {
        return e.View.extend({
            className: "retirement-plan-header",
            template: t,
            regions: {
                goalSelectorRegion: ".goal-selector-region"
            },
            onRender: function() {
                var e = BMT.user.get("financialPlans").selected(),
                    t = e.is("complete") ? e.id : "setup",
                    r = n.create({
                        selectedPlan: "plan-" + t
                    });
                this.listenTo(r, "accountChanged", function() {
                    BMT.router.navigate("advice", !0)
                }), this.goalSelectorRegion.show(r)
            }
        })
    }), define("hbs!views/retirementPlanning/splashBubble", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                <div class="savings-label">You may be saving enough</div>\n                <div class="savings-amount">\n                    <span class="dollars">', i = (s = n.totalAnnualContribution || e && e.totalAnnualContribution, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "totalAnnualContribution", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, 0, o) : f.call(e, "money", i, 0, o))) + '/year</span>\n                </div>\n                <div class="savings-label">annual contributions</div>\n            ', r
            }

            function d(e, t) {
                var r = "",
                    i, s, o;
                return r += '\n                <div class="savings-label">You may need to save</div>\n                <div class="savings-amount">\n                    <span class="dollars">', i = (s = n.annualSavings || e && e.annualSavings, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "annualSavings", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, 0, o) : f.call(e, "money", i, 0, o))) + '</span><span class="year">/year</span>\n                </div>\n            ', r
            }

            function v(e, t) {
                var r = "",
                    i, s, o;
                return r += "\n                and annual contributions of ", i = (s = n.totalAnnualContribution || e && e.totalAnnualContribution, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "totalAnnualContribution", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, 0, o) : f.call(e, "money", i, 0, o))) + ", your income needs will be met. Proceed to customize your retirement age and plan.\n            ", r
            }

            function m(e, t) {
                var r = "",
                    i, s, o;
                return r += "\n                you'll need to save ", i = (s = n.annualSavings || e && e.annualSavings, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "annualSavings", o)), r += l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, 0, o) : f.call(e, "money", i, 0, o))) + " per year across all your retirement accounts to get there. Customize your plan to fine-tune this advice.\n            ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = this,
                h = "function";
            s += '<div class="circle">\n    <div class="top">\n        <div class="content">\n            ', o = n["if"].call(t, t && t.alreadyOnTrack, {
                hash: {},
                inverse: c.program(3, d, i),
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </div>\n    </div>\n    <div class="bottom how-calculated">\n        <div class="calculated-label">\n            This number is based on what we currently know about you.\n        </div>\n        <div class=\'down-arrow\'></div>\n        <div class="copy">\n            Based on your income of ', o = (u = n.annualIncome || t && t.annualIncome, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "annualIncome", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + " and estimated annual Age Pension income of ", o = (u = n.annualSocialSecurityIncome || t && t.annualSocialSecurityIncome, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "annualSocialSecurityIncome", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + ", we estimate you'll need ", o = (u = n.totalSavings || t && t.totalSavings, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "totalSavings", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + " to retire at age ", (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === h ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + " with a similar lifestyle. Given your current Retirement balance of ", o = (u = n.currentBalance || t && t.currentBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "currentBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + ",\n            ", o = n["if"].call(t, t && t.alreadyOnTrack, {
                hash: {},
                inverse: c.program(7, m, i),
                fn: c.program(5, v, i)
            });
            if (o || o === 0) s += o;
            return s += "\n        </div>\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/retirementPlanning/splashBubble", n), n
    }), define("views/retirementPlanning/splashBubbleView", ["common/betterment.views", "hbs!views/retirementPlanning/splashBubble", "services/retirementPlanService"], function(e, t, n) {
        return e.View.extend({
            template: t,
            ui: {
                suggestedAnnualSavings: ".savings-amount .dollars"
            },
            templateHelpers: {
                retirementPlan: function() {
                    return this.self.options.retirementPlan
                },
                annualIncome: function() {
                    return this.retirementPlan().get("financialProfile").dollars("pretaxIncome")
                },
                annualSocialSecurityIncome: function() {
                    var e = this.retirementPlan().getSocialSecurityCollectionInfo();
                    return e.monthlySocialSecurityTodaysDollars * 12
                },
                currentBalance: function() {
                    return n.getTotalBettermentAccountBalance(this.retirementPlan().get("financialPlan"))
                },
                annualSavings: function() {
                    return this.retirementPlan().getRecommendedYearlySavings()
                },
                totalSavings: function() {
                    return this.retirementPlan().getRecommendedTargetBalance()
                },
                alreadyOnTrack: function() {
                    return this.annualSavings() <= 0
                },
                retirementAge: function() {
                    return this.retirementPlan().get("financialPlan").getRetirementAgeOrDefault()
                }
            }
        })
    }), define("views/retirementPlanning/splashView", ["jquery", "underscore", "projector", "common/betterment.views", "hbs!views/retirementPlanning/splash", "components/common/scripts/analytics/analytics", "components/common/scripts/modules/async", "components/common/scripts/services/projectorService", "services/accountService", "components/automaticTransaction/scripts/services/automaticTransactionService", "models/user", "models/v2/zipCode", "models/v2/retirementPlan", "models/v2/financialPlan", "models/v2/financialProfile", "views/retirementPlanning/sharedHeaderView", "views/retirementPlanning/splashBubbleView"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m) {
        return r.View.extend({
            className: "retirement-plan-splash panel card",
            template: i,
            regions: {
                headerRegion: ".header-region",
                bubbleRegion: ".bubble-region"
            },
            events: {
                "click .next": "next"
            },
            onRender: function() {
                this.preloadStart(), this.loadDependencies().then(function(e) {
                    this.retirementPlan = e, this.renderSubViews(), this.preloadComplete()
                }.bind(this))
            },
            onShow: function() {
                s.track("ElementViewed", {
                    Name: "GettingStarted",
                    Location: "Plan"
                })
            },
            renderSubViews: function() {
                this.headerRegion.show(new v), this.bubbleRegion.show(new m({
                    retirementPlan: this.retirementPlan
                }))
            },
            loadDependencies: function() {
                return this.loadZipCode().then(this.loadRetirementPlan.bind(this), this.loadRetirementPlan.bind(this))
            },
            loadZipCode: function() {
                return this.zipCode = new c({
                    zip: BMT.user.get("zip")
                }), this.zipCode.fetch()
            },
            loadRetirementPlan: function() {
                return h.create({
                    financialProfile: this.getMockFinancialProfile(),
                    financialPlan: this.getMockFinancialPlan()
                })
            },
            getMockFinancialProfile: function() {
                if (!this._mockFinancialProfile) {
                    var e = BMT.user.getFinancialProfile();
                    this._mockFinancialProfile = new d(t.omit(e.attributes, "id", "user")), this._mockFinancialProfile.set("user", this.getMockUser()), this._mockFinancialProfile.setComplete()
                }
                return this._mockFinancialProfile
            },
            getMockFinancialPlan: function() {
                if (!this._mockFinancialPlan) {
                    var e = BMT.user.get("financialPlans").selected();
                    this._mockFinancialPlan = new p(t.omit(e.attributes, "id", "user", "accounts", "externalAccounts")), this._mockFinancialPlan.set({
                        user: this.getMockUser(),
                        accounts: this.getRetirementAccounts()
                    }), this._mockFinancialPlan.dollars("desiredRetirementIncome", this.getPreRetirementConsumption()), this._mockFinancialPlan.setComplete()
                }
                return this._mockFinancialPlan
            },
            getMockUser: function() {
                return this._mockUser || (this._mockUser = new l({
                    zip: BMT.user.get("zip"),
                    dateOfBirth: BMT.user.get("dateOfBirth")
                })), this._mockUser
            },
            getRetirementAccounts: function() {
                return a.getAllAccounts().where({
                    goalType: "RETIREMENT",
                    income: !1
                }).map(function(e) {
                    return e.getIdParams()
                }.bind(this))
            },
            getPreRetirementConsumption: function() {
                return u.getRecommendedRetirementConsumption({
                    currentAge: BMT.user.getAge(),
                    grossIncome: BMT.user.num("annualIncome"),
                    state: BMT.user.get("state"),
                    costOfLivingIndex: this.zipCode.has("costOfLivingIndex") ? this.zipCode.num("costOfLivingIndex") : 100,
                    inflation: 0
                })
            },
            next: function() {
                BMT.router.navigate("retireGuideSetup", !0, {
                    welcomeFlow: !0
                })
            }
        })
    }), define("hbs!views/retirementPlanning/setup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header-region"></div>\n<div class="progress-container"></div>\n<div class="content">\n    <div class="bubbles"></div>\n    <div class="questions"></div>\n</div>\n'
        });
        return t.registerPartial("views/retirementPlanning/setup", n), n
    }), define("hbs!views/retirementPlanning/bubbles", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="bubble user">\n    <div class="bubble-container">\n        <div class="background"></div>\n        <div class="content-container">\n            <div class="bubble-content"></div>\n        </div>\n        <div class="sub-container">\n            <div class="sub-content"></div>\n        </div>\n    </div>\n</div>\n<div class="bubble spouse">\n    <div class="bubble-container">\n        <div class="background"></div>\n        <div class="content-container">\n            <div class="bubble-content"></div>\n        </div>\n        <div class="sub-container">\n            <div class="sub-content"></div>\n        </div>\n    </div>\n</div>\n<div class="bubble spending">\n    <div class="bubble-container">\n        <div class="background"></div>\n        <div class="content-container">\n            <div class="bubble-content"></div>\n        </div>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/retirementPlanning/bubbles", n), n
    }), define("views/retirementPlanning/bubblesView", ["common/betterment.views", "components/common/scripts/util/handlebarsHelpers", "hbs!views/retirementPlanning/bubbles"], function(e, t, n) {
        var r = 30,
            i = 280;
        return e.View.extend({
            template: n,
            className: "bubbles-container",
            ui: {
                user: ".bubble.user",
                spouse: ".bubble.spouse",
                ira: ".bubble.ira",
                spending: ".bubble.spending"
            },
            toggle: function(e, t, n, s) {
                e !== "user" && this.$el.height(t ? i + this.ui[e].outerHeight() : 0), this.ui[e].animate({
                    opacity: t ? 1 : 0,
                    "margin-top": t && e !== "user" ? i : r
                }, n || 250, "swing", s)
            },
            content: function(e, t, n, r) {
                var i = this.ui[e],
                    s = i.find(".bubble-content"),
                    n = n || 250;
                this.toggle(e, t, n, function() {
                    s.html() !== t ? s.animate({
                        opacity: 0
                    }, n, function() {
                        s.html(t), s.animate({
                            opacity: 1
                        }, n, "swing", r)
                    }) : r && r()
                })
            },
            sub: function(e, t, n, r) {
                var i = this.ui[e],
                    s = i.find(".content-container"),
                    o = i.find(".sub-container"),
                    u = o.children(".sub-content"),
                    n = n || 250;
                s.animate({
                    height: t === !1 ? "100%" : "80%"
                }, n), o.animate({
                    opacity: t === !1 ? 0 : 1
                }, n, function() {
                    u.html() !== t && u.animate({
                        opacity: 0
                    }, n, function() {
                        u.html(t), u.animate({
                            opacity: 1
                        }, n, function() {
                            r && r()
                        })
                    })
                })
            }
        })
    }), define("hbs!views/retirementPlanning/personalDetails", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function";
            return s += '<div class="question marital-status">\n    <h1>Are you married?</h1>\n    <p>We ask this because your marital status affects your taxes, income, and qualification limits for Age Pension. <span class="unadvised-user-only">' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.disclaimerLink, a) : f.call(t, "link", t && t.disclaimerLink, a))) + '</span></p>\n    <div class="inputs">\n        <div class="status single bubble-button">\n            <div class="button-icon">\n                <div class="icon single-grey"></div>\n            </div>\n            <div class="button-label">Not married</div>\n        </div>\n        <div class="status married bubble-button">\n            <div class="button-icon">\n                <div class="icon married-grey"></div>\n            </div>\n            <div class="button-label">Married</div>\n        </div>\n    </div>\n</div>\n\n<div class="question spouse-info">\n    <h1>What is your spouse\'s name and age?</h1>\n    <p>We ask this so we can customize your plan to you and your spouse. This information is always confidential.</p>\n\n    <div class="inputs">\n        <input type="text" class="spouse name" name="spouseName" placeholder="Name" value="', (u = n.spouseName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseName, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" />\n        <input type="text" class="spouse age" style="width:100px;" name="spouseAge" placeholder="birth date" value="', (u = n.spouseAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseAge, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" />\n    </div>\n    <div class="error" data-field="spouseInputs"></div>\n</div>\n\n<div class="buttons">\n    <button class="silver back">Back</button>\n    <button class="blue next">Save and Continue</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/personalDetails", n), n
    }), define("hbs!views/retirementPlanning/personalDetailsBubble", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return "years old"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            (u = n.name) ? o = u.call(t, {
                hash: {}
            }): (u = t && t.name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n<div class="strong">', (u = n.age) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.age, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "</div>\n", o = n["if"].call(t, t && t.age, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/personalDetailsBubble", n), n
    }), define("views/retirementPlanning/personalDetailsView", ["jqueryMask","common/betterment.views", "hbs!views/retirementPlanning/personalDetails", "hbs!views/retirementPlanning/personalDetailsBubble"], function(jm, e, t, n) {
        return e.View.extend({
            template: t,
            className: "personal-details-step",
            ui: {
                spouseElements: ".spouse-info",
                singleButton: ".status.single .button-icon",
                marriedButton: ".status.married .button-icon",
                spouseNameInput: "input.spouse.name",
                spouseAgeInput: "input.spouse.age",
                nextButton: "button.next"
            },
            triggers: {
                "click button.back": "back"
            },
            events: {
                "change @ui.spouseNameInput": "spouseNameChanged",
                "change @ui.spouseAgeInput": "spouseAgeChanged",
                "click .status.single": "selectSingle",
                "click .status.married": "selectMarried",
                "click @ui.nextButton": "next"
            },
            templateHelpers: {
                spouseName: function() {
                    return this.self.profile.get("spouseName")
                },
                spouseAge: function() {
                    return this.self.profile.getSpouseAge()
                },
                disclaimerLink: {
                    text: "Your information is safe and never shared >",
                    supportUrl: "customer/portal/articles/1920463-how-will-the-information-i-enter-into-betterment-for-advice-be-used-"
                }
            },
            onInitialize: function() {
                this.profile = this.options.profile, this.plan = this.options.plan
            },
            onRender: function() {
                this.ui.spouseAgeInput.mask("99/99/9999");
                this.ui.spouseElements.toggle(this.profile.isMarried()), this.profile.isMarried() ? this.selectMarried() : this.selectSingle(), this.options.bubbles.content("user", n({
                    name: BMT.user.get("firstName"),
                    age: this.profile.getAge()
                })), this.options.bubbles.toggle("user", !0)
            },
            selectSingle: function() {
                this.profile.set("maritalStatus", "single"), this.profile.set("spouseName", null), this.profile.dollars("spousePretaxIncome", null), this.profile.unsetSpouseAge(), this.ui.spouseNameInput.val(""), this.ui.spouseAgeInput.val(""), this.ui.singleButton.addClass("selected").children(".icon").addClass("single-white").removeClass("single-grey"), this.ui.marriedButton.removeClass("selected").children(".icon").removeClass("married-white").addClass("married-grey"), this.options.bubbles.content("spouse", !1), this.ui.spouseElements.slideUp()
            },
            selectMarried: function() {
                this.profile.isMarried() || (this.profile.set("maritalStatus", "married_jointly"), this.profile.set("complete", !1), this.plan.set("complete", !1)), this.ui.singleButton.removeClass("selected").children(".icon").removeClass("single-white").addClass("single-grey"), this.ui.marriedButton.addClass("selected").children(".icon").addClass("married-white").removeClass("married-grey"), this.ui.spouseElements.slideDown(400, function() {
                    this.updateSpouseBubble(), this.options.bubbles.toggle("spouse", !0)
                }.bind(this))
            },
            spouseNameChanged: function(e) {
                this.profile.set("spouseName", $.trim(e.target.value)), this.updateSpouseBubble()
            },
            spouseAgeChanged: function(e) {
                if (e.target.value) {
                    var t = $(e.target).intVal();
                    this.profile.setSpouseAge(t)
                } else this.profile.unsetSpouseAge();
                this.updateSpouseBubble()
            },
            updateSpouseBubble: function() {
                this.spouseInfoFilled() && this.hideError("spouseInputs"), this.options.bubbles.content("spouse", n({
                    name: this.profile.get("spouseName"),
                    age: this.profile.getSpouseAge()
                }))
            },
            showError: function(e, t) {
                this.$(".error[data-field=" + e + "]").text(t).slideDown()
            },
            hideError: function(e) {
                this.$(".error[data-field=" + e + "]").slideUp()
            },
            spouseInfoFilled: function() {
                return this.profile.is("spouseName") && this.profile.getSpouseAge() !== null
            },
            next: function() {
                this.hideError("spouseInputs");
                if (this.profile.isMarried()) {
                    if (!this.spouseInfoFilled()) {
                        this.showError("spouseInputs", "You must set your spouse's name and age to continue");
                        return
                    }
                    var e = this.profile.validate();
                    if (e && e.spouseEstimatedBirthdate) {
                        this.showError("spouseInputs", e.spouseEstimatedBirthdate);
                        return
                    }
                }
                this.profile.setDefaultsForMaritalStatus(), this.trigger("next")
            }
        })
    }), define("hbs!views/retirementPlanning/annualIncome", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function";
            return s += '<div class="question">\n    <h1>What is your annual pre-tax income from all sources?</h1>\n    <p>Your annual pre-tax income is the total income you earn in a year from all sources, before taxes are taken out. If your income varies from year to year, enter a typical year or average.</p>\n\n    <div class="inputs">\n        <div>\n            <div class="input-label">YOUR INCOME</div>\n            <div>\n                $ <input type="text" class="user income" name="annualIncome" value="', o = (u = n.annualIncome || t && t.annualIncome, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "annualIncome", a)), s += l((u = n.number || t && t.number, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "number", o, a))) + '" /> /year\n            </div>\n        </div>\n\n        <div class="spouse">\n            <div class="input-label spouse">', (u = n.spouseName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseName, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\'S INCOME</div>\n            <div>\n                $ <input type="text" class="spouse income" name="spouseAnnualIncome" value="', o = (u = n.spouseAnnualIncome || t && t.spouseAnnualIncome, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "spouseAnnualIncome", a)), s += l((u = n.number || t && t.number, a = {
                hash: {}
            }, u ? u.call(t, o, a) : f.call(t, "number", o, a))) + '" /> /year\n            </div>\n        </div>\n    </div>\n\n    <div class="total-container">\n        Total Household Income <span class="total-income">', (u = n.formattedTotalIncome) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.formattedTotalIncome, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</span>\n    </div>\n</div>\n\n<div class="buttons">\n    <button class="silver back">Back</button>\n    <button class="blue next">Save and Continue</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/annualIncome", n), n
    }), define("hbs!views/retirementPlanning/annualIncomeBubble", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n<div class="strong">' + f((i = n.money || e && e.money, s = {
                    hash: {}
                }, i ? i.call(e, e && e.income, 0, s) : a.call(e, "money", e && e.income, 0, s))) + "/year</div>\nINCOME\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression,
                l = "function",
                c = this;
            (u = n.name) ? o = u.call(t, {
                hash: {}
            }): (u = t && t.name, o = typeof u === l ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", o = n["if"].call(t, t && t.hasIncome, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, h, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/annualIncomeBubble", n), n
    }), define("views/retirementPlanning/annualIncomeView", ["common/betterment.views", "hbs!views/retirementPlanning/annualIncome", "hbs!views/retirementPlanning/annualIncomeBubble"], function(e, t, n) {
        return e.View.extend({
            template: t,
            className: "annual-income-step",
            ui: {
                spouseElements: ".inputs div.spouse",
                totalIncome: ".total-income",
                nextButton: "button.next"
            },
            triggers: {
                "click button.next": "next",
                "click button.back": "back"
            },
            events: {
                "keydown input.income": "formatDecimal",
                "blur input.user.income": "userIncomeChanged",
                "blur input.spouse.income": "spouseIncomeChanged",
                "click @ui.nextButton": "next"
            },
            templateHelpers: {
                isMarried: function() {
                    return this.self.profile.isMarried()
                },
                annualIncome: function() {
                    return this.self.profile.dollars("pretaxIncome").round(0)
                },
                spouseName: function() {
                    return this.self.profile.get("spouseName")
                },
                spouseAnnualIncome: function() {
                    return this.self.profile.dollars("spousePretaxIncome").round(0)
                },
                formattedTotalIncome: function() {
                    var e = this.annualIncome() + this.spouseAnnualIncome();
                    return this.money(e, 0)
                }
            },
            onInitialize: function() {
                this.profile = this.options.profile
            },
            onRender: function() {
                this.ui.spouseElements.toggle(this.profile.isMarried());
                if (this.profile.dollars("pretaxIncome") || this.profile.dollars("spousePretaxIncome")) this.options.bubbles.content("user", this.userBubbleContent()), this.options.bubbles.content("spouse", this.spouseBubbleContent()), this.redraw()
            },
            userIncomeChanged: function(e) {
                this.profile.dollars("pretaxIncome", $(e.target).numberVal()), this.options.bubbles.content("user", this.userBubbleContent()), this.redraw()
            },
            spouseIncomeChanged: function(e) {
                this.profile.dollars("spousePretaxIncome", $(e.target).numberVal()), this.options.bubbles.content("spouse", this.spouseBubbleContent()), this.redraw()
            },
            redraw: function() {
                this.ui.totalIncome.text(this.formatter.money(this.profile.grossIncome(), 0))
            },
            userBubbleContent: function() {
                var e = this.profile.dollars("pretaxIncome") || 0;
                return n({
                    name: BMT.user.get("firstName"),
                    income: e,
                    hasIncome: e !== 0
                })
            },
            spouseBubbleContent: function() {
                if (!this.profile.isMarried()) return !1;
                var e = this.profile.dollars("spousePretaxIncome") || 0;
                return n({
                    name: this.profile.get("spouseName"),
                    income: e,
                    hasIncome: e !== 0
                })
            }
        })
    }), define("hbs!views/retirementPlanning/accounts", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += "and ", (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<div class="question">\n    <h1>How much have you ', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += 'saved so far?</h1>\n    <p>Enter all retirement accounts below to get the most accurate advice.</p>\n    <p class="unadvised-user-only">' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.disclaimerLink, a) : h.call(t, "link", t && t.disclaimerLink, a))) + '</p>\n\n    <div class="totals">\n        <div class="total-retirement-balance">\n            <div class="total-label">Total Retirement Balance</div>\n            <div class="total-value"></div>\n        </div>\n        <div class="total-annual-contribution">\n            <div class="total-label">Annual Contribution</div>\n            <div class="total-value"></div>\n        </div>\n    </div>\n\n    <div class="accounts">\n\n        <div class="betterment-accounts"></div>\n\n        <div class="external-accounts"></div>\n\n    </div>\n</div>\n\n<div class="buttons">\n    <button class="silver back">Back</button>\n    <button class="blue next">Save and Continue</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/accounts", n), n
    }), define("hbs!views/retirementPlanning/retirementSavingsBubble", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="strong">' + f((i = n.money || e && e.money, s = {
                    hash: {}
                }, i ? i.call(e, e && e.retirementSavings, 0, s) : a.call(e, "money", e && e.retirementSavings, 0, s))) + "</div>\n    current savings\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression,
                l = "function",
                c = this;
            (u = n.name) ? o = u.call(t, {
                hash: {}
            }): (u = t && t.name, o = typeof u === l ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", o = n["if"].call(t, t && t.retirementSavings, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, h, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/retirementSavingsBubble", n), n
    }), define("hbs!views/retirementPlanning/bettermentAccounts", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="list-header">Select your <span class="unadvised-user-only">Betterment</span> retirement accounts</div>\n<div class="list-header-row">\n    <div class="account-summary">Accounts</div>\n    <div class="current-balance">Current Balance</div>\n    <div class="annual-contribution">Annual Contribution</div>\n    <div class="percent-stocks">Percent Stocks</div>\n</div>\n<div class="accounts-list"></div>\n'
        });
        return t.registerPartial("views/retirementPlanning/bettermentAccounts", n), n
    }), define("hbs!views/retirementPlanning/bettermentAccount", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money", "components/common/scripts/templateHelpers/pct"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "with-ag-label"
            }

            function d(e, t) {
                return 'checked="checked"'
            }

            function v(e, t) {
                return 'disabled="disabled"'
            }

            function m(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="account-group-label">', (s = n.accountGroupName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.accountGroupName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + "</div>\n        ", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<div class="account-row ', o = n["if"].call(t, t && t.showAccountGroupLabel, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '" data-id="', (u = n.id) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.id, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n    <div class="account-select col">\n        <input type="checkbox" value="', (u = n.id) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.id, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" ', o = n["if"].call(t, t && t.isSelected, {
                hash: {},
                inverse: c.noop,
                fn: c.program(3, d, i)
            });
            if (o || o === 0) s += o;
            s += " ", o = n["if"].call(t, t && t.isDisabled, {
                hash: {},
                inverse: c.noop,
                fn: c.program(5, v, i)
            });
            if (o || o === 0) s += o;
            s += ' />\n    </div>\n    <div class="account-summary col">\n        ', o = n["if"].call(t, t && t.showAccountGroupLabel, {
                hash: {},
                inverse: c.noop,
                fn: c.program(7, m, i)
            });
            if (o || o === 0) s += o;
            return s += '\n        <span class="unadvised-user-only">BetaSmartz </span>\n        ', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n\n        <div class="goal-warning caution-icon" style="display: inline-block">\n            RetireSmart works across accounts, so prior account-specific targets and time horizons will be removed.\n            To keep your current target, time horizon, and on/off track status, uncheck to remove this goal from RetireSmart.\n        </div>\n    </div>\n    <div class="current-balance col">', o = (u = n.currentBalance || t && t.currentBalance, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "currentBalance", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : h.call(t, "money", o, 0, a))) + '</div>\n    <div class="annual-contribution col">\n        <span class="inline-editable">\n            <span display>\n                ', o = (u = n.annualContribution || t && t.annualContribution, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "annualContribution", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : h.call(t, "money", o, 0, a))) + '\n            </span>\n            <span editable style="display:none;">\n                <input input  />\n            </span>\n        </span>\n    </div>\n    <div class="percent-stocks col">' + l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, t && t.allocation, a) : h.call(t, "pct", t && t.allocation, a))) + "</div>\n</div>\n", s
        });
        return t.registerPartial("views/retirementPlanning/bettermentAccount", n), n
    }), define("views/retirementPlanning/bettermentAccountView", ["common/betterment.views", "hbs!views/retirementPlanning/bettermentAccount", "components/common/scripts/util/formatter", "components/automaticTransaction/scripts/services/automaticTransactionService", "services/financialPlanUpdater"], function(e, t, n, r, i) {
        return e.View.extend({
            template: t,
            ui: {
                accountSelect: ".account-select input",
                annualContributionEditable: ".annual-contribution .inline-editable",
                warningTooltip: ".goal-warning"
            },
            events: {
                "click @ui.annualContributionEditable [display]": "editAnnualContribution",
                "change @ui.accountSelect": "accountToggled"
            },
            toolTips: {
                ".goal-warning": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            editable: {
                annualContribution: {
                    section: ".annual-contribution .inline-editable",
                    initial: function() {
                        return this.getInitialAnnualContribution()
                    },
                    formatter: {
                        "in": function(e) {
                            return e ? n.money(e, 0) : null
                        },
                        out: function(e) {
                            return n.money(e, 0)
                        }
                    }
                }
            },
            templateHelpers: {
                isSelected: function() {
                    var e = this.self.options.plan;
                    return this.self.model.isRetirement() && !this.self.model.isIncome() ? !0 : e.hasPlanAccount(this.self.model.getIdParams())
                },
                isDisabled: function() {
                    return this.self.model.isRetirement() && !this.self.model.isIncome()
                },
                annualContribution: function() {
                    return this.self.getInitialAnnualContribution()
                },
                currentBalance: function() {
                    return this.self.model.getCurrentBalanceWithPending()
                },
                showAccountGroupLabel: function() {
                    return BMT.user.get("accountGroups").length > 1
                },
                accountGroupName: function() {
                    var e = BMT.user.get("accountGroups").get(this.self.model.num("accountGroupId"));
                    return e.get("name")
                }
            },
            onShow: function() {
                this.toggleWarningTooltip()
            },
            isSelected: function() {
                return this.ui.accountSelect.is(":checked")
            },
            getInitialAnnualContribution: function() {
                var e = this.options.plan.getAnnualContributionByIdParams(this.model.getIdParams());
                return this.options.plan.hasPlanAccount(this.model.getIdParams()) && e !== null ? e : this.getDefaultAnnualContribution()
            },
            getDefaultAnnualContribution: function() {
                return r.netYearlyTransactionAmount(this.model)
            },
            getAnnualContribution: function() {
                return $.numberVal(this.editables.annualContribution.currentValue())
            },
            editAnnualContribution: function(e) {
                var t = this.editables.annualContribution;
                return t.edit(), this.listenTo(t, "save", function(e) {
                    e === "" && t.currentValue(this.getDefaultAnnualContribution()), this.trigger("changed")
                }.bind(this)), !1
            },
            accountToggled: function() {
                this.toggleWarningTooltip(), this.trigger("changed")
            },
            toggleWarningTooltip: function() {
                this.ui.warningTooltip.toggle(this.isSelected() && !this.planAccountExists())
            },
            planAccountExists: function() {
                return this.options.plan.hasPlanAccount(this.model.getIdParams())
            },
            isDirty: function() {
                if (this.isSelected() && !this.planAccountExists() || !this.isSelected() && this.planAccountExists()) return !0;
                var e = this.options.plan.getAnnualContributionByIdParams(this.model.getIdParams());
                return e !== null && e !== this.getAnnualContribution() ? !0 : e === null && this.getAnnualContribution() !== this.getDefaultAnnualContribution() ? !0 : !1
            },
            getStateSynchronizer: function() {
                if (!this.isDirty()) return null;
                var e = null;
                return this.getAnnualContribution() !== this.getDefaultAnnualContribution() && (e = this.getAnnualContribution()), i.getStateSynchronizer({
                    account: this.model,
                    financialPlan: this.options.plan,
                    enabled: this.isSelected(),
                    annualContribution: e
                })
            }
        })
    }), define("views/retirementPlanning/bettermentAccountsView", ["underscore", "common/betterment.views", "hbs!views/retirementPlanning/bettermentAccounts", "components/common/scripts/modules/async", "views/retirementPlanning/bettermentAccountView"], function(e, t, n, r, i) {
        return t.CompositeView.extend({
            template: n,
            getChildView: function() {
                return i
            },
            childViewOptions: function() {
                return {
                    plan: this.model
                }
            },
            childViewContainer: ".accounts-list",
            childEvents: {
                changed: "childChanged"
            },
            getSelectedViews: function() {
                return this.children.filter(function(e) {
                    return e.isSelected()
                })
            },
            getSelectedAccounts: function() {
                return this.getSelectedViews().map(function(e) {
                    return e.model
                })
            },
            getTotalAnnualContribution: function() {
                return this.getSelectedViews().reduce(function(e, t) {
                    return e += t.getAnnualContribution(), e
                }, 0)
            },
            syncAccountStates: function() {
                var t = e.compact(this.children.map(function(e) {
                    var t = e.getStateSynchronizer();
                    return t ? t.save() : null
                }));
                return r.whenAll(t).then(function() {
                    return this.model.fetch()
                }.bind(this))
            },
            childChanged: function() {
                this.trigger("changed")
            }
        })
    }), define("hbs!views/retirementPlanning/externalAccounts", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="list-header">Add your <span class="unadvised-user-only">Non-Betterment</span><span class="advised-user-only">external</span> retirement accounts</div>\n<div class="list-header-row">\n    <div class="account-type">Account Type</div>\n    <div class="account-owner">Account Owner</div>\n    <div class="current-balance">\n        Current Balance\n        <span class="help-content">\n            Latest total dollar value of this account. You should update this number at least annually and re-review your plan.\n        </span>\n    </div>\n    <div class="annual-contribution">\n        Annual Contrib. Including Company\n        <span class="help-content">\n            Enter the total amount that you plan to save each year into this account, plus any company contribution that you get.\n        </span>\n    </div>\n\n    <div class="remove-account"></div>\n</div>\n\n<div class="accounts-list"></div>\n\n<p class="update-advice">Update your account values periodically to get accurate advice.</p>\n\n<div class="add-external-account bubble-button">\n    <div class="button-icon selected">\n        <div class="symbol">+</div>\n    </div>\n    <div class="button-label loud">Add account</div>\n</div>\n'
        });
        return t.registerPartial("views/retirementPlanning/externalAccounts", n), n
    }), define("hbs!views/retirementPlanning/externalAccount", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/moneyCents"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<div class="account-row">\n    <div class="account-type col">\n        <span>', (u = n.displayAccountType) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.displayAccountType, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</span>\n    </div>\n    <div class="account-owner col">\n        <span>', (u = n.displayAccountOwner) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.displayAccountOwner, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</span>\n    </div>\n    <div class="current-balance col">\n        <span>' + l((u = n.moneyCents || t && t.moneyCents, a = {
                hash: {}
            }, u ? u.call(t, t && t.balanceCents, 0, a) : c.call(t, "moneyCents", t && t.balanceCents, 0, a))) + '</span>\n    </div>\n    <div class="annual-contribution col">\n        <span> ' + l((u = n.moneyCents || t && t.moneyCents, a = {
                hash: {}
            }, u ? u.call(t, t && t.annualContributionCents, 0, a) : c.call(t, "moneyCents", t && t.annualContributionCents, 0, a))) + '</span>\n    </div>\n    <div class="remove-account col">\n        <span class="help-content">\n            Remove\n        </span>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/externalAccount", n), n
    }), define("hbs!components/common/scripts/templates/inputPercent", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="input-percent ', (u = n.className) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.className, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">\n    <input name="', (u = n.propertyName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.propertyName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" ', (u = n.disabled) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.disabled, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '/>\n    <label class="regular">', (u = n.label) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.label, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n    <label class="validation"></label>\n    <div class="symbol">%</div>\n    <div class="field-loader-img loader"></div>\n</div>\n', s
        });
        return t.registerPartial("components/common/scripts/templates/inputPercent", n), n
    }), define("components/common/scripts/templateHelpers/inputPercent", ["hbs/handlebars", "hbs!components/common/scripts/templates/inputPercent"], function(e, t) {
        e.registerHelper("inputPercent", function(n, r) {
            var i = {
                propertyName: n,
                className: r.hash.className || n,
                label: r.hash.label || n,
                disabled: r.hash.disabled || ""
            };
            return new e.SafeString(t(i))
        })
    }), define("hbs!views/retirementPlanning/externalAccountSetup", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/inputText", "components/common/scripts/templateHelpers/inputSelect", "components/common/scripts/templateHelpers/inputMoney", "components/common/scripts/templateHelpers/inputPercent", "components/common/scripts/templateHelpers/supportUrl", "components/common/scripts/templateHelpers/submitButton"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression;
            return s += '<div class="external-account-setup">\n    <div class="sidebar"></div>\n\n    <div class="content">\n        <div class="header">\n            <h1>Add your manual account</h1>\n            <h3>Provide details about this account to get the most accurate advice</h3>\n        </div>\n\n        <form>\n            ' + l((u = n.inputText || t && t.inputText, a = {
                hash: {
                    className: "institution-name",
                    label: "Institution name"
                }
            }, u ? u.call(t, "institutionName", a) : f.call(t, "inputText", "institutionName", a))) + "\n\n            ", o = (u = n.accountTypeOptions || t && t.accountTypeOptions, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "accountTypeOptions", a)), s += l((u = n.inputSelect || t && t.inputSelect, a = {
                hash: {
                    className: "account-type",
                    label: "Account type",
                    options: o
                }
            }, u ? u.call(t, "accountType", a) : f.call(t, "inputSelect", "accountType", a))) + "\n\n            ", o = (u = n.investmentTypeOptions || t && t.investmentTypeOptions, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "investmentTypeOptions", a)), s += l((u = n.inputSelect || t && t.inputSelect, a = {
                hash: {
                    className: "investment-type",
                    label: "Investment type",
                    options: o
                }
            }, u ? u.call(t, "investmentType", a) : f.call(t, "inputSelect", "investmentType", a))) + "\n\n            ", o = (u = n.accountOwnerOptions || t && t.accountOwnerOptions, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "accountOwnerOptions", a)), s += l((u = n.inputSelect || t && t.inputSelect, a = {
                hash: {
                    className: "owner",
                    label: "Owner",
                    options: o
                }
            }, u ? u.call(t, "accountOwner", a) : f.call(t, "inputSelect", "accountOwner", a))) + "\n\n            " + l((u = n.inputMoney || t && t.inputMoney, a = {
                hash: {
                    className: "balance",
                    label: "Balance"
                }
            }, u ? u.call(t, "balanceCents", a) : f.call(t, "inputMoney", "balanceCents", a))) + "\n\n            " + l((u = n.inputMoney || t && t.inputMoney, a = {
                hash: {
                    className: "annual-contribution",
                    label: "Annual contribution"
                }
            }, u ? u.call(t, "annualContributionCents", a) : f.call(t, "inputMoney", "annualContributionCents", a))) + "\n\n            " + l((u = n.inputPercent || t && t.inputPercent, a = {
                hash: {
                    className: "advisor-fee",
                    label: "Advisor fee (optional)"
                }
            }, u ? u.call(t, "advisorFeePercent", a) : f.call(t, "inputPercent", "advisorFeePercent", a))) + '\n\n            <div class="learn-more-data">\n                How is this information used?\n            </div>\n            <div class="help-content">\n                The account type, investment type, owner, balance, contributions and fees for this manually added account are used in our advice to estimate the projected value and tax treatment of withdrawals as accurately as possible.  Please provide details as accurately as possible.\n\n                <a href=' + l((u = n.supportUrl || t && t.supportUrl, a = {
                hash: {}
            }, u ? u.call(t, "/customer/portal/articles/1920463-how-will-the-information-i-enter-into-betterment-for-advice-be-used", a) : f.call(t, "supportUrl", "/customer/portal/articles/1920463-how-will-the-information-i-enter-into-betterment-for-advice-be-used", a))) + ">Your information is safe and never shared &gt;</a>\n            </div>\n\n            " + l((u = n.submitButton || t && t.submitButton, a = {
                hash: {}
            }, u ? u.call(t, "Save", a) : f.call(t, "submitButton", "Save", a))) + "\n        </form>\n\n\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/retirementPlanning/externalAccountSetup", n), n
    }), define("views/retirementPlanning/externalAccountSetupView", ["underscore", "hbs!views/retirementPlanning/externalAccountSetup", "common/betterment.views", "components/common/scripts/behaviors/editableForm", "components/bubble/scripts/balanceBubbleView", "components/common/scripts/util/handlebarsHelpers", "models/v2/externalAccount", "hbs!views/linkBankAccount/svg/bankLogoManual"], function(e, t, n, r, i, s, o, u) {
        return n.View.extend({
            className: "external-account-setup",
            ui: {
                learnMore: ".learn-more-data",
                helpContent: ".help-content"
            },
            events: {
                "click @ui.manualLink": "loadManualFlow",
                "click @ui.learnMore": "toggleHelpContent"
            },
            template: t,
            behaviors: {
                EditableForm: {
                    behaviorClass: r,
                    fields: {
                        institutionName: {
                            type: "text"
                        },
                        accountType: {
                            type: "select"
                        },
                        investmentType: {
                            type: "select"
                        },
                        accountOwner: {
                            type: "select"
                        },
                        balanceCents: {
                            type: "money"
                        },
                        annualContributionCents: {
                            type: "money"
                        },
                        advisorFeePercent: {
                            type: "percent"
                        }
                    },
                    onSubmit: function() {
                        this.save()
                    }
                }
            },
            templateHelpers: {
                accountTypeOptions: function() {
                    return o.VALID_ACCOUNT_TYPES
                },
                investmentTypeOptions: function() {
                    return {
                        stocks: "Stocks",
                        bonds: "Bonds",
                        cash: "Cash"
                    }
                },
                accountOwnerOptions: function() {
                    var t = {
                        user: BMT.user.get("firstName"),
                        joint: "Joint"
                    };
                    return this.self.options.spouseName && e.extend(t, {
                        spouse: this.self.options.spouseName
                    }), t
                }
            },
            regions: {
                sidebar: ".sidebar"
            },
            toggleHelpContent: function() {
                this.ui.learnMore.hasClass("open") ? (this.ui.learnMore.removeClass("open"), this.ui.helpContent.slideUp()) : (this.ui.learnMore.addClass("open"), this.ui.helpContent.slideDown())
            },
            save: function() {
                this.trigger("save", this.model), this.trigger("close")
            },
            onRender: function() {
                this.sidebar.show(new i({
                    topContent: s.s(u())
                }))
            }
        })
    }), define("views/retirementPlanning/externalAccountView", ["common/betterment.views", "modules/modals", "hbs!views/retirementPlanning/externalAccount", "views/retirementPlanning/externalAccountSetupView"], function(e, t, n, r) {
        return e.View.extend({
            template: n,
            ui: {
                container: ".account-row",
                accountTypeSelect: ".account-type-selector",
                ownerSelect: ".owner-selector"
            },
            events: {
                "click .account-type": "editAccount",
                "click .account-owner": "editAccount",
                "click .current-balance": "editAccount",
                "click .annual-contribution": "editAccount",
                "click .remove-account": "removeAccount"
            },
            toolTips: {
                ".remove-account": {
                    position: {
                        my: "left middle",
                        at: "right middle"
                    }
                }
            },
            templateHelpers: {
                displayAccountType: function() {
                    return this.self.model.displayAccountType()
                },
                displayAccountOwner: function() {
                    var e = this.self.model.get("accountOwner");
                    return e === "joint" ? "Joint" : e === "spouse" ? this.self.options.profile.get("spouseName") : BMT.user.get("firstName")
                }
            },
            editAccount: function() {
                this.model.has("accountOwner") || this.model.set("accountOwner", "user");
                var e = new r({
                    model: this.model,
                    spouseName: this.options.profile.get("spouseName")
                });
                t.show(e), this.listenTo(e, "save", this.handleSave)
            },
            removeAccount: function() {
                this.trigger("remove:account", this.model)
            },
            handleSave: function(e) {
                this.trigger("change:account"), this.render()
            }
        })
    }), define("views/retirementPlanning/externalAccountsView", ["common/betterment.views", "hbs!views/retirementPlanning/externalAccounts", "modules/modals", "models/v2/externalAccount", "views/retirementPlanning/externalAccountView", "views/retirementPlanning/externalAccountSetupView"], function(e, t, n, r, i, s) {
        return e.CompositeView.extend({
            template: t,
            events: {
                "click .add-external-account": "addExternalAccount",
                "change:account": "accountsChanged"
            },
            getChildView: function() {
                return i
            },
            childViewOptions: function() {
                return {
                    profile: this.options.profile
                }
            },
            childViewContainer: ".accounts-list",
            childEvents: {
                "remove:account": "removeExternalAccount"
            },
            toolTips: {
                ".list-header-row > .current-balance, .list-header-row > .annual-contribution, .list-header-row > .percent-stocks": {
                    position: {
                        my: "bottom middle",
                        at: "top middle"
                    }
                }
            },
            onRender: function() {
                this.toggleUpdateAdviceCopy()
            },
            addExternalAccount: function() {
                var e = new r,
                    t = new s({
                        model: e,
                        spouseName: this.options.profile.get("spouseName")
                    });
                this.listenTo(t, "save", this.handleSave), n.show(t)
            },
            handleSave: function(e) {
                this.collection.add(e), this.trigger("change:account")
            },
            removeExternalAccount: function(e, t) {
                this.collection.remove(t), t.destroy(), this.trigger("changed")
            },
            accountsChanged: function() {
                this.trigger("changed")
            },
            toggleUpdateAdviceCopy: function() {
                this.$(".update-advice").toggle(!this.collection.isEmpty())
            }
        })
    }), define("viewHelpers/scrambleEffect", [], function() {
        return {
            scramble: function(e, t, n) {
                if (e.text() === t) return;
                var r = Math.max(e.text().length, t.length),
                    i = 0,
                    s = "0123456789";
                (function o() {
                    var u = [];
                    if (i > r) {
                        e.text(t.trim());
                        return
                    }
                    for (var a = 0; a < r; a++) a < i ? u.push(t.charAt(a) || " ") : u.push(s.charAt(Math.floor(Math.random() * 10)));
                    e.text(u.join("")), i++, setTimeout(function() {
                        o()
                    }, n)
                })()
            }
        }
    }), define("views/retirementPlanning/accountsView", ["jquery", "underscore", "common/betterment.views", "hbs!views/retirementPlanning/accounts", "hbs!views/retirementPlanning/retirementSavingsBubble", "components/common/scripts/modules/async", "services/accountService", "components/automaticTransaction/scripts/services/automaticTransactionService", "services/financialPlanUpdater", "views/retirementPlanning/bettermentAccountsView", "views/retirementPlanning/externalAccountsView", "components/common/scripts/util/formatter", "viewHelpers/scrambleEffect"], function(e, t, n, r, i, s, o, u, a, f, l, c, h) {
        return n.View.extend({
            template: r,
            className: "accounts-step",
            regions: {
                bettermentAccounts: ".betterment-accounts",
                externalAccounts: ".external-accounts"
            },
            ui: {
                totalRetirementBalance: ".total-retirement-balance .total-value",
                totalAnnualContribution: ".total-annual-contribution .total-value",
                nextButton: "button.next"
            },
            triggers: {
                "click button.next": "next",
                "click button.back": "back"
            },
            templateHelpers: {
                isMarried: function() {
                    return this.self.profile.isMarried()
                },
                spouseName: function() {
                    return this.self.profile.get("spouseName")
                },
                disclaimerLink: {
                    text: "Your information is safe and never shared >",
                    supportUrl: "customer/portal/articles/1920463-how-will-the-information-i-enter-into-betterment-for-advice-be-used-"
                }
            },
            onInitialize: function() {
                this.profile = this.options.profile, this.plan = this.options.plan
            },
            onRender: function() {
                this.externalAccountsCollection = BMT.user.get("externalAccounts"), this.options.bubbles.toggle("spending", !1), this.options.bubbles.content("spouse", !1), this.showChildViews(), this.reTotal()
            },
            showChildViews: function() {
                this.bettermentAccountsView = new f({
                    model: this.plan,
                    collection: o.getAllAccounts()
                }), this.listenTo(this.bettermentAccountsView, "changed", this.reTotal), this.bettermentAccounts.show(this.bettermentAccountsView), this.externalAccountsView = new l({
                    collection: this.externalAccountsCollection,
                    profile: this.profile
                }), this.listenTo(this.externalAccountsCollection, "change add remove", this.reTotal), this.externalAccounts.show(this.externalAccountsView)
            },
            userBubbleContent: function(e) {
                return i({
                    name: BMT.user.get("firstName") + (this.profile.isMarried() ? " & " + this.profile.get("spouseName") : ""),
                    retirementSavings: e
                })
            },
            bubbleSubContent: function(e) {
                var t = [],
                    n = this.externalAccountsCollection.some(function(t) {
                        return t.is("spouseAccount") === e
                    });
                return n && t.push("+ External Accounts"), this.bettermentAccountsView.getSelectedAccounts().length !== 0 && !e && t.push(BMT.user.isAdvised() ? "+ Your Accounts" : "+ Betterment"), t.length === 0 ? !1 : t.join("<br>")
            },
            reTotal: function() {
                this.options.bubbles.sub("user", this.bubbleSubContent(!1));
                var e = this.bettermentAccountsView.getSelectedAccounts().concat(this.externalAccountsCollection.models),
                    n = t.reduce(e, function(e, t) {
                        return e += t.has("currentBalance") ? t.getCurrentBalanceWithPending() : t.dollars("balance"), e
                    }, 0);
                h.scramble(this.ui.totalRetirementBalance, this.formatter.money(n, 0), 40), this.options.bubbles.content("user", this.userBubbleContent(n));
                var r = this.externalAccountsCollection.reduce(function(e, t) {
                    return e += t.dollars("annualContribution"), e
                }, 0) + this.bettermentAccountsView.getTotalAnnualContribution();
                h.scramble(this.ui.totalAnnualContribution, this.formatter.money(r, 0), 40)
            },
            onBeforeSave: function() {
                return s.whenAll([this.bettermentAccountsView.syncAccountStates(), this.externalAccountsCollection.save()])
            }
        })
    }), define("components/common/scripts/templateHelpers/number", ["hbs/handlebars", "components/common/scripts/util/formatter"], function(e, t) {
        e.registerHelper("number", function(e, n) {
            var r = n.hash.decimals || 0,
                i = n.hash.thousand || ",";
            return t.number(e, r, i)
        })
    }), define("components/common/scripts/templateHelpers/futureDollars", ["hbs/handlebars", "components/common/scripts/services/projectorService"], function(e, t) {
        e.registerHelper("futureDollars", function(e, n, r) {
            return t.futureDollars(e, n, r || 3)
        })
    }), define("hbs!views/retirementPlanning/retirementSpending", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/number", "components/common/scripts/templateHelpers/money", "components/common/scripts/templateHelpers/futureDollars", "components/common/scripts/templateHelpers/pct"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += "and ", (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " ", r
            }

            function d(e, t) {
                return "We"
            }

            function v(e, t) {
                return "I"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<div class="question">\n    <h1>How much do you ', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += 'plan to spend in retirement?</h1>\n\n    <p>This helps us determine how much you need to retire. Typically, expenses associated with mortgage payments, savings, and children do not continue in retirement; however, other expenses like medical care and travel replace them.</p>\n\n    <p>Don\'t worry about adjusting for inflation, we\'ll do that for you.</p>\n\n    <div class="retirement-spending-container">\n        <div class="spending-header">In retirement</div>\n        <div class="retirement-spending-summary">\n            <div class="copy">\n                ', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: c.program(5, v, i),
                fn: c.program(3, d, i)
            });
            if (o || o === 0) s += o;
            return s += ' would spend $\n                <input type="text" class="amount-per-year" name="desiredRetirementIncome" value="' + l((u = n.number || t && t.number, a = {
                hash: {}
            }, u ? u.call(t, t && t.desiredRetirementIncome, a) : h.call(t, "number", t && t.desiredRetirementIncome, a))) + '" />\n                /year (after-tax, today\'s dollars).\n\n                <div class="reset inactive">\n                    <button class="reset-calculation silver">Reset</button>\n                </div>\n            </div>\n        </div>\n        <div class="how-we-calculated-container">\n            <div class="how-we-calculated">\n                <div class="summary">\n                    Based on your current income and location, we estimate that you will need <span class="green today">' + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.desiredRetirementIncome, 0, a) : h.call(t, "money", t && t.desiredRetirementIncome, 0, a))) + '/year</span>.\n                    With inflation, that is <span class="future">', o = (u = n.yearsUntilRetirement || t && t.yearsUntilRetirement, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "yearsUntilRetirement", a)), s += l((u = n.futureDollars || t && t.futureDollars, a = {
                hash: {}
            }, u ? u.call(t, t && t.desiredRetirementIncome, o, a) : h.call(t, "futureDollars", t && t.desiredRetirementIncome, o, a))) + "</span> in ", (u = n.yearOfRetirement) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.yearOfRetirement, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ' dollars.\n                </div>\n                <div class="annual-income calculated-row">\n                    <div class="row-header">\n                        <div class="copy">Your current total annual income of <strong>', o = (u = n.grossIncome || t && t.grossIncome, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "grossIncome", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : h.call(t, "money", o, 0, a))) + '</strong></div>\n                    </div>\n                </div>\n                <div class="living-expenses calculated-row">\n                    <div class="row-header">\n                        <div class="copy">\n                            Average living expenses for your zip code\n                            <span class="zip-code inline-editable">\n                                <span display data-model="plan" data-property="retirementZip">\n                                    ', (u = n.retirementZip) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementZip, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '\n                                </span>\n                                <span editable style="display:none" data-current="', (u = n.retirementZip) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementZip, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                                    <input input />\n                                </span>\n                            </span>\n                        </div>\n                        <span class="arrow">&rsaquo;</span>\n                    </div>\n                    <div class="error" data-field="retirementZip"></div>\n                    <div class="explanation">\n                        As a starting point, we assume you will retire somewhere with a cost of living similar to your\n                        current location.  If you plan to retire to a different U.S. location, update the zip code.\n                        If you plan to retire internationally, you should estimate that cost yourself and override your total spending above.\n                    </div>\n                </div>\n                <div class="raises-inflation calculated-row">\n                    <div class="row-header">\n                        <div class="copy">\n                            Annual raises of\n                            <span class="raise-plus-inflation"></span>\n                            (\n                            <span class="annual-raise inline-editable">\n                                <span display data-model="profile" data-property="annualSalaryPercentGrowth">\n                                    ', o = (u = n.annualSalaryPercentGrowth || t && t.annualSalaryPercentGrowth, a = {
                hash: {}
            }, u ? u.call(t, a) : h.call(t, "annualSalaryPercentGrowth", a)), s += l((u = n.number || t && t.number, a = {
                hash: {
                    decimals: 0
                }
            }, u ? u.call(t, o, a) : h.call(t, "number", o, a))) + '%\n                                </span>\n                                <span style="display:none;" editable data-current="', (u = n.annualSalaryPercentGrowth) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.annualSalaryPercentGrowth, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                                    <input pct-input />%\n                                </span>\n                            </span>\n                            above inflation of ', (u = n.expectedInflation) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.expectedInflation, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '%)\n                        </div>\n                        <span class="arrow">&rsaquo;</span>\n                    </div>\n                    <div class="error" data-field="annualSalaryPercentGrowth"></div>\n                    <div class="explanation">\n                        <span class="unadvised-user-only">\n                            Since you are using Betterment, we assume you are an above average performer and will get\n                            raises in excess of inflation.\n                        </span>\n                        <span class="advised-user-only">\n                            We assume you will get raises in excess of inflation.\n                        </span>\n                        We assume 1% plus inflation raises of 3%, but you can change these in the Assumptions in the\n                        next step.\n                    </div>\n                </div>\n                <div class="typical-spending calculated-row">\n                    <div class="row-header">\n                        <div class="copy">\n                            Spending\n                            <span class="income-replacement-ratio inline-editable">\n                                <span display data-model="plan" data-property="incomeReplacementRatio">\n                                    ' + l((u = n.pct || t && t.pct, a = {
                hash: {}
            }, u ? u.call(t, t && t.incomeReplacementRatio, 0, a) : h.call(t, "pct", t && t.incomeReplacementRatio, 0, a))) + '\n                                </span>\n                                <span editable  style="display:none;" data-current="', (u = n.incomeReplacementRatio) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.incomeReplacementRatio, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">\n                                    <input pct-input />%\n                                </span>\n                            </span>\n                            of current after-tax income\n                        </div>\n                        <span class="arrow">&rsaquo;</span>\n                    </div>\n                    <div class="explanation">\n                        Our spending model is based on household spending research that links income to spending needs.\n                        Higher income individuals typically have to replace less of their pre-retirement income in retirement. This is better than calculators that use a fixed 85% income replacement assumption.\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="buttons">\n    <button class="silver back">Back</button>\n    <button class="blue next">Save and Continue</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/retirementSpending", n), n
    }), define("hbs!views/retirementPlanning/retirementSpendingBubble", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += 'Retirement Spending\n<div class="strong">' + f((o = n.money || t && t.money, u = {
                hash: {}
            }, o ? o.call(t, t && t.amount, 0, u) : a.call(t, "money", t && t.amount, 0, u))) + "/year</div>\n", s
        });
        return t.registerPartial("views/retirementPlanning/retirementSpendingBubble", n), n
    }), define("views/retirementPlanning/retirementSpendingView", ["underscore", "common/betterment.views", "components/common/scripts/util/handlebarsHelpers", "hbs!views/retirementPlanning/retirementSpending", "hbs!views/retirementPlanning/annualIncomeBubble", "hbs!views/retirementPlanning/retirementSpendingBubble", "components/common/scripts/services/projectorService", "components/common/scripts/util/formatter", "models/v2/zipCode"], function(e, t, n, r, i, s, o, u, a) {
        return t.View.extend({
            template: r,
            className: "retirement-spending-step",
            ui: {
                bigArrow: ".arrow-big",
                resetContainer: ".retirement-spending-summary .reset",
                howWeCalculatedContainer: ".how-we-calculated-container",
                howWeCalculated: ".how-we-calculated",
                desiredRetirementInput: "input.amount-per-year",
                retirementZipInput: ".inline-editable [display][data-property=retirementZip]",
                annualSalaryPercentGrowthInput: ".inline-editable [display][data-property=annualSalaryPercentGrowth]",
                incomeReplacementRatioInput: ".inline-editable [display][data-property=incomeReplacementRatio]",
                summaryToday: ".summary .today",
                summaryFuture: ".summary .future",
                nextButton: "button.next",
                raisePlusInflation: ".raise-plus-inflation"
            },
            triggers: {
                "click button.back": "back"
            },
            events: {
                "keydown @ui.desiredRetirementInput": "formatDecimal",
                "keyup @ui.desiredRetirementInput": "consumptionInputChanged",
                "keydown .zip-code input[input]": "restrictZipLength",
                "click .reset button": "resetConsumptionInput",
                "click .calculated-row .row-header": "toggleExplanation",
                "click .inline-editable [display]": "editField",
                "click @ui.nextButton": "next"
            },
            editable: {
                retirementZip: {
                    section: ".zip-code",
                    validate: function(e) {
                        if (!e) throw "Please enter a retirement zip code.";
                        if (!/^[a-zA-Z0-9]{5}$/.test(e)) throw "Please enter a 5 character zip code.";
                        return !0
                    }
                },
                annualSalaryPercentGrowth: {
                    section: ".annual-raise",
                    formatter: {
                        "in": function(e) {
                            return e
                        },
                        out: function(e) {
                            return u.integer(e) + "%"
                        }
                    },
                    validate: function(e) {
                        var t = parseFloat(e);
                        if (e === "" || isNaN(t)) throw "Please enter a percentage.";
                        if (t < 0 || t > 100) throw "Please enter a value between 0 and 100.";
                        return !0
                    }
                },
                incomeReplacementRatio: {
                    section: ".income-replacement-ratio",
                    formatter: {
                        "in": function(e) {
                            return e
                        },
                        out: function(e) {
                            return u.pctTrimZeros(e / 100, 0)
                        }
                    }
                }
            },
            templateHelpers: {
                isMarried: function() {
                    return this.self.profile.isMarried()
                },
                spouseName: function() {
                    return this.self.profile.get("spouseName")
                },
                grossIncome: function() {
                    return this.self.profile.grossIncome()
                },
                retirementZip: function() {
                    return this.self.plan.get("retirementZip")
                },
                annualSalaryPercentGrowth: function() {
                    return this.self.profile.num("annualSalaryPercentGrowth")
                },
                expectedInflation: function() {
                    return this.self.profile.num("expectedInflation")
                },
                yearsUntilRetirement: function() {
                    return this.self.plan.num("retirementAge") - this.self.profile.getAge()
                },
                yearOfRetirement: function() {
                    return (new Date).getFullYear() + this.yearsUntilRetirement()
                },
                spendingLink: {
                    url: "https://www.aeaweb.org/articles.php?doi=10.1257/mac.6.4.107",
                    text: "Read more >"
                }
            },
            onInitialize: function() {
                this.profile = this.options.profile, this.plan = this.options.plan
            },
            onRender: function() {
                this.options.bubbles.toggle("spouse", !1), this.options.bubbles.content("user", i({
                    name: BMT.user.get("firstName") + (this.profile.isMarried() ? " & " + this.profile.get("spouseName") : ""),
                    income: this.formatter.money(this.profile.grossIncome(), 0),
                    hasIncome: !0
                })), this.block(), this.loadZipData().then(this.showInitialState)
            },
            showInitialState: function() {
                this.plan.has("desiredRetirementIncomeCents") && this.plan.dollars("desiredRetirementIncome") !== this.getDesiredRetirementSpending() ? (this.toggleResetButton(!0),  this.redraw(!1)) : this.recalculateConsumption(!1), this.unblock()
            },
            toggleExplanation: function(e) {
                var t = $(e.currentTarget),
                    n = t.find(".arrow"),
                    r = t.siblings(".explanation");
                this.flipSection(n, r)
            },
            flipSection: function(t, n, r) {
                var i = e.isUndefined(r) ? n.is(":visible") : !r;
                i ? (t.transition({
                    rotate: "90deg"
                }), n.slideUp()) : (t.transition({
                    rotate: "270deg"
                }), n.slideDown())
            },
            editField: function(e) {
                e.stopPropagation();
                var t = $(e.currentTarget).data("property"),
                    n = $(e.currentTarget).data("model"),
                    r = this.editables[t];
                return r.edit(), this.listenToOnce(r, "save", function(e) {
                    this[n].set(t, t === "incomeReplacementRatio" ? e / 100 : e), this.hideError(t), this.recalculateConsumption()
                }), this.listenToOnce(r, "error", function(e) {
                    this.showError(t, e)
                }), r
            },
            restrictZipLength: function(e) {
                return this.restrictLength(e, 5)
            },
            consumptionInputChanged: e.debounce(function(e) {
                var t = $(e.currentTarget).numberVal();
                t !== 0 && (this.plan.dollars("desiredRetirementIncome", t), this.toggleResetButton(!0), this.options.bubbles.content("spending", s({
                    amount: t
                })))
            }, 350),
            resetConsumptionInput: function(e) {
                this.block(), this.recalculateConsumption(!0).then(this.unblock.bind(this)), this.toggleResetButton(!1)
            },
            toggleResetButton: function(e) {
                e ? this.ui.resetContainer.removeClass("inactive") : this.ui.resetContainer.addClass("inactive")
            },
            loadZipData: function() {
                return this.zipCode = new a({
                    zip: BMT.user.get("zip")
                }), this.zipCode.fetch().always(function() {
                    return this.retirementZipCode = this.zipCode.clone(), this.zipCode
                }.bind(this))
            },
            loadRetirementZipData: function() {
                return this.retirementZipCode = new a({
                    zip: this.plan.get("retirementZip")
                }), this.retirementZipCode.fetch().fail(function() {
                    this.showError("retirementZip", "Could not load data for your zip code.")
                }.bind(this))
            },
            recalculateConsumption: function(e) {
                return e && (this.profile.restoreDefaults("annualSalaryPercentGrowth"), this.plan.restoreDefaults("retirementZip", "incomeReplacementRatio")), this.loadRetirementZipData().then(function() {
                    this.plan.dollars("desiredRetirementIncome", this.getDesiredRetirementSpending()), this.redraw(e)
                }.bind(this))
            },
            getDesiredRetirementSpending: function() {
                return o.getRecommendedRetirementConsumption({
                    retirementAge: this.plan.get("retirementAge"),
                    deathAge: this.plan.get("lifeExpectancy"),
                    currentAge: this.profile.getAge(),
                    grossIncome: this.profile.grossIncome(),
                    salaryGrowth: this.profile.num("annualSalaryPercentGrowth"),
                    costOfLivingIndex: this.zipCode.num("costOfLivingIndex"),
                    retirementCostOfLivingIndex: this.retirementZipCode.num("costOfLivingIndex"),
                    marginalPropensityToConsumeOverride: this.plan.get("incomeReplacementRatio") || undefined,
                    state: BMT.user.get("state"),
                    inflation: 0
                })
            },
            getMarginalPropensityToConsume: function() {
                var e = this.plan.get("retirementAge") - this.profile.getAge(),
                    t = o.futureDollars(this.profile.grossIncome(), e, this.profile.num("annualSalaryPercentGrowth")),
                    n = o.calculateAverageTaxRate({
                        grossIncome: t,
                        state: BMT.user.get("state")
                    }),
                    r = t * (1 - n);
                return o.calculateMarginalPropensityToConsume(r, this.zipCode.num("costOfLivingIndex"))
            },
            isUsingDefaultAssumptions: function() {
                return this.profile.num("annualSalaryPercentGrowth") === this.profile.defaults().annualSalaryPercentGrowth && this.plan.get("retirementZip") === this.plan.defaults().retirementZip && this.plan.get("incomeReplacementRatio") === null
            },
            showError: function(e, t) {
                this.$(".error[data-field=" + e + "]").text(t).slideDown()
            },
            hideError: function(e) {
                this.$(".error[data-field=" + e + "]").slideUp()
            },
            redraw: function(e) {
                var t = this.plan.dollars("desiredRetirementIncome"),
                    n = this.plan.num("retirementAge") - this.profile.getAge(),
                    r = o.futureDollars(t, n),
                    i = this.plan.get("incomeReplacementRatio") || this.getMarginalPropensityToConsume();
                this.ui.desiredRetirementInput.val(this.formatter.number(t, 0, ",")), this.ui.summaryToday.text(this.formatter.money(t, 0) + "/year"), this.ui.summaryFuture.text(this.formatter.money(r, 0) + "/year"), e && (this.ui.retirementZipInput.text(this.plan.get("retirementZip")), this.ui.retirementZipInput.siblings("[editable]").data("current", this.plan.get("retirementZip")), this.ui.annualSalaryPercentGrowthInput.text(this.formatter.integer(this.profile.num("annualSalaryPercentGrowth")) + "%"), this.ui.annualSalaryPercentGrowthInput.siblings("[editable]").data("current", this.formatter.integer(this.profile.num("annualSalaryPercentGrowth")))), this.ui.incomeReplacementRatioInput.text(this.formatter.pctTrimZeros(i, 0)), this.ui.incomeReplacementRatioInput.siblings("[editable]").data("current", this.formatter.integer(i * 100)), this.options.bubbles.content("spending", s({
                    amount: t
                })), this.ui.raisePlusInflation.text(this.profile.num("expectedInflation") + this.profile.num("annualSalaryPercentGrowth") + "%"), this.options.bubbles.toggle("spending", !0)
            },
            next: function() {
                this.plan.setComplete(), this.profile.setComplete(), this.trigger("next")
            }
        })
    }), define("hbs!views/retirementPlanning/retirementAge", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += " and ", (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i), r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="question retirement-age">\n    <h1>At what age would you', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += ' like to retire?</h1>\n    <p>An estimate is fine - you can update this later.</p>\n\n    <div class="inputs">\n        <div class="retired-toggler">\n            <label>', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n            <div class="choice-wrapper">\n                <a class="choice not-retired">Not Retired</a>\n                <a class="choice retired">Retired</a>\n            </div>\n        </div>\n\n        <div class="age-input">\n            <label>Your retirement age</label>\n            <input type="text" name="retirementAge" value="', (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n        </div>\n\n        <div class="error"></div>\n    </div>\n</div>\n\n<div class="question spouse-retirement-age">\n    <div class="inputs">\n        <div class="retired-toggler">\n            <label>', (u = n.spouseName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</label>\n            <div class="choice-wrapper">\n                <a class="choice not-retired">Not Retired</a>\n                <a class="choice retired">Retired</a>\n            </div>\n        </div>\n\n        <div class="age-input">\n            <label>', (u = n.spouseName) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseName, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\'s retirement age</label>\n            <input type="text" name="spouseRetirementAge" value="', (u = n.spouseRetirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseRetirementAge, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" />\n        </div>\n\n        <div class="error"></div>\n    </div>\n</div>\n\n<div class="buttons">\n    <button class="silver back">Back</button>\n    <button class="blue next">Save and Continue</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/retirementAge", n), n
    }), define("hbs!views/retirementPlanning/retirementAgeBubble", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return '\n    <div class="strong">retired</div>\n'
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="strong">', (s = n.retirementAge) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.retirementAge, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</div>\n    Retirement Age\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            (u = n.name) ? o = u.call(t, {
                hash: {}
            }): (u = t && t.name, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n", o = n["if"].call(t, t && t.isRetired, {
                hash: {},
                inverse: l.program(3, h, i),
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/retirementAgeBubble", n), n
    }), define("hbs!views/retirementPlanning/retirementAgeModal", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<h1>You\'re retired? That\'s great!</h1>\n<div class="body">\n    <p class="unadvised-user-only">\n        BetaSmartz is great for retirees, but this retirement planning tool is only useful if you are not yet retired.\n    </p>\n    <p class="advised-user-only">\n        This service is great for retirees, but this retirement planning tool is only useful if you are not yet retired.\n    </p>\n    <p>\n        If you are retired already and would like draw income from your investments, use the Advice tab to create a\n        Retirement Income goal or change the type of an existing goal to Retirement Income. <span class="unadvised-user-only">' + f((o = n.link || t && t.link, u = {
                hash: {}
            }, o ? o.call(t, t && t.retireeFAQLink, u) : a.call(t, "link", t && t.retireeFAQLink, u))) + '</span>\n    </p>\n\n</div>\n<div class="buttons">\n    <button class="blue ok">Continue to Retiree Advice</button>\n    <button class="silver cancel">Cancel</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/retirementAgeModal", n), n
    }), define("views/retirementPlanning/retirementAgeModalView", ["common/betterment.views", "hbs!views/retirementPlanning/retirementAgeModal", "components/common/scripts/services/domainService"], function(e, t, n) {
        return e.ModalView.extend({
            template: t,
            className: "retirement-age-modal",
            events: {
                "click .cancel": "onCancel",
                "click .ok": "onOk"
            },
            templateHelpers: {
                retireeFAQLink: {
                    text: "Learn how >",
                    url: n.getBaseSupportUrl() + "/customer/portal/articles/1485381-how-do-i-create-or-switch-to-a-retirement-income-goal-"
                }
            },
            onCancel: function() {
                BMT.modal.close(this), this.trigger("cancel")
            },
            onOk: function() {
                BMT.modal.close(this), this.trigger("ok")
            }
        })
    }), define("views/retirementPlanning/retirementAgeView", ["common/betterment.views", "hbs!views/retirementPlanning/retirementAge", "hbs!views/retirementPlanning/retirementAgeBubble", "views/retirementPlanning/retirementAgeModalView", "components/account/scripts/constants/retirementConstants"], function(e, t, n, r, i) {
        return e.View.extend({
            className: "retirement-age-step",
            template: t,
            ui: {
                userQuestion: ".question.retirement-age",
                spouseQuestion: ".question.spouse-retirement-age",
                retiredTogglers: ".retired-toggler",
                retirementAge: "[name=retirementAge]",
                spouseRetirementAge: "[name=spouseRetirementAge]",
                spouseRetirementAgeWrapper: ".question.spouse-retirement-age .age-input",
                userError: ".question.retirement-age .error",
                spouseError: ".question.spouse-retirement-age .error"
            },
            triggers: {
                "click .back": "back"
            },
            events: {
                "click .retired-toggler .choice": "retirementStatusSelected",
                "blur @ui.retirementAge, @ui.spouseRetirementAge": "updateBubbles",
                "click .next": "next"
            },
            templateHelpers: {
                name: function() {
                    return BMT.user.get("firstName")
                },
                isMarried: function() {
                    return this.self.profile.isMarried()
                },
                spouseName: function() {
                    return this.self.profile.get("spouseName")
                },
                retirementAge: function() {
                    return this.self.plan.getRetirementAgeOrDefault()
                },
                spouseRetirementAge: function() {
                    return this.self.plan.getSpouseRetirementAgeOrDefault()
                }
            },
            onInitialize: function() {
                this.profile = this.options.profile, this.plan = this.options.plan
            },
            onShow: function() {
                this.profile.isMarried() && this.ui.spouseQuestion.fadeIn(), this.options.bubbles.sub("user", !1), this._initRetirementStatus(this.ui.userQuestion, this.profile.is("retired")), this._initRetirementStatus(this.ui.spouseQuestion, this.profile.is("spouseRetired"))
            },
            updateBubbles: function() {
                this.options.bubbles.content("user", n({
                    name: BMT.user.get("firstName"),
                    isRetired: this.isUserRetired(),
                    retirementAge: this.getUserRetirementAge()
                }));
                var e = !1;
                this.profile.isMarried() && (e = n({
                    name: this.profile.get("spouseName"),
                    isRetired: this.isSpouseRetired(),
                    retirementAge: this.getSpouseRetirementAge()
                })), this.options.bubbles.content("spouse", e)
            },
            retirementStatusSelected: function(e) {
                this._chooseRetirementStatus($(e.currentTarget))
            },
            getProfileValues: function() {
                return {
                    retired: this.isUserRetired(),
                    spouseRetired: this.isSpouseRetired()
                }
            },
            getPlanValues: function() {
                return {
                    retirementAge: this.getUserRetirementAge(),
                    spouseRetirementAge: this.isSpouseRetired() ? this.profile.getSpouseAge() : this.getSpouseRetirementAge()
                }
            },
            isValid: function() {
                var e = !0,
                    t = this.plan.validate(this.getPlanValues());
                return this.clearErrors(), t ? (t.retirementAge && (this.ui.userError.text(t.retirementAge).slideDown(), e = !1), t.spouseRetirementAge && (this.ui.spouseError.text(t.spouseRetirementAge).slideDown(), e = !1), e) : e
            },
            clearErrors: function() {
                this.ui.userError.slideUp(), this.ui.spouseError.slideUp()
            },
            isUserRetired: function() {
                return this.ui.userQuestion.find(".retired-toggler .choice.active").is(".retired")
            },
            isSpouseRetired: function() {
                return this.profile.isMarried() ? this.ui.spouseQuestion.find(".retired-toggler .choice.active").is(".retired") : null
            },
            getUserRetirementAge: function() {
                return this.ui.retirementAge.numberVal()
            },
            getSpouseRetirementAge: function() {
                return this.profile.isMarried() ? this.ui.spouseRetirementAge.numberVal() : null
            },
            next: function() {
                if (!this.isValid()) return;
                this.profile.set(this.getProfileValues()), this.plan.set(this.getPlanValues()), this.trigger("next")
            },
            showModal: function() {
                var e = new r;
                this.listenTo(e, "cancel", function() {
                    this._chooseRetirementStatus(this.ui.userQuestion.find(".choice.not-retired"))
                }.bind(this)), this.listenTo(e, "ok", BMT.router.navigate.bind(null, "advice", !0)), BMT.modal.show(e)
            },
            _initRetirementStatus: function(e, t) {
                var n = e.find(t ? ".choice.retired" : ".choice.not-retired");
                this._chooseRetirementStatus(n)
            },
            _chooseRetirementStatus: function(e) {
                var t = e.closest(".retired-toggler");
                t.find(".choice").removeClass("active"), e.addClass("active"), t.toggleClass("expanded", e.hasClass("retired")), this.isUserRetired() && this.showModal(), this.ui.spouseRetirementAgeWrapper.toggleClass("invisible", this.isSpouseRetired()), this.updateBubbles()
            }
        })
    }), define("views/retirementPlanning/setupView", ["jquery", "common/betterment.views", "common/betterment.models", "hbs!views/retirementPlanning/setup", "components/common/scripts/modules/async", "components/common/scripts/analytics/analytics", "views/retirementPlanning/sharedHeaderView", "components/progressNav/scripts/progressNavView", "views/retirementPlanning/bubblesView", "views/retirementPlanning/personalDetailsView", "views/retirementPlanning/annualIncomeView", "views/retirementPlanning/accountsView", "views/retirementPlanning/retirementSpendingView", "views/retirementPlanning/retirementAgeView"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        return t.View.extend({
            className: "retirement-plan-setup panel card",
            template: r,
            regions: {
                headerRegion: ".header-region",
                progressRegion: ".progress-container",
                bubblesRegion: ".bubbles",
                questionsRegion: ".questions"
            },
            ui: {
                progressMeter: ".inner-bar"
            },
            steps: [{
                label: "Personal Details",
                view: f
            }, {
                label: "Annual Income",
                view: l
            }, {
                label: "Retirement Age",
                view: p
            }, {
                label: "Retirement Saving",
                view: c
            }, {
                label: "Retirement Spending",
                view: h
            }],
            onRender: function() {
                this.preloadStart(), this.loadDependencies().always(function() {
                    this.preloadComplete(), this.renderRegions()
                }.bind(this))
            },
            loadDependencies: function() {
                return this.financialProfile = BMT.user.getFinancialProfile(), this.financialPlan = BMT.user.get("financialPlans").selected(), i.whenAll([this.financialProfile.fetch(), this.financialPlan.fetch()])
            },
            transition: function(e, t, n) {
                e.animate({
                    opacity: 0
                }, 250, function() {
                    t.show(n), e.animate({
                        opacity: 1
                    }, 250)
                }.bind(this))
            },
            renderRegions: function() {
                this.headerRegion.show(new o), this.progressView = new u({
                    steps: this.steps
                }), this.progressRegion.show(this.progressView), this.bubblesView = new a, this.bubblesRegion.show(this.bubblesView), this.showStep(this.getStartStep() - 1)
            },
            showStep: function(e) {
                BMT.router.navigate("retireGuideSetup/" + (e + 1)), this.progressView.setActiveStep(e);
                var t = this.steps[e].view,
                    n = new t({
                        profile: this.financialProfile,
                        plan: this.financialPlan,
                        bubbles: this.bubblesView
                    });
                this.listenTo(n, "next", function() {
                    this.handleNext(e, n)
                }), this.listenTo(n, "back", function() {
                    e > 0 ? this.showStep(e - 1) : this.goBack()
                }), this.questionsRegion.hasView() ? this.transition(this.questionsRegion.$el, this.questionsRegion, n) : this.questionsRegion.show(n), BMT.scrollToTop({
                    scrollTop: 125
                }), s.track("ElementViewed", {
                    Name: this.steps[e].label.replace(/ /g, ""),
                    Location: "Plan"
                })
            },
            handleNext: function(t, n) {
                this.block(), e.when(n.triggerMethod("beforeSave")).then(function() {
                    i.whenAll([this.financialProfile.save(), this.financialPlan.save()]).then(function() {
                        return e.when(n.triggerMethod("afterSave"))
                    }).then(function() {
                        this.unblock(), this.steps[t + 1] ? this.showStep(t + 1) : this.goToPlan()
                    }.bind(this))
                }.bind(this))
            },
            getStartStep: function() {
                var e = this.options.startStep;
                return !e || e < 1 || e > this.steps.length ? 1 : e
            },
            goToPlan: function() {
                BMT.scrollToTop(), BMT.router.navigate("retireGuide", !0)
            },
            goBack: function() {
                this.options.welcomeFlow ? BMT.router.navigate("retireGuideStart", !0) : BMT.router.navigate("advice", !0)
            }
        })
    }), define("hbs!views/retirementPlanning/plan", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header-region"></div>\n<div class="summary"></div>\n<nav>\n    <div class="nav-wrapper">\n        <ul class="main-nav">\n            <li class="projection depressed"><a>Projection</a></li>\n            <li class="how-to-save"><a>What to do</a></li>\n            <li class="actions"><a>Make it happen</a></li>\n        </ul>\n        <div class="edit-assumptions-container">\n            <button class="silver edit-assumptions">Edit Assumptions</button>\n        </div>\n    </div>\n</nav>\n<div class="edit-assumptions-region"></div>\n<div class="content clearfix"></div>\n'
        });
        return t.registerPartial("views/retirementPlanning/plan", n), n
    }), define("hbs!views/retirementPlanning/planSummary", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                return "Your spouse will start Age Pension at their retirement age."
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression,
                c = "function",
                h = this;
            s += '<h3>Summary <a class="toggle-calculated">How is this calculated <span class="arrow">›</span></a></h3>\n<div class="how-we-calculated">\n    <h1>How is this calculated</h1>\n\n    <p>To calculate how much you should save each year, we first calculate how much you need in total at your selected retirement age\n    in order to provide the level of spending you desire (adjusted for inflation). This includes a Age Pension estimate and any other\n    income specified by you in the assumptions. From this, we determine how much you\'ll need to save each month from now until retirement\n    by assuming a 60% likelihood of the portfolio reaching its goal target. You can change your retirement date to see different savings\n    amounts. In these calculations we assume a moderate risk portfolio of stocks and bonds according to our allocation recommendations.</p>\n\n    <p>Don\'t think these assumptions are right for you? You can edit them below.</p>\n</div>\n<p class="savings-required">\n    To spend\n    <a href="#retireGuideSetup/5" class="highlight-blue tooltipped">\n        <span class="help-content">\n            Retirement spending after taxes, in today\'s dollars. Click to edit using the spending calculator.\n        </span>\n        ', o = (u = n.retirementAnnualConsumption || t && t.retirementAnnualConsumption, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "retirementAnnualConsumption", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + "/year</a>\n    in retirement, you ", (u = n.spouseNameWithAnd) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.spouseNameWithAnd, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ' should save<br/>\n    <span class="highlight-green suggested-annual-contribution tooltipped">\n        <span class="help-content">\n            Based on your profile, current balance, and the assumptions below. Click "How is this calculated" on the right for details.\n        </span>\n        ', o = (u = n.annualContribution || t && t.annualContribution, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "annualContribution", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + '/year</span>\n    if you want to retire at\n    <span class="highlight-blue tooltipped">\n        <span class="help-content">\n            This is the age we assume you start portfolio withdrawals and Age Pension.\n            ', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            s += '\n        </span>\n        age <span class="desired-retirement-age">', (u = n.desiredRetirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.desiredRetirementAge, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</span></span>.\n</p>\n<p class="savings-not-required">\n    Congratulations, your current savings and expected Age Pension will provide at least\n    <a href="#retireGuideSetup/5" class="highlight-blue tooltipped">\n        <span class="help-content">\n            Retirement spending after taxes, on today\'s dollars. Click to edit using the spending calculator.\n        </span>\n        ', o = (u = n.retirementAnnualConsumption || t && t.retirementAnnualConsumption, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "retirementAnnualConsumption", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + '/year</a>\n    in retirement spending starting at\n    <span class="highlight-blue tooltipped">\n        <span class="help-content">\n            This is the age we assume you start portfolio withdrawals and Age Pension.\n            ', o = n["if"].call(t, t && t.isMarried, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += '\n        </span>\n        age <span class="desired-retirement-age">', (u = n.desiredRetirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.desiredRetirementAge, o = typeof u === c ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</span>\n    </span>.\n</p>\n", s
        });
        return t.registerPartial("views/retirementPlanning/planSummary", n), n
    }), define("views/retirementPlanning/planSummaryView", ["common/betterment.views", "hbs!views/retirementPlanning/planSummary"], function(e, t) {
        return e.View.extend({
            template: t,
            events: {
                "click .toggle-calculated": "toggleHowWeCalculated"
            },
            ui: {
                savingsRequired: ".savings-required",
                savingsNotRequired: ".savings-not-required",
                toggleCalculated: ".toggle-calculated",
                howWeCalculated: ".how-we-calculated"
            },
            toolTips: {
                ".tooltipped": {
                    position: {
                        my: "bottom center",
                        at: "at center",
                        adjust: {
                            y: -15
                        }
                    }
                }
            },
            templateHelpers: {
                financialProfile: function() {
                    return this.self.options.retirementPlan.get("financialProfile")
                },
                financialPlan: function() {
                    return this.self.options.retirementPlan.get("financialPlan")
                },
                retirementAnnualConsumption: function() {
                    return this.financialPlan().dollars("desiredRetirementIncome")
                },
                spouseNameWithAnd: function() {
                    return this.financialProfile().get("spouseName") ? "and " + this.financialProfile().get("spouseName") : ""
                },
                annualContribution: function() {
                    return this.self.options.retirementPlan.getRecommendedYearlySavings()
                },
                desiredRetirementAge: function() {
                    return this.financialPlan().num("retirementAge")
                },
                isMarried: function() {
                    return this.financialProfile().isMarried()
                }
            },
            onInitialize: function() {
                this.listenTo(this.options.retirementPlan, "change", this.render)
            },
            onRender: function() {
                var e = this.options.retirementPlan.getRecommendedYearlySavings() > 0;
                this.ui.savingsRequired.toggle(e), this.ui.savingsNotRequired.toggle(!e)
            },
            toggleHowWeCalculated: function() {
                this.ui.howWeCalculated.slideToggle(), this.ui.toggleCalculated.toggleClass("expanded")
            }
        })
    }), define("hbs!views/retirementPlanning/projection", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += "\n            <h3>", (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '\'s Retirement Age</h3>\n            <div class="value highlight-blue spouse-retirement-age-region"></div>\n        ', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '<div class="tip">\n    <div class="save-more">We recommend increasing your annual savings to <span class="highlight-green"><span class="recommended-savings"></span>/year</span>, choosing a later retirement age, or reducing spending needs.  Once you have settled on an age and savings rate, use <a class="highlight-blue next">What to do</a> to see the best accounts to use.</div>\n    <div class="saving-enough">You are currently saving enough! Use <a class="highlight-blue next">What to do</a> to make sure you are saving in the best accounts.</div>\n    <div class="saved-enough">Your current retirement balance will allow you to retire at <span class="highlight-blue">age <span class="desired-retirement-age">', (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</span></span>.  You might want to retire earlier.</div>\n</div>\n\n<div class="upper">\n    <div class="left">\n        <div class="current-savings-region"></div>\n\n        <h3>Your Retirement Age</h3>\n        <div class="value highlight-blue user-retirement-age-region"></div>\n\n        ', o = n["if"].call(t, t && t.showSpouseRetirementAge, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n        <h3 class="social-security-title">\n            Age Pension Benefit\n            <div class="help-icon social-security">\n                <span class="help-content">\n                </span>\n            </div>\n        </h3>\n        <div class="value">\n            <div class="social-security-selector"></div>\n        </div>\n\n    </div>\n\n    <div class="right">\n\n        <h2 class="graph-title">Annual Spending at Retirement (today\'s dollars)</h2>\n\n        <div class="graph-region"></div>\n\n        <a class="expand-regulatory">What do "likely" and "conservative" mean? <span class="arrow">&rsaquo;</span></a>\n\n        <div class="expandable regulatory">\n            <p>"Likely" represents a 60% likelihood of the portfolio reaching its goal target, which is more conservative\n            than the average probability.</p>\n\n            <p>"Conservative" represents a 97.5% likelihood of the portfolio reaching its goal target, which approximates\n            a cautious "worst case" approach.</p>\n        </div>\n\n        <p class="unadvised-user-only regulatory">Projections and advice assume expected returns and volatility of BetaSmartz\'s portfolio.\n        If your non-BetaSmartz accounts are not invested similarly to BetaSmartz\'s portfolio, our advice will likely not be\n        accurate for your personal situation. ' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.projectionDisclaimerLink, a) : h.call(t, "link", t && t.projectionDisclaimerLink, a))) + '</p>\n\n        <p class="advised-user-only regulatory">Projections and advice assume expected returns and volatility of this portfolio.\n        If your external accounts are not invested similarly to this portfolio, our advice will likely not be\n        accurate for your personal situation. ' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.projectionDisclaimerLink, a) : h.call(t, "link", t && t.projectionDisclaimerLink, a))) + '</p>\n    </div>\n</div>\n\n<div class="lower">\n    <button class="back-to-profile silver">Back to Profile</button>\n    <button class="next">Continue to What to do</button>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/projection", n), n
    }), define("hbs!views/retirementPlanning/socialSecurityTooltip", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s, o;
                return r += "\n    ", (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + " will have Age Pension of " + l((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, e && e.spouseAnnualAmount, 0, o) : c.call(e, "money", e && e.spouseAnnualAmount, 0, o))) + "/year starting at\n    age ", (s = n.spouseRetirementAge) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseRetirementAge, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + ".\n", r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing,
                h = this;
            s += "We estimate based on your age and income that you will have Age Pension of " + l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, t && t.annualAmount, 0, a) : c.call(t, "money", t && t.annualAmount, 0, a))) + "/year,\nstarting at age ", (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + ".\n\n", o = n["if"].call(t, t && t.married, {
                hash: {},
                inverse: h.noop,
                fn: h.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += "\n\nGiven the changes to the Age Pension system, BetaSmartz estimates that only\n3/4 benefits may be available to younger earners.\n", s
        });
        return t.registerPartial("views/retirementPlanning/socialSecurityTooltip", n), n
    }), define("hbs!views/retirementPlanning/projection/currentSavings", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing,
                l = this.escapeExpression;
            return s += '<div class="current-savings">\n    <h3>Current Savings</h3>\n    <div class="value">\n        <div class="yearly-savings per-year"></div>\n        <div class="total-balance">Total Balance ', o = (u = n.totalSavings || t && t.totalSavings, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "totalSavings", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + '</div>\n    </div>\n    <span class="help-content">\n        Current annual savings and balance for retirement across all accounts, as provided by you. Click to edit your account balances and contributions.\n    </span>\n</div>\n\n<div class="savings-slider-container">\n    <div class="savings-slider">\n        <div class="recommended-area"></div>\n    </div>\n    <a class="reset-x-icon reset" data-help-content="Reset"></a>\n    <div class="labels">\n        <div class="current">\n            <div class="slider-label">Current</div>\n            <div class="slider-value per-year">', o = (u = n.yearlySavings || t && t.yearlySavings, a = {
                hash: {}
            }, u ? u.call(t, a) : f.call(t, "yearlySavings", a)), s += l((u = n.money || t && t.money, a = {
                hash: {}
            }, u ? u.call(t, o, 0, a) : f.call(t, "money", o, 0, a))) + '</div>\n        </div>\n        <div class="recommended">\n            <div class="slider-label">Recommended</div>\n            <div class="slider-value per-year"></div>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/projection/currentSavings", n), n
    }), define("views/retirementPlanning/projection/currentSavingsView", ["common/betterment.views", "hbs!views/retirementPlanning/projection/currentSavings"], function(e, t) {
        return e.View.extend({
            template: t,
            ui: {
                currentSavings: ".current-savings",
                currentSavingsAmount: ".current-savings .yearly-savings",
                sliderContainer: ".savings-slider-container",
                sliderLabelRecommended: ".savings-slider-container .labels .recommended .slider-value",
                sliderRecommendedArea: ".savings-slider-container .recommended-area",
                resetSavingsSlider: ".savings-slider-container .reset"
            },
            events: {
                "click @ui.currentSavings": "backToAccountsSetup",
                "click @ui.resetSavingsSlider": "resetSavingsSlider"
            },
            templateHelpers: {
                totalSavings: function() {
                    return this.self.model.getTotalSavings()
                },
                yearlySavings: function() {
                    return this.self.model.getYearlySavings()
                }
            },
            toolTips: {
                ".current-savings": {
                    position: {
                        my: "center left",
                        at: "center right",
                        adjust: {
                            x: -40
                        }
                    },
                    show: {
                        event: "mouseenter"
                    },
                    hide: {
                        event: "mouseleave"
                    }
                }
            },
            onShow: function() {
                this.renderSlider(), this.update()
            },
            renderSlider: function() {
                this.$slider = this.slider(".savings-slider", {
                    slide: function(e, t) {
                        this.selectedSavings = Math.round($.numberVal(t.value)), this.trigger("slide")
                    }.bind(this),
                    stop: function(e, t) {
                        this.trigger("stop")
                    }.bind(this)
                })
            },
            update: function() {
                this.ui.currentSavingsAmount.text(this.formatter.money(Math.round(this.getSelectedYearlySavings()), 0)), this.updateSlider()
            },
            updateSlider: function() {
                var e = this.getSliderBounds();
                if (e.min === 0 && e.max === 0) {
                    this.ui.sliderContainer.hide();
                    return
                }
                this.ui.sliderContainer.show(), this.$slider.slider("option", "min", e.min), this.$slider.slider("option", "max", e.max), this.$slider.slider("option", "step", (e.max - e.min) / 100), this.$slider.slider("value", this.getSelectedYearlySavings());
                var t = Math.round(this.model.getRecommendedYearlySavings());
                this.ui.sliderLabelRecommended.text(this.formatter.money(t, 0));
                var n = (t - e.min) / (e.max - e.min) * this.$slider.width();
                this.ui.sliderRecommendedArea.css("left", Math.round(n) + "px"), this.ui.resetSavingsSlider.toggle(this.getSelectedYearlySavings() !== this.model.getYearlySavings())
            },
            resetSavingsSlider: function() {
                var e = this.model.getYearlySavings();
                this.$slider.slider("value", e), this.selectedSavings = e, this.trigger("stop", e)
            },
            getSliderBounds: function() {
                var e = this.model.getYearlySavings(),
                    t = this.model.getRecommendedYearlySavings();
                return e === 0 && t <= 0 ? {
                    min: 0,
                    max: 0
                } : {
                    min: Math.round(.7 * Math.min(e, t)),
                    max: Math.round(1.5 * Math.max(e, t))
                }
            },
            getSelectedYearlySavings: function() {
                return this.selectedSavings !== undefined ? this.selectedSavings : this.model.getYearlySavings()
            },
            backToAccountsSetup: function() {
                BMT.router.navigate("retireGuideSetup/4", !0)
            }
        })
    }), define("hbs!views/retirementPlanning/projection/retirementAge", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += 'Age\n<span class="edit-retirement-age inline-editable">\n    <span display>', (u = n.retirementAge) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.retirementAge, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span>\n    <span editable><input type="text" /></span>\n    <div class="error"></div>\n</span>\n', s
        });
        return t.registerPartial("views/retirementPlanning/projection/retirementAge", n), n
    }), define("views/retirementPlanning/projection/retirementAgeView", ["common/betterment.views", "hbs!views/retirementPlanning/projection/retirementAge"], function(e, t) {
        return e.View.extend({
            template: t,
            ui: {
                error: ".edit-retirement-age .error",
                editRetirementAge: ".edit-retirement-age [display]"
            },
            events: {
                "click @ui.editRetirementAge": "editRetirementAge"
            },
            templateHelpers: {
                retirementAge: function() {
                    return this.self.getInitialRetirementAge()
                }
            },
            editable: {
                retirementAge: {
                    section: ".edit-retirement-age",
                    initial: function() {
                        return this.getInitialRetirementAge()
                    },
                    validate: function(e) {
                        return this.validate($.numberVal(e))
                    }
                }
            },
            getInitialRetirementAge: function() {
                return this.model.num(this.options.fieldName)
            },
            editRetirementAge: function() {
                var e = this.editables.retirementAge;
                e.edit(), this.listenToOnce(e, "save", function(t) {
                    this.ui.error.hide(), t === "" ? e.reset() : (this.model.set(this.options.fieldName, $.numberVal(t)), this.trigger("changed"))
                }), this.listenToOnce(e, "error", function(e) {
                    this.ui.error.text(e).slideDown()
                })
            },
            validate: function(e) {
                var t = this.model.preValidate(this.options.fieldName, e);
                if (t) throw t;
                return !0
            }
        })
    }), define("hbs!views/retirementPlanning/projection/projectionGraph", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="graph-container">\n    <div class="current-savings">\n        <div class="average-bar">\n            <div class="poor-bar"></div>\n        </div>\n        <div class="goal-status">\n            <div class="on-track">On Track</div>\n            <div class="off-track">Off Track</div>\n        </div>\n        <div class="average-amount per-year"></div>\n        <div class="bar-label">Spending With<br />Current Savings</div>\n        <div class="help-content"></div>\n    </div>\n    <div class="recommended-savings">\n        <div class="average-bar">\n            <div class="poor-bar"></div>\n        </div>\n        <div class="average-amount per-year"></div>\n        <div class="bar-label">Spending With<br />Recommended Savings</div>\n        <div class="help-content"></div>\n    </div>\n\n    <div class="desired-spending">\n        <div class="spending-label">Desired Retirement Spending</div>\n        <div class="spending-line"></div>\n        <div class="spending-value per-year"></div>\n    </div>\n\n    <figure class="legend">\n        <ul>\n            <li class="average">Likely</li>\n            <li class="poor">Conservative</li>\n        </ul>\n    </figure>\n</div>\n'
        });
        return t.registerPartial("views/retirementPlanning/projection/projectionGraph", n), n
    }), define("hbs!views/retirementPlanning/projection/projectionGraphTooltip", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<p>Saving <span class="yearly-amount">' + f((o = n.money || t && t.money, u = {
                hash: {}
            }, o ? o.call(t, t && t.yearlyAmount, 0, u) : a.call(t, "money", t && t.yearlyAmount, 0, u))) + '/year</span> could result in a:</p>\n\n<figure class="legend">\n    <ul>\n        <li class="average">Likely chance of having <span class="average-amount">' + f((o = n.money || t && t.money, u = {
                hash: {}
            }, o ? o.call(t, t && t.averageAmount, 0, u) : a.call(t, "money", t && t.averageAmount, 0, u))) + '/year</span></li>\n        <li class="poor">Conservative chance of having <span class="poor-amount">' + f((o = n.money || t && t.money, u = {
                hash: {}
            }, o ? o.call(t, t && t.poorAmount, 0, u) : a.call(t, "money", t && t.poorAmount, 0, u))) + "/year</span></li>\n    </ul>\n</figure>\n", s
        });
        return t.registerPartial("views/retirementPlanning/projection/projectionGraphTooltip", n), n
    }), define("views/retirementPlanning/projection/projectionGraphView", ["underscore", "projector", "common/betterment.views", "hbs!views/retirementPlanning/projection/projectionGraph", "hbs!views/retirementPlanning/projection/projectionGraphTooltip", "components/common/scripts/services/projectorService"], function(e, t, n, r, i, s) {
        return n.View.extend({
            template: r,
            ui: {
                graph: ".graph-container",
                currentSavings: ".current-savings",
                recommendedSavings: ".recommended-savings",
                desiredSpending: ".desired-spending",
                desiredSpendingValue: ".desired-spending .spending-value",
                barLabels: ".bar-label",
                onTrack: ".current-savings .goal-status .on-track",
                offTrack: ".current-savings .goal-status .off-track"
            },
            toolTips: {
                ".current-savings": {
                    style: {
                        classes: "retirement-plan-graph-tooltip current"
                    },
                    position: {
                        my: "bottom center",
                        at: "top center",
                        adjust: {
                            y: -50
                        }
                    },
                    show: {
                        event: "mouseenter"
                    },
                    hide: {
                        event: "mouseleave"
                    }
                },
                ".recommended-savings": {
                    style: {
                        classes: "retirement-plan-graph-tooltip recommended"
                    },
                    position: {
                        my: "bottom center",
                        at: "top center",
                        adjust: {
                            y: -30
                        }
                    },
                    show: {
                        event: "mouseenter"
                    },
                    hide: {
                        event: "mouseleave"
                    }
                }
            },
            onInitialize: function() {
                this.retirementPlan = this.options.retirementPlan
            },
            onShow: function() {
                this.update()
            },
            update: function() {
                var e = this.getGraphComponents(),
                    t = this.getRelativeHeights(e);
                this.updateDesiredLine({
                    value: e.desiredSpending,
                    height: t.desiredSpending
                }), this.updateBar(this.ui.currentSavings, {
                    averageValue: e.withCurrentSavingsAverage,
                    averageHeight: t.withCurrentSavingsAverage,
                    poorHeight: t.withCurrentSavingsPoor
                }), this.updateBar(this.ui.recommendedSavings, {
                    averageValue: e.withRecommendedSavingsAverage,
                    averageHeight: t.withRecommendedSavingsAverage,
                    poorHeight: t.withRecommendedSavingsPoor
                }), this.updateOnTrack(), this.updateCurrentTooltip(e), this.updateRecommendedTooltip(e)
            },
            updateDesiredLine: function(e) {
                this.ui.desiredSpendingValue.text(this.formatter.money(e.value, 0));
                var t = this.ui.desiredSpendingValue.outerHeight(!0);
                this.ui.desiredSpending.css("bottom", e.height - t + "px")
            },
            updateBar: function(e, t) {
                e.find(".average-bar").css("height", t.averageHeight + "px"), e.find(".poor-bar").css("height", t.poorHeight + "px"), e.find(".average-amount").text(this.formatter.money(t.averageValue, 0)).css("bottom", t.averageHeight + 10 + "px"), e.find(".goal-status").css("bottom", t.averageHeight + e.find(".average-amount").height() + 20 + "px")
            },
            updateOnTrack: function() {
                var e = this.retirementPlan.notSavingEnough(this.getSelectedYearlySavings());
                this.ui.onTrack.toggle(!e), this.ui.offTrack.toggle(e)
            },
            updateCurrentTooltip: function(e) {
                this.$(".current-savings").qtip("option", "content.text", i({
                    opening: "With your current savings",
                    yearlyAmount: this.retirementPlan.getYearlySavings(),
                    averageAmount: e.withCurrentSavingsAverage,
                    poorAmount: e.withCurrentSavingsPoor
                }))
            },
            updateRecommendedTooltip: function(e) {
                this.$(".recommended-savings").qtip("option", "content.text", i({
                    opening: "If you take our recommended savings advice",
                    yearlyAmount: this.getRecommendedYearlySavings(),
                    averageAmount: e.withRecommendedSavingsAverage,
                    poorAmount: e.withRecommendedSavingsPoor
                }))
            },
            getGraphComponents: function() {
                var e = t.C.z60Pct,
                    n = t.C.z975Pct;
                return {
                    sliderMax: this.retirementPlan.getSpendingWithYearlySavings(this.options.parent.getSliderBounds().max, e),
                    withCurrentSavingsAverage: this.retirementPlan.getSpendingWithYearlySavings(this.getSelectedYearlySavings(), e),
                    withCurrentSavingsPoor: this.retirementPlan.getSpendingWithYearlySavings(this.getSelectedYearlySavings(), n),
                    withRecommendedSavingsAverage: this.retirementPlan.getSpendingWithYearlySavings(this.getRecommendedYearlySavings(), e),
                    withRecommendedSavingsPoor: this.retirementPlan.getSpendingWithYearlySavings(this.getRecommendedYearlySavings(), n),
                    desiredSpending: this.getDesiredRetirementIncome()
                }
            },
            getRelativeHeights: function(t) {
                var n = this.ui.graph.innerHeight(),
                    r;
                return e.each(t, function(e, t) {
                    if (!r || e > r) r = e
                }), e.reduce(t, function(e, t, i) {
                    return e[i] = t / r * n, e
                }, {})
            },
            getRecommendedYearlySavings: function() {
                return this.retirementPlan.getRecommendedYearlySavings()
            },
            getDesiredRetirementIncome: function() {
                return this.retirementPlan.get("financialPlan").dollars("desiredRetirementIncome")
            },
            getSelectedYearlySavings: function() {
                return this.options.parent.getSelectedYearlySavings()
            }
        })
    }), define("views/retirementPlanning/projectionView", ["jquery", "underscore", "common/betterment.views", "components/common/scripts/constants/colors", "hbs!views/retirementPlanning/projection", "views/common/dropdown/dropdownView", "models/v2/financialProfile", "services/retirementPlanService", "hbs!views/retirementPlanning/socialSecurityTooltip", "components/common/scripts/services/projectorService", "views/retirementPlanning/projection/currentSavingsView", "views/retirementPlanning/projection/retirementAgeView", "views/retirementPlanning/projection/projectionGraphView"], function(e, t, n, r, i, s, o, u, a, f, l, c, h) {
        return n.View.extend({
            template: i,
            className: "retirement-planning-projection",
            ui: {
                backToProfile: ".back-to-profile",
                recommendedSavingsAmount: ".tip .recommended-savings",
                saveMoreTip: ".tip .save-more",
                savingEnoughTip: ".tip .saving-enough",
                savedEnoughTip: ".tip .saved-enough",
                expandableRegulatory: ".regulatory.expandable"
            },
            regions: {
                graphRegion: ".graph-region",
                socialSecuritySelectorRegion: ".social-security-selector",
                currentSavingsRegion: ".current-savings-region",
                userRetirementAgeRegion: ".user-retirement-age-region",
                spouseRetirementAgeRegion: ".spouse-retirement-age-region"
            },
            events: {
                "click @ui.backToProfile": "backToProfile",
                "change .social-security-selector": "socialSecurityChanged",
                "click .expand-regulatory": "toggleRegulatory",
                "click .next": "next"
            },
            toolTips: {
                ".help-icon.social-security": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                financialPlan: function() {
                    return this.self.retirementPlan.get("financialPlan")
                },
                financialProfile: function() {
                    return this.self.retirementPlan.get("financialProfile")
                },
                showSpouseRetirementAge: function() {
                    return this.self.shouldShowSpouseRetirementAge()
                },
                spouseName: function() {
                    return this.financialProfile().get("spouseName")
                },
                retirementAge: function() {
                    return this.financialPlan().num("retirementAge")
                },
                projectionDisclaimerLink: {
                    text: "Learn more >",
                    supportUrl: "customer/portal/articles/1916484-retirement-plan-advice-methdology"
                }
            },
            onInitialize: function() {
                this.retirementPlan = this.options.retirementPlan, this.listenTo(this.retirementPlan, "change", this.update)
            },
            onShow: function() {
                this.renderSubviews(), this.update()
            },
            renderSubviews: function() {
                this.renderSavingsSlider(), this.renderSocialSecuritySelector(), this.renderRetirementAgeView(this.userRetirementAgeRegion, "retirementAge"), this.shouldShowSpouseRetirementAge() && this.renderRetirementAgeView(this.spouseRetirementAgeRegion, "spouseRetirementAge")
            },
            renderSavingsSlider: function() {
                this.currentSavingsView = new l({
                    model: this.retirementPlan
                }), this.listenTo(this.currentSavingsView, "slide", this.update.bind(this, !0)), this.listenTo(this.currentSavingsView, "stop", this.update), this.currentSavingsRegion.show(this.currentSavingsView)
            },
            renderRetirementAgeView: function(e, t) {
                var n = this.retirementPlan.get("financialPlan"),
                    r = new c({
                        model: n,
                        fieldName: t
                    });
                this.listenTo(r, "changed", this.trigger.bind(this, "saveLocalModels")), e.show(r)
            },
            renderSocialSecuritySelector: function() {
                this.socialSecuritySelector = new s({
                    selectedValue: this.retirementPlan.get("financialProfile").num("socialSecurityPercentExpected"),
                    items: [{
                        name: "None",
                        value: 0
                    }, {
                        name: "1/4",
                        value: 25
                    }, {
                        name: "1/2",
                        value: 50
                    }, {
                        name: "3/4",
                        value: 75
                    }, {
                        name: "Full",
                        value: 100
                    }]
                }), this.socialSecuritySelectorRegion.show(this.socialSecuritySelector)
            },
            shouldShowSpouseRetirementAge: function() {
                var e = this.retirementPlan.get("financialProfile");
                return e.isMarried() && e.not("spouseRetired")
            },
            socialSecurityChanged: function() {
                this.retirementPlan.get("financialProfile").set("socialSecurityPercentExpected", e.numberVal(this.socialSecuritySelector.getValue())), this.trigger("saveLocalModels")
            },
            toggleRegulatory: function(t) {
                this.ui.expandableRegulatory.slideToggle(), e(t.target).toggleClass("expanded")
            },
            update: function(e) {
                this.updateGraph(), this.currentSavingsView.update(), this.updateSocialSecurityTooltip(), e !== !0 && this.updateRecommendationCopy()
            },
            updateGraph: function() {
                this.graph || (this.graph = new h({
                    parent: this,
                    retirementPlan: this.retirementPlan
                }), this.graphRegion.show(this.graph)), this.graph.update()
            },
            updateRecommendationCopy: function() {
                this.ui.recommendedSavingsAmount.text(this.formatter.money(this.getRecommendedYearlySavings(), 0)), this.ui.saveMoreTip.toggle(this.retirementPlan.notSavingEnough(this.getSelectedYearlySavings())), this.ui.savingEnoughTip.toggle(this.retirementPlan.isSavingEnough(this.getSelectedYearlySavings())), this.ui.savedEnoughTip.toggle(this.retirementPlan.hasSavedEnoughAlready())
            },
            updateSocialSecurityTooltip: function() {
                var e = a({
                    married: this.retirementPlan.get("financialProfile").isMarried(),
                    spouseName: this.retirementPlan.get("financialProfile").get("spouseName"),
                    annualAmount: this.retirementPlan.getSocialSecurityCollectionInfo().monthlySocialSecurityTodaysDollars * 12,
                    spouseAnnualAmount: this.retirementPlan.getSocialSecurityCollectionInfo().spouseMonthlySocialSecurityTodaysDollars * 12,
                    retirementAge: this.retirementPlan.getSocialSecurityCollectionInfo().beginSocialSecurityCollectionAge,
                    spouseRetirementAge: this.retirementPlan.getSocialSecurityCollectionInfo().spouseBeginSocialSecurityCollectionAge
                });
                this.$(".help-icon.social-security").qtip("option", "content.text", e)
            },
            getSliderBounds: function() {
                return this.currentSavingsView.getSliderBounds()
            },
            getSelectedYearlySavings: function() {
                return this.currentSavingsView.getSelectedYearlySavings()
            },
            getRecommendedYearlySavings: function() {
                return this.retirementPlan.getRecommendedYearlySavings()
            },
            backToProfile: function() {
                BMT.router.navigate("retireGuideSetup", !0)
            },
            next: function() {
                BMT.scrollToTop(), this.trigger("next")
            }
        })
    }), define("hbs!views/retirementPlanning/howToSave", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return '\n            <div class="saving-enough">\n                <h3>You are currently saving enough</h3>\n                <p>You are currently saving enough. In case you still want to save more for retirement, below are\n                the accounts you qualify for based on your income, age and marital status.</p>\n            </div>\n        '
            }

            function h(e, t) {
                return '\n            <ul class="eligibilities-text">\n                <li>\n        '
            }

            function p(e, t) {
                return "\n            <p>\n        "
            }

            function d(e, t) {
                var r = "",
                    i, s;
                return r += "\n                </li>\n                <li>", (s = n.eligibilitiesSpouse) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.eligibilitiesSpouse, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</li>\n            </ul>\n        ", r
            }

            function v(e, t) {
                return "\n            </p>\n        "
            }

            function m(e, t) {
                var r = "",
                    i, s;
                r += '\n            <h3 class="why-qualifications">Account Qualifications</h3>\n\n            <div class="recommendations-text">\n                ', i = n["if"].call(e, e && e.hasEmployerPlan, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(12, g, t)
                });
                if (i || i === 0) r += i;
                r += "\n                ", i = n["if"].call(e, e && e.hasSpouseRecommendations, {
                    hash: {},
                    inverse: l.program(16, b, t),
                    fn: l.program(14, y, t)
                });
                if (i || i === 0) r += i;
                r += "\n                ", (s = n.recommendations) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.recommendations, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n                ", i = n["if"].call(e, e && e.hasSpouseRecommendations, {
                    hash: {},
                    inverse: l.program(20, E, t),
                    fn: l.program(18, w, t)
                });
                if (i || i === 0) r += i;
                r += "\n                ", i = n["if"].call(e, e && e.hasEmployerPlan, {
                    hash: {},
                    inverse: l.program(24, x, t),
                    fn: l.program(22, S, t)
                });
                if (i || i === 0) r += i;
                return r += '\n            </div>\n\n            <div class="separator"></div>\n            <p>Next step: Set up your accounts and contributions in <a class="actions-link">Actions</a></p>\n        ', r
            }

            function g(e, t) {
                return "\n                    <p>We recommend first taking advantage of any contribution matching that your employer may offer.</p>\n                "
            }

            function y(e, t) {
                return "\n                    <ul>\n                        <li>\n                "
            }

            function b(e, t) {
                return "\n                    <p>\n                "
            }

            function w(e, t) {
                var r = "",
                    i, s;
                return r += "\n                        </li>\n                        <li>", (s = n.recommendationsSpouse) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.recommendationsSpouse, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</li>\n                    </ul>\n                ", r
            }

            function E(e, t) {
                return "\n                    </p>\n                "
            }

            function S(e, t) {
                return "\n                    <p>After your SMSF contributions, contribute to your company plan and personal or joint taxable account for the rest of your savings.  Your employer plan may be a good choice if it has low fees and sufficient choices to diversify.</p>\n                "
            }

            function x(e, t) {
                return "\n                    <p>After your SMSF contributions, contribute to a personal or joint taxable account for the rest of your savings.</p>\n                "
            }

            function T(e, t) {
                return '\n            <div class="retirement-savings">\n                <p class="heading">Retirement Savings</p>\n                <p class="savings-amount per-year"></p>\n            </div>\n            <div class="savings-breakdown">\n                <div class="investment-distribution">\n                    <div class="column traditional-ira">\n                        <div class="fill"></div>\n                        <h3 class="name">SMSF</h3>\n                    </div>\n                    <div class="column spouse-traditional-ira">\n                        <div class="fill"></div>\n                        <h3 class="name">Spouse SMSF</h3>\n                    </div>\n                    <div class="column roth-ira">\n                        <div class="fill"></div>\n                        <h3 class="name">SMSF</h3>\n                    </div>\n                    <div class="column spouse-roth-ira">\n                        <div class="fill"></div>\n                        <h3 class="name">Spouse SMSF</h3>\n                    </div>\n                    <div class="column taxable">\n                        <div class="fill"></div>\n                        <h3 class="name"></h3>\n                    </div>\n                </div>\n\n                <div class="savings-line-items">\n                    <div class="line-item traditional-ira clearfix">\n                        <div class="name">SMSF</div>\n                        <div class="value per-year"></div>\n                    </div>\n                    <div class="line-item spouse-traditional-ira clearfix">\n                        <div class="name">Spouse SMSF</div>\n                        <div class="value per-year"></div>\n                    </div>\n                    <div class="line-item roth-ira clearfix">\n                        <div class="name">SMSF</div>\n                        <div class="value per-year"></div>\n                    </div>\n                    <div class="line-item spouse-roth-ira clearfix">\n                        <div class="name">Spouse SMSF</div>\n                        <div class="value per-year"></div>\n                    </div>\n                    <div class="line-item taxable clearfix">\n                        <div class="name"></div>\n                        <div class="value per-year"></div>\n                    </div>\n                </div>\n            </div>\n        '
            }

            function N(e, t) {
                return '\n            <img src="/static/images/retirement-plan-on-track.png" />\n        '
            }

            function C(e, t) {
                return '\n    <div class="lower">\n        <button class="next">Continue to Actions</button>\n    </div>\n'
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="upper">\n    <div class="left">\n        ', o = n["if"].call(t, t && t.isSavingEnough, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        <h3>Recommended Accounts</h3>\n\n        ", o = n["if"].call(t, t && t.hasSpouseEligibilities, {
                hash: {},
                inverse: l.program(5, p, i),
                fn: l.program(3, h, i)
            });
            if (o || o === 0) s += o;
            s += "\n        ", (u = n.eligibilities) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.eligibilities, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n        ", o = n["if"].call(t, t && t.hasSpouseEligibilities, {
                hash: {},
                inverse: l.program(9, v, i),
                fn: l.program(7, d, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n        ", o = n["if"].call(t, t && t.hasSavingsRecommendations, {
                hash: {},
                inverse: l.noop,
                fn: l.program(11, m, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n    </div>\n\n    <div class="right">\n\n        ', o = n["if"].call(t, t && t.hasSavingsRecommendations, {
                hash: {},
                inverse: l.program(28, N, i),
                fn: l.program(26, T, i)
            });
            if (o || o === 0) s += o;
            s += "\n\n    </div>\n</div>\n\n", o = n["if"].call(t, t && t.hasSavingsRecommendations, {
                hash: {},
                inverse: l.noop,
                fn: l.program(30, C, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/howToSave", n), n
    }), define("viewHelpers/retirementPlanAdviceText", ["components/common/scripts/util/formatter"], function(e) {
        return {
            getEligibilitiesText: function(t, n, r, i, s, o) {
                var u = this._pronouns(o),
                    a = o ? u.subject.capitalize() + " is " : u.subject.capitalize() + " are ";
                return t > 0 ? (a += "eligible to contribute up to ", r === 0 && n > 0 ? a += e.money(n, 0) + " " : a += e.money(t, 0) + " ", r === 0 && n > 0 ? a += "in a SMSF for the " + s + " tax year. " + u.subject.capitalize() + " can't contribute to a SMSF due to " + u.possessive + " age." : n !== t || r !== t && i !== t ? i === t && n === 0 ? a += "in a deductible SMSF for the " + s + " tax year. " + u.singular.capitalize() + " can't contribute to a SMSF due to " + u.possessive + " income and filing status." : i === 0 && n === 0 ? a += "in a non-deductible SMSF for the " + s + " tax year. " + u.singular.capitalize() + " can't contribute to a Roth or deductible SMSF due to " + u.possessive + " income, filing status, and availability of " + u.possessive + " employer retirement plan." : n > 0 ? (a += "for the " + s + " tax year. This total can be split between partial contributions of up to " + e.money(n, 0) + " in a SMSF and ", i > 0 ? a += e.money(i, 0) + " in a " : a += e.money(r, 0) + " in a non-", a += "deductible SMSF.") : a = "" : (a += "for the " + s + " tax year. This total can be split between a SMSF and ", r === t && i !== t && (a += "non-"), a += "deductible SMSF.")) : a += "not eligible to contribute to an IRA for the " + s + " tax year. " + u.possessive.capitalize() + " age disqualifies " + u.subjectOrThem + " for a traditional contribution, and " + u.possessiveOrTheir + " income disqualifies " + u.subjectOrThem + " for a Roth contribution.", a
            },
            getRecommendationsText: function(t, n, r, i, s) {
                var o = this._pronouns(s),
                    u = "";
                return t > 0 && (r > 0 ? n > 0 ? u = e.money(t, 0) + " in a SMSF and " + e.money(n + r, 0) + " in a SMSF. " + o.possessive.capitalize() + " income will limit deductibility to " + e.money(n, 0) + "." : u = e.money(t, 0) + " in a SMSF and " + e.money(r, 0) + " in a non-deductible SMSF. " + o.subject.capitalize() + ' may be able to convert the non-deductible SMSF contribution to a SMSF. <a href="https://www.betasmartz.com/resources/retirement/401ks-and-iras/roth-ira-rules-smart-ways-to-avoid-taxes-on-a-conversion/" target="_blank">Read more about Roth conversions</a>.' : n > 0 && n !== t ? u = e.money(t, 0) + " in a SMSF and " + e.money(n, 0) + " in a deductible SMSF. Given that " + o.possessive + ' income falls in the <a href="http://www.irs.gov/Retirement-Plans/Plan-Participant,-Employee/Amount-of-Roth-IRA-Contributions-That-You-Can-Make-for-2014" target="_blank">partial contribution range</a>, any additional deductions could impact what ' + o.singular + " can contribute." : t > n && (u = e.money(t, 0) + " in a SMSF. " + o.subject.capitalize() + " won't get a tax deduction now, but withdrawals will be federally tax free if " + o.inPast + " held the account for 5 years and " + o.inPastReference + ' at least 59.5. <a href="http://www.irs.gov/Retirement-Plans/Roth-IRAs" target="_blank">Read more about SMSFs</a>.')), !u && n > 0 && (n > t && r === 0 ? i < 0 ? u = e.money(n, 0) + " in a deductible SMSF. Given that " + o.possessive + ' future tax rate will likely be lower, it is most efficient to save taxes at a higher rate now and withdraw in retirement at a lower tax rate. <a href="http://www.irs.gov/Retirement-Plans/Traditional-IRAs" target="_blank">Read more about SMSFs</a>.' : u = e.money(n, 0) + " in a deductible SMSF. While " + o.possessive + " future tax rate may not be lower, " + o.singular + ' will benefit from tax free growth. <a href="http://www.irs.gov/Retirement-Plans/Traditional-IRAs" target="_blank">Read more about SMSFs</a>.' : r > 0 && (u = e.money(n + r, 0) + " in a SMSF. " + o.subject.capitalize() + " will be able to claim a partial deduction of " + e.money(n, 0) + '. <a href="http://www.irs.gov/Retirement-Plans/Traditional-IRAs" target="_blank">Read more about SMSFs</a>.')), u || (t > 0 && n === t ? u = "an equal amount in a SMSF and SMSF. Given that " + o.possessive + " future tax rate will likely be similar to " + o.possessive + " current rate, having both pre-tax and post-tax accounts may be useful for controlling " + o.possessive + " income and taxes in retirement." : r > 0 && (u = e.money(r, 0) + " in a non-deductible SMSF. A non-deductible SMSF is funded with after-tax money, and only withdrawals of gains in retirement are taxed. This type of IRA may also allow " + o.subject + ' to efficiently move money into a SMSF via a Roth conversion (i.e., a "backdoor" SMSF). <a href="https://www.betasmartz.com/resources/retirement/401ks-and-iras/roth-ira-rules-smart-ways-to-avoid-taxes-on-a-conversion/" target="_blank">Read more about Roth conversions</a>.')), u ? (s ? "For your spouse, we recommend investing " : "We recommend investing ") + u : u
            },
            _pronouns: function(e) {
                return {
                    subject: e ? "your spouse" : "you",
                    singular: e ? "he or she" : "you",
                    possessive: e ? "his or her" : "your",
                    inPast: e ? "he or she has" : "you've",
                    inPastReference: e ? "is" : "are",
                    subjectOrThem: e ? "them" : "you",
                    possessiveOrTheir: e ? "their" : "your"
                }
            }
        }
    }), define("views/retirementPlanning/howToSaveView", ["underscore", "components/common/scripts/util/handlebarsHelpers", "common/betterment.views", "hbs!views/retirementPlanning/howToSave", "services/retirementPlanService", "components/common/scripts/constants/colors", "viewHelpers/retirementPlanAdviceText"], function(e, t, n, r, i, s, o) {
        var u = 175,
            a = 25,
            f = 20,
            l = 30,
            c = 10,
            h = ["traditionalIra", "spouseTraditionalIra", "rothIra", "spouseRothIra", "taxable"];
        return n.View.extend({
            template: r,
            className: "retirement-planning-how-to-save",
            ui: {
                totalSavingsAmount: ".retirement-savings .savings-amount",
                investmentDistribution: ".investment-distribution",
                traditionalIraMeter: ".investment-distribution .traditional-ira .fill",
                spouseTraditionalIraMeter: ".investment-distribution .spouse-traditional-ira .fill",
                rothIraMeter: ".investment-distribution .roth-ira .fill",
                spouseRothIraMeter: ".investment-distribution .spouse-roth-ira .fill",
                taxableMeter: ".investment-distribution .taxable .fill",
                savingsLineItems: ".savings-line-items",
                traditionalIraAmount: ".savings-line-items .traditional-ira .value",
                spouseTraditionalIraAmount: ".savings-line-items .spouse-traditional-ira .value",
                rothIraAmount: ".savings-line-items .roth-ira .value",
                spouseRothIraAmount: ".savings-line-items .spouse-roth-ira .value",
                taxableAmount: ".savings-line-items .taxable .value",
                taxableLabel: ".savings-line-items .taxable .name, .investment-distribution .taxable .name"
            },
            events: {
                "click .add-roth-ira": "addRothIra",
                "click .add-traditional-ira": "addTraditionalIra",
                "click .add-taxable": "addTaxable",
                "click .next, .actions-link": "next"
            },
            templateHelpers: {
                hasSpouseEligibilities: function() {
                    return this.self.retirementPlan.get("financialProfile").isMarried() && this.eligibilitiesSpouse().toString()
                },
                hasSpouseRecommendations: function() {
                    return this.self.retirementPlan.get("financialProfile").isMarried() && this.recommendationsSpouse().toString()
                },
                getEligibilities: function() {
                    return this.self.retirementPlan.getRecommendedSavingsEligibilities()
                },
                getHowToSave: function() {
                    return this.self.retirementPlan.getRecommendedSavingsContributions()
                },
                hasEmployerPlan: function() {
                    return this.self.retirementPlan.hasEmployerPlan() || this.self.retirementPlan.hasSpouseEmployerPlan()
                },
                futureTaxRate: function() {
                    return this.self.retirementPlan.getFutureTaxRate()
                },
                eligibilities: function() {
                    var e = (new Date).getFullYear(),
                        n = this.getEligibilities();
                    return t.s(o.getEligibilitiesText(n.iraContributionLimit, n.maxRoth, n.maxTraditional, n.maxIraDeduction, e, !1))
                },
                eligibilitiesSpouse: function() {
                    var e = (new Date).getFullYear(),
                        n = this.getEligibilities();
                    return t.s(o.getEligibilitiesText(n.spouseIraContributionLimit, n.spouseMaxRoth, n.spouseMaxTraditional, n.spouseMaxIraDeduction, e, !0))
                },
                recommendations: function() {
                    var e = this.getHowToSave();
                    return t.s(o.getRecommendationsText(e.rothIraContribution, e.traditionalIraDeductibleContribution, e.traditionalIraNonDeductibleContribution, this.futureTaxRate(), !1))
                },
                recommendationsSpouse: function() {
                    var e = this.getHowToSave();
                    return t.s(o.getRecommendationsText(e.spouseRothIraContribution, e.spouseTraditionalIraDeductibleContribution, e.spouseTraditionalIraNonDeductibleContribution, this.futureTaxRate(), !0))
                },
                isSavingEnough: function() {
                    return this.self.retirementPlan.isSavingEnough()
                },
                hasSavingsRecommendations: function() {
                    return this.self.retirementPlan.getRecommendedYearlySavings() > 0
                }
            },
            onInitialize: function() {
                this.retirementPlan = this.options.retirementPlan, this.listenTo(this.retirementPlan, "change", function() {
                    this.triggerMethod("render"), this.triggerMethod("show")
                })
            },
            toggleContributionType: function(e, t) {
                this.ui[e + "Meter"].parent().toggle(t), this.ui[e + "Amount"].parent().toggle(t)
            },
            onRender: function() {
                var e = this.retirementPlan.getRecommendedSavingsContributions(),
                    t = 0,
                    n = 0,
                    r = !1,
                    i = 0,
                    o = 0;
                h.forEach(function(r) {
                    this.toggleContributionType(r, !1);
                    var s = e[r + "Contribution"] || 0;
                    s > 0 && (i += s, n++, s > t && (t = s))
                }.bind(this)), n === 1 && (r = !0);
                var u = Math.max(n, 2),
                    l = h.length - u,
                    c = a + f * l;
                this.ui.investmentDistribution.css({
                    paddingLeft: c + "px",
                    paddingRight: c + "px"
                }), this.ui.totalSavingsAmount.text(this.formatter.money(i, 0)), h.forEach(function(n) {
                    var i = e[n + "Contribution"] || 0;
                    if (i > 0 || n === "taxable" && r) {
                        var a = s.RETIREMENT_PLAN_SAVINGS[o++];
                        this.drawContribution(n, i, a, t, u, l)
                    }
                }.bind(this)), this.retirementPlan.hasEmployerPlan() || this.retirementPlan.hasSpouseEmployerPlan() ? this.ui.taxableLabel.text("Taxable or Employer Plan") : this.ui.taxableLabel.text("Taxable")
            },
            onShow: function() {
                this.ui.savingsLineItems.find(".line-item:visible").first().css({
                    borderTop: 0
                })
            },
            drawContribution: function(e, t, n, r, i, s) {
                var o = this.ui[e + "Meter"],
                    a = this.ui[e + "Amount"],
                    f = Math.max(u * t / r, 1),
                    h = u - f,
                    p = s > 1 ? l + c * s : l,
                    d = 100 / i;
                o.css({
                    width: p + "px",
                    height: f + "px",
                    marginTop: h + "px",
                    background: n
                }), o.parent().css({
                    width: d + "%",
                    borderTop: "inherit"
                }), o.parent().find(".name").toggleClass("larger-font", s > 1), a.text(this.formatter.money(t, 0)), this.toggleContributionType(e, !0)
            },
            next: function() {
                BMT.scrollToTop(), this.trigger("next")
            }
        })
    }), define("hbs!views/retirementPlanning/actions", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h3>Recommended Actions</h3>\n\n<div class="suggested-goals"></div>\n'
        });
        return t.registerPartial("views/retirementPlanning/actions", n), n
    }), define("hbs!views/retirementPlanning/addRecommendedGoal", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/money"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s, o;
                r += '\n    <div class="added outer">\n        <div class="inner">\n            <h3>', (s = n.addedTitle) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.addedTitle, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</h3>\n            <h2>Contribute ", i = (s = n.contribution || e && e.contribution, o = {
                    hash: {}
                }, s ? s.call(e, o) : f.call(e, "contribution", o)), r += a((s = n.money || e && e.money, o = {
                    hash: {}
                }, s ? s.call(e, i, 0, o) : f.call(e, "money", i, 0, o))) + "/year</h2>\n            <p>", (s = n.addedStateDescription) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.addedStateDescription, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</p>\n\n            ", i = n["if"].call(e, e && e.showContributeButton, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(2, h, t)
                });
                if (i || i === 0) r += i;
                return r += "\n        </div>\n    </div>\n", r
            }

            function h(e, t) {
                return '\n                <div class="button-wrapper">\n                    <button class="go-to-advice green">Set Funding Options</button>\n                </div>\n            '
            }

            function p(e, t) {
                var r = "",
                    i, s;
                r += '\n    <div class="not-added outer">\n        <div class="inner">\n            <h2>Add a ', (s = n.title) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.title, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</h2>\n            <p>", (s = n.description) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.description, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</p>\n\n            ", i = n["if"].call(e, e && e.canAddGoal, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(5, d, t)
                });
                if (i || i === 0) r += i;
                return r += "\n        </div>\n    </div>\n", r
            }

            function d(e, t) {
                return '\n                <div class="button-wrapper">\n                    <button class="add-new-goal silver">Add</button>\n                </div>\n            '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = n.helperMissing,
                l = this;
            o = n["if"].call(t, t && t.isAddedState, {
                hash: {},
                inverse: l.program(4, p, i),
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/retirementPlanning/addRecommendedGoal", n), n
    }), define("views/retirementPlanning/addRecommendedGoalView", ["underscore", "common/betterment.views", "hbs!views/retirementPlanning/addRecommendedGoal", "views/common/addGoalView", "views/common/addGoal/addGoalCardDefinitions", "views/common/alertView", "services/accountService", "components/common/scripts/viewHelpers/customerSupport", "components/account/scripts/constants/accountTypes"], function(e, t, n, r, i, s, o, u, a) {
        var f = {
                traditionalIra: {
                    title: "SMSF",
                    description: "Contributions may be tax deductible and grow tax free, but withdrawals in retirement are subject to income tax.",
                    addGoalCard: i.get("TRADITIONAL_IRA"),
                    filter: {
                        goalType: "RETIREMENT",
                        accountType: a.TRADITIONAL_IRA,
                        income: !1
                    }
                },
                rothIra: {
                    title: "SMSF",
                    description: "Roth contributions are not tax-deductible, but all growth and qualified withdrawals are tax free.",
                    addGoalCard: i.get("ROTH_IRA"),
                    filter: {
                        goalType: "RETIREMENT",
                        accountType: a.ROTH_IRA,
                        income: !1
                    }
                },
                taxable: {
                    title: "Taxable Account",
                    description: "Taxes paid on dividends annually and on gains upon withdrawal, but may have favorable tax rates.  No early withdrawal penalties.",
                    addGoalCard: i.get("RETIREMENT"),
                    filter: {
                        goalType: "RETIREMENT",
                        accountType: a.INVESTING,
                        income: !1
                    }
                }
            },
            l = "Make a one-time contribution or use Automatic Deposits to save throughout the year.",
            c = "Contribute to your spouse's IRA at BetaSmartz or other provider.",
            h = "Contribute to your spouse's IRA here or at an other provider.",
            p = "Taxable or Employer Plan";
        return t.View.extend({
            template: n,
            className: "new-goal",
            events: {
                "click .add-new-goal": "addGoal",
                "click .go-to-advice": "goToAdvice"
            },
            templateHelpers: {
                isAddedState: function() {
                    return this.self.getGoalInfo().isSpousal || this.self.getAccount()
                },
                title: function() {
                    return this.self.getGoalInfo().title
                },
                addedTitle: function() {
                    var e = this.self.options.retirementPlan;
                    return this.self.options.goalType === "taxable" && (e.hasEmployerPlan() || e.hasSpouseEmployerPlan()) ? p : this.self.getGoalInfo().title
                },
                description: function() {
                    return this.self.getGoalInfo().description
                },
                addedStateDescription: function() {
                    return this.self.getGoalInfo().isSpousal ? BMT.user.isAdvised() ? h : c : l
                },
                contribution: function() {
                    return this.self.getContribution()
                },
                showContributeButton: function() {
                    return !!this.self.getAccount()
                },
                canAddGoal: function() {
                    var e = this.self.getGoalInfo();
                    return !e.isSpousal && (a.isInvesting(e.filter.accountType) || BMT.accountGroup.isPersonal())
                }
            },
            getAccount: function() {
                var e = this.getGoalInfo();
                return e.isSpousal ? null : o.getAllAccounts().findWhere(e.filter)
            },
            getGoalInfo: function() {
                var e = "spouse",
                    t = this.options.goalType.indexOf(e) === 0;
                if (t) {
                    var n = this.options.goalType.substring(e.length).lowerFirst(),
                        r = f[n];
                    return {
                        title: "Spouse " + r.title,
                        isSpousal: !0
                    }
                }
                return f[this.options.goalType]
            },
            getContribution: function() {
                return this.options.contribution
            },
            addGoal: function() {
                var e = r.show({
                    inPlace: !0,
                    lists: [{
                        key: "retirement",
                        name: "Retirement"
                    }],
                    cards: {
                        retirement: [this.getAddGoalCard()]
                    }
                });
                this.listenTo(e, "goalCreated", this.render)
            },
            getAddGoalCard: function() {
                return e.extend({}, this.getGoalInfo().addGoalCard, {
                    selected: !0
                })
            },
            goToAdvice: function() {
                var e = this.getAccount();
                if (e.num("accountGroupId") !== BMT.accountGroup.num("id")) {
                    var t = BMT.user.get("accountGroups").get(e.num("accountGroupId"));
                    BMT.setAccountGroup(t, {
                        account: e,
                        destination: "advice",
                        scrollToTop: !0
                    });
                    return
                }
                BMT.selectedAccount = e, BMT.router.navigate("advice", !0), BMT.scrollToTop()
            }
        })
    }), define("views/retirementPlanning/actionsView", ["hbs!views/retirementPlanning/actions", "common/betterment.views", "views/retirementPlanning/addRecommendedGoalView"], function(e, t, n) {
        var r = ["traditionalIra", "spouseTraditionalIra", "rothIra", "spouseRothIra", "taxable"];
        return t.View.extend({
            template: e,
            className: "retirement-planning-actions",
            ui: {
                suggestedGoals: ".suggested-goals"
            },
            onInitialize: function() {
                this.retirementPlan = this.options.retirementPlan, this.listenTo(this.retirementPlan, "change", this.render)
            },
            onRender: function() {
                var e = this.retirementPlan.getRecommendedSavingsContributions();
                r.forEach(function(t) {
                    var r = e[t + "Contribution"] || 0;
                    if (r > 0) {
                        var i = new n({
                            goalType: t,
                            contribution: r,
                            retirementPlan: this.retirementPlan
                        });
                        i.render().$el.appendTo(this.ui.suggestedGoals)
                    }
                }.bind(this))
            }
        })
    }), define("hbs!views/retirementPlanning/editAssumptions", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n            <div class="input-container">\n                <h3>', (s = n.spouseName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseName, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '\'s life expectancy</h3>\n                <p>Age <input type="text" value="', (s = n.spouseLifeExpectancy) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.spouseLifeExpectancy, i = typeof s === f ? s.call(e, {
                    hash: {}
                }) : s), r += l(i) + '" name="spouseLifeExpectancy" /></p>\n                <p class="error" data-name="spouseLifeExpectancy"></p>\n            </div>\n            ', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = this,
                h = n.helperMissing;
            s += '\n<div class="assumptions">\n    <a data-destination="you" class="active">About you</a>\n    <a data-destination="economy">About the economy</a>\n    <a data-destination="portfolio">About your portfolio</a>\n    <a data-destination="income">About your income</a>\n</div>\n<div class="assumption-container">\n    <div class="assumption-slider you">\n\n        <div class="you section">\n\n            <h2>Assumptions about you</h2>\n\n            <div class="input-container">\n                <h3>Your life expectancy</h3>\n                <p>Age <input type="text" value="', (u = n.lifeExpectancy) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.lifeExpectancy, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" name="lifeExpectancy" /></p>\n                <p class="error" data-name="lifeExpectancy"></p>\n            </div>\n\n            ', o = n["if"].call(t, t && t.spouseName, {
                hash: {},
                inverse: c.noop,
                fn: c.program(1, p, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n            <div class="input-container">\n                <h3>Salary growth</h3>\n                <p><input type="text" value="', (u = n.annualSalaryPercentGrowth) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.annualSalaryPercentGrowth, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" name="annualSalaryPercentGrowth" /> % after inflation</p>\n                <p class="error" data-name="annualSalaryPercentGrowth"></p>\n            </div>\n        </div>\n\n        <div class="economy section">\n\n            <h2>Assumptions about the economy</h2>\n\n            <div class="input-container">\n                <h3>Inflation rate</h3>\n                <p><input type="text" value="', (u = n.expectedInflation) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.expectedInflation, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '" name="expectedInflation" /> %</p>\n                <p class="error" data-name="expectedInflation"></p>\n            </div>\n        </div>\n\n        <div class="portfolio section">\n\n            <h2>Assumptions about your Portfolio</h2>\n\n            <h3>Your allocation</h3>\n\n            <p class="subtle">Starting at <span class="current-stock-allocation"></span>% Stocks/<span class="current-bond-allocation"></span>% Bonds gliding to <span class="retirement-stock-allocation"></span>% Stocks/<span class="retirement-bond-allocation"></span>% Bonds at retirement.</p>\n            <p class="unadvised-user-only"><span class="read-more">' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.portfolioReadMoreLink, a) : h.call(t, "link", t && t.portfolioReadMoreLink, a))) + '</span></p>\n\n        </div>\n        <div class="income section">\n            <h2>Assumptions about your income</h2>\n\n            <p class="subtle">You can customize your retirement income sources below. We assume you will withdraw from your portfolio based on our safe withdrawal advice with a 99% chance of not outliving your money. <span class="unadvised-user-only read-more">' + l((u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.incomeReadMoreLink, a) : h.call(t, "link", t && t.incomeReadMoreLink, a))) + '</span></p>\n\n            <div class="input-container">\n                <h3>Other retirement income sources\n                    <div class="help-icon other-income">\n                        <span class="help-content">\n                            Enter the total amount of annual pre-tax income you expect from sources besides Age Pension and your portfolio.  This may include pensions, rental income or other sources.  We assume this income starts at retirement and continues until life expectancy.\n                        </span>\n                    </div>\n                </h3>\n                <p>$ <input type="text" name="otherRetirementIncome" value="', (u = n.otherRetirementIncome) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.otherRetirementIncome, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '"/> /year pre-tax</p>\n            </div>\n\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/editAssumptions", n), n
    }), define("views/retirementPlanning/editAssumptionsView", ["underscore", "common/betterment.views", "hbs!views/retirementPlanning/editAssumptions", "components/common/scripts/services/domainService", "projector"], function(e, t, n, r, i) {
        return t.View.extend({
            template: n,
            className: "retirement-plan-edit-assumptions",
            ui: {
                allSectionLinks: ".assumptions a",
                slider: ".assumption-slider",
                currentStockAllocation: ".current-stock-allocation",
                currentBondAllocation: ".current-bond-allocation",
                retirementStockAllocation: ".retirement-stock-allocation",
                retirementBondAllocation: ".retirement-bond-allocation",
                socialSecurityTooltip: ".help-icon.social-security .help-content"
            },
            events: {
                "click .close": "close",
                "click .assumptions a": "goToSection",
                "keyup input": "inputChanged",
                "keydown input": "formatDecimal"
            },
            toolTips: {
                ".help-icon.social-security": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                },
                ".help-icon.other-income": {
                    position: {
                        my: "left center",
                        at: "right center"
                    }
                }
            },
            templateHelpers: {
                financialProfile: function() {
                    return this.self.retirementPlan.get("financialProfile")
                },
                financialPlan: function() {
                    return this.self.retirementPlan.get("financialPlan")
                },
                spouseName: function() {
                    return this.financialProfile().get("spouseName")
                },
                lifeExpectancy: function() {
                    return this.financialProfile().num("lifeExpectancy")
                },
                spouseLifeExpectancy: function() {
                    return this.financialProfile().num("spouseLifeExpectancy")
                },
                expectedInflation: function() {
                    return this.financialProfile().num("expectedInflation")
                },
                annualSalaryPercentGrowth: function() {
                    return this.financialProfile().num("annualSalaryPercentGrowth")
                },
                otherRetirementIncome: function() {
                    return this.financialPlan().dollars("otherRetirementIncome")
                },
                savingsAdviceChance: function() {
                    return this.financialPlan().num("savingsAdviceChance")
                },
                savingsAdviceChanceEquals: function(e) {
                    return this.financialPlan().has("savingsAdviceChance") ? this.savingsAdviceChance() === e : i.DEFAULTS.savingsAdviceChance === e
                },
                socialSecurityPercentExpectedEquals: function(e) {
                    return this.financialProfile().num("socialSecurityPercentExpected") === e
                },
                portfolioReadMoreLink: {
                    text: "Learn more",
                    brochureUrl: "resources/research/goals-advice-explained/#retirement"
                },
                incomeReadMoreLink: {
                    text: "Learn more",
                    supportUrl: "customer/portal/articles/1482070-about-our-%22monthly-safe-withdrawal%22-advice"
                }
            },
            onInitialize: function() {
                this.retirementPlan = this.options.retirementPlan, this.listenTo(this.retirementPlan, "change", this.updateAllocations)
            },
            onRender: function() {
                this.updateAllocations()
            },
            updateAllocations: function() {
                var e = Math.round(100 * this.retirementPlan.getPreRetirementAllocation()),
                    t = Math.round(100 * this.retirementPlan.getPostRetirementAllocation());
                this.ui.currentStockAllocation.text(e), this.ui.currentBondAllocation.text(100 - e), this.ui.retirementStockAllocation.text(t), this.ui.retirementBondAllocation.text(100 - t)
            },
            goToSection: function(e) {
                var t = $(e.target),
                    n = t.data("destination");
                this.ui.allSectionLinks.removeClass("active"), t.addClass("active"), this.ui.slider.removeClass("you economy portfolio income").addClass(n)
            },
            updateInput: function(t, n) {
                var r;
                e.contains(["savingsAdviceChance", "otherRetirementIncome"], t) ? r = this.retirementPlan.get("financialPlan") : r = this.retirementPlan.get("financialProfile");
                var i = r.preValidate(t, n),
                    s = this.$(".error[data-name=" + t + "]");
                i ? s.text(i).slideDown() : (s.text("").slideUp(), t === "otherRetirementIncome" ? r.dollars(t, Number(n)) : r.set(t, n), this.trigger("saveLocalModels"))
            },
            inputChanged: function(e) {
                var t = $(e.target),
                    n = t.attr("name"),
                    r = t.val() === "" ? "" : t.numberVal();
                this.updateInput(n, r)
            },
            close: function() {
                this.$el.parent().slideUp()
            }
        })
    }), define("views/retirementPlanning/planView", ["underscore", "common/betterment.views", "hbs!views/retirementPlanning/plan", "components/common/scripts/modules/async", "components/common/scripts/analytics/analytics", "views/retirementPlanning/sharedHeaderView", "views/retirementPlanning/planSummaryView", "views/retirementPlanning/projectionView", "views/retirementPlanning/howToSaveView", "views/retirementPlanning/actionsView", "views/retirementPlanning/editAssumptionsView", "models/v2/retirementPlan"], function(e, t, n, r, i, s, o, u, a, f, l, c) {
        return t.View.extend({
            template: n,
            className: "retirement-plan panel card",
            ui: {
                projectionButton: "li.projection",
                howToSaveButton: "li.how-to-save",
                actionsButton: "li.actions",
                editAssumptionsButton: ".edit-assumptions-container",
                navButtons: ".main-nav li"
            },
            regions: {
                headerRegion: ".header-region",
                summaryRegion: ".summary",
                contentRegion: ".content",
                editAssumptionsRegion: ".edit-assumptions-region"
            },
            events: {
                "click @ui.projectionButton": "goToProjection",
                "click @ui.howToSaveButton": "goToHowToSave",
                "click @ui.actionsButton": "goToActions",
                "click @ui.navButtons": "tabClicked",
                "click @ui.editAssumptionsButton": "editAssumptions"
            },
            onRender: function() {
                this.preloadStart()
            },
            onShow: function() {
                this.preloadDependencies().then(function() {
                    return c.create({
                        financialProfile: this.financialProfile,
                        financialPlan: this.financialPlan
                    })
                }.bind(this), function() {
                    BMT.router.navigate("retireGuideStart", !0)
                }).then(function(e) {
                    this.retirementPlan = e, this.preloadComplete(), this.renderSubviews()
                }.bind(this))
            },
            preloadDependencies: function() {
                return this.financialProfile = BMT.user.getFinancialProfile(), this.externalAccounts = BMT.user.get("externalAccounts"), this.financialPlan = BMT.user.get("financialPlans").selected(), r.whenAll([this.financialProfile.fetch(), this.externalAccounts.fetch()]).then(function() {
                    if (!this.financialProfile.is("complete") || !this.financialPlan.is("complete")) return $.Deferred().reject().promise()
                }.bind(this))
            },
            renderSubviews: function() {
                this.headerRegion.show(new s({
                    retirementPlan: this.retirementPlan
                })), this.summaryRegion.show(new o({
                    retirementPlan: this.retirementPlan
                })), this.editAssumptionsView = new l({
                    retirementPlan: this.retirementPlan
                }), this.goToProjection(), this.editAssumptionsRegion.show(this.editAssumptionsView), this.listenTo(this.editAssumptionsView, "saveLocalModels", this.saveLocalModels), this.lifeExpectancy = this.retirementPlan.get("financialProfile").num("lifeExpectancy"), this.listenTo(this.retirementPlan, "change", this.hideOrShowActions), this.hideOrShowActions(), i.track("ElementViewed", {
                    Name: "Projection",
                    Location: "Plan"
                })
            },
            hideOrShowActions: function() {
                this.ui.actionsButton.toggle(!this.retirementPlan.hasSavedEnoughAlready())
            },
            tabClicked: function(e) {
                this.depressTab($(e.currentTarget))
            },
            depressTab: function(e) {
                this.editAssumptionsRegion.$el.slideUp(), this.ui.editAssumptionsButton.removeClass("active"), this.ui.navButtons.removeClass("depressed"), e.addClass("depressed")
            },
            goToProjection: function() {
                var e = new u({
                    retirementPlan: this.retirementPlan
                });
                this.listenTo(e, "saveLocalModels", this.saveLocalModels), this.listenTo(e, "next", this.goToHowToSave), this.contentRegion.show(e), this.depressTab(this.ui.projectionButton), i.track("ElementViewed", {
                    Name: "Projection",
                    Location: "Plan"
                })
            },
            goToHowToSave: function() {
                var e = new a({
                    retirementPlan: this.retirementPlan
                });
                this.listenTo(e, "next", this.goToActions), this.contentRegion.show(e), this.depressTab(this.ui.howToSaveButton), i.track("ElementViewed", {
                    Name: "HowToSave",
                    Location: "Plan"
                })
            },
            goToActions: function() {
                var e = new f({
                    retirementPlan: this.retirementPlan
                });
                this.contentRegion.show(e), this.depressTab(this.ui.actionsButton), i.track("ElementViewed", {
                    Name: "Actions",
                    Location: "Plan"
                })
            },
            editAssumptions: function() {
                this.ui.editAssumptionsButton.hasClass("active") ? (this.ui.editAssumptionsButton.removeClass("active"), this.editAssumptionsRegion.$el.slideUp()) : (this.ui.editAssumptionsButton.addClass("active"), this.editAssumptionsRegion.$el.slideDown())
            },
            saveLocalModels: e.debounce(function() {
                this.retirementPlan.get("financialProfile").save(), this.retirementPlan.get("financialPlan").save()
            }, 1500, !1)
        })
    }), define("views/common/accountGroupSelectionView", ["common/betterment.views"], function(e) {
        return e.View.extend({
            onShow: function() {
                var e = BMT.user.get("accountGroups").get(this.options.accountGroupId);
                e ? BMT.setAccountGroup(e) : BMT.router.navigate("summary", {
                    trigger: !0
                })
            }
        })
    }), define("common/pages", ["components/common/scripts/util/ie", "views/login/loginView", "views/summary/summaryView", "views/transfer/transferView", "views/invite/inviteView", "views/portfolio/portfolioView", "views/advice/adviceView", "views/advice/goalSetupView", "views/common/addGoalEmptyPageView", "views/advice/rolloverSetupView", "views/activity/activityView", "views/performance/performanceView", "views/profile/profileView", "views/login/passwordResetView", "views/login/forgotPasswordView", "views/signup/signupView", "views/trust/trustSignupView", "views/rollover/rolloverRequestView", "views/jointAccountSignup/acceptInviteController", "views/retirementPlanning/splashView", "views/retirementPlanning/setupView", "views/retirementPlanning/planView", "views/common/accountGroupSelectionView"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S) {
        return {
            login: t,
            summary: n,
            transfer: r,
            invite: i,
            portfolio: s,
            advice: o,
            activity: l,
            performance: c,
            profile: h,
            bankAccounts: "/app/bank_accounts",
            goalSetup: u,
            addgoal: a,
            rollover: f,
            signup: v,
            "trust-signup": m,
            passwordReset: p,
            forgotPassword: d,
            "rollover-request": g,
            acceptJointAccountInvitation: y,
            retireGuideStart: b,
            retireGuideSetup: w,
            retireGuide: E,
            transferNew: "/app/transfer",
            accountGroupSelection: S,
            allocation: s
        }
    }), define("common/router", ["jquery", "underscore", "backbone", "common/pages", "models/passwordReset", "models/visitor", "common/betterment.models", "components/common/scripts/services/browserService", "components/common/scripts/services/domainService"], function(e, t, n, r, i, s, o, u, a) {
        function l(n, i) {
            BMT.vent.trigger("goto", n);
            var s = r[n];
            BMT.currentPage = n;
            if (t.isString(s)) e.ajax({
                dataType: "script",
                url: s
            });
            else {
                var o = s,
                    u = new o(i);
                BMT.showMainContent(u)
            }
        }
        var f = {};
        return n.Router.extend({
            routes: {
                forgotPassword: "forgotPassword",
                "confirmEmail/:key": "confirmEmail",
                "acceptJointAccountInvitation/:inviteCode": "acceptJointAccountInvitation",
                "passwordReset/:key": "passwordReset",
                "login?error=:errorCode": "gotoLogin",
                "summary/tax-loss-harvesting-signup": "tlhIntro",
                "summary/open-joint-account": "jointAccountIntro",
                "transfer/smart-deposit": "smartDepositsIntro",
                retirementPlanStart: "retirementPlanStart",
                retireGuideStart: "retirementPlanStart",
                "retireGuideSetup/:step": "retirementPlanSetupStep",
                signup: "signup",
                "signup/:advisorToken": "signup",
                "": "gotoLogin",
                ":page~:account": "gotoPageAndAccount",
                "*page?:query": "gotoPageWithQuery",
                "*page": "gotoPage"
            },
            renderPage: l,
            navigate: function(e, t, r) {
                r && (f = r), n.Router.prototype.navigate(e, t), f = {}
            },
            browserRedirect: function(e) {
                window.location.href = "/app/#" + e
            },
            gotoPageAndAccount: function(e, t) {
                this.account = parseInt(t) || !1, this.gotoPage(e)
            },
            signup: function(e) {
                e ? r.signup.loadAdvisor(e).then(function(t) {
                    this.gotoPage("signup", {
                        token: e,
                        advisor: t
                    })
                }.bind(this)) : window.location.href = a.getResponsiveSignupUrl()
            },
            gotoPageWithQuery: function(e, n) {
                var r = {};
                t.each(n.split("&"), function(e) {
                    var t = e.split("=");
                    r[t[0]] = decodeURIComponent(t[1])
                }), this.gotoPage(e, r)
            },
            gotoPage: function(e, n) {
                t.extend(f, n), this.initialPage = null, this.initialOptions = {};
                if (e === "signup" && u.isMobile()) BMT.goToSignup(f.token);
                else if (e === "demo") {
                    if (BMT.hasLoggedInUser() && BMT.user.isFull()) {
                        this.navigate("", !0);
                        return
                    }
                    var i = this;
                    BMT.session.save({
                        userName: "demo@example.org"
                    }, {
                        success: function() {
                            i.navigate("", !0)
                        }
                    })
                } else if (BMT.hasLoggedInUser()) {
                    var s = r[e] ? e : "summary",
                        o = e === "login" || e === "profile" && BMT.user.is("demo") || e === "signup" && BMT.user.isFull();
                    if (o) {
                        this.browserRedirect("summary");
                        return
                    }
                    if (BMT.accountGroup.isClosed() && !t.contains(["activity", "profile"], e)) {
                        this.browserRedirect("activity");
                        return
                    }!t.contains(["goalSetup", "rollover"], e) && BMT.selectedAccount && !BMT.selectedAccount.isComplete() && (BMT.selectedAccount = BMT.accounts().at(0)), BMT.ribbonDrawer.currentView && !BMT.ribbonDrawer.currentView.options.preventClose && BMT.vent.trigger("closeDrawer"), l(s, f), f = {}, BMT.refreshBanners()
                } else e !== "login" && (this.initialPage = r[e] ? e : "summary", this.initialOptions = f), this.navigate("", !0)
            },
            gotoLogin: function(n) {
                var i = this,
                    o = !BMT.hasLoggedInUser(),
                    u = this.initialPage,
                    a = this.initialOptions;
                o && BMT.user.fetch({
                    skipErrorAlert: !0,
                    success: function(t, n) {
                        e.cookie(BMT.userNameCookieKey, null, {
                            domain: location.host === "localhost" ? "localhost" : "betasmartz.com",
                            path: "/"
                        }), BMT.session.parse(), BMT.session.refreshTokens().then(function() {
                            BMT.vent.trigger("login")
                        })
                    },
                    error: function() {
                        function l(t) {
                            i.navigate(f, !1), BMT.showMainContent(new r[e](o))
                        }
                        var e = u === "signup" ? "signup" : "login",
                            o = t.extend({
                                errorCode: n
                            }, a),
                            f = e + (o.token ? "/" + o.token : "");
                        e === "signup" ? (i.initialPage = null, s.fetch().always(l)) : l(n)
                    }
                })
            },
            tlhIntro: function() {
                f = {
                    showTlhIntroRibbon: !0
                }, this.gotoPage("summary")
            },
            jointAccountIntro: function() {
                f = {
                    showJointAccountRibbon: !0
                }, this.gotoPage("summary")
            },
            smartDepositsIntro: function() {
                f = {
                    showSmartDepositsModal: !0
                }, this.navigate("transfer", !0)
            },
            retirementPlanStart: function() {
                !BMT.user.isLoggedIn() || BMT.user.get("financialPlans").selected().isNew() ? this.gotoPage("retireGuideStart") : this.navigate("retireGuideSetup", !0)
            },
            retirementPlanSetupStep: function(e) {
                f = {
                    startStep: Number(e)
                }, this.gotoPage("retireGuideSetup")
            },
            acceptJointAccountInvitation: function(e) {
                l("acceptJointAccountInvitation", {
                    inviteCode: e
                })
            },
            forgotPassword: function() {
                BMT.hasSession() || s.fetch().always(function() {
                    BMT.showMainContent(new r.forgotPassword)
                })
            },
            confirmEmail: function(e) {
                var t = this;
                BMT.hasSession() || (new o.Model).save({
                    key: e
                }, {
                    skipErrorAlert: !0,
                    forceSave: !0,
                    url: "/emailConfirmation",
                    success: function() {
                        BMT.alert({
                            title: "Email address confirmed",
                            body: "Your email address has been confirmed!",
                            icon: "accept"
                        })
                    },
                    error: function() {
                        BMT.alert({
                            title: "Problem confirming email",
                            body: "There was a problem confirming your email address. Please contact support",
                            icon: "block"
                        })
                    },
                    complete: function() {
                        t.navigate("", !0)
                    }
                })
            },
            passwordReset: function(e) {
                var t = this;
                if (!BMT.hasSession()) {
                    var n = new i({
                        key: e
                    });
                    n.fetch({
                        success: function() {
                            s.fetch().always(function() {
                                BMT.showMainContent(new r.passwordReset({
                                    model: n
                                }))
                            })
                        },
                        error: function() {
                            t.navigate("", !0)
                        }
                    })
                }
            }
        })
    }),
    function() {
        function e(e) {
            function u(n, u) {
                var a, f, c = n == window,
                    v = u && u.message !== undefined ? u.message : undefined;
                u = e.extend({}, e.blockUI.defaults, u || {});
                if (u.ignoreIfBlocked && e(n).data("blockUI.isBlocked")) return;
                u.overlayCSS = e.extend({}, e.blockUI.defaults.overlayCSS, u.overlayCSS || {}), a = e.extend({}, e.blockUI.defaults.css, u.css || {}), f = e.extend({}, e.blockUI.defaults.themedCSS, u.themedCSS || {}), v = v === undefined ? u.message : v;
                if (v && typeof v != "string" && (v.parentNode || v.jquery)) {
                    var m = v.jquery ? v[0] : v,
                        g = {};
                    e(n).data("blockUI.history", g), g.el = m, g.parent = m.parentNode, g.display = m.style.display, g.position = m.style.position, g.parent && g.parent.removeChild(m)
                }
                e(n).data("blockUI.onUnblock", u.onUnblock);
                var y = u.baseZ,
                    b = e.browser.msie || u.forceIframe ? e('<iframe class="blockUI" style="z-index:' + y++ + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="' + u.iframeSrc + '"></iframe>') : e('<div class="blockUI" style="display:none"></div>'),
                    w = u.theme ? e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:' + y++ + ';display:none"></div>') : e('<div class="blockUI blockOverlay" style="z-index:' + y++ + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),
                    E, S;
                u.theme && c ? S = '<div class="blockUI ' + u.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:' + (y + 10) + ';display:none;position:fixed">' + '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">' + (u.title || "&nbsp;") + "</div>" + '<div class="ui-widget-content ui-dialog-content"></div>' + "</div>" : u.theme ? S = '<div class="blockUI ' + u.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:' + (y + 10) + ';display:none;position:absolute">' + '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">' + (u.title || "&nbsp;") + "</div>" + '<div class="ui-widget-content ui-dialog-content"></div>' + "</div>" : c ? S = '<div class="blockUI ' + u.blockMsgClass + ' blockPage" style="z-index:' + (y + 10) + ';display:none;position:fixed"></div>' : S = '<div class="blockUI ' + u.blockMsgClass + ' blockElement" style="z-index:' + (y + 10) + ';display:none;position:absolute"></div>', E = e(S), v && (u.theme ? (E.css(f), E.addClass("ui-widget-content")) : E.css(a)), !u.theme && (!u.applyPlatformOpacityRules || !e.browser.mozilla || !/Linux/.test(navigator.platform)) && w.css(u.overlayCSS), w.css("position", c ? "fixed" : "absolute"), (e.browser.msie || u.forceIframe) && b.css("opacity", 0);
                var x = [b, w, E],
                    T = c ? e("body") : e(n);
                e.each(x, function() {
                    this.appendTo(T)
                }), u.theme && u.draggable && e.fn.draggable && E.draggable({
                    handle: ".ui-dialog-titlebar",
                    cancel: "li"
                });
                var N = r && (!e.boxModel || e("object,embed", c ? null : n).length > 0);
                if (i || N) {
                    c && u.allowBodyStretch && e.boxModel && e("html,body").css("height", "100%");
                    if ((i || !e.boxModel) && !c) var C = d(n, "borderTopWidth"),
                        k = d(n, "borderLeftWidth"),
                        L = C ? "(0 - " + C + ")" : 0,
                        A = k ? "(0 - " + k + ")" : 0;
                    e.each([b, w, E], function(e, t) {
                        var n = t[0].style;
                        n.position = "absolute";
                        if (e < 2) c ? n.setExpression("height", "Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:" + u.quirksmodeOffsetHack + ') + "px"') : n.setExpression("height", 'this.parentNode.offsetHeight + "px"'), c ? n.setExpression("width", 'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"') : n.setExpression("width", 'this.parentNode.offsetWidth + "px"'), A && n.setExpression("left", A), L && n.setExpression("top", L);
                        else if (u.centerY) c && n.setExpression("top", '(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'), n.marginTop = 0;
                        else if (!u.centerY && c) {
                            var r = u.css && u.css.top ? parseInt(u.css.top) : 0,
                                i = "((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + " + r + ') + "px"';
                            n.setExpression("top", i)
                        }
                    })
                }
                v && (u.theme ? E.find(".ui-widget-content").append(v) : E.append(v), (v.jquery || v.nodeType) && e(v).show()), (e.browser.msie || u.forceIframe) && u.showOverlay && b.show();
                if (u.fadeIn) {
                    var O = u.onBlock ? u.onBlock : t,
                        M = u.showOverlay && !v ? O : t,
                        _ = v ? O : t;
                    u.showOverlay && w._fadeIn(u.fadeIn, M), v && E._fadeIn(u.fadeIn, _)
                } else u.showOverlay && w.show(), v && E.show(), u.onBlock && u.onBlock();
                l(1, n, u), c ? (s = E[0], o = e(":input:enabled:visible", s), u.focusInput && setTimeout(h, 20)) : p(E[0], u.centerX, u.centerY);
                if (u.timeout) {
                    var D = setTimeout(function() {
                        c ? e.unblockUI(u) : e(n).unblock(u)
                    }, u.timeout);
                    e(n).data("blockUI.timeout", D)
                }
            }

            function a(t, n) {
                var r = t == window,
                    i = e(t),
                    u = i.data("blockUI.history"),
                    a = i.data("blockUI.timeout");
                a && (clearTimeout(a), i.removeData("blockUI.timeout")), n = e.extend({}, e.blockUI.defaults, n || {}), l(0, t, n), n.onUnblock === null && (n.onUnblock = i.data("blockUI.onUnblock"), i.removeData("blockUI.onUnblock"));
                var c;
                r ? c = e("body").children().filter(".blockUI").add("body > .blockUI") : c = e(".blockUI", t), r && (s = o = null), n.fadeOut ? (c.fadeOut(n.fadeOut), setTimeout(function() {
                    f(c, u, n, t)
                }, n.fadeOut)) : f(c, u, n, t)
            }

            function f(t, n, r, i) {
                var s = r.modal.$el.parent().parent().parent();
                s.prev().prev().remove(), s.prev().remove(), s.remove(), n && n.el && (n.el.style.display = n.display, n.el.style.position = n.position, n.parent && n.parent.appendChild(n.el), e(i).removeData("blockUI.history")), typeof r.onUnblock == "function" && r.onUnblock(i, r)
            }

            function l(t, n, r) {
                var i = n == window,
                    o = e(n);
                if (!t && (i && !s || !i && !o.data("blockUI.isBlocked"))) return;
                o.data("blockUI.isBlocked", t);
                if (!r.bindEvents || t && !r.showOverlay) return;
                var u = "mousedown mouseup keydown keypress";
                t ? e(document).bind(u, r, c) : e(document).unbind(u, c)
            }

            function c(t) {
                if (t.keyCode && t.keyCode == 9 && s && t.data.constrainTabKey) {
                    var n = o,
                        r = !t.shiftKey && t.target === n[n.length - 1],
                        i = t.shiftKey && t.target === n[0];
                    if (r || i) return setTimeout(function() {
                        h(i)
                    }, 10), !1
                }
                var u = t.data,
                    a = "div." + u.blockMsgClass + (u.noBlockSelector ? ", " + u.noBlockSelector : "");
                return e(t.target).parents(a).length > 0 ? !0 : e(t.target).parents().children().filter("div.blockUI").length == 0
            }

            function h(e) {
                if (!o) return;
                var t = o[e === !0 ? o.length - 1 : 0];
                t && t.focus()
            }

            function p(e, t, n) {
                var r = e.parentNode,
                    i = e.style,
                    s = (r.offsetWidth - e.offsetWidth) / 2 - d(r, "borderLeftWidth"),
                    o = (r.offsetHeight - e.offsetHeight) / 2 - d(r, "borderTopWidth");
                t && (i.left = s > 0 ? s + "px" : "0"), n && (i.top = o > 0 ? o + "px" : "0")
            }

            function d(t, n) {
                return parseInt(e.css(t, n)) || 0
            }
            if (/1\.(0|1|2)\.(0|1|2)/.test(e.fn.jquery) || /^1.1/.test(e.fn.jquery)) {
                alert("blockUI requires jQuery v1.2.3 or later!  You are using v" + e.fn.jquery);
                return
            }
            e.fn._fadeIn = e.fn.fadeIn;
            var t = function() {},
                n = document.documentMode || 0,
                r = e.browser.msie && (e.browser.version < 8 && !n || n < 8),
                i = e.browser.msie && /MSIE 6.0/.test(navigator.userAgent) && !n;
            e.blockUI = function(e) {
                u(window, e)
            }, e.unblockUI = function(e) {
                a(window, e)
            }, e.growlUI = function(t, n, r, i) {
                var s = e('<div class="growlUI"></div>');
                t && s.append("<h1>" + t + "</h1>"), n && s.append("<h2>" + n + "</h2>"), r == undefined && (r = 3e3), e.blockUI({
                    message: s,
                    fadeIn: 700,
                    fadeOut: 1e3,
                    centerY: !1,
                    timeout: r,
                    showOverlay: !1,
                    onUnblock: i,
                    css: e.blockUI.defaults.growlCSS
                })
            }, e.fn.block = function(t) {
                var n = e.extend({}, e.blockUI.defaults, t || {});
                return this.each(function() {
                    var t = e(this);
                    if (n.ignoreIfBlocked && t.data("blockUI.isBlocked")) return;
                    t.unblock({
                        fadeOut: 0
                    })
                }), this.each(function() {
                    e.css(this, "position") == "static" && (this.style.position = "relative"), e.browser.msie && (this.style.zoom = 1), u(this, t)
                })
            }, e.fn.unblock = function(e) {
                return this.each(function() {
                    a(this, e)
                })
            }, e.blockUI.version = 2.42, e.blockUI.defaults = {
                message: "<h1>Please wait...</h1>",
                title: null,
                draggable: !0,
                theme: !1,
                css: {
                    padding: 0,
                    margin: 0,
                    width: "30%",
                    top: "40%",
                    left: "35%",
                    textAlign: "center",
                    color: "#000",
                    border: "3px solid #aaa",
                    backgroundColor: "#fff",
                    cursor: "wait"
                },
                themedCSS: {
                    width: "30%",
                    top: "40%",
                    left: "35%"
                },
                overlayCSS: {
                    backgroundColor: "#000",
                    opacity: .6,
                    cursor: "wait"
                },
                growlCSS: {
                    width: "350px",
                    top: "10px",
                    left: "",
                    right: "10px",
                    border: "none",
                    padding: "5px",
                    opacity: .6,
                    cursor: "default",
                    color: "#fff",
                    backgroundColor: "#000",
                    "-webkit-border-radius": "10px",
                    "-moz-border-radius": "10px",
                    "border-radius": "10px"
                },
                iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank",
                forceIframe: !1,
                baseZ: 1e3,
                centerX: !0,
                centerY: !0,
                allowBodyStretch: !0,
                bindEvents: !0,
                constrainTabKey: !0,
                fadeIn: 200,
                fadeOut: 400,
                timeout: 0,
                showOverlay: !0,
                focusInput: !0,
                applyPlatformOpacityRules: !0,
                onBlock: null,
                onUnblock: null,
                quirksmodeOffsetHack: 4,
                blockMsgClass: "blockMsg",
                ignoreIfBlocked: !1
            };
            var s = null,
                o = []
        }
        typeof define == "function" && define.amd && define.amd.jQuery ? define("jqueryBlockUI", ["jquery"], e) : e(jQuery)
    }(), define("regions/modalRegion", ["jquery", "underscore", "marionette", "common/betterment.views", "jqueryBlockUI"], function(e, t, n, r) {
        var i = 1e5,
            s = 0,
            o = [];
        return n.Region.extend({
            el: ".dummy-modal-container",
            initialize: function() {
                t.each(t.functions(this), function(e) {
                    this[e] = t.bind(this[e], this)
                }, this)
            },
            attachHtml: function(t) {
                s += i, e.fn.qtip.zindex += i;
                var n = this;
                e.blockUI({
                    theme: !0,
                    title: "",
                    centerX: !1,
                    centerY: !1,
                    fadeIn: !1,
                    focusInput: !1,
                    baseZ: s,
                    message: "hi",
                    css: {
                        cursor: "default"
                    },
                    themedCSS: {
                        top: 100 + (t.options.fixed ? 0 : e(document).scrollTop())
                    },
                    overlayCSS: {
                        cursor: "default"
                    },
                    noBlockSelector: "#SnapABug_WP",
                    onBlock: function() {
                        var r = t.options.modalClasses ? " " + t.options.modalClasses : "",
                            i = t.superClassName ? " " + t.superClassName : "",
                            o = " " + (t.fadeIn ? "fade-in" : "") + " " + (t.fadeOut ? "fade-out" : ""),
                            u = e(".blockPage").last(),
                            a = "modal-panel" + r + i + o,
                            f = e("<div />");
                        t.options.nowrap || f.addClass(a), f.html(t.el), t.$("ul.dropdown-menu").each(function() {
                            e(this).css("z-index", 16e3 + s)
                        });
                        if (!t.options.hideCloseButton) {
                            var l = e('<span class="top-right-close">+</span>');
                            l.on("click", function() {
                                n.close(t)
                            }), f.append(l)
                        }
                        t.on("show", function() {
                            t.fadeIn && f.addClass("fade-in-final")
                        }), u.find(".ui-widget-header").remove(), u.find(".ui-widget-content").html(t.options.hidePanel ? "" : f), u.css({
                            marginLeft: "-" + f.innerWidth() / 2 + "px"
                        }), t.options.opacity && u.prev(".blockOverlay").css({
                            opacity: t.options.opacity
                        })
                    }
                }), o.push(t)
            },
            replaceWith: function(e) {
                this.empty(this.currentView), this.show(e)
            },
            close: function(e) {
                this.empty(e)
            },
            empty: function(t) {
                if (!t) return;
                t.fadeOut && t.$el.closest(".modal-panel").addClass("fade-out-final"), e.unblockUI({
                    fadeOut: !1,
                    modal: t
                }), o.pop(), this.currentView = o[o.length - 1], s -= i, e.fn.qtip.zindex -= i, t.destroy && t.destroy(), this.trigger("destroy", t)
            }
        })
    }), define("hbs!views/drawers/baseDrawer", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="drawer-ribbon-region"></div>\n<div class="close-drawer collapse-circle"></div>\n'
        });
        return t.registerPartial("views/drawers/baseDrawer", n), n
    }), define("views/drawers/baseDrawerView", ["common/betterment.views", "hbs!views/drawers/baseDrawer"], function(e, t) {
        return e.View.extend({
            template: t,
            events: {
                "click .close-drawer": "closeDrawer"
            },
            regions: {
                drawerRibbonRegion: ".drawer-ribbon-region"
            },
            closeDrawer: function() {
                BMT.vent.trigger("closeDrawer")
            },
            transitionToRibbon: function(e, t) {
                var n = new e(t || {});
                this.drawerRibbonRegion.currentView ? this.drawerRibbonRegion.currentView.$el.fadeOut(200, function() {
                    this.drawerRibbonRegion.show(n)
                }.bind(this)) : this.drawerRibbonRegion.show(n)
            }
        })
    }), define("views/taxLossHarvesting/baseTlhRibbonView", ["common/betterment.views"], function(e) {
        return e.View.extend({
            className: "tlh-ribbon",
            onShow: function() {
                this.$el.animate({
                    opacity: 1,
                    top: "+=10"
                }, 500)
            }
        })
    }), define("hbs!views/taxLossHarvesting/videoModal", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<iframe width="560" height="315" src="//www.youtube.com/embed/bX_AO-fQ-y0?modestbranding=1&rel=0&showinfo=0&autoplay=1&autohide=1" frameborder="0" allowfullscreen></iframe>\n<div class="actions">\n    <button>&lt; Back to activation</button>\n</div>\n'
        });
        return t.registerPartial("views/taxLossHarvesting/videoModal", n), n
    }), define("views/taxLossHarvesting/videoModalView", ["common/betterment.views", "hbs!views/taxLossHarvesting/videoModal"], function(e, t) {
        return e.ModalView.extend({
            className: "tlh-video-modal",
            template: t,
            events: {
                "click button": "onCancel"
            },
            onInitialize: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "TLHVideo",
                    Location: "TLHRibbon"
                })
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("views/taxLossHarvesting/introRibbonView", ["views/taxLossHarvesting/baseTlhRibbonView", "services/flyoverService", "services/taxLossHarvestingService", "components/common/scripts/models/appData", "views/notifications/dismissibleFlyoverView", "views/taxLossHarvesting/videoModalView"], function(e, t, n, r, i, s) {
        return e.extend({
            className: "tlh-ribbon",
            template: "taxLossHarvesting/introRibbon",
            events: {
                "click .confirm": "onConfirm",
                "click .cancel": "onCancel",
                "click .open-video": "openVideo",
                "click .open-blog": "openBlog",
                "click .open-whitepaper": "openWhitepaper"
            },
            templateHelpers: {
                isEnabled: function() {
                    return this.self.isEnabled()
                }
            },
            isEnabled: function() {
                return n.isUserOn(BMT.accountGroup)
            },
            onConfirm: function() {
                if (this.isEnabled()) {
                    this.onCancel();
                    return
                }
                this.$(".confirm").prop("disabled", !0), BMT.analytics.track("ElementClicked", {
                    Name: "TurnOnTLH",
                    Balance: BMT.accountGroup.getTotalBalance(),
                    Location: "TLHRibbon"
                }), BMT.vent.trigger("taxLossHarvesting:consent"), BMT.vent.trigger("taxLossHarvesting:update")
            },
            openBlog: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "TLHBlog",
                    Location: "TLHRibbon"
                })
            },
            openWhitepaper: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "TLHWhitepaper",
                    Location: "TLHRibbon"
                })
            },
            openVideo: function() {
                BMT.modal.show(new s)
            },
            onCancel: function() {
                BMT.vent.trigger("closeDrawer")
            }
        })
    }), define("views/common/supportView", ["jquery", "underscore", "backbone", "common/betterment.views", "common/betterment.models"], function(e, t, n, r, i) {
        var s = i.Model.extend({
            url: "/supportEmail",
            labels: {
                from: "Email address"
            },
            validation: {
                from: {
                    required: !0,
                    pattern: "email"
                },
                message: {
                    required: !0,
                    minLength: 10
                }
            }
        });
        return r.ModalView.extend({
            template: "common/support",
            id: "support",
            events: {
                "click button#ok": "onOK",
                "click button#cancel": "onCancel"
            },
            templateHelpers: {
                useUserName: function() {
                    return this.self.useUserName()
                },
                supportPhoneNumber: function() {
                    return BMT.accountGroup.isAdvised() ? "888-400-1571" : "888-428-9482"
                }
            },
            useUserName: function() {
                return BMT.hasSession() && BMT.user.not("demo")
            },
            onInitialize: function() {
                var e = this.useUserName() ? BMT.user.get("userName") : "";
                this.model = new s({
                    from: e
                })
            },
            onShow: function() {
                this.applyValidation()
            },
            onOK: function(e) {
                var t = this,
                    r = n.Syphon.serialize(this);
                this.model.validate(r) || (this.block(), this.model.save(r, {
                    forceSave: !0,
                    success: function() {
                        BMT.modal.close(t), BMT.flash("Your question has been sent to support, we will respond shortly")
                    },
                    complete: function() {
                        t.unblock()
                    }
                }))
            },
            onCancel: function(e) {
                BMT.modal.close(this)
            }
        })
    }), define("components/common/scripts/templateHelpers/cdnUrl", ["hbs/handlebars", "components/common/scripts/util/handlebarsHelpers", "components/common/scripts/services/domainService"], function(e, t, n) {
        e.registerHelper("cdnUrl", function(e) {
            return t.e(n.cdnHost() + "/" + e)
        })
    }), define("hbs!views/taxLossHarvesting/consentRibbon", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/supportUrl", "components/common/scripts/templateHelpers/cdnUrl", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = "function",
                l = this.escapeExpression,
                c = n.helperMissing;
            return s += '<div class="inner">\n    <h1>Check your eligibility for <span class="blue">Tax Loss Harvesting</span> </h1>\n\n    <div class="clearfix content">\n        <div class="step1 white-box">\n            <h3>\n                <span class="blue">Step 1:</span> Spousal Account\n                <div class="spouse-help help-icon">\n                    Due to the tax reporting requirements across accounts, we do not recommend Tax Loss\n                    Harvesting if your spouse has a BetaSmartz account.  We will notify you when\n                    we offer this service for spousal accounts.\n                </div>\n            </h3>\n            <p>Do you have a spouse who currently has a funded BetaSmartz account or SMF?</p>\n\n            <div class="answer-area">\n                <input type="radio" name="have-spouse" value="yes" id="haveSpouseYes" />\n                <label for="haveSpouseYes">Yes</label>\n                <input type="radio" name="have-spouse" value="no" id="haveSpouseNo" />\n                <label for="haveSpouseNo">No</label>\n            </div>\n\n            <div class="not-eligible">\n                <h2>OUR ADVICE</h2>\n                <p>\n                    Due to the tax reporting requirements across accounts, we do not recommend Tax Loss\n                    Harvesting if your spouse has a BetaSmartz account.  We will notify you when\n                    we offer this service for spousal accounts.\n                </p>\n                <a class="change-selection">&lt; Change my selection</a>\n            </div>\n\n            <div class="scrim"></div>\n        </div>\n\n        <div class="step2 white-box">\n            <h3>\n                <span class="blue">Step 2:</span> Other Accounts\n                <div class="joint-acct-help help-icon">\n                    Due to the tax reporting requirements across accounts, we do not recommend Tax Loss Harvesting if you have other accounts at BetaSmartz.\n                </div>\n            </h3>\n            <p>', (u = n.accountGroupText) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.accountGroupText, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '</p>\n            <div class="answer-area">\n                <input type="radio" name="have-joint-acct" value="yes" id="haveJointAcctYes" />\n                <label for="haveJointAcctYes">Yes</label>\n                <input type="radio" name="have-joint-acct" value="no" id="haveJointAcctNo" />\n                <label for="haveJointAcctNo">No</label>\n            </div>\n\n            <div class="not-eligible">\n                <h2>OUR ADVICE</h2>\n                <p>\n                    Due to the tax reporting requirements across accounts, we do not recommend Tax Loss Harvesting if you have other accounts at BetaSmartz.\n                </p>\n                <a class="change-selection">&lt; Change my selection</a>\n            </div>\n\n            <div class="scrim"></div>\n        </div>\n\n        <div class="step3 white-box">\n            <h3>\n                <span class="blue">Step 3:</span> Overlapping Securities\n                <div class="etf-help help-icon">\n                    Tax Loss Harvesting relies on avoiding wash sales. If you purchase or sell these same\n                    securities elsewhere you may inadvertently trigger a wash sale which could reduce or\n                    eliminate any tax benefit.\n                </div>\n            </h3>\n            <p>Do you or your spouse hold or plan on buying or selling any securities that overlap with\n            <a href="http://www.betasmartz.com/resources/can-i-still-use-tax-loss-harvesting-if-i-have-overlapping-securities-in-other-accounts-what-are-those-overlapping-securities" target="_blank">BetaSmartz&#39;s portfolio</a>?\n            Think about your SMFs and brokerage accounts.</p>\n\n            <div class="answer-area">\n                <input type="radio" name="have-etfs" value="yes" id="haveEtfsYes" />\n                <label for="haveEtfsYes">Yes</label>\n                <input type="radio" name="have-etfs" value="no" id="haveEtfsNo" />\n                <label for="haveEtfsNo">No</label>\n                <input type="radio" name="have-etfs" value="dont-know" id="haveEtfsDontKnow" />\n                <label for="haveEtfsDontKnow">I don&#39;t know</label>\n            </div>\n\n            <div class="not-eligible">\n                <h2>OUR ADVICE</h2>\n                <p>\n                    You can avoid tax conflicts by replacing the overlapping securities with others,\n                    or by holding (not buying or selling) them.  Moving investments\n                    to BetaSmartz, including SMFs, allows us to most effectively tax loss harvest for you.\n                    \n                </p>\n                <a class="change-selection">&lt; Change my selection</a>\n            </div>\n\n            <div class="dont-know">\n                <h2>OUR ADVICE</h2>\n                <p>\n                    Compare the BetaSmartz portfolio securities to the securities on your other\n                    investment account statements.\n                </p>\n                <a href="http://www.betasmartz.com/resources/use-tax-loss-harvesting-if-i-have-overlapping-securities-in-other-accounts-what-are-those-overlapping-securities" target="_blank" class="learn-more">Learn about overlapping securities</a>\n                <a class="change-selection">&lt; Change my selection</a>\n            </div>\n\n            <div class="scrim"></div>\n        </div>\n    </div>\n\n    <div class="support">\n        <p>\n            Questions? <a target="_blank" href="http://www.betasmartz.com/resources/tax-loss-harvesting-faqs">Read our FAQs.</a>\n        </p>\n    </div>\n\n    <div class="agreement">\n        <input type="checkbox" name="agreement" id="userAgreement" />\n        <label for="userAgreement">\n            I have read and agree to the Tax Loss Harvesting <a href="http://www.betasmartz.com/documents/Tax-Loss-Harvesting%2B-Disclosure.pdf" target="_blank">Disclosure</a> and\n            updated <a href="/static/docs/Mock_Client_Agreement.pdf" target="_blank">Customer Agreement</a>.\n        </label>\n    </div>\n\n    <div class="actions">\n        <a class="back"><span class="chevron-left icon"></span> Back</a>\n        <button class="confirm" disabled="disabled">Enable Tax Loss Harvesting</button>\n        <button class="check-back">OK</button>\n        <button class="silver cancel white-hover">Not right now</button>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/taxLossHarvesting/consentRibbon", n), n
    }), define("views/taxLossHarvesting/consentRibbonView", ["views/taxLossHarvesting/baseTlhRibbonView", "views/common/supportView", "services/taxLossHarvestingService", "components/common/scripts/services/domainService", "components/common/scripts/util/handlebarsHelpers", "hbs!views/taxLossHarvesting/consentRibbon"], function(e, t, n, r, i, s) {
        var o = .7;
        return e.extend({
            className: "tlh-ribbon tlh-consent",
            template: s,
            templateHelpers: {
                accountGroupText: function() {
                    var e;
                    return BMT.accountGroup.isTrust() ? e = "In addition to your trust account, do you have a funded personal account, SMF, or joint account?" : BMT.accountGroup.isJointAccount() ? e = "In addition to your joint account, do you have a funded personal account, SMF, or trust account?" : e = "In addition to your personal account, do you have a funded joint account or trust account?", i.s(e)
                }
            },
            events: {
                "click .confirm": "onConfirm",
                "click .contact-support": "showSupport",
                "click .cancel, .check-back": "onCancel",
                "change [name=have-spouse]": "haveSpouseChanged",
                "change [name=have-joint-acct]": "haveJointAcctChanged",
                "change [name=have-etfs]": "haveEtfsChanged",
                "change input": "checkValid",
                "click .change-selection": "changeSelection",
                "click .back": "backToLearnMore"
            },
            toolTips: {
                ".spouse-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                },
                ".joint-acct-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                },
                ".etf-help": {
                    position: {
                        my: "bottom center",
                        at: "top center"
                    }
                }
            },
            onConfirm: function() {
                this.validate() && (this.$(".confirm").prop("disabled", !0), n.consentForAccountGroup(BMT.accountGroup).then(function() {
                    BMT.analytics.track("TLHEnabled", {
                        Location: "TLHRibbon"
                    }), BMT.vent.trigger("taxLossHarvesting:complete"), BMT.vent.trigger("taxLossHarvesting:update")
                }, function() {
                    this.$(".confirm").removeAttr("disabled")
                }.bind(this)))
            },
            onCancel: function() {
                BMT.vent.trigger("closeDrawer")
            },
            haveSpouseChanged: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "SpouseAgree",
                    Location: "TLHRibbon",
                    Value: $(e.currentTarget).val().capitalize()
                }), this._showAdviceMessage(e), this._checkValidAnswer(e)
            },
            haveJointAcctChanged: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "JointAcctAgree",
                    Location: "TLHRibbon",
                    Value: $(e.currentTarget).val().capitalize()
                }), this._showAdviceMessage(e), this._checkValidAnswer(e)
            },
            haveEtfsChanged: function(e) {
                BMT.analytics.track("ElementClicked", {
                    Name: "OtherETFAgree",
                    Location: "TLHRibbon",
                    Value: $(e.currentTarget).val().capitalize()
                }), this._showAdviceMessage(e)
            },
            _showAdviceMessage: function(e) {
                var t = $(e.currentTarget),
                    n = t.closest(".white-box");
                t.val() === "yes" ? n.find(".not-eligible").fadeIn() : t.val() === "dont-know" && n.find(".dont-know").fadeIn()
            },
            _checkValidAnswer: function(e) {
                this.$("[name=have-spouse]:checked").val() === "yes" ? (this.$(".step2,.step3").find(".scrim").show().animate({
                    opacity: o
                }), this._hideControls()) : this.$("[name=have-joint-acct]:checked").val() === "yes" ? (this.$(".step2").find(".scrim").animate({
                    opacity: 0
                }).hide(), this.$(".step3").find(".scrim").show().animate({
                    opacity: o
                }), this._hideControls()) : (this.$(".step2,.step3").find(".scrim").animate({
                    opacity: 0
                }).hide(), this._showControls())
            },
            _hideControls: function() {
                this.$(".agreement").animate({
                    opacity: 0
                }), this.$(".confirm").hide(), this.$(".cancel").hide(), this.$(".check-back").show()
            },
            _showControls: function() {
                this.$(".agreement").animate({
                    opacity: 1
                }), this.$(".check-back").hide(), this.$(".confirm").show(), this.$(".cancel").show()
            },
            changeSelection: function(e) {
                $(e.currentTarget).closest(".not-eligible, .dont-know").fadeOut()
            },
            checkValid: function() {
                this.validate() ? this.$(".confirm").removeAttr("disabled") : this.$(".confirm").prop("disabled", !0)
            },
            validate: function() {
                return this.$("[name=have-spouse]:checked").val() === "no" && this.$("[name=have-joint-acct]:checked").val() === "no" && this.$("[name=agreement]").is(":checked")
            },
            showSupport: function(e) {
                e.preventDefault(), BMT.modal.show(new t)
            },
            backToLearnMore: function() {
                BMT.vent.trigger("taxLossHarvesting:learnMore")
            }
        })
    }), define("hbs!views/taxLossHarvesting/completeRibbon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="inner">\n    <h1>Success! <span class="blue">You have enabled Tax Loss Harvesting</span> </h1>\n    <div class="content pinch clearfix">\n        <div class="left success-messages">\n            <div class="success-detail">\n                <div class="checkbox-headline">\n                    <span class="light-blue-check icon"></span> Enjoy a more tax-efficient portfolio\n                </div>\n                <div class="text">\n                    Your account will be transitioned to a new, more tax-efficient portfolio\n                    designed for Tax Loss Harvesting. <span class="bold-text">You may not see\n                    changes to your portfolio immediately</span> because we avoid\n                    short-term capital gains so your account is transitioned in a tax-efficient\n                    manner.\n                </div>\n            </div>\n            <div class="success-detail">\n                <div class="checkbox-headline">\n                    <span class="light-blue-check icon"></span> Losses will be harvested automatically\n                </div>\n                <div class="text">\n                    <ul>\n                        <li>\n                            Every day, Tax Loss Harvesting will actively look for opportunities to\n                            reduce your taxes.\n                        </li>\n                        <li>\n                            At tax time, file your return as usual.\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n        <div class="white-box clearfix tip right">\n            <div class="icon">\n                <div class="lightbulb-tip-icon"></div>\n            </div>\n            <div class="text">\n                Turning on automatic deposits increases your opportunities to harvest losses.\n            </div>\n            <button class="secondary green deposit-settings" style="display:none">Deposit Settings</button>\n        </div>\n    </div>\n\n    <div class="actions">\n        <button class="confirm">Great! Got it.</button>\n        <p class="turn-off-text">\n            Didn\'t mean to enable this feature?\n            <a class="turn-off">Turn off Tax Loss Harvesting</a>\n        </p>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/taxLossHarvesting/completeRibbon", n), n
    }), define("hbs!views/taxLossHarvesting/completeFlyover", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<h2>' +
            'Tax Loss Harvesting <span class="tlh-status">ON</span></h2>\n<p>\n    You&#39;re all set. Your harvested losses will be tracked here and you\n    don&#39;t need to do anything more. Our algorithm will continue to\n    check your account for losses and help you save on taxes.\n</p>\n<button class="dismiss-flyover">OK</button>\n'
        });
        return t.registerPartial("views/taxLossHarvesting/completeFlyover", n), n
    }), define("views/taxLossHarvesting/completeRibbonView", ["views/taxLossHarvesting/baseTlhRibbonView", "hbs!views/taxLossHarvesting/completeRibbon", "hbs!views/taxLossHarvesting/completeFlyover", "services/taxLossHarvestingService", "services/flyoverService", "models/notification", "views/notifications/dismissibleFlyoverView"], function(e, t, n, r, i, s, o) {
        return e.extend({
            className: "tlh-ribbon",
            template: t,
            events: {
                "click .confirm": "onConfirm",
                "click .turn-off": "onTurnOff",
                "click .deposit-settings": "changeAutoDepositSettings"
            },
            onInitialize: function() {
                this.listenTo(this, "destroy", function() {
                    if (r.isUserOn(BMT.accountGroup)) {
                        var e = new s({}, {
                            view: o,
                            template: n
                        });
                        i.showFlyover(e, {
                            viewOptions: {
                                className: "flyover tlh-complete"
                            }
                        })
                    }
                })
            },
            onConfirm: function() {
                BMT.vent.trigger("closeDrawer")
            },
            onTurnOff: function() {
                this.$(".turn-off").prop("disabled", !0), r.disableForAccountGroup(BMT.accountGroup).then(function() {
                    BMT.analytics.track("TLHDisabled", {
                        Location: "TLHRibbon"
                    }), BMT.flash("Tax Loss Harvesting has been disabled."), BMT.vent.trigger("taxLossHarvesting:update"), BMT.vent.trigger("closeDrawer")
                }).fail(function() {
                    this.$(".turn-off").removeAttr("disabled")
                }.bind(this))
            },
            changeAutoDepositSettings: function() {
                BMT.router.navigate("transfer", !0)
            }
        })
    }), define("hbs!views/taxLossHarvesting/whatToExpectRibbon", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/link"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a, f = n.helperMissing;
            s += '<div class="inner">\n    <h1>Learn about <span class="blue">Tax Loss Harvesting</span> </h1>\n    <div class="clearfix content">\n        <div class="white-box how-it-works">\n            <div class="top-image"></div>\n            <h2 class="blue">How It Works</h2>\n            <p>Securities with material losses are sold and replaced with similar securities.\n            Total losses harvested are displayed on Summary, and transaction details on Activity.</p>\n        </div>\n\n        <div class="white-box what-to-expect">\n            <div class="top-image"></div>\n            <h2 class="blue">What to Expect</h2>\n            <p>Current holdings, including replacement securities, are displayed on the Portfolio page.\n            Transactions rebalance your portfolio which saves you taxes later.</p>\n        </div>\n\n        <div class="white-box your-tax-return">\n            <div class="top-image"></div>\n            <h2 class="blue">Your Tax Return</h2>\n            <p>The benefits of Tax Loss Harvesting will appear on your tax return when you file as\n            usual using Betterment&#39;s tax forms. ', o = (u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.learnMoreLink, a) : f.call(t, "link", t && t.learnMoreLink, a));
            if (o || o === 0) s += o;
            s += '</p>\n        </div>\n    </div>\n    <div class="bottom-links">\n        ', o = (u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.faqLink, a) : f.call(t, "link", t && t.faqLink, a));
            if (o || o === 0) s += o;
            s += "\n        &nbsp;&nbsp;|&nbsp;&nbsp;\n        ", o = (u = n.link || t && t.link, a = {
                hash: {}
            }, u ? u.call(t, t && t.whitePaperLink, a) : f.call(t, "link", t && t.whitePaperLink, a));
            if (o || o === 0) s += o;
            return s += '\n    </div>\n    <div class="actions">\n        <button class="flat confirm">Close</button>\n        <button class="silver white-hover turn-off">Turn off Tax Loss Harvesting</button>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/taxLossHarvesting/whatToExpectRibbon", n), n
    }), define("views/taxLossHarvesting/whatToExpectRibbonView", ["views/taxLossHarvesting/baseTlhRibbonView", "hbs!views/taxLossHarvesting/whatToExpectRibbon", "services/taxLossHarvestingService"], function(e, t, n) {
        return e.extend({
            className: "tlh-ribbon tlh-what-to-expect",
            template: t,
            events: {
                "click .confirm": "onConfirm",
                "click .turn-off": "onTurnOff"
            },
            templateHelpers: {
                learnMoreLink: {
                    supportUrl: "customer/portal/articles/1593451-how-will-tax-loss-harvesting-affect-my-tax-returns-",
                    text: "Learn More >"
                },
                faqLink: {
                    supportUrl: "customer/portal/topics/670337-tax-loss-harvesting/articles",
                    text: "FAQs"
                },
                whitePaperLink: {
                    supportUrl: "resources/tax-loss-harvesting-white-paper/",
                    text: "White Paper"
                }
            },
            onConfirm: function() {
                BMT.vent.trigger("closeDrawer")
            },
            onTurnOff: function() {
                this.$(".turn-off").prop("disabled", !0), n.disableForAccountGroup(BMT.accountGroup).then(function() {
                    BMT.analytics.track("TLHDisabled", {
                        Location: "TLHRibbon"
                    }), BMT.flash("Tax Loss Harvesting has been disabled."), BMT.vent.trigger("taxLossHarvesting:update"), BMT.vent.trigger("closeDrawer")
                }).fail(function() {
                    this.$(".turn-off").removeAttr("disabled")
                }.bind(this))
            }
        })
    }), define("views/drawers/tlhRibbonView", ["views/drawers/baseDrawerView", "views/taxLossHarvesting/introRibbonView", "views/taxLossHarvesting/consentRibbonView", "views/taxLossHarvesting/completeRibbonView", "views/taxLossHarvesting/whatToExpectRibbonView"], function(e, t, n, r, i) {
        return e.extend({
            id: "tlhRibbon",
            onInitialize: function() {
                this.listenTo(BMT.vent, "taxLossHarvesting:learnMore", function() {
                    BMT.analytics.track("ElementViewed", {
                        Name: "TLHRibbon"
                    }), this.transitionToRibbon(t)
                }), this.listenTo(BMT.vent, "taxLossHarvesting:consent", function() {
                    this.transitionToRibbon(n)
                }), this.listenTo(BMT.vent, "taxLossHarvesting:complete", function() {
                    this.transitionToRibbon(r)
                }), this.listenTo(BMT.vent, "taxLossHarvesting:whatToExpect", function() {
                    this.transitionToRibbon(i)
                })
            }
        })
    }), define("hbs!views/jointAccountSignup/jointAccountSignup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="header-region">\n    <h1 class="splash-welcome">Open a joint account</h1>\n</div>\n\n<span class="close-drawer">+</span>\n\n<div class="content-region"></div>\n'
        });
        return t.registerPartial("views/jointAccountSignup/jointAccountSignup", n), n
    }), define("hbs!views/jointAccountSignup/splash", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<p>\n    Joint accounts allow you to create and manage your financial goals together.<br/>\n    Each joint account holder has access to the account and can transfer funds, create goals and more.\n</p>\n\n<ol class="tiles">\n    <li class="tile joint-invite">\n        <h3>Invite someone</h3>\n        <p>The joint account holder will receive an invitation via email.</p>\n    </li>\n    <li class="tile joint-link">\n        <h3>Link a Checking Account</h3>\n        <p>Link existing checking account or add a new one to your joint account.</p>\n    </li>\n    <li class="tile joint-add">\n        <h3>Create Goals</h3>\n        <p>Create goals to start<br>investing together.</p>\n    </li>\n</ol>\n\n<a class="faq-link" href="#" target="_blank">Frequently Asked Questions &gt;</a>\n\n<button>\n    Open now\n</button>\n'
        });
        return t.registerPartial("views/jointAccountSignup/splash", n), n
    }), define("views/jointAccountSignup/splashView", ["common/betterment.views", "components/common/scripts/analytics/analytics", "hbs!views/jointAccountSignup/splash"], function(e, t, n) {
        return e.View.extend({
            className: "splash",
            events: {
                "click button": "next"
            },
            template: n,
            next: function() {
                t.track("ElementClicked", {
                    Name: "JointAccountStart",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.trigger("next")
            }
        })
    }), define("hbs!views/jointAccountSignup/account", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return '\n            <label class="add-owner">\n                <input name="isRetitle" type="radio" value="true"  /> Add an owner to my personal account\n            </label>\n        '
            }

            function f(e, t) {
                return '\n        <p class="retitle-warning error">\n            Unfortunately, we currently can\'t add an owner if you have an SMF.\n        </p>\n    '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<form class="account-method-body">\n    <h1>Choose joint account method</h1>\n\n    <p class="secondary">\n        If you add someone, your personal account will become a joint account and all assets will be accessible to your joint account holder.  If you create a separate account, your personal account will remain as is.\n    </p>\n\n    <div class="account-method">\n        ', o = n["if"].call(t, t && t.canRetitle, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += '\n        <label class="create-account">\n            <input name="isRetitle" type="radio" value="false" /> Create a separate joint account\n        </label>\n        ', o = n.unless.call(t, t && t.canRetitle, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += "\n    </div>\n\n    ", o = n.unless.call(t, t && t.canRetitle, {
                hash: {},
                inverse: u.noop,
                fn: u.program(3, f, i)
            });
            if (o || o === 0) s += o;
            return s += '\n\n    <div class="button-wrapper">\n        <button disabled="disabled">\n            Continue\n        </button>\n    </div>\n</form>\n', s
        });
        return t.registerPartial("views/jointAccountSignup/account", n), n
    }), define("views/jointAccountSignup/accountView", ["common/betterment.views", "hbs!views/jointAccountSignup/account", "components/common/scripts/analytics/analytics", "models/v1/jointAccountInvite"], function(e, t, n, r) {
        return e.View.extend({
            events: {
                "click button": "next",
                "change input[name=isRetitle]": "inputsChanged"
            },
            ui: {
                nextButton: "button",
                addOwnerLabel: ".add-owner",
                addOwnerInput: ".add-owner input"
            },
            className: "signup-step",
            template: t,
            templateHelpers: {
                canRetitle: function() {
                    return !BMT.accountGroup.hasIRAGoal()
                }
            },
            onShow: function() {
                BMT.accountGroup.hasIRAGoal() && (this.ui.addOwnerLabel.addClass("disabled"), this.ui.addOwnerInput.prop("disabled", !0))
            },
            inputsChanged: function() {
                this.ui.nextButton.prop("disabled", !1), this.model.set({
                    isRetitle: this.$("input[name=isRetitle]:checked").val() === "true"
                })
            },
            next: function(e) {
                n.track("ElementClicked", {
                    Name: "JointAccountMethod",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.trigger("next")
            }
        })
    }), define("hbs!views/jointAccountSignup/acceptAgreement", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<form class="agreement">\n    <h1>Customer agreement</h1>\n\n    <div class="tlh-warning">\n          </div>\n\n    <div class="terms-of-service"></div>\n\n    <div class="button-wrapper">\n        <button class="accept-agreement" disabled="disabled">\n            Continue\n        </button>\n    </div>\n</form>\n'
        });
        return t.registerPartial("views/jointAccountSignup/acceptAgreement", n), n
    }), define("views/jointAccountSignup/acceptAgreementView", ["common/betterment.views", "hbs!views/jointAccountSignup/acceptAgreement", "components/common/scripts/services/browserService", "components/common/scripts/analytics/analytics", "models/v1/jointAccountInvite", "views/common/termsOfServiceView"], function(e, t, n, r, i, s) {
        return e.View.extend({
            events: {
                "click button": "next",
                "change input[name=tlhAgreement], input[name=userAgreement]": "inputsChanged"
            },
            regions: {
                termsOfServiceRegion: ".terms-of-service"
            },
            ui: {
                nextButton: "button.accept-agreement",
                tlhAgreement: "input[name=tlhAgreement]"
            },
            className: "signup-step",
            template: t,
            onShow: function() {
                this.termsOfServiceRegion.show(new s({
                    showJointAccountAgreement: !0,
                    disableExpansion: !0
                }))
            },
            inputsChanged: function() {
                var e =  this.termsOfServiceRegion.currentView.hasUserAcceptedAgreements();
                this.model.set({
                    acceptedAgreement: e
                }), this.ui.nextButton.prop("disabled", !e)
            },
            next: function(e) {
                this.termsOfServiceRegion.currentView.checkAgreements(), this.model.get("acceptedAgreement") && (r.track("ElementClicked", {
                    Name: "JointAccountAgree",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.trigger("next"))
            }
        })
    }), define("hbs!views/jointAccountSignup/invite", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<form class="invite">\n    <h1>Invite joint account holder</h1>\n\n    <p class="secondary">\n        Please enter the email address associated with your partner\'s account. <span class="unadvised-user-only">If your partner does not have a BetaSmartz account, <a class="invite">you can refer him or her here</a>.</span>\n    </p>\n\n    <div class="invite-input">\n        <input type="text" placeholder="Enter email of joint account holder" />\n        <span class="error icon"></span>\n    </div>\n\n    <div class="invite-error-wrapper">\n        <p class="error own-email">\n            To create a joint account, please enter the email address associated with the customer that you\'d like to create a joint account with. You can only invite current customers to your joint account. For more information, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error advised-email">\n            You can only invite other clients that are managed by your advisor. For more information, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error non-customer">\n            The email address that you entered is not associated with a current customer. In order to invite someone to a joint account, they must be a current customer. For more information, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error invitation-exists">\n            You currently have a pending joint account invitation with this customer. If you would like to invite a different user to your joint account, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error one-account-limit">\n            You are currently associated with an active joint account. If you would like to create a new joint account, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error another-pending-invite">\n            You currently have a pending joint account invitation. If you would like to invite a different user to your joint account, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error missing-personal-account">\n            In order to add an owner to your account, you must have an active personal account. For more information, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n        <p class="error ira-exists">\n            We cannot add an owner to your personal account because you have an IRA, and you cannot have an IRA in a joint account. For more information, please contact us at ', (u = n.supportPhone) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportPhone, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' or <a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</a>.\n        </p>\n    </div>\n\n    <div class="button-wrapper">\n        <button class="send-invite" disabled="disabled">\n            Send invitation\n        </button>\n    </div>\n</form>\n', s
        });
        return t.registerPartial("views/jointAccountSignup/invite", n), n
    }), define("views/jointAccountSignup/inviteView", ["underscore", "common/betterment.views", "hbs!views/jointAccountSignup/invite", "components/common/scripts/analytics/analytics", "components/common/scripts/services/browserService", "components/common/scripts/services/domainService", "components/common/scripts/viewHelpers/customerSupport"], function(e, t, n, r, i, s, o) {
        var u = {
            advisedUsers: "advised-email",
            invitationExists: "invitation-exists",
            tooManyJointAccounts: "one-account-limit",
            tooManyInvitations: "another-pending-invite",
            noPersonalAccountGroup: "missing-personal-account",
            iraExists: "ira-exists",
            invitedEmail: "non-customer"
        };
        return t.View.extend({
            events: {
                "click button": "next",
                "click a.invite": "scrollToInvite",
                "keyup .invite-input input": "inputsChanged"
            },
            ui: {
                input: ".invite-input input",
                inviteButton: "button.send-invite"
            },
            className: "signup-step",
            template: n,
            templateHelpers: {
                supportPhone: function() {
                    return o.getSupportNumber()
                },
                supportEmail: function() {
                    return o.getSupportEmail()
                }
            },
            onShow: function() {
                this.ui.input.placeholder(), i.hasFocusedPlaceholderSupport() && setTimeout(function() {
                    this.ui.input.focus()
                }.bind(this), 250)
            },
            inputsChanged: function() {
                this.model.validate({
                    invitedEmail: this.ui.input.val().trim()
                }) ? this.ui.inviteButton.prop("disabled", !0) : this.ui.inviteButton.prop("disabled", !1)
            },
            next: function(e) {
                this.hideErrors();
                var t = this.ui.input.val().trim();
                t.toLowerCase() === BMT.user.get("userName").toLowerCase() ? this.showErrors("own-email") : (this.block(), this.model.save({
                    invitedEmail: t
                }, {
                    skipErrorAlert: !0,
                    success: function(e) {
                        this.unblock(), r.track("ElementClicked", {
                            Name: "JointAccountInvite",
                            Location: BMT.currentPage.capitalize(),
                            Type: "Button"
                        }), this.trigger("next", e.get("accountGroupId"), t)
                    }.bind(this),
                    error: function(e, t) {
                        this.unblock();
                        var n = this.extractError(t);
                        this.showErrors(n), n === "advised-email" ? r.track("ElementClicked", {
                            Name: "JointAccountInvite_AdvisedError",
                            Location: BMT.currentPage.capitalize(),
                            Type: "Button"
                        }) : r.track("ElementClicked", {
                            Name: "JointAccountInvite_NonCustomerError",
                            Location: BMT.currentPage.capitalize(),
                            Type: "Button"
                        })
                    }.bind(this)
                }))
            },
            extractError: function(t) {
                var n = t.responseJSON.errorMessages || {};
                return e.chain(n).map(function(e, t) {
                    return u[t] || "non-customer"
                }).first().value()
            },
            showErrors: function(e) {
                this.$(".error").css({
                    visibility: "visible"
                }).hide(), this.$(".error.icon, .error." + e).fadeIn("slow")
            },
            hideErrors: function() {
                this.$(".error").css({
                    visibility: "hidden"
                })
            },
            scrollToInvite: function() {
                BMT.router.navigate("invite", {
                    trigger: !0
                }), $("html, body").animate({
                    scrollTop: $("#invite").offset().top
                }, 500)
            }
        })
    }), define("hbs!views/jointAccountSignup/linkBank", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <div class="current-account">\n                        <label><input name="bankAccount" type="radio" value="personal" /> Link current account (', (s = n.bankAccountName) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.bankAccountName, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + ')</label>\n                    </div>\n                    <div class="another-account">\n                        <label><input name="bankAccount" type="radio" value="none" /> Link checking account later</label>\n                    </div>\n                ', r
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<form class="link-bank-step">\n    <h1>Link a checking account</h1>\n\n    <div class="new-account-options">\n        <div class="has-linked-account">\n            <p class="secondary">\n                Instantly fund your joint account from your current checking account, or you can add a new checking account later.  Note, you can only have <span class="bold">one</span> checking account linked to your joint account.\n            </p>\n\n            <div class="link-bank-input">\n                ', o = n["if"].call(t, t && t.bankAccountName, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n            </div>\n        </div>\n\n        <div class="no-linked-account">\n            <p class="secondary">\n                You\'ll be able to link your checking account<br/>\n                after creating your joint account.\n            </p>\n        </div>\n    </div>\n\n    <div class="retitle-message">\n        <p class="secondary">\n            You do not need to specify a bank account at this time because you are adding an owner to your existing account.\n        </p>\n    </div>\n\n    <div class="button-wrapper">\n        <button class="link-bank">\n            Continue\n        </button>\n    </div>\n</form>\n', s
        });
        return t.registerPartial("views/jointAccountSignup/linkBank", n), n
    }), define("views/jointAccountSignup/linkBankView", ["common/betterment.views", "components/common/scripts/analytics/analytics", "hbs!views/jointAccountSignup/linkBank", "services/bankAccountService"], function(e, t, n, r) {
        return e.View.extend({
            events: {
                "click button": "next"
            },
            ui: {
                newAccountOptions: ".new-account-options",
                hasLinkedAccount: ".has-linked-account",
                noLinkedAccount: ".no-linked-account",
                retitleMessage: ".retitle-message",
                continueButton: "button.link-bank"
            },
            className: "signup-step",
            template: n,
            templateHelpers: {
                bankAccountName: function() {
                    var e = this.self.getBankAccount();
                    if (e) return e.get("description") + " " + e.get("accountNumber")
                }
            },
            getBankAccount: function() {
                var e = r.getPersonalBankAccount(BMT.user);
                if (e && e.isActiveAndConfirmed()) return e
            },
            onRender: function() {
                var e = !!this.getBankAccount();
                this.ui.retitleMessage.toggle(this.options.inviteModel.is("isRetitle")), this.ui.newAccountOptions.toggle(!this.options.inviteModel.is("isRetitle")), this.ui.hasLinkedAccount.toggle(e), this.ui.noLinkedAccount.toggle(!e), this.ui.continueButton.prop("disabled", !this.options.inviteModel.is("isRetitle") && e), this.$("input[name=bankAccount]").on("change", function() {
                    this.ui.continueButton.prop("disabled", !1)
                }.bind(this))
            },
            next: function() {
                this.$("input[name=bankAccount]:checked").val() === "personal" && r.copyPersonalBankAccount(BMT.user, this.model, {
                    skipErrorAlert: !0
                }), t.track("ElementClicked", {
                    Name: "JointAccountBank",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.trigger("next")
            }
        })
    }), define("hbs!views/jointAccountSignup/confirmAccount", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return '\n            <button class="cancel silver">\n                Create goals later\n            </button>\n        '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            s += '<div class="joint-account-signup-confirm">\n\n    <div class="joint-accounts-success"></div>\n\n    <h1>Joint account invitation sent.</h1>\n\n    <p class="secondary">\n        We have sent <span class="invitee-email">', (u = n.inviteeEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.inviteeEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span> an email inviting them to confirm the creation of the joint account.  You can now create goals for this joint account and can fund these goals once <span class="invitee-email">', (u = n.inviteeEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.inviteeEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</span> has confirmed creation of this joint account.\n    </p>\n\n    <div class="button-wrapper">\n        <button class="finish-confirm">\n            ', (u = n.nextLabel) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.nextLabel, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + "\n        </button>\n        ", o = n["if"].call(t, t && t.showCancelButton, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += "\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/jointAccountSignup/confirmAccount", n), n
    }), define("views/jointAccountSignup/confirmAccountView", ["common/betterment.views", "components/common/scripts/analytics/analytics", "hbs!views/jointAccountSignup/confirmAccount"], function(e, t, n) {
        return e.View.extend({
            events: {
                "click button.finish-confirm": "next",
                "click button.cancel": "cancel"
            },
            className: "signup-step",
            template: n,
            templateHelpers: {
                inviteeEmail: function() {
                    return this.self.model.get("inviteeEmail")
                },
                nextLabel: function() {
                    return this.self.options.inviteModel.is("isRetitle") ? "Done" : "Finish and create goals"
                },
                showCancelButton: function() {
                    return !this.self.options.inviteModel.is("isRetitle")
                }
            },
            next: function() {
                t.track("ElementClicked", {
                    Name: "JointAccountDone",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.options.inviteModel.is("isRetitle") ? (BMT.vent.trigger("closeDrawer"), BMT.accountGroup.unset("jointAccountPendingInviteCollection"), BMT.refreshJointAccountInviteBanner()) : (this.block(), this.trigger("next"))
            },
            cancel: function() {
                t.track("ElementClicked", {
                    Name: "JointAccountDone",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), BMT.showLoading(), BMT.vent.trigger("closeDrawer"), this.trigger("cancel")
            }
        })
    }), define("views/jointAccountSignup/jointAccountSignupLayout", ["underscore", "common/betterment.views", "common/betterment.models", "hbs!views/jointAccountSignup/jointAccountSignup", "components/progressNav/scripts/progressNavView", "views/jointAccountSignup/splashView", "views/jointAccountSignup/accountView", "views/jointAccountSignup/acceptAgreementView", "views/jointAccountSignup/inviteView", "views/jointAccountSignup/linkBankView", "views/jointAccountSignup/confirmAccountView", "models/accountGroup", "models/v1/jointAccountInvite", "services/popoverService"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p) {
        return t.View.extend({
            className: "joint-account-signup-ribbon",
            template: r,
            regions: {
                contentRegion: ".content-region",
                headerRegion: ".header-region"
            },
            ui: {
                header: ".header-region",
                progressMeter: ".inner-bar"
            },
            onInitialize: function() {
                var e = new h;
                this.splashView = new s, this.progressView = new i({
                    steps: [{
                        label: "Account"
                    }, {
                        label: "Agreement"
                    }, {
                        label: "Invite"
                    }, {
                        label: "Bank"
                    }, {
                        label: "Complete"
                    }]
                }), this.accountView = new o({
                    model: e
                }), this.agreementView = new u({
                    model: e
                }), this.inviteView = new a({
                    model: e
                }), this.linkBankView = new f({
                    inviteModel: e
                }), this.confirmAccountView = new l({
                    inviteModel: e
                }), this.listenTo(this.splashView, "next", this.goToAccountType), this.listenTo(this.accountView, "next", this.goToAgreement), this.listenTo(this.agreementView, "next", this.goToInvite), this.listenTo(this.inviteView, "next", this.goToLinkBank), this.listenTo(this.linkBankView, "next", this.goToConfirm), this.listenTo(this.confirmAccountView, "next", this.goToAccount), this.listenTo(this.confirmAccountView, "cancel", this.informJointAccount)
            },
            onShow: function() {
                this.contentRegion.show(this.splashView), this.$el.animate({
                    opacity: 1,
                    top: "+=10"
                }, 500)
            },
            swipeLeft: function(t, n, r, i) {
                i = e.isFunction(i) ? i : undefined, t.animate({
                    opacity: 0,
                    left: "-=100%"
                }, 250, function() {
                    t.css({
                        left: "100%"
                    }), n.show(r), t.animate({
                        opacity: 1,
                        left: "-=100%"
                    }, 250, i)
                }.bind(this))
            },
            goToAccountType: function() {
                this.swipeLeft(this.contentRegion.$el, this.contentRegion, this.accountView), this.swipeLeft(this.ui.header, this.headerRegion, this.progressView, function() {
                    this.progressView.setActiveStep(0)
                }.bind(this))
            },
            goToAgreement: function() {
                this.progressView.setActiveStep(1), this.swipeLeft(this.contentRegion.$el, this.contentRegion, this.agreementView)
            },
            goToInvite: function() {
                this.progressView.setActiveStep(2), this.swipeLeft(this.contentRegion.$el, this.contentRegion, this.inviteView)
            },
            goToLinkBank: function(e, t) {
                this.confirmAccountView.model = new n.Model({
                    inviteeEmail: t
                }), this.model = new c.Model, this.model.set("id", e), this.linkBankView.model = this.model, this.progressView.setActiveStep(3), this.swipeLeft(this.contentRegion.$el, this.contentRegion, this.linkBankView)
            },
            goToConfirm: function() {
                this.progressView.setActiveStep(4), this.swipeLeft(this.contentRegion.$el, this.contentRegion, this.confirmAccountView)
            },
            goToAccount: function() {
                BMT.user.fetch().done(function() {
                    var e = BMT.user.get("accountGroups").get(this.model.id);
                    BMT.setAccountGroup(e)
                }.bind(this))
            },
            informJointAccount: function() {
                BMT.refreshAccountGroup(), p.show("jointAccountAdded")
            }
        })
    }), define("views/drawers/jointAccountSignupView", ["views/drawers/baseDrawerView", "views/jointAccountSignup/jointAccountSignupLayout"], function(e, t) {
        return e.extend({
            id: "jointAccountSignup",
            regions: {
                ribbonRegion: ".drawer-ribbon-region"
            },
            options: {
                preventClose: !0
            },
            onShow: function() {
                this.$(".collapse-circle").remove(), this.ribbonRegion.show(new t)
            }
        })
    }), define("regions/drawerRegion", ["jquery", "underscore", "marionette", "common/betterment.views", "components/common/scripts/analytics/analytics", "views/drawers/tlhRibbonView", "views/drawers/jointAccountSignupView"], function(e, t, n, r, i, s, o) {
        return n.Region.extend({
            el: ".ribbon-drawer",
            initialize: function() {
                var e = function(e, t, n) {
                    var r = function() {
                        this.show(t), BMT.vent.trigger(e + ":" + n), this.hideSecondaryContent(), this.$el.slideDown(500, "easeOutExpo", function() {
                            this.isShowing = !0
                        }.bind(this))
                    }.bind(this);
                    this.isShowing ? this.closeDrawer(function() {
                        r()
                    }.bind(this)) : r()
                }.bind(this);
                this.listenTo(BMT.vent, "openDrawer:showTlhRibbon", function(t) {
                    var n = new s;
                    e("taxLossHarvesting", n, t)
                }), this.listenTo(BMT.vent, "openDrawer:showJointAccountSignup", function(t) {
                    var n = new o;
                    e("jointAccountSignup", n, t)
                }), this.listenTo(BMT.vent, "closeDrawer", function(e) {
                    this.closeDrawer()
                })
            },
            closeDrawer: function(e) {
                i.track("ElementClicked", {
                    Name: "CloseDrawer",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Button"
                }), this.showSecondaryContent(), this.$el.slideUp(500, "easeOutExpo", function() {
                    this.empty(), this.isShowing = !1, e && e()
                }.bind(this))
            },
            showSecondaryContent: function() {
                e("#secondaryContent").show().slideDown(500, "easeOutExpo")
            },
            hideSecondaryContent: function() {
                e("#secondaryContent").slideUp(500, "easeOutExpo")
            },
            isShowing: !1
        })
    }), define("models/v1/feedItem", ["underscore", "models/v1/baseModels"], function(e, t) {
        var n = 50,
            r = "30x30",
            i = {
                isWebAction: function() {
                    var e = this.get("action_url");
                    return e && e.indexOf("betterment://") === -1
                },
                getAppActionSlug: function() {
                    var t = this.get("action_url");
                    if (this.isWebAction(t)) return "";
                    var n = t.split("betterment://");
                    return e.last(n)
                },
                isUnread: function() {
                    return this.get("viewed_at") === null
                },
                isHighPriority: function() {
                    return this.num("priority") < n
                },
                getIcon: function() {
                    return this.get("images")[r]
                }
            };
        return t.Model.extend(i)
    }), define("models/v1/feedItems", ["backbone", "underscore", "components/common/scripts/services/domainService", "models/v1/baseCollection", "models/v1/feedItem"], function(e, t, n, r, i) {
        var s = function() {
                return btoa(["bmt_user_" + BMT.user.get("id"), BMT.session.getToken("notifications")].join(":"))
            },
            o = {
                model: i,
                afterId: null,
                count: 10,
                url: function() {
                    return n.getNotificationsUrl() + "/api/messages"
                },
                requestData: function() {
                    var e = {
                        account_group_id: BMT.accountGroup.id,
                        count: this.count
                    };
                    return this.afterId !== null && (e.after_id = this.afterId), e
                },
                fetch: function(n) {
                    return e.Collection.prototype.fetch.call(this, t.extend(n || {}, {
                        skipErrorAlert: !0,
                        data: this.requestData(),
                        headers: {
                            Accept: "application/json",
                            Authorization: "Basic " + s()
                        }
                    }))
                },
                hasUnread: function() {
                    return this.any(function(e) {
                        return e.isUnread()
                    })
                },
                hasUnreadHighPriorityItem: function() {
                    return this.any(function(e) {
                        return e.isUnread() && e.isHighPriority()
                    })
                },
                getUnreadHighPriorityItem: function() {
                    return this.find(function(e) {
                        return e.isUnread() && e.isHighPriority()
                    })
                },
                fetchMore: function(e) {
                    return this.afterId = this.last().get("id"), this.fetch({
                        remove: !1
                    })
                }
            },
            u = r.extend(o);
        return u
    }), define("services/feedService", ["jquery", "underscore", "backbone", "components/common/scripts/services/dateService", "components/common/scripts/services/domainService", "models/v1/baseModels", "models/v1/feedItems"], function(e, t, n, r, i, s, o) {
        var u = null,
            a = function() {
                return btoa(["bmt_user_" + BMT.user.get("id"), BMT.session.getToken("notifications")].join(":"))
            },
            f = n.Model.extend({
                url: function() {
                    return i.getNotificationsUrl() + "/api/messages/" + this.get("messageId") + "/reading"
                },
                save: function(e) {
                    return n.Model.prototype.save.call(this, {}, t.extend(e || {}, {
                        skipErrorAlert: !0,
                        headers: {
                            Accept: "application/json",
                            Authorization: "Basic " + a()
                        }
                    }))
                }
            }),
            l = t.extend({}, n.Events, {
                markAsRead: function(e) {
                    return (new f({
                        messageId: e
                    })).save()
                },
                get: function() {
                    return u
                },
                fetch: function() {
                    var t = new e.Deferred,
                        n = new o;
                    return u !== null ? t.resolve(u) : n.fetch().then(function() {
                        u = n, t.resolve(n)
                    }, function(e) {
                        e.status === "401" ? BMT.session.refreshTokens().then(function() {
                            n.fetch().then(function() {
                                u = n, t.resolve(n)
                            }, function() {
                                t.reject()
                            })
                        }, function() {
                            t.reject()
                        }) : t.reject()
                    }), t.promise()
                }
            });
        return l
    }), define("hbs!views/feed/feedItem", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <div class="unread" style="background: ', (s = n.color) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.color, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '"></div>\n', r
            }

            function h(e, t) {
                var r = "",
                    i, s;
                return r += "\n                ", (s = n.postscript) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.postscript, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "\n            ", r
            }

            function p(e, t) {
                var r = "",
                    i, s;
                r += '\n            <a href="', (s = n.action_url) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.action_url, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + '" class="action ', i = n.unless.call(e, e && e.isWebAction, {
                    hash: {},
                    inverse: l.noop,
                    fn: l.program(6, d, t)
                });
                if (i || i === 0) r += i;
                return r += '" target="_blank">', (s = n.action_text) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.action_text, i = typeof s === a ? s.call(e, {
                    hash: {}
                }) : s), r += f(i) + "</a>\n        ", r
            }

            function d(e, t) {
                return "internal-action"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression,
                l = this;
            o = n["if"].call(t, t && t.isUnread, {
                hash: {},
                inverse: l.noop,
                fn: l.program(1, c, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n<div class="icon"><img src="', (u = n.icon) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.icon, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" /></div>\n\n<div class="content">\n    <div class="title">\n        <div style="color: ', (u = n.color) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.color, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">', (u = n.title) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.title, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</div>\n        <div class="date">\n            ', (u = n.createdAt) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.createdAt, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n        </div>\n    </div>\n    <div class="text">\n        ', (u = n.body) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.body, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '\n\n        <div class="post-script">\n            ', o = n["if"].call(t, t && t.postscript, {
                hash: {},
                inverse: l.noop,
                fn: l.program(3, h, i)
            });
            if (o || o === 0) s += o;
            s += "\n        </div>\n\n        ", o = n["if"].call(t, t && t.hasAction, {
                hash: {},
                inverse: l.noop,
                fn: l.program(5, p, i)
            });
            if (o || o === 0) s += o;
            return s += "\n    </div>\n</div>\n", s
        });
        return t.registerPartial("views/feed/feedItem", n), n
    }), define("views/feed/feedItemView", ["common/betterment.views", "components/common/scripts/analytics/analytics", "services/feedService", "hbs!views/feed/feedItem"], function(e, t, n, r) {
        var i = {
                template: r,
                className: "feed-item clearfix",
                templateHelpers: {
                    createdAt: function() {
                        var e = this.self.model.get("created_at").split("."),
                            t = Date.parse(e[0]),
                            n = Date.CultureInfo.abbreviatedMonthNames[t.getMonth()];
                        return t.isSameDay(Date.now()) ? "today" : n + " " + t.getDate()
                    },
                    isUnread: function() {
                        return this.self.model.isUnread()
                    },
                    icon: function() {
                        return this.self.model.getIcon()
                    },
                    hasAction: function() {
                        return this.self.model.has("action_url")
                    },
                    isWebAction: function() {
                        return this.self.model.isWebAction()
                    }
                },
                events: {
                    "click .internal-action": "performAction"
                },
                performAction: function() {
                    return t.track("ElementClicked", {
                        Location: "Updates",
                        Name: this.model.get("message_type"),
                        Type: "Button"
                    }), BMT.router.navigate(this.model.getAppActionSlug(), !0), n.trigger("feed:close"), !1
                },
                onShow: function() {
                    this.model.isUnread() && this.$el.addClass("unread")
                }
            },
            s = e.View.extend(i);
        return s
    }), define("hbs!views/feed/feedPanel", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="cover"></div>\n<div class="heading">\n    Updates\n    <div class="close-tab">x</div>\n</div>\n<div class="newest"></div>\n<div class="load-more">Load More</div>'
        });
        return t.registerPartial("views/feed/feedPanel", n), n
    }), define("views/feed/feedCompositeView", ["common/betterment.views", "components/common/scripts/analytics/analytics", "services/feedService", "views/feed/feedItemView", "hbs!views/feed/feedPanel"], function(e, t, n, r, i) {
        var s = {
                className: "feed-panel",
                template: i,
                childViewContainer: ".newest",
                getChildView: function() {
                    return r
                },
                events: {
                    "click .close-tab": "triggerClose",
                    "click @ui.loadMore": "loadMore"
                },
                ui: {
                    unread: ".unread",
                    loadMore: ".load-more"
                },
                onInitialize: function() {
                    this.listenTo(n, "feed:close", function() {
                        this.collection.each(function(e, t) {
                            e.set("viewed_at", Date.now(), {
                                silent: !0
                            })
                        }), this.render()
                    }.bind(this)), this.listenTo(this.collection, "change", this.render), $(document).click(this.hideFeedPanel.bind(this))
                },
                onShow: function() {
                    this.showPanel(), this.collection.length || this.ui.loadMore.hide()
                },
                showPanel: function() {
                    n.markAsRead(this.collection.first().id), this.$el.parent().css({
                        right: "0",
                        opacity: "1"
                    })
                },
                hideFeedPanel: function(e) {
                    this.isClickOutsideOfFeed(e) && n.trigger("feed:close")
                },
                isClickOutsideOfFeed: function(e) {
                    return $(e.target).closest(".feed-container").length === 0 && this.$el.is(":visible")
                },
                triggerClose: function() {
                    n.trigger("feed:close"), $(document).unbind("click", this.hideFeedPanel.bind(this))
                },
                loadMore: function() {
                    var e = this.collection.clone().length,
                        n = 10;
                    this.collection.fetchMore(n).then(function() {
                        var r = this.collection.length - e;
                        t.track("ElementClicked", {
                            Location: "Updates",
                            Name: "LoadMore",
                            Type: "Button",
                            Offset: this.collection.length
                        }), r < n && this.ui.loadMore.hide()
                    }.bind(this), function() {
                        BMT.alert({
                            title: "Updates are not available",
                            body: "We cannot retrieve more notifications right now. Check back again later.",
                            icon: "warning"
                        })
                    }.bind(this))
                }
            },
            o = e.CompositeView.extend(s);
        return o
    }), define("regions/feedRegion", ["marionette", "components/common/scripts/analytics/analytics", "views/feed/feedCompositeView", "services/feedService"], function(e, t, n, r) {
        var i = {
                el: ".feed-container",
                initialize: function() {
                    this.listenTo(r, "feed:open", this.open), this.listenTo(r, "feed:close", this.closePanel)
                },
                open: function() {
                    this.currentView ? this.currentView.showPanel() : r.fetch().then(function(e) {
                        this.show(new n({
                            collection: e
                        }))
                    }.bind(this))
                },
                closePanel: function() {
                    t.track("ElementClicked", {
                        Location: "Updates",
                        Name: "CloseUpdates",
                        Type: "Button"
                    }), this.$el.css({
                        right: "-450px",
                        opacity: ".3"
                    })
                }
            },
            s = e.Region.extend(i);
        return s
    }), define("hbs!views/common/subnav/subnav", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div id="linksRegion"></div>\n'
        });
        return t.registerPartial("views/common/subnav/subnav", n), n
    }), define("hbs!views/common/subnav/demoLinks", ["hbs", "hbs/handlebars", "components/common/scripts/templateHelpers/brochureUrl"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = n.helperMissing,
                f = this.escapeExpression;
            return s += '<p class="pricing ghost">\n    <span class="invest-for-free">Invest for free for</span>\n    <a href="' + f((o = n.brochureUrl || t && t.brochureUrl, u = {
                hash: {}
            }, o ? o.call(t, "pricing", u) : a.call(t, "brochureUrl", "pricing", u))) + '" class="thirty-days" data-track-event="ElementClicked" data-track-module="Explore" data-track-location="UserLinks" data-track-name="Pricing" target="_blank">30 days</a>\n</p>\n<button class="orange large signup" data-track-event="ElementClicked" data-track-module="Explore" data-track-location="UserLinks" data-track-name="Signup">Sign Up</button>\n', s
        });
        return t.registerPartial("views/common/subnav/demoLinks", n), n
    }), define("views/common/subnav/demoLinksView", ["common/betterment.views", "hbs!views/common/subnav/demoLinks"], function(e, t) {
        return e.View.extend({
            template: t,
            id: "demoLinks",
            events: {
                "click .signup": "doSignup"
            },
            doSignup: function(e) {
                e && e.preventDefault(), BMT.user.is("demo") ? BMT.vent.trigger("logout", {
                    after: function() {
                        BMT.accountGroup = BMT.user.getDefaultAccountGroup(), BMT.goToSignup()
                    }
                }) : BMT.goToSignup(), BMT.analytics.track("ElementClicked", {
                    Name: "SignUp",
                    Type: "Button",
                    Location: "Header",
                    Module: "Explore"
                })
            }
        })
    }), define("hbs!views/common/subnav/accountGroup", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function c(e, t) {
                return "%"
            }

            function h(e, t) {
                return "&#8249;"
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = this,
                f = "function",
                l = this.escapeExpression;
            s += '<span class="expand-icon">', o = n["if"].call(t, t && t.isSelected, {
                hash: {},
                inverse: a.program(3, h, i),
                fn: a.program(1, c, i)
            });
            if (o || o === 0) s += o;
            return s += '</span>\n\n<div class="group-title" title="', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + '">', (u = n.name) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.name, o = typeof u === f ? u.call(t, {
                hash: {}
            }) : u), s += l(o) + "</div>\n", s
        });
        return t.registerPartial("views/common/subnav/accountGroup", n), n
    }), define("views/common/subnav/accountGroupView", ["common/betterment.views", "hbs!views/common/subnav/accountGroup"], function(e, t) {
        return e.View.extend({
            template: t,
            className: "accountGroup",
            templateHelpers: {
                isSelected: function() {
                    return BMT.accountGroup.get("id") === this.self.model.get("id")
                }
            },
            events: {
                click: "selectAccountGroup"
            },
            onInitialize: function() {
                this.templateHelpers.isSelected() && this.$el.addClass("selected")
            },
            selectAccountGroup: function() {
                BMT.setAccountGroup(this.model)
            }
        })
    }), define("views/common/subnav/accountGroupsCollectionView", ["jquery", "underscore", "backbone", "common/betterment.views", "views/common/subnav/accountGroupView"], function(e, t, n, r, i) {
        return r.CollectionView.extend({
            getChildView: function() {
                return i
            },
            id: "accountGroupsCollection"
        })
    }), define("views/common/subnav/userLinksView", ["jquery", "underscore", "common/betterment.views", "views/common/subnav/accountGroupsCollectionView", "models/visitor", "components/common/scripts/analytics/analytics", "services/feedService"], function(e, t, n, r, i, s, o) {
        var u = 2e3,
            a = 5e3;
        return n.View.extend({
            template: "common/subnav/userLinks",
            tagName: "div",
            id: "userLinks",
            events: {
                "click #logoutLink": "logout",
                "click .user-links a": "gotoTab",
                "click .user-welcome": "toggleUserMenu",
                "click .invite a": "gotoTab",
                "click .add-a-trust": "goToTrustSignup",
                "click .add-a-joint-account": "goToJointAccountSignup",
                "click .accountGroup": "hideUserMenu",
                "mouseenter .user-menu": "userMenuPreventHide",
                "mouseleave .user-menu": "userMenuDelayHide",
                "mouseenter .user-welcome": "userMenuDelayShow",
                "mouseleave .user-welcome": "userMenuCancelDelayShow",
                "click .show-notifications": "showNotifications"
            },
            regions: {
                accountGroupsRegion: ".account-groups-display"
            },
            templateHelpers: {
                getFirstName: function() {
                    return this.self.getUserFirstName()
                },
                getUserBalance: function() {
                    return this.self.getUserCurrentBalance()
                },
                getAccountGroupName: function() {
                    return BMT.accountGroup.get("name")
                },
                hasJointAccountsFeature: function() {
                    return !BMT.user.get("accountGroups").find(function(e) {
                        return e.get("type") === "JOINT" && e.get("accountGroupState") !== "CLOSED"
                    }) && i.hasVariation("joint_accounts_on")
                }
            },
            ui: {
                unreadBubble: ".unread-bubble",
                feedPreview: ".feed-preview",
                previewIcon: ".feed-preview .preview-icon",
                previewTitle: ".feed-preview .preview-title",
                previewBody: ".feed-preview .preview-body",
                showNotifications: ".show-notifications"
            },
            onInitialize: function() {
                this.model = BMT.accountGroup, this.listenTo(BMT.user, "change", this.updateUserInfo), this.listenTo(BMT.user.get("accountGroups"), "change", this.updateUserInfo), this.listenTo(this.model, "change", this.updateUserInfo), this.listenTo(this.model.get("accounts"), "change reset add", this.updateUserInfo), this.listenTo(BMT.vent, "goto", this.setActiveLink, this), e(document).unbind("click", this.userMenuHideOnBlur.bind(this)), e(document).click(this.userMenuHideOnBlur.bind(this))
            },
            onRender: function() {
                this.setActiveLink(this.options.page), this.accountGroupsRegion.show(new r({
                    collection: BMT.user.get("accountGroups")
                }))
            },
            onShow: function() {
                o.fetch().then(function(e) {
                    if (!e.length) {
                        this.ui.showNotifications.hide();
                        return
                    }
                    e.hasUnread() && this.ui.unreadBubble.show();
                    if (e.hasUnreadHighPriorityItem()) {
                        var t = e.getUnreadHighPriorityItem();
                        this.showFeedPreviewForItem(t)
                    }
                }.bind(this), function() {
                    this.ui.showNotifications.hide()
                }.bind(this))
            },
            showFeedPreviewForItem: function(e) {
                this.ui.previewIcon.attr("src", e.getIcon()), this.ui.previewTitle.text(e.get("title")), this.ui.previewBody.text(e.get("body")), this.ui.feedPreview.fadeIn()
            },
            lock: function() {
                this._isLocked = !0
            },
            unlock: function() {
                this._isLocked = !1
            },
            getUserFirstName: function() {
                return BMT.user.get("firstName")
            },
            getUserCurrentBalance: function() {
                return this.formatter.money(BMT.accounts().totalCurrentBalance(!0))
            },
            updateUserInfo: function() {
                this.$(".user-first-name").text(this.getUserFirstName()), this.$(".balance").text(this.getUserCurrentBalance()), this.accountGroupsRegion.show(new r({
                    collection: BMT.user.get("accountGroups")
                }))
            },
            isUserMenuVisible: function() {
                return this.$(".user-menu").is(":visible")
            },
            toggleUserMenu: function(e) {
                this.isUserMenuVisible() ? this.hideUserMenu() : this.showUserMenu()
            },
            showUserMenu: function(e) {
                if (this._isLocked) return;
                this.$(".user-menu").show(), this.$(".user-welcome").addClass("open"), this.userMenuDelayHide()
            },
            hideUserMenu: function(e) {
                this.$(".user-menu").hide(), this.$(".user-welcome").removeClass("open"), this.hideMenuTimer && clearTimeout(this.hideMenuTimer)
            },
            userMenuHideOnBlur: function(t) {
                !e(t.target).closest(".user-welcome").length && !e(t.target).closest(".user-menu").length && this.hideUserMenu()
            },
            userMenuDelayHide: function(e) {
                this.isUserMenuVisible() && (this.hideMenuTimer = setTimeout(this.hideUserMenu, a))
            },
            userMenuPreventHide: function(e) {
                this.hideMenuTimer && clearTimeout(this.hideMenuTimer)
            },
            userMenuDelayShow: function(e) {
                this.isUserMenuVisible() || (this.showMenuTimer = setTimeout(this.showUserMenu, u))
            },
            userMenuCancelDelayShow: function(e) {
                this.showMenuTimer && clearTimeout(this.showMenuTimer)
            },
            showNotifications: function(e) {
                var t = o.get();
                o.trigger("feed:open"), this.ui.unreadBubble.hide(), this.ui.feedPreview.hide(), s.track("ElementClicked", {
                    Location: "Summary",
                    Name: "Updates",
                    Type: "Button",
                    Unread: t && !!t.length
                }), e && e.stopPropagation()
            },
            gotoTab: function(t) {
                var n = e(t.currentTarget).attr("href").replace("#", "");
                BMT.currentPage === n && t.preventDefault(), this.hideUserMenu()
            },
            goToTrustSignup: function(e) {
                return s.track("ElementClicked", {
                    Location: "WelcomeDropdown",
                    Name: "AddTrust",
                    Type: "Link"
                }), this.gotoTab(e)
            },
            goToJointAccountSignup: function(e) {
                s.track("ElementClicked", {
                    Name: "JointAccountDrawer",
                    Location: BMT.currentPage.capitalize(),
                    Type: "Link"
                }), this.hideUserMenu(), BMT.vent.trigger("openDrawer:showJointAccountSignup", "splash")
            },
            setActiveLink: function(e, t) {
                this.setAllInactive(), this.$(".user-links a[href=#" + e + "]").addClass("selected")
            },
            setAllInactive: function() {
                this.$(".user-links a").removeClass("selected")
            },
            logout: function(e) {
                window.location.replace("/logout");
                /*e && e.preventDefault(), BMT.vent.trigger("logout", {
                    timeout: !1
                })*/
            },
            onDestroy: function() {
                e(document).unbind("click", this.userMenuHideOnBlur)
            }
        })
    }), define("views/common/subnav/subnavView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/subnav/subnav", "models/visitor", "views/common/subnav/demoLinksView", "views/common/subnav/userLinksView"], function(e, t, n, r, i, s, o) {
        var u = null,
            a = null;
        return n.View.extend({
            template: r,
            regions: {
                linksRegion: "#linksRegion"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "logout", function() {
                    this.linksRegion.empty(), u = null
                })
            },
            lock: function() {
                this._isLocked = !0, this.linksRegion.currentView && this.linksRegion.currentView.lock && this.linksRegion.currentView.lock()
            },
            unlock: function() {
                this._isLocked = !1, this.linksRegion.currentView && this.linksRegion.currentView.unlock && this.linksRegion.currentView.unlock()
            },
            onShow: function() {
                u && (a = this.linksRegion.show(new u), this._isLocked && this.lock())
            },
            emptyContent: function() {
                this.linksRegion.empty(), u = null
            },
            onRoute: function(e) {
                if (!e || e === "login" || e === "gotoLogin" || e === "signup") {
                    this.emptyContent();
                    return
                }
                var t = this._getViewForPage(e);
                if (t === u) return;
                this.$el && this.$el.length && i.fetch().always(function() {
                    this.linksRegion.show(new t)
                }.bind(this)), u = t
            },
            _getViewForPage: function(e) {
                return BMT.user.is("demo") ? s : BMT.user.isFull() ? o : n.View
            }
        })
    }), define("hbs!views/common/giftIcon", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<figure class="gift-icon">\n    <svg viewBox="0 0 32 32" preserveAspectRatio="xMidYMin meet">\n        <path d="M30,11.4h-5.4c0.8-0.2,1.4-0.4,1.9-0.7c2.7-1.7,3.5-5.3,1.8-8C27.2,1,25.4,0,23.5,0c-1.1,0-2.1,0.3-3.2,1\n            C19,1.8,17.4,4,16.1,6.3C14.8,4,13.2,1.8,12,1c-1-0.7-2.1-1-3.2-1C6.8,0,5,1,3.9,2.8C2.2,5.5,3,9,5.8,10.7c0.4,0.3,1.1,0.5,1.9,0.7\n            H2c-1.1,0-2,0.9-2,2v3.3c0,1.1,0.9,2,2,2h0.7c0,0.1,0,0.2,0,0.3V30c0,1.1,0.9,2,2,2H27c1.1,0,2-0.9,2-2V19.1c0-0.1,0-0.2,0-0.3h1\n            c1.1,0,2-0.9,2-2v-3.3C32,12.3,31.1,11.4,30,11.4z M21.9,3.5C22.4,3.2,22.9,3,23.5,3c0.9,0,1.7,0.5,2.3,1.4c0.4,0.6,0.5,1.4,0.4,2.1\n            s-0.6,1.3-1.2,1.7c-0.7,0.4-3.2,0.8-6.9,1C19.5,6.3,21.1,4,21.9,3.5z M6.1,6.5C6,5.7,6.1,5,6.5,4.4C7,3.5,7.9,3,8.8,3\n            c0.5,0,1.1,0.2,1.6,0.5c0.8,0.5,2.4,2.8,3.9,5.7C10.6,9,8,8.6,7.4,8.2C6.7,7.8,6.3,7.2,6.1,6.5z"/>\n    </svg>\n</figure>\n'
        });
        return t.registerPartial("views/common/giftIcon", n), t.registerPartial("views/common/giftIcon", n), n
    }), define("hbs!views/common/tabBar", ["hbs", "hbs/handlebars", "hbs!views/common/giftIcon"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                return "disabled"
            }

            function c(e, t) {
                return '\n            <li>\n                <a href="#summary">Overview</a>\n            </li>\n\n   <li>\n                <a href="#portfolio">Portfolio</a>\n            </li>\n\n <li>\n                <a href="#advice">Allocation</a>\n            </li>\n\n   <li>\n                <a href="#performance">Performance</a>\n            </li>\n\n        <li>\n                <a href="#transfer">Transfer</a>\n            </li>\n               '
            }

            function h(e, t) {
                var i = "",
                    s;
                i += '\n            <a href="#invite" class="invite">\n                ', s = f.invokePartial(r["views/common/giftIcon"], "views/common/giftIcon", e, n, r);
                if (s || s === 0) i += s;
                i += "\n                ", s = n["if"].call(e, e && e.showDynamicShare, {
                    hash: {},
                    inverse: f.program(8, d, t),
                    fn: f.program(6, p, t)
                });
                if (s || s === 0) i += s;
                return i += "\n            </a>\n        ", i
            }

            function p(e, t) {
                var r = "",
                    i, s;
                return r += '\n                    <span class="user-free-time">', (s = n.getFreeTimeLabel) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.getFreeTimeLabel, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + "</span> left, refer for more.\n                ", r
            }

            function d(e, t) {
                return "\n                    Share BetaSmartz and get <strong>1 year free</strong>\n                "
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), r = this.merge(r, e.partials);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            s += '<div class="tab-bar-normal">\n    <ul class="main-nav ', o = n.unless.call(t, t && t.allowNavigation, {
                hash: {},
                inverse: f.noop,
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            s += '">\n        ', o = n.unless.call(t, t && t.isClosed, {
                hash: {},
                inverse: f.noop,
                fn: f.program(3, c, i)
            });
            if (o || o === 0) s += o;
            s += '\n\n        <li>\n            <a href="#activity">Activity</a>\n        </li>\n    </ul>\n\n    <div class="unadvised-user-only">\n        ', o = n["if"].call(t, t && t.showInviteButton, {
                hash: {},
                inverse: f.noop,
                fn: f.program(5, h, i)
            });
            if (o || o === 0) s += o;
            return s += '\n    </div>\n\n    <div class="advisor-details advised-user-only"></div>\n</div>\n\n<ul class="back-to-summary">\n    <li>\n        <a href="#summary">\n            <span class="back-icon">&#8250;</span>\n            Back to Summary\n        </a>\n    </li>\n</ul>\n', s
        });
        return t.registerPartial("views/common/tabBar", n), n
    }), define("views/advisors/advisorDetailsView", ["jquery", "underscore", "common/betterment.views", "viewHelpers/phoneNumberFormatter"], function(e, t, n, r) {
        return n.View.extend({
            template: "advisors/advisorDetails",
            events: {
                "click .expand-advisor-details": "toggleAdvisorDetails"
            },
            templateHelpers: {
                advisorName: function() {
                    return this.self.model.get("firstName")
                },
                advisorPhoneNumber: function() {
                    return r.format(this.self.model.get("workPhone"))
                },
                advisorEmail: function() {
                    return this.self.model.get("email")
                }
            },
            onInitialize: function() {
                e(document).click(this.hideAdvisorDetails.bind(this))
            },
            toggleAdvisorDetails: function(e) {
                this.$(".more-advisor-details").toggle()
            },
            hideAdvisorDetails: function(e) {
                this.isClickOutsideOfAdvisorDetails(e) && this.$(".more-advisor-details").hide()
            },
            onDestroy: function() {
                e(document).unbind("click", this.hideAdvisorDetails.bind(this))
            },
            isClickOutsideOfAdvisorDetails: function(t) {
                return e(t.target).closest(".expand-advisor-details, .more-advisor-details").length === 0
            }
        })
    }), define("views/common/tabBarView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/tabBar", "views/advisors/advisorDetailsView", "models/visitor", "services/advisorFetcher"], function(e, t, n, r, i, s, o) {
        return n.View.extend({
            template: r,
            tagName: "div",
            className: "nav-wrapper",
            options: {
                allowNavigation: !0
            },
            regions: {
                advisorDetails: ".advisor-details"
            },
            templateHelpers: {
                isClosed: function() {
                    return BMT.accountGroup.isClosed()
                },
                showInviteButton: function() {
                    return this.allowNavigation() && this.self.model.not("demo") && !this.self.model.isClosed() && BMT.hasSession()
                },
                showDynamicShare: function() {
                    return BMT.user.get("pricingSummary").has("freeDaysRemaining")
                },
                getFreeTimeLabel: function() {
                    var e = BMT.user.get("pricingSummary").num("freeDaysRemaining"),
                        t = "";
                    return e > 365 ? t += Math.floor(e / 365) + " free year" : e > 183 ? t += Math.floor(e / 31) + " free month" : t += e + " free day", t.split(" ", 1)[0] !== "1" && (t += "s"), t
                },
                allowNavigation: function() {
                    return this.self.allowNavigation()
                }
            },
            events: {
                "click a": "gotoTab"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "goto", this.depressLink, this)
            },
            onRender: function() {
                this.depressLink(this.options.page)
            },
            onShow: function() {
                BMT.user.isAdvised() && o.fetch().then(function(e) {
                    this.advisorDetails.show(new i({
                        model: e
                    }))
                }.bind(this))
            },
            onRoute: function(e, t, n) {
                this.$(".tab-bar-normal").toggle(e !== "signup" && e !== "login" && e !== "trust-signup"), this.$(".back-to-summary").toggle(e === "trust-signup"), this.$(".main-nav").toggleClass("disabled", BMT.accounts().length === 0 || e === "goalSetup" && BMT.accounts().length === 1)
            },
            allowNavigation: function() {
                return !this.$(".main-nav").hasClass("disabled") && BMT.accounts().firstGoalHasCompletionDate()
            },
            gotoTab: function(t) {
                var n = e(t.currentTarget).attr("href").replace("#", "");
                BMT.analytics.track("ElementClicked", {
                    Name: n,
                    Type: "Link",
                    Location: "TabBar"
                }), (!this.allowNavigation() || BMT.currentPage === n) && t.preventDefault()
            },
            depressLink: function(e, n) {
                function r(e) {
                    var n = ["goalSetup", "rollover", "rollover-request", "retirementPlanStart", "retireGuideStart", "retireGuideSetup", "retireGuide"];
                    return t.contains(n, e) ? "advice" : e
                }
                this.unpressAll(), this.$("a[href=#" + r(e) + "]").parent().addClass("depressed")
            },
            unpressAll: function() {
                this.$("li, .invite").each(function(t, n) {
                    e(n).removeClass("depressed")
                })
            }
        })
    }), define("hbs!views/common/footerLinks", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<ul class="unadvised-user-only">\n    <li>Company</li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="About" href="', (u = n.storyUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.storyUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" alt="About" title="About">About</a></li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="Blog" href="', (u = n.resourcesUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.resourcesUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" alt="Resources" title="Resources">Resources</a></li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="Security" href="', (u = n.securityUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.securityUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" alt="Security" title="Security">Security</a></li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="Terms" href="', (u = n.legalUrl) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.legalUrl, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '" alt="Terms" title="Terms">Terms</a></li>\n</ul>\n<ul class="unadvised-user-only">\n    <li>Need some assistance?</li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="FAQ" href="http://support.betasmartz.com/" alt="FAQ" title="FAQ">FAQ</a></li>\n    <li><a target="_blank" data-track-event="ElementClicked" data-track-location="BottomNav" data-track-name="ContactSupport" href="#" id="support">Contact our support team</a></li>\n    \n</ul>\n<ul class="advised-user-only">\n    <li>Technical support</li>\n    <li><i class="fa fa-envelope-o"></i><a href="mailto:', (u = n.supportEmail) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.supportEmail, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '">Email us</a></li>\n    <li> <i class="fa fa-phone"></i>Call ', (u = n.advisedSupportPhoneNumber) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.advisedSupportPhoneNumber, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + '</li>\n\n</ul>', s
        });
        return t.registerPartial("views/common/footerLinks", n), n
    }), define("views/common/footerLinksView", ["jquery", "underscore", "backbone", "hbs!views/common/footerLinks", "common/betterment.views", "views/common/supportView", "common/betterment.models", "components/common/scripts/viewHelpers/customerSupport"], function(e, t, n, r, i, s, o, u) {
        var a = o.Model.extend({
            url: "/supportEmail",
            validation: {
                message: {
                    required: !0,
                    minLength: 10
                }
            }
        });
        return i.View.extend({
            template: r,
            tagName: "div",
            templateHelpers: {
                storyUrl: function() {
                    return this.brochure_url("mission")
                },
                resourcesUrl: function() {
                    return this.brochure_url("resources")
                },
                securityUrl: function() {
                    return this.brochure_url("security")
                },
                legalUrl: function() {
                    return this.brochure_url("legal")
                },
                supportEmail: function() {
                    return u.getSupportEmail()
                },
                supportPhoneNumber: function() {
                    return u.getSupportNumber()
                },
                advisedSupportPhoneNumber: function() {
                    return u.getAdvisedSupportNumber()
                }
            },
            events: {
                "click #support": "showSupport",
                "click .open-live-chat": "openLiveChat",
                "focus form textarea": "expandForm",
                "blur form textarea": "collapseIfFieldEmpty",
                "blur form input": "collapseIfFieldEmpty",
                "click #suggest": "onOK"
            },
            useUserName: function() {
                return BMT.hasSession() && BMT.user.not("demo")
            },
            onInitialize: function() {
                this.model = new a
            },
            onShow: function() {
                BMT.vent.trigger("snapEngage:enable"), this.applyValidation({
                    before: t.bind(function(e, n) {
                        return this.$(n.currentTarget).val() || t.contains(this.$("input, textarea, button"), n.relatedTarget)
                    }, this)
                })
            },
            onOK: function(r) {
                var i = n.Syphon.serialize(this);
                i.from = i.from || "anonymous-feedback@betasmartz.com", this.model.validate(i) || (this.block(), i.message = "Feedback from Footer: " + i.message + " (URL: " + this.getCurrentPageURL() + ")", this.model.save(i, {
                    forceSave: !0,
                    success: t.bind(function() {
                        e("#footerLinks form textarea").val(""), this.collapseForm(), BMT.flash("Your message has been sent to our team. Thanks for your feedback!")
                    }, this),
                    complete: t.bind(function() {
                        this.unblock()
                    }, this)
                })), BMT.analytics.track("ElementClicked", {
                    Location: "BottomNav",
                    Type: "Button",
                    Name: "SendFeedback"
                })
            },
            expandForm: function() {
                this.$("textarea").css("height", "90px"), this.useUserName() ? (this.$("button").fadeIn(200), this.$("input").val(BMT.user.get("userName"))) : this.$("input").fadeIn(200, t.bind(function() {
                    this.$("button").fadeIn(200)
                }, this)), BMT.analytics.track("ElementClicked", {
                    Location: "BottomNav",
                    Type: "Field",
                    Name: "Feedback"
                })
            },
            formHasTextEntered: function() {
                var t = !1;
                return this.$("[name]:visible").each(function() {
                    if (e(this).val()) return t = !0, !1
                }), t
            },
            collapseIfFieldEmpty: function(e) {
                if (this.formHasTextEntered() || t.contains(this.$("input, textarea, button"), e.relatedTarget)) return !1;
                this.collapseForm()
            },
            collapseForm: function() {
                this.$("textarea").css("height", "28px"), this.$("input").fadeOut(200, t.bind(function() {
                    this.$("button").fadeOut(200)
                }, this)), this.hideAllValidation()
            },
            openLiveChat: function(e) {
                e && e.preventDefault(), SnapEngage.setUserEmail(BMT.user.get("email"), !0), SnapEngage.openProactiveChat(!0, !0)
            },
            showSupport: function(e) {
                e.preventDefault(), BMT.modal.show(new s)
            },
            getCurrentPageURL: function() {
                return window.location.href
            }
        })
    }), define("views/common/loadingView", ["common/betterment.views", "hbs!components/common/scripts/templates/blockSpinner"], function(e, t) {
        return e.View.extend({
            template: t
        })
    }), define("hbs!views/common/copyPersonalBankAccountBanner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return ' and <span class="bold-text">receive your bonus</span> '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<div class="banner-wrapper">\n    <div class="banner link-checking-account-banner">\n        <div class="image check-statement-alt"></div>\n        <div class="explanation">\n            <p>Use your existing checking account to fund your investments', o = n["if"].call(t, t && t.showBonusText, {
                hash: {},
                inverse: u.noop,
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            return s += '.</p>\n            <button class="left secondary banner-button copy-personal">Use my existing bank account</button>\n        </div>\n        <div class="banner-close" data-dismiss="banner"></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/common/copyPersonalBankAccountBanner", n), n
    }), define("views/common/copyPersonalBankAccountBannerView", ["jquery", "underscore", "common/betterment.views", "common/betterment.models", "services/bankAccountService", "services/bannerViewPreferenceService", "hbs!views/common/copyPersonalBankAccountBanner"], function(e, t, n, r, i, s, o) {
        return n.View.extend({
            template: o,
            tagName: "div",
            className: "banner-view copy-personal-bank-account-banner",
            events: {
                "click button.copy-personal": "copyPersonalBankAccount",
                'click [data-dismiss="banner"]': "hideForSession"
            },
            templateHelpers: {
                showBonusText: function() {
                    return BMT.accountGroup.has("potentialBonus")
                }
            },
            hideForSession: function() {
                s.setLinkAccountForceHide(), this.$el.slideUp(300)
            },
            copyPersonalBankAccount: function(e) {
                e && e.preventDefault();
                if (!i.canCopyPersonalBankAccount(BMT.user, BMT.accountGroup)) return;
                var t = i.getPersonalBankAccount(BMT.user);
                BMT.alert({
                    title: 'Confirm your <span class="trust-ag-only">trust</span><span class="joint-ag-only">joint</span> checking account',
                    body: '<p>Would you like to link your existing personal checking account to your <span class="trust-ag-only">trust</span><span class="joint-ag-only">joint</span> account?</p><p><div><span class="bold-text">Bank:</span> ' + t.get("description") + "</div>" + '<div><span class="bold-text">Account number:</span> ' + t.get("accountNumber") + "</div></p>",
                    noClose: !0,
                    className: "copy-bank-account",
                    buttons: [{
                        id: "linkAccount",
                        title: "Link account"
                    }, {
                        id: "cancel",
                        title: "Cancel"
                    }],
                    handler: function(e) {
                        if (e === "linkAccount") {
                            var t = this;
                            this.block(), i.copyPersonalBankAccount(BMT.user, BMT.accountGroup).then(function() {
                                BMT.accountGroup.get("bankAccount").fetch({
                                    forceUpdate: !0
                                }).then(function() {
                                    BMT.refreshBanners(), BMT.flash("Your bank account has been linked successfully.")
                                }).always(function() {
                                    t.unblock(), BMT.modal.close(t)
                                })
                            }).fail(function() {
                                t.unblock(), BMT.modal.close(t)
                            })
                        } else BMT.modal.close(this)
                    }
                })
            }
        })
    }), define("views/common/verifyAccountBannerView", ["jquery", "underscore", "common/betterment.views", "services/bannerViewPreferenceService"], function(e, t, n, r) {
        return n.View.extend({
            template: "common/verifyAccountBanner",
            tagName: "div",
            className: "banner-view verify-account-banner",
            templateHelpers: {
                bonusText: function() {
                    if (BMT.accountGroup.has("potentialBonus")) return '&nbsp;and <span class="bold-text">receive your bonus</span>'
                }
            },
            events: {
                "click button.banner-button": "goToTransfer",
                'click [data-dismiss="banner"]': "hideForSession"
            },
            hideForSession: function() {
                r.setVerifyAccountForceHide(), this.$el.slideUp(300)
            },
            goToTransfer: function() {
                BMT.analytics.track("ElementClicked", {
                    Name: "VerifyChecking",
                    Type: "Button",
                    Location: "VerifyAccountBanner"
                }), BMT.router.navigate("transfer", !0)
            }
        })
    }), define("hbs!views/common/emailTrustDocumentsBanner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="banner-wrapper">\n    <div class="banner">\n        <div class="image multi-document-alt"></div>\n        <div class="explanation">\n            <p>Upload your trust documents below to complete sign up.</p>\n            <button class="left secondary banner-button">Upload documents</button>\n        </div>\n    </div>\n</div>\n'
        });
        return t.registerPartial("views/common/emailTrustDocumentsBanner", n), n
    }), define("views/common/emailTrustDocumentsBannerView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/emailTrustDocumentsBanner", "views/trust/documentUploadModal"], function(e, t, n, r, i) {
        return n.View.extend({
            template: r,
            tagName: "div",
            className: "banner-view email-trust-documents-banner",
            events: {
                "click button.banner-button": "showUploadModal"
            },
            onInitialize: function() {
                this.listenTo(BMT.vent, "trust:documents:uploaded", this.hide)
            },
            hide: function() {
                this.hidden = !0, this.$el.slideUp(300, function() {
                    BMT.vent.trigger("banner:emailTrustDocumentsBanner:hidden")
                })
            },
            showUploadModal: function() {
                BMT.modal.show(new i)
            }
        })
    }), define("hbs!views/jointAccountSignup/resendBanner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u, a = "function",
                f = this.escapeExpression;
            return s += '<div class="banner-wrapper">\n    <div class="banner joint-account-resend-banner">\n        <div class="image clock-icon"></div>\n        <div class="explanation">\n            <p>', (u = n.emailAddress) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.emailAddress, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + " hasn't accepted your invitation to create a joint account yet.  You can deposit after ", (u = n.emailAddress) ? o = u.call(t, {
                hash: {}
            }) : (u = t && t.emailAddress, o = typeof u === a ? u.call(t, {
                hash: {}
            }) : u), s += f(o) + ' accepts.</p>\n            <button class="left secondary banner-button">Resend invite</button>\n        </div>\n        <div class="banner-close" data-dismiss="banner"></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/jointAccountSignup/resendBanner", n), n
    }), define("models/v1/jointAccountInviteResends", ["models/v1/baseModels"], function(e) {
        var t = {
            relatedModels: ["jointAccountInvite"],
            endpoint: function() {
                return this.get("jointAccountInvite").getEndpoint() + "/resends"
            }
        };
        return e.Model.extend(t)
    }), define("views/jointAccountSignup/resendBannerView", ["common/betterment.views", "hbs!views/jointAccountSignup/resendBanner", "models/v1/jointAccountInvite", "models/v1/jointAccountInviteResends", "components/common/scripts/viewHelpers/customerSupport"], function(e, t, n, r, i) {
        return e.View.extend({
            template: t,
            tagName: "div",
            className: "banner-view resend-joint-account-invite-banner",
            events: {
                "click button": "resend",
                'click [data-dismiss="banner"]': "hideForSession"
            },
            templateHelpers: {
                emailAddress: function() {
                    return this.self.model.get("inviteeEmail")
                }
            },
            hideForSession: function() {
                this.getClass().forceHide = !0, this.$el.slideUp(300)
            },
            resend: function(e) {
                var t = this.model.get("inviteCode"),
                    s = new n({
                        id: t
                    }),
                    o = new r({
                        jointAccountInvite: s
                    });
                o.save({}, {
                    skipErrorAlert: !0
                }).done(function() {
                    BMT.flash("Invitation resent successfully."), this.getClass().forceHide = !0, this.remove()
                }.bind(this)).fail(function() {
                    BMT.alert({
                        icon: "warning",
                        title: "Invite Resend Limit Reached",
                        body: "You have reached your invite resend limit.  Please contact customer support at either " + i.getSupportNumber() + ' or <a href="mailto:' + i.getSupportEmail() + '">' + i.getSupportEmail() + "</a> for assistance."
                    })
                })
            }
        }, {
            forceHide: !1
        })
    }), define("hbs!views/retirementPlanning/banner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function a(e, t) {
                return "\n                    <p>You're so close! Complete your plan set up to find out.</p>\n                "
            }

            function f(e, t) {
                return "\n                    <p>RetireSmart&#8482; will give you advice based on your full financial picture. It's free, and we won't change your investments until you're ready.</p>\n                "
            }

            function l(e, t) {
                return '\n                <button class="right secondary banner-button">Continue Retirement Plan Set Up</button>\n            '
            }

            function c(e, t) {
                return '\n                <button class="right secondary banner-button">See our advice</button>\n            '
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = this;
            s += '<div class="banner-wrapper">\n    <div class="banner">\n        <div class="image map-icon"></div>\n        <div class="explanation">\n            <div class="text">\n                <h3>Are you invested correctly for retirement?</h3>\n                ', o = n["if"].call(t, t && t.isPlanStarted, {
                hash: {},
                inverse: u.program(3, f, i),
                fn: u.program(1, a, i)
            });
            if (o || o === 0) s += o;
            s += "\n            </div>\n            ", o = n["if"].call(t, t && t.isPlanStarted, {
                hash: {},
                inverse: u.program(7, c, i),
                fn: u.program(5, l, i)
            });
            if (o || o === 0) s += o;
            return s += '\n        </div>\n        <div class="banner-close" data-dismiss="banner"></div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/retirementPlanning/banner", n), n
    }), define("views/retirementPlanning/bannerView", ["common/betterment.views", "hbs!views/retirementPlanning/banner", "services/retirementPlanService", "models/visitor", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i) {
        return e.View.extend({
            template: t,
            className: "banner-view retirement-plan-banner",
            events: {
                "click .banner-button": "goToRetirementPlan",
                'click [data-dismiss="banner"]': "hideForSession"
            },
            templateHelpers: {
                isPlanStarted: function() {
                    return !BMT.user.get("financialPlans").selected().isNew()
                }
            },
            animatedHide: function(e) {
                this.$el.slideUp(300, function() {
                    window.localStorage.retirementPlanningBannerForceHide = !0, e && e.apply(this)
                }.bind(this))
            },
            hideForSession: function(e) {
                i.track("ElementClicked", {
                    Type: "Close",
                    Location: "Summary",
                    Name: "PlanBanner"
                }), this.animatedHide()
            },
            goToRetirementPlan: function() {
                var e = BMT.user.get("financialPlans").selected().isNew();
                i.track("ElementClicked", {
                    Type: e ? "Initial" : "Continue",
                    Location: "Summary",
                    Name: "PlanBanner"
                }), this.animatedHide(function() {
                    e ? BMT.router.navigate("retireGuideStart", !0) : BMT.router.navigate("retireGuideSetup", !0)
                })
            }
        }, {
            shouldShow: function() {
                var e = !BMT.user.isAdvised();
                return !window.localStorage.retirementPlanningBannerForceHide && BMT.currentPage === "summary" && BMT.accountGroup.get("accounts").length && BMT.accountGroup.get("bankAccount").get("active") && !BMT.user.get("financialPlans").selected().is("complete") && BMT.user.is("retireGuideEnabled") && e
            }
        })
    }), define("hbs!views/transfer/smartDeposits/relinkBankBanner", ["hbs", "hbs/handlebars", "hbs!views/transfer/smartDeposits/unlinkBankAccountLogo"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), r = this.merge(r, e.partials);
            var s = "",
                o, u = this;
            s += '<div class="banner-wrapper">\n    <div class="banner">\n        <div class="image">\n            <div class="bubble">\n                <div class="unlink-bank-account-logo">', o = u.invokePartial(r["views/transfer/smartDeposits/unlinkBankAccountLogo"], "views/transfer/smartDeposits/unlinkBankAccountLogo", t, n, r);
            if (o || o === 0) s += o;
            return s += '</div>\n            </div>\n        </div>\n        <div class="explanation">\n            <div class="text">\n                <h3>Relink your bank account</h3>\n                <p>Your bank authentication has recently changed. Please re-authenticate your bank account so that we can use your most up-to-date bank information.</p>\n            </div>\n            <button class="right secondary banner-button">Relink bank</button>\n        </div>\n    </div>\n</div>\n', s
        });
        return t.registerPartial("views/transfer/smartDeposits/relinkBankBanner", n), n
    }), define("views/transfer/smartDeposits/relinkBankBannerView", ["common/betterment.views", "modules/modals", "hbs!views/transfer/smartDeposits/relinkBankBanner", "views/linkBankAccount/setupView", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i) {
        return e.View.extend({
            template: n,
            className: "banner-view smart-deposits-banner",
            events: {
                "click .banner-button": "goToRelinkBank"
            },
            goToRelinkBank: function() {
                i.track("ElementClicked", {
                    Type: "Initial",
                    Location: "Summary",
                    Name: "RelinkBankBanner"
                }), this.$el.slideUp(300, function() {
                    t.show(new r({
                        relink: !0,
                        alwaysHideProgress: !0,
                        accountGroup: BMT.accountGroup
                    }))
                })
            }
        }, {
            shouldShow: function() {
                return (BMT.currentPage === "summary" || BMT.currentPage === "transfer") && BMT.accounts().withSmartDepositEnabled().length && BMT.user.bankAccount() && BMT.user.bankAccount().needsAuthUpdate()
            }
        })
    }), define("hbs!views/common/depositAfterSignupBanner", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            return this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers), '<div class="banner-wrapper">\n    <div class="banner">\n        <div class="image chart-icon"></div>\n        <div class="explanation">\n            <p>Auto-deposits can improve returns and lower your tax bill over time.</p>\n            <button class="left secondary banner-button">Set up an auto deposit</button>\n        </div>\n        <div class="banner-close" data-dismiss="banner"></div>\n    </div>\n</div>\n\n'
        });
        return t.registerPartial("views/common/depositAfterSignupBanner", n), n
    }), define("views/common/depositAfterSignupBannerView", ["jquery", "underscore", "common/betterment.views", "hbs!views/common/depositAfterSignupBanner", "views/transfer/automaticTransactionSettingsModalView", "views/transfer/automaticDepositSettingsView", "components/common/scripts/analytics/analytics"], function(e, t, n, r, i, s, o) {
        return n.View.extend({
            template: r,
            tagName: "div",
            className: "banner-view deposit-after-signup-banner",
            events: {
                "click .banner-button": "setupDeposit",
                'click [data-dismiss="banner"]': "hideForSession"
            },
            show: function() {
                this.dismissed || this.$el.show()
            },
            hide: function() {
                this.$el.hide()
            },
            animatedHide: function(e) {
                this.$el.slideUp(300, function() {
                    this.dismissed = !0, e && e.apply(this)
                }.bind(this))
            },
            hideForSession: function(e) {
                o.track("ElementClicked", {
                    Type: "Button",
                    Location: "DepositAfterSignupBanner",
                    Name: "ADnudgeClose"
                }), this.animatedHide()
            },
            setupDeposit: function() {
                o.track("ElementClicked", {
                    Type: "Button",
                    Location: "DepositAfterSignupBanner",
                    Name: "ADnudgeCTA"
                }), this.animatedHide(function() {
                    BMT.router.navigate("advice", !0)
                })
            },
            isDismissed: function() {
                return this.dismissed
            }
        }, {
            forceHide: !1
        })
    }), define("viewHelpers/userStateAlertHelper", ["jquery", "components/common/scripts/viewHelpers/customerSupport"], function(e, t) {
        return {
            checkStateAndAlert: function() {
                var n = new e.Deferred;
                return BMT.user.isSuspended() || BMT.accountGroup.isSuspended() ? BMT.alert({
                    icon: "warning",
                    title: "Account Suspended",
                    body: "<p>Your account is currently suspended while we review your records. You will have limited access to your account and cannot initiate transactions until it has been unsuspended.</p><p>This may be due to identity verification or certain activity on your account. If you don&apos;t receive an email from us shortly please call " + t.getSuspendedSupportNumber() + " for immediate assistance." + "</p>",
                    handler: function() {
                        n.resolve()
                    }
                }) : BMT.accountGroup.isClosed() ? BMT.alert({
                    icon: "warning",
                    title: "Account Closed",
                    body: "<p>Your account has been closed. You are still able to access your account activity and statements, but may no longer initiate transactions.</p><p>If you have questions regarding the status of your account, please call our Customer Support Team at " + t.getSupportNumber() + "." + "</p>",
                    handler: function() {
                        n.resolve()
                    }
                }) : n.resolve(), n.promise()
            }
        }
    }), define("views/common/welcomeView", ["jquery", "underscore", "common/betterment.views"], function(e, t, n) {
        return n.ModalView.extend({
            template: "common/welcome",
            className: "welcome-view",
            events: {
                "click button": "goToSummary"
            },
            templateHelpers: {
                userFirstName: function() {
                    return BMT.user.get("firstName")
                },
                advisorLogoUrl: function() {
                    return this.self.advisor ? this.self.advisor.get("firmLogoUrl") : ""
                },
                advisorName: function() {
                    return this.self.advisor ? this.self.advisor.get("firstName") : ""
                }
            },
            onInitialize: function() {
                this.advisor = this.options.advisor
            },
            onRender: function() {
                t.defer(function() {
                    this.$(".fade-in").addClass("in")
                }.bind(this))
            },
            goToSummary: function() {
                BMT.router.navigate("summary", {
                    trigger: !0
                }), BMT.modal.close(this)
            }
        })
    }), define("views/common/welcomeRetireeView", ["jquery", "underscore", "backbone", "common/betterment.views", "modules/pricingPlans"], function(e, t, n, r, i) {
        return r.ModalView.extend({
            template: "common/welcomeRetiree",
            className: "welcome-view",
            events: {
                "click button": "goToSummary"
            },
            templateHelpers: {
                allocationText: function() {
                    return this.self.options.allocationText
                },
                bestMinimumBalance: function() {
                    return i.PLANS.BEST.MINIMUM_BALANCE
                }
            },
            goToSummary: function() {
                BMT.router.navigate("summary", {
                    trigger: !0
                }), BMT.modal.close(this)
            }
        })
    }), define("common/loginAlertChain", ["models/account", "models/v1/accountBeneficiaries", "views/profile/editBeneficiariesView", "views/common/welcomeView", "views/common/welcomeRetireeView", "components/common/scripts/util/formatter", "models/rolloverFollowup", "components/account/scripts/services/goalTypeService", "services/taxLossHarvestingService", "viewHelpers/userStateAlertHelper", "services/advisorFetcher", "components/common/scripts/util/ie", "services/bankAccountService"], function(e, t, n, r, i, s, o, u, a, f, l, c, h) {
        function m() {
            var e = BMT.accountGroup.isAdvised() ? d : p;
            if (v < e.length) {
                var t = e[v];
                v += 1, t()
            }
        }

        function g() {
            c.isIE9orLess() ? BMT.alert({
                icon: "warning",
                title: "Unsupported Browser",
                body: '<p>Your browser version is no longer supported, which may reduce functionality and result in a suboptimal experience.</p><p>We recommend installing <a href="http://www.google.com/chrome/">Google Chrome</a> as your primary browser since it updates automatically, so you won\'t run into these issues in the future.</p>',
                handler: function() {
                    m()
                }
            }) : m()
        }

        function y() {
            BMT.user.is("demo") ? BMT.alert({
                width: 430,
                title: "",
                body: '<div class="blue-logo"></div><h2 style="font-size: 20px; margin: 50px 0 30px;">Welcome to the interactive demo!</h2><p style="width: 350px; margin: 0 auto;">Explore this Demo User\'s account at your own pace. We think you\'ll agree - it\'s simply a better way to invest.</p>',
                bodyAttrs: {
                    style: "width: 100%; text-align: center; font-size: 17px; line-height: 20px;"
                },
                handler: function(e) {
                    BMT.analytics.track("SessionStarted", {
                        Type: "Demo"
                    })
                }
            }) : m()
        }

        function b() {
            function f(e) {
                window.localStorage.setItem("hasSeenWelcomeModal-" + BMT.user.id, "true"), BMT.modal.show(e), e.on("destroy", function() {
                    m()
                })
            }
            var t = BMT.user.is("firstLogin") && !BMT.accountGroup.isClosed() && window.localStorage.getItem("hasSeenWelcomeModal-" + BMT.user.id) !== "true",
                n = BMT.accounts().first();
            if (t && BMT.user.isAdvised()) l.fetch().then(function(e) {
                f(new r({
                    advisor: e,
                    modalClasses: "flat-background",
                    hideCloseButton: !0
                }))
            });
            else if (t && BMT.user.isRetired() && n.isRetirementGoalDisplayedAsAge()) {
                var o = e.Model.getAllocationRecommendation(n.goalTerm(), n),
                    u = 1 - o,
                    a = s.pct(o) + " stocks and " + s.pct(u) + " bonds";
                f(new i({
                    allocationText: a
                }))
            } else m()
        }

        function w() {
            BMT.user.is("firstFundedLogin") && !BMT.accountGroup.isClosed() ? BMT.alert({
                width: 400,
                icon: "speedometer",
                title: "Be a Better Friend",
                className: "better-friend-modal",
                body: "Send your friends a BetaSmartz invitation with a bonus of " + BMT.user.get("referralProgram").get("receiverPrize") + " and you'll get " + BMT.user.get("referralProgram").get("senderPrize") + " for everyone that signs up and funds an account. It just takes a few seconds.",
                buttons: [{
                    id: "yes",
                    title: "Invite"
                }, {
                    id: "no",
                    title: "Cancel",
                    attributes: {
                        "class": "cancel"
                    }
                }],
                handler: function(e) {
                    e === "yes" ? BMT.router.navigate("invite", !0) : m()
                }
            }) : m()
        }

        function E() {
            if (BMT.user.is("firstLogin") && BMT.user.is("iraSignup")) {
                var e = new n({
                    collection: new t([], {
                        account: BMT.selectedAccount
                    })
                });
                e.on("destroy", function() {
                    m()
                }), BMT.modal.show(e)
            } else m()
        }

        function S() {
            f.checkStateAndAlert().then(m)
        }
        var p = [g, y, b, w, E, S],
            d = [g, y, b, E, S],
            v = 0;
        return {
            start: function() {
                m()
            }
        }
    }), define("ducts/depositHandler", ["jquery", "underscore", "backbone", "models/transaction", "splitTests/anchorInitialDepositSplitTest"], function(e, t, n, r, i) {
        var s = {
            bindTo: function(e) {
                e.bind("deposit:save", function(e) {
                    var t = e.get("account"),
                        n = t.get("accountGroup"),
                        r = e.num("amount");
                    BMT.refreshAccounts(function() {
                        e.trigger("change"), BMT.vent.trigger("deposit:refresh")
                    }), t.plusEquals("pendingDeposits", r), i.convertExperienceForDeposit(e), n.set("funded", !0)
                })
            }
        };
        return s
    }), define("stacktrace", [], function() {
        function e(t) {
            t = t || {
                guess: !0
            };
            var n = t.e || null,
                r = !!t.guess,
                i = new e.implementation,
                s = i.run(n);
            return r ? i.guessAnonymousFunctions(s) : s
        }
        return typeof module != "undefined" && module.exports && (module.exports = e), e.implementation = function() {}, e.implementation.prototype = {
            run: function(e, t) {
                return e = e || this.createException(), t = t || this.mode(e), t === "other" ? this.other(arguments.callee) : this[t](e)
            },
            createException: function() {
                try {
                    this.undef()
                } catch (e) {
                    return e
                }
            },
            mode: function(e) {
                return e.arguments && e.stack ? "chrome" : e.stack && e.sourceURL ? "safari" : e.stack && e.number ? "ie" : typeof e.message == "string" && typeof window != "undefined" && window.opera ? e.stacktrace ? e.message.indexOf("\n") > -1 && e.message.split("\n").length > e.stacktrace.split("\n").length ? "opera9" : e.stack ? e.stacktrace.indexOf("called from line") < 0 ? "opera10b" : "opera11" : "opera10a" : "opera9" : e.stack && !e.fileName ? "chrome" : e.stack ? "firefox" : "other"
            },
            instrumentFunction: function(t, n, r) {
                t = t || window;
                var i = t[n];
                t[n] = function() {
                    return r.call(this, e().slice(4)), t[n]._instrumented.apply(this, arguments)
                }, t[n]._instrumented = i
            },
            deinstrumentFunction: function(e, t) {
                e[t].constructor === Function && e[t]._instrumented && e[t]._instrumented.constructor === Function && (e[t] = e[t]._instrumented)
            },
            chrome: function(e) {
                var t = (e.stack + "\n").replace(/^\S[^\(]+?[\n$]/gm, "").replace(/^\s+(at eval )?at\s+/gm, "").replace(/^([^\(]+?)([\n$])/gm, "{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm, "{anonymous}()@$1").split("\n");
                return t.pop(), t
            },
            safari: function(e) {
                return e.stack.replace(/\[native code\]\n/m, "").replace(/^(?=\w+Error\:).*$\n/m, "").replace(/^@/gm, "{anonymous}()@").split("\n")
            },
            ie: function(e) {
                var t = /^.*at (\w+) \(([^\)]+)\)$/gm;
                return e.stack.replace(/at Anonymous function /gm, "{anonymous}()@").replace(/^(?=\w+Error\:).*$\n/m, "").replace(t, "$1@$2").split("\n")
            },
            firefox: function(e) {
                return e.stack.replace(/(?:\n@:0)?\s+$/m, "").replace(/^[\(@]/gm, "{anonymous}()@").split("\n")
            },
            opera11: function(e) {
                var t = "{anonymous}",
                    n = /^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,
                    r = e.stacktrace.split("\n"),
                    i = [];
                for (var s = 0, o = r.length; s < o; s += 2) {
                    var u = n.exec(r[s]);
                    if (u) {
                        var a = u[4] + ":" + u[1] + ":" + u[2],
                            f = u[3] || "global code";
                        f = f.replace(/<anonymous function: (\S+)>/, "$1").replace(/<anonymous function>/, t), i.push(f + "@" + a + " -- " + r[s + 1].replace(/^\s+/, ""))
                    }
                }
                return i
            },
            opera10b: function(e) {
                var t = /^(.*)@(.+):(\d+)$/,
                    n = e.stacktrace.split("\n"),
                    r = [];
                for (var i = 0, s = n.length; i < s; i++) {
                    var o = t.exec(n[i]);
                    if (o) {
                        var u = o[1] ? o[1] + "()" : "global code";
                        r.push(u + "@" + o[2] + ":" + o[3])
                    }
                }
                return r
            },
            opera10a: function(e) {
                var t = "{anonymous}",
                    n = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,
                    r = e.stacktrace.split("\n"),
                    i = [];
                for (var s = 0, o = r.length; s < o; s += 2) {
                    var u = n.exec(r[s]);
                    if (u) {
                        var a = u[3] || t;
                        i.push(a + "()@" + u[2] + ":" + u[1] + " -- " + r[s + 1].replace(/^\s+/, ""))
                    }
                }
                return i
            },
            opera9: function(e) {
                var t = "{anonymous}",
                    n = /Line (\d+).*script (?:in )?(\S+)/i,
                    r = e.message.split("\n"),
                    i = [];
                for (var s = 2, o = r.length; s < o; s += 2) {
                    var u = n.exec(r[s]);
                    u && i.push(t + "()@" + u[2] + ":" + u[1] + " -- " + r[s + 1].replace(/^\s+/, ""))
                }
                return i
            },
            other: function(e) {
                var t = "{anonymous}",
                    n = /function\s*([\w\-$]+)?\s*\(/i,
                    r = [],
                    i, s, o = 10;
                while (e && e.arguments && r.length < o) i = n.test(e.toString()) ? RegExp.$1 || t : t, s = Array.prototype.slice.call(e.arguments || []), r[r.length] = i + "(" + this.stringifyArguments(s) + ")", e = e.caller;
                return r
            },
            stringifyArguments: function(e) {
                var t = [],
                    n = Array.prototype.slice;
                for (var r = 0; r < e.length; ++r) {
                    var i = e[r];
                    i === undefined ? t[r] = "undefined" : i === null ? t[r] = "null" : i.constructor && (i.constructor === Array ? i.length < 3 ? t[r] = "[" + this.stringifyArguments(i) + "]" : t[r] = "[" + this.stringifyArguments(n.call(i, 0, 1)) + "..." + this.stringifyArguments(n.call(i, -1)) + "]" : i.constructor === Object ? t[r] = "#object" : i.constructor === Function ? t[r] = "#function" : i.constructor === String ? t[r] = '"' + i + '"' : i.constructor === Number && (t[r] = i))
                }
                return t.join(",")
            },
            sourceCache: {},
            ajax: function(e) {
                var t = this.createXMLHTTPObject();
                if (t) try {
                    return t.open("GET", e, !1), t.send(null), t.responseText
                } catch (n) {}
                return ""
            },
            createXMLHTTPObject: function() {
                var e, t = [function() {
                    return new XMLHttpRequest
                }, function() {
                    return new ActiveXObject("Msxml2.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Msxml3.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Microsoft.XMLHTTP")
                }];
                for (var n = 0; n < t.length; n++) try {
                    return e = t[n](), this.createXMLHTTPObject = t[n], e
                } catch (r) {}
            },
            isSameDomain: function(e) {
                return typeof location != "undefined" && e.indexOf(location.hostname) !== -1
            },
            getSource: function(e) {
                return e in this.sourceCache || (this.sourceCache[e] = this.ajax(e).split("\n")), this.sourceCache[e]
            },
            guessAnonymousFunctions: function(e) {
                for (var t = 0; t < e.length; ++t) {
                    var n = /\{anonymous\}\(.*\)@(.*)/,
                        r = /^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,
                        i = e[t],
                        s = n.exec(i);
                    if (s) {
                        var o = r.exec(s[1]);
                        if (o) {
                            var u = o[1],
                                a = o[2],
                                f = o[3] || 0;
                            if (u && this.isSameDomain(u) && a) {
                                var l = this.guessAnonymousFunction(u, a, f);
                                e[t] = i.replace("{anonymous}", l)
                            }
                        }
                    }
                }
                return e
            },
            guessAnonymousFunction: function(e, t, n) {
                var r;
                try {
                    r = this.findFunctionName(this.getSource(e), t)
                } catch (i) {
                    r = "getSource failed with url: " + e + ", exception: " + i.toString()
                }
                return r
            },
            findFunctionName: function(e, t) {
                var n = /function\s+([^(]*?)\s*\(([^)]*)\)/,
                    r = /['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,
                    i = /['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,
                    s = "",
                    o, u = Math.min(t, 20),
                    a, f;
                for (var l = 0; l < u; ++l) {
                    o = e[t - l - 1], f = o.indexOf("//"), f >= 0 && (o = o.substr(0, f));
                    if (o) {
                        s = o + s, a = r.exec(s);
                        if (a && a[1]) return a[1];
                        a = n.exec(s);
                        if (a && a[1]) return a[1];
                        a = i.exec(s);
                        if (a && a[1]) return a[1]
                    }
                }
                return "(?)"
            }
        }, e
    }), define("ducts/logErrorHandler", ["jquery", "underscore", "backbone", "stacktrace"], function(e, t, n, r) {
        var i = {
            bindTo: function(e) {
                e.onerror = function(e, t, i) {
                    if (t) {
                        var s = r() || [],
                            o = s.slice(4).join("\n"),
                            u = BMT.user && BMT.user.get("id");
                        BMT.logError({
                            message: e,
                            file: t,
                            line: i,
                            stackTrace: o,
                            route: n.history.fragment,
                            userId: u
                        })
                    }
                }
            }
        };
        return i
    }), define("ducts/snapEngageHandler", ["jquery"], function(e) {
        function i(t) {
            if (window.SnapEngage) {
                t && t();
                return
            }
            e.getScript("//commondatastorage.googleapis.com/code.snapengage.com/js/aceeb8b4-04ac-410b-a289-f8bcbee40dde.js", function(e, n, r) {
                t && t()
            })
        }

        function s(e) {
            SnapEngage.allowProactiveChat(e), e && !n && (n = !0, SnapEngage.setCallback("ChatMessageSent", function() {
                BMT.hasSession() && BMT.refreshSession()
            }))
        }
        var t = 6e4,
            n = !1,
            r = !1,
            o = {
                bindTo: function(n) {
                    n.bind("snapEngage:enable", function() {
                        i(function() {
                            var n = function(t) {
                                SnapEngage.getAgentStatusAsync(function(n) {
                                    /*e(".open-live-chat").toggleClass("live-chat-disabled", !n).text(n ? "Chat with us now" : "Live chat unavailable"), s(n), t && t()*/
                                })
                            };
                            r || n(function() {
                                r = setInterval(n, t)
                            })
                        })
                    }), n.bind("snapEngage:disable", function() {
                        window.SnapEngage && (clearInterval(r), r = !1, s(!1))
                    })
                }
            };
        return o
    }), define("ducts/crazyEggHandler", [], function() {
        function e() {
            setTimeout(function() {
                var e = document.createElement("script"),
                    t = document.getElementsByTagName("script")[0];
                e.src = document.location.protocol + "//dnn506yrbagrg.cloudfront.net/pages/scripts/0018/4907.js?" + Math.floor((new Date).getTime() / 36e5), e.async = !0, e.type = "text/javascript", t.parentNode.insertBefore(e, t)
            }, 1)
        }
        var t = {
            bindTo: function(t) {
                t.bind("crazyEgg:enable", function() {
                    e()
                })
            }
        };
        return t
    }), define("ducts/linkBankAccountHandler", ["modules/modals", "views/linkBankAccount/setupView"], function(e, t) {
        $(document).on("click.rails", ".bank-accounts .details button", function(n) {
            var r = parseInt(n.currentTarget.dataset.bettermentdbAccountGroupId, 10),
                i = BMT.user.get("accountGroups").findWhere({
                    id: r
                }),
                s = new t({
                    accountGroup: i
                });
            s.once("close", function() {
                BMT.router.renderPage("bankAccounts")
            }), e.show(s)
        })
    }), define("ducts/smartDepositHandler", ["jquery", "underscore", "modules/modals", "services/accountService", "views/common/smartDepositSettingsView"], function(e, t, n, r, i) {
        e(document).on("rails:smart_deposit_config:start", function(e, t) {
            var s = r.getAllAccounts().get(t),
                o = i.withConfig(s.get("smartDepositConfig"));
            o.once("close", function() {
                BMT.router.renderPage("transferNew")
            }), n.show(o)
        })
    }), define("ducts/ductTape", ["ducts/depositHandler", "ducts/logErrorHandler", "ducts/snapEngageHandler", "ducts/crazyEggHandler", "ducts/linkBankAccountHandler", "ducts/smartDepositHandler"], function(e, t, n, r, i, s, o) {
        return {
            bindAllTo: function(i) {
                e.bindTo(i), t.bindTo(window), n.bindTo(i), r.bindTo(i)
            }
        }
    }), define("hbs!views/common/headerLogo", ["hbs", "hbs/handlebars"], function(e, t) {
        var n = t.template(function(e, t, n, r, i) {
            function l(e, t) {
                var r = "",
                    i, s;
                return r += '\n    <a href="', (s = n.headerLogoUrl) ? i = s.call(e, {
                    hash: {}
                }) : (s = e && e.headerLogoUrl, i = typeof s === u ? s.call(e, {
                    hash: {}
                }) : s), r += a(i) + '" class="logo"></a>\n', r
            }

            function c(e, t) {
                return '\n    <span class="logo"></span>\n'
            }
            this.compilerInfo = [4, ">= 1.0.0"], n = this.merge(n, e.helpers);
            var s = "",
                o, u = "function",
                a = this.escapeExpression,
                f = this;
            o = n["if"].call(t, t && t.headerLogoUrl, {
                hash: {},
                inverse: f.program(3, c, i),
                fn: f.program(1, l, i)
            });
            if (o || o === 0) s += o;
            return s += "\n", s
        });
        return t.registerPartial("views/common/headerLogo", n), n
    }), define("views/common/headerLogoView", ["common/betterment.views", "hbs!views/common/headerLogo", "services/firmFetcher", "components/common/scripts/services/domainService"], function(e, t, n, r) {
        return e.View.extend({
            template: t,
            templateHelpers: {
                headerLogoUrl: function() {
                    return BMT.hasLoggedInUser() ? "#summary" : n.get() ? !1 : r.brochureHost()
                }
            },
            onShow: function() {
                var e = this.$(".logo");
                e.empty(), this.model && (this.model.has("knockedOutLogoUrl") ? e.append($("<img>").attr({
                    src: this.model.get("knockedOutLogoUrl"),
                    alt: this.model.get("name")
                })) : e.text(this.model.get("name")))
            }
        })
    }), define("bmt", ["jquery", "underscore", "backbone", "marionette", "modules/logger", "common/router", "common/errorHandler", "regions/modalRegion", "regions/drawerRegion", "regions/feedRegion", "views/common/alertView", "views/common/subnav/subnavView", "views/common/tabBarView", "views/common/footerLinksView", "views/common/flashView", "views/common/loadingView", "views/summary/summaryView", "views/activity/activityView", "views/common/copyPersonalBankAccountBannerView", "views/common/verifyAccountBannerView", "views/common/emailTrustDocumentsBannerView", "views/jointAccountSignup/resendBannerView", "views/retirementPlanning/bannerView", "views/transfer/smartDeposits/relinkBankBannerView", "views/common/depositAfterSignupBannerView", "models/session", "models/user", "models/visitor", "components/common/scripts/models/appData", "components/common/scripts/services/domainService", "components/portfolio/scripts/services/portfolioSetService", "components/common/scripts/services/browserService", "viewHelpers/userStateAlertHelper", "common/betterment.models", "common/loginAlertChain", "components/common/scripts/analytics/analytics", "components/common/scripts/models/v1/assetClassMetadata", "ducts/ductTape", "components/common/scripts/modules/async", "services/advisorFetcher", "services/bankAccountService", "views/common/headerLogoView", "services/firmFetcher", "services/accountService"], function(e, t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H, B, j, F, I, q, R, U, z) {
        function W() {
            e(document.body).toggleClass("multi-ag", BMT.user.get("accountGroups").length > 1), e(document.body).toggleClass("single-ag", BMT.user.get("accountGroups").length <= 1)
        }

        function X(t) {
            BMT.accountGroup = t, e(document.body).toggleClass("trust-ag", t.isTrust()), e(document.body).toggleClass("personal-ag", t.isPersonal()), e(document.body).toggleClass("joint-ag", t.isJointAccount()), e(document.body).toggleClass("non-trust-ag", !t.isTrust()), e(document.body).toggleClass("non-personal-ag", !t.isPersonal()), e(document.body).toggleClass("non-joint-ag", !t.isJointAccount()), BMT.user.isFull() && e.ajaxSetup({
                data: {
                    accountGroupId: t.get("id")
                }
            })
        }

        function V(t) {
            t.is("performerSession") ? e(".session-banner.performer").show() : t.is("advisorSession") && e(".session-banner.advisor").show()
        }
        return BMT = new r.Application, e.ajaxSetup({
            headers: {
                "X-Page-Load-Id": (new Date).getTime(),
                From: "Backbone"
            },
            cache: !1
        }), t.extend(BMT, {
            saveEmailCookieKey: "savedEmail",
            userNameCookieKey: "userName",
            analytics: H,
            hasLoggedInUser: function() {
                return !!this.user && !this.user.isNew() || this.user.isGhost()
            },
            hasSession: function() {
                return this.session && !this.session.isNew()
            },
            alert: function(e, t) {
                t = t || {};
                var n = new l(e);
                return t.noShow || this.modal.show(n), n
            },
            flash: function(e) {
                BMT.flashPlaceholder.show(new d({
                    model: new D.Model({
                        message: e
                    })
                }))
            },
            navigateWithFlash: function(e, t) {
                BMT.router.navigate(e, {
                    trigger: !0
                }), BMT.flash(t)
            },
            firePixel: function(e) {
                e && (e[0] !== "<" && (e = '<img src="' + e + '" />'), BMT.$pixels.append(e))
            },
            refreshSession: function() {
                N.refreshTimeout()
            },
            refreshAccounts: function(e, t) {
                return z.loadAccounts().then(e, t)
            },
            refreshCheckingAccountBanner: function() {
                q.shouldShowLinkAccount() && q.canCopyPersonalBankAccount(BMT.user, BMT.accountGroup) ? BMT.bankAccountBannerContent.show(new y) : q.shouldShowVerifyAccount() ? BMT.bankAccountBannerContent.show(new b) : BMT.bankAccountBannerContent.empty()
            },
            needToShowTrustDocumentBanner: function() {
                return BMT.currentPage === "transfer" && BMT.accountGroup.get("bankAccount").not("active") ? !1 : BMT.accountGroup.isTrust() ? BMT.accountGroup.get("trust").needsDocuments() ? w.forceHide ? !1 : !0 : !1 : !1
            },
            refreshTrustDocumentsBanner: function() {
                BMT.needToShowTrustDocumentBanner() ? BMT.trustDocumentsBannerContent.show(new w) : BMT.trustDocumentsBannerContent.empty()
            },
            refreshJointAccountInviteBanner: function() {
                k.hasVariation("joint_accounts_on") && !E.forceHide && BMT.currentPage !== "goalSetup" && (!BMT.accountGroup.isJointAccount() || BMT.accountGroup.get("accountGroupState") !== "NORMAL") && BMT.accountGroup.get("accounts").length && BMT.accountGroup.get("bankAccount").get("active") ? BMT.accountGroup.getPendingJointAccountInvitations().done(function(e) {
                    e.length && BMT.jointAccountInviteBannerContent.show(new E({
                        model: e.at(0)
                    }))
                }) : BMT.jointAccountInviteBannerContent.empty()
            },
            refreshDepositAfterSignupBanner: function() {
                this.depositAfterSignupBannerView && !this.depositAfterSignupBannerView.isDismissed() && (BMT.currentPage === "summary" || BMT.currentPage === "transfer" ? this.depositAfterSignupBannerView.show() : this.depositAfterSignupBannerView.hide())
            },
            showDepositAfterSignupBanner: function() {
                BMT.accountGroup.is("funded") || (this.depositAfterSignupBannerView = new T, BMT.depositAfterSignupContent.show(this.depositAfterSignupBannerView))
            },
            refreshRetirementPlanBanner: function() {
                S.shouldShow() ? BMT.retirementPlanBannerContent.show(new S) : BMT.retirementPlanBannerContent.empty()
            },
            refreshRelinkBankBanner: function() {
                x.shouldShow() ? BMT.relinkBankBannerContent.show(new x) : BMT.relinkBankBannerContent.empty()
            },
            refreshBanners: function() {
                BMT.refreshCheckingAccountBanner(), BMT.refreshTrustDocumentsBanner(), BMT.refreshJointAccountInviteBanner(), BMT.refreshDepositAfterSignupBanner(), BMT.refreshRetirementPlanBanner(), BMT.refreshRelinkBankBanner()
            },
            showMainContent: function(t) {
                var n = BMT.mainContent;
                BMT.setResponsiveLayout(t.options.setResponsiveLayout === !0), BMT.mainContent.empty(), BMT.unboundedContent.empty(), e("#railsContent").empty(), t.showInRegion && (n = t.showInRegion), n.show(t)
            },
            showLoading: function() {
                BMT.showMainContent(new v)
            },
            refreshAccountGroup: function() {
                BMT.user.fetch().done(function() {
                    BMT.setAccountGroup(BMT.accountGroup)
                })
            },
            emptyBanners: function() {
                BMT.bankAccountBannerContent.empty(), BMT.trustDocumentsBannerContent.empty(), BMT.jointAccountInviteBannerContent.empty(), BMT.depositAfterSignupContent.empty()
            },
            setAccountGroup: function(e, t) {
                function i() {
                    X(n), BMT.subnav.show(new c), BMT.refreshBanners(), BMT.currentPage = "summary", BMT.router.navigate("summary"), BMT.showMainContent(new m), BMT.tabBar.show(new h({
                        page: "summary",
                        model: BMT.accountGroup
                    })), BMT.footerLinks.show(new p)
                }
                t = t || {};
                var n = BMT.accountGroup;
                X(e);
                var r = new c;
                r.lock(), BMT.emptyBanners(), BMT.showMainContent(new v), BMT.subnav.show(r), BMT.tabBar.empty(), BMT.vent.trigger("closeDrawer"), BMT.refreshAccounts(function() {
                    BMT.selectedAccount = t.account || BMT.accounts().at(0), F.every(BMT.accounts().models, function(e) {
                        return O.loadPortfolioSetForAccount(e)
                    }).done(function() {
                        r.unlock(), BMT.refreshBanners(), BMT.user.returnsCollection = null, _.checkStateAndAlert(), BMT.accountGroup.isClosed() ? (BMT.router.navigate("activity"), BMT.router.renderPage("activity")) : (BMT.router.navigate(t.destination || "summary"), BMT.router.renderPage(t.destination || "summary", t.pageOptions)), BMT.tabBar.show(new h({
                            page: BMT.currentPage,
                            model: BMT.accountGroup
                        })), BMT.footerLinks.show(new p), t.scrollToTop && BMT.scrollToTop()
                    })
                }, i)
            },
            setAccountGroupForGhost: function(e) {
                X(e)
            },
            accounts: function() {
                return this.accountGroup.get("accounts")
            },
            toggleAdvisedBranding: function(t) {
                e(document.body).toggleClass("advised-user", !!t), e(document.body).toggleClass("unadvised-user", !t), t ? e(document).prop("title", t.get("name") + " - Powered by BetaSmartz") : e(document).prop("title", "Betterment"), BMT.headerLogo.show(new R({
                    model: t
                }))
            },
            environment: function() {
                return L.getInstance().get("environment")
            },
            isTest: function() {
                return this.environment() === "test"
            },
            isLocal: function() {
                return this.environment() === "local"
            },
            isDevelop: function() {
                return this.environment() === "develop"
            },
            isStage: function() {
                return this.environment() === "stage"
            },
            isProd: function() {
                return this.environment() === "prod"
            },
            isBeta: function() {
                return !!location.host.match(/^beta/)
            },
            goToSignup: function(e) {
                if (BMT.hasLoggedInUser()) BMT.router.navigate("summary", {
                    trigger: !0
                });
                else if (!e) window.location.href = A.getResponsiveSignupUrl();
                else if (!M.isMobile()) BMT.router.navigate("signup", {
                    trigger: !0
                });
                else {
                    var t = "";
                    e && (t = "?token=" + encodeURIComponent(e)), window.location.href = A.appHost() + "/mobile-signup.jsp" + t
                }
            },
            goToLogin: function() {
                BMT.router.navigate("login", {
                    trigger: !0
                })
            },
            getCookie: function(t) {
                var n = this.user && this.user.get("id");
                return e.cookie([n, "_", t].join(""))
            },
            setCookie: function(t, n, r) {
                var i = this.user && this.user.get("id");
                return e.cookie([i, "_", t].join(""), n, r)
            },
            scrollToTop: function(t) {
                t = t || {};
                var n = 600,
                    r = t.duration === 0 ? 0 : t.duration || n,
                    i = t.async !== !1,
                    s = e("html, body");
                i ? s.animate({
                    scrollTop: 0
                }, r) : s.scrollTop(0)
            },
            initializeLog: function() {
                i.init(BMT.isLocal())
            },
            logInfo: function(e) {
                i.info(e)
            },
            logDebug: function(e) {
                this.isProd() || i.debug(e)
            },
            logWarn: function(e) {
                i.warn(e)
            },
            logError: function(e) {
                i.error(e)
            },
            setResponsiveLayout: function(t) {
                t ? (e("html").addClass("responsive"), e("meta[name=viewport]").attr("content", "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")) : t === !1 && (e("html").removeClass("responsive"), e("meta[name=viewport]").attr("content", "width=1100"))
            }
        }), BMT.addInitializer(function(r) {
            j.bindAllTo(BMT.vent), BMT.addRegions({
                subnav: "#subnav",
                tabBar: "#tabBar",
                ribbonDrawer: a,
                secondaryContent: "#secondaryContent",
                bankAccountBannerContent: "#bankAccountBanner",
                trustDocumentsBannerContent: "#trustDocumentsBanner",
                jointAccountInviteBannerContent: "#jointAccountInviteBanner",
                retirementPlanBannerContent: "#retirementPlanBanner",
                relinkBankBannerContent: "#relinkBankBanner",
                depositAfterSignupContent: "#depositAfterSignupBanner",
                mainContent: "#mainContent",
                unboundedContent: "#unboundedContent",
                footerLinks: "#footerLinks",
                modal: u,
                flashPlaceholder: "#flash-placeholder",
                flyoverRegion: "#flyoverRegion",
                popoverRegion: "#popover-region",
                headerLogo: "#header-logo",
                feed: f
            }), BMT.vent.bind("error", function(e, t, n) {
                BMT.alert(o.getErrorDetailsFromResponse(t))
            }), BMT.vent.bind("errorCode", function(e) {
                BMT.alert(o.getErrorContentForCode(e))
            }), BMT.vent.bind("login", function(e) {
                var e = e || {},
                    t = BMT.user,
                    n = function(e, t) {
                        var n = BMT.router.initialPage || "summary";
                        V(e), W(), U.setFirmForAdvisor(t), BMT.toggleAdvisedBranding(U.get()), BMT.tabBar.show(new h({
                            page: n,
                            model: BMT.accountGroup
                        })), BMT.router.account ? BMT.selectedAccount = BMT.accounts().get(BMT.router.account) : BMT.selectedAccount = BMT.accounts().at(0), F.every(BMT.accounts().models, function(e) {
                            return O.loadPortfolioSetForAccount(e)
                        }).done(function() {
                            BMT.scrollToTop({
                                async: !1
                            }), BMT.router.navigate(n, !0, BMT.router.initialOptions), delete BMT.router.initialPage, P.start(), window.dataLayer && window.dataLayer.push({
                                event: "userLoggedIn"
                            })
                        })
                    };
                N.refreshTimeout(), X(t.getDefaultAccountGroup());
                var r = [];
                r.push(k.fetch()), t.isAdvised() && r.push(I.fetch()), F.whenAll(r).always(function(e, r) {
                    var i = {
                        FeeType: BMT.user.get("pricingSummary").displayName()
                    };
                    BMT.analytics.registerUser(t, i), BMT.analytics.track("UserLoggedIn"), BMT.refreshAccounts(function() {
                        n(t, r)
                    })
                })
            }), BMT.vent.bind("logout", function(e) {
                window.location.replace("/logout");
                /*
                var n = BMT.isTest() || BMT.isLocal() || BMT.user.isAdvised(),
                    r = t.extend({
                        timeout: !1,
                        after: function() {
                            BMT.analytics.track("UserLoggedOut");
                            if (n) {
                                var e = (location.protocol || "https:") + "//",
                                    t = "/app/",
                                    i = U.get();
                                i && (t = "/" + i.get("slug") + t), location.href = e + location.host + t
                            } else location.href = A.brochureHost() + "/" + (r.timeout ? "timeout" : "logout")
                        }
                    }, e || {});
                BMT.session.destroy({
                    skipErrorAlert: !0,
                    complete: function() {
                        BMT.user.off(), BMT.user = new C, BMT.session = new N, BMT.accountGroup = null, r.after()
                    }
                })*/
            }), BMT.analytics.registerProperties({
                Platform: "Web",
                App: "WebApp"
            }), BMT.analytics.attachElementTracking(), e("header .logo").click(function() {
                var e = !BMT.user.isFull() && (!BMT.accounts().length || !BMT.accounts().first().isComplete());
                if (e) return !1
            }), BMT.$pixels = e("#pixels"), F.whenAll([L.loadInstance(), B.fetch()]).done(function() {
                BMT.session = new N, BMT.user = new C, BMT.user.on("change", W), X(BMT.user.getDefaultAccountGroup()), BMT.router = new s, BMT.subnav.show(new c), BMT.headerLogo.show(new R), BMT.footerLinks.show(new p), BMT.initializeLog(), BMT.showMainContent(new v);
                var e = location.pathname.match(/^\/([a-z0-9-]+)\/app\//i),
                    t = e && e[1];
                t ? U.fetchAndSetFirmBySlug(t, {
                    skipErrorAlert: !0
                }).done(function(e) {
                    BMT.toggleAdvisedBranding(e), n.history.start({
                        root: "/" + t + "/app/"
                    })
                }).fail(function() {
                    location.href = "/app/"
                }) : n.history.start({
                    root: "/app/"
                })
            }).fail(function() {
                location.href = "/503"
            }), M.isWebkit() && e("body").addClass("webkit"), M.isIe() && e("body").addClass("ie")
        }), BMT
    }), define("components/common/scripts/util/templates", ["jquery", "marionette"], function(e, t) {
        return {
            setup: function(n) {
                var r = new e.Deferred,
                    i = window.BMTVersion ? window.BMTVersion + "." : "",
                    s = "/static/templates/client/templates." + i + "xml",
                    o = n || s;
                return e.get(o, function(n) {
                    var i = e(n);
                    t.TemplateCache.prototype.loadTemplate = function(e) {
                        return e ? (e = e.replace("#", ""), i.find('template[name="' + e + '"]').text()) : ""
                    }, r.resolve()
                }), r.promise()
            }
        }
    }),
    function(e) {
        define("backboneMemento", ["backbone"], function() {
            return function() {
                Backbone.Memento = function(e, t) {
                    "use strict";
                    var n = function(e, n) {
                            this.version = "0.4.1", n = t.extend({
                                ignore: []
                            }, n);
                            var r = new i(e, n),
                                o = new s(e, n),
                                u = function(e, t) {
                                    if (!e) return;
                                    r.deserialize(e, t)
                                };
                            this.store = function() {
                                var e = r.serialize();
                                o.push(e)
                            }, this.restore = function(e) {
                                var t = o.pop();
                                u(t, e)
                            }, this.restart = function(e) {
                                var t = o.rewind();
                                u(t, e)
                            }
                        },
                        r = function(t) {
                            t instanceof e.Model ? (this.removeAttr = function(e) {
                                t.unset(e)
                            }, this.restore = function(e) {
                                t.set(e)
                            }) : (this.removeAttr = function(e) {
                                t.remove(e)
                            }, this.restore = function(e) {
                                t.reset(e)
                            })
                        },
                        i = function(e, n) {
                            function s(e, n) {
                                e = t.clone(e);
                                if (n.hasOwnProperty("ignore") && n.ignore.length > 0)
                                    for (var r in n.ignore) {
                                        var i = n.ignore[r];
                                        delete e[i]
                                    }
                                return e
                            }

                            function o(e, t) {
                                var n = [];
                                if (!e || !t) return n;
                                for (var r in t) t.hasOwnProperty(r) && (e.hasOwnProperty(r) || n.push(r));
                                return n
                            }

                            function u(e, t) {
                                for (var n in t) {
                                    var r = t[n];
                                    i.removeAttr(r)
                                }
                            }

                            function a(t, n) {
                                var r = s(t, n),
                                    a = e.toJSON();
                                a = s(a, n);
                                var f = o(r, a);
                                u(e, f), i.restore(r)
                            }
                            var i = new r(e);
                            this.serialize = function() {
                                var t = e.toJSON();
                                return t = s(t, n), t
                            }, this.deserialize = function(e, r) {
                                r = t.extend({}, n, r), a(e, r)
                            }
                        },
                        s = function(e, t) {
                            function r() {
                                n = []
                            }
                            var n;
                            this.push = function(e) {
                                n.push(e)
                            }, this.pop = function(e) {
                                var t = n.pop();
                                return t
                            }, this.rewind = function() {
                                var e = n[0];
                                return r(), e
                            }, r()
                        };
                    return n
                }(Backbone, _)
            }.apply(e, arguments)
        })
    }(this),
    function(e, t) {
        typeof define == "function" && define.amd && define("backboneSyphon", ["underscore", "jquery", "backbone"], t)
    }(this, function(e, t, n) {
        return n.Syphon = function(e, t, n) {
            var r = {};
            r.ignoredTypes = ["button", "submit", "reset", "fieldset"], r.serialize = function(e, r) {
                var o = {},
                    f = u(r),
                    l = i(e, f);
                return n.each(l, function(e) {
                    var n = t(e),
                        r = s(n),
                        i = f.keyExtractors.get(r),
                        u = i(n),
                        l = f.inputReaders.get(r),
                        c = l(n),
                        h = f.keyAssignmentValidators.get(r);
                    if (h(n, u, c)) {
                        var p = f.keySplitter(u);
                        o = a(o, p, c)
                    }
                }), o
            }, r.deserialize = function(e, r, o) {
                var a = u(o),
                    l = i(e, a),
                    c = f(a, r);
                n.each(l, function(e) {
                    var n = t(e),
                        r = s(n),
                        i = a.keyExtractors.get(r),
                        o = i(n),
                        u = a.inputWriters.get(r),
                        f = c[o];
                    u(n, f)
                })
            };
            var i = function(e, r) {
                    var i = o(e),
                        u = i.elements;
                    return u = n.reject(u, function(e) {
                        var i, o = s(e),
                            u = r.keyExtractors.get(o),
                            a = u(t(e)),
                            f = n.include(r.ignoredTypes, o),
                            l = n.include(r.include, a),
                            c = n.include(r.exclude, a);
                        return l ? i = !1 : r.include ? i = !0 : i = c || f, i
                    }), u
                },
                s = function(e) {
                    var n, r = t(e),
                        i = r[0].tagName,
                        s = i;
                    return i.toLowerCase() === "input" && (n = r.attr("type"), n ? s = n : s = "text"), s.toLowerCase()
                },
                o = function(e) {
                    return n.isUndefined(e.$el) && e.tagName.toLowerCase() === "form" ? e : e.$el.is("form") ? e.el : e.$("form")[0]
                },
                u = function(e) {
                    var t = n.clone(e) || {};
                    return t.ignoredTypes = n.clone(r.ignoredTypes), t.inputReaders = t.inputReaders || r.InputReaders, t.inputWriters = t.inputWriters || r.InputWriters, t.keyExtractors = t.keyExtractors || r.KeyExtractors, t.keySplitter = t.keySplitter || r.KeySplitter, t.keyJoiner = t.keyJoiner || r.KeyJoiner, t.keyAssignmentValidators = t.keyAssignmentValidators || r.KeyAssignmentValidators, t
                },
                a = function(e, t, r) {
                    if (!t) return e;
                    var i = t.shift();
                    return e[i] || (e[i] = n.isArray(i) ? [] : {}), t.length === 0 && (n.isArray(e[i]) ? e[i].push(r) : e[i] = r), t.length > 0 && a(e[i], t, r), e
                },
                f = function(e, t, r) {
                    var i = {};
                    return n.each(t, function(t, s) {
                        var o = {};
                        r && (s = e.keyJoiner(r, s)), n.isArray(t) ? (s += "[]", o[s] = t) : n.isObject(t) ? o = f(e, t, s) : o[s] = t, n.extend(i, o)
                    }), i
                };
            return r
        }(n, t, e), n.Syphon.TypeRegistry = function() {
            this.registeredTypes = {}
        }, n.Syphon.TypeRegistry.extend = n.Model.extend, e.extend(n.Syphon.TypeRegistry.prototype, {
            get: function(e) {
                var t = this.registeredTypes[e];
                return t || (t = this.registeredTypes["default"]), t
            },
            register: function(e, t) {
                this.registeredTypes[e] = t
            },
            registerDefault: function(e) {
                this.registeredTypes["default"] = e
            },
            unregister: function(e) {
                this.registeredTypes[e] && delete this.registeredTypes[e]
            }
        }), n.Syphon.KeyExtractorSet = n.Syphon.TypeRegistry.extend(), n.Syphon.KeyExtractors = new n.Syphon.KeyExtractorSet, n.Syphon.KeyExtractors.registerDefault(function(e) {
            return e.prop("name")
        }), n.Syphon.InputReaderSet = n.Syphon.TypeRegistry.extend(), n.Syphon.InputReaders = new n.Syphon.InputReaderSet, n.Syphon.InputReaders.registerDefault(function(e) {
            return e.val()
        }), n.Syphon.InputReaders.register("checkbox", function(e) {
            var t = e.prop("checked");
            return t
        }), n.Syphon.InputWriterSet = n.Syphon.TypeRegistry.extend(), n.Syphon.InputWriters = new n.Syphon.InputWriterSet, n.Syphon.InputWriters.registerDefault(function(e, t) {
            e.val(t)
        }), n.Syphon.InputWriters.register("checkbox", function(e, t) {
            e.prop("checked", t)
        }), n.Syphon.InputWriters.register("radio", function(e, t) {
            e.prop("checked", e.val() === t)
        }), n.Syphon.KeyAssignmentValidatorSet = n.Syphon.TypeRegistry.extend(), n.Syphon.KeyAssignmentValidators = new n.Syphon.KeyAssignmentValidatorSet, n.Syphon.KeyAssignmentValidators.registerDefault(function() {
            return !0
        }), n.Syphon.KeyAssignmentValidators.register("radio", function(e, t, n) {
            return e.prop("checked")
        }), n.Syphon.KeySplitter = function(e) {
            var t = e.match(/[^\[\]]+/g);
            return e.indexOf("[]") === e.length - 2 && (lastKey = t.pop(), t.push([lastKey])), t
        }, n.Syphon.KeyJoiner = function(e, t) {
            return e + "[" + t + "]"
        }, n.Syphon
    }), define("common/syphonCustomization", ["jquery", "backbone", "components/common/scripts/util/moneyHandler", "backboneSyphon"], function(e, t, n) {
        t.Syphon.InputReaders.registerDefault(function(e) {
            var t = e.val();
            return e.is("[money-input=int]") ? t = Math.floor(n.toNumber(t)) : e.is("[money-input]") && (t = n.toNumber(t)), t
        }), t.Syphon.InputWriters.registerDefault(function(e, t) {
            e.is("[money-input]") && (t = n.fromNumber(t)), e.val(t)
        })
    }),
    function() {
        var e, t, n, r, i, s, o, u, a, f = function(e, t) {
                return function() {
                    return e.apply(t, arguments)
                }
            },
            l = [].slice,
            c = [].indexOf || function(e) {
                for (var t = 0, n = this.length; t < n; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            };
        e = {}, String.prototype.trim || (String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, "")
        }), e.Binding = function() {
            function u(n, s, u, a, l) {
                this.el = n, this.type = s, this.model = u, this.keypath = a, this.options = l != null ? l : {}, this.unbind = f(this.unbind, this), this.bind = f(this.bind, this), this.publish = f(this.publish, this), this.sync = f(this.sync, this), this.set = f(this.set, this), this.formattedValue = f(this.formattedValue, this), this.isBidirectional = f(this.isBidirectional, this), this.routine = function() {
                    switch (this.options.special) {
                        case "event":
                            return i(this.type);
                        case "class":
                            return r(this.type);
                        case "iteration":
                            return o(this.type);
                        default:
                            return e.routines[this.type] || t(this.type)
                    }
                }.call(this), this.formatters = this.options.formatters || []
            }
            return u.prototype.isBidirectional = function() {
                var e;
                return (e = this.type) === "value" || e === "checked" || e === "unchecked"
            }, u.prototype.formattedValue = function(t) {
                var n, r, i, s, o, u, a, f;
                u = this.formatters;
                for (s = 0, o = u.length; s < o; s++) r = u[s], n = r.split(/\s+/), i = n.shift(), t = this.model[i] instanceof Function ? (a = this.model)[i].apply(a, [t].concat(l.call(n))) : e.formatters[i] ? (f = e.formatters)[i].apply(f, [t].concat(l.call(n))) : void 0;
                return t
            }, u.prototype.set = function(e) {
                return e = e instanceof Function && this.options.special !== "event" ? this.formattedValue(e.call(this.model)) : this.formattedValue(e), this.options.special === "event" ? (this.routine(this.el, e, this.currentListener), this.currentListener = e) : this.options.special === "iteration" ? this.routine(this.el, e, this) : this.routine(this.el, e)
            }, u.prototype.sync = function() {
                return this.set(this.options.bypass ? this.model[this.keypath] : e.config.adapter.read(this.model, this.keypath))
            }, u.prototype.publish = function() {
                return e.config.adapter.publish(this.model, this.keypath, s(this.el))
            }, u.prototype.bind = function() {
                var t, r, i, s, o, u, a;
                this.options.bypass ? this.sync() : (e.config.adapter.subscribe(this.model, this.keypath, this.sync), e.config.preloadData && this.sync());
                if ((u = this.options.dependencies) != null ? u.length : void 0) {
                    a = this.options.dependencies;
                    for (s = 0, o = a.length; s < o; s++) t = a[s], /^\./.test(t) ? (i = this.model, r = t.substr(1)) : (t = t.split("."), i = this.view.models[t.shift()], r = t.join(".")), e.config.adapter.subscribe(i, r, this.sync)
                }
                if (this.isBidirectional()) return n(this.el, "change", this.publish)
            }, u.prototype.unbind = function() {
                var t, n, r, i, s;
                if (!this.options.bypass) {
                    e.config.adapter.unsubscribe(this.model, this.keypath, this.sync);
                    if ((i = this.options.dependencies) != null ? i.length : void 0) {
                        s = this.options.dependencies;
                        for (n = 0, r = s.length; n < r; n++) t = s[n], e.config.adapter.unsubscribe(this.model, t, this.sync)
                    }
                    if (this.isBidirectional()) return this.el.removeEventListener("change", this.publish)
                }
            }, u
        }(), e.View = function() {
            function t(e, t) {
                this.els = e, this.models = t, this.publish = f(this.publish, this), this.sync = f(this.sync, this), this.unbind = f(this.unbind, this), this.bind = f(this.bind, this), this.select = f(this.select, this), this.build = f(this.build, this), this.bindingRegExp = f(this.bindingRegExp, this), this.els.jquery || this.els instanceof Array || (this.els = [this.els]), this.build()
            }
            return t.prototype.bindingRegExp = function() {
                var t;
                return t = e.config.prefix, t ? new RegExp("^data-" + t + "-") : /^data-/
            }, t.prototype.build = function() {
                var t, n, r, i, s, o, u, a, f, l, h, p, d, v, m, g = this;
                this.bindings = [], f = [], o = null, t = this.bindingRegExp(), i = /^on-/, n = /^class-/, s = /^each-/, a = function(r) {
                    var u, a, l, h, p, d, v, m, y, b, w, E, S, x, T, N, C, k, L, A, O, M, _, D, P, H;
                    if (c.call(f, r) < 0) {
                        D = r.attributes;
                        for (N = 0, A = D.length; N < A; N++) {
                            a = D[N];
                            if (t.test(a.name)) {
                                T = a.name.replace(t, "");
                                if (s.test(T) && !g.models[T.replace(s, "")]) {
                                    P = r.getElementsByTagName("*");
                                    for (C = 0, O = P.length; C < O; C++) y = P[C], f.push(y);
                                    o = [a]
                                }
                            }
                        }
                        H = o || r.attributes;
                        for (k = 0, M = H.length; k < M; k++) {
                            a = H[k];
                            if (t.test(a.name)) {
                                b = {}, T = a.name.replace(t, ""), S = function() {
                                    var e, t, n, r;
                                    n = a.value.split("|"), r = [];
                                    for (e = 0, t = n.length; e < t; e++) E = n[e], r.push(E.trim());
                                    return r
                                }(), h = function() {
                                    var e, t, n, r;
                                    n = S.shift().split("<"), r = [];
                                    for (e = 0, t = n.length; e < t; e++) p = n[e], r.push(p.trim());
                                    return r
                                }(), w = h.shift(), x = w.split(/\.|:/), b.formatters = S, m = g.models[x.shift()], b.bypass = w.indexOf(":") !== -1, v = x.join(".");
                                if (m) {
                                    if (d = h.shift()) b.dependencies = d.split(/\s+/);
                                    i.test(T) && (T = T.replace(i, ""), b.special = "event"), n.test(T) && (T = T.replace(n, ""), b.special = "class"), s.test(T) && (T = T.replace(s, ""), b.special = "iteration"), l = new e.Binding(r, T, m, v, b), l.view = g, g.bindings.push(l)
                                }
                            }
                            if (o) {
                                for (L = 0, _ = o.length; L < _; L++) u = o[L], r.removeAttribute(u.name);
                                o = null
                            }
                        }
                    }
                }, v = this.els;
                for (l = 0, p = v.length; l < p; l++) {
                    r = v[l], a(r), m = r.getElementsByTagName("*");
                    for (h = 0, d = m.length; h < d; h++) u = m[h], a(u)
                }
            }, t.prototype.select = function(e) {
                var t, n, r, i, s;
                i = this.bindings, s = [];
                for (n = 0, r = i.length; n < r; n++) t = i[n], e(t) && s.push(t);
                return s
            }, t.prototype.bind = function() {
                var e, t, n, r, i;
                r = this.bindings, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.bind());
                return i
            }, t.prototype.unbind = function() {
                var e, t, n, r, i;
                r = this.bindings, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.unbind());
                return i
            }, t.prototype.sync = function() {
                var e, t, n, r, i;
                r = this.bindings, i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.sync());
                return i
            }, t.prototype.publish = function() {
                var e, t, n, r, i;
                r = this.select(function(e) {
                    return e.isBidirectional()
                }), i = [];
                for (t = 0, n = r.length; t < n; t++) e = r[t], i.push(e.publish());
                return i
            }, t
        }(), n = function(e, t, n) {
            return window.jQuery != null ? (e = jQuery(e), e.on != null ? e.on(t, n) : e.bind(t, n)) : window.addEventListener != null ? e.addEventListener(t, n, !1) : (t = "on" + t, e.attachEvent(t, n))
        }, a = function(e, t, n) {
            return window.jQuery != null ? (e = jQuery(e), e.off != null ? e.off(t, n) : e.unbind(t, n)) : window.removeEventListener ? e.removeEventListener(t, n, !1) : (t = "on" + t, e.detachEvent(t, n))
        }, s = function(e) {
            switch (e.type) {
                case "checkbox":
                    return e.checked;
                default:
                    return e.value
            }
        }, i = function(e) {
            return function(t, r, i) {
                r && n(t, e, r);
                if (i) return a(t, e, i)
            }
        }, r = function(e) {
            return function(t, n) {
                var r, i;
                r = " " + t.className + " ", i = r.indexOf(" " + e + " ") !== -1;
                if (!n === i) return t.className = n ? "" + t.className + " " + e : r.replace(" " + e + " ", " ").trim()
            }
        }, o = function(e) {
            return function(t, n, r) {
                var i, s, o, a, f, l, c, h, p, d, v, m, g, y;
                if (r.iterated != null) {
                    m = r.iterated;
                    for (h = 0, d = m.length; h < d; h++) a = m[h], a.view.unbind(), a.el.parentNode.removeChild(a.el)
                } else r.marker = document.createComment(" rivets: each-" + e + " "), t.parentNode.insertBefore(r.marker, t), t.parentNode.removeChild(t);
                r.iterated = [], y = [];
                for (p = 0, v = n.length; p < v; p++) {
                    s = n[p], i = {}, g = r.view.models;
                    for (l in g) f = g[l], i[l] = f;
                    i[e] = s, o = t.cloneNode(!0), c = r.iterated[r.iterated.length - 1] || r.marker, r.marker.parentNode.insertBefore(o, c.nextSibling), y.push(r.iterated.push({
                        el: o,
                        view: u.bind(o, i)
                    }))
                }
                return y
            }
        }, t = function(e) {
            return function(t, n) {
                return n ? t.setAttribute(e, n) : t.removeAttribute(e)
            }
        }, e.routines = {
            enabled: function(e, t) {
                return e.disabled = !t
            },
            disabled: function(e, t) {
                return e.disabled = !!t
            },
            checked: function(e, t) {
                return e.type === "radio" ? e.checked = e.value === t : e.checked = !!t
            },
            unchecked: function(e, t) {
                return e.type === "radio" ? e.checked = e.value !== t : e.checked = !t
            },
            show: function(e, t) {
                return e.style.display = t ? "" : "none"
            },
            hide: function(e, t) {
                return e.style.display = t ? "none" : ""
            },
            html: function(e, t) {
                return e.innerHTML = t != null ? t : ""
            },
            value: function(e, t) {
                return e.value = t != null ? t : ""
            },
            text: function(e, t) {
                return e.innerText != null ? e.innerText = t != null ? t : "" : e.textContent = t != null ? t : ""
            }
        }, e.config = {
            preloadData: !0
        }, e.formatters = {}, u = {
            routines: e.routines,
            formatters: e.formatters,
            config: e.config,
            configure: function(t) {
                var n, r;
                t == null && (t = {});
                for (n in t) r = t[n], e.config[n] = r
            },
            bind: function(t, n) {
                var r;
                return n == null && (n = {}), r = new e.View(t, n), r.bind(), r
            }
        }, typeof module != "undefined" && module !== null ? module.exports = u : this.rivets = u
    }.call(this), define("rivets", function() {}), define("components/common/scripts/mixins", ["underscore", "components/common/scripts/models/appData", "components/common/scripts/services/dateService", "datejs"], function(e, t, n) {
        e.extend(Date, {
            MS_PER_YEAR: 315576e5,
            MS_PER_DAY: 864e5,
            MS_PER_HOUR: 36e5,
            MS_PER_MINUTE: 6e4,
            DAYS_IN_YEAR: 365,
            now: function() {
                return new Date
            },
            yearsSince: function(e) {
                var t = (new Date).clearTime().getTime() - e.clone().clearTime().getTime();
                return Math.floor(t / Date.MS_PER_YEAR)
            }
        }), e.extend(Date.prototype, {
            dateWithOrdinal: function() {
                return "" + this.getDate() + this.getOrdinal()
            },
            daysBetween: function(e) {
                var t = e.clone().clearTime().getTime() - this.clone().clearTime().getTime();
                return Math.round(Math.abs(t / Date.MS_PER_DAY))
            },
            serverFormat: function() {
                return this.isInvalid() ? "" : this.toString("yyyyMMddHHmmss")
            },
            millisBetweenDays: function(e, t, n) {
                var r = e.clone().clearTime().getTime() - this.clone().clearTime().getTime(),
                    i = Math.abs(r / (n ? n : 1));
                return t ? i : Math.floor(i)
            },
            monthsBetween: function(e, t) {
                return this.millisBetweenDays(e, t, Date.MS_PER_YEAR / 12)
            },
            yearsBetween: function(e) {
                return Math.floor(Math.ceil(this.millisBetweenDays(e, !0, Date.MS_PER_YEAR) * 10) / 10)
            },
            isSameDay: function(t) {
                return e.isDate(t) ? this.getDate() === t.getDate() && this.getMonth() === t.getMonth() && this.getFullYear() === t.getFullYear() : !1
            },
            isSameDayOfMonth: function(t) {
                return e.isDate(t) ? this.getDate() === t.getDate() : !1
            },
            isToday: function() {
                return this.isSameDay(Date.today())
            },
            isAfterTodaysAutomaticDepositCutoff: function() {
                return this.isToday() && Date.now().getUTCHours() >= 17
            },
            addBusinessDays: function(e) {
                var t = this.clone(),
                    n = 0;
                while (e) t.addDays(1).isHolidayOrWeekend() || e--, n++;
                return this.clone().addDays(n)
            },
            isHoliday: function() {
                var r = this;
                return e.reduce(t.getInstance().get("holidays"), function(e, t) {
                    return e || r.isSameDay(n.parseServerDate(t))
                }, !1)
            },
            isWeekend: function() {
                var e = this.getDay();
                return e === 0 || e === 6
            },
            isHolidayOrWeekend: function() {
                return this.isHoliday() || this.isWeekend()
            },
            isBefore: function(e) {
                return this.compareTo(e) < 0
            },
            isAfter: function(e) {
                return this.compareTo(e) > 0
            },
            isSameDayOrAfter: function(e) {
                return this.isSameDay(e) || this.isAfter(e)
            },
            isBeforeToday: function() {
                return this.isBefore(Date.today())
            },
            isAfterToday: function() {
                return this.isAfter(Date.today())
            },
            isInvalid: function() {
                return isNaN(this.getTime())
            },
            isValid: function() {
                return !this.isInvalid()
            }
        }), e.extend(String.prototype, {
            bold: function() {
                return '<span class="bold-text">' + this + "</span>"
            },
            format: function() {
                var e = arguments;
                return this.replace(/{(\d+)}/g, function(t, n) {
                    return e[n] ? e[n] : t
                })
            },
            toBool: function() {
                return this.toString() === "true"
            },
            capitalize: function() {
                return this.substr(0, 1).toUpperCase() + this.substr(1).toLowerCase()
            },
            upperFirst: function() {
                return this.substr(0, 1).toUpperCase() + this.substr(1)
            },
            lowerFirst: function() {
                return this.substr(0, 1).toLowerCase() + this.substr(1)
            }
        }), e.extend(Math, {
            sq: function(e) {
                return Math.pow(e, 2)
            }
        }), e.extend(Array, {
            fill: function(e, t) {
                var n = [];
                for (var r = 0; r < t; r++) n[r] = e;
                return n
            }
        }), e.extend(Number.prototype, {
            round: function(e) {
                var t = Math.pow(10, e);
                return Math.round(this * t) / t
            },
            ceil: function(e) {
                var t = Math.pow(10, e);
                return Math.ceil(this * t) / t
            }
        })
    }),
    function(e) {
        define("jqueryUjs", ["jquery"], function() {
            return function() {
                (function(e, t) {
                    e.rails !== t && e.error("jquery-ujs has already been loaded!");
                    var n, r = e(document);
                    e.rails = n = {
                        linkClickSelector: "a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",
                        buttonClickSelector: "button[data-remote]:not(form button), button[data-confirm]:not(form button)",
                        inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]",
                        formSubmitSelector: "form",
                        formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",
                        disableSelector: "input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
                        enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",
                        requiredInputSelector: "input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",
                        fileInputSelector: "input[type=file]",
                        linkDisableSelector: "a[data-disable-with], a[data-disable]",
                        buttonDisableSelector: "button[data-remote][data-disable-with], button[data-remote][data-disable]",
                        CSRFProtection: function(t) {
                            var n = e('meta[name="csrf-token"]').attr("content");
                            n && t.setRequestHeader("X-CSRF-Token", n)
                        },
                        refreshCSRFTokens: function() {
                            var t = e("meta[name=csrf-token]").attr("content"),
                                n = e("meta[name=csrf-param]").attr("content");
                            e('form input[name="' + n + '"]').val(t)
                        },
                        fire: function(t, n, r) {
                            var i = e.Event(n);
                            return t.trigger(i, r), i.result !== !1
                        },
                        confirm: function(e) {
                            return confirm(e)
                        },
                        ajax: function(t) {
                            return e.ajax(t)
                        },
                        href: function(e) {
                            return e[0].href
                        },
                        handleRemote: function(r) {
                            var i, s, o, u, a, f;
                            if (n.fire(r, "ajax:before")) {
                                u = r.data("with-credentials") || null, a = r.data("type") || e.ajaxSettings && e.ajaxSettings.dataType;
                                if (r.is("form")) {
                                    i = r.attr("method"), s = r.attr("action"), o = r.serializeArray();
                                    var l = r.data("ujs:submit-button");
                                    l && (o.push(l), r.data("ujs:submit-button", null))
                                } else r.is(n.inputChangeSelector) ? (i = r.data("method"), s = r.data("url"), o = r.serialize(), r.data("params") && (o = o + "&" + r.data("params"))) : r.is(n.buttonClickSelector) ? (i = r.data("method") || "get", s = r.data("url"), o = r.serialize(), r.data("params") && (o = o + "&" + r.data("params"))) : (i = r.data("method"), s = n.href(r), o = r.data("params") || null);
                                return f = {
                                    type: i || "GET",
                                    data: o,
                                    dataType: a,
                                    beforeSend: function(e, i) {
                                        i.dataType === t && e.setRequestHeader("accept", "*/*;q=0.5, " + i.accepts.script);
                                        if (!n.fire(r, "ajax:beforeSend", [e, i])) return !1;
                                        r.trigger("ajax:send", e)
                                    },
                                    success: function(e, t, n) {
                                        r.trigger("ajax:success", [e, t, n])
                                    },
                                    complete: function(e, t) {
                                        r.trigger("ajax:complete", [e, t])
                                    },
                                    error: function(e, t, n) {
                                        r.trigger("ajax:error", [e, t, n])
                                    },
                                    crossDomain: n.isCrossDomain(s)
                                }, u && (f.xhrFields = {
                                    withCredentials: u
                                }), s && (f.url = s), n.ajax(f)
                            }
                            return !1
                        },
                        isCrossDomain: function(e) {
                            var t = document.createElement("a");
                            t.href = location.href;
                            var n = document.createElement("a");
                            try {
                                return n.href = e, n.href = n.href, !n.protocol || !n.host || t.protocol + "//" + t.host != n.protocol + "//" + n.host
                            } catch (r) {
                                return !0
                            }
                        },
                        handleMethod: function(r) {
                            var i = n.href(r),
                                s = r.data("method"),
                                o = r.attr("target"),
                                u = e("meta[name=csrf-token]").attr("content"),
                                a = e("meta[name=csrf-param]").attr("content"),
                                f = e('<form method="post" action="' + i + '"></form>'),
                                l = '<input name="_method" value="' + s + '" type="hidden" />';
                            a !== t && u !== t && !n.isCrossDomain(i) && (l += '<input name="' + a + '" value="' + u + '" type="hidden" />'), o && f.attr("target", o), f.hide().append(l).appendTo("body"), f.submit()
                        },
                        formElements: function(t, n) {
                            return t.is("form") ? e(t[0].elements).filter(n) : t.find(n)
                        },
                        disableFormElements: function(t) {
                            n.formElements(t, n.disableSelector).each(function() {
                                n.disableFormElement(e(this))
                            })
                        },
                        disableFormElement: function(e) {
                            var n, r;
                            n = e.is("button") ? "html" : "val", r = e.data("disable-with"), e.data("ujs:enable-with", e[n]()), r !== t && e[n](r), e.prop("disabled", !0)
                        },
                        enableFormElements: function(t) {
                            n.formElements(t, n.enableSelector).each(function() {
                                n.enableFormElement(e(this))
                            })
                        },
                        enableFormElement: function(e) {
                            var t = e.is("button") ? "html" : "val";
                            e.data("ujs:enable-with") && e[t](e.data("ujs:enable-with")), e.prop("disabled", !1)
                        },
                        allowAction: function(e) {
                            var t = e.data("confirm"),
                                r = !1,
                                i;
                            return t ? (n.fire(e, "confirm") && (r = n.confirm(t), i = n.fire(e, "confirm:complete", [r])), r && i) : !0
                        },
                        blankInputs: function(t, n, r) {
                            var i = e(),
                                s, o, u = n || "input,textarea",
                                a = t.find(u);
                            return a.each(function() {
                                s = e(this), o = s.is("input[type=checkbox],input[type=radio]") ? s.is(":checked") : s.val();
                                if (!o == !r) {
                                    if (s.is("input[type=radio]") && a.filter('input[type=radio]:checked[name="' + s.attr("name") + '"]').length) return !0;
                                    i = i.add(s)
                                }
                            }), i.length ? i : !1
                        },
                        nonBlankInputs: function(e, t) {
                            return n.blankInputs(e, t, !0)
                        },
                        stopEverything: function(t) {
                            return e(t.target).trigger("ujs:everythingStopped"), t.stopImmediatePropagation(), !1
                        },
                        disableElement: function(e) {
                            var r = e.data("disable-with");
                            e.data("ujs:enable-with", e.html()), r !== t && e.html(r), e.bind("click.railsDisable", function(e) {
                                return n.stopEverything(e)
                            })
                        },
                        enableElement: function(e) {
                            e.data("ujs:enable-with") !== t && (e.html(e.data("ujs:enable-with")), e.removeData("ujs:enable-with")), e.unbind("click.railsDisable")
                        }
                    }, n.fire(r, "rails:attachBindings") && (e.ajaxPrefilter(function(e, t, r) {
                        e.crossDomain || n.CSRFProtection(r)
                    }), e(window).on("pageshow.rails", function() {
                        e(e.rails.enableSelector).each(function() {
                            var t = e(this);
                            t.data("ujs:enable-with") && e.rails.enableFormElement(t)
                        }), e(e.rails.linkDisableSelector).each(function() {
                            var t = e(this);
                            t.data("ujs:enable-with") && e.rails.enableElement(t)
                        })
                    }), r.delegate(n.linkDisableSelector, "ajax:complete", function() {
                        n.enableElement(e(this))
                    }), r.delegate(n.buttonDisableSelector, "ajax:complete", function() {
                        n.enableFormElement(e(this))
                    }), r.delegate(n.linkClickSelector, "click.rails", function(r) {
                        var i = e(this),
                            s = i.data("method"),
                            o = i.data("params"),
                            u = r.metaKey || r.ctrlKey;
                        if (!n.allowAction(i)) return n.stopEverything(r);
                        !u && i.is(n.linkDisableSelector) && n.disableElement(i);
                        if (i.data("remote") !== t) {
                            if (u && (!s || s === "GET") && !o) return !0;
                            var a = n.handleRemote(i);
                            return a === !1 ? n.enableElement(i) : a.fail(function() {
                                n.enableElement(i)
                            }), !1
                        }
                        if (s) return n.handleMethod(i), !1
                    }), r.delegate(n.buttonClickSelector, "click.rails", function(t) {
                        var r = e(this);
                        if (!n.allowAction(r)) return n.stopEverything(t);
                        r.is(n.buttonDisableSelector) && n.disableFormElement(r);
                        var i = n.handleRemote(r);
                        return i === !1 ? n.enableFormElement(r) : i.fail(function() {
                            n.enableFormElement(r)
                        }), !1
                    }), r.delegate(n.inputChangeSelector, "change.rails", function(t) {
                        var r = e(this);
                        return n.allowAction(r) ? (n.handleRemote(r), !1) : n.stopEverything(t)
                    }), r.delegate(n.formSubmitSelector, "submit.rails", function(r) {
                        var i = e(this),
                            s = i.data("remote") !== t,
                            o, u;
                        if (!n.allowAction(i)) return n.stopEverything(r);
                        if (i.attr("novalidate") == t) {
                            o = n.blankInputs(i, n.requiredInputSelector);
                            if (o && n.fire(i, "ajax:aborted:required", [o])) return n.stopEverything(r)
                        }
                        if (s) {
                            u = n.nonBlankInputs(i, n.fileInputSelector);
                            if (u) {
                                setTimeout(function() {
                                    n.disableFormElements(i)
                                }, 13);
                                var a = n.fire(i, "ajax:aborted:file", [u]);
                                return a || setTimeout(function() {
                                    n.enableFormElements(i)
                                }, 13), a
                            }
                            return n.handleRemote(i), !1
                        }
                        setTimeout(function() {
                            n.disableFormElements(i)
                        }, 13)
                    }), r.delegate(n.formInputClickSelector, "click.rails", function(t) {
                        var r = e(this);
                        if (!n.allowAction(r)) return n.stopEverything(t);
                        var i = r.attr("name"),
                            s = i ? {
                                name: i,
                                value: r.val()
                            } : null;
                        r.closest("form").data("ujs:submit-button", s)
                    }), r.delegate(n.formSubmitSelector, "ajax:send.rails", function(t) {
                        this == t.target && n.disableFormElements(e(this))
                    }), r.delegate(n.formSubmitSelector, "ajax:complete.rails", function(t) {
                        this == t.target && n.enableFormElements(e(this))
                    }), e(function() {
                        n.refreshCSRFTokens()
                    }))
                })(jQuery)
            }.apply(e, arguments)
        })
    }(this), define("common/railsOverrides", ["jquery", "jqueryUjs"], function(e) {
        function t(t) {
            (t.is(e.rails.linkClickSelector) || t.is(e.rails.buttonClickSelector) || t.is(e.rails.formInputClickSelector)) && e.rails.fire(t, "click.rails"), t.is(e.rails.inputChangeSelector) && e.rails.fire(t, "change.rails"), t.is(e.rails.formSubmitSelector) && e.rails.fire(t, "submit.rails")
        }
        e.rails.allowAction = function(n) {
            if (n.data("confirmed")) return n.removeData("confirmed"), e.rails.fire(n, "confirm:complete", !0);
            var r = n.data("confirm"),
                i = n.data("confirm-modal");
            if (!r && !i) return !0;
            if (e.rails.fire(n, "confirm")) {
                var s;
                r ? s = e.rails.confirm(r) : i && (s = e(i)), s.modal();
                var o = s.find("input.ok, button.ok"),
                    u = s.find("input.cancel, button.cancel");
                o.one("click.rails", function() {
                    u.off("click.rails"), n.data("confirmed", !0), t(n)
                }), u.one("click.rails", function() {
                    o.off("click.rails"), e.rails.fire(n, "confirm:complete", !1)
                })
            }
            return !1
        }, e.rails.confirm = function(t) {
            var n = e("#defaultConfirmationModal").html(),
                r = e("#remoteModal");
            return r.html(n), r.find(".message").html(t), r
        }, e.rails.disableFormElements = function(e) {
            e.showSpinner()
        }, e.rails.enableFormElements = function(e) {
            e.hideSpinner()
        }
    }), define("modules/jquery.spinner", ["jquery", "hbs!components/common/scripts/templates/blockSpinner"], function(e, t) {
        e.fn.showSpinner = function(n) {
            return this.each(function() {
                var r = e(this);
                if (r.find(".spinner-bg, .svg-circle-spinner").length === 0) {
                    var i = r.css("position");
                    i !== "relative" && i !== "absolute" && r.css("position", "relative");
                    var s = t(n);
                    r.append(s)
                }
            }), this
        }, e.fn.hideSpinner = function() {
            return this.each(function() {
                e(this).find(".spinner-bg, .svg-circle-spinner").remove(), e(this).css("position", "auto")
            }), this
        }
    }), define("overrides", ["jquery", "underscore", "backbone", "marionette", "bmt", "components/common/scripts/util/formatter", "backboneMemento", "backboneSyphon", "common/text.spinner", "components/common/scripts/libs/jquery.numberInputs", "common/syphonCustomization", "jqueryBlockUI", "rivets", "components/common/scripts/mixins", "common/railsOverrides", "modules/jquery.spinner"], function(e, t, n, r, i, s) {
        return e.blockUI.defaults.themedCSS = {
            position: "absolute",
            top: "150px",
            left: "50%"
        }, rivets.configure({
            adapter: {
                subscribe: function(e, t, n) {
                    e.on("change:" + t, n)
                },
                unsubscribe: function(e, t, n) {
                    e.off("change:" + t, n)
                },
                read: function(e, t) {
                    return e.get(t)
                },
                publish: function(e, t, n) {
                    e.set(t, n)
                }
            }
        }), rivets.formatters.money = function(e) {
            return s.money(e)
        }, rivets.formatters.pct = function(e, t, n) {
            return s.pct(n ? 1 - e : e) + (t ? " " + t : "")
        }, rivets.formatters.testFalse = function(e, t) {
            return e || t
        }, undefined
    }), define("components/common/scripts/libs/es5-shim", [], function() {
        "bind" in Function.prototype || (Function.prototype.bind = function(e) {
            var t = this;
            if (arguments.length <= 1) return function() {
                return t.apply(e, arguments)
            };
            var n = Array.prototype.slice.call(arguments, 1);
            return function() {
                return t.apply(e, arguments.length === 0 ? n : n.concat(Array.prototype.slice.call(arguments)))
            }
        }), "trim" in String.prototype || (String.prototype.trim = function() {
            return this.replace(/^\s+/, "").replace(/\s+$/, "")
        }), "indexOf" in Array.prototype || (Array.prototype.indexOf = function(e, t) {
            t === undefined && (t = 0), t < 0 && (t += this.length), t < 0 && (t = 0);
            for (var n = this.length; t < n; t++)
                if (t in this && this[t] === e) return t;
            return -1
        }), "lastIndexOf" in Array.prototype || (Array.prototype.lastIndexOf = function(e, t) {
            t === undefined && (t = this.length - 1), t < 0 && (t += this.length), t > this.length - 1 && (t = this.length - 1);
            for (t++; t-- > 0;)
                if (t in this && this[t] === e) return t;
            return -1
        }), "forEach" in Array.prototype || (Array.prototype.forEach = function(e, t) {
            for (var n = 0, r = this.length; n < r; n++) n in this && e.call(t, this[n], n, this)
        }), "map" in Array.prototype || (Array.prototype.map = function(e, t) {
            var n = new Array(this.length);
            for (var r = 0, i = this.length; r < i; r++) r in this && (n[r] = e.call(t, this[r], r, this));
            return n
        }), "filter" in Array.prototype || (Array.prototype.filter = function(e, t) {
            var n = [],
                r;
            for (var i = 0, s = this.length; i < s; i++) i in this && e.call(t, r = this[i], i, this) && n.push(r);
            return n
        }), "every" in Array.prototype || (Array.prototype.every = function(e, t) {
            for (var n = 0, r = this.length; n < r; n++)
                if (n in this && !e.call(t, this[n], n, this)) return !1;
            return !0
        }), "some" in Array.prototype || (Array.prototype.some = function(e, t) {
            for (var n = 0, r = this.length; n < r; n++)
                if (n in this && e.call(t, this[n], n, this)) return !0;
            return !1
        })
    }),
    function(e) {
        define("jqueryTransit", ["jquery"], function() {
            return function() {
                (function(e) {
                    "use strict";

                    function r(e) {
                        var n = ["Moz", "Webkit", "O", "ms"],
                            r = e.charAt(0).toUpperCase() + e.substr(1);
                        if (e in t.style) return e;
                        for (var i = 0; i < n.length; ++i) {
                            var s = n[i] + r;
                            if (s in t.style) return s
                        }
                    }

                    function i() {
                        var e = !!r("perspective");
                        return e && "WebkitPerspective" in t.style ? matchMedia("(-webkit-transform-3d)").matches : e
                    }

                    function a(e) {
                        return typeof e == "string" && this.parse(e), this
                    }

                    function f(e, t, n) {
                        t === !0 ? e.queue(n) : t ? e.queue(t, n) : n()
                    }

                    function l(t) {
                        var n = [];
                        return e.each(t, function(t) {
                            t = e.camelCase(t), t = e.transit.propertyMap[t] || t, t = p(t), e.inArray(t, n) === -1 && n.push(t)
                        }), n
                    }

                    function c(t, n, r, i) {
                        var s = l(t);
                        e.cssEase[r] && (r = e.cssEase[r]);
                        var o = "" + v(n) + " " + r;
                        parseInt(i, 10) > 0 && (o += " " + v(i));
                        var u = [];
                        return e.each(s, function(e, t) {
                            u.push(t + " " + o)
                        }), u.join(", ")
                    }

                    function h(t, r) {
                        r || (e.cssNumber[t] = !0), e.transit.propertyMap[t] = n.transform, e.cssHooks[t] = {
                            get: function(n) {
                                var r = e(n).css("transform");
                                return r.get(t)
                            },
                            set: function(n, r) {
                                var i = e(n).css("transform");
                                i.setFromString(t, r), e(n).css({
                                    transform: i
                                })
                            }
                        }
                    }

                    function p(e) {
                        return e.replace(/([A-Z])/g, function(e) {
                            return "-" + e.toLowerCase()
                        })
                    }

                    function d(e, t) {
                        return typeof e == "string" && !e.match(/^[\-0-9\.]+$/) ? e : "" + e + t
                    }

                    function v(t) {
                        var n = t;
                        return e.fx.speeds[n] && (n = e.fx.speeds[n]), d(n, "ms")
                    }
                    e.transit = {
                        version: "0.1.3",
                        propertyMap: {
                            marginLeft: "margin",
                            marginRight: "margin",
                            marginBottom: "margin",
                            marginTop: "margin",
                            paddingLeft: "padding",
                            paddingRight: "padding",
                            paddingBottom: "padding",
                            paddingTop: "padding"
                        },
                        enabled: !0,
                        useTransitionEnd: !1
                    };
                    var t = document.createElement("div"),
                        n = {};
                    window.matchMedia || (window.matchMedia = function(e, t) {
                        var n = {},
                            r = e.documentElement,
                            i = e.createElement("body"),
                            s = e.createElement("div");
                        return s.setAttribute("id", "ejs-qtest"), i.appendChild(s),
                            function(o) {
                                if (n[o] === t) {
                                    var u = e.createElement("style"),
                                        a = "@media " + o + " { #ejs-qtest { position: absolute; } }";
                                    u.type = "text/css", u.styleSheet ? u.styleSheet.cssText = a : u.appendChild(e.createTextNode(a)), r.insertBefore(i, r.firstChild), r.insertBefore(u, r.firstChild), n[o] = (window.getComputedStyle ? window.getComputedStyle(s, null) : s.currentStyle)["position"] == "absolute", r.removeChild(i), r.removeChild(u)
                                }
                                return n[o]
                            }
                    }(document));
                    var s = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
                    n.transition = r("transition"), n.transitionDelay = r("transitionDelay"), n.transform = r("transform"), n.transformOrigin = r("transformOrigin"), n.transform3d = i(), e.extend(e.support, n);
                    var o = {
                            MozTransition: "transitionend",
                            OTransition: "oTransitionEnd",
                            WebkitTransition: "webkitTransitionEnd",
                            msTransition: "MSTransitionEnd"
                        },
                        u = n.transitionEnd = o[n.transition] || null;
                    t = null, e.cssEase = {
                        _default: "ease",
                        "in": "ease-in",
                        out: "ease-out",
                        "in-out": "ease-in-out",
                        snap: "cubic-bezier(0,1,.5,1)"
                    }, e.cssHooks.transform = {
                        get: function(t) {
                            return e(t).data("transform") || new a
                        },
                        set: function(t, r) {
                            var i = r;
                            i instanceof a || (i = new a(i)), n.transform3d && !s ? t.style[n.transform] = i.toString(!0) : t.style[n.transform] = i.toString(), e(t).data("transform", i)
                        }
                    }, e.cssHooks.transformOrigin = {
                        get: function(e) {
                            return e.style[n.transformOrigin]
                        },
                        set: function(e, t) {
                            e.style[n.transformOrigin] = t
                        }
                    }, h("scale"), h("translate"), h("rotate"), h("rotateX"), h("rotateY"), h("rotate3d"), h("perspective"), h("skewX"), h("skewY"), h("x", !0), h("y", !0), a.prototype = {
                        setFromString: function(e, t) {
                            var n = typeof t == "string" ? t.split(",") : t.constructor === Array ? t : [t];
                            n.unshift(e), a.prototype.set.apply(this, n)
                        },
                        set: function(e) {
                            var t = Array.prototype.slice.apply(arguments, [1]);
                            this.setter[e] ? this.setter[e].apply(this, t) : this[e] = t.join(",")
                        },
                        get: function(e) {
                            return this.getter[e] ? this.getter[e].apply(this) : this[e] || 0
                        },
                        setter: {
                            rotate: function(e) {
                                this.rotate = d(e, "deg")
                            },
                            rotateX: function(e) {
                                this.rotateX = d(e, "deg")
                            },
                            rotateY: function(e) {
                                this.rotateY = d(e, "deg")
                            },
                            scale: function(e, t) {
                                t === undefined && (t = e), this.scale = e + "," + t
                            },
                            skewX: function(e) {
                                this.skewX = d(e, "deg")
                            },
                            skewY: function(e) {
                                this.skewY = d(e, "deg")
                            },
                            perspective: function(e) {
                                this.perspective = d(e, "px")
                            },
                            x: function(e) {
                                this.set("translate", e, null)
                            },
                            y: function(e) {
                                this.set("translate", null, e)
                            },
                            translate: function(e, t) {
                                this._translateX === undefined && (this._translateX = 0), this._translateY === undefined && (this._translateY = 0), e !== null && (this._translateX = d(e, "px")), t !== null && (this._translateY = d(t, "px")), this.translate = this._translateX + "," + this._translateY
                            }
                        },
                        getter: {
                            x: function() {
                                return this._translateX || 0
                            },
                            y: function() {
                                return this._translateY || 0
                            },
                            scale: function() {
                                var e = (this.scale || "1,1").split(",");
                                return e[0] && (e[0] = parseFloat(e[0])), e[1] && (e[1] = parseFloat(e[1])), e[0] === e[1] ? e[0] : e
                            },
                            rotate3d: function() {
                                var e = (this.rotate3d || "0,0,0,0deg").split(",");
                                for (var t = 0; t <= 3; ++t) e[t] && (e[t] = parseFloat(e[t]));
                                return e[3] && (e[3] = d(e[3], "deg")), e
                            }
                        },
                        parse: function(e) {
                            var t = this;
                            e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(e, n, r) {
                                t.setFromString(n, r)
                            })
                        },
                        toString: function(e) {
                            var t = [];
                            for (var r in this)
                                if (this.hasOwnProperty(r)) {
                                    if (!n.transform3d && (r === "rotateX" || r === "rotateY" || r === "perspective" || r === "transformOrigin")) continue;
                                    r[0] !== "_" && (e && r === "scale" ? t.push(r + "3d(" + this[r] + ",1)") : e && r === "translate" ? t.push(r + "3d(" + this[r] + ",0)") : t.push(r + "(" + this[r] + ")"))
                                }
                            return t.join(" ")
                        }
                    }, e.fn.transition = e.fn.transit = function(t, r, i, s) {
                        var o = this,
                            a = 0,
                            l = !0;
                        typeof r == "function" && (s = r, r = undefined), typeof i == "function" && (s = i, i = undefined), typeof t.easing != "undefined" && (i = t.easing, delete t.easing), typeof t.duration != "undefined" && (r = t.duration, delete t.duration), typeof t.complete != "undefined" && (s = t.complete, delete t.complete), typeof t.queue != "undefined" && (l = t.queue, delete t.queue), typeof t.delay != "undefined" && (a = t.delay, delete t.delay), typeof r == "undefined" && (r = e.fx.speeds._default), typeof i == "undefined" && (i = e.cssEase._default), r = e.fx.off ? 0 : v(r);
                        var h = c(t, r, i, a),
                            p = e.transit.enabled && n.transition,
                            d = p ? parseInt(r, 10) + parseInt(a, 10) : 0;
                        if (d === 0) {
                            var m = function(e) {
                                o.css(t), s && s(), e()
                            };
                            return f(o, l, m), o
                        }
                        var g = {},
                            y = function(r) {
                                var i = !1,
                                    a = function() {
                                        i && o.unbind(u, a), d > 0 && o.each(function() {
                                            this.style[n.transition] = g[this] || null
                                        }), typeof s == "function" && s.apply(o), typeof r == "function" && r()
                                    };
                                d > 0 && u && e.transit.useTransitionEnd ? (i = !0, o.bind(u, a)) : window.setTimeout(a, d), o.each(function() {
                                    d > 0 && (this.style[n.transition] = h), e(this).css(t)
                                })
                            },
                            b = function(e) {
                                var t = 0;
                                n.transition === "MozTransition" && t < 25 && (t = 25), window.setTimeout(function() {
                                    y(e)
                                }, t)
                            };
                        return f(o, l, b), this
                    }, e.transit.getTransitionValue = c
                })(jQuery)
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        "use strict";
        typeof define == "function" && define.amd ? define("jqueryQtip", ["jquery"], e) : jQuery && !jQuery.fn.qtip && e(jQuery)
    }(function(e) {
        "use strict";

        function _() {
            _.history = _.history || [], _.history.push(arguments);
            if ("object" == typeof console) {
                var e = console[console.warn ? "warn" : "log"],
                    t = Array.prototype.slice.call(arguments),
                    n;
                typeof arguments[0] == "string" && (t[0] = "qTip2: " + t[0]), n = e.apply ? e.apply(console, t) : e(t)
            }
        }

        function D(t) {
            var i = function(e) {
                    return e === r || "object" != typeof e
                },
                s = function(t) {
                    return !e.isFunction(t) && (!t && !t.attr || t.length < 1 || "object" == typeof t && !t.jquery)
                };
            if (!t || "object" != typeof t) return n;
            i(t.metadata) && (t.metadata = {
                type: t.metadata
            });
            if ("content" in t) {
                if (i(t.content) || t.content.jquery) t.content = {
                    text: t.content
                };
                s(t.content.text || n) && (t.content.text = n), "title" in t.content && (i(t.content.title) && (t.content.title = {
                    text: t.content.title
                }), s(t.content.title.text || n) && (t.content.title.text = n))
            }
            return "position" in t && i(t.position) && (t.position = {
                my: t.position,
                at: t.position
            }), "show" in t && i(t.show) && (t.show = t.show.jquery ? {
                target: t.show
            } : {
                event: t.show
            }), "hide" in t && i(t.hide) && (t.hide = t.hide.jquery ? {
                target: t.hide
            } : {
                event: t.hide
            }), "style" in t && i(t.style) && (t.style = {
                classes: t.style
            }), e.each(g, function() {
                this.sanitize && this.sanitize(t)
            }), t
        }

        function P(i, s, p, d) {
            function I(e) {
                var t = 0,
                    n, r = s,
                    i = e.split(".");
                while (r = r[i[t++]]) t < i.length && (n = r);
                return [n || s, i.pop()]
            }

            function q() {
                var e = s.style.widget;
                H.toggleClass(E, e).toggleClass(T, s.style.def && !e), j.content.toggleClass(E + "-content", e), j.titlebar && j.titlebar.toggleClass(E + "-header", e), j.button && j.button.toggleClass(w + "-icon", !e)
            }

            function R(e) {
                j.title && (j.titlebar.remove(), j.titlebar = j.title = j.button = r, e !== n && v.reposition())
            }

            function U() {
                var t = s.content.title.button,
                    r = typeof t == "string",
                    i = r ? t : "Close tooltip";
                j.button && j.button.remove(), t.jquery ? j.button = t : j.button = e("<a />", {
                    "class": "ui-state-default ui-tooltip-close " + (s.style.widget ? "" : w + "-icon"),
                    title: i,
                    "aria-label": i
                }).prepend(e("<span />", {
                    "class": "ui-icon ui-icon-close",
                    html: "&times;"
                })), j.button.appendTo(j.titlebar).attr("role", "button").click(function(e) {
                    return H.hasClass(S) || v.hide(e), n
                }), v.redraw()
            }

            function z() {
                var n = A + "-title";
                j.titlebar && R(), j.titlebar = e("<div />", {
                    "class": w + "-titlebar " + (s.style.widget ? "ui-widget-header" : "")
                }).append(j.title = e("<div />", {
                    id: n,
                    "class": w + "-title",
                    "aria-atomic": t
                })).insertBefore(j.content).delegate(".ui-tooltip-close", "mousedown keydown mouseup keyup mouseout", function(t) {
                    e(this).toggleClass("ui-state-active ui-state-focus", t.type.substr(-4) === "down")
                }).delegate(".ui-tooltip-close", "mouseover mouseout", function(t) {
                    e(this).toggleClass("ui-state-hover", t.type === "mouseover")
                }), s.content.title.button ? U() : v.rendered && v.redraw()
            }

            function W(e) {
                var t = j.button,
                    r = j.title;
                if (!v.rendered) return n;
                e ? (r || z(), U()) : t.remove()
            }

            function X(t, r) {
                var s = j.title;
                if (!v.rendered || !t) return n;
                e.isFunction(t) && (t = t.call(i, F.event, v));
                if (t === n || !t && t !== "") return R(n);
                t.jquery && t.length > 0 ? s.empty().append(t.css({
                    display: "block"
                })) : s.html(t), v.redraw(), r !== n && v.rendered && H[0].offsetWidth > 0 && v.reposition(F.event)
            }

            function V(t, r) {
                function o(t) {
                    function u(i) {
                        i && (delete o[i.src], clearTimeout(v.timers.img[i.src]), e(i).unbind(B)), e.isEmptyObject(o) && (v.redraw(), r !== n && v.reposition(F.event), t())
                    }
                    var i, o = {};
                    if ((i = s.find("img[src]:not([height]):not([width])")).length === 0) return u();
                    i.each(function(t, n) {
                        if (o[n.src] !== undefined) return;
                        var r = 0,
                            i = 3;
                        (function s() {
                            if (n.height || n.width || r > i) return u(n);
                            r += 1, v.timers.img[n.src] = setTimeout(s, 700)
                        })(), e(n).bind("error" + B + " load" + B, function() {
                            u(this)
                        }), o[n.src] = n
                    })
                }
                var s = j.content;
                return !v.rendered || !t ? n : (e.isFunction(t) && (t = t.call(i, F.event, v) || ""), t.jquery && t.length > 0 ? s.empty().append(t.css({
                    display: "block"
                })) : s.html(t), v.rendered < 0 ? H.queue("fx", o) : (P = 0, o(e.noop)), v)
            }

            function J() {
                function f(e) {
                    if (H.hasClass(S)) return n;
                    clearTimeout(v.timers.show), clearTimeout(v.timers.hide);
                    var r = function() {
                        v.toggle(t, e)
                    };
                    s.show.delay > 0 ? v.timers.show = setTimeout(r, s.show.delay) : r()
                }

                function l(t) {
                    if (H.hasClass(S) || _ || P) return n;
                    var i = e(t.relatedTarget || t.target),
                        u = i.closest(x)[0] === H[0],
                        a = i[0] === o.show[0];
                    clearTimeout(v.timers.show), clearTimeout(v.timers.hide);
                    if (r.target === "mouse" && u || s.hide.fixed && /mouse(out|leave|move)/.test(t.type) && (u || a)) {
                        try {
                            t.preventDefault(), t.stopImmediatePropagation()
                        } catch (f) {}
                        return
                    }
                    s.hide.delay > 0 ? v.timers.hide = setTimeout(function() {
                        v.hide(t)
                    }, s.hide.delay) : v.hide(t)
                }

                function c(e) {
                    if (H.hasClass(S)) return n;
                    clearTimeout(v.timers.inactive), v.timers.inactive = setTimeout(function() {
                        v.hide(e)
                    }, s.hide.inactive)
                }

                function h(e) {
                    v.rendered && H[0].offsetWidth > 0 && v.reposition(e)
                }
                var r = s.position,
                    o = {
                        show: s.show.target,
                        hide: s.hide.target,
                        viewport: e(r.viewport),
                        document: e(document),
                        body: e(document.body),
                        window: e(window)
                    },
                    u = {
                        show: e.trim("" + s.show.event).split(" "),
                        hide: e.trim("" + s.hide.event).split(" ")
                    },
                    a = e.browser.msie && parseInt(e.browser.version, 10) === 6;
                H.bind("mouseenter" + B + " mouseleave" + B, function(e) {
                    var t = e.type === "mouseenter";
                    t && v.focus(e), H.toggleClass(C, t)
                }), /mouse(out|leave)/i.test(s.hide.event) && s.hide.leave === "window" && o.window.bind("mouseout" + B + " blur" + B, function(e) {
                    !/select|option/.test(e.target.nodeName) && !e.relatedTarget && v.hide(e)
                }), s.hide.fixed ? (o.hide = o.hide.add(H), H.bind("mouseover" + B, function() {
                    H.hasClass(S) || clearTimeout(v.timers.hide)
                })) : /mouse(over|enter)/i.test(s.show.event) && o.hide.bind("mouseleave" + B, function(e) {
                    clearTimeout(v.timers.show)
                }), ("" + s.hide.event).indexOf("unfocus") > -1 && r.container.closest("html").bind("mousedown" + B, function(t) {
                    var n = e(t.target),
                        r = v.rendered && !H.hasClass(S) && H[0].offsetWidth > 0,
                        s = n.parents(x).filter(H[0]).length > 0;
                    n[0] !== i[0] && n[0] !== H[0] && !s && !i.has(n[0]).length && !n.attr("disabled") && v.hide(t)
                }), "number" == typeof s.hide.inactive && (o.show.bind("qtip-" + p + "-inactive", c), e.each(m.inactiveEvents, function(e, t) {
                    o.hide.add(j.tooltip).bind(t + B + "-inactive", c)
                })), e.each(u.hide, function(t, n) {
                    var r = e.inArray(n, u.show),
                        i = e(o.hide);
                    r > -1 && i.add(o.show).length === i.length || n === "unfocus" ? (o.show.bind(n + B, function(e) {
                        H[0].offsetWidth > 0 ? l(e) : f(e)
                    }), delete u.show[r]) : o.hide.bind(n + B, l)
                }), e.each(u.show, function(e, t) {
                    o.show.bind(t + B, f)
                }), "number" == typeof s.hide.distance && o.show.add(H).bind("mousemove" + B, function(e) {
                    var t = F.origin || {},
                        n = s.hide.distance,
                        r = Math.abs;
                    (r(e.pageX - t.pageX) >= n || r(e.pageY - t.pageY) >= n) && v.hide(e)
                }), r.target === "mouse" && (o.show.bind("mousemove" + B, function(e) {
                    y = {
                        pageX: e.pageX,
                        pageY: e.pageY,
                        type: "mousemove"
                    }
                }), r.adjust.mouse && (s.hide.event && (H.bind("mouseleave" + B, function(e) {
                    (e.relatedTarget || e.target) !== o.show[0] && v.hide(e)
                }), j.target.bind("mouseenter" + B + " mouseleave" + B, function(e) {
                    F.onTarget = e.type === "mouseenter"
                })), o.document.bind("mousemove" + B, function(e) {
                    v.rendered && F.onTarget && !H.hasClass(S) && H[0].offsetWidth > 0 && v.reposition(e || y)
                }))), (r.adjust.resize || o.viewport.length) && (e.event.special.resize ? o.viewport : o.window).bind("resize" + B, h), (o.viewport.length || a && H.css("position") === "fixed") && o.viewport.bind("scroll" + B, h)
            }

            function K() {
                var t = [s.show.target[0], s.hide.target[0], v.rendered && j.tooltip[0], s.position.container[0], s.position.viewport[0], window, document];
                v.rendered ? e([]).pushStack(e.grep(t, function(e) {
                    return typeof e == "object"
                })).unbind(B) : s.show.target.unbind(B + "-create")
            }
            var v = this,
                L = document.body,
                A = w + "-" + p,
                _ = 0,
                P = 0,
                H = e(),
                B = ".qtip-" + p,
                j, F;
            v.id = p, v.rendered = n, v.destroyed = n, v.elements = j = {
                target: i
            }, v.timers = {
                img: {}
            }, v.options = s, v.checks = {}, v.plugins = {}, v.cache = F = {
                event: {},
                target: e(),
                disabled: n,
                attr: d,
                onTarget: n,
                lastClass: ""
            }, v.checks.builtin = {
                "^id$": function(r, i, s) {
                    var o = s === t ? m.nextid : s,
                        u = w + "-" + o;
                    o !== n && o.length > 0 && !e("#" + u).length && (H[0].id = u, j.content[0].id = u + "-content", j.title[0].id = u + "-title")
                },
                "^content.text$": function(e, t, n) {
                    V(n)
                },
                "^content.title.text$": function(e, t, n) {
                    if (!n) return R();
                    !j.title && n && z(), X(n)
                },
                "^content.title.button$": function(e, t, n) {
                    W(n)
                },
                "^position.(my|at)$": function(e, t, n) {
                    "string" == typeof n && (e[t] = new g.Corner(n))
                },
                "^position.container$": function(e, t, n) {
                    v.rendered && H.appendTo(n)
                },
                "^show.ready$": function() {
                    v.rendered ? v.toggle(t) : v.render(1)
                },
                "^style.classes$": function(e, t, n) {
                    H.attr("class", w + " qtip ui-helper-reset " + n)
                },
                "^style.widget|content.title": q,
                "^events.(render|show|move|hide|focus|blur)$": function(t, n, r) {
                    H[(e.isFunction(r) ? "" : "un") + "bind"]("tooltip" + n, r)
                },
                "^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)": function() {
                    var e = s.position;
                    H.attr("tracking", e.target === "mouse" && e.adjust.mouse), K(), J()
                }
            }, e.extend(v, {
                render: function(r) {
                    if (v.rendered) return v;
                    var o = s.content.text,
                        u = s.content.title.text,
                        a = s.position,
                        f = e.Event("tooltiprender");
                    return e.attr(i[0], "aria-describedby", A), H = j.tooltip = e("<div/>", {
                        id: A,
                        "class": w + " qtip ui-helper-reset " + T + " " + s.style.classes + " " + w + "-pos-" + s.position.my.abbrev(),
                        width: s.style.width || "",
                        height: s.style.height || "",
                        tracking: a.target === "mouse" && a.adjust.mouse,
                        role: "alert",
                        "aria-live": "polite",
                        "aria-atomic": n,
                        "aria-describedby": A + "-content",
                        "aria-hidden": t
                    }).toggleClass(S, F.disabled).data("qtip", v).appendTo(s.position.container).append(j.content = e("<div />", {
                        "class": w + "-content",
                        id: A + "-content",
                        "aria-atomic": t
                    })), v.rendered = -1, P = 1, _ = 1, u && (z(), e.isFunction(u) || X(u, n)), e.isFunction(o) || V(o, n), v.rendered = t, q(), e.each(s.events, function(t, n) {
                        e.isFunction(n) && H.bind(t === "toggle" ? "tooltipshow tooltiphide" : "tooltip" + t, n)
                    }), e.each(g, function() {
                        this.initialize === "render" && this(v)
                    }), J(), H.queue("fx", function(e) {
                        f.originalEvent = F.event, H.trigger(f, [v]), P = 0, _ = 0, v.redraw(), (s.show.ready || r) && v.toggle(t, F.event, n), e()
                    }), v
                },
                get: function(e) {
                    var t, n;
                    switch (e.toLowerCase()) {
                        case "dimensions":
                            t = {
                                height: H.outerHeight(),
                                width: H.outerWidth()
                            };
                            break;
                        case "offset":
                            t = g.offset(H, s.position.container);
                            break;
                        default:
                            n = I(e.toLowerCase()), t = n[0][n[1]], t = t.precedance ? t.string() : t
                    }
                    return t
                },
                set: function(i, o) {
                    function p(e, t) {
                        var n, r, i;
                        for (n in c)
                            for (r in c[n])
                                if (i = (new RegExp(r, "i")).exec(e)) t.push(i), c[n][r].apply(v, t)
                    }
                    var u = /^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,
                        a = /^content\.(title|attr)|style/i,
                        f = n,
                        l = n,
                        c = v.checks,
                        h;
                    return "string" == typeof i ? (h = i, i = {}, i[h] = o) : i = e.extend(t, {}, i), e.each(i, function(t, n) {
                        var r = I(t.toLowerCase()),
                            s;
                        s = r[0][r[1]], r[0][r[1]] = "object" == typeof n && n.nodeType ? e(n) : n, i[t] = [r[0], r[1], n, s], f = u.test(t) || f, l = a.test(t) || l
                    }), D(s), _ = P = 1, e.each(i, p), _ = P = 0, v.rendered && H[0].offsetWidth > 0 && (f && v.reposition(s.position.target === "mouse" ? r : F.event), l && v.redraw()), v
                },
                toggle: function(i, o) {
                    function w() {
                        i ? (e.browser.msie && H[0].style.removeAttribute("filter"), H.css("overflow", ""), "string" == typeof a.autofocus && e(a.autofocus, H).focus(), a.target.trigger("qtip-" + p + "-inactive")) : H.css({
                            display: "",
                            visibility: "",
                            opacity: "",
                            left: "",
                            top: ""
                        }), b = e.Event("tooltip" + (i ? "visible" : "hidden")), b.originalEvent = o ? F.event : r, H.trigger(b, [v])
                    }
                    if (!v.rendered) return i ? v.render(1) : v;
                    var u = i ? "show" : "hide",
                        a = s[u],
                        f = s[i ? "hide" : "show"],
                        l = s.position,
                        c = s.content,
                        h = H[0].offsetWidth > 0,
                        d = i || a.target.length === 1,
                        m = !o || a.target.length < 2 || F.target[0] === o.target,
                        g, b;
                    (typeof i).search("boolean|number") && (i = !h);
                    if (!H.is(":animated") && h === i && m) return v;
                    if (o) {
                        if (/over|enter/.test(o.type) && /out|leave/.test(F.event.type) && s.show.target.add(o.target).length === s.show.target.length && H.has(o.relatedTarget).length) return v;
                        F.event = e.extend({}, o)
                    }
                    return b = e.Event("tooltip" + u), b.originalEvent = o ? F.event : r, H.trigger(b, [v, 90]), b.isDefaultPrevented() ? v : (e.attr(H[0], "aria-hidden", !i), i ? (F.origin = e.extend({}, y), v.focus(o), e.isFunction(c.text) && V(c.text, n), e.isFunction(c.title.text) && X(c.title.text, n), !M && l.target === "mouse" && l.adjust.mouse && (e(document).bind("mousemove.qtip", function(e) {
                        y = {
                            pageX: e.pageX,
                            pageY: e.pageY,
                            type: "mousemove"
                        }
                    }), M = t), v.reposition(o, arguments[2]), (b.solo = !!a.solo) && e(x, a.solo).not(H).qtip("hide", b)) : (clearTimeout(v.timers.show), delete F.origin, M && !e(x + '[tracking="true"]:visible', a.solo).not(H).length && (e(document).unbind("mousemove.qtip"), M = n), v.blur(o)), a.effect === n || d === n ? (H[u](), w.call(H)) : e.isFunction(a.effect) ? (H.stop(1, 1), a.effect.call(H, v), H.queue("fx", function(e) {
                        w(), e()
                    })) : H.fadeTo(90, i ? 1 : 0, w), i && a.target.trigger("qtip-" + p + "-inactive"), v)
                },
                show: function(e) {
                    return v.toggle(t, e)
                },
                hide: function(e) {
                    return v.toggle(n, e)
                },
                focus: function(t) {
                    if (!v.rendered) return v;
                    var n = e(x),
                        r = parseInt(H[0].style.zIndex, 10),
                        i = m.zindex + n.length,
                        s = e.extend({}, t),
                        o, u;
                    return H.hasClass(N) || (u = e.Event("tooltipfocus"), u.originalEvent = s, H.trigger(u, [v, i]), u.isDefaultPrevented() || (r !== i && (n.each(function() {
                        this.style.zIndex > r && (this.style.zIndex = this.style.zIndex - 1)
                    }), n.filter("." + N).qtip("blur", s)), H.addClass(N)[0].style.zIndex = i)), v
                },
                blur: function(t) {
                    var n = e.extend({}, t),
                        r;
                    return H.removeClass(N), r = e.Event("tooltipblur"), r.originalEvent = n, H.trigger(r, [v]), v
                },
                reposition: function(t, r) {
                    if (!v.rendered || _) return v;
                    _ = 1;
                    var i = s.position.target,
                        o = s.position,
                        u = o.my,
                        p = o.at,
                        d = o.adjust,
                        m = d.method.split(" "),
                        b = H.outerWidth(),
                        w = H.outerHeight(),
                        E = 0,
                        S = 0,
                        x = e.Event("tooltipmove"),
                        T = H.css("position") === "fixed",
                        N = o.viewport,
                        C = {
                            left: 0,
                            top: 0
                        },
                        k = o.container,
                        L = H[0].offsetWidth > 0,
                        A, O, M;
                    if (e.isArray(i) && i.length === 2) p = {
                        x: f,
                        y: a
                    }, C = {
                        left: i[0],
                        top: i[1]
                    };
                    else if (i === "mouse" && (t && t.pageX || F.event.pageX)) p = {
                        x: f,
                        y: a
                    }, t = (!t || t.type !== "resize" && t.type !== "scroll" ? t && t.pageX && t.type === "mousemove" ? t : y && y.pageX && (d.mouse || !t || !t.pageX) ? {
                        pageX: y.pageX,
                        pageY: y.pageY
                    } : !d.mouse && F.origin && F.origin.pageX && s.show.distance ? F.origin : t : F.event) || t || F.event || y || {}, C = {
                        top: t.pageY,
                        left: t.pageX
                    };
                    else {
                        i === "event" && t && t.target && t.type !== "scroll" && t.type !== "resize" ? F.target = e(t.target) : i !== "event" && (F.target = e(i.jquery ? i : j.target)), i = F.target, i = e(i).eq(0);
                        if (i.length === 0) return v;
                        i[0] === document || i[0] === window ? (E = g.iOS ? window.innerWidth : i.width(), S = g.iOS ? window.innerHeight : i.height(), i[0] === window && (C = {
                            top: (N || i).scrollTop(),
                            left: (N || i).scrollLeft()
                        })) : g.imagemap && i.is("area") ? A = g.imagemap(v, i, p, g.viewport ? m : n) : g.svg && typeof i[0].xmlbase == "string" ? A = g.svg(v, i, p, g.viewport ? m : n) : (E = i.outerWidth(), S = i.outerHeight(), C = g.offset(i, k)), A && (E = A.width, S = A.height, O = A.offset, C = A.position);
                        if (g.iOS > 3.1 && g.iOS < 4.1 || g.iOS >= 4.3 && g.iOS < 4.33 || !g.iOS && T) M = e(window), C.left -= M.scrollLeft(), C.top -= M.scrollTop();
                        C.left += p.x === c ? E : p.x === h ? E / 2 : 0, C.top += p.y === l ? S : p.y === h ? S / 2 : 0
                    }
                    return C.left += d.x + (u.x === c ? -b : u.x === h ? -b / 2 : 0), C.top += d.y + (u.y === l ? -w : u.y === h ? -w / 2 : 0), g.viewport ? (C.adjusted = g.viewport(v, C, o, E, S, b, w), O && C.adjusted.left && (C.left += O.left), O && C.adjusted.top && (C.top += O.top)) : C.adjusted = {
                        left: 0,
                        top: 0
                    }, x.originalEvent = e.extend({}, t), H.trigger(x, [v, C, N.elem || N]), x.isDefaultPrevented() ? v : (delete C.adjusted, r === n || !L || isNaN(C.left) || isNaN(C.top) || i === "mouse" || !e.isFunction(o.effect) ? H.css(C) : e.isFunction(o.effect) && (o.effect.call(H, v, e.extend({}, C)), H.queue(function(t) {
                        e(this).css({
                            opacity: "",
                            height: ""
                        }), e.browser.msie && this.style.removeAttribute("filter"), t()
                    })), _ = 0, v)
                },
                redraw: function() {
                    if (v.rendered < 1 || P) return v;
                    var e = s.position.container,
                        t, n, r, i;
                    return P = 1, s.style.height && H.css(u, s.style.height), s.style.width ? H.css(o, s.style.width) : (H.css(o, "").addClass(k), n = H.width() + 1, r = H.css("max-width") || "", i = H.css("min-width") || "", t = (r + i).indexOf("%") > -1 ? e.width() / 100 : 0, r = (r.indexOf("%") > -1 ? t : 1) * parseInt(r, 10) || n, i = (i.indexOf("%") > -1 ? t : 1) * parseInt(i, 10) || 0, n = r + i ? Math.min(Math.max(n, i), r) : n, H.css(o, Math.round(n)).removeClass(k)), P = 0, v
                },
                disable: function(t) {
                    return "boolean" != typeof t && (t = !H.hasClass(S) && !F.disabled), v.rendered ? (H.toggleClass(S, t), e.attr(H[0], "aria-disabled", t)) : F.disabled = !!t, v
                },
                enable: function() {
                    return v.disable(n)
                },
                destroy: function() {
                    var n = i[0],
                        r = e.attr(n, O),
                        o = i.data("qtip");
                    v.destroyed = t, v.rendered && (H.stop(1, 0).remove(), e.each(v.plugins, function() {
                        this.destroy && this.destroy()
                    })), clearTimeout(v.timers.show), clearTimeout(v.timers.hide), K();
                    if (!o || v === o) e.removeData(n, "qtip"), s.suppress && r && (e.attr(n, "title", r), i.removeAttr(O)), i.removeAttr("aria-describedby");
                    return i.unbind(".qtip-" + p), delete b[v.id], i
                }
            })
        }

        function H(i, s) {
            var o, u, a, f, l, c = e(this),
                h = e(document.body),
                p = this === document ? h : c,
                d = c.metadata ? c.metadata(s.metadata) : r,
                v = s.metadata.type === "html5" && d ? d[s.metadata.name] : r,
                y = c.data(s.metadata.name || "qtipopts");
            try {
                y = typeof y == "string" ? e.parseJSON(y) : y
            } catch (b) {
                _("Unable to parse HTML5 attribute data: " + y)
            }
            f = e.extend(t, {}, m.defaults, s, typeof y == "object" ? D(y) : r, D(v || d)), u = f.position, f.id = i;
            if ("boolean" == typeof f.content.text) {
                a = c.attr(f.content.attr);
                if (f.content.attr === n || !a) return _("Unable to locate content for tooltip! Aborting render of tooltip on element: ", c), n;
                f.content.text = a
            }
            u.container.length || (u.container = h), u.target === n && (u.target = p), f.show.target === n && (f.show.target = p), f.show.solo === t && (f.show.solo = u.container.closest("body")), f.hide.target === n && (f.hide.target = p), f.position.viewport === t && (f.position.viewport = u.container), u.container = u.container.eq(0), u.at = new g.Corner(u.at), u.my = new g.Corner(u.my);
            if (e.data(this, "qtip"))
                if (f.overwrite) c.qtip("destroy");
                else if (f.overwrite === n) return n;
            return f.suppress && (l = e.attr(this, "title")) && e(this).removeAttr("title").attr(O, l).attr("title", ""), o = new P(c, f, i, !!a), e.data(this, "qtip", o), c.bind("remove.qtip-" + i + " removeqtip.qtip-" + i, function() {
                o.destroy()
            }), o
        }

        function B(r) {
            var i = this,
                s = r.elements.tooltip,
                o = r.options.content.ajax,
                u = m.defaults.content.ajax,
                a = ".qtip-ajax",
                f = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
                l = t,
                c = n,
                h;
            r.checks.ajax = {
                "^content.ajax": function(e, t, n) {
                    t === "ajax" && (o = n), t === "once" ? i.init() : o && o.url ? i.load() : s.unbind(a)
                }
            }, e.extend(i, {
                init: function() {
                    return o && o.url && s.unbind(a)[o.once ? "one" : "bind"]("tooltipshow" + a, i.load), i
                },
                load: function(s) {
                    function g() {
                        var i;
                        if (r.destroyed) return;
                        l = n, v && (c = t, r.show(s.originalEvent)), (i = u.complete || o.complete) && e.isFunction(i) && i.apply(o.context || r, arguments)
                    }

                    function y(t, n, i) {
                        var s;
                        if (r.destroyed) return;
                        d && (t = e("<div/>").append(t.replace(f, "")).find(d)), (s = u.success || o.success) && e.isFunction(s) ? s.call(o.context || r, t, n, i) : r.set("content.text", t)
                    }

                    function b(e, t, n) {
                        if (r.destroyed || e.status === 0) return;
                        r.set("content.text", t + ": " + n)
                    }
                    if (c) {
                        c = n;
                        return
                    }
                    var a = o.url.indexOf(" "),
                        p = o.url,
                        d, v = !o.loading && l;
                    if (v) try {
                        s.preventDefault()
                    } catch (m) {} else if (s && s.isDefaultPrevented()) return i;
                    h && h.abort && h.abort(), a > -1 && (d = p.substr(a), p = p.substr(0, a)), h = e.ajax(e.extend({
                        error: u.error || b,
                        context: r
                    }, o, {
                        url: p,
                        success: y,
                        complete: g
                    }))
                },
                destroy: function() {
                    h && h.abort && h.abort(), r.destroyed = t
                }
            }), i.init()
        }

        function j(e, t, n) {
            var r = Math.ceil(t / 2),
                i = Math.ceil(n / 2),
                s = {
                    bottomright: [
                        [0, 0],
                        [t, n],
                        [t, 0]
                    ],
                    bottomleft: [
                        [0, 0],
                        [t, 0],
                        [0, n]
                    ],
                    topright: [
                        [0, n],
                        [t, 0],
                        [t, n]
                    ],
                    topleft: [
                        [0, 0],
                        [0, n],
                        [t, n]
                    ],
                    topcenter: [
                        [0, n],
                        [r, 0],
                        [t, n]
                    ],
                    bottomcenter: [
                        [0, 0],
                        [t, 0],
                        [r, n]
                    ],
                    rightcenter: [
                        [0, 0],
                        [t, i],
                        [0, n]
                    ],
                    leftcenter: [
                        [t, 0],
                        [t, n],
                        [0, i]
                    ]
                };
            return s.lefttop = s.bottomright, s.righttop = s.bottomleft, s.leftbottom = s.topright, s.rightbottom = s.topleft, s[e.string()]
        }

        function F(p, d) {
            function L() {
                S.width = y.height, S.height = y.width
            }

            function A() {
                S.width = y.width, S.height = y.height
            }

            function O(e, r, o, u) {
                if (!b.tip) return;
                var d = m.corner.clone(),
                    g = o.adjusted,
                    w = p.options.position.adjust.method.split(" "),
                    S = w[0],
                    x = w[1] || w[0],
                    T = {
                        left: n,
                        top: n,
                        x: 0,
                        y: 0
                    },
                    N, C = {},
                    k;
                m.corner.fixed !== t && (S === v && d.precedance === i && g.left && d.y !== h ? d.precedance = d.precedance === i ? s : i : S !== v && g.left && (d.x = d.x === h ? g.left > 0 ? f : c : d.x === f ? c : f), x === v && d.precedance === s && g.top && d.x !== h ? d.precedance = d.precedance === s ? i : s : x !== v && g.top && (d.y = d.y === h ? g.top > 0 ? a : l : d.y === a ? l : a), d.string() !== E.corner.string() && (E.top !== g.top || E.left !== g.left) && m.update(d, n)), N = m.position(d, g), N[d.x] += M(d, d.x, t), N[d.y] += M(d, d.y, t), N.right !== undefined && (N.left = -N.right), N.bottom !== undefined && (N.top = -N.bottom), N.user = Math.max(0, y.offset);
                if (T.left = S === v && !!g.left) d.x === h ? C["margin-left"] = T.x = N["margin-left"] - g.left : (k = N.right !== undefined ? [g.left, -N.left] : [-g.left, N.left], (T.x = Math.max(k[0], k[1])) > k[0] && (o.left -= g.left, T.left = n), C[N.right !== undefined ? c : f] = T.x);
                if (T.top = x === v && !!g.top) d.y === h ? C["margin-top"] = T.y = N["margin-top"] - g.top : (k = N.bottom !== undefined ? [g.top, -N.top] : [-g.top, N.top], (T.y = Math.max(k[0], k[1])) > k[0] && (o.top -= g.top, T.top = n), C[N.bottom !== undefined ? l : a] = T.y);
                b.tip.css(C).toggle(!(T.x && T.y || d.x === h && T.y || d.y === h && T.x)), o.left -= N.left.charAt ? N.user : S !== v || T.top || !T.left && !T.top ? N.left : 0, o.top -= N.top.charAt ? N.user : x !== v || T.left || !T.left && !T.top ? N.top : 0, E.left = g.left, E.top = g.top, E.corner = d.clone()
            }

            function M(e, t, n) {
                t = t ? t : e[e.precedance];
                var r = w.hasClass(k),
                    i = b.titlebar && e.y === a,
                    s = i ? b.titlebar : b.tooltip,
                    o = "border-" + t + "-width",
                    u;
                return w.addClass(k), u = parseInt(s.css(o), 10), u = (n ? u || parseInt(w.css(o), 10) : u) || 0, w.toggleClass(k, r), u
            }

            function _(t) {
                function f(e) {
                    return parseInt(r.css(e), 10) || parseInt(w.css(e), 10)
                }
                var n = b.titlebar && t.y === a,
                    r = n ? b.titlebar : b.content,
                    i = e.browser.mozilla,
                    s = i ? "-moz-" : e.browser.webkit ? "-webkit-" : "",
                    o = "border-radius-" + t.y + t.x,
                    u = "border-" + t.y + "-" + t.x + "-radius";
                return f(u) || f(s + u) || f(s + o) || f(o) || 0
            }

            function D(e) {
                var t = e.precedance === s,
                    n = S[t ? o : u],
                    r = S[t ? u : o],
                    i = e.string().indexOf(h) > -1,
                    a = n * (i ? .5 : 1),
                    f = Math.pow,
                    l = Math.round,
                    c, p, d, v = Math.sqrt(f(a, 2) + f(r, 2)),
                    m = [T / a * v, T / r * v];
                return m[2] = Math.sqrt(f(m[0], 2) - f(T, 2)), m[3] = Math.sqrt(f(m[1], 2) - f(T, 2)), c = v + m[2] + m[3] + (i ? 0 : m[0]), p = c / v, d = [l(p * r), l(p * n)], {
                    height: d[t ? 0 : 1],
                    width: d[t ? 1 : 0]
                }
            }
            var m = this,
                y = p.options.style.tip,
                b = p.elements,
                w = b.tooltip,
                E = {
                    top: 0,
                    left: 0
                },
                S = {
                    width: y.width,
                    height: y.height
                },
                x = {},
                T = y.border || 0,
                N = ".qtip-tip",
                C = !!(e("<canvas />")[0] || {}).getContext;
            m.corner = r, m.mimic = r, m.border = T, m.offset = y.offset, m.size = S, p.checks.tip = {
                "^position.my|style.tip.(corner|mimic|border)$": function() {
                    m.init() || m.destroy(), p.reposition()
                },
                "^style.tip.(height|width)$": function() {
                    S = {
                        width: y.width,
                        height: y.height
                    }, m.create(), m.update(), p.reposition()
                },
                "^content.title.text|style.(classes|widget)$": function() {
                    b.tip && b.tip.length && m.update()
                }
            }, e.extend(m, {
                init: function() {
                    var t = m.detectCorner() && (C || e.browser.msie);
                    return t && (m.create(), m.update(), w.unbind(N).bind("tooltipmove" + N, O)), t
                },
                detectCorner: function() {
                    var e = y.corner,
                        r = p.options.position,
                        i = r.at,
                        s = r.my.string ? r.my.string() : r.my;
                    return e === n || s === n && i === n ? n : (e === t ? m.corner = new g.Corner(s) : e.string || (m.corner = new g.Corner(e), m.corner.fixed = t), E.corner = new g.Corner(m.corner.string()), m.corner.string() !== "centercenter")
                },
                detectColours: function(t) {
                    var n, r, i, s = b.tip.css("cssText", ""),
                        o = t || m.corner,
                        u = o[o.precedance],
                        f = "border-" + u + "-color",
                        l = "border" + u.charAt(0) + u.substr(1) + "Color",
                        c = /rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,
                        p = "background-color",
                        d = "transparent",
                        v = " !important",
                        g = b.titlebar && (o.y === a || o.y === h && s.position().top + S.height / 2 + y.offset < b.titlebar.outerHeight(1)),
                        E = g ? b.titlebar : b.tooltip;
                    w.addClass(k), x.fill = r = s.css(p), x.border = i = s[0].style[l] || s.css(f) || w.css(f);
                    if (!r || c.test(r)) x.fill = E.css(p) || d, c.test(x.fill) && (x.fill = w.css(p) || r);
                    if (!i || c.test(i) || i === e(document.body).css("color")) {
                        x.border = E.css(f) || d;
                        if (c.test(x.border) || x.border === E.css("color")) x.border = w.css(f) || w.css(l) || i
                    }
                    e("*", s).add(s).css("cssText", p + ":" + d + v + ";border:0" + v + ";"), w.removeClass(k)
                },
                create: function() {
                    var t = S.width,
                        n = S.height,
                        r;
                    b.tip && b.tip.remove(), b.tip = e("<div />", {
                        "class": "ui-tooltip-tip"
                    }).css({
                        width: t,
                        height: n
                    }).prependTo(w), C ? e("<canvas />").appendTo(b.tip)[0].getContext("2d").save() : (r = '<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>', b.tip.html(r + r), e("*", b.tip).bind("click mousedown", function(e) {
                        e.stopPropagation()
                    }))
                },
                update: function(o, u) {
                    var p = b.tip,
                        d = p.children(),
                        v = S.width,
                        N = S.height,
                        k = "px solid ",
                        O = "px dashed transparent",
                        _ = y.mimic,
                        P = Math.round,
                        H, B, F, I, q;
                    o || (o = E.corner || m.corner), _ === n ? _ = o : (_ = new g.Corner(_), _.precedance = o.precedance, _.x === "inherit" ? _.x = o.x : _.y === "inherit" ? _.y = o.y : _.x === _.y && (_[o.precedance] = o[o.precedance])), H = _.precedance, o.precedance === i ? L() : A(), b.tip.css({
                        width: v = S.width,
                        height: N = S.height
                    }), m.detectColours(o), x.border !== "transparent" ? (T = M(o, r, t), y.border === 0 && T > 0 && (x.fill = x.border), m.border = T = y.border !== t ? y.border : T) : m.border = T = 0, F = j(_, v, N), m.size = q = D(o), p.css(q), o.precedance === s ? I = [P(_.x === f ? T : _.x === c ? q.width - v - T : (q.width - v) / 2), P(_.y === a ? q.height - N : 0)] : I = [P(_.x === f ? q.width - v : 0), P(_.y === a ? T : _.y === l ? q.height - N - T : (q.height - N) / 2)], C ? (d.attr(q), B = d[0].getContext("2d"), B.restore(), B.save(), B.clearRect(0, 0, 3e3, 3e3), B.fillStyle = x.fill, B.strokeStyle = x.border, B.lineWidth = T * 2, B.lineJoin = "miter", B.miterLimit = 100, B.translate(I[0], I[1]), B.beginPath(), B.moveTo(F[0][0], F[0][1]), B.lineTo(F[1][0], F[1][1]), B.lineTo(F[2][0], F[2][1]), B.closePath(), T && (w.css("background-clip") === "border-box" && (B.strokeStyle = x.fill, B.stroke()), B.strokeStyle = x.border, B.stroke()), B.fill()) : (F = "m" + F[0][0] + "," + F[0][1] + " l" + F[1][0] + "," + F[1][1] + " " + F[2][0] + "," + F[2][1] + " xe", I[2] = T && /^(r|b)/i.test(o.string()) ? parseFloat(e.browser.version, 10) === 8 ? 2 : 1 : 0, d.css({
                        antialias: "" + (_.string().indexOf(h) > -1),
                        left: I[0] - I[2] * Number(H === i),
                        top: I[1] - I[2] * Number(H === s),
                        width: v + T,
                        height: N + T
                    }).each(function(t) {
                        var n = e(this);
                        n[n.prop ? "prop" : "attr"]({
                            coordsize: v + T + " " + (N + T),
                            path: F,
                            fillcolor: x.fill,
                            filled: !!t,
                            stroked: !t
                        }).css({
                            display: T || t ? "block" : "none"
                        }), !t && n.html() === "" && n.html('<vml:stroke weight="' + T * 2 + 'px" color="' + x.border + '" miterlimit="1000" joinstyle="miter" ' + ' style="behavior:url(#default#VML); display:inline-block;" />')
                    })), u !== n && m.position(o)
                },
                position: function(t) {
                    var r = b.tip,
                        l = {},
                        c = Math.max(0, y.offset),
                        p, d, v;
                    return y.corner === n || !r ? n : (t = t || m.corner, p = t.precedance, d = D(t), v = [t.x, t.y], p === i && v.reverse(), e.each(v, function(e, n) {
                        var r, i;
                        n === h ? (r = p === s ? f : a, l[r] = "50%", l["margin-" + r] = -Math.round(d[p === s ? o : u] / 2) + c) : (r = M(t, n), i = _(t), l[n] = e ? 0 : c + (i > r ? i : -r))
                    }), l[t[p]] -= d[p === i ? o : u], r.css({
                        top: "",
                        bottom: "",
                        left: "",
                        right: "",
                        margin: ""
                    }).css(l), l)
                },
                destroy: function() {
                    b.tip && b.tip.remove(), b.tip = !1, w.unbind(N)
                }
            }), m.init()
        }

        function I(r) {
            function m() {
                d = e(p, u).not("[disabled]").map(function() {
                    return typeof this.focus == "function" ? this : null
                })
            }

            function y(e) {
                d.length < 1 && e.length ? e.not("body").blur() : d.first().focus()
            }

            function b(t) {
                var r = e(t.target),
                    i = r.closest(".qtip"),
                    s;
                s = i.length < 1 ? n : parseInt(i[0].style.zIndex, 10) > parseInt(u[0].style.zIndex, 10), !s && e(t.target).closest(x)[0] !== u[0] && y(r)
            }
            var i = this,
                s = r.options.show.modal,
                o = r.elements,
                u = o.tooltip,
                a = "#qtip-overlay",
                f = ".qtipmodal",
                l = f + r.id,
                c = "is-modal-qtip",
                h = e(document.body),
                p = g.modal.focusable.join(","),
                d = {},
                v;
            r.checks.modal = {
                "^show.modal.(on|blur)$": function() {
                    i.init(), o.overlay.toggle(u.is(":visible"))
                },
                "^content.text$": function() {
                    m()
                }
            }, e.extend(i, {
                init: function() {
                    return s.on ? (v = i.create(), u.attr(c, t).css("z-index", g.modal.zindex + e(x + "[" + c + "]").length).unbind(f).unbind(l).bind("tooltipshow" + f + " tooltiphide" + f, function(t, n, r) {
                        var s = t.originalEvent;
                        if (t.target === u[0])
                            if (s && t.type === "tooltiphide" && /mouse(leave|enter)/.test(s.type) && e(s.relatedTarget).closest(v[0]).length) try {
                                t.preventDefault()
                            } catch (o) {} else(!s || s && !s.solo) && i[t.type.replace("tooltip", "")](t, r)
                    }).bind("tooltipfocus" + f, function(t) {
                        if (t.isDefaultPrevented() || t.target !== u[0]) return;
                        var n = e(x).filter("[" + c + "]"),
                            r = g.modal.zindex + n.length,
                            i = parseInt(u[0].style.zIndex, 10);
                        v[0].style.zIndex = r - 2, n.each(function() {
                            this.style.zIndex > i && (this.style.zIndex -= 1)
                        }), n.end().filter("." + N).qtip("blur", t.originalEvent), u.addClass(N)[0].style.zIndex = r;
                        try {
                            t.preventDefault()
                        } catch (s) {}
                    }).bind("tooltiphide" + f, function(t) {
                        t.target === u[0] && e("[" + c + "]").filter(":visible").not(u).last().qtip("focus", t)
                    }), s.escape && e(document).unbind(l).bind("keydown" + l, function(e) {
                        e.keyCode === 27 && u.hasClass(N) && r.hide(e)
                    }), s.blur && o.overlay.unbind(l).bind("click" + l, function(e) {
                        u.hasClass(N) && r.hide(e)
                    }), m(), i) : i
                },
                create: function() {
                    function r() {
                        v.css({
                            height: e(window).height(),
                            width: e(window).width()
                        })
                    }
                    var t = e(a);
                    return t.length ? o.overlay = t.insertAfter(e(x).last()) : (v = o.overlay = e("<div />", {
                        id: a.substr(1),
                        html: "<div></div>",
                        mousedown: function() {
                            return n
                        }
                    }).hide().insertAfter(e(x).last()), e(window).unbind(f).bind("resize" + f, r), r(), v)
                },
                toggle: function(r, o, a) {
                    if (r && r.isDefaultPrevented()) return i;
                    var f = s.effect,
                        p = o ? "show" : "hide",
                        d = v.is(":visible"),
                        m = e("[" + c + "]").filter(":visible").not(u),
                        g;
                    return v || (v = i.create()), v.is(":animated") && d === o || !o && m.length ? i : (o ? (v.css({
                        left: 0,
                        top: 0
                    }), v.toggleClass("blurs", s.blur), s.stealfocus !== n && (h.bind("focusin" + l, b), y(e("body *")))) : h.unbind("focusin" + l), v.stop(t, n), e.isFunction(f) ? f.call(v, o) : f === n ? v[p]() : v.fadeTo(parseInt(a, 10) || 90, o ? 1 : 0, function() {
                        o || e(this).hide()
                    }), o || v.queue(function(e) {
                        v.css({
                            left: "",
                            top: ""
                        }), e()
                    }), i)
                },
                show: function(e, n) {
                    return i.toggle(e, t, n)
                },
                hide: function(e, t) {
                    return i.toggle(e, n, t)
                },
                destroy: function() {
                    var t = v;
                    return t && (t = e("[" + c + "]").not(u).length < 1, t ? (o.overlay.remove(), e(document).unbind(f)) : o.overlay.unbind(f + r.id), h.undelegate("*", "focusin" + l)), u.removeAttr(c).unbind(f)
                }
            }), i.init()
        }

        function q(t) {
            var n = this,
                r = t.elements,
                i = r.tooltip,
                s = ".bgiframe-" + t.id;
            e.extend(n, {
                init: function() {
                    r.bgiframe = e('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'), r.bgiframe.appendTo(i), i.bind("tooltipmove" + s, n.adjust)
                },
                adjust: function() {
                    var e = t.get("dimensions"),
                        n = t.plugins.tip,
                        s = r.tip,
                        o, u;
                    u = parseInt(i.css("border-left-width"), 10) || 0, u = {
                        left: -u,
                        top: -u
                    }, n && s && (o = n.corner.precedance === "x" ? ["width", "left"] : ["height", "top"], u[o[1]] -= s[o[0]]()), r.bgiframe.css(u).css(e)
                },
                destroy: function() {
                    r.bgiframe.remove(), i.unbind(s)
                }
            }), n.init()
        }
        var t = !0,
            n = !1,
            r = null,
            i = "x",
            s = "y",
            o = "width",
            u = "height",
            a = "top",
            f = "left",
            l = "bottom",
            c = "right",
            h = "center",
            p = "flip",
            d = "flipinvert",
            v = "shift",
            m, g, y, b = {},
            w = "ui-tooltip",
            E = "ui-widget",
            S = "ui-state-disabled",
            x = "div.qtip." + w,
            T = w + "-default",
            N = w + "-focus",
            C = w + "-hover",
            k = w + "-fluid",
            L = "-31000px",
            A = "_replacedByqTip",
            O = "oldtitle",
            M;
        m = e.fn.qtip = function(i, s, o) {
            var u = ("" + i).toLowerCase(),
                a = r,
                f = e.makeArray(arguments).slice(1),
                l = f[f.length - 1],
                c = this[0] ? e.data(this[0], "qtip") : r;
            if (!arguments.length && c || u === "api") return c;
            if ("string" == typeof i) return this.each(function() {
                var r = e.data(this, "qtip");
                if (!r) return t;
                l && l.timeStamp && (r.cache.event = l);
                if (u !== "option" && u !== "options" || !s) r[u] && r[u].apply(r[u], f);
                else {
                    if (!e.isPlainObject(s) && o === undefined) return a = r.get(s), n;
                    r.set(s, o)
                }
            }), a !== r ? a : this;
            if ("object" == typeof i || !arguments.length) return c = D(e.extend(t, {}, i)), m.bind.call(this, c, l)
        }, m.bind = function(r, i) {
            return this.each(function(s) {
                function h(t) {
                    function r() {
                        l.render(typeof t == "object" || o.show.ready), u.show.add(u.hide).unbind(f)
                    }
                    if (l.cache.disabled) return n;
                    l.cache.event = e.extend({}, t), l.cache.target = t ? e(t.target) : [undefined], o.show.delay > 0 ? (clearTimeout(l.timers.show), l.timers.show = setTimeout(r, o.show.delay), a.show !== a.hide && u.hide.bind(a.hide, function() {
                        clearTimeout(l.timers.show)
                    })) : r()
                }
                var o, u, a, f, l, c;
                c = e.isArray(r.id) ? r.id[s] : r.id, c = !c || c === n || c.length < 1 || b[c] ? m.nextid++ : b[c] = c, f = ".qtip-" + c + "-create", l = H.call(this, c, r);
                if (l === n) return t;
                o = l.options, e.each(g, function() {
                    this.initialize === "initialize" && this(l)
                }), u = {
                    show: o.show.target,
                    hide: o.hide.target
                }, a = {
                    show: e.trim("" + o.show.event).replace(/ /g, f + " ") + f,
                    hide: e.trim("" + o.hide.event).replace(/ /g, f + " ") + f
                }, /mouse(over|enter)/i.test(a.show) && !/mouse(out|leave)/i.test(a.hide) && (a.hide += " mouseleave" + f), u.show.bind("mousemove" + f, function(e) {
                    y = {
                        pageX: e.pageX,
                        pageY: e.pageY,
                        type: "mousemove"
                    }, l.cache.onTarget = t
                }), u.show.bind(a.show, h), (o.show.ready || o.prerender) && h(i)
            })
        }, g = m.plugins = {
            Corner: function(e) {
                e = ("" + e).replace(/([A-Z])/, " $1").replace(/middle/gi, h).toLowerCase(), this.x = (e.match(/left|right/i) || e.match(/center/) || ["inherit"])[0].toLowerCase(), this.y = (e.match(/top|bottom|center/i) || ["inherit"])[0].toLowerCase();
                var t = e.charAt(0);
                this.precedance = t === "t" || t === "b" ? s : i, this.string = function() {
                    return this.precedance === s ? this.y + this.x : this.x + this.y
                }, this.abbrev = function() {
                    var e = this.x.substr(0, 1),
                        t = this.y.substr(0, 1);
                    return e === t ? e : this.precedance === s ? t + e : e + t
                }, this.invertx = function(e) {
                    this.x = this.x === f ? c : this.x === c ? f : e || this.x
                }, this.inverty = function(e) {
                    this.y = this.y === a ? l : this.y === l ? a : e || this.y
                }, this.clone = function() {
                    return {
                        x: this.x,
                        y: this.y,
                        precedance: this.precedance,
                        string: this.string,
                        abbrev: this.abbrev,
                        clone: this.clone,
                        invertx: this.invertx,
                        inverty: this.inverty
                    }
                }
            },
            offset: function(t, n) {
                function f(e, t) {
                    r.left += t * e.scrollLeft(), r.top += t * e.scrollTop()
                }
                var r = t.offset(),
                    i = t.closest("body")[0],
                    s = n,
                    o, u, a;
                if (s) {
                    do s.css("position") !== "static" && (u = s.position(), r.left -= u.left + (parseInt(s.css("borderLeftWidth"), 10) || 0) + (parseInt(s.css("marginLeft"), 10) || 0), r.top -= u.top + (parseInt(s.css("borderTopWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0), !o && (a = s.css("overflow")) !== "hidden" && a !== "visible" && (o = s)); while ((s = e(s[0].offsetParent)).length);
                    o && o[0] !== i && f(o, 1)
                }
                return r
            },
            iOS: parseFloat(("" + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ""])[1]).replace("undefined", "3_2").replace("_", ".").replace("_", "")) || n,
            fn: {
                attr: function(t, n) {
                    if (this.length) {
                        var r = this[0],
                            i = "title",
                            s = e.data(r, "qtip");
                        if (t === i && s && "object" == typeof s && s.options.suppress) return arguments.length < 2 ? e.attr(r, O) : (s && s.options.content.attr === i && s.cache.attr && s.set("content.text", n), this.attr(O, n))
                    }
                    return e.fn["attr" + A].apply(this, arguments)
                },
                clone: function(t) {
                    var n = e([]),
                        r = "title",
                        i = e.fn["clone" + A].apply(this, arguments);
                    return t || i.filter("[" + O + "]").attr("title", function() {
                        return e.attr(this, O)
                    }).removeAttr(O), i
                }
            }
        }, e.each(g.fn, function(n, r) {
            if (!r || e.fn[n + A]) return t;
            var i = e.fn[n + A] = e.fn[n];
            e.fn[n] = function() {
                return r.apply(this, arguments) || i.apply(this, arguments)
            }
        }), e.ui || (e["cleanData" + A] = e.cleanData, e.cleanData = function(t) {
            for (var n = 0, r;
                (r = t[n]) !== undefined; n++) try {
                e(r).triggerHandler("removeqtip")
            } catch (i) {}
            e["cleanData" + A](t)
        }), m.version = "@VERSION", m.nextid = 0, m.inactiveEvents = "click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "), m.zindex = 15e3, m.defaults = {
            prerender: n,
            id: n,
            overwrite: t,
            suppress: t,
            content: {
                text: t,
                attr: "title",
                title: {
                    text: n,
                    button: n
                }
            },
            position: {
                my: "top left",
                at: "bottom right",
                target: n,
                container: n,
                viewport: n,
                adjust: {
                    x: 0,
                    y: 0,
                    mouse: t,
                    resize: t,
                    method: "flip flip"
                },
                effect: function(t, r, i) {
                    e(this).animate(r, {
                        duration: 200,
                        queue: n
                    })
                }
            },
            show: {
                target: n,
                event: "mouseenter",
                effect: t,
                delay: 90,
                solo: n,
                ready: n,
                autofocus: n
            },
            hide: {
                target: n,
                event: "mouseleave",
                effect: t,
                delay: 0,
                fixed: n,
                inactive: n,
                leave: "window",
                distance: n
            },
            style: {
                classes: "",
                widget: n,
                width: n,
                height: n,
                def: t
            },
            events: {
                render: r,
                move: r,
                show: r,
                hide: r,
                toggle: r,
                visible: r,
                hidden: r,
                focus: r,
                blur: r
            }
        }, g.svg = function(t, n, r, i) {
            var s = e(document),
                o = n[0],
                u = {
                    width: 0,
                    height: 0,
                    position: {
                        top: 1e10,
                        left: 1e10
                    }
                },
                a, f, l, c, h;
            while (!o.getBBox) o = o.parentNode;
            if (o.getBBox && o.parentNode) {
                a = o.getBBox(), f = o.getScreenCTM(), l = o.farthestViewportElement || o;
                if (!l.createSVGPoint) return u;
                c = l.createSVGPoint(), c.x = a.x, c.y = a.y, h = c.matrixTransform(f), u.position.left = h.x, u.position.top = h.y, c.x += a.width, c.y += a.height, h = c.matrixTransform(f), u.width = h.x - u.position.left, u.height = h.y - u.position.top, u.position.left += s.scrollLeft(), u.position.top += s.scrollTop()
            }
            return u
        }, g.ajax = function(e) {
            var t = e.plugins.ajax;
            return "object" == typeof t ? t : e.plugins.ajax = new B(e)
        }, g.ajax.initialize = "render", g.ajax.sanitize = function(e) {
            var t = e.content,
                n;
            t && "ajax" in t && (n = t.ajax, typeof n != "object" && (n = e.content.ajax = {
                url: n
            }), "boolean" != typeof n.once && n.once && (n.once = !!n.once))
        }, e.extend(t, m.defaults, {
            content: {
                ajax: {
                    loading: t,
                    once: t
                }
            }
        }), g.tip = function(e) {
            var t = e.plugins.tip;
            return "object" == typeof t ? t : e.plugins.tip = new F(e)
        }, g.tip.initialize = "render", g.tip.sanitize = function(e) {
            var n = e.style,
                r;
            n && "tip" in n && (r = e.style.tip, typeof r != "object" && (r = e.style.tip = {
                corner: r
            }), /string|boolean/i.test(typeof r.corner) || (r.corner = t), typeof r.width != "number" && delete r.width, typeof r.height != "number" && delete r.height, typeof r.border != "number" && r.border !== t && delete r.border, typeof r.offset != "number" && delete r.offset)
        }, e.extend(t, m.defaults, {
            style: {
                tip: {
                    corner: t,
                    mimic: n,
                    width: 6,
                    height: 6,
                    border: t,
                    offset: 0
                }
            }
        }), g.modal = function(e) {
            var t = e.plugins.modal;
            return "object" == typeof t ? t : e.plugins.modal = new I(e)
        }, g.modal.initialize = "render", g.modal.sanitize = function(e) {
            e.show && (typeof e.show.modal != "object" ? e.show.modal = {
                on: !!e.show.modal
            } : typeof e.show.modal.on == "undefined" && (e.show.modal.on = t))
        }, g.modal.zindex = m.zindex + 1e3, g.modal.focusable = ["a[href]", "area[href]", "input", "select", "textarea", "button", "iframe", "object", "embed", "[tabindex]", "[contenteditable]"], e.extend(t, m.defaults, {
            show: {
                modal: {
                    on: n,
                    effect: t,
                    blur: t,
                    stealfocus: t,
                    escape: t
                }
            }
        }), g.viewport = function(e, t, n, r, p, m, g) {
            function H(e, n, r, i, s, o, u, a, f) {
                var l = t[s],
                    c = E[e],
                    p = S[e],
                    m = r === v,
                    g = -L.offset[s] + k.offset[s] + k["scroll" + s],
                    y = c === s ? f : c === o ? -f : -f / 2,
                    b = p === s ? a : p === o ? -a : -a / 2,
                    w = O && O.size ? O.size[u] || 0 : 0,
                    x = O && O.corner && O.corner.precedance === e && !m ? w : 0,
                    T = g - l + x,
                    N = l + f - k[u] - g + x,
                    C = y - (E.precedance === e || c === E[n] ? b : 0) - (p === h ? a / 2 : 0);
                return m ? (x = O && O.corner && O.corner.precedance === n ? w : 0, C = (c === s ? 1 : -1) * y - x, t[s] += T > 0 ? T : N > 0 ? -N : 0, t[s] = Math.max(-L.offset[s] + k.offset[s] + (x && O.corner[e] === h ? O.offset : 0), l - C, Math.min(Math.max(-L.offset[s] + k.offset[s] + k[u], l + C), t[s]))) : (i *= r === d ? 2 : 0, T > 0 && (c !== s || N > 0) ? (t[s] -= C + i, D["invert" + e](s)) : N > 0 && (c !== o || T > 0) && (t[s] -= (c === h ? -C : C) + i, D["invert" + e](o)), t[s] < g && -t[s] > N && (t[s] = l, D = undefined)), t[s] - l
            }
            var y = n.target,
                b = e.elements.tooltip,
                E = n.my,
                S = n.at,
                x = n.adjust,
                T = x.method.split(" "),
                N = T[0],
                C = T[1] || T[0],
                k = n.viewport,
                L = n.container,
                A = e.cache,
                O = e.plugins.tip,
                M = {
                    left: 0,
                    top: 0
                },
                _, D, P;
            if (!k.jquery || y[0] === window || y[0] === document.body || x.method === "none") return M;
            _ = b.css("position") === "fixed", k = {
                elem: k,
                height: k[(k[0] === window ? "h" : "outerH") + "eight"](),
                width: k[(k[0] === window ? "w" : "outerW") + "idth"](),
                scrollleft: _ ? 0 : k.scrollLeft(),
                scrolltop: _ ? 0 : k.scrollTop(),
                offset: k.offset() || {
                    left: 0,
                    top: 0
                }
            }, L = {
                elem: L,
                scrollLeft: L.scrollLeft(),
                scrollTop: L.scrollTop(),
                offset: L.offset() || {
                    left: 0,
                    top: 0
                }
            };
            if (N !== "shift" || C !== "shift") D = E.clone();
            return M = {
                left: N !== "none" ? H(i, s, N, x.x, f, c, o, r, m) : 0,
                top: C !== "none" ? H(s, i, C, x.y, a, l, u, p, g) : 0
            }, D && A.lastClass !== (P = w + "-pos-" + D.abbrev()) && b.removeClass(e.cache.lastClass).addClass(e.cache.lastClass = P), M
        }, g.imagemap = function(t, n, r, i) {
            function E(e, t, n) {
                var r = 0,
                    i = 1,
                    s = 1,
                    o = 0,
                    u = 0,
                    p = e.width,
                    d = e.height;
                while (p > 0 && d > 0 && i > 0 && s > 0) {
                    p = Math.floor(p / 2), d = Math.floor(d / 2), n.x === f ? i = p : n.x === c ? i = e.width - p : i += Math.floor(p / 2), n.y === a ? s = d : n.y === l ? s = e.height - d : s += Math.floor(d / 2), r = t.length;
                    while (r--) {
                        if (t.length < 2) break;
                        o = t[r][0] - e.position.left, u = t[r][1] - e.position.top, (n.x === f && o >= i || n.x === c && o <= i || n.x === h && (o < i || o > e.width - i) || n.y === a && u >= s || n.y === l && u <= s || n.y === h && (u < s || u > e.height - s)) && t.splice(r, 1)
                    }
                }
                return {
                    left: t[0][0],
                    top: t[0][1]
                }
            }
            n.jquery || (n = e(n));
            var s = t.cache.areas = {},
                o = (n[0].shape || n.attr("shape")).toLowerCase(),
                u = n[0].coords || n.attr("coords"),
                p = u.split(","),
                d = [],
                v = e('img[usemap="#' + n.parent("map").attr("name") + '"]'),
                m = v.offset(),
                g = {
                    width: 0,
                    height: 0,
                    position: {
                        top: 1e10,
                        right: 0,
                        bottom: 0,
                        left: 1e10
                    }
                },
                y = 0,
                b = 0,
                w;
            m.left += Math.ceil((v.outerWidth() - v.width()) / 2), m.top += Math.ceil((v.outerHeight() - v.height()) / 2);
            if (o === "poly") {
                y = p.length;
                while (y--) b = [parseInt(p[--y], 10), parseInt(p[y + 1], 10)], b[0] > g.position.right && (g.position.right = b[0]), b[0] < g.position.left && (g.position.left = b[0]), b[1] > g.position.bottom && (g.position.bottom = b[1]), b[1] < g.position.top && (g.position.top = b[1]), d.push(b)
            } else {
                y = -1;
                while (y++ < p.length) d.push(parseInt(p[y], 10))
            }
            switch (o) {
                case "rect":
                    g = {
                        width: Math.abs(d[2] - d[0]),
                        height: Math.abs(d[3] - d[1]),
                        position: {
                            left: Math.min(d[0], d[2]),
                            top: Math.min(d[1], d[3])
                        }
                    };
                    break;
                case "circle":
                    g = {
                        width: d[2] + 2,
                        height: d[2] + 2,
                        position: {
                            left: d[0],
                            top: d[1]
                        }
                    };
                    break;
                case "poly":
                    g.width = Math.abs(g.position.right - g.position.left), g.height = Math.abs(g.position.bottom - g.position.top), r.abbrev() === "c" ? g.position = {
                        left: g.position.left + g.width / 2,
                        top: g.position.top + g.height / 2
                    } : (s[r + u] || (g.position = E(g, d.slice(), r), i && (i[0] === "flip" || i[1] === "flip") && (g.offset = E(g, d.slice(), {
                        x: r.x === f ? c : r.x === c ? f : h,
                        y: r.y === a ? l : r.y === l ? a : h
                    }), g.offset.left -= g.position.left, g.offset.top -= g.position.top), s[r + u] = g), g = s[r + u]), g.width = g.height = 0
            }
            return g.position.left += m.left, g.position.top += m.top, g
        }, g.bgiframe = function(t) {
            var r = e.browser,
                i = t.plugins.bgiframe;
            return e("select, object").length < 1 || !r.msie || ("" + r.version).charAt(0) !== "6" ? n : "object" == typeof i ? i : t.plugins.bgiframe = new q(t)
        }, g.bgiframe.initialize = "render"
    }),
    function(e) {
        define("jqueryNumeric", ["jquery"], function() {
            return function() {
                (function(e) {
                    e.fn.numeric = function(t, n) {
                        typeof t == "boolean" && (t = {
                            decimal: t
                        }), t = t || {}, typeof t.negative == "undefined" && (t.negative = !0);
                        var r = t.decimal === !1 ? "" : t.decimal || ".",
                            i = t.negative === !0 ? !0 : !1;
                        return n = typeof n == "function" ? n : function() {}, this.data("numeric.decimal", r).data("numeric.negative", i).data("numeric.callback", n).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)
                    }, e.fn.numeric.keypress = function(t) {
                        var n = e.data(this, "numeric.decimal"),
                            r = e.data(this, "numeric.negative"),
                            i = t.charCode ? t.charCode : t.keyCode ? t.keyCode : 0;
                        if (i == 13 && this.nodeName.toLowerCase() == "input") return !0;
                        if (i == 13) return !1;
                        var s = !1;
                        if (t.ctrlKey && i == 97 || t.ctrlKey && i == 65) return !0;
                        if (t.ctrlKey && i == 120 || t.ctrlKey && i == 88) return !0;
                        if (t.ctrlKey && i == 99 || t.ctrlKey && i == 67) return !0;
                        if (t.ctrlKey && i == 122 || t.ctrlKey && i == 90) return !0;
                        if (t.ctrlKey && i == 118 || t.ctrlKey && i == 86 || t.shiftKey && i == 45) return !0;
                        if (i < 48 || i > 57) {
                            var o = e(this).val();
                            if (!(o.indexOf("-") === 0 || !r || i != 45 || o.length !== 0 && parseInt(e.fn.getSelectionStart(this), 10) !== 0)) return !0;
                            n && i == n.charCodeAt(0) && o.indexOf(n) != -1 && (s = !1), i != 8 && i != 9 && i != 13 && i != 35 && i != 36 && i != 37 && i != 39 && i != 46 ? s = !1 : typeof t.charCode != "undefined" && (t.keyCode == t.which && t.which !== 0 ? (s = !0, t.which == 46 && (s = !1)) : t.keyCode !== 0 && t.charCode === 0 && t.which === 0 && (s = !0)), n && i == n.charCodeAt(0) && (o.indexOf(n) == -1 ? s = !0 : s = !1)
                        } else s = !0;
                        return s
                    }, e.fn.numeric.keyup = function(t) {
                        var n = e(this).value;
                        if (n && n.length > 0) {
                            var r = e.fn.getSelectionStart(this),
                                i = e.data(this, "numeric.decimal"),
                                s = e.data(this, "numeric.negative");
                            if (i !== "" && i !== null) {
                                var o = n.indexOf(i);
                                o === 0 && (this.value = "0" + n), o == 1 && n.charAt(0) == "-" && (this.value = "-0" + n.substring(1)), n = this.value
                            }
                            var u = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, "-", i],
                                a = n.length;
                            for (var f = a - 1; f >= 0; f--) {
                                var l = n.charAt(f);
                                f !== 0 && l == "-" ? n = n.substring(0, f) + n.substring(f + 1) : f === 0 && !s && l == "-" && (n = n.substring(1));
                                var c = !1;
                                for (var h = 0; h < u.length; h++)
                                    if (l == u[h]) {
                                        c = !0;
                                        break
                                    }
                                if (!c || l == " ") n = n.substring(0, f) + n.substring(f + 1)
                            }
                            var p = n.indexOf(i);
                            if (p > 0)
                                for (var d = a - 1; d > p; d--) {
                                    var v = n.charAt(d);
                                    v == i && (n = n.substring(0, d) + n.substring(d + 1))
                                }
                            this.value = n, e.fn.setSelection(this, r)
                        }
                    }, e.fn.numeric.blur = function() {
                        var t = e.data(this, "numeric.decimal"),
                            n = e.data(this, "numeric.callback"),
                            r = this.value;
                        if (r !== "") {
                            var i = new RegExp("^\\d+$|^\\d*" + t + "\\d+$");
                            i.exec(r) || n.apply(this)
                        }
                    }, e.fn.removeNumeric = function() {
                        return this.data("numeric.decimal", null).data("numeric.negative", null).data("numeric.callback", null).unbind("keypress", e.fn.numeric.keypress).unbind("blur", e.fn.numeric.blur)
                    }, e.fn.getSelectionStart = function(e) {
                        if (e.createTextRange) {
                            var t = document.selection.createRange().duplicate();
                            return t.moveEnd("character", e.value.length), t.text === "" ? e.value.length : e.value.lastIndexOf(t.text)
                        }
                        return e.selectionStart
                    }, e.fn.setSelection = function(e, t) {
                        typeof t == "number" && (t = [t, t]);
                        if (t && t.constructor == Array && t.length == 2)
                            if (e.createTextRange) {
                                var n = e.createTextRange();
                                n.collapse(!0), n.moveStart("character", t[0]), n.moveEnd("character", t[1]), n.select()
                            } else e.setSelectionRange && (e.focus(), e.setSelectionRange(t[0], t[1]))
                    }
                })(jQuery)
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        define("jqueryUITouchPunch", ["jquery", "jqueryUI"], function() {
            return function() {
                (function(e) {
                    function i(e, t) {
                        if (e.originalEvent.touches.length > 1) return;
                        e.preventDefault();
                        var n = e.originalEvent.changedTouches[0],
                            r = document.createEvent("MouseEvents");
                        r.initMouseEvent(t, !0, !0, window, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), e.target.dispatchEvent(r)
                    }
                    e.support.touch = "ontouchend" in document;
                    if (!e.support.touch) return;
                    var t = e.ui.mouse.prototype,
                        n = t._mouseInit,
                        r;
                    t._touchStart = function(e) {
                        var t = this;
                        if (r || !t._mouseCapture(e.originalEvent.changedTouches[0])) return;
                        r = !0, t._touchMoved = !1, i(e, "mouseover"), i(e, "mousemove"), i(e, "mousedown")
                    }, t._touchMove = function(e) {
                        if (!r) return;
                        this._touchMoved = !0, i(e, "mousemove")
                    }, t._touchEnd = function(e) {
                        if (!r) return;
                        i(e, "mouseup"), i(e, "mouseout"), this._touchMoved || i(e, "click"), r = !1
                    }, t._mouseInit = function() {
                        var t = this;
                        t.element.bind("touchstart", e.proxy(t, "_touchStart")).bind("touchmove", e.proxy(t, "_touchMove")).bind("touchend", e.proxy(t, "_touchEnd")), n.call(t)
                    }
                })(jQuery)
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        define("jqueryOutside", ["jquery"], function() {
            return function() {
                (function(e, t, n) {
                    "$:nomunge";

                    function r(r, i) {
                        function u(t) {
                            e(s).each(function() {
                                var n = e(this);
                                this !== t.target && !n.has(t.target).length && n.triggerHandler(i, [t.target])
                            })
                        }
                        i = i || r + n;
                        var s = e(),
                            o = r + "." + i + "-special-event";
                        e.event.special[i] = {
                            setup: function() {
                                s = s.add(this), s.length === 1 && e(t).bind(o, u)
                            },
                            teardown: function() {
                                s = s.not(this), s.length === 0 && e(t).unbind(o)
                            },
                            add: function(e) {
                                var t = e.handler;
                                e.handler = function(e, n) {
                                    e.target = n, t.apply(this, arguments)
                                }
                            }
                        }
                    }
                    e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "), function(e) {
                        r(e)
                    }), r("focusin", "focus" + n), r("focusout", "blur" + n), e.addOutsideEvent = r
                })(jQuery, document, "outside")
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        define("jqueryPlaceholder", ["jquery"], function() {
            return function() {
                (function(e, t, n) {
                    function f(e) {
                        var t = {},
                            r = /^jQuery\d+$/;
                        return n.each(e.attributes, function(e, n) {
                            n.specified && !r.test(n.name) && (t[n.name] = n.value)
                        }), t
                    }

                    function l(e, r) {
                        var i = this,
                            s = n(i);
                        if (i.value == s.attr("placeholder") && s.hasClass("placeholder"))
                            if (s.data("placeholder-password")) {
                                s = s.hide().next().show().attr("id", s.removeAttr("id").data("placeholder-id"));
                                if (e === !0) return s[0].value = r;
                                s.focus()
                            } else i.value = "", s.removeClass("placeholder"), i == t.activeElement && i.select()
                    }

                    function c() {
                        var e, t = this,
                            r = n(t),
                            i = r,
                            s = this.id;
                        if (t.value == "") {
                            if (t.type == "password") {
                                if (!r.data("placeholder-textinput")) {
                                    try {
                                        e = r.clone().attr({
                                            type: "text"
                                        })
                                    } catch (o) {
                                        e = n("<input>").attr(n.extend(f(this), {
                                            type: "text"
                                        }))
                                    }
                                    e.removeAttr("name").data({
                                        "placeholder-password": !0,
                                        "placeholder-id": s
                                    }).bind("focus.placeholder", l), r.data({
                                        "placeholder-textinput": e,
                                        "placeholder-id": s
                                    }).before(e)
                                }
                                r = r.removeAttr("id").hide().prev().attr("id", s).show()
                            }
                            r.addClass("placeholder"), r[0].value = r.attr("placeholder")
                        } else r.removeClass("placeholder")
                    }
                    var r = "placeholder" in t.createElement("input"),
                        i = "placeholder" in t.createElement("textarea"),
                        s = n.fn,
                        o = n.valHooks,
                        u, a;
                    r && i ? (a = s.placeholder = function() {
                        return this
                    }, a.input = a.textarea = !0) : (a = s.placeholder = function() {
                        var e = this;
                        return e.filter((r ? "textarea" : ":input") + "[placeholder]").not(".placeholder").bind({
                            "focus.placeholder": l,
                            "blur.placeholder": c
                        }).data("placeholder-enabled", !0).trigger("blur.placeholder"), e
                    }, a.input = r, a.textarea = i, u = {
                        get: function(e) {
                            var t = n(e);
                            return t.data("placeholder-enabled") && t.hasClass("placeholder") ? "" : e.value
                        },
                        set: function(e, r) {
                            var i = n(e);
                            return i.data("placeholder-enabled") ? (r == "" ? (e.value = r, e != t.activeElement && c.call(e)) : i.hasClass("placeholder") ? l.call(e, !0, r) || (e.value = r) : e.value = r, i) : e.value = r
                        }
                    }, r || (o.input = u), i || (o.textarea = u), n(function() {
                        n(t).delegate("form", "submit.placeholder", function() {
                            var e = n(".placeholder", this).each(l);
                            setTimeout(function() {
                                e.each(c)
                            }, 10)
                        })
                    }), n(e).bind("beforeunload.placeholder", function() {
                        n(".placeholder").each(function() {
                            this.value = ""
                        })
                    }))
                })(this, document, jQuery)
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        define("bootstrap", ["jquery", "jqueryBrowserMobile"], function() {
            return function() {
                if (typeof jQuery == "undefined") throw new Error("Bootstrap's JavaScript requires jQuery"); + function(e) {
                    "use strict";
                    var t = e.fn.jquery.split(" ")[0].split(".");
                    if (t[0] < 2 && t[1] < 9 || t[0] == 1 && t[1] == 9 && t[2] < 1) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")
                }(jQuery), + function(e) {
                    "use strict";

                    function i(t) {
                        var n = t.attr("data-target");
                        n || (n = t.attr("href"), n = n && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
                        var r = n && e(n);
                        return r && r.length ? r : t.parent()
                    }

                    function s(r) {
                        if (r && r.which === 3) return;
                        e(t).remove(), e(n).each(function() {
                            var t = e(this),
                                n = i(t),
                                s = {
                                    relatedTarget: this
                                };
                            if (!n.hasClass("open")) return;
                            if (r && r.type == "click" && /input|textarea/i.test(r.target.tagName) && e.contains(n[0], r.target)) return;
                            n.trigger(r = e.Event("hide.bs.dropdown", s));
                            if (r.isDefaultPrevented()) return;
                            t.attr("aria-expanded", "false"), n.removeClass("open").trigger("hidden.bs.dropdown", s)
                        })
                    }

                    function o(t) {
                        return this.each(function() {
                            var n = e(this),
                                i = n.data("bs.dropdown");
                            i || n.data("bs.dropdown", i = new r(this)), typeof t == "string" && i[t].call(n)
                        })
                    }
                    var t = ".dropdown-backdrop",
                        n = '[data-toggle="dropdown"]',
                        r = function(t) {
                            e(t).on("click.bs.dropdown", this.toggle)
                        };
                    r.VERSION = "3.3.5", r.prototype.toggle = function(t) {
                        var n = e(this);
                        if (n.is(".disabled, :disabled")) return;
                        var r = i(n),
                            o = r.hasClass("open");
                        s();
                        if (!o) {
                            "ontouchstart" in document.documentElement && !r.closest(".navbar-nav").length && e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click", s);
                            var u = {
                                relatedTarget: this
                            };
                            r.trigger(t = e.Event("show.bs.dropdown", u));
                            if (t.isDefaultPrevented()) return;
                            n.trigger("focus").attr("aria-expanded", "true"), r.toggleClass("open").trigger("shown.bs.dropdown", u)
                        }
                        return !1
                    }, r.prototype.keydown = function(t) {
                        if (!/(38|40|27|32)/.test(t.which) || /input|textarea/i.test(t.target.tagName)) return;
                        var r = e(this);
                        t.preventDefault(), t.stopPropagation();
                        if (r.is(".disabled, :disabled")) return;
                        var s = i(r),
                            o = s.hasClass("open");
                        if (!o && t.which != 27 || o && t.which == 27) return t.which == 27 && s.find(n).trigger("focus"), r.trigger("click");
                        var u = " li:not(.disabled):visible a",
                            a = s.find(".dropdown-menu" + u);
                        if (!a.length) return;
                        var f = a.index(t.target);
                        t.which == 38 && f > 0 && f--, t.which == 40 && f < a.length - 1 && f++, ~f || (f = 0), a.eq(f).trigger("focus")
                    };
                    var u = e.fn.dropdown;
                    e.fn.dropdown = o, e.fn.dropdown.Constructor = r, e.fn.dropdown.noConflict = function() {
                        return e.fn.dropdown = u, this
                    }, e(document).on("click.bs.dropdown.data-api", s).on("click.bs.dropdown.data-api", ".dropdown form", function(e) {
                        e.stopPropagation()
                    }).on("click.bs.dropdown.data-api", n, r.prototype.toggle).on("keydown.bs.dropdown.data-api", n, r.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", r.prototype.keydown)
                }(jQuery), + function(e) {
                    "use strict";

                    function n(n, r) {
                        return this.each(function() {
                            var i = e(this),
                                s = i.data("bs.modal"),
                                o = e.extend({}, t.DEFAULTS, i.data(), typeof n == "object" && n);
                            s || i.data("bs.modal", s = new t(this, o)), typeof n == "string" ? s[n](r) : o.show && s.show(r)
                        })
                    }
                    var t = function(t, n) {
                        this.options = n, this.$body = e(document.body), this.$element = e(t), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function() {
                            this.$element.trigger("loaded.bs.modal")
                        }, this))
                    };
                    t.VERSION = "3.3.5", t.TRANSITION_DURATION = 300, t.BACKDROP_TRANSITION_DURATION = 150, t.DEFAULTS = {
                        backdrop: !0,
                        keyboard: !0,
                        show: !0
                    }, t.prototype.toggle = function(e) {
                        return this.isShown ? this.hide() : this.show(e)
                    }, t.prototype.show = function(n) {
                        var r = this,
                            i = e.Event("show.bs.modal", {
                                relatedTarget: n
                            });
                        this.$element.trigger(i);
                        if (this.isShown || i.isDefaultPrevented()) return;
                        this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function() {
                            r.$element.one("mouseup.dismiss.bs.modal", function(t) {
                                e(t.target).is(r.$element) && (r.ignoreBackdropClick = !0)
                            })
                        }), this.backdrop(function() {
                            var i = e.support.transition && r.$element.hasClass("fade");
                            r.$element.parent().length || r.$element.appendTo(r.$body), r.$element.show().scrollTop(0), r.adjustDialog(), i && r.$element[0].offsetWidth, r.$element.addClass("in"), r.enforceFocus();
                            var s = e.Event("shown.bs.modal", {
                                relatedTarget: n
                            });
                            i ? r.$dialog.one("bsTransitionEnd", function() {
                                r.$element.trigger("focus").trigger(s)
                            }).emulateTransitionEnd(t.TRANSITION_DURATION) : r.$element.trigger("focus").trigger(s)
                        })
                    }, t.prototype.hide = function(n) {
                        n && n.preventDefault(), n = e.Event("hide.bs.modal"), this.$element.trigger(n);
                        if (!this.isShown || n.isDefaultPrevented()) return;
                        this.isShown = !1, this.escape(), this.resize(), e(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(t.TRANSITION_DURATION) : this.hideModal()
                    }, t.prototype.enforceFocus = function() {
                        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function(e) {
                            this.$element[0] !== e.target && !this.$element.has(e.target).length && this.$element.trigger("focus")
                        }, this))
                    }, t.prototype.escape = function() {
                        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", e.proxy(function(e) {
                            e.which == 27 && this.hide()
                        }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
                    }, t.prototype.resize = function() {
                        this.isShown ? e(window).on("resize.bs.modal", e.proxy(this.handleUpdate, this)) : e(window).off("resize.bs.modal")
                    }, t.prototype.hideModal = function() {
                        var e = this;
                        this.$element.hide(), this.backdrop(function() {
                            e.$body.removeClass("modal-open"), e.resetAdjustments(), e.resetScrollbar(), e.$element.trigger("hidden.bs.modal")
                        })
                    }, t.prototype.removeBackdrop = function() {
                        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
                    }, t.prototype.backdrop = function(n) {
                        var r = this,
                            i = this.$element.hasClass("fade") ? "fade" : "";
                        if (this.isShown && this.options.backdrop) {
                            var s = e.support.transition && i;
                            this.$backdrop = e(document.createElement("div")).addClass("modal-backdrop " + i).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", e.proxy(function(e) {
                                if (this.ignoreBackdropClick) {
                                    this.ignoreBackdropClick = !1;
                                    return
                                }
                                if (e.target !== e.currentTarget) return;
                                this.options.backdrop == "static" ? this.$element[0].focus() : this.hide()
                            }, this)), s && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in");
                            if (!n) return;
                            s ? this.$backdrop.one("bsTransitionEnd", n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION) : n()
                        } else if (!this.isShown && this.$backdrop) {
                            this.$backdrop.removeClass("in");
                            var o = function() {
                                r.removeBackdrop(), n && n()
                            };
                            e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION) : o()
                        } else n && n()
                    }, t.prototype.handleUpdate = function() {
                        this.adjustDialog()
                    }, t.prototype.adjustDialog = function() {
                        var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
                        this.$element.css({
                            paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth : "",
                            paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth : ""
                        })
                    }, t.prototype.resetAdjustments = function() {
                        this.$element.css({
                            paddingLeft: "",
                            paddingRight: ""
                        })
                    }, t.prototype.checkScrollbar = function() {
                        var e = window.innerWidth;
                        if (!e) {
                            var t = document.documentElement.getBoundingClientRect();
                            e = t.right - Math.abs(t.left)
                        }
                        this.bodyIsOverflowing = document.body.clientWidth < e, this.scrollbarWidth = this.measureScrollbar()
                    }, t.prototype.setScrollbar = function() {
                        var e = parseInt(this.$body.css("padding-right") || 0, 10);
                        this.originalBodyPad = document.body.style.paddingRight || "", this.bodyIsOverflowing && this.$body.css("padding-right", e + this.scrollbarWidth)
                    }, t.prototype.resetScrollbar = function() {
                        this.$body.css("padding-right", this.originalBodyPad)
                    }, t.prototype.measureScrollbar = function() {
                        var e = document.createElement("div");
                        e.className = "modal-scrollbar-measure", this.$body.append(e);
                        var t = e.offsetWidth - e.clientWidth;
                        return this.$body[0].removeChild(e), t
                    };
                    var r = e.fn.modal;
                    e.fn.modal = n, e.fn.modal.Constructor = t, e.fn.modal.noConflict = function() {
                        return e.fn.modal = r, this
                    }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(t) {
                        var r = e(this),
                            i = r.attr("href"),
                            s = e(r.attr("data-target") || i && i.replace(/.*(?=#[^\s]+$)/, "")),
                            o = s.data("bs.modal") ? "toggle" : e.extend({
                                remote: !/#/.test(i) && i
                            }, s.data(), r.data());
                        r.is("a") && t.preventDefault(), s.one("show.bs.modal", function(e) {
                            if (e.isDefaultPrevented()) return;
                            s.one("hidden.bs.modal", function() {
                                r.is(":visible") && r.trigger("focus")
                            })
                        }), n.call(s, o, this)
                    })
                }(jQuery), + function(e) {
                    "use strict";

                    function t() {
                        var e = document.createElement("bootstrap"),
                            t = {
                                WebkitTransition: "webkitTransitionEnd",
                                MozTransition: "transitionend",
                                OTransition: "oTransitionEnd otransitionend",
                                transition: "transitionend"
                            };
                        for (var n in t)
                            if (e.style[n] !== undefined) return {
                                end: t[n]
                            };
                        return !1
                    }
                    e.fn.emulateTransitionEnd = function(t) {
                        var n = !1,
                            r = this;
                        e(this).one("bsTransitionEnd", function() {
                            n = !0
                        });
                        var i = function() {
                            n || e(r).trigger(e.support.transition.end)
                        };
                        return setTimeout(i, t), this
                    }, e(function() {
                        e.support.transition = t();
                        if (!e.support.transition) return;
                        e.event.special.bsTransitionEnd = {
                            bindType: e.support.transition.end,
                            delegateType: e.support.transition.end,
                            handle: function(t) {
                                if (e(t.target).is(this)) return t.handleObj.handler.apply(this, arguments)
                            }
                        }
                    })
                }(jQuery)
            }.apply(e, arguments)
        })
    }(this),
    function(e) {
        define("jSignature", ["jquery"], function() {
            return function() {
                (function() {
                    function e(e) {
                        for (var t, n = e.css("color"), r, e = e[0], i = !1; e && !r && !i;) {
                            try {
                                t = $(e).css("background-color")
                            } catch (s) {
                                t = "transparent"
                            }
                            "transparent" !== t && "rgba(0, 0, 0, 0)" !== t && (r = t), i = e.body, e = e.parentNode
                        }
                        var e = /rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,
                            i = /#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/,
                            o;
                        t = void 0, (t = n.match(e)) ? o = {
                            r: parseInt(t[1], 10),
                            g: parseInt(t[2], 10),
                            b: parseInt(t[3], 10)
                        } : (t = n.match(i)) && (o = {
                            r: parseInt(t[1], 16),
                            g: parseInt(t[2], 16),
                            b: parseInt(t[3], 16)
                        });
                        var u;
                        return r ? (t = void 0, (t = r.match(e)) ? u = {
                            r: parseInt(t[1], 10),
                            g: parseInt(t[2], 10),
                            b: parseInt(t[3], 10)
                        } : (t = r.match(i)) && (u = {
                            r: parseInt(t[1], 16),
                            g: parseInt(t[2], 16),
                            b: parseInt(t[3], 16)
                        })) : u = o ? 127 < Math.max.apply(null, [o.r, o.g, o.b]) ? {
                            r: 0,
                            g: 0,
                            b: 0
                        } : {
                            r: 255,
                            g: 255,
                            b: 255
                        } : {
                            r: 255,
                            g: 255,
                            b: 255
                        }, t = function(e) {
                            return "rgb(" + [e.r, e.g, e.b].join(", ") + ")"
                        }, o && u ? (e = Math.max.apply(null, [o.r, o.g, o.b]), o = Math.max.apply(null, [u.r, u.g, u.b]), o = Math.round(o + -0.75 * (o - e)), o = {
                            r: o,
                            g: o,
                            b: o
                        }) : o ? (o = Math.max.apply(null, [o.r, o.g, o.b]), e = 1, 127 < o && (e = -1), o = Math.round(o + 96 * e), o = {
                            r: o,
                            g: o,
                            b: o
                        }) : o = {
                            r: 191,
                            g: 191,
                            b: 191
                        }, {
                            color: n,
                            "background-color": u ? t(u) : r,
                            "decor-color": t(o)
                        }
                    }

                    function t(e, t) {
                        this.x = e, this.y = t, this.reverse = function() {
                            return new this.constructor(-1 * this.x, -1 * this.y)
                        }, this._length = null, this.getLength = function() {
                            return this._length || (this._length = Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2))), this._length
                        };
                        var n = function(e) {
                            return Math.round(e / Math.abs(e))
                        };
                        this.resizeTo = function(e) {
                            if (0 === this.x && 0 === this.y) this._length = 0;
                            else if (0 === this.x) this._length = e, this.y = e * n(this.y);
                            else if (0 === this.y) this._length = e, this.x = e * n(this.x);
                            else {
                                var t = Math.abs(this.y / this.x),
                                    r = Math.sqrt(Math.pow(e, 2) / (1 + Math.pow(t, 2))),
                                    t = t * r;
                                this._length = e, this.x = r * n(this.x), this.y = t * n(this.y)
                            }
                            return this
                        }, this.angleTo = function(e) {
                            var t = this.getLength() * e.getLength();
                            return 0 === t ? 0 : Math.acos(Math.min(Math.max((this.x * e.x + this.y * e.y) / t, -1), 1)) / Math.PI
                        }
                    }

                    function n(e, n) {
                        this.x = e, this.y = n, this.getVectorToCoordinates = function(e, n) {
                            return new t(e - this.x, n - this.y)
                        }, this.getVectorFromCoordinates = function(e, t) {
                            return this.getVectorToCoordinates(e, t).reverse()
                        }, this.getVectorToPoint = function(e) {
                            return new t(e.x - this.x, e.y - this.y)
                        }, this.getVectorFromPoint = function(e) {
                            return this.getVectorToPoint(e).reverse()
                        }
                    }

                    function r(e, t, n, r, i) {
                        this.data = e, this.context = t;
                        if (e.length)
                            for (var s = e.length, o, u, a = 0; a < s; a++) {
                                o = e[a], u = o.x.length, n.call(t, o);
                                for (var f = 1; f < u; f++) r.call(t, o, f);
                                i.call(t, o)
                            }
                        this.changed = function() {}, this.startStrokeFn = n, this.addToStrokeFn = r, this.endStrokeFn = i, this.inStroke = !1, this._stroke = this._lastPoint = null, this.startStroke = function(e) {
                            if (e && "number" == typeof e.x && "number" == typeof e.y) {
                                this._stroke = {
                                    x: [e.x],
                                    y: [e.y]
                                }, this.data.push(this._stroke), this._lastPoint = e, this.inStroke = !0;
                                var t = this._stroke,
                                    n = this.startStrokeFn,
                                    r = this.context;
                                return setTimeout(function() {
                                    n.call(r, t)
                                }, 3), e
                            }
                            return null
                        }, this.addToStroke = function(e) {
                            if (this.inStroke && "number" == typeof e.x && "number" == typeof e.y && 4 < Math.abs(e.x - this._lastPoint.x) + Math.abs(e.y - this._lastPoint.y)) {
                                var t = this._stroke.x.length;
                                this._stroke.x.push(e.x), this._stroke.y.push(e.y), this._lastPoint = e;
                                var n = this._stroke,
                                    r = this.addToStrokeFn,
                                    i = this.context;
                                return setTimeout(function() {
                                    r.call(i, n, t)
                                }, 3), e
                            }
                            return null
                        }, this.endStroke = function() {
                            var e = this.inStroke;
                            this.inStroke = !1, this._lastPoint = null;
                            if (e) {
                                var t = this._stroke,
                                    n = this.endStrokeFn,
                                    r = this.context,
                                    i = this.changed;
                                return setTimeout(function() {
                                    n.call(r, t), i.call(r)
                                }, 3), !0
                            }
                            return null
                        }
                    }

                    function i(t, r, i) {
                        var a = this.$parent = $(t),
                            t = this.eventTokens = {};
                        this.events = new u(this);
                        var f = $.fn[s]("globalEvents"),
                            l = {
                                width: "ratio",
                                height: "ratio",
                                sizeRatio: 4,
                                color: "#000",
                                "background-color": "#fff",
                                "decor-color": "#eee",
                                lineWidth: 0,
                                minFatFingerCompensation: -10,
                                showUndoButton: !1,
                                data: []
                            };
                        $.extend(l, e(a)), r && $.extend(l, r), this.settings = l;
                        for (var c in i) i.hasOwnProperty(c) && i[c].call(this, c);
                        this.events.publish(s + ".initializing"), this.$controlbarUpper = $('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(a), this.isCanvasEmulator = !1, i = this.canvas = this.initializeCanvas(l), r = $(i), this.$controlbarLower = $('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(a), this.canvasContext = i.getContext("2d"), r.data(s + ".this", this), a = (a = l.lineWidth) ? a : Math.max(Math.round(i.width / 400), 2), l.lineWidth = a, this.lineCurveThreshold = 3 * l.lineWidth, l.cssclass && "" != $.trim(l.cssclass) && r.addClass(l.cssclass), this.fatFingerCompensation = 0;
                        var a = function(e) {
                                var t, r, i = function(i) {
                                        return i = i.changedTouches && 0 < i.changedTouches.length ? i.changedTouches[0] : i, new n(Math.round(i.pageX + t), Math.round(i.pageY + r) + e.fatFingerCompensation)
                                    },
                                    s = new o(750, function() {
                                        e.dataEngine.endStroke()
                                    });
                                return this.drawEndHandler = function(t) {
                                    try {
                                        t.preventDefault()
                                    } catch (n) {}
                                    s.clear(), e.dataEngine.endStroke()
                                }, this.drawStartHandler = function(n) {
                                    n.preventDefault();
                                    var o = $(e.canvas).offset();
                                    t = -1 * o.left, r = -1 * o.top, e.dataEngine.startStroke(i(n)), s.kick()
                                }, this.drawMoveHandler = function(t) {
                                    t.preventDefault(), e.dataEngine.inStroke && (e.dataEngine.addToStroke(i(t)), s.kick())
                                }, this
                            }.call({}, this),
                            h = a.drawEndHandler,
                            p = a.drawStartHandler,
                            d = a.drawMoveHandler,
                            v = this.canvas,
                            r = $(v);
                        this.isCanvasEmulator ? (r.bind("mousemove." + s, d), r.bind("mouseup." + s, h), r.bind("mousedown." + s, p)) : (v.ontouchstart = function(e) {
                            v.onmousedown = void 0, v.onmouseup = void 0, v.onmousemove = void 0, this.fatFingerCompensation = l.minFatFingerCompensation && -3 * l.lineWidth > l.minFatFingerCompensation ? -3 * l.lineWidth : l.minFatFingerCompensation, p(e), v.ontouchend = h, v.ontouchstart = p, v.ontouchmove = d
                        }, v.onmousedown = function(e) {
                            v.ontouchstart = void 0, v.ontouchend = void 0, v.ontouchmove = void 0, p(e), v.onmousedown = p, v.onmouseup = h, v.onmousemove = d
                        }), t[s + ".windowmouseup"] = f.subscribe(s + ".windowmouseup", a.drawEndHandler), this.events.publish(s + ".attachingEventHandlers");
                        var m = this,
                            t = l.width.toString(10),
                            g = s;
                        if ("ratio" === t || "%" === t.split("")[t.length - 1]) this.eventTokens[g + ".parentresized"] = f.subscribe(g + ".parentresized", function(e, t, n) {
                            return function() {
                                var r = t.width();
                                if (r !== n) {
                                    for (var i in e) e.hasOwnProperty(i) && (f.unsubscribe(e[i]), delete e[i]);
                                    var s = m.settings;
                                    m.$parent.children().remove();
                                    for (i in m) m.hasOwnProperty(i) && delete m[i];
                                    i = s.data;
                                    var r = 1 * r / n,
                                        o = [],
                                        u, a, l, c, h, p;
                                    a = 0;
                                    for (l = i.length; a < l; a++) {
                                        p = i[a], u = {
                                            x: [],
                                            y: []
                                        }, c = 0;
                                        for (h = p.x.length; c < h; c++) u.x.push(p.x[c] * r), u.y.push(p.y[c] * r);
                                        o.push(u)
                                    }
                                    s.data = o, t[g](s)
                                }
                            }
                        }(this.eventTokens, this.$parent, this.$parent.width(), 1 * this.canvas.width / this.canvas.height));
                        return this.resetCanvas(l.data), this.events.publish(s + ".initialized"), this
                    }
                    var s = "jSignature",
                        o = function(e, t) {
                            var n;
                            return this.kick = function() {
                                clearTimeout(n), n = setTimeout(t, e)
                            }, this.clear = function() {
                                clearTimeout(n)
                            }, this
                        },
                        u = function(e) {
                            this.topics = {}, this.context = e ? e : this, this.publish = function(e, t, n, r) {
                                if (this.topics[e]) {
                                    var i = this.topics[e],
                                        s = Array.prototype.slice.call(arguments, 1),
                                        o = [],
                                        u, a, f, l;
                                    a = 0;
                                    for (f = i.length; a < f; a++) l = i[a], u = l[0], l[1] && (l[0] = function() {}, o.push(a)), u.apply(this.context, s);
                                    a = 0;
                                    for (f = o.length; a < f; a++) i.splice(o[a], 1)
                                }
                            }, this.subscribe = function(e, t, n) {
                                return this.topics[e] ? this.topics[e].push([t, n]) : this.topics[e] = [
                                    [t, n]
                                ], {
                                    topic: e,
                                    callback: t
                                }
                            }, this.unsubscribe = function(e) {
                                if (this.topics[e.topic])
                                    for (var t = this.topics[e.topic], n = 0, r = t.length; n < r; n++) t[n][0] === e.callback && t.splice(n, 1)
                            }
                        },
                        a = function(e) {
                            var t = this.canvasContext,
                                n = e.x[0],
                                e = e.y[0],
                                r = this.settings.lineWidth,
                                i = t.fillStyle;
                            t.fillStyle = t.strokeStyle, t.fillRect(n + r / -2, e + r / -2, r, r), t.fillStyle = i
                        },
                        f = function(e, r) {
                            var i = new n(e.x[r - 1], e.y[r - 1]),
                                s = new n(e.x[r], e.y[r]),
                                o = i.getVectorToPoint(s);
                            if (1 < r) {
                                var u = new n(e.x[r - 2], e.y[r - 2]),
                                    a = u.getVectorToPoint(i),
                                    f;
                                if (a.getLength() > this.lineCurveThreshold) {
                                    f = 2 < r ? (new n(e.x[r - 3], e.y[r - 3])).getVectorToPoint(u) : new t(0, 0);
                                    var l = .35 * a.getLength(),
                                        c = a.angleTo(f.reverse()),
                                        h = o.angleTo(a.reverse());
                                    f = (new t(f.x + a.x, f.y + a.y)).resizeTo(Math.max(.05, c) * l);
                                    var p = (new t(a.x + o.x, a.y + o.y)).reverse().resizeTo(Math.max(.05, h) * l),
                                        a = this.canvasContext,
                                        l = u.x,
                                        h = u.y,
                                        c = i.x,
                                        d = i.y,
                                        v = u.x + f.x,
                                        u = u.y + f.y;
                                    f = i.x + p.x, p = i.y + p.y, a.beginPath(), a.moveTo(l, h), a.bezierCurveTo(v, u, f, p, c, d), a.stroke()
                                }
                            }
                            o.getLength() <= this.lineCurveThreshold && (o = this.canvasContext, u = i.x, i = i.y, f = s.x, s = s.y, o.beginPath(), o.moveTo(u, i), o.lineTo(f, s), o.stroke())
                        },
                        l = function(e) {
                            var r = e.x.length - 1;
                            if (0 < r) {
                                var i = new n(e.x[r], e.y[r]),
                                    s = new n(e.x[r - 1], e.y[r - 1]),
                                    o = s.getVectorToPoint(i);
                                if (o.getLength() > this.lineCurveThreshold) {
                                    if (1 < r) {
                                        var e = (new n(e.x[r - 2], e.y[r - 2])).getVectorToPoint(s),
                                            u = (new t(e.x + o.x, e.y + o.y)).resizeTo(o.getLength() / 2),
                                            o = this.canvasContext,
                                            e = s.x,
                                            r = s.y,
                                            a = i.x,
                                            f = i.y,
                                            l = s.x + u.x,
                                            s = s.y + u.y,
                                            u = i.x,
                                            i = i.y;
                                        o.beginPath(), o.moveTo(e, r), o.bezierCurveTo(l, s, u, i, a, f)
                                    } else o = this.canvasContext, e = s.x, s = s.y, r = i.x, i = i.y, o.beginPath(), o.moveTo(e, s), o.lineTo(r, i);
                                    o.stroke()
                                }
                            }
                        };
                    i.prototype.resetCanvas = function(e) {
                        var t = this.canvas,
                            n = this.settings,
                            i = this.canvasContext,
                            o = this.isCanvasEmulator,
                            u = t.width,
                            c = t.height;
                        i.clearRect(0, 0, u + 30, c + 30), i.shadowColor = i.fillStyle = n["background-color"], o && i.fillRect(0, 0, u + 30, c + 30), i.lineWidth = Math.ceil(parseInt(n.lineWidth, 10)), i.lineCap = i.lineJoin = "round", i.strokeStyle = n["decor-color"], i.shadowOffsetX = 0, i.shadowOffsetY = 0;
                        var h = Math.round(c / 5),
                            p = 1.5 * h,
                            d = c - h,
                            u = u - 1.5 * h,
                            c = c - h;
                        i.beginPath(), i.moveTo(p, d), i.lineTo(u, c), i.stroke(), i.strokeStyle = n.color, o || (i.shadowColor = i.strokeStyle, i.shadowOffsetX = .5 * i.lineWidth, i.shadowOffsetY = -0.6 * i.lineWidth, i.shadowBlur = 0), e || (e = []), i = this.dataEngine = new r(e, this, a, f, l), n.data = e, $(t).data(s + ".data", e).data(s + ".settings", n);
                        var v = this.$parent,
                            m = this.events,
                            g = s;
                        return i.changed = function() {
                            m.publish(g + ".change"), v.trigger("change")
                        }, i.changed(), !0
                    }, i.prototype.initializeCanvas = function(e) {
                        var t = document.createElement("canvas"),
                            n = $(t);
                        e.width === e.height && "ratio" === e.height && (e.width = "100%"), n.css("margin", 0).css("padding", 0).css("border", "none").css("height", "ratio" === e.height || !e.height ? 1 : e.height.toString(10)).css("width", "ratio" === e.width || !e.width ? 1 : e.width.toString(10)), n.appendTo(this.$parent), "ratio" === e.height ? n.css("height", Math.round(n.width() / e.sizeRatio)) : "ratio" === e.width && n.css("width", Math.round(n.height() * e.sizeRatio)), n.addClass(s), t.width = n.width(), t.height = n.height(), e = t;
                        if (e.getContext) e = !1;
                        else {
                            var n = e.ownerDocument.parentWindow,
                                r = n.FlashCanvas ? e.ownerDocument.parentWindow.FlashCanvas : "undefined" == typeof FlashCanvas ? void 0 : FlashCanvas;
                            if (!r) throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");
                            e = r.initElement(e), r = 1, n && n.screen && n.screen.deviceXDPI && n.screen.logicalXDPI && (r = 1 * n.screen.deviceXDPI / n.screen.logicalXDPI);
                            if (1 !== r) try {
                                $(e).children("object").get(0).resize(Math.ceil(e.width * r), Math.ceil(e.height * r)), e.getContext("2d").scale(r, r)
                            } catch (i) {}
                            e = !0
                        }
                        return this.isCanvasEmulator = e, t.onselectstart = function(e) {
                            return e && e.preventDefault && e.preventDefault(), e && e.stopPropagation && e.stopPropagation(), !1
                        }, t
                    };
                    var c = window,
                        h = function(e, t) {
                            var n = new Image,
                                r = this;
                            n.onload = function() {
                                r.getContext("2d").drawImage(n, 0, 0, n.width < r.width ? n.width : r.width, n.height < r.height ? n.height : r.height)
                            }, n.src = "data:" + t + "," + e
                        },
                        p = function(e) {
                            return this.find("canvas." + s).add(this.filter("canvas." + s)).data(s + ".this").resetCanvas(e), this
                        },
                        d = function(e, t) {
                            if (void 0 === t && "string" == typeof e && "data:" === e.substr(0, 5) && (t = e.slice(5).split(",")[0], e = e.slice(6 + t.length), t === e)) return;
                            var n = this.find("canvas." + s).add(this.filter("canvas." + s));
                            if (!E.hasOwnProperty(t)) throw Error(s + " is unable to find import plugin with for format '" + String(t) + "'");
                            return 0 !== n.length && E[t].call(n[0], e, t, function(e) {
                                return function() {
                                    return e.resetCanvas.apply(e, arguments)
                                }
                            }(n.data(s + ".this"))), this
                        },
                        v = new u,
                        m = s,
                        g, y = function() {
                            v.publish(m + ".parentresized")
                        };
                    $(c).bind("resize." + m, function() {
                        g && clearTimeout(g), g = setTimeout(y, 500)
                    }).bind("mouseup." + m, function() {
                        v.publish(m + ".windowmouseup")
                    });
                    var b = {},
                        w = {
                            "default": function() {
                                return this.toDataURL()
                            },
                            "native": function(e) {
                                return e
                            },
                            image: function() {
                                var e = this.toDataURL();
                                if ("string" == typeof e && 4 < e.length && "data:" === e.slice(0, 5) && -1 !== e.indexOf(",")) {
                                    var t = e.indexOf(",");
                                    return [e.slice(5, t), e.substr(t + 1)]
                                }
                                return []
                            }
                        },
                        E = {
                            "native": function(e, t, n) {
                                n(e)
                            },
                            image: h,
                            "image/png;base64": h,
                            "image/jpeg;base64": h,
                            "image/jpg;base64": h
                        },
                        S = {
                            "export": w,
                            "import": E,
                            instance: b
                        },
                        x = {
                            init: function(e) {
                                return this.each(function() {
                                    var t, n = !1;
                                    for (t = this.parentNode; t && !n;) n = t.body, t = t.parentNode;
                                    !n || new i(this, e, b)
                                })
                            },
                            getSettings: function() {
                                return this.find("canvas." + s).add(this.filter("canvas." + s)).data(s + ".this").settings
                            },
                            clear: p,
                            reset: p,
                            addPlugin: function(e, t, n) {
                                return S.hasOwnProperty(e) && (S[e][t] = n), this
                            },
                            listPlugins: function(e) {
                                var t = [];
                                if (S.hasOwnProperty(e)) {
                                    var e = S[e],
                                        n;
                                    for (n in e) e.hasOwnProperty(n) && t.push(n)
                                }
                                return t
                            },
                            getData: function(e) {
                                var t = this.find("canvas." + s).add(this.filter("canvas." + s));
                                void 0 === e && (e = "default");
                                if (0 !== t.length && w.hasOwnProperty(e)) return w[e].call(t.get(0), t.data(s + ".data"))
                            },
                            importData: d,
                            setData: d,
                            globalEvents: function() {
                                return v
                            },
                            events: function() {
                                return this.find("canvas." + s).add(this.filter("canvas." + s)).data(s + ".this").events
                            }
                        };
                    $.fn[s] = function(e) {
                        if (!e || "object" == typeof e) return x.init.apply(this, arguments);
                        if ("string" == typeof e && x[e]) return x[e].apply(this, Array.prototype.slice.call(arguments, 1));
                        $.error("Method " + String(e) + " does not exist on jQuery." + s)
                    }
                })(),
                function() {
                    $.fn.jSignature("addPlugin", "instance", "UndoButton", function(e) {
                        this.events.subscribe("jSignature.attachingEventHandlers", function() {
                            if (this.settings[e]) {
                                var t = this.settings[e];
                                "function" != typeof t && (t = function() {
                                    var e = $('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),
                                        t = e.width();
                                    return e.css("left", Math.round((this.canvas.width - t) / 2)), t !== e.width() && e.width(t), e
                                });
                                var n = t.call(this),
                                    r = this;
                                r.events.subscribe("jSignature.change", function() {
                                    r.dataEngine.data.length ? n.show() : n.hide()
                                });
                                var i = this,
                                    s = (this.events.topics.hasOwnProperty("jSignature.undo") ? e : "jSignature") + ".undo";
                                n.bind("click", function() {
                                    i.events.publish(s)
                                }), i.events.subscribe(s, function() {
                                    var e = i.dataEngine.data;
                                    e.length && (e.pop(), i.resetCanvas(e))
                                })
                            }
                        })
                    })
                }(),
                function() {
                    for (var e = {}, t = {}, n = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""), r = n.length / 2, i = r - 1; - 1 < i; i--) e[n[i]] = n[i + r], t[n[i + r]] = n[i];
                    var s = function(t) {
                            for (var t = t.split(""), n = t.length, r = 1; r < n; r++) t[r] = e[t[r]];
                            return t.join("")
                        },
                        o = function(e) {
                            for (var t = [], n = 0, i = 1, o = e.length, u, a, f = 0; f < o; f++) u = Math.round(e[f]), a = u - n, n = u, 0 > a && 0 < i ? (i = -1, t.push("Z")) : 0 < a && 0 > i && (i = 1, t.push("Y")), u = Math.abs(a), u >= r ? t.push(s(u.toString(r))) : t.push(u.toString(r));
                            return t.join("")
                        },
                        u = function(n) {
                            for (var i = [], n = n.split(""), s = n.length, o, u = 1, a = [], f = 0, l = 0; l < s; l++) o = n[l], o in e || "Z" === o || "Y" === o ? (0 !== a.length && (a = parseInt(a.join(""), r) * u + f, i.push(a), f = a), "Z" === o ? (u = -1, a = []) : "Y" === o ? (u = 1, a = []) : a = [o]) : a.push(t[o]);
                            return i.push(parseInt(a.join(""), r) * u + f), i
                        },
                        a = function(e) {
                            for (var t = [], n = e.length, r, i = 0; i < n; i++) r = e[i], t.push(o(r.x)), t.push(o(r.y));
                            return t.join("_")
                        },
                        f = function(e) {
                            for (var t = [], e = e.split("_"), n = e.length / 2, r = 0; r < n; r++) t.push({
                                x: u(e[2 * r]),
                                y: u(e[2 * r + 1])
                            });
                            return t
                        },
                        n = function(e) {
                            return ["image/jsignature;base30", a(e)]
                        },
                        i = function(e, t, n) {
                            "string" == typeof e && ("image/jsignature;base30" === e.substring(0, 23).toLowerCase() && (e = e.substring(24)), n(f(e)))
                        };
                    if (null == this.jQuery) throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");
                    var l = this.jQuery.fn.jSignature;
                    l("addPlugin", "export", "base30", n), l("addPlugin", "export", "image/jsignature;base30", n), l("addPlugin", "import", "base30", i), l("addPlugin", "import", "image/jsignature;base30", i), this.jSignatureDebug && (this.jSignatureDebug.base30 = {
                        remapTailChars: s,
                        compressstrokeleg: o,
                        uncompressstrokeleg: u,
                        compressstrokes: a,
                        uncompressstrokes: f,
                        charmap: e
                    })
                }.call("undefined" != typeof window ? window : this),
                    function() {
                        function e(e, t) {
                            this.x = e, this.y = t, this.reverse = function() {
                                return new this.constructor(-1 * this.x, -1 * this.y)
                            }, this._length = null, this.getLength = function() {
                                return this._length || (this._length = Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2))), this._length
                            };
                            var n = function(e) {
                                return Math.round(e / Math.abs(e))
                            };
                            this.resizeTo = function(e) {
                                if (0 === this.x && 0 === this.y) this._length = 0;
                                else if (0 === this.x) this._length = e, this.y = e * n(this.y);
                                else if (0 === this.y) this._length = e, this.x = e * n(this.x);
                                else {
                                    var t = Math.abs(this.y / this.x),
                                        r = Math.sqrt(Math.pow(e, 2) / (1 + Math.pow(t, 2))),
                                        t = t * r;
                                    this._length = e, this.x = r * n(this.x), this.y = t * n(this.y)
                                }
                                return this
                            }, this.angleTo = function(e) {
                                var t = this.getLength() * e.getLength();
                                return 0 === t ? 0 : Math.acos(Math.min(Math.max((this.x * e.x + this.y * e.y) / t, -1), 1)) / Math.PI
                            }
                        }

                        function t(t, n) {
                            this.x = t, this.y = n, this.getVectorToCoordinates = function(t, n) {
                                return new e(t - this.x, n - this.y)
                            }, this.getVectorFromCoordinates = function(e, t) {
                                return this.getVectorToCoordinates(e, t).reverse()
                            }, this.getVectorToPoint = function(t) {
                                return new e(t.x - this.x, t.y - this.y)
                            }, this.getVectorFromPoint = function(e) {
                                return this.getVectorToPoint(e).reverse()
                            }
                        }

                        function n(e, t) {
                            var n = Math.pow(10, t);
                            return Math.round(e * n) / n
                        }

                        function r(r, i, s) {
                            var i = i + 1,
                                o = new t(r.x[i - 1], r.y[i - 1]),
                                u = new t(r.x[i], r.y[i]),
                                u = o.getVectorToPoint(u),
                                a = new t(r.x[i - 2], r.y[i - 2]),
                                o = a.getVectorToPoint(o);
                            return o.getLength() > s ? (s = 2 < i ? (new t(r.x[i - 3], r.y[i - 3])).getVectorToPoint(a) : new e(0, 0), r = .35 * o.getLength(), a = o.angleTo(s.reverse()), i = u.angleTo(o.reverse()), s = (new e(s.x + o.x, s.y + o.y)).resizeTo(Math.max(.05, a) * r), u = (new e(o.x + u.x, o.y + u.y)).reverse().resizeTo(Math.max(.05, i) * r), u = new e(o.x + u.x, o.y + u.y), ["c", n(s.x, 2), n(s.y, 2), n(u.x, 2), n(u.y, 2), n(o.x, 2), n(o.y, 2)]) : ["l", n(o.x, 2), n(o.y, 2)]
                        }

                        function i(r, i) {
                            var s = r.x.length - 1,
                                o = new t(r.x[s], r.y[s]),
                                u = new t(r.x[s - 1], r.y[s - 1]),
                                o = u.getVectorToPoint(o);
                            if (1 < s && o.getLength() > i) {
                                var s = (new t(r.x[s - 2], r.y[s - 2])).getVectorToPoint(u),
                                    u = o.angleTo(s.reverse()),
                                    a = .35 * o.getLength(),
                                    s = (new e(s.x + o.x, s.y + o.y)).resizeTo(Math.max(.05, u) * a);
                                return ["c", n(s.x, 2), n(s.y, 2), n(o.x, 2), n(o.y, 2), n(o.x, 2), n(o.y, 2)]
                            }
                            return ["l", n(o.x, 2), n(o.y, 2)]
                        }

                        function s(e, t, s) {
                            for (var t = ["M", n(e.x[0] - t, 2), n(e.y[0] - s, 2)], s = 1, o = e.x.length - 1; s < o; s++) t.push.apply(t, r(e, s, 1));
                            return 0 < o ? t.push.apply(t, i(e, s, 1)) : 0 === o && t.push.apply(t, ["l", 1, 1]), t.join(" ")
                        }

                        function o(e) {
                            var t = ['<?xml version="1.0" encoding="UTF-8" standalone="no"?>', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],
                                n, r = e.length,
                                i, o = [],
                                u = [],
                                a = i = n = 0,
                                f = 0,
                                l = [];
                            if (0 !== r) {
                                for (n = 0; n < r; n++) {
                                    a = e[n], f = [], i = {
                                        x: [],
                                        y: []
                                    };
                                    for (var c = void 0, h = void 0, c = 0, h = a.x.length; c < h; c++) f.push({
                                        x: a.x[c],
                                        y: a.y[c]
                                    });
                                    f = simplify(f, .7, !0), c = 0;
                                    for (h = f.length; c < h; c++) i.x.push(f[c].x), i.y.push(f[c].y);
                                    l.push(i), o = o.concat(i.x), u = u.concat(i.y)
                                }
                                e = Math.min.apply(null, o) - 1, r = Math.max.apply(null, o) + 1, o = Math.min.apply(null, u) - 1, u = Math.max.apply(null, u) + 1, a = 0 > e ? 0 : e, f = 0 > o ? 0 : o, n = r - e, i = u - o
                            }
                            t.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="' + n.toString() + '" height="' + i.toString() + '">'), n = 0;
                            for (r = l.length; n < r; n++) i = l[n], t.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="' + s(i, a, f) + '"/>');
                            return t.push("</svg>"), t.join("")
                        }

                        function u(e) {
                            return [c, o(e)]
                        }

                        function a(e) {
                            return [h, l(o(e))]
                        }
                        var f = window;
                        "use strict", ("undefined" != typeof exports ? exports : f).simplify = function(e, t, n) {
                            t = void 0 !== t ? t * t : 1;
                            if (!n) {
                                for (var r = e.length, i, s = e[0], o = [s], n = 1; n < r; n++) {
                                    i = e[n];
                                    var u = i.x - s.x,
                                        a = i.y - s.y;
                                    u * u + a * a > t && (o.push(i), s = i)
                                }
                                e = (s !== i && o.push(i), o)
                            }
                            i = e;
                            var n = i.length,
                                r = new("undefined" != typeof Uint8Array ? Uint8Array : Array)(n),
                                s = 0,
                                o = n - 1,
                                f, l, c = [],
                                h = [],
                                p = [];
                            for (r[s] = r[o] = 1; o;) {
                                a = 0;
                                for (u = s + 1; u < o; u++) {
                                    f = i[u];
                                    var d = i[s],
                                        v = i[o],
                                        m = d.x,
                                        g = d.y,
                                        d = v.x - m,
                                        y = v.y - g,
                                        b = void 0;
                                    if (0 !== d || 0 !== y) b = ((f.x - m) * d + (f.y - g) * y) / (d * d + y * y), 1 < b ? (m = v.x, g = v.y) : 0 < b && (m += d * b, g += y * b);
                                    f = (d = f.x - m, y = f.y - g, d * d + y * y), f > a && (l = u, a = f)
                                }
                                a > t && (r[l] = 1, c.push(s), h.push(l), c.push(l), h.push(o)), s = c.pop(), o = h.pop()
                            }
                            for (u = 0; u < n; u++) r[u] && p.push(i[u]);
                            return e = p, e
                        };
                        if ("function" != typeof l) var l = function(e) {
                            var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),
                                n, r, i, s, o = 0,
                                u = 0,
                                a = "",
                                a = [];
                            do n = e.charCodeAt(o++), r = e.charCodeAt(o++), i = e.charCodeAt(o++), s = n << 16 | r << 8 | i, n = s >> 18 & 63, r = s >> 12 & 63, i = s >> 6 & 63, s &= 63, a[u++] = t[n] + t[r] + t[i] + t[s]; while (o < e.length);
                            return a = a.join(""), e = e.length % 3, (e ? a.slice(0, e - 3) : a) + "===".slice(e || 3)
                        };
                        var c = "image/svg+xml",
                            h = "image/svg+xml;base64";
                        if ("undefined" == typeof $) throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");
                        f = $.fn.jSignature, f("addPlugin", "export", "svg", u), f("addPlugin", "export", c, u), f("addPlugin", "export", "svgbase64", a), f("addPlugin", "export", h, a)
                    }()
            }.apply(e, arguments)
        })
    }(this),
    function() {
        function e(e, t) {
            try {
                for (var n in t) Object.defineProperty(e.prototype, n, {
                    value: t[n],
                    enumerable: !1
                })
            } catch (r) {
                e.prototype = t
            }
        }

        function t(e) {
            var t = -1,
                n = e.length,
                r = [];
            while (++t < n) r.push(e[t]);
            return r
        }

        function n(e) {
            return Array.prototype.slice.call(e)
        }

        function r() {}

        function i(e) {
            return e
        }

        function s() {
            return this
        }

        function o() {
            return !0
        }

        function u(e) {
            return typeof e == "function" ? e : function() {
                return e
            }
        }

        function a(e, t, n) {
            return function() {
                var r = n.apply(t, arguments);
                return arguments.length ? e : r
            }
        }

        function f(e) {
            return e != null && !isNaN(e)
        }

        function l(e) {
            return e.length
        }

        function c(e) {
            return e == null
        }

        function h(e) {
            return e.trim().replace(/\s+/g, " ")
        }

        function p(e) {
            var t = 1;
            while (e * t % 1) t *= 10;
            return t
        }

        function d() {}

        function v(e) {
            function t() {
                var t = n,
                    r = -1,
                    i = t.length,
                    s;
                while (++r < i)(s = t[r].on) && s.apply(this, arguments);
                return e
            }
            var n = [],
                i = new r;
            return t.on = function(t, r) {
                var s = i.get(t),
                    o;
                return arguments.length < 2 ? s && s.on : (s && (s.on = null, n = n.slice(0, o = n.indexOf(s)).concat(n.slice(o + 1)), i.remove(t)), r && n.push(i.set(t, {
                    on: r
                })), e)
            }, t
        }

        function m(e, t) {
            return t - (e ? 1 + Math.floor(Math.log(e + Math.pow(10, 1 + Math.floor(Math.log(e) / Math.LN10) - t)) / Math.LN10) : 1)
        }

        function g(e) {
            return e + ""
        }

        function y(e) {
            var t = e.lastIndexOf("."),
                n = t >= 0 ? e.substring(t) : (t = e.length, ""),
                r = [];
            while (t > 0) r.push(e.substring(t -= 3, t + 3));
            return r.reverse().join(",") + n
        }

        function b(e, t) {
            var n = Math.pow(10, Math.abs(8 - t) * 3);
            return {
                scale: t > 8 ? function(e) {
                    return e / n
                } : function(e) {
                    return e * n
                },
                symbol: e
            }
        }

        function w(e) {
            return function(t) {
                return t <= 0 ? 0 : t >= 1 ? 1 : e(t)
            }
        }

        function E(e) {
            return function(t) {
                return 1 - e(1 - t)
            }
        }

        function S(e) {
            return function(t) {
                return .5 * (t < .5 ? e(2 * t) : 2 - e(2 - 2 * t))
            }
        }

        function x(e) {
            return e
        }

        function T(e) {
            return function(t) {
                return Math.pow(t, e)
            }
        }

        function N(e) {
            return 1 - Math.cos(e * Math.PI / 2)
        }

        function C(e) {
            return Math.pow(2, 10 * (e - 1))
        }

        function k(e) {
            return 1 - Math.sqrt(1 - e * e)
        }

        function L(e, t) {
            var n;
            return arguments.length < 2 && (t = .45), arguments.length < 1 ? (e = 1, n = t / 4) : n = t / (2 * Math.PI) * Math.asin(1 / e),
                function(r) {
                    return 1 + e * Math.pow(2, 10 * -r) * Math.sin((r - n) * 2 * Math.PI / t)
                }
        }

        function A(e) {
            return e || (e = 1.70158),
                function(t) {
                    return t * t * ((e + 1) * t - e)
                }
        }

        function O(e) {
            return e < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
        }

        function M() {
            d3.event.stopPropagation(), d3.event.preventDefault()
        }

        function _() {
            var e = d3.event,
                t;
            while (t = e.sourceEvent) e = t;
            return e
        }

        function D(e) {
            var t = new d,
                n = 0,
                r = arguments.length;
            while (++n < r) t[arguments[n]] = v(t);
            return t.of = function(n, r) {
                return function(i) {
                    try {
                        var s = i.sourceEvent = d3.event;
                        i.target = e, d3.event = i, t[i.type].apply(n, r)
                    } finally {
                        d3.event = s
                    }
                }
            }, t
        }

        function P(e) {
            var t = [e.a, e.b],
                n = [e.c, e.d],
                r = B(t),
                i = H(t, n),
                s = B(j(n, t, -i)) || 0;
            t[0] * n[1] < n[0] * t[1] && (t[0] *= -1, t[1] *= -1, r *= -1, i *= -1), this.rotate = (r ? Math.atan2(t[1], t[0]) : Math.atan2(-n[0], n[1])) * ls, this.translate = [e.e, e.f], this.scale = [r, s], this.skew = s ? Math.atan2(i, s) * ls : 0
        }

        function H(e, t) {
            return e[0] * t[0] + e[1] * t[1]
        }

        function B(e) {
            var t = Math.sqrt(H(e, e));
            return t && (e[0] /= t, e[1] /= t), t
        }

        function j(e, t, n) {
            return e[0] += n * t[0], e[1] += n * t[1], e
        }

        function F(e) {
            return e == "transform" ? d3.interpolateTransform : d3.interpolate
        }

        function I(e, t) {
            return t = t - (e = +e) ? 1 / (t - e) : 0,
                function(n) {
                    return (n - e) * t
                }
        }

        function q(e, t) {
            return t = t - (e = +e) ? 1 / (t - e) : 0,
                function(n) {
                    return Math.max(0, Math.min(1, (n - e) * t))
                }
        }

        function R() {}

        function U(e, t, n) {
            return new z(e, t, n)
        }

        function z(e, t, n) {
            this.r = e, this.g = t, this.b = n
        }

        function W(e) {
            return e < 16 ? "0" + Math.max(0, e).toString(16) : Math.min(255, e).toString(16)
        }

        function X(e, t, n) {
            var r = 0,
                i = 0,
                s = 0,
                o, u, a;
            o = /([a-z]+)\((.*)\)/i.exec(e);
            if (o) {
                u = o[2].split(",");
                switch (o[1]) {
                    case "hsl":
                        return n(parseFloat(u[0]), parseFloat(u[1]) / 100, parseFloat(u[2]) / 100);
                    case "rgb":
                        return t(K(u[0]), K(u[1]), K(u[2]))
                }
            }
            return (a = ds.get(e)) ? t(a.r, a.g, a.b) : (e != null && e.charAt(0) === "#" && (e.length === 4 ? (r = e.charAt(1), r += r, i = e.charAt(2), i += i, s = e.charAt(3), s += s) : e.length === 7 && (r = e.substring(1, 3), i = e.substring(3, 5), s = e.substring(5, 7)), r = parseInt(r, 16), i = parseInt(i, 16), s = parseInt(s, 16)), t(r, i, s))
        }

        function V(e, t, n) {
            var r = Math.min(e /= 255, t /= 255, n /= 255),
                i = Math.max(e, t, n),
                s = i - r,
                o, u, a = (i + r) / 2;
            return s ? (u = a < .5 ? s / (i + r) : s / (2 - i - r), e == i ? o = (t - n) / s + (t < n ? 6 : 0) : t == i ? o = (n - e) / s + 2 : o = (e - t) / s + 4, o *= 60) : u = o = 0, Q(o, u, a)
        }

        function $(e, t, n) {
            e = J(e), t = J(t), n = J(n);
            var r = ut((.4124564 * e + .3575761 * t + .1804375 * n) / ys),
                i = ut((.2126729 * e + .7151522 * t + .072175 * n) / bs),
                s = ut((.0193339 * e + .119192 * t + .9503041 * n) / ws);
            return nt(116 * i - 16, 500 * (r - i), 200 * (i - s))
        }

        function J(e) {
            return (e /= 255) <= .04045 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4)
        }

        function K(e) {
            var t = parseFloat(e);
            return e.charAt(e.length - 1) === "%" ? Math.round(t * 2.55) : t
        }

        function Q(e, t, n) {
            return new G(e, t, n)
        }

        function G(e, t, n) {
            this.h = e, this.s = t, this.l = n
        }

        function Y(e, t, n) {
            function r(e) {
                return e > 360 ? e -= 360 : e < 0 && (e += 360), e < 60 ? s + (o - s) * e / 60 : e < 180 ? o : e < 240 ? s + (o - s) * (240 - e) / 60 : s
            }

            function i(e) {
                return Math.round(r(e) * 255)
            }
            var s, o;
            return e %= 360, e < 0 && (e += 360), t = t < 0 ? 0 : t > 1 ? 1 : t, n = n < 0 ? 0 : n > 1 ? 1 : n, o = n <= .5 ? n * (1 + t) : n + t - n * t, s = 2 * n - o, U(i(e + 120), i(e), i(e - 120))
        }

        function Z(e, t, n) {
            return new et(e, t, n)
        }

        function et(e, t, n) {
            this.h = e, this.c = t, this.l = n
        }

        function tt(e, t, n) {
            return nt(n, Math.cos(e *= Math.PI / 180) * t, Math.sin(e) * t)
        }

        function nt(e, t, n) {
            return new rt(e, t, n)
        }

        function rt(e, t, n) {
            this.l = e, this.a = t, this.b = n
        }

        function it(e, t, n) {
            var r = (e + 16) / 116,
                i = r + t / 500,
                s = r - n / 200;
            return i = ot(i) * ys, r = ot(r) * bs, s = ot(s) * ws, U(at(3.2404542 * i - 1.5371385 * r - .4985314 * s), at(-0.969266 * i + 1.8760108 * r + .041556 * s), at(.0556434 * i - .2040259 * r + 1.0572252 * s))
        }

        function st(e, t, n) {
            return Z(Math.atan2(n, t) / Math.PI * 180, Math.sqrt(t * t + n * n), e)
        }

        function ot(e) {
            return e > .206893034 ? e * e * e : (e - 4 / 29) / 7.787037
        }

        function ut(e) {
            return e > .008856 ? Math.pow(e, 1 / 3) : 7.787037 * e + 4 / 29
        }

        function at(e) {
            return Math.round(255 * (e <= .00304 ? 12.92 * e : 1.055 * Math.pow(e, 1 / 2.4) - .055))
        }

        function ft(e) {
            return Qi(e, ks), e
        }

        function lt(e) {
            return function() {
                return Ss(e, this)
            }
        }

        function ct(e) {
            return function() {
                return xs(e, this)
            }
        }

        function ht(e, t) {
            function n() {
                this.removeAttribute(e)
            }

            function r() {
                this.removeAttributeNS(e.space, e.local)
            }

            function i() {
                this.setAttribute(e, t)
            }

            function s() {
                this.setAttributeNS(e.space, e.local, t)
            }

            function o() {
                var n = t.apply(this, arguments);
                n == null ? this.removeAttribute(e) : this.setAttribute(e, n)
            }

            function u() {
                var n = t.apply(this, arguments);
                n == null ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, n)
            }
            return e = d3.ns.qualify(e), t == null ? e.local ? r : n : typeof t == "function" ? e.local ? u : o : e.local ? s : i
        }

        function pt(e) {
            return new RegExp("(?:^|\\s+)" + d3.requote(e) + "(?:\\s+|$)", "g")
        }

        function dt(e, t) {
            function n() {
                var n = -1;
                while (++n < i) e[n](this, t)
            }

            function r() {
                var n = -1,
                    r = t.apply(this, arguments);
                while (++n < i) e[n](this, r)
            }
            e = e.trim().split(/\s+/).map(vt);
            var i = e.length;
            return typeof t == "function" ? r : n
        }

        function vt(e) {
            var t = pt(e);
            return function(n, r) {
                if (i = n.classList) return r ? i.add(e) : i.remove(e);
                var i = n.className,
                    s = i.baseVal != null,
                    o = s ? i.baseVal : i;
                r ? (t.lastIndex = 0, t.test(o) || (o = h(o + " " + e), s ? i.baseVal = o : n.className = o)) : o && (o = h(o.replace(t, " ")), s ? i.baseVal = o : n.className = o)
            }
        }

        function mt(e, t, n) {
            function r() {
                this.style.removeProperty(e)
            }

            function i() {
                this.style.setProperty(e, t, n)
            }

            function s() {
                var r = t.apply(this, arguments);
                r == null ? this.style.removeProperty(e) : this.style.setProperty(e, r, n)
            }
            return t == null ? r : typeof t == "function" ? s : i
        }

        function gt(e, t) {
            function n() {
                delete this[e]
            }

            function r() {
                this[e] = t
            }

            function i() {
                var n = t.apply(this, arguments);
                n == null ? delete this[e] : this[e] = n
            }
            return t == null ? n : typeof t == "function" ? i : r
        }

        function yt(e) {
            return {
                __data__: e
            }
        }

        function bt(e) {
            return function() {
                return Cs(this, e)
            }
        }

        function wt(e) {
            return arguments.length || (e = d3.ascending),
                function(t, n) {
                    return e(t && t.__data__, n && n.__data__)
                }
        }

        function Et(e, t, n) {
            function r() {
                var t = this[s];
                t && (this.removeEventListener(e, t, t.$), delete this[s])
            }

            function i() {
                function i(e) {
                    var n = d3.event;
                    d3.event = e, u[0] = o.__data__;
                    try {
                        t.apply(o, u)
                    } finally {
                        d3.event = n
                    }
                }
                var o = this,
                    u = arguments;
                r.call(this), this.addEventListener(e, this[s] = i, i.$ = n), i._ = t
            }
            var s = "__on" + e,
                o = e.indexOf(".");
            return o > 0 && (e = e.substring(0, o)), t ? i : r
        }

        function St(e, t) {
            for (var n = 0, r = e.length; n < r; n++)
                for (var i = e[n], s = 0, o = i.length, u; s < o; s++)(u = i[s]) && t(u, s, n);
            return e
        }

        function xt(e) {
            return Qi(e, As), e
        }

        function Tt(e, t, n) {
            Qi(e, Os);
            var i = new r,
                s = d3.dispatch("start", "end"),
                o = Fs;
            return e.id = t, e.time = n, e.tween = function(t, n) {
                return arguments.length < 2 ? i.get(t) : (n == null ? i.remove(t) : i.set(t, n), e)
            }, e.ease = function(t) {
                return arguments.length ? (o = typeof t == "function" ? t : d3.ease.apply(d3, arguments), e) : o
            }, e.each = function(t, n) {
                return arguments.length < 2 ? Nt.call(e, t) : (s.on(t, n), e)
            }, d3.timer(function(r) {
                return St(e, function(e, u, a) {
                    function f(r) {
                        return v.active > t ? c() : (v.active = t, i.forEach(function(t, n) {
                            (n = n.call(e, m, u)) && h.push(n)
                        }), s.start.call(e, m, u), l(r) || d3.timer(l, 0, n), 1)
                    }

                    function l(n) {
                        if (v.active !== t) return c();
                        var r = (n - p) / d,
                            i = o(r),
                            a = h.length;
                        while (a > 0) h[--a].call(e, i);
                        if (r >= 1) return c(), _s = t, s.end.call(e, m, u), _s = 0, 1
                    }

                    function c() {
                        return --v.count || delete e.__transition__, 1
                    }
                    var h = [],
                        p = e.delay,
                        d = e.duration,
                        v = (e = e.node).__transition__ || (e.__transition__ = {
                            active: 0,
                            count: 0
                        }),
                        m = e.__data__;
                    ++v.count, p <= r ? f(r) : d3.timer(f, p, n)
                })
            }, 0, n), e
        }

        function Nt(e) {
            var t = _s,
                n = Fs,
                r = Bs,
                i = js;
            return _s = this.id, Fs = this.ease(), St(this, function(t, n, r) {
                Bs = t.delay, js = t.duration, e.call(t = t.node, t.__data__, n, r)
            }), _s = t, Fs = n, Bs = r, js = i, this
        }

        function Ct(e, t, n) {
            return n != "" && Is
        }

        function kt(e, t) {
            return d3.tween(e, F(t))
        }

        function Lt() {
            var e, t = Date.now(),
                n = Us;
            while (n) e = t - n.then, e >= n.delay && (n.flush = n.callback(e)), n = n.next;
            var r = At() - t;
            r > 24 ? (isFinite(r) && (clearTimeout(Ws), Ws = setTimeout(Lt, r)), zs = 0) : (zs = 1, Xs(Lt))
        }

        function At() {
            var e = null,
                t = Us,
                n = Infinity;
            while (t) t.flush ? (delete Rs[t.callback.id], t = e ? e.next = t.next : Us = t.next) : (n = Math.min(n, t.then + t.delay), t = (e = t).next);
            return n
        }

        function Ot(e, t) {
            var n = e.ownerSVGElement || e;
            if (n.createSVGPoint) {
                var r = n.createSVGPoint();
                if (Vs < 0 && (window.scrollX || window.scrollY)) {
                    n = d3.select(document.body).append("svg").style("position", "absolute").style("top", 0).style("left", 0);
                    var i = n[0][0].getScreenCTM();
                    Vs = !i.f && !i.e, n.remove()
                }
                return Vs ? (r.x = t.pageX, r.y = t.pageY) : (r.x = t.clientX, r.y = t.clientY), r = r.matrixTransform(e.getScreenCTM().inverse()), [r.x, r.y]
            }
            var s = e.getBoundingClientRect();
            return [t.clientX - s.left - e.clientLeft, t.clientY - s.top - e.clientTop]
        }

        function Mt() {}

        function _t(e) {
            var t = e[0],
                n = e[e.length - 1];
            return t < n ? [t, n] : [n, t]
        }

        function Dt(e) {
            return e.rangeExtent ? e.rangeExtent() : _t(e.range())
        }

        function Pt(e, t) {
            var n = 0,
                r = e.length - 1,
                i = e[n],
                s = e[r],
                o;
            s < i && (o = n, n = r, r = o, o = i, i = s, s = o);
            if (t = t(s - i)) e[n] = t.floor(i), e[r] = t.ceil(s);
            return e
        }

        function Ht() {
            return Math
        }

        function Bt(e, t, n, r) {
            function i() {
                var i = Math.min(e.length, t.length) > 2 ? zt : Ut,
                    a = r ? q : I;
                return o = i(e, t, a, n), u = i(t, e, a, d3.interpolate), s
            }

            function s(e) {
                return o(e)
            }
            var o, u;
            return s.invert = function(e) {
                return u(e)
            }, s.domain = function(t) {
                return arguments.length ? (e = t.map(Number), i()) : e
            }, s.range = function(e) {
                return arguments.length ? (t = e, i()) : t
            }, s.rangeRound = function(e) {
                return s.range(e).interpolate(d3.interpolateRound)
            }, s.clamp = function(e) {
                return arguments.length ? (r = e, i()) : r
            }, s.interpolate = function(e) {
                return arguments.length ? (n = e, i()) : n
            }, s.ticks = function(t) {
                return qt(e, t)
            }, s.tickFormat = function(t) {
                return Rt(e, t)
            }, s.nice = function() {
                return Pt(e, Ft), i()
            }, s.copy = function() {
                return Bt(e, t, n, r)
            }, i()
        }

        function jt(e, t) {
            return d3.rebind(e, t, "range", "rangeRound", "interpolate", "clamp")
        }

        function Ft(e) {
            return e = Math.pow(10, Math.round(Math.log(e) / Math.LN10) - 1), e && {
                floor: function(t) {
                    return Math.floor(t / e) * e
                },
                ceil: function(t) {
                    return Math.ceil(t / e) * e
                }
            }
        }

        function It(e, t) {
            var n = _t(e),
                r = n[1] - n[0],
                i = Math.pow(10, Math.floor(Math.log(r / t) / Math.LN10)),
                s = t / r * i;
            return s <= .15 ? i *= 10 : s <= .35 ? i *= 5 : s <= .75 && (i *= 2), n[0] = Math.ceil(n[0] / i) * i, n[1] = Math.floor(n[1] / i) * i + i * .5, n[2] = i, n
        }

        function qt(e, t) {
            return d3.range.apply(d3, It(e, t))
        }

        function Rt(e, t) {
            return d3.format(",." + Math.max(0, -Math.floor(Math.log(It(e, t)[2]) / Math.LN10 + .01)) + "f")
        }

        function Ut(e, t, n, r) {
            var i = n(e[0], e[1]),
                s = r(t[0], t[1]);
            return function(e) {
                return s(i(e))
            }
        }

        function zt(e, t, n, r) {
            var i = [],
                s = [],
                o = 0,
                u = Math.min(e.length, t.length) - 1;
            e[u] < e[0] && (e = e.slice().reverse(), t = t.slice().reverse());
            while (++o <= u) i.push(n(e[o - 1], e[o])), s.push(r(t[o - 1], t[o]));
            return function(t) {
                var n = d3.bisect(e, t, 1, u) - 1;
                return s[n](i[n](t))
            }
        }

        function Wt(e, t) {
            function n(n) {
                return e(t(n))
            }
            var r = t.pow;
            return n.invert = function(t) {
                return r(e.invert(t))
            }, n.domain = function(i) {
                return arguments.length ? (t = i[0] < 0 ? Vt : Xt, r = t.pow, e.domain(i.map(t)), n) : e.domain().map(r)
            }, n.nice = function() {
                return e.domain(Pt(e.domain(), Ht)), n
            }, n.ticks = function() {
                var n = _t(e.domain()),
                    i = [];
                if (n.every(isFinite)) {
                    var s = Math.floor(n[0]),
                        o = Math.ceil(n[1]),
                        u = r(n[0]),
                        a = r(n[1]);
                    if (t === Vt) {
                        i.push(r(s));
                        for (; s++ < o;)
                            for (var f = 9; f > 0; f--) i.push(r(s) * f)
                    } else {
                        for (; s < o; s++)
                            for (var f = 1; f < 10; f++) i.push(r(s) * f);
                        i.push(r(s))
                    }
                    for (s = 0; i[s] < u; s++);
                    for (o = i.length; i[o - 1] > a; o--);
                    i = i.slice(s, o)
                }
                return i
            }, n.tickFormat = function(e, i) {
                arguments.length < 2 && (i = $s);
                if (arguments.length < 1) return i;
                var s = Math.max(.1, e / n.ticks().length),
                    o = t === Vt ? (u = -1e-12, Math.floor) : (u = 1e-12, Math.ceil),
                    u;
                return function(e) {
                    return e / r(o(t(e) + u)) <= s ? i(e) : ""
                }
            }, n.copy = function() {
                return Wt(e.copy(), t)
            }, jt(n, e)
        }

        function Xt(e) {
            return Math.log(e < 0 ? 0 : e) / Math.LN10
        }

        function Vt(e) {
            return -Math.log(e > 0 ? 0 : -e) / Math.LN10
        }

        function $t(e, t) {
            function n(t) {
                return e(r(t))
            }
            var r = Jt(t),
                i = Jt(1 / t);
            return n.invert = function(t) {
                return i(e.invert(t))
            }, n.domain = function(t) {
                return arguments.length ? (e.domain(t.map(r)), n) : e.domain().map(i)
            }, n.ticks = function(e) {
                return qt(n.domain(), e)
            }, n.tickFormat = function(e) {
                return Rt(n.domain(), e)
            }, n.nice = function() {
                return n.domain(Pt(n.domain(), Ft))
            }, n.exponent = function(e) {
                if (!arguments.length) return t;
                var s = n.domain();
                return r = Jt(t = e), i = Jt(1 / t), n.domain(s)
            }, n.copy = function() {
                return $t(e.copy(), t)
            }, jt(n, e)
        }

        function Jt(e) {
            return function(t) {
                return t < 0 ? -Math.pow(-t, e) : Math.pow(t, e)
            }
        }

        function Kt(e, t) {
            function n(t) {
                return o[((s.get(t) || s.set(t, e.push(t))) - 1) % o.length]
            }

            function i(t, n) {
                return d3.range(e.length).map(function(e) {
                    return t + n * e
                })
            }
            var s, o, u;
            return n.domain = function(i) {
                if (!arguments.length) return e;
                e = [], s = new r;
                var o = -1,
                    u = i.length,
                    a;
                while (++o < u) s.has(a = i[o]) || s.set(a, e.push(a));
                return n[t.t].apply(n, t.a)
            }, n.range = function(e) {
                return arguments.length ? (o = e, u = 0, t = {
                    t: "range",
                    a: arguments
                }, n) : o
            }, n.rangePoints = function(r, s) {
                arguments.length < 2 && (s = 0);
                var a = r[0],
                    f = r[1],
                    l = (f - a) / (Math.max(1, e.length - 1) + s);
                return o = i(e.length < 2 ? (a + f) / 2 : a + l * s / 2, l), u = 0, t = {
                    t: "rangePoints",
                    a: arguments
                }, n
            }, n.rangeBands = function(r, s, a) {
                arguments.length < 2 && (s = 0), arguments.length < 3 && (a = s);
                var f = r[1] < r[0],
                    l = r[f - 0],
                    c = r[1 - f],
                    h = (c - l) / (e.length - s + 2 * a);
                return o = i(l + h * a, h), f && o.reverse(), u = h * (1 - s), t = {
                    t: "rangeBands",
                    a: arguments
                }, n
            }, n.rangeRoundBands = function(r, s, a) {
                arguments.length < 2 && (s = 0), arguments.length < 3 && (a = s);
                var f = r[1] < r[0],
                    l = r[f - 0],
                    c = r[1 - f],
                    h = Math.floor((c - l) / (e.length - s + 2 * a)),
                    p = c - l - (e.length - s) * h;
                return o = i(l + Math.round(p / 2), h), f && o.reverse(), u = Math.round(h * (1 - s)), t = {
                    t: "rangeRoundBands",
                    a: arguments
                }, n
            }, n.rangeBand = function() {
                return u
            }, n.rangeExtent = function() {
                return _t(t.a[0])
            }, n.copy = function() {
                return Kt(e, t)
            }, n.domain(e)
        }

        function Qt(e, t) {
            function n() {
                var n = 0,
                    s = e.length,
                    o = t.length;
                i = [];
                while (++n < o) i[n - 1] = d3.quantile(e, n / o);
                return r
            }

            function r(e) {
                return isNaN(e = +e) ? NaN : t[d3.bisect(i, e)]
            }
            var i;
            return r.domain = function(t) {
                return arguments.length ? (e = t.filter(function(e) {
                    return !isNaN(e)
                }).sort(d3.ascending), n()) : e
            }, r.range = function(e) {
                return arguments.length ? (t = e, n()) : t
            }, r.quantiles = function() {
                return i
            }, r.copy = function() {
                return Qt(e, t)
            }, n()
        }

        function Gt(e, t, n) {
            function r(t) {
                return n[Math.max(0, Math.min(o, Math.floor(s * (t - e))))]
            }

            function i() {
                return s = n.length / (t - e), o = n.length - 1, r
            }
            var s, o;
            return r.domain = function(n) {
                return arguments.length ? (e = +n[0], t = +n[n.length - 1], i()) : [e, t]
            }, r.range = function(e) {
                return arguments.length ? (n = e, i()) : n
            }, r.copy = function() {
                return Gt(e, t, n)
            }, i()
        }

        function Yt(e, t) {
            function n(n) {
                return t[d3.bisect(e, n)]
            }
            return n.domain = function(t) {
                return arguments.length ? (e = t, n) : e
            }, n.range = function(e) {
                return arguments.length ? (t = e, n) : t
            }, n.copy = function() {
                return Yt(e, t)
            }, n
        }

        function Zt(e) {
            function t(e) {
                return +e
            }
            return t.invert = t, t.domain = t.range = function(n) {
                return arguments.length ? (e = n.map(t), t) : e
            }, t.ticks = function(t) {
                return qt(e, t)
            }, t.tickFormat = function(t) {
                return Rt(e, t)
            }, t.copy = function() {
                return Zt(e)
            }, t
        }

        function en(e) {
            return e.innerRadius
        }

        function tn(e) {
            return e.outerRadius
        }

        function nn(e) {
            return e.startAngle
        }

        function rn(e) {
            return e.endAngle
        }

        function sn(e) {
            function t(t) {
                function o() {
                    a.push("M", s(e(l), f))
                }
                var a = [],
                    l = [],
                    c = -1,
                    h = t.length,
                    p, d = u(n),
                    v = u(r);
                while (++c < h) i.call(this, p = t[c], c) ? l.push([+d.call(this, p, c), +v.call(this, p, c)]) : l.length && (o(), l = []);
                return l.length && o(), a.length ? a.join("") : null
            }
            var n = on,
                r = un,
                i = o,
                s = an,
                a = s.key,
                f = .7;
            return t.x = function(e) {
                return arguments.length ? (n = e, t) : n
            }, t.y = function(e) {
                return arguments.length ? (r = e, t) : r
            }, t.defined = function(e) {
                return arguments.length ? (i = e, t) : i
            }, t.interpolate = function(e) {
                return arguments.length ? (typeof e == "function" ? a = s = e : a = (s = eo.get(e) || an).key, t) : a
            }, t.tension = function(e) {
                return arguments.length ? (f = e, t) : f
            }, t
        }

        function on(e) {
            return e[0]
        }

        function un(e) {
            return e[1]
        }

        function an(e) {
            return e.join("L")
        }

        function fn(e) {
            return an(e) + "Z"
        }

        function ln(e) {
            var t = 0,
                n = e.length,
                r = e[0],
                i = [r[0], ",", r[1]];
            while (++t < n) i.push("V", (r = e[t])[1], "H", r[0]);
            return i.join("")
        }

        function cn(e) {
            var t = 0,
                n = e.length,
                r = e[0],
                i = [r[0], ",", r[1]];
            while (++t < n) i.push("H", (r = e[t])[0], "V", r[1]);
            return i.join("")
        }

        function hn(e, t) {
            return e.length < 4 ? an(e) : e[1] + vn(e.slice(1, e.length - 1), mn(e, t))
        }

        function pn(e, t) {
            return e.length < 3 ? an(e) : e[0] + vn((e.push(e[0]), e), mn([e[e.length - 2]].concat(e, [e[1]]), t))
        }

        function dn(e, t, n) {
            return e.length < 3 ? an(e) : e[0] + vn(e, mn(e, t))
        }

        function vn(e, t) {
            if (t.length < 1 || e.length != t.length && e.length != t.length + 2) return an(e);
            var n = e.length != t.length,
                r = "",
                i = e[0],
                s = e[1],
                o = t[0],
                u = o,
                a = 1;
            n && (r += "Q" + (s[0] - o[0] * 2 / 3) + "," + (s[1] - o[1] * 2 / 3) + "," + s[0] + "," + s[1], i = e[1], a = 2);
            if (t.length > 1) {
                u = t[1], s = e[a], a++, r += "C" + (i[0] + o[0]) + "," + (i[1] + o[1]) + "," + (s[0] - u[0]) + "," + (s[1] - u[1]) + "," + s[0] + "," + s[1];
                for (var f = 2; f < t.length; f++, a++) s = e[a], u = t[f], r += "S" + (s[0] - u[0]) + "," + (s[1] - u[1]) + "," + s[0] + "," + s[1]
            }
            if (n) {
                var l = e[a];
                r += "Q" + (s[0] + u[0] * 2 / 3) + "," + (s[1] + u[1] * 2 / 3) + "," + l[0] + "," + l[1]
            }
            return r
        }

        function mn(e, t) {
            var n = [],
                r = (1 - t) / 2,
                i, s = e[0],
                o = e[1],
                u = 1,
                a = e.length;
            while (++u < a) i = s, s = o, o = e[u], n.push([r * (o[0] - i[0]), r * (o[1] - i[1])]);
            return n
        }

        function gn(e) {
            if (e.length < 3) return an(e);
            var t = 1,
                n = e.length,
                r = e[0],
                i = r[0],
                s = r[1],
                o = [i, i, i, (r = e[1])[0]],
                u = [s, s, s, r[1]],
                a = [i, ",", s];
            Sn(a, o, u);
            while (++t < n) r = e[t], o.shift(), o.push(r[0]), u.shift(), u.push(r[1]), Sn(a, o, u);
            t = -1;
            while (++t < 2) o.shift(), o.push(r[0]), u.shift(), u.push(r[1]), Sn(a, o, u);
            return a.join("")
        }

        function yn(e) {
            if (e.length < 4) return an(e);
            var t = [],
                n = -1,
                r = e.length,
                i, s = [0],
                o = [0];
            while (++n < 3) i = e[n], s.push(i[0]), o.push(i[1]);
            t.push(En(ro, s) + "," + En(ro, o)), --n;
            while (++n < r) i = e[n], s.shift(), s.push(i[0]), o.shift(), o.push(i[1]), Sn(t, s, o);
            return t.join("")
        }

        function bn(e) {
            var t, n = -1,
                r = e.length,
                i = r + 4,
                s, o = [],
                u = [];
            while (++n < 4) s = e[n % r], o.push(s[0]), u.push(s[1]);
            t = [En(ro, o), ",", En(ro, u)], --n;
            while (++n < i) s = e[n % r], o.shift(), o.push(s[0]), u.shift(), u.push(s[1]), Sn(t, o, u);
            return t.join("")
        }

        function wn(e, t) {
            var n = e.length - 1;
            if (n) {
                var r = e[0][0],
                    i = e[0][1],
                    s = e[n][0] - r,
                    o = e[n][1] - i,
                    u = -1,
                    a, f;
                while (++u <= n) a = e[u], f = u / n, a[0] = t * a[0] + (1 - t) * (r + f * s), a[1] = t * a[1] + (1 - t) * (i + f * o)
            }
            return gn(e)
        }

        function En(e, t) {
            return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] + e[3] * t[3]
        }

        function Sn(e, t, n) {
            e.push("C", En(to, t), ",", En(to, n), ",", En(no, t), ",", En(no, n), ",", En(ro, t), ",", En(ro, n))
        }

        function xn(e, t) {
            return (t[1] - e[1]) / (t[0] - e[0])
        }

        function Tn(e) {
            var t = 0,
                n = e.length - 1,
                r = [],
                i = e[0],
                s = e[1],
                o = r[0] = xn(i, s);
            while (++t < n) r[t] = (o + (o = xn(i = s, s = e[t + 1]))) / 2;
            return r[t] = o, r
        }

        function Nn(e) {
            var t = [],
                n, r, i, s, o = Tn(e),
                u = -1,
                a = e.length - 1;
            while (++u < a) n = xn(e[u], e[u + 1]), Math.abs(n) < 1e-6 ? o[u] = o[u + 1] = 0 : (r = o[u] / n, i = o[u + 1] / n, s = r * r + i * i, s > 9 && (s = n * 3 / Math.sqrt(s), o[u] = s * r, o[u + 1] = s * i));
            u = -1;
            while (++u <= a) s = (e[Math.min(a, u + 1)][0] - e[Math.max(0, u - 1)][0]) / (6 * (1 + o[u] * o[u])), t.push([s || 0, o[u] * s || 0]);
            return t
        }

        function Cn(e) {
            return e.length < 3 ? an(e) : e[0] + vn(e, Nn(e))
        }

        function kn(e) {
            var t, n = -1,
                r = e.length,
                i, s;
            while (++n < r) t = e[n], i = t[0], s = t[1] + Ys, t[0] = i * Math.cos(s), t[1] = i * Math.sin(s);
            return e
        }

        function Ln(e) {
            function t(t) {
                function o() {
                    l.push("M", f(e(v), p), h, c(e(d.reverse()), p), "Z")
                }
                var l = [],
                    d = [],
                    v = [],
                    m = -1,
                    g = t.length,
                    y, b = u(n),
                    w = u(i),
                    E = n === r ? function() {
                        return x
                    } : u(r),
                    S = i === s ? function() {
                        return T
                    } : u(s),
                    x, T;
                while (++m < g) a.call(this, y = t[m], m) ? (d.push([x = +b.call(this, y, m), T = +w.call(this, y, m)]), v.push([+E.call(this, y, m), +S.call(this, y, m)])) : d.length && (o(), d = [], v = []);
                return d.length && o(), l.length ? l.join("") : null
            }
            var n = on,
                r = on,
                i = 0,
                s = un,
                a = o,
                f = an,
                l = f.key,
                c = f,
                h = "L",
                p = .7;
            return t.x = function(e) {
                return arguments.length ? (n = r = e, t) : r
            }, t.x0 = function(e) {
                return arguments.length ? (n = e, t) : n
            }, t.x1 = function(e) {
                return arguments.length ? (r = e, t) : r
            }, t.y = function(e) {
                return arguments.length ? (i = s = e, t) : s
            }, t.y0 = function(e) {
                return arguments.length ? (i = e, t) : i
            }, t.y1 = function(e) {
                return arguments.length ? (s = e, t) : s
            }, t.defined = function(e) {
                return arguments.length ? (a = e, t) : a
            }, t.interpolate = function(e) {
                return arguments.length ? (typeof e == "function" ? l = f = e : l = (f = eo.get(e) || an).key, c = f.reverse || f, h = f.closed ? "M" : "L", t) : l
            }, t.tension = function(e) {
                return arguments.length ? (p = e, t) : p
            }, t
        }

        function An(e) {
            return e.source
        }

        function On(e) {
            return e.target
        }

        function Mn(e) {
            return e.radius
        }

        function _n(e) {
            return e.startAngle
        }

        function Dn(e) {
            return e.endAngle
        }

        function Pn(e) {
            return [e.x, e.y]
        }

        function Hn(e) {
            return function() {
                var t = e.apply(this, arguments),
                    n = t[0],
                    r = t[1] + Ys;
                return [n * Math.cos(r), n * Math.sin(r)]
            }
        }

        function Bn() {
            return 64
        }

        function jn() {
            return "circle"
        }

        function Fn(e) {
            var t = Math.sqrt(e / Math.PI);
            return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z"
        }

        function In(e, t) {
            e.attr("transform", function(e) {
                return "translate(" + t(e) + ",0)"
            })
        }

        function qn(e, t) {
            e.attr("transform", function(e) {
                return "translate(0," + t(e) + ")"
            })
        }

        function Rn(e, t, n) {
            i = [];
            if (n && t.length > 1) {
                var r = _t(e.domain()),
                    i, s = -1,
                    o = t.length,
                    u = (t[1] - t[0]) / ++n,
                    a, f;
                while (++s < o)
                    for (a = n; --a > 0;)(f = +t[s] - a * u) >= r[0] && i.push(f);
                for (--s, a = 0; ++a < n && (f = +t[s] + a * u) < r[1];) i.push(f)
            }
            return i
        }

        function Un() {
            fo || (fo = d3.select("body").append("div").style("visibility", "hidden").style("top", 0).style("height", 0).style("width", 0).style("overflow-y", "scroll").append("div").style("height", "2000px").node().parentNode);
            var e = d3.event,
                t;
            try {
                fo.scrollTop = 1e3, fo.dispatchEvent(e), t = 1e3 - fo.scrollTop
            } catch (n) {
                t = e.wheelDelta || -e.detail * 5
            }
            return t
        }

        function zn(e) {
            var t = e.source,
                n = e.target,
                r = Xn(t, n),
                i = [t];
            while (t !== r) t = t.parent, i.push(t);
            var s = i.length;
            while (n !== r) i.splice(s, 0, n), n = n.parent;
            return i
        }

        function Wn(e) {
            var t = [],
                n = e.parent;
            while (n != null) t.push(e), e = n, n = n.parent;
            return t.push(e), t
        }

        function Xn(e, t) {
            if (e === t) return e;
            var n = Wn(e),
                r = Wn(t),
                i = n.pop(),
                s = r.pop(),
                o = null;
            while (i === s) o = i, i = n.pop(), s = r.pop();
            return o
        }

        function Vn(e) {
            e.fixed |= 2
        }

        function $n(e) {
            e.fixed &= 1
        }

        function Jn(e) {
            e.fixed |= 4
        }

        function Kn(e) {
            e.fixed &= 3
        }

        function Qn(e, t, n) {
            var r = 0,
                i = 0;
            e.charge = 0;
            if (!e.leaf) {
                var s = e.nodes,
                    o = s.length,
                    u = -1,
                    a;
                while (++u < o) {
                    a = s[u];
                    if (a == null) continue;
                    Qn(a, t, n), e.charge += a.charge, r += a.charge * a.cx, i += a.charge * a.cy
                }
            }
            if (e.point) {
                e.leaf || (e.point.x += Math.random() - .5, e.point.y += Math.random() - .5);
                var f = t * n[e.point.index];
                e.charge += e.pointCharge = f, r += f * e.point.x, i += f * e.point.y
            }
            e.cx = r / e.charge, e.cy = i / e.charge
        }

        function Gn(e) {
            return 20
        }

        function Yn(e) {
            return 1
        }

        function Zn(e) {
            return e.x
        }

        function er(e) {
            return e.y
        }

        function tr(e, t, n) {
            e.y0 = t, e.y = n
        }

        function nr(e) {
            return d3.range(e.length)
        }

        function rr(e) {
            var t = -1,
                n = e[0].length,
                r = [];
            while (++t < n) r[t] = 0;
            return r
        }

        function ir(e) {
            var t = 1,
                n = 0,
                r = e[0][1],
                i, s = e.length;
            for (; t < s; ++t)(i = e[t][1]) > r && (n = t, r = i);
            return n
        }

        function sr(e) {
            return e.reduce(or, 0)
        }

        function or(e, t) {
            return e + t[1]
        }

        function ur(e, t) {
            return ar(e, Math.ceil(Math.log(t.length) / Math.LN2 + 1))
        }

        function ar(e, t) {
            var n = -1,
                r = +e[0],
                i = (e[1] - r) / t,
                s = [];
            while (++n <= t) s[n] = i * n + r;
            return s
        }

        function fr(e) {
            return [d3.min(e), d3.max(e)]
        }

        function lr(e, t) {
            return d3.rebind(e, t, "sort", "children", "value"), e.links = dr, e.nodes = function(t) {
                return vo = !0, (e.nodes = e)(t)
            }, e
        }

        function cr(e) {
            return e.children
        }

        function hr(e) {
            return e.value
        }

        function pr(e, t) {
            return t.value - e.value
        }

        function dr(e) {
            return d3.merge(e.map(function(e) {
                return (e.children || []).map(function(t) {
                    return {
                        source: e,
                        target: t
                    }
                })
            }))
        }

        function vr(e, t) {
            return e.value - t.value
        }

        function mr(e, t) {
            var n = e._pack_next;
            e._pack_next = t, t._pack_prev = e, t._pack_next = n, n._pack_prev = t
        }

        function gr(e, t) {
            e._pack_next = t, t._pack_prev = e
        }

        function yr(e, t) {
            var n = t.x - e.x,
                r = t.y - e.y,
                i = e.r + t.r;
            return i * i - n * n - r * r > .001
        }

        function br(e) {
            function t(e) {
                r = Math.min(e.x - e.r, r), i = Math.max(e.x + e.r, i), s = Math.min(e.y - e.r, s), o = Math.max(e.y + e.r, o)
            }
            if (!(n = e.children) || !(p = n.length)) return;
            var n, r = Infinity,
                i = -Infinity,
                s = Infinity,
                o = -Infinity,
                u, a, f, l, c, h, p;
            n.forEach(wr), u = n[0], u.x = -u.r, u.y = 0, t(u);
            if (p > 1) {
                a = n[1], a.x = a.r, a.y = 0, t(a);
                if (p > 2) {
                    f = n[2], xr(u, a, f), t(f), mr(u, f), u._pack_prev = f, mr(f, a), a = u._pack_next;
                    for (l = 3; l < p; l++) {
                        xr(u, a, f = n[l]);
                        var d = 0,
                            v = 1,
                            m = 1;
                        for (c = a._pack_next; c !== a; c = c._pack_next, v++)
                            if (yr(c, f)) {
                                d = 1;
                                break
                            }
                        if (d == 1)
                            for (h = u._pack_prev; h !== c._pack_prev; h = h._pack_prev, m++)
                                if (yr(h, f)) break;
                        d ? (v < m || v == m && a.r < u.r ? gr(u, a = c) : gr(u = h, a), l--) : (mr(u, f), a = f, t(f))
                    }
                }
            }
            var g = (r + i) / 2,
                y = (s + o) / 2,
                b = 0;
            for (l = 0; l < p; l++) f = n[l], f.x -= g, f.y -= y, b = Math.max(b, f.r + Math.sqrt(f.x * f.x + f.y * f.y));
            e.r = b, n.forEach(Er)
        }

        function wr(e) {
            e._pack_next = e._pack_prev = e
        }

        function Er(e) {
            delete e._pack_next, delete e._pack_prev
        }

        function Sr(e, t, n, r) {
            var i = e.children;
            e.x = t += r * e.x, e.y = n += r * e.y, e.r *= r;
            if (i) {
                var s = -1,
                    o = i.length;
                while (++s < o) Sr(i[s], t, n, r)
            }
        }

        function xr(e, t, n) {
            var r = e.r + n.r,
                i = t.x - e.x,
                s = t.y - e.y;
            if (r && (i || s)) {
                var o = t.r + n.r,
                    u = i * i + s * s;
                o *= o, r *= r;
                var a = .5 + (r - o) / (2 * u),
                    f = Math.sqrt(Math.max(0, 2 * o * (r + u) - (r -= u) * r - o * o)) / (2 * u);
                n.x = e.x + a * i + f * s, n.y = e.y + a * s - f * i
            } else n.x = e.x + r, n.y = e.y
        }

        function Tr(e) {
            return 1 + d3.max(e, function(e) {
                return e.y
            })
        }

        function Nr(e) {
            return e.reduce(function(e, t) {
                return e + t.x
            }, 0) / e.length
        }

        function Cr(e) {
            var t = e.children;
            return t && t.length ? Cr(t[0]) : e
        }

        function kr(e) {
            var t = e.children,
                n;
            return t && (n = t.length) ? kr(t[n - 1]) : e
        }

        function Lr(e, t) {
            return e.parent == t.parent ? 1 : 2
        }

        function Ar(e) {
            var t = e.children;
            return t && t.length ? t[0] : e._tree.thread
        }

        function Or(e) {
            var t = e.children,
                n;
            return t && (n = t.length) ? t[n - 1] : e._tree.thread
        }

        function Mr(e, t) {
            var n = e.children;
            if (n && (i = n.length)) {
                var r, i, s = -1;
                while (++s < i) t(r = Mr(n[s], t), e) > 0 && (e = r)
            }
            return e
        }

        function _r(e, t) {
            return e.x - t.x
        }

        function Dr(e, t) {
            return t.x - e.x
        }

        function Pr(e, t) {
            return e.depth - t.depth
        }

        function Hr(e, t) {
            function n(e, r) {
                var i = e.children;
                if (i && (a = i.length)) {
                    var s, o = null,
                        u = -1,
                        a;
                    while (++u < a) s = i[u], n(s, o), o = s
                }
                t(e, r)
            }
            n(e, null)
        }

        function Br(e) {
            var t = 0,
                n = 0,
                r = e.children,
                i = r.length,
                s;
            while (--i >= 0) s = r[i]._tree, s.prelim += t, s.mod += t, t += s.shift + (n += s.change)
        }

        function jr(e, t, n) {
            e = e._tree, t = t._tree;
            var r = n / (t.number - e.number);
            e.change += r, t.change -= r, t.shift += n, t.prelim += n, t.mod += n
        }

        function Fr(e, t, n) {
            return e._tree.ancestor.parent == t.parent ? e._tree.ancestor : n
        }

        function Ir(e) {
            return {
                x: e.x,
                y: e.y,
                dx: e.dx,
                dy: e.dy
            }
        }

        function qr(e, t) {
            var n = e.x + t[3],
                r = e.y + t[0],
                i = e.dx - t[1] - t[3],
                s = e.dy - t[0] - t[2];
            return i < 0 && (n += i / 2, i = 0), s < 0 && (r += s / 2, s = 0), {
                x: n,
                y: r,
                dx: i,
                dy: s
            }
        }

        function Rr(e, t) {
            function n(e, r) {
                d3.text(e, t, function(e) {
                    r(e && n.parse(e))
                })
            }

            function r(t) {
                return t.map(i).join(e)
            }

            function i(e) {
                return o.test(e) ? '"' + e.replace(/\"/g, '""') + '"' : e
            }
            var s = new RegExp("\r\n|[" + e + "\r\n]", "g"),
                o = new RegExp('["' + e + "\n]"),
                u = e.charCodeAt(0);
            return n.parse = function(e) {
                var t;
                return n.parseRows(e, function(e, n) {
                    if (n) {
                        var r = {},
                            i = -1,
                            s = t.length;
                        while (++i < s) r[t[i]] = e[i];
                        return r
                    }
                    return t = e, null
                })
            }, n.parseRows = function(e, t) {
                function n() {
                    if (s.lastIndex >= e.length) return i;
                    if (l) return l = !1, r;
                    var t = s.lastIndex;
                    if (e.charCodeAt(t) === 34) {
                        var n = t;
                        while (n++ < e.length)
                            if (e.charCodeAt(n) === 34) {
                                if (e.charCodeAt(n + 1) !== 34) break;
                                n++
                            }
                        s.lastIndex = n + 2;
                        var o = e.charCodeAt(n + 1);
                        return o === 13 ? (l = !0, e.charCodeAt(n + 2) === 10 && s.lastIndex++) : o === 10 && (l = !0), e.substring(t + 1, n).replace(/""/g, '"')
                    }
                    var a = s.exec(e);
                    return a ? (l = a[0].charCodeAt(0) !== u, e.substring(t, a.index)) : (s.lastIndex = e.length, e.substring(t))
                }
                var r = {},
                    i = {},
                    o = [],
                    a = 0,
                    f, l;
                s.lastIndex = 0;
                while ((f = n()) !== i) {
                    var c = [];
                    while (f !== r && f !== i) c.push(f), f = n();
                    if (t && !(c = t(c, a++))) continue;
                    o.push(c)
                }
                return o
            }, n.format = function(e) {
                return e.map(r).join("\n")
            }, n
        }

        function Ur(e, t) {
            return function(n) {
                return n && e.hasOwnProperty(n.type) ? e[n.type](n) : t
            }
        }

        function zr(e) {
            return "m0," + e + "a" + e + "," + e + " 0 1,1 0," + -2 * e + "a" + e + "," + e + " 0 1,1 0," + 2 * e + "z"
        }

        function Wr(e, t) {
            go.hasOwnProperty(e.type) && go[e.type](e, t)
        }

        function Xr(e, t) {
            Wr(e.geometry, t)
        }

        function Vr(e, t) {
            for (var n = e.features, r = 0, i = n.length; r < i; r++) Wr(n[r].geometry, t)
        }

        function $r(e, t) {
            for (var n = e.geometries, r = 0, i = n.length; r < i; r++) Wr(n[r], t)
        }

        function Jr(e, t) {
            for (var n = e.coordinates, r = 0, i = n.length; r < i; r++) t.apply(null, n[r])
        }

        function Kr(e, t) {
            for (var n = e.coordinates, r = 0, i = n.length; r < i; r++)
                for (var s = n[r], o = 0, u = s.length; o < u; o++) t.apply(null, s[o])
        }

        function Qr(e, t) {
            for (var n = e.coordinates, r = 0, i = n.length; r < i; r++)
                for (var s = n[r][0], o = 0, u = s.length; o < u; o++) t.apply(null, s[o])
        }

        function Gr(e, t) {
            t.apply(null, e.coordinates)
        }

        function Yr(e, t) {
            for (var n = e.coordinates[0], r = 0, i = n.length; r < i; r++) t.apply(null, n[r])
        }

        function Zr(e) {
            return e.source
        }

        function ei(e) {
            return e.target
        }

        function ti() {
            function e(e) {
                var t = Math.sin(e *= p) * d,
                    n = Math.sin(p - e) * d,
                    r = n * s + t * c,
                    u = n * o + t * h,
                    a = n * i + t * l;
                return [Math.atan2(u, r) / mo, Math.atan2(a, Math.sqrt(r * r + u * u)) / mo]
            }
            var t, n, r, i, s, o, u, a, f, l, c, h, p, d;
            return e.distance = function() {
                return p == null && (d = 1 / Math.sin(p = Math.acos(Math.max(-1, Math.min(1, i * l + r * f * Math.cos(u - t)))))), p
            }, e.source = function(u) {
                var a = Math.cos(t = u[0] * mo),
                    f = Math.sin(t);
                return r = Math.cos(n = u[1] * mo), i = Math.sin(n), s = r * a, o = r * f, p = null, e
            }, e.target = function(t) {
                var n = Math.cos(u = t[0] * mo),
                    r = Math.sin(u);
                return f = Math.cos(a = t[1] * mo), l = Math.sin(a), c = f * n, h = f * r, p = null, e
            }, e
        }

        function ni(e, t) {
            var n = ti().source(e).target(t);
            return n.distance(), n
        }

        function ri(e) {
            var t = 0,
                n = 0;
            for (;;) {
                if (e(t, n)) return [t, n];
                t === 0 ? (t = n + 1, n = 0) : (t -= 1, n += 1)
            }
        }

        function ii(e, t, n, r) {
            var i, s, o, u, a, f, l;
            return i = r[e], s = i[0], o = i[1], i = r[t], u = i[0], a = i[1], i = r[n], f = i[0], l = i[1], (l - o) * (u - s) - (a - o) * (f - s) > 0
        }

        function si(e, t, n) {
            return (n[0] - t[0]) * (e[1] - t[1]) < (n[1] - t[1]) * (e[0] - t[0])
        }

        function oi(e, t, n, r) {
            var i = e[0],
                s = t[0],
                o = n[0],
                u = r[0],
                a = e[1],
                f = t[1],
                l = n[1],
                c = r[1],
                h = i - o,
                p = s - i,
                d = u - o,
                v = a - l,
                m = f - a,
                g = c - l,
                y = (d * v - g * h) / (g * p - d * m);
            return [i + y * p, a + y * m]
        }

        function ui(e, t) {
            var n = {
                    list: e.map(function(e, t) {
                        return {
                            index: t,
                            x: e[0],
                            y: e[1]
                        }
                    }).sort(function(e, t) {
                        return e.y < t.y ? -1 : e.y > t.y ? 1 : e.x < t.x ? -1 : e.x > t.x ? 1 : 0
                    }),
                    bottomSite: null
                },
                r = {
                    list: [],
                    leftEnd: null,
                    rightEnd: null,
                    init: function() {
                        r.leftEnd = r.createHalfEdge(null, "l"), r.rightEnd = r.createHalfEdge(null, "l"), r.leftEnd.r = r.rightEnd, r.rightEnd.l = r.leftEnd, r.list.unshift(r.leftEnd, r.rightEnd)
                    },
                    createHalfEdge: function(e, t) {
                        return {
                            edge: e,
                            side: t,
                            vertex: null,
                            l: null,
                            r: null
                        }
                    },
                    insert: function(e, t) {
                        t.l = e, t.r = e.r, e.r.l = t, e.r = t
                    },
                    leftBound: function(e) {
                        var t = r.leftEnd;
                        do t = t.r; while (t != r.rightEnd && i.rightOf(t, e));
                        return t = t.l, t
                    },
                    del: function(e) {
                        e.l.r = e.r, e.r.l = e.l, e.edge = null
                    },
                    right: function(e) {
                        return e.r
                    },
                    left: function(e) {
                        return e.l
                    },
                    leftRegion: function(e) {
                        return e.edge == null ? n.bottomSite : e.edge.region[e.side]
                    },
                    rightRegion: function(e) {
                        return e.edge == null ? n.bottomSite : e.edge.region[wo[e.side]]
                    }
                },
                i = {
                    bisect: function(e, t) {
                        var n = {
                                region: {
                                    l: e,
                                    r: t
                                },
                                ep: {
                                    l: null,
                                    r: null
                                }
                            },
                            r = t.x - e.x,
                            i = t.y - e.y,
                            s = r > 0 ? r : -r,
                            o = i > 0 ? i : -i;
                        return n.c = e.x * r + e.y * i + (r * r + i * i) * .5, s > o ? (n.a = 1, n.b = i / r, n.c /= r) : (n.b = 1, n.a = r / i, n.c /= i), n
                    },
                    intersect: function(e, t) {
                        var n = e.edge,
                            r = t.edge;
                        if (!n || !r || n.region.r == r.region.r) return null;
                        var i = n.a * r.b - n.b * r.a;
                        if (Math.abs(i) < 1e-10) return null;
                        var s = (n.c * r.b - r.c * n.b) / i,
                            o = (r.c * n.a - n.c * r.a) / i,
                            u = n.region.r,
                            a = r.region.r,
                            f, l;
                        u.y < a.y || u.y == a.y && u.x < a.x ? (f = e, l = n) : (f = t, l = r);
                        var c = s >= l.region.r.x;
                        return c && f.side === "l" || !c && f.side === "r" ? null : {
                            x: s,
                            y: o
                        }
                    },
                    rightOf: function(e, t) {
                        var n = e.edge,
                            r = n.region.r,
                            i = t.x > r.x;
                        if (i && e.side === "l") return 1;
                        if (!i && e.side === "r") return 0;
                        if (n.a === 1) {
                            var s = t.y - r.y,
                                o = t.x - r.x,
                                u = 0,
                                a = 0;
                            !i && n.b < 0 || i && n.b >= 0 ? a = u = s >= n.b * o : (a = t.x + t.y * n.b > n.c, n.b < 0 && (a = !a), a || (u = 1));
                            if (!u) {
                                var f = r.x - n.region.l.x;
                                a = n.b * (o * o - s * s) < f * s * (1 + 2 * o / f + n.b * n.b), n.b < 0 && (a = !a)
                            }
                        } else {
                            var l = n.c - n.a * t.x,
                                c = t.y - l,
                                h = t.x - r.x,
                                p = l - r.y;
                            a = c * c > h * h + p * p
                        }
                        return e.side === "l" ? a : !a
                    },
                    endPoint: function(e, n, r) {
                        e.ep[n] = r;
                        if (!e.ep[wo[n]]) return;
                        t(e)
                    },
                    distance: function(e, t) {
                        var n = e.x - t.x,
                            r = e.y - t.y;
                        return Math.sqrt(n * n + r * r)
                    }
                },
                s = {
                    list: [],
                    insert: function(e, t, n) {
                        e.vertex = t, e.ystar = t.y + n;
                        for (var r = 0, i = s.list, o = i.length; r < o; r++) {
                            var u = i[r];
                            if (e.ystar > u.ystar || e.ystar == u.ystar && t.x > u.vertex.x) continue;
                            break
                        }
                        i.splice(r, 0, e)
                    },
                    del: function(e) {
                        for (var t = 0, n = s.list, r = n.length; t < r && n[t] != e; ++t);
                        n.splice(t, 1)
                    },
                    empty: function() {
                        return s.list.length === 0
                    },
                    nextEvent: function(e) {
                        for (var t = 0, n = s.list, r = n.length; t < r; ++t)
                            if (n[t] == e) return n[t + 1];
                        return null
                    },
                    min: function() {
                        var e = s.list[0];
                        return {
                            x: e.vertex.x,
                            y: e.ystar
                        }
                    },
                    extractMin: function() {
                        return s.list.shift()
                    }
                };
            r.init(), n.bottomSite = n.list.shift();
            var o = n.list.shift(),
                u, a, f, l, c, h, p, d, v, m, g, y, b;
            for (;;) {
                s.empty() || (u = s.min());
                if (o && (s.empty() || o.y < u.y || o.y == u.y && o.x < u.x)) a = r.leftBound(o), f = r.right(a), p = r.rightRegion(a), y = i.bisect(p, o), h = r.createHalfEdge(y, "l"), r.insert(a, h), m = i.intersect(a, h), m && (s.del(a), s.insert(a, m, i.distance(m, o))), a = h, h = r.createHalfEdge(y, "r"), r.insert(a, h), m = i.intersect(h, f), m && s.insert(h, m, i.distance(m, o)), o = n.list.shift();
                else {
                    if (!!s.empty()) break;
                    a = s.extractMin(), l = r.left(a), f = r.right(a), c = r.right(f), p = r.leftRegion(a), d = r.rightRegion(f), g = a.vertex, i.endPoint(a.edge, a.side, g), i.endPoint(f.edge, f.side, g), r.del(a), s.del(f), r.del(f), b = "l", p.y > d.y && (v = p, p = d, d = v, b = "r"), y = i.bisect(p, d), h = r.createHalfEdge(y, b), r.insert(l, h), i.endPoint(y, wo[b], g), m = i.intersect(l, h), m && (s.del(l), s.insert(l, m, i.distance(m, p))), m = i.intersect(h, c), m && s.insert(h, m, i.distance(m, p))
                }
            }
            for (a = r.right(r.leftEnd); a != r.rightEnd; a = r.right(a)) t(a.edge)
        }

        function ai() {
            return {
                leaf: !0,
                nodes: [],
                point: null
            }
        }

        function fi(e, t, n, r, i, s) {
            if (!e(t, n, r, i, s)) {
                var o = (n + i) * .5,
                    u = (r + s) * .5,
                    a = t.nodes;
                a[0] && fi(e, a[0], n, r, o, u), a[1] && fi(e, a[1], o, r, i, u), a[2] && fi(e, a[2], n, u, o, s), a[3] && fi(e, a[3], o, u, i, s)
            }
        }

        function li(e) {
            return {
                x: e[0],
                y: e[1]
            }
        }

        function ci() {
            this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
        }

        function hi(e) {
            return e.substring(0, 3)
        }

        function pi(e, t, n, r) {
            var i, s, o = 0,
                u = t.length,
                a = n.length;
            while (o < u) {
                if (r >= a) return -1;
                i = t.charCodeAt(o++);
                if (i == 37) {
                    s = Uo[t.charAt(o++)];
                    if (!s || (r = s(e, n, r)) < 0) return -1
                } else if (i != n.charCodeAt(r++)) return -1
            }
            return r
        }

        function di(e) {
            return new RegExp("^(?:" + e.map(d3.requote).join("|") + ")", "i")
        }

        function vi(e) {
            var t = new r,
                n = -1,
                i = e.length;
            while (++n < i) t.set(e[n].toLowerCase(), n);
            return t
        }

        function mi(e, t, n) {
            Bo.lastIndex = 0;
            var r = Bo.exec(t.substring(n));
            return r ? n += r[0].length : -1
        }

        function gi(e, t, n) {
            Ho.lastIndex = 0;
            var r = Ho.exec(t.substring(n));
            return r ? n += r[0].length : -1
        }

        function yi(e, t, n) {
            Io.lastIndex = 0;
            var r = Io.exec(t.substring(n));
            return r ? (e.m = qo.get(r[0].toLowerCase()), n += r[0].length) : -1
        }

        function bi(e, t, n) {
            jo.lastIndex = 0;
            var r = jo.exec(t.substring(n));
            return r ? (e.m = Fo.get(r[0].toLowerCase()), n += r[0].length) : -1
        }

        function wi(e, t, n) {
            return pi(e, Ro.c.toString(), t, n)
        }

        function Ei(e, t, n) {
            return pi(e, Ro.x.toString(), t, n)
        }

        function Si(e, t, n) {
            return pi(e, Ro.X.toString(), t, n)
        }

        function xi(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 4));
            return r ? (e.y = +r[0], n += r[0].length) : -1
        }

        function Ti(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.y = Ni(+r[0]), n += r[0].length) : -1
        }

        function Ni(e) {
            return e + (e > 68 ? 1900 : 2e3)
        }

        function Ci(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.m = r[0] - 1, n += r[0].length) : -1
        }

        function ki(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.d = +r[0], n += r[0].length) : -1
        }

        function Li(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.H = +r[0], n += r[0].length) : -1
        }

        function Ai(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.M = +r[0], n += r[0].length) : -1
        }

        function Oi(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 2));
            return r ? (e.S = +r[0], n += r[0].length) : -1
        }

        function Mi(e, t, n) {
            zo.lastIndex = 0;
            var r = zo.exec(t.substring(n, n + 3));
            return r ? (e.L = +r[0], n += r[0].length) : -1
        }

        function _i(e, t, n) {
            var r = Wo.get(t.substring(n, n += 2).toLowerCase());
            return r == null ? -1 : (e.p = r, n)
        }

        function Di(e) {
            var t = e.getTimezoneOffset(),
                n = t > 0 ? "-" : "+",
                r = ~~(Math.abs(t) / 60),
                i = Math.abs(t) % 60;
            return n + Mo(r) + Mo(i)
        }

        function Pi(e) {
            return e.toISOString()
        }

        function Hi(e, t, n) {
            function r(t) {
                var n = e(t),
                    r = s(n, 1);
                return t - n < r - t ? n : r
            }

            function i(n) {
                return t(n = e(new Eo(n - 1)), 1), n
            }

            function s(e, n) {
                return t(e = new Eo(+e), n), e
            }

            function o(e, r, s) {
                var o = i(e),
                    u = [];
                if (s > 1)
                    while (o < r) n(o) % s || u.push(new Date(+o)), t(o, 1);
                else
                    while (o < r) u.push(new Date(+o)), t(o, 1);
                return u
            }

            function u(e, t, n) {
                try {
                    Eo = ci;
                    var r = new ci;
                    return r._ = e, o(r, t, n)
                } finally {
                    Eo = Date
                }
            }
            e.floor = e, e.round = r, e.ceil = i, e.offset = s, e.range = o;
            var a = e.utc = Bi(e);
            return a.floor = a, a.round = Bi(r), a.ceil = Bi(i), a.offset = Bi(s), a.range = u, e
        }

        function Bi(e) {
            return function(t, n) {
                try {
                    Eo = ci;
                    var r = new ci;
                    return r._ = t, e(r, n)._
                } finally {
                    Eo = Date
                }
            }
        }

        function ji(e, t, n) {
            function r(t) {
                return e(t)
            }
            return r.invert = function(t) {
                return Ii(e.invert(t))
            }, r.domain = function(t) {
                return arguments.length ? (e.domain(t), r) : e.domain().map(Ii)
            }, r.nice = function(e) {
                return r.domain(Pt(r.domain(), function() {
                    return e
                }))
            }, r.ticks = function(n, i) {
                var s = Fi(r.domain());
                if (typeof n != "function") {
                    var o = s[1] - s[0],
                        u = o / n,
                        a = d3.bisect(Vo, u);
                    if (a == Vo.length) return t.year(s, n);
                    if (!a) return e.ticks(n).map(Ii);
                    Math.log(u / Vo[a - 1]) < Math.log(Vo[a] / u) && --a, n = t[a], i = n[1], n = n[0].range
                }
                return n(s[0], new Date(+s[1] + 1), i)
            }, r.tickFormat = function() {
                return n
            }, r.copy = function() {
                return ji(e.copy(), t, n)
            }, d3.rebind(r, e, "range", "rangeRound", "interpolate", "clamp")
        }

        function Fi(e) {
            var t = e[0],
                n = e[e.length - 1];
            return t < n ? [t, n] : [n, t]
        }

        function Ii(e) {
            return new Date(e)
        }

        function qi(e) {
            return function(t) {
                var n = e.length - 1,
                    r = e[n];
                while (!r[1](t)) r = e[--n];
                return r[0](t)
            }
        }

        function Ri(e) {
            var t = new Date(e, 0, 1);
            return t.setFullYear(e), t
        }

        function Ui(e) {
            var t = e.getFullYear(),
                n = Ri(t),
                r = Ri(t + 1);
            return t + (e - n) / (r - n)
        }

        function zi(e) {
            var t = new Date(Date.UTC(e, 0, 1));
            return t.setUTCFullYear(e), t
        }

        function Wi(e) {
            var t = e.getUTCFullYear(),
                n = zi(t),
                r = zi(t + 1);
            return t + (e - n) / (r - n)
        }
        Date.now || (Date.now = function() {
            return +(new Date)
        });
        try {
            document.createElement("div").style.setProperty("opacity", 0, "")
        } catch (Xi) {
            var Vi = CSSStyleDeclaration.prototype,
                $i = Vi.setProperty;
            Vi.setProperty = function(e, t, n) {
                $i.call(this, e, t + "", n)
            }
        }
        d3 = {
            version: "2.10.3"
        };
        var Ji = n;
        try {
            Ji(document.documentElement.childNodes)[0].nodeType
        } catch (Ki) {
            Ji = t
        }
        var Qi = [].__proto__ ? function(e, t) {
            e.__proto__ = t
        } : function(e, t) {
            for (var n in t) e[n] = t[n]
        };
        d3.map = function(e) {
            var t = new r;
            for (var n in e) t.set(n, e[n]);
            return t
        }, e(r, {
            has: function(e) {
                return Gi + e in this
            },
            get: function(e) {
                return this[Gi + e]
            },
            set: function(e, t) {
                return this[Gi + e] = t
            },
            remove: function(e) {
                return e = Gi + e, e in this && delete this[e]
            },
            keys: function() {
                var e = [];
                return this.forEach(function(t) {
                    e.push(t)
                }), e
            },
            values: function() {
                var e = [];
                return this.forEach(function(t, n) {
                    e.push(n)
                }), e
            },
            entries: function() {
                var e = [];
                return this.forEach(function(t, n) {
                    e.push({
                        key: t,
                        value: n
                    })
                }), e
            },
            forEach: function(e) {
                for (var t in this) t.charCodeAt(0) === Yi && e.call(this, t.substring(1), this[t])
            }
        });
        var Gi = "\0",
            Yi = Gi.charCodeAt(0);
        d3.functor = u, d3.rebind = function(e, t) {
            var n = 1,
                r = arguments.length,
                i;
            while (++n < r) e[i = arguments[n]] = a(e, t, t[i]);
            return e
        }, d3.ascending = function(e, t) {
            return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN
        }, d3.descending = function(e, t) {
            return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
        }, d3.mean = function(e, t) {
            var n = e.length,
                r, i = 0,
                s = -1,
                o = 0;
            if (arguments.length === 1)
                while (++s < n) f(r = e[s]) && (i += (r - i) / ++o);
            else
                while (++s < n) f(r = t.call(e, e[s], s)) && (i += (r - i) / ++o);
            return o ? i : undefined
        }, d3.median = function(e, t) {
            return arguments.length > 1 && (e = e.map(t)), e = e.filter(f), e.length ? d3.quantile(e.sort(d3.ascending), .5) : undefined
        }, d3.min = function(e, t) {
            var n = -1,
                r = e.length,
                i, s;
            if (arguments.length === 1) {
                while (++n < r && ((i = e[n]) == null || i != i)) i = undefined;
                while (++n < r)(s = e[n]) != null && i > s && (i = s)
            } else {
                while (++n < r && ((i = t.call(e, e[n], n)) == null || i != i)) i = undefined;
                while (++n < r)(s = t.call(e, e[n], n)) != null && i > s && (i = s)
            }
            return i
        }, d3.max = function(e, t) {
            var n = -1,
                r = e.length,
                i, s;
            if (arguments.length === 1) {
                while (++n < r && ((i = e[n]) == null || i != i)) i = undefined;
                while (++n < r)(s = e[n]) != null && s > i && (i = s)
            } else {
                while (++n < r && ((i = t.call(e, e[n], n)) == null || i != i)) i = undefined;
                while (++n < r)(s = t.call(e, e[n], n)) != null && s > i && (i = s)
            }
            return i
        }, d3.extent = function(e, t) {
            var n = -1,
                r = e.length,
                i, s, o;
            if (arguments.length === 1) {
                while (++n < r && ((i = o = e[n]) == null || i != i)) i = o = undefined;
                while (++n < r)(s = e[n]) != null && (i > s && (i = s), o < s && (o = s))
            } else {
                while (++n < r && ((i = o = t.call(e, e[n], n)) == null || i != i)) i = undefined;
                while (++n < r)(s = t.call(e, e[n], n)) != null && (i > s && (i = s), o < s && (o = s))
            }
            return [i, o]
        }, d3.random = {
            normal: function(e, t) {
                var n = arguments.length;
                return n < 2 && (t = 1), n < 1 && (e = 0),
                    function() {
                        var n, r, i;
                        do n = Math.random() * 2 - 1, r = Math.random() * 2 - 1, i = n * n + r * r; while (!i || i > 1);
                        return e + t * n * Math.sqrt(-2 * Math.log(i) / i)
                    }
            },
            logNormal: function(e, t) {
                var n = arguments.length;
                n < 2 && (t = 1), n < 1 && (e = 0);
                var r = d3.random.normal();
                return function() {
                    return Math.exp(e + t * r())
                }
            },
            irwinHall: function(e) {
                return function() {
                    for (var t = 0, n = 0; n < e; n++) t += Math.random();
                    return t / e
                }
            }
        }, d3.sum = function(e, t) {
            var n = 0,
                r = e.length,
                i, s = -1;
            if (arguments.length === 1)
                while (++s < r) isNaN(i = +e[s]) || (n += i);
            else
                while (++s < r) isNaN(i = +t.call(e, e[s], s)) || (n += i);
            return n
        }, d3.quantile = function(e, t) {
            var n = (e.length - 1) * t + 1,
                r = Math.floor(n),
                i = e[r - 1],
                s = n - r;
            return s ? i + s * (e[r] - i) : i
        }, d3.transpose = function(e) {
            return d3.zip.apply(d3, e)
        }, d3.zip = function() {
            if (!(i = arguments.length)) return [];
            for (var e = -1, t = d3.min(arguments, l), n = new Array(t); ++e < t;)
                for (var r = -1, i, s = n[e] = new Array(i); ++r < i;) s[r] = arguments[r][e];
            return n
        }, d3.bisector = function(e) {
            return {
                left: function(t, n, r, i) {
                    arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length);
                    while (r < i) {
                        var s = r + i >>> 1;
                        e.call(t, t[s], s) < n ? r = s + 1 : i = s
                    }
                    return r
                },
                right: function(t, n, r, i) {
                    arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length);
                    while (r < i) {
                        var s = r + i >>> 1;
                        n < e.call(t, t[s], s) ? i = s : r = s + 1
                    }
                    return r
                }
            }
        };
        var Zi = d3.bisector(function(e) {
            return e
        });
        d3.bisectLeft = Zi.left, d3.bisect = d3.bisectRight = Zi.right, d3.first = function(e, t) {
            var n = 0,
                r = e.length,
                i = e[0],
                s;
            arguments.length === 1 && (t = d3.ascending);
            while (++n < r) t.call(e, i, s = e[n]) > 0 && (i = s);
            return i
        }, d3.last = function(e, t) {
            var n = 0,
                r = e.length,
                i = e[0],
                s;
            arguments.length === 1 && (t = d3.ascending);
            while (++n < r) t.call(e, i, s = e[n]) <= 0 && (i = s);
            return i
        }, d3.nest = function() {
            function e(t, s) {
                if (s >= i.length) return u ? u.call(n, t) : o ? t.sort(o) : t;
                var a = -1,
                    f = t.length,
                    l = i[s++],
                    c, h, p = new r,
                    d, v = {};
                while (++a < f)(d = p.get(c = l(h = t[a]))) ? d.push(h) : p.set(c, [h]);
                return p.forEach(function(t, n) {
                    v[t] = e(n, s)
                }), v
            }

            function t(e, n) {
                if (n >= i.length) return e;
                var r = [],
                    o = s[n++],
                    u;
                for (u in e) r.push({
                    key: u,
                    values: t(e[u], n)
                });
                return o && r.sort(function(e, t) {
                    return o(e.key, t.key)
                }), r
            }
            var n = {},
                i = [],
                s = [],
                o, u;
            return n.map = function(t) {
                return e(t, 0)
            }, n.entries = function(n) {
                return t(e(n, 0), 0)
            }, n.key = function(e) {
                return i.push(e), n
            }, n.sortKeys = function(e) {
                return s[i.length - 1] = e, n
            }, n.sortValues = function(e) {
                return o = e, n
            }, n.rollup = function(e) {
                return u = e, n
            }, n
        }, d3.keys = function(e) {
            var t = [];
            for (var n in e) t.push(n);
            return t
        }, d3.values = function(e) {
            var t = [];
            for (var n in e) t.push(e[n]);
            return t
        }, d3.entries = function(e) {
            var t = [];
            for (var n in e) t.push({
                key: n,
                value: e[n]
            });
            return t
        }, d3.permute = function(e, t) {
            var n = [],
                r = -1,
                i = t.length;
            while (++r < i) n[r] = e[t[r]];
            return n
        }, d3.merge = function(e) {
            return Array.prototype.concat.apply([], e)
        }, d3.split = function(e, t) {
            var n = [],
                r = [],
                i, s = -1,
                o = e.length;
            arguments.length < 2 && (t = c);
            while (++s < o) t.call(r, i = e[s], s) ? r = [] : (r.length || n.push(r), r.push(i));
            return n
        }, d3.range = function(e, t, n) {
            arguments.length < 3 && (n = 1, arguments.length < 2 && (t = e, e = 0));
            if ((t - e) / n === Infinity) throw new Error("infinite range");
            var r = [],
                i = p(Math.abs(n)),
                s = -1,
                o;
            e *= i, t *= i, n *= i;
            if (n < 0)
                while ((o = e + n * ++s) > t) r.push(o / i);
            else
                while ((o = e + n * ++s) < t) r.push(o / i);
            return r
        }, d3.requote = function(e) {
            return e.replace(es, "\\$&")
        };
        var es = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
        d3.round = function(e, t) {
            return t ? Math.round(e * (t = Math.pow(10, t))) / t : Math.round(e)
        }, d3.xhr = function(e, t, n) {
            var r = new XMLHttpRequest;
            arguments.length < 3 ? (n = t, t = null) : t && r.overrideMimeType && r.overrideMimeType(t), r.open("GET", e, !0), t && r.setRequestHeader("Accept", t), r.onreadystatechange = function() {
                if (r.readyState === 4) {
                    var e = r.status;
                    n(!e && r.response || e >= 200 && e < 300 || e === 304 ? r : null)
                }
            }, r.send(null)
        }, d3.text = function(e, t, n) {
            function r(e) {
                n(e && e.responseText)
            }
            arguments.length < 3 && (n = t, t = null), d3.xhr(e, t, r)
        }, d3.json = function(e, t) {
            d3.text(e, "application/json", function(e) {
                t(e ? JSON.parse(e) : null)
            })
        }, d3.html = function(e, t) {
            d3.text(e, "text/html", function(e) {
                if (e != null) {
                    var n = document.createRange();
                    n.selectNode(document.body), e = n.createContextualFragment(e)
                }
                t(e)
            })
        }, d3.xml = function(e, t, n) {
            function r(e) {
                n(e && e.responseXML)
            }
            arguments.length < 3 && (n = t, t = null), d3.xhr(e, t, r)
        };
        var ts = {
            svg: "http://www.w3.org/2000/svg",
            xhtml: "http://www.w3.org/1999/xhtml",
            xlink: "http://www.w3.org/1999/xlink",
            xml: "http://www.w3.org/XML/1998/namespace",
            xmlns: "http://www.w3.org/2000/xmlns/"
        };
        d3.ns = {
            prefix: ts,
            qualify: function(e) {
                var t = e.indexOf(":"),
                    n = e;
                return t >= 0 && (n = e.substring(0, t), e = e.substring(t + 1)), ts.hasOwnProperty(n) ? {
                    space: ts[n],
                    local: e
                } : e
            }
        }, d3.dispatch = function() {
            var e = new d,
                t = -1,
                n = arguments.length;
            while (++t < n) e[arguments[t]] = v(e);
            return e
        }, d.prototype.on = function(e, t) {
            var n = e.indexOf("."),
                r = "";
            return n > 0 && (r = e.substring(n + 1), e = e.substring(0, n)), arguments.length < 2 ? this[e].on(r) : this[e].on(r, t)
        }, d3.format = function(e) {
            var t = ns.exec(e),
                n = t[1] || " ",
                r = t[3] || "",
                i = t[5],
                s = +t[6],
                o = t[7],
                u = t[8],
                a = t[9],
                f = 1,
                l = "",
                c = !1;
            u && (u = +u.substring(1)), i && (n = "0", o && (s -= Math.floor((s - 1) / 4)));
            switch (a) {
                case "n":
                    o = !0, a = "g";
                    break;
                case "%":
                    f = 100, l = "%", a = "f";
                    break;
                case "p":
                    f = 100, l = "%", a = "r";
                    break;
                case "d":
                    c = !0, u = 0;
                    break;
                case "s":
                    f = -1, a = "r"
            }
            return a == "r" && !u && (a = "g"), a = rs.get(a) || g,
                function(e) {
                    if (c && e % 1) return "";
                    var t = e < 0 && (e = -e) ? "-" : r;
                    if (f < 0) {
                        var h = d3.formatPrefix(e, u);
                        e = h.scale(e), l = h.symbol
                    } else e *= f;
                    e = a(e, u);
                    if (i) {
                        var p = e.length + t.length;
                        p < s && (e = (new Array(s - p + 1)).join(n) + e), o && (e = y(e)), e = t + e
                    } else {
                        o && (e = y(e)), e = t + e;
                        var p = e.length;
                        p < s && (e = (new Array(s - p + 1)).join(n) + e)
                    }
                    return e + l
                }
        };
        var ns = /(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,
            rs = d3.map({
                g: function(e, t) {
                    return e.toPrecision(t)
                },
                e: function(e, t) {
                    return e.toExponential(t)
                },
                f: function(e, t) {
                    return e.toFixed(t)
                },
                r: function(e, t) {
                    return d3.round(e, t = m(e, t)).toFixed(Math.max(0, Math.min(20, t)))
                }
            }),
            is = ["y", "z", "a", "f", "p", "n", "Î¼", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(b);
        d3.formatPrefix = function(e, t) {
            var n = 0;
            return e && (e < 0 && (e *= -1), t && (e = d3.round(e, m(e, t))), n = 1 + Math.floor(1e-12 + Math.log(e) / Math.LN10), n = Math.max(-24, Math.min(24, Math.floor((n <= 0 ? n + 1 : n - 1) / 3) * 3))), is[8 + n / 3]
        };
        var ss = T(2),
            os = T(3),
            us = function() {
                return x
            },
            as = d3.map({
                linear: us,
                poly: T,
                quad: function() {
                    return ss
                },
                cubic: function() {
                    return os
                },
                sin: function() {
                    return N
                },
                exp: function() {
                    return C
                },
                circle: function() {
                    return k
                },
                elastic: L,
                back: A,
                bounce: function() {
                    return O
                }
            }),
            fs = d3.map({
                "in": x,
                out: E,
                "in-out": S,
                "out-in": function(e) {
                    return S(E(e))
                }
            });
        d3.ease = function(e) {
            var t = e.indexOf("-"),
                n = t >= 0 ? e.substring(0, t) : e,
                r = t >= 0 ? e.substring(t + 1) : "in";
            return n = as.get(n) || us, r = fs.get(r) || x, w(r(n.apply(null, Array.prototype.slice.call(arguments, 1))))
        }, d3.event = null, d3.transform = function(e) {
            var t = document.createElementNS(d3.ns.prefix.svg, "g");
            return (d3.transform = function(e) {
                t.setAttribute("transform", e);
                var n = t.transform.baseVal.consolidate();
                return new P(n ? n.matrix : cs)
            })(e)
        }, P.prototype.toString = function() {
            return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
        };
        var ls = 180 / Math.PI,
            cs = {
                a: 1,
                b: 0,
                c: 0,
                d: 1,
                e: 0,
                f: 0
            };
        d3.interpolate = function(e, t) {
            var n = d3.interpolators.length,
                r;
            while (--n >= 0 && !(r = d3.interpolators[n](e, t)));
            return r
        }, d3.interpolateNumber = function(e, t) {
            return t -= e,
                function(n) {
                    return e + t * n
                }
        }, d3.interpolateRound = function(e, t) {
            return t -= e,
                function(n) {
                    return Math.round(e + t * n)
                }
        }, d3.interpolateString = function(e, t) {
            var n, r, i, s = 0,
                o = 0,
                u = [],
                a = [],
                f, l;
            hs.lastIndex = 0;
            for (r = 0; n = hs.exec(t); ++r) n.index && u.push(t.substring(s, o = n.index)), a.push({
                i: u.length,
                x: n[0]
            }), u.push(null), s = hs.lastIndex;
            s < t.length && u.push(t.substring(s));
            for (r = 0, f = a.length;
                (n = hs.exec(e)) && r < f; ++r) {
                l = a[r];
                if (l.x == n[0]) {
                    if (l.i)
                        if (u[l.i + 1] == null) {
                            u[l.i - 1] += l.x, u.splice(l.i, 1);
                            for (i = r + 1; i < f; ++i) a[i].i--
                        } else {
                            u[l.i - 1] += l.x + u[l.i + 1], u.splice(l.i, 2);
                            for (i = r + 1; i < f; ++i) a[i].i -= 2
                        } else if (u[l.i + 1] == null) u[l.i] = l.x;
                    else {
                        u[l.i] = l.x + u[l.i + 1], u.splice(l.i + 1, 1);
                        for (i = r + 1; i < f; ++i) a[i].i--
                    }
                    a.splice(r, 1), f--, r--
                } else l.x = d3.interpolateNumber(parseFloat(n[0]), parseFloat(l.x))
            }
            while (r < f) l = a.pop(), u[l.i + 1] == null ? u[l.i] = l.x : (u[l.i] = l.x + u[l.i + 1], u.splice(l.i + 1, 1)), f--;
            return u.length === 1 ? u[0] == null ? a[0].x : function() {
                return t
            } : function(e) {
                for (r = 0; r < f; ++r) u[(l = a[r]).i] = l.x(e);
                return u.join("")
            }
        }, d3.interpolateTransform = function(e, t) {
            var n = [],
                r = [],
                i, s = d3.transform(e),
                o = d3.transform(t),
                u = s.translate,
                a = o.translate,
                f = s.rotate,
                l = o.rotate,
                c = s.skew,
                h = o.skew,
                p = s.scale,
                d = o.scale;
            return u[0] != a[0] || u[1] != a[1] ? (n.push("translate(", null, ",", null, ")"), r.push({
                    i: 1,
                    x: d3.interpolateNumber(u[0], a[0])
                }, {
                    i: 3,
                    x: d3.interpolateNumber(u[1], a[1])
                })) : a[0] || a[1] ? n.push("translate(" + a + ")") : n.push(""), f != l ? (f - l > 180 ? l += 360 : l - f > 180 && (f += 360), r.push({
                    i: n.push(n.pop() + "rotate(", null, ")") - 2,
                    x: d3.interpolateNumber(f, l)
                })) : l && n.push(n.pop() + "rotate(" + l + ")"), c != h ? r.push({
                    i: n.push(n.pop() + "skewX(", null, ")") - 2,
                    x: d3.interpolateNumber(c, h)
                }) : h && n.push(n.pop() + "skewX(" + h + ")"), p[0] != d[0] || p[1] != d[1] ? (i = n.push(n.pop() + "scale(", null, ",", null, ")"), r.push({
                    i: i - 4,
                    x: d3.interpolateNumber(p[0], d[0])
                }, {
                    i: i - 2,
                    x: d3.interpolateNumber(p[1], d[1])
                })) : (d[0] != 1 || d[1] != 1) && n.push(n.pop() + "scale(" + d + ")"), i = r.length,
                function(e) {
                    var t = -1,
                        s;
                    while (++t < i) n[(s = r[t]).i] = s.x(e);
                    return n.join("")
                }
        }, d3.interpolateRgb = function(e, t) {
            e = d3.rgb(e), t = d3.rgb(t);
            var n = e.r,
                r = e.g,
                i = e.b,
                s = t.r - n,
                o = t.g - r,
                u = t.b - i;
            return function(e) {
                return "#" + W(Math.round(n + s * e)) + W(Math.round(r + o * e)) + W(Math.round(i + u * e))
            }
        }, d3.interpolateHsl = function(e, t) {
            e = d3.hsl(e), t = d3.hsl(t);
            var n = e.h,
                r = e.s,
                i = e.l,
                s = t.h - n,
                o = t.s - r,
                u = t.l - i;
            return s > 180 ? s -= 360 : s < -180 && (s += 360),
                function(e) {
                    return Y(n + s * e, r + o * e, i + u * e) + ""
                }
        }, d3.interpolateLab = function(e, t) {
            e = d3.lab(e), t = d3.lab(t);
            var n = e.l,
                r = e.a,
                i = e.b,
                s = t.l - n,
                o = t.a - r,
                u = t.b - i;
            return function(e) {
                return it(n + s * e, r + o * e, i + u * e) + ""
            }
        }, d3.interpolateHcl = function(e, t) {
            e = d3.hcl(e), t = d3.hcl(t);
            var n = e.h,
                r = e.c,
                i = e.l,
                s = t.h - n,
                o = t.c - r,
                u = t.l - i;
            return s > 180 ? s -= 360 : s < -180 && (s += 360),
                function(e) {
                    return tt(n + s * e, r + o * e, i + u * e) + ""
                }
        }, d3.interpolateArray = function(e, t) {
            var n = [],
                r = [],
                i = e.length,
                s = t.length,
                o = Math.min(e.length, t.length),
                u;
            for (u = 0; u < o; ++u) n.push(d3.interpolate(e[u], t[u]));
            for (; u < i; ++u) r[u] = e[u];
            for (; u < s; ++u) r[u] = t[u];
            return function(e) {
                for (u = 0; u < o; ++u) r[u] = n[u](e);
                return r
            }
        }, d3.interpolateObject = function(e, t) {
            var n = {},
                r = {},
                i;
            for (i in e)
                i in t ? n[i] = F(i)(e[i], t[i]) : r[i] = e[i];
            for (i in t) 
                i in e || (r[i] = t[i]);
            return function(e) {
                for (i in n) r[i] = n[i](e);
                return r
            }
        };
        var hs = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
        d3.interpolators = [d3.interpolateObject, function(e, t) {
            return t instanceof Array && d3.interpolateArray(e, t)
        }, function(e, t) {
            return (typeof e == "string" || typeof t == "string") && d3.interpolateString(e + "", t + "")
        }, function(e, t) {
            return (typeof t == "string" ? ds.has(t) || /^(#|rgb\(|hsl\()/.test(t) : t instanceof R) && d3.interpolateRgb(e, t)
        }, function(e, t) {
            return !isNaN(e = +e) && !isNaN(t = +t) && d3.interpolateNumber(e, t)
        }], R.prototype.toString = function() {
            return this.rgb() + ""
        }, d3.rgb = function(e, t, n) {
            return arguments.length === 1 ? e instanceof z ? U(e.r, e.g, e.b) : X("" + e, U, Y) : U(~~e, ~~t, ~~n)
        };
        var ps = z.prototype = new R;
        ps.brighter = function(e) {
            e = Math.pow(.7, arguments.length ? e : 1);
            var t = this.r,
                n = this.g,
                r = this.b,
                i = 30;
            return !t && !n && !r ? U(i, i, i) : (t && t < i && (t = i), n && n < i && (n = i), r && r < i && (r = i), U(Math.min(255, Math.floor(t / e)), Math.min(255, Math.floor(n / e)), Math.min(255, Math.floor(r / e))))
        }, ps.darker = function(e) {
            return e = Math.pow(.7, arguments.length ? e : 1), U(Math.floor(e * this.r), Math.floor(e * this.g), Math.floor(e * this.b))
        }, ps.hsl = function() {
            return V(this.r, this.g, this.b)
        }, ps.toString = function() {
            return "#" + W(this.r) + W(this.g) + W(this.b)
        };
        var ds = d3.map({
            aliceblue: "#f0f8ff",
            antiquewhite: "#faebd7",
            aqua: "#00ffff",
            aquamarine: "#7fffd4",
            azure: "#f0ffff",
            beige: "#f5f5dc",
            bisque: "#ffe4c4",
            black: "#000000",
            blanchedalmond: "#ffebcd",
            blue: "#0000ff",
            blueviolet: "#8a2be2",
            brown: "#a52a2a",
            burlywood: "#deb887",
            cadetblue: "#5f9ea0",
            chartreuse: "#7fff00",
            chocolate: "#d2691e",
            coral: "#ff7f50",
            cornflowerblue: "#6495ed",
            cornsilk: "#fff8dc",
            crimson: "#dc143c",
            cyan: "#00ffff",
            darkblue: "#00008b",
            darkcyan: "#008b8b",
            darkgoldenrod: "#b8860b",
            darkgray: "#a9a9a9",
            darkgreen: "#006400",
            darkgrey: "#a9a9a9",
            darkkhaki: "#bdb76b",
            darkmagenta: "#8b008b",
            darkolivegreen: "#556b2f",
            darkorange: "#ff8c00",
            darkorchid: "#9932cc",
            darkred: "#8b0000",
            darksalmon: "#e9967a",
            darkseagreen: "#8fbc8f",
            darkslateblue: "#483d8b",
            darkslategray: "#2f4f4f",
            darkslategrey: "#2f4f4f",
            darkturquoise: "#00ced1",
            darkviolet: "#9400d3",
            deeppink: "#ff1493",
            deepskyblue: "#00bfff",
            dimgray: "#696969",
            dimgrey: "#696969",
            dodgerblue: "#1e90ff",
            firebrick: "#b22222",
            floralwhite: "#fffaf0",
            forestgreen: "#228b22",
            fuchsia: "#ff00ff",
            gainsboro: "#dcdcdc",
            ghostwhite: "#f8f8ff",
            gold: "#ffd700",
            goldenrod: "#daa520",
            gray: "#808080",
            green: "#008000",
            greenyellow: "#adff2f",
            grey: "#808080",
            honeydew: "#f0fff0",
            hotpink: "#ff69b4",
            indianred: "#cd5c5c",
            indigo: "#4b0082",
            ivory: "#fffff0",
            khaki: "#f0e68c",
            lavender: "#e6e6fa",
            lavenderblush: "#fff0f5",
            lawngreen: "#7cfc00",
            lemonchiffon: "#fffacd",
            lightblue: "#add8e6",
            lightcoral: "#f08080",
            lightcyan: "#e0ffff",
            lightgoldenrodyellow: "#fafad2",
            lightgray: "#d3d3d3",
            lightgreen: "#90ee90",
            lightgrey: "#d3d3d3",
            lightpink: "#ffb6c1",
            lightsalmon: "#ffa07a",
            lightseagreen: "#20b2aa",
            lightskyblue: "#87cefa",
            lightslategray: "#778899",
            lightslategrey: "#778899",
            lightsteelblue: "#b0c4de",
            lightyellow: "#ffffe0",
            lime: "#00ff00",
            limegreen: "#32cd32",
            linen: "#faf0e6",
            magenta: "#ff00ff",
            maroon: "#800000",
            mediumaquamarine: "#66cdaa",
            mediumblue: "#0000cd",
            mediumorchid: "#ba55d3",
            mediumpurple: "#9370db",
            mediumseagreen: "#3cb371",
            mediumslateblue: "#7b68ee",
            mediumspringgreen: "#00fa9a",
            mediumturquoise: "#48d1cc",
            mediumvioletred: "#c71585",
            midnightblue: "#191970",
            mintcream: "#f5fffa",
            mistyrose: "#ffe4e1",
            moccasin: "#ffe4b5",
            navajowhite: "#ffdead",
            navy: "#000080",
            oldlace: "#fdf5e6",
            olive: "#808000",
            olivedrab: "#6b8e23",
            orange: "#ffa500",
            orangered: "#ff4500",
            orchid: "#da70d6",
            palegoldenrod: "#eee8aa",
            palegreen: "#98fb98",
            paleturquoise: "#afeeee",
            palevioletred: "#db7093",
            papayawhip: "#ffefd5",
            peachpuff: "#ffdab9",
            peru: "#cd853f",
            pink: "#ffc0cb",
            plum: "#dda0dd",
            powderblue: "#b0e0e6",
            purple: "#800080",
            red: "#ff0000",
            rosybrown: "#bc8f8f",
            royalblue: "#4169e1",
            saddlebrown: "#8b4513",
            salmon: "#fa8072",
            sandybrown: "#f4a460",
            seagreen: "#2e8b57",
            seashell: "#fff5ee",
            sienna: "#a0522d",
            silver: "#c0c0c0",
            skyblue: "#87ceeb",
            slateblue: "#6a5acd",
            slategray: "#708090",
            slategrey: "#708090",
            snow: "#fffafa",
            springgreen: "#00ff7f",
            steelblue: "#4682b4",
            tan: "#d2b48c",
            teal: "#008080",
            thistle: "#d8bfd8",
            tomato: "#ff6347",
            turquoise: "#40e0d0",
            violet: "#ee82ee",
            wheat: "#f5deb3",
            white: "#ffffff",
            whitesmoke: "#f5f5f5",
            yellow: "#ffff00",
            yellowgreen: "#9acd32"
        });
        ds.forEach(function(e, t) {
            ds.set(e, X(t, U, Y))
        }), d3.hsl = function(e, t, n) {
            return arguments.length === 1 ? e instanceof G ? Q(e.h, e.s, e.l) : X("" + e, V, Q) : Q(+e, +t, +n)
        };
        var vs = G.prototype = new R;
        vs.brighter = function(e) {
            return e = Math.pow(.7, arguments.length ? e : 1), Q(this.h, this.s, this.l / e)
        }, vs.darker = function(e) {
            return e = Math.pow(.7, arguments.length ? e : 1), Q(this.h, this.s, e * this.l)
        }, vs.rgb = function() {
            return Y(this.h, this.s, this.l)
        }, d3.hcl = function(e, t, n) {
            return arguments.length === 1 ? e instanceof et ? Z(e.h, e.c, e.l) : e instanceof rt ? st(e.l, e.a, e.b) : st((e = $((e = d3.rgb(e)).r, e.g, e.b)).l, e.a, e.b) : Z(+e, +t, +n)
        };
        var ms = et.prototype = new R;
        ms.brighter = function(e) {
            return Z(this.h, this.c, Math.min(100, this.l + gs * (arguments.length ? e : 1)))
        }, ms.darker = function(e) {
            return Z(this.h, this.c, Math.max(0, this.l - gs * (arguments.length ? e : 1)))
        }, ms.rgb = function() {
            return tt(this.h, this.c, this.l).rgb()
        }, d3.lab = function(e, t, n) {
            return arguments.length === 1 ? e instanceof rt ? nt(e.l, e.a, e.b) : e instanceof et ? tt(e.l, e.c, e.h) : $((e = d3.rgb(e)).r, e.g, e.b) : nt(+e, +t, +n)
        };
        var gs = 18,
            ys = .95047,
            bs = 1,
            ws = 1.08883,
            Es = rt.prototype = new R;
        Es.brighter = function(e) {
            return nt(Math.min(100, this.l + gs * (arguments.length ? e : 1)), this.a, this.b)
        }, Es.darker = function(e) {
            return nt(Math.max(0, this.l - gs * (arguments.length ? e : 1)), this.a, this.b)
        }, Es.rgb = function() {
            return it(this.l, this.a, this.b)
        };
        var Ss = function(e, t) {
                return t.querySelector(e)
            },
            xs = function(e, t) {
                return t.querySelectorAll(e)
            },
            Ts = document.documentElement,
            Ns = Ts.matchesSelector || Ts.webkitMatchesSelector || Ts.mozMatchesSelector || Ts.msMatchesSelector || Ts.oMatchesSelector,
            Cs = function(e, t) {
                return Ns.call(e, t)
            };
        typeof Sizzle == "function" && (Ss = function(e, t) {
            return Sizzle(e, t)[0] || null
        }, xs = function(e, t) {
            return Sizzle.uniqueSort(Sizzle(e, t))
        }, Cs = Sizzle.matchesSelector);
        var ks = [];
        d3.selection = function() {
            return Ls
        }, d3.selection.prototype = ks, ks.select = function(e) {
            var t = [],
                n, r, i, s;
            typeof e != "function" && (e = lt(e));
            for (var o = -1, u = this.length; ++o < u;) {
                t.push(n = []), n.parentNode = (i = this[o]).parentNode;
                for (var a = -1, f = i.length; ++a < f;)(s = i[a]) ? (n.push(r = e.call(s, s.__data__, a)), r && "__data__" in s && (r.__data__ = s.__data__)) : n.push(null)
            }
            return ft(t)
        }, ks.selectAll = function(e) {
            var t = [],
                n, r;
            typeof e != "function" && (e = ct(e));
            for (var i = -1, s = this.length; ++i < s;)
                for (var o = this[i], u = -1, a = o.length; ++u < a;)
                    if (r = o[u]) t.push(n = Ji(e.call(r, r.__data__, u))), n.parentNode = r;
            return ft(t)
        }, ks.attr = function(e, t) {
            if (arguments.length < 2) {
                if (typeof e == "string") {
                    var n = this.node();
                    return e = d3.ns.qualify(e), e.local ? n.getAttributeNS(e.space, e.local) : n.getAttribute(e)
                }
                for (t in e) this.each(ht(t, e[t]));
                return this
            }
            return this.each(ht(e, t))
        }, ks.classed = function(e, t) {
            if (arguments.length < 2) {
                if (typeof e == "string") {
                    var n = this.node(),
                        r = (e = e.trim().split(/^|\s+/g)).length,
                        i = -1;
                    if (t = n.classList) {
                        while (++i < r)
                            if (!t.contains(e[i])) return !1
                    } else {
                        t = n.className, t.baseVal != null && (t = t.baseVal);
                        while (++i < r)
                            if (!pt(e[i]).test(t)) return !1
                    }
                    return !0
                }
                for (t in e) this.each(dt(t, e[t]));
                return this
            }
            return this.each(dt(e, t))
        }, ks.style = function(e, t, n) {
            var r = arguments.length;
            if (r < 3) {
                if (typeof e != "string") {
                    r < 2 && (t = "");
                    for (n in e) this.each(mt(n, e[n], t));
                    return this
                }
                if (r < 2) return window.getComputedStyle(this.node(), null).getPropertyValue(e);
                n = ""
            }
            return this.each(mt(e, t, n))
        }, ks.property = function(e, t) {
            if (arguments.length < 2) {
                if (typeof e == "string") return this.node()[e];
                for (t in e) this.each(gt(t, e[t]));
                return this
            }
            return this.each(gt(e, t))
        }, ks.text = function(e) {
            return arguments.length < 1 ? this.node().textContent : this.each(typeof e == "function" ? function() {
                var t = e.apply(this, arguments);
                this.textContent = t == null ? "" : t
            } : e == null ? function() {
                this.textContent = ""
            } : function() {
                this.textContent = e
            })
        }, ks.html = function(e) {
            return arguments.length < 1 ? this.node().innerHTML : this.each(typeof e == "function" ? function() {
                var t = e.apply(this, arguments);
                this.innerHTML = t == null ? "" : t
            } : e == null ? function() {
                this.innerHTML = ""
            } : function() {
                this.innerHTML = e
            })
        }, ks.append = function(e) {
            function t() {
                return this.appendChild(document.createElementNS(this.namespaceURI, e))
            }

            function n() {
                return this.appendChild(document.createElementNS(e.space, e.local))
            }
            return e = d3.ns.qualify(e), this.select(e.local ? n : t)
        }, ks.insert = function(e, t) {
            function n() {
                return this.insertBefore(document.createElementNS(this.namespaceURI, e), Ss(t, this))
            }

            function r() {
                return this.insertBefore(document.createElementNS(e.space, e.local), Ss(t, this))
            }
            return e = d3.ns.qualify(e), this.select(e.local ? r : n)
        }, ks.remove = function() {
            return this.each(function() {
                var e = this.parentNode;
                e && e.removeChild(this)
            })
        }, ks.data = function(e, t) {
            function n(e, n) {
                var i, s = e.length,
                    o = n.length,
                    u = Math.min(s, o),
                    c = Math.max(s, o),
                    h = [],
                    p = [],
                    d = [],
                    v, m;
                if (t) {
                    var g = new r,
                        y = [],
                        b, w = n.length;
                    for (i = -1; ++i < s;) b = t.call(v = e[i], v.__data__, i), g.has(b) ? d[w++] = v : g.set(b, v), y.push(b);
                    for (i = -1; ++i < o;) b = t.call(n, m = n[i], i), g.has(b) ? (h[i] = v = g.get(b), v.__data__ = m, p[i] = d[i] = null) : (p[i] = yt(m), h[i] = d[i] = null), g.remove(b);
                    for (i = -1; ++i < s;) g.has(y[i]) && (d[i] = e[i])
                } else {
                    for (i = -1; ++i < u;) v = e[i], m = n[i], v ? (v.__data__ = m, h[i] = v, p[i] = d[i] = null) : (p[i] = yt(m), h[i] = d[i] = null);
                    for (; i < o; ++i) p[i] = yt(n[i]), h[i] = d[i] = null;
                    for (; i < c; ++i) d[i] = e[i], p[i] = h[i] = null
                }
                p.update = h, p.parentNode = h.parentNode = d.parentNode = e.parentNode, a.push(p), f.push(h), l.push(d)
            }
            var i = -1,
                s = this.length,
                o, u;
            if (!arguments.length) {
                e = new Array(s = (o = this[0]).length);
                while (++i < s)
                    if (u = o[i]) e[i] = u.__data__;
                return e
            }
            var a = xt([]),
                f = ft([]),
                l = ft([]);
            if (typeof e == "function")
                while (++i < s) n(o = this[i], e.call(o, o.parentNode.__data__, i));
            else
                while (++i < s) n(o = this[i], e);
            return f.enter = function() {
                return a
            }, f.exit = function() {
                return l
            }, f
        }, ks.datum = ks.map = function(e) {
            return arguments.length < 1 ? this.property("__data__") : this.property("__data__", e)
        }, ks.filter = function(e) {
            var t = [],
                n, r, i;
            typeof e != "function" && (e = bt(e));
            for (var s = 0, o = this.length; s < o; s++) {
                t.push(n = []), n.parentNode = (r = this[s]).parentNode;
                for (var u = 0, a = r.length; u < a; u++)(i = r[u]) && e.call(i, i.__data__, u) && n.push(i)
            }
            return ft(t)
        }, ks.order = function() {
            for (var e = -1, t = this.length; ++e < t;)
                for (var n = this[e], r = n.length - 1, i = n[r], s; --r >= 0;)
                    if (s = n[r]) i && i !== s.nextSibling && i.parentNode.insertBefore(s, i), i = s;
            return this
        }, ks.sort = function(e) {
            e = wt.apply(this, arguments);
            for (var t = -1, n = this.length; ++t < n;) this[t].sort(e);
            return this.order()
        }, ks.on = function(e, t, n) {
            var r = arguments.length;
            if (r < 3) {
                if (typeof e != "string") {
                    r < 2 && (t = !1);
                    for (n in e) this.each(Et(n, e[n], t));
                    return this
                }
                if (r < 2) return (r = this.node()["__on" + e]) && r._;
                n = !1
            }
            return this.each(Et(e, t, n))
        }, ks.each = function(e) {
            return St(this, function(t, n, r) {
                e.call(t, t.__data__, n, r)
            })
        }, ks.call = function(e) {
            return e.apply(this, (arguments[0] = this, arguments)), this
        }, ks.empty = function() {
            return !this.node()
        }, ks.node = function(e) {
            for (var t = 0, n = this.length; t < n; t++)
                for (var r = this[t], i = 0, s = r.length; i < s; i++) {
                    var o = r[i];
                    if (o) return o
                }
            return null
        }, ks.transition = function() {
            var e = [],
                t, n;
            for (var r = -1, i = this.length; ++r < i;) {
                e.push(t = []);
                for (var s = this[r], o = -1, u = s.length; ++o < u;) t.push((n = s[o]) ? {
                    node: n,
                    delay: Bs,
                    duration: js
                } : null)
            }
            return Tt(e, _s || ++Ms, Date.now())
        };
        var Ls = ft([
            [document]
        ]);
        Ls[0].parentNode = Ts, d3.select = function(e) {
            return typeof e == "string" ? Ls.select(e) : ft([
                [e]
            ])
        }, d3.selectAll = function(e) {
            return typeof e == "string" ? Ls.selectAll(e) : ft([Ji(e)])
        };
        var As = [];
        d3.selection.enter = xt, d3.selection.enter.prototype = As, As.append = ks.append, As.insert = ks.insert, As.empty = ks.empty, As.node = ks.node, As.select = function(e) {
            var t = [],
                n, r, i, s, o;
            for (var u = -1, a = this.length; ++u < a;) {
                i = (s = this[u]).update, t.push(n = []), n.parentNode = s.parentNode;
                for (var f = -1, l = s.length; ++f < l;)(o = s[f]) ? (n.push(i[f] = r = e.call(s.parentNode, o.__data__, f)), r.__data__ = o.__data__) : n.push(null)
            }
            return ft(t)
        };
        var Os = [],
            Ms = 0,
            _s = 0,
            Ds = 0,
            Ps = 250,
            Hs = d3.ease("cubic-in-out"),
            Bs = Ds,
            js = Ps,
            Fs = Hs;
        Os.call = ks.call, d3.transition = function(e) {
            return arguments.length ? _s ? e.transition() : e : Ls.transition()
        }, d3.transition.prototype = Os, Os.select = function(e) {
            var t = [],
                n, r, i;
            typeof e != "function" && (e = lt(e));
            for (var s = -1, o = this.length; ++s < o;) {
                t.push(n = []);
                for (var u = this[s], a = -1, f = u.length; ++a < f;)(i = u[a]) && (r = e.call(i.node, i.node.__data__, a)) ? ("__data__" in i.node && (r.__data__ = i.node.__data__), n.push({
                    node: r,
                    delay: i.delay,
                    duration: i.duration
                })) : n.push(null)
            }
            return Tt(t, this.id, this.time).ease(this.ease())
        }, Os.selectAll = function(e) {
            var t = [],
                n, r, i;
            typeof e != "function" && (e = ct(e));
            for (var s = -1, o = this.length; ++s < o;)
                for (var u = this[s], a = -1, f = u.length; ++a < f;)
                    if (i = u[a]) {
                        r = e.call(i.node, i.node.__data__, a), t.push(n = []);
                        for (var l = -1, c = r.length; ++l < c;) n.push({
                            node: r[l],
                            delay: i.delay,
                            duration: i.duration
                        })
                    }
            return Tt(t, this.id, this.time).ease(this.ease())
        }, Os.filter = function(e) {
            var t = [],
                n, r, i;
            typeof e != "function" && (e = bt(e));
            for (var s = 0, o = this.length; s < o; s++) {
                t.push(n = []);
                for (var r = this[s], u = 0, a = r.length; u < a; u++)(i = r[u]) && e.call(i.node, i.node.__data__, u) && n.push(i)
            }
            return Tt(t, this.id, this.time).ease(this.ease())
        }, Os.attr = function(e, t) {
            if (arguments.length < 2) {
                for (t in e) this.attrTween(t, kt(e[t], t));
                return this
            }
            return this.attrTween(e, kt(t, e))
        }, Os.attrTween = function(e, t) {
            function n(e, n) {
                var r = t.call(this, e, n, this.getAttribute(i));
                return r === Is ? (this.removeAttribute(i), null) : r && function(e) {
                    this.setAttribute(i, r(e))
                }
            }

            function r(e, n) {
                var r = t.call(this, e, n, this.getAttributeNS(i.space, i.local));
                return r === Is ? (this.removeAttributeNS(i.space, i.local), null) : r && function(e) {
                    this.setAttributeNS(i.space, i.local, r(e))
                }
            }
            var i = d3.ns.qualify(e);
            return this.tween("attr." + e, i.local ? r : n)
        }, Os.style = function(e, t, n) {
            var r = arguments.length;
            if (r < 3) {
                if (typeof e != "string") {
                    r < 2 && (t = "");
                    for (n in e) this.styleTween(n, kt(e[n], n), t);
                    return this
                }
                n = ""
            }
            return this.styleTween(e, kt(t, e), n)
        }, Os.styleTween = function(e, t, n) {
            return arguments.length < 3 && (n = ""), this.tween("style." + e, function(r, i) {
                var s = t.call(this, r, i, window.getComputedStyle(this, null).getPropertyValue(e));
                return s === Is ? (this.style.removeProperty(e), null) : s && function(t) {
                    this.style.setProperty(e, s(t), n)
                }
            })
        }, Os.text = function(e) {
            return this.tween("text", function(t, n) {
                this.textContent = typeof e == "function" ? e.call(this, t, n) : e
            })
        }, Os.remove = function() {
            return this.each("end.transition", function() {
                var e;
                !this.__transition__ && (e = this.parentNode) && e.removeChild(this)
            })
        }, Os.delay = function(e) {
            return St(this, typeof e == "function" ? function(t, n, r) {
                t.delay = e.call(t = t.node, t.__data__, n, r) | 0
            } : (e |= 0, function(t) {
                t.delay = e
            }))
        }, Os.duration = function(e) {
            return St(this, typeof e == "function" ? function(t, n, r) {
                t.duration = Math.max(1, e.call(t = t.node, t.__data__, n, r) | 0)
            } : (e = Math.max(1, e | 0), function(t) {
                t.duration = e
            }))
        }, Os.transition = function() {
            return this.select(s)
        }, d3.tween = function(e, t) {
            function n(n, r, i) {
                var s = e.call(this, n, r);
                return s == null ? i != "" && Is : i != s && t(i, s + "")
            }

            function r(n, r, i) {
                return i != e && t(i, e)
            }
            return typeof e == "function" ? n : e == null ? Ct : (e += "", r)
        };
        var Is = {},
            qs = 0,
            Rs = {},
            Us = null,
            zs, Ws;
        d3.timer = function(e, t, n) {
            if (arguments.length < 3) {
                if (arguments.length < 2) t = 0;
                else if (!isFinite(t)) return;
                n = Date.now()
            }
            var r = Rs[e.id];
            r && r.callback === e ? (r.then = n, r.delay = t) : Rs[e.id = ++qs] = Us = {
                callback: e,
                then: n,
                delay: t,
                next: Us
            }, zs || (Ws = clearTimeout(Ws), zs = 1, Xs(Lt))
        }, d3.timer.flush = function() {
            var e, t = Date.now(),
                n = Us;
            while (n) e = t - n.then, n.delay || (n.flush = n.callback(e)), n = n.next;
            At()
        };
        var Xs = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(e) {
            setTimeout(e, 17)
        };
        d3.mouse = function(e) {
            return Ot(e, _())
        };
        var Vs = /WebKit/.test(navigator.userAgent) ? -1 : 0;
        d3.touches = function(e, t) {
            return arguments.length < 2 && (t = _().touches), t ? Ji(t).map(function(t) {
                var n = Ot(e, t);
                return n.identifier = t.identifier, n
            }) : []
        }, d3.scale = {}, d3.scale.linear = function() {
            return Bt([0, 1], [0, 1], d3.interpolate, !1)
        }, d3.scale.log = function() {
            return Wt(d3.scale.linear(), Xt)
        };
        var $s = d3.format(".0e");
        Xt.pow = function(e) {
            return Math.pow(10, e)
        }, Vt.pow = function(e) {
            return -Math.pow(10, -e)
        }, d3.scale.pow = function() {
            return $t(d3.scale.linear(), 1)
        }, d3.scale.sqrt = function() {
            return d3.scale.pow().exponent(.5)
        }, d3.scale.ordinal = function() {
            return Kt([], {
                t: "range",
                a: [
                    []
                ]
            })
        }, d3.scale.category10 = function() {
            return d3.scale.ordinal().range(Js)
        }, d3.scale.category20 = function() {
            return d3.scale.ordinal().range(Ks)
        }, d3.scale.category20b = function() {
            return d3.scale.ordinal().range(Qs)
        }, d3.scale.category20c = function() {
            return d3.scale.ordinal().range(Gs)
        };
        var Js = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"],
            Ks = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c", "#98df8a", "#d62728", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b", "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7", "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"],
            Qs = ["#393b79", "#5254a3", "#6b6ecf", "#9c9ede", "#637939", "#8ca252", "#b5cf6b", "#cedb9c", "#8c6d31", "#bd9e39", "#e7ba52", "#e7cb94", "#843c39", "#ad494a", "#d6616b", "#e7969c", "#7b4173", "#a55194", "#ce6dbd", "#de9ed6"],
            Gs = ["#3182bd", "#6baed6", "#9ecae1", "#c6dbef", "#e6550d", "#fd8d3c", "#fdae6b", "#fdd0a2", "#31a354", "#74c476", "#a1d99b", "#c7e9c0", "#756bb1", "#9e9ac8", "#bcbddc", "#dadaeb", "#636363", "#969696", "#bdbdbd", "#d9d9d9"];
        d3.scale.quantile = function() {
            return Qt([], [])
        }, d3.scale.quantize = function() {
            return Gt(0, 1, [0, 1])
        }, d3.scale.threshold = function() {
            return Yt([.5], [0, 1])
        }, d3.scale.identity = function() {
            return Zt([0, 1])
        }, d3.svg = {}, d3.svg.arc = function() {
            function e() {
                var e = t.apply(this, arguments),
                    s = n.apply(this, arguments),
                    o = r.apply(this, arguments) + Ys,
                    u = i.apply(this, arguments) + Ys,
                    a = (u < o && (a = o, o = u, u = a), u - o),
                    f = a < Math.PI ? "0" : "1",
                    l = Math.cos(o),
                    c = Math.sin(o),
                    h = Math.cos(u),
                    p = Math.sin(u);
                return a >= Zs ? e ? "M0," + s + "A" + s + "," + s + " 0 1,1 0," + -s + "A" + s + "," + s + " 0 1,1 0," + s + "M0," + e + "A" + e + "," + e + " 0 1,0 0," + -e + "A" + e + "," + e + " 0 1,0 0," + e + "Z" : "M0," + s + "A" + s + "," + s + " 0 1,1 0," + -s + "A" + s + "," + s + " 0 1,1 0," + s + "Z" : e ? "M" + s * l + "," + s * c + "A" + s + "," + s + " 0 " + f + ",1 " + s * h + "," + s * p + "L" + e * h + "," + e * p + "A" + e + "," + e + " 0 " + f + ",0 " + e * l + "," + e * c + "Z" : "M" + s * l + "," + s * c + "A" + s + "," + s + " 0 " + f + ",1 " + s * h + "," + s * p + "L0,0" + "Z"
            }
            var t = en,
                n = tn,
                r = nn,
                i = rn;
            return e.innerRadius = function(n) {
                return arguments.length ? (t = u(n), e) : t
            }, e.outerRadius = function(t) {
                return arguments.length ? (n = u(t), e) : n
            }, e.startAngle = function(t) {
                return arguments.length ? (r = u(t), e) : r
            }, e.endAngle = function(t) {
                return arguments.length ? (i = u(t), e) : i
            }, e.centroid = function() {
                var e = (t.apply(this, arguments) + n.apply(this, arguments)) / 2,
                    s = (r.apply(this, arguments) + i.apply(this, arguments)) / 2 + Ys;
                return [Math.cos(s) * e, Math.sin(s) * e]
            }, e
        };
        var Ys = -Math.PI / 2,
            Zs = 2 * Math.PI - 1e-6;
        d3.svg.line = function() {
            return sn(i)
        };
        var eo = d3.map({
            linear: an,
            "linear-closed": fn,
            "step-before": ln,
            "step-after": cn,
            basis: gn,
            "basis-open": yn,
            "basis-closed": bn,
            bundle: wn,
            cardinal: dn,
            "cardinal-open": hn,
            "cardinal-closed": pn,
            monotone: Cn
        });
        eo.forEach(function(e, t) {
            t.key = e, t.closed = /-closed$/.test(e)
        });
        var to = [0, 2 / 3, 1 / 3, 0],
            no = [0, 1 / 3, 2 / 3, 0],
            ro = [0, 1 / 6, 2 / 3, 1 / 6];
        d3.svg.line.radial = function() {
            var e = sn(kn);
            return e.radius = e.x, delete e.x, e.angle = e.y, delete e.y, e
        }, ln.reverse = cn, cn.reverse = ln, d3.svg.area = function() {
            return Ln(i)
        }, d3.svg.area.radial = function() {
            var e = Ln(kn);
            return e.radius = e.x, delete e.x, e.innerRadius = e.x0, delete e.x0, e.outerRadius = e.x1, delete e.x1, e.angle = e.y, delete e.y, e.startAngle = e.y0, delete e.y0, e.endAngle = e.y1, delete e.y1, e
        }, d3.svg.chord = function() {
            function e(e, u) {
                var a = t(this, s, e, u),
                    f = t(this, o, e, u);
                return "M" + a.p0 + r(a.r, a.p1, a.a1 - a.a0) + (n(a, f) ? i(a.r, a.p1, a.r, a.p0) : i(a.r, a.p1, f.r, f.p0) + r(f.r, f.p1, f.a1 - f.a0) + i(f.r, f.p1, a.r, a.p0)) + "Z"
            }

            function t(e, t, n, r) {
                var i = t.call(e, n, r),
                    s = a.call(e, i, r),
                    o = f.call(e, i, r) + Ys,
                    u = l.call(e, i, r) + Ys;
                return {
                    r: s,
                    a0: o,
                    a1: u,
                    p0: [s * Math.cos(o), s * Math.sin(o)],
                    p1: [s * Math.cos(u), s * Math.sin(u)]
                }
            }

            function n(e, t) {
                return e.a0 == t.a0 && e.a1 == t.a1
            }

            function r(e, t, n) {
                return "A" + e + "," + e + " 0 " + +(n > Math.PI) + ",1 " + t
            }

            function i(e, t, n, r) {
                return "Q 0,0 " + r
            }
            var s = An,
                o = On,
                a = Mn,
                f = nn,
                l = rn;
            return e.radius = function(t) {
                return arguments.length ? (a = u(t), e) : a
            }, e.source = function(t) {
                return arguments.length ? (s = u(t), e) : s
            }, e.target = function(t) {
                return arguments.length ? (o = u(t), e) : o
            }, e.startAngle = function(t) {
                return arguments.length ? (f = u(t), e) : f
            }, e.endAngle = function(t) {
                return arguments.length ? (l = u(t), e) : l
            }, e
        }, d3.svg.diagonal = function() {
            function e(e, i) {
                var s = t.call(this, e, i),
                    o = n.call(this, e, i),
                    u = (s.y + o.y) / 2,
                    a = [s, {
                        x: s.x,
                        y: u
                    }, {
                        x: o.x,
                        y: u
                    }, o];
                return a = a.map(r), "M" + a[0] + "C" + a[1] + " " + a[2] + " " + a[3]
            }
            var t = An,
                n = On,
                r = Pn;
            return e.source = function(n) {
                return arguments.length ? (t = u(n), e) : t
            }, e.target = function(t) {
                return arguments.length ? (n = u(t), e) : n
            }, e.projection = function(t) {
                return arguments.length ? (r = t, e) : r
            }, e
        }, d3.svg.diagonal.radial = function() {
            var e = d3.svg.diagonal(),
                t = Pn,
                n = e.projection;
            return e.projection = function(e) {
                return arguments.length ? n(Hn(t = e)) : t
            }, e
        }, d3.svg.mouse = d3.mouse, d3.svg.touches = d3.touches, d3.svg.symbol = function() {
            function e(e, r) {
                return (io.get(t.call(this, e, r)) || Fn)(n.call(this, e, r))
            }
            var t = jn,
                n = Bn;
            return e.type = function(n) {
                return arguments.length ? (t = u(n), e) : t
            }, e.size = function(t) {
                return arguments.length ? (n = u(t), e) : n
            }, e
        };
        var io = d3.map({
            circle: Fn,
            cross: function(e) {
                var t = Math.sqrt(e / 5) / 2;
                return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z"
            },
            diamond: function(e) {
                var t = Math.sqrt(e / (2 * oo)),
                    n = t * oo;
                return "M0," + -t + "L" + n + ",0" + " 0," + t + " " + -n + ",0" + "Z"
            },
            square: function(e) {
                var t = Math.sqrt(e) / 2;
                return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z"
            },
            "triangle-down": function(e) {
                var t = Math.sqrt(e / so),
                    n = t * so / 2;
                return "M0," + n + "L" + t + "," + -n + " " + -t + "," + -n + "Z"
            },
            "triangle-up": function(e) {
                var t = Math.sqrt(e / so),
                    n = t * so / 2;
                return "M0," + -n + "L" + t + "," + n + " " + -t + "," + n + "Z"
            }
        });
        d3.svg.symbolTypes = io.keys();
        var so = Math.sqrt(3),
            oo = Math.tan(30 * Math.PI / 180);
        d3.svg.axis = function() {
            function e(e) {
                e.each(function() {
                    var e = d3.select(this),
                        c = a == null ? t.ticks ? t.ticks.apply(t, u) : t.domain() : a,
                        h = f == null ? t.tickFormat ? t.tickFormat.apply(t, u) : String : f,
                        p = Rn(t, c, l),
                        d = e.selectAll(".minor").data(p, String),
                        v = d.enter().insert("line", "g").attr("class", "tick minor").style("opacity", 1e-6),
                        m = d3.transition(d.exit()).style("opacity", 1e-6).remove(),
                        g = d3.transition(d).style("opacity", 1),
                        y = e.selectAll("g").data(c, String),
                        b = y.enter().insert("g", "path").style("opacity", 1e-6),
                        w = d3.transition(y.exit()).style("opacity", 1e-6).remove(),
                        E = d3.transition(y).style("opacity", 1),
                        S, x = Dt(t),
                        T = e.selectAll(".domain").data([0]),
                        N = T.enter().append("path").attr("class", "domain"),
                        C = d3.transition(T),
                        k = t.copy(),
                        L = this.__chart__ || k;
                    this.__chart__ = k, b.append("line").attr("class", "tick"), b.append("text");
                    var A = b.select("line"),
                        O = E.select("line"),
                        M = y.select("text").text(h),
                        _ = b.select("text"),
                        D = E.select("text");
                    switch (n) {
                        case "bottom":
                            S = In, v.attr("y2", i), g.attr("x2", 0).attr("y2", i), A.attr("y2", r), _.attr("y", Math.max(r, 0) + o), O.attr("x2", 0).attr("y2", r), D.attr("x", 0).attr("y", Math.max(r, 0) + o), M.attr("dy", ".71em").attr("text-anchor", "middle"), C.attr("d", "M" + x[0] + "," + s + "V0H" + x[1] + "V" + s);
                            break;
                        case "top":
                            S = In, v.attr("y2", -i), g.attr("x2", 0).attr("y2", -i), A.attr("y2", -r), _.attr("y", -(Math.max(r, 0) + o)), O.attr("x2", 0).attr("y2", -r), D.attr("x", 0).attr("y", -(Math.max(r, 0) + o)), M.attr("dy", "0em").attr("text-anchor", "middle"), C.attr("d", "M" + x[0] + "," + -s + "V0H" + x[1] + "V" + -s);
                            break;
                        case "left":
                            S = qn, v.attr("x2", -i), g.attr("x2", -i).attr("y2", 0), A.attr("x2", -r), _.attr("x", -(Math.max(r, 0) + o)), O.attr("x2", -r).attr("y2", 0), D.attr("x", -(Math.max(r, 0) + o)).attr("y", 0), M.attr("dy", ".32em").attr("text-anchor", "end"), C.attr("d", "M" + -s + "," + x[0] + "H0V" + x[1] + "H" + -s);
                            break;
                        case "right":
                            S = qn, v.attr("x2", i), g.attr("x2", i).attr("y2", 0), A.attr("x2", r), _.attr("x", Math.max(r, 0) + o), O.attr("x2", r).attr("y2", 0), D.attr("x", Math.max(r, 0) + o).attr("y", 0), M.attr("dy", ".32em").attr("text-anchor", "start"), C.attr("d", "M" + s + "," + x[0] + "H0V" + x[1] + "H" + s)
                    }
                    if (t.ticks) b.call(S, L), E.call(S, k), w.call(S, k), v.call(S, L), g.call(S, k), m.call(S, k);
                    else {
                        var P = k.rangeBand() / 2,
                            H = function(e) {
                                return k(e) + P
                            };
                        b.call(S, H), E.call(S, H)
                    }
                })
            }
            var t = d3.scale.linear(),
                n = "bottom",
                r = 6,
                i = 6,
                s = 6,
                o = 3,
                u = [10],
                a = null,
                f, l = 0;
            return e.scale = function(n) {
                return arguments.length ? (t = n, e) : t
            }, e.orient = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.ticks = function() {
                return arguments.length ? (u = arguments, e) : u
            }, e.tickValues = function(t) {
                return arguments.length ? (a = t, e) : a
            }, e.tickFormat = function(t) {
                return arguments.length ? (f = t, e) : f
            }, e.tickSize = function(t, n, o) {
                if (!arguments.length) return r;
                var u = arguments.length - 1;
                return r = +t, i = u > 1 ? +n : r, s = u > 0 ? +arguments[u] : r, e
            }, e.tickPadding = function(t) {
                return arguments.length ? (o = +t, e) : o
            }, e.tickSubdivide = function(t) {
                return arguments.length ? (l = +t, e) : l
            }, e
        }, d3.svg.brush = function() {
            function e(s) {
                s.each(function() {
                    var s = d3.select(this),
                        f = s.selectAll(".background").data([0]),
                        l = s.selectAll(".extent").data([0]),
                        c = s.selectAll(".resize").data(a, String),
                        h;
                    s.style("pointer-events", "all").on("mousedown.brush", i).on("touchstart.brush", i), f.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), l.enter().append("rect").attr("class", "extent").style("cursor", "move"), c.enter().append("g").attr("class", function(e) {
                        return "resize " + e
                    }).style("cursor", function(e) {
                        return uo[e]
                    }).append("rect").attr("x", function(e) {
                        return /[ew]$/.test(e) ? -3 : null
                    }).attr("y", function(e) {
                        return /^[ns]/.test(e) ? -3 : null
                    }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), c.style("display", e.empty() ? "none" : null), c.exit().remove(), o && (h = Dt(o), f.attr("x", h[0]).attr("width", h[1] - h[0]), n(s)), u && (h = Dt(u), f.attr("y", h[0]).attr("height", h[1] - h[0]), r(s)), t(s)
                })
            }

            function t(e) {
                e.selectAll(".resize").attr("transform", function(e) {
                    return "translate(" + f[+/e$/.test(e)][0] + "," + f[+/^s/.test(e)][1] + ")"
                })
            }

            function n(e) {
                e.select(".extent").attr("x", f[0][0]), e.selectAll(".extent,.n>rect,.s>rect").attr("width", f[1][0] - f[0][0])
            }

            function r(e) {
                e.select(".extent").attr("y", f[0][1]), e.selectAll(".extent,.e>rect,.w>rect").attr("height", f[1][1] - f[0][1])
            }

            function i() {
                function i() {
                    var e = d3.event.changedTouches;
                    return e ? d3.touches(v, e)[0] : d3.mouse(v)
                }

                function a() {
                    d3.event.keyCode == 32 && (S || (x = null, T[0] -= f[1][0], T[1] -= f[1][1], S = 2), M())
                }

                function c() {
                    d3.event.keyCode == 32 && S == 2 && (T[0] += f[1][0], T[1] += f[1][1], S = 0, M())
                }

                function h() {
                    var e = i(),
                        s = !1;
                    N && (e[0] += N[0], e[1] += N[1]), S || (d3.event.altKey ? (x || (x = [(f[0][0] + f[1][0]) / 2, (f[0][1] + f[1][1]) / 2]), T[0] = f[+(e[0] < x[0])][0], T[1] = f[+(e[1] < x[1])][1]) : x = null), w && p(e, o, 0) && (n(y), s = !0), E && p(e, u, 1) && (r(y), s = !0), s && (t(y), g({
                        type: "brush",
                        mode: S ? "move" : "resize"
                    }))
                }

                function p(e, t, n) {
                    var r = Dt(t),
                        i = r[0],
                        s = r[1],
                        o = T[n],
                        u = f[1][n] - f[0][n],
                        a, c;
                    S && (i -= o, s -= u + o), a = Math.max(i, Math.min(s, e[n])), S ? c = (a += o) + u : (x && (o = Math.max(i, Math.min(s, 2 * x[n] - a))), o < a ? (c = a, a = o) : c = o);
                    if (f[0][n] !== a || f[1][n] !== c) return l = null, f[0][n] = a, f[1][n] = c, !0
                }

                function d() {
                    h(), y.style("pointer-events", "all").selectAll(".resize").style("display", e.empty() ? "none" : null), d3.select("body").style("cursor", null), C.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), g({
                        type: "brushend"
                    }), M()
                }
                var v = this,
                    m = d3.select(d3.event.target),
                    g = s.of(v, arguments),
                    y = d3.select(v),
                    b = m.datum(),
                    w = !/^(n|s)$/.test(b) && o,
                    E = !/^(e|w)$/.test(b) && u,
                    S = m.classed("extent"),
                    x, T = i(),
                    N, C = d3.select(window).on("mousemove.brush", h).on("mouseup.brush", d).on("touchmove.brush", h).on("touchend.brush", d).on("keydown.brush", a).on("keyup.brush", c);
                if (S) T[0] = f[0][0] - T[0], T[1] = f[0][1] - T[1];
                else if (b) {
                    var k = +/w$/.test(b),
                        L = +/^n/.test(b);
                    N = [f[1 - k][0] - T[0], f[1 - L][1] - T[1]], T[0] = f[k][0], T[1] = f[L][1]
                } else d3.event.altKey && (x = T.slice());
                y.style("pointer-events", "none").selectAll(".resize").style("display", null), d3.select("body").style("cursor", m.style("cursor")), g({
                    type: "brushstart"
                }), h(), M()
            }
            var s = D(e, "brushstart", "brush", "brushend"),
                o = null,
                u = null,
                a = ao[0],
                f = [
                    [0, 0],
                    [0, 0]
                ],
                l;
            return e.x = function(t) {
                return arguments.length ? (o = t, a = ao[!o << 1 | !u], e) : o
            }, e.y = function(t) {
                return arguments.length ? (u = t, a = ao[!o << 1 | !u], e) : u
            }, e.extent = function(t) {
                var n, r, i, s, a;
                return arguments.length ? (l = [
                    [0, 0],
                    [0, 0]
                ], o && (n = t[0], r = t[1], u && (n = n[0], r = r[0]), l[0][0] = n, l[1][0] = r, o.invert && (n = o(n), r = o(r)), r < n && (a = n, n = r, r = a), f[0][0] = n | 0, f[1][0] = r | 0), u && (i = t[0], s = t[1], o && (i = i[1], s = s[1]), l[0][1] = i, l[1][1] = s, u.invert && (i = u(i), s = u(s)), s < i && (a = i, i = s, s = a), f[0][1] = i | 0, f[1][1] = s | 0), e) : (t = l || f, o && (n = t[0][0], r = t[1][0], l || (n = f[0][0], r = f[1][0], o.invert && (n = o.invert(n), r = o.invert(r)), r < n && (a = n, n = r, r = a))), u && (i = t[0][1], s = t[1][1], l || (i = f[0][1], s = f[1][1], u.invert && (i = u.invert(i), s = u.invert(s)), s < i && (a = i, i = s, s = a))), o && u ? [
                    [n, i],
                    [r, s]
                ] : o ? [n, r] : u && [i, s])
            }, e.clear = function() {
                return l = null, f[0][0] = f[0][1] = f[1][0] = f[1][1] = 0, e
            }, e.empty = function() {
                return o && f[0][0] === f[1][0] || u && f[0][1] === f[1][1]
            }, d3.rebind(e, s, "on")
        };
        var uo = {
                n: "ns-resize",
                e: "ew-resize",
                s: "ns-resize",
                w: "ew-resize",
                nw: "nwse-resize",
                ne: "nesw-resize",
                se: "nwse-resize",
                sw: "nesw-resize"
            },
            ao = [
                ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
                ["e", "w"],
                ["n", "s"],
                []
            ];
        d3.behavior = {}, d3.behavior.drag = function() {
            function e() {
                this.on("mousedown.drag", t).on("touchstart.drag", t)
            }

            function t() {
                function e() {
                    var e = o.parentNode;
                    return f ? d3.touches(e).filter(function(e) {
                        return e.identifier === f
                    })[0] : d3.mouse(e)
                }

                function t() {
                    if (!o.parentNode) return i();
                    var t = e(),
                        n = t[0] - c[0],
                        r = t[1] - c[1];
                    h |= n | r, c = t, M(), u({
                        type: "drag",
                        x: t[0] + l[0],
                        y: t[1] + l[1],
                        dx: n,
                        dy: r
                    })
                }

                function i() {
                    u({
                        type: "dragend"
                    }), h && (M(), d3.event.target === a && p.on("click.drag", s, !0)), p.on(f ? "touchmove.drag-" + f : "mousemove.drag", null).on(f ? "touchend.drag-" + f : "mouseup.drag", null)
                }

                function s() {
                    M(), p.on("click.drag", null)
                }
                var o = this,
                    u = n.of(o, arguments),
                    a = d3.event.target,
                    f = d3.event.touches && d3.event.changedTouches[0].identifier,
                    l, c = e(),
                    h = 0,
                    p = d3.select(window).on(f ? "touchmove.drag-" + f : "mousemove.drag", t).on(f ? "touchend.drag-" + f : "mouseup.drag", i, !0);
                r ? (l = r.apply(o, arguments), l = [l.x - c[0], l.y - c[1]]) : l = [0, 0], f || M(), u({
                    type: "dragstart"
                })
            }
            var n = D(e, "drag", "dragstart", "dragend"),
                r = null;
            return e.origin = function(t) {
                return arguments.length ? (r = t, e) : r
            }, d3.rebind(e, n, "on")
        }, d3.behavior.zoom = function() {
            function e() {
                this.on("mousedown.zoom", o).on("mousewheel.zoom", u).on("mousemove.zoom", a).on("DOMMouseScroll.zoom", u).on("dblclick.zoom", f).on("touchstart.zoom", l).on("touchmove.zoom", c).on("touchend.zoom", l)
            }

            function t(e) {
                return [(e[0] - h[0]) / d, (e[1] - h[1]) / d]
            }

            function n(e) {
                return [e[0] * d + h[0], e[1] * d + h[1]]
            }

            function r(e) {
                d = Math.max(m[0], Math.min(m[1], e))
            }

            function i(e, t) {
                t = n(t), h[0] += e[0] - t[0], h[1] += e[1] - t[1]
            }

            function s(e) {
                b && b.domain(y.range().map(function(e) {
                    return (e - h[0]) / d
                }).map(y.invert)), E && E.domain(w.range().map(function(e) {
                    return (e - h[1]) / d
                }).map(w.invert)), d3.event.preventDefault(), e({
                    type: "zoom",
                    scale: d,
                    translate: h
                })
            }

            function o() {
                function e() {
                    f = 1, i(d3.mouse(o), c), s(u)
                }

                function n() {
                    f && M(), l.on("mousemove.zoom", null).on("mouseup.zoom", null), f && d3.event.target === a && l.on("click.zoom", r, !0)
                }

                function r() {
                    M(), l.on("click.zoom", null)
                }
                var o = this,
                    u = g.of(o, arguments),
                    a = d3.event.target,
                    f = 0,
                    l = d3.select(window).on("mousemove.zoom", e).on("mouseup.zoom", n),
                    c = t(d3.mouse(o));
                window.focus(), M()
            }

            function u() {
                p || (p = t(d3.mouse(this))), r(Math.pow(2, Un() * .002) * d), i(d3.mouse(this), p), s(g.of(this, arguments))
            }

            function a() {
                p = null
            }

            function f() {
                var e = d3.mouse(this),
                    n = t(e);
                r(d3.event.shiftKey ? d / 2 : d * 2), i(e, n), s(g.of(this, arguments))
            }

            function l() {
                var e = d3.touches(this),
                    n = Date.now();
                v = d, p = {}, e.forEach(function(e) {
                    p[e.identifier] = t(e)
                }), M();
                if (e.length === 1) {
                    if (n - S < 500) {
                        var o = e[0],
                            u = t(e[0]);
                        r(d * 2), i(o, u), s(g.of(this, arguments))
                    }
                    S = n
                }
            }

            function c() {
                var e = d3.touches(this),
                    t = e[0],
                    n = p[t.identifier];
                if (o = e[1]) {
                    var o, u = p[o.identifier];
                    t = [(t[0] + o[0]) / 2, (t[1] + o[1]) / 2], n = [(n[0] + u[0]) / 2, (n[1] + u[1]) / 2], r(d3.event.scale * v)
                }
                i(t, n), S = null, s(g.of(this, arguments))
            }
            var h = [0, 0],
                p, d = 1,
                v, m = lo,
                g = D(e, "zoom"),
                y, b, w, E, S;
            return e.translate = function(t) {
                return arguments.length ? (h = t.map(Number), e) : h
            }, e.scale = function(t) {
                return arguments.length ? (d = +t, e) : d
            }, e.scaleExtent = function(t) {
                return arguments.length ? (m = t == null ? lo : t.map(Number), e) : m
            }, e.x = function(t) {
                return arguments.length ? (b = t, y = t.copy(), e) : b
            }, e.y = function(t) {
                return arguments.length ? (E = t, w = t.copy(), e) : E
            }, d3.rebind(e, g, "on")
        };
        var fo, lo = [0, Infinity];
        d3.layout = {}, d3.layout.bundle = function() {
            return function(e) {
                var t = [],
                    n = -1,
                    r = e.length;
                while (++n < r) t.push(zn(e[n]));
                return t
            }
        }, d3.layout.chord = function() {
            function e() {
                var e = {},
                    n = [],
                    c = d3.range(o),
                    h = [],
                    p, d, v, m, g;
                r = [], i = [], p = 0, m = -1;
                while (++m < o) {
                    d = 0, g = -1;
                    while (++g < o) d += s[m][g];
                    n.push(d), h.push(d3.range(o)), p += d
                }
                a && c.sort(function(e, t) {
                    return a(n[e], n[t])
                }), f && h.forEach(function(e, t) {
                    e.sort(function(e, n) {
                        return f(s[t][e], s[t][n])
                    })
                }), p = (2 * Math.PI - u * o) / p, d = 0, m = -1;
                while (++m < o) {
                    v = d, g = -1;
                    while (++g < o) {
                        var y = c[m],
                            b = h[y][g],
                            w = s[y][b],
                            E = d,
                            S = d += w * p;
                        e[y + "-" + b] = {
                            index: y,
                            subindex: b,
                            startAngle: E,
                            endAngle: S,
                            value: w
                        }
                    }
                    i[y] = {
                        index: y,
                        startAngle: v,
                        endAngle: d,
                        value: (d - v) / p
                    }, d += u
                }
                m = -1;
                while (++m < o) {
                    g = m - 1;
                    while (++g < o) {
                        var x = e[m + "-" + g],
                            T = e[g + "-" + m];
                        (x.value || T.value) && r.push(x.value < T.value ? {
                            source: T,
                            target: x
                        } : {
                            source: x,
                            target: T
                        })
                    }
                }
                l && t()
            }

            function t() {
                r.sort(function(e, t) {
                    return l((e.source.value + e.target.value) / 2, (t.source.value + t.target.value) / 2)
                })
            }
            var n = {},
                r, i, s, o, u = 0,
                a, f, l;
            return n.matrix = function(e) {
                return arguments.length ? (o = (s = e) && s.length, r = i = null, n) : s
            }, n.padding = function(e) {
                return arguments.length ? (u = e, r = i = null, n) : u
            }, n.sortGroups = function(e) {
                return arguments.length ? (a = e, r = i = null, n) : a
            }, n.sortSubgroups = function(e) {
                return arguments.length ? (f = e, r = null, n) : f
            }, n.sortChords = function(e) {
                return arguments.length ? (l = e, r && t(), n) : l
            }, n.chords = function() {
                return r || e(), r
            }, n.groups = function() {
                return i || e(), i
            }, n
        }, d3.layout.force = function() {
            function e(e) {
                return function(t, n, r, i, s) {
                    if (t.point !== e) {
                        var o = t.cx - e.x,
                            u = t.cy - e.y,
                            a = 1 / Math.sqrt(o * o + u * u);
                        if ((i - n) * a < d) {
                            var f = t.charge * a * a;
                            return e.px -= o * f, e.py -= u * f, !0
                        }
                        if (t.point && isFinite(a)) {
                            var f = t.pointCharge * a * a;
                            e.px -= o * f, e.py -= u * f
                        }
                    }
                    return !t.charge
                }
            }

            function t(e) {
                e.px = d3.event.x, e.py = d3.event.y, n.resume()
            }
            var n = {},
                r = d3.dispatch("start", "tick", "end"),
                s = [1, 1],
                o, a, f = .9,
                l = Gn,
                c = Yn,
                h = -30,
                p = .1,
                d = .8,
                v, m = [],
                g = [],
                y, b, w;
            return n.tick = function() {
                if ((a *= .99) < .005) return r.end({
                    type: "end",
                    alpha: a = 0
                }), !0;
                var t = m.length,
                    n = g.length,
                    i, o, u, l, c, d, v, E, S;
                for (o = 0; o < n; ++o) {
                    u = g[o], l = u.source, c = u.target, E = c.x - l.x, S = c.y - l.y;
                    if (d = E * E + S * S) d = a * b[o] * ((d = Math.sqrt(d)) - y[o]) / d, E *= d, S *= d, c.x -= E * (v = l.weight / (c.weight + l.weight)), c.y -= S * v, l.x += E * (v = 1 - v), l.y += S * v
                }
                if (v = a * p) {
                    E = s[0] / 2, S = s[1] / 2, o = -1;
                    if (v)
                        while (++o < t) u = m[o], u.x += (E - u.x) * v, u.y += (S - u.y) * v
                }
                if (h) {
                    Qn(i = d3.geom.quadtree(m), a, w), o = -1;
                    while (++o < t)(u = m[o]).fixed || i.visit(e(u))
                }
                o = -1;
                while (++o < t) u = m[o], u.fixed ? (u.x = u.px, u.y = u.py) : (u.x -= (u.px - (u.px = u.x)) * f, u.y -= (u.py - (u.py = u.y)) * f);
                r.tick({
                    type: "tick",
                    alpha: a
                })
            }, n.nodes = function(e) {
                return arguments.length ? (m = e, n) : m
            }, n.links = function(e) {
                return arguments.length ? (g = e, n) : g
            }, n.size = function(e) {
                return arguments.length ? (s = e, n) : s
            }, n.linkDistance = function(e) {
                return arguments.length ? (l = u(e), n) : l
            }, n.distance = n.linkDistance, n.linkStrength = function(e) {
                return arguments.length ? (c = u(e), n) : c
            }, n.friction = function(e) {
                return arguments.length ? (f = e, n) : f
            }, n.charge = function(e) {
                return arguments.length ? (h = typeof e == "function" ? e : +e, n) : h
            }, n.gravity = function(e) {
                return arguments.length ? (p = e, n) : p
            }, n.theta = function(e) {
                return arguments.length ? (d = e, n) : d
            }, n.alpha = function(e) {
                return arguments.length ? (a ? e > 0 ? a = e : a = 0 : e > 0 && (r.start({
                    type: "start",
                    alpha: a = e
                }), d3.timer(n.tick)), n) : a
            }, n.start = function() {
                function e(e, n) {
                    var i = t(r),
                        s = -1,
                        o = i.length,
                        u;
                    while (++s < o)
                        if (!isNaN(u = i[s][e])) return u;
                    return Math.random() * n
                }

                function t() {
                    if (!p) {
                        p = [];
                        for (i = 0; i < o; ++i) p[i] = [];
                        for (i = 0; i < u; ++i) {
                            var e = g[i];
                            p[e.source.index].push(e.target), p[e.target.index].push(e.source)
                        }
                    }
                    return p[r]
                }
                var r, i, o = m.length,
                    u = g.length,
                    a = s[0],
                    f = s[1],
                    p, d;
                for (r = 0; r < o; ++r)(d = m[r]).index = r, d.weight = 0;
                y = [], b = [];
                for (r = 0; r < u; ++r) d = g[r], typeof d.source == "number" && (d.source = m[d.source]), typeof d.target == "number" && (d.target = m[d.target]), y[r] = l.call(this, d, r), b[r] = c.call(this, d, r), ++d.source.weight, ++d.target.weight;
                for (r = 0; r < o; ++r) d = m[r], isNaN(d.x) && (d.x = e("x", a)), isNaN(d.y) && (d.y = e("y", f)), isNaN(d.px) && (d.px = d.x), isNaN(d.py) && (d.py = d.y);
                w = [];
                if (typeof h == "function")
                    for (r = 0; r < o; ++r) w[r] = +h.call(this, m[r], r);
                else
                    for (r = 0; r < o; ++r) w[r] = h;
                return n.resume()
            }, n.resume = function() {
                return n.alpha(.1)
            }, n.stop = function() {
                return n.alpha(0)
            }, n.drag = function() {
                o || (o = d3.behavior.drag().origin(i).on("dragstart", Vn).on("drag", t).on("dragend", $n)), this.on("mouseover.force", Jn).on("mouseout.force", Kn).call(o)
            }, d3.rebind(n, r, "on")
        }, d3.layout.partition = function() {
            function e(t, n, r, i) {
                var s = t.children;
                t.x = n, t.y = t.depth * i, t.dx = r, t.dy = i;
                if (s && (u = s.length)) {
                    var o = -1,
                        u, a, f;
                    r = t.value ? r / t.value : 0;
                    while (++o < u) e(a = s[o], n, f = a.value * r, i), n += f
                }
            }

            function t(e) {
                var n = e.children,
                    r = 0;
                if (n && (s = n.length)) {
                    var i = -1,
                        s;
                    while (++i < s) r = Math.max(r, t(n[i]))
                }
                return 1 + r
            }

            function n(n, s) {
                var o = r.call(this, n, s);
                return e(o[0], 0, i[0], i[1] / t(o[0])), o
            }
            var r = d3.layout.hierarchy(),
                i = [1, 1];
            return n.size = function(e) {
                return arguments.length ? (i = e, n) : i
            }, lr(n, r)
        }, d3.layout.pie = function() {
            function e(s, o) {
                var u = s.map(function(n, r) {
                        return +t.call(e, n, r)
                    }),
                    a = +(typeof r == "function" ? r.apply(this, arguments) : r),
                    f = ((typeof i == "function" ? i.apply(this, arguments) : i) - r) / d3.sum(u),
                    l = d3.range(s.length);
                n != null && l.sort(n === co ? function(e, t) {
                    return u[t] - u[e]
                } : function(e, t) {
                    return n(s[e], s[t])
                });
                var c = [];
                return l.forEach(function(e) {
                    var t;
                    c[e] = {
                        data: s[e],
                        value: t = u[e],
                        startAngle: a,
                        endAngle: a += t * f
                    }
                }), c
            }
            var t = Number,
                n = co,
                r = 0,
                i = 2 * Math.PI;
            return e.value = function(n) {
                return arguments.length ? (t = n, e) : t
            }, e.sort = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.startAngle = function(t) {
                return arguments.length ? (r = t, e) : r
            }, e.endAngle = function(t) {
                return arguments.length ? (i = t, e) : i
            }, e
        };
        var co = {};
        d3.layout.stack = function() {
            function e(i, a) {
                var f = i.map(function(n, r) {
                        return t.call(e, n, r)
                    }),
                    l = f.map(function(t, n) {
                        return t.map(function(t, n) {
                            return [o.call(e, t, n), u.call(e, t, n)]
                        })
                    }),
                    c = n.call(e, l, a);
                f = d3.permute(f, c), l = d3.permute(l, c);
                var h = r.call(e, l, a),
                    p = f.length,
                    d = f[0].length,
                    v, m, g;
                for (m = 0; m < d; ++m) {
                    s.call(e, f[0][m], g = h[m], l[0][m][1]);
                    for (v = 1; v < p; ++v) s.call(e, f[v][m], g += l[v - 1][m][1], l[v][m][1])
                }
                return i
            }
            var t = i,
                n = nr,
                r = rr,
                s = tr,
                o = Zn,
                u = er;
            return e.values = function(n) {
                return arguments.length ? (t = n, e) : t
            }, e.order = function(t) {
                return arguments.length ? (n = typeof t == "function" ? t : ho.get(t) || nr, e) : n
            }, e.offset = function(t) {
                return arguments.length ? (r = typeof t == "function" ? t : po.get(t) || rr, e) : r
            }, e.x = function(t) {
                return arguments.length ? (o = t, e) : o
            }, e.y = function(t) {
                return arguments.length ? (u = t, e) : u
            }, e.out = function(t) {
                return arguments.length ? (s = t, e) : s
            }, e
        };
        var ho = d3.map({
                "inside-out": function(e) {
                    var t = e.length,
                        n, r, i = e.map(ir),
                        s = e.map(sr),
                        o = d3.range(t).sort(function(e, t) {
                            return i[e] - i[t]
                        }),
                        u = 0,
                        a = 0,
                        f = [],
                        l = [];
                    for (n = 0; n < t; ++n) r = o[n], u < a ? (u += s[r], f.push(r)) : (a += s[r], l.push(r));
                    return l.reverse().concat(f)
                },
                reverse: function(e) {
                    return d3.range(e.length).reverse()
                },
                "default": nr
            }),
            po = d3.map({
                silhouette: function(e) {
                    var t = e.length,
                        n = e[0].length,
                        r = [],
                        i = 0,
                        s, o, u, a = [];
                    for (o = 0; o < n; ++o) {
                        for (s = 0, u = 0; s < t; s++) u += e[s][o][1];
                        u > i && (i = u), r.push(u)
                    }
                    for (o = 0; o < n; ++o) a[o] = (i - r[o]) / 2;
                    return a
                },
                wiggle: function(e) {
                    var t = e.length,
                        n = e[0],
                        r = n.length,
                        i = 0,
                        s, o, u, a, f, l, c, h, p, d = [];
                    d[0] = h = p = 0;
                    for (o = 1; o < r; ++o) {
                        for (s = 0, a = 0; s < t; ++s) a += e[s][o][1];
                        for (s = 0, f = 0, c = n[o][0] - n[o - 1][0]; s < t; ++s) {
                            for (u = 0, l = (e[s][o][1] - e[s][o - 1][1]) / (2 * c); u < s; ++u) l += (e[u][o][1] - e[u][o - 1][1]) / c;
                            f += l * e[s][o][1]
                        }
                        d[o] = h -= a ? f / a * c : 0, h < p && (p = h)
                    }
                    for (o = 0; o < r; ++o) d[o] -= p;
                    return d
                },
                expand: function(e) {
                    var t = e.length,
                        n = e[0].length,
                        r = 1 / t,
                        i, s, o, u = [];
                    for (s = 0; s < n; ++s) {
                        for (i = 0, o = 0; i < t; i++) o += e[i][s][1];
                        if (o)
                            for (i = 0; i < t; i++) e[i][s][1] /= o;
                        else
                            for (i = 0; i < t; i++) e[i][s][1] = r
                    }
                    for (s = 0; s < n; ++s) u[s] = 0;
                    return u
                },
                zero: rr
            });
        d3.layout.histogram = function() {
            function e(e, s) {
                var o = [],
                    u = e.map(n, this),
                    a = r.call(this, u, s),
                    f = i.call(this, a, u, s),
                    l, s = -1,
                    c = u.length,
                    h = f.length - 1,
                    p = t ? 1 : 1 / c,
                    d;
                while (++s < h) l = o[s] = [], l.dx = f[s + 1] - (l.x = f[s]), l.y = 0;
                if (h > 0) {
                    s = -1;
                    while (++s < c) d = u[s], d >= a[0] && d <= a[1] && (l = o[d3.bisect(f, d, 1, h) - 1], l.y += p, l.push(e[s]))
                }
                return o
            }
            var t = !0,
                n = Number,
                r = fr,
                i = ur;
            return e.value = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.range = function(t) {
                return arguments.length ? (r = u(t), e) : r
            }, e.bins = function(t) {
                return arguments.length ? (i = typeof t == "number" ? function(e) {
                    return ar(e, t)
                } : u(t), e) : i
            }, e.frequency = function(n) {
                return arguments.length ? (t = !!n, e) : t
            }, e
        }, d3.layout.hierarchy = function() {
            function e(t, o, u) {
                var a = i.call(n, t, o),
                    f = vo ? t : {
                        data: t
                    };
                f.depth = o, u.push(f);
                if (a && (c = a.length)) {
                    var l = -1,
                        c, h = f.children = [],
                        p = 0,
                        d = o + 1,
                        v;
                    while (++l < c) v = e(a[l], d, u), v.parent = f, h.push(v), p += v.value;
                    r && h.sort(r), s && (f.value = p)
                } else s && (f.value = +s.call(n, t, o) || 0);
                return f
            }

            function t(e, r) {
                var i = e.children,
                    o = 0;
                if (i && (a = i.length)) {
                    var u = -1,
                        a, f = r + 1;
                    while (++u < a) o += t(i[u], f)
                } else s && (o = +s.call(n, vo ? e : e.data, r) || 0);
                return s && (e.value = o), o
            }

            function n(t) {
                var n = [];
                return e(t, 0, n), n
            }
            var r = pr,
                i = cr,
                s = hr;
            return n.sort = function(e) {
                return arguments.length ? (r = e, n) : r
            }, n.children = function(e) {
                return arguments.length ? (i = e, n) : i
            }, n.value = function(e) {
                return arguments.length ? (s = e, n) : s
            }, n.revalue = function(e) {
                return t(e, 0), e
            }, n
        };
        var vo = !1;
        d3.layout.pack = function() {
            function e(e, i) {
                var s = t.call(this, e, i),
                    o = s[0];
                o.x = 0, o.y = 0, Hr(o, function(e) {
                    e.r = Math.sqrt(e.value)
                }), Hr(o, br);
                var u = r[0],
                    a = r[1],
                    f = Math.max(2 * o.r / u, 2 * o.r / a);
                if (n > 0) {
                    var l = n * f / 2;
                    Hr(o, function(e) {
                        e.r += l
                    }), Hr(o, br), Hr(o, function(e) {
                        e.r -= l
                    }), f = Math.max(2 * o.r / u, 2 * o.r / a)
                }
                return Sr(o, u / 2, a / 2, 1 / f), s
            }
            var t = d3.layout.hierarchy().sort(vr),
                n = 0,
                r = [1, 1];
            return e.size = function(t) {
                return arguments.length ? (r = t, e) : r
            }, e.padding = function(t) {
                return arguments.length ? (n = +t, e) : n
            }, lr(e, t)
        }, d3.layout.cluster = function() {
            function e(e, i) {
                var s = t.call(this, e, i),
                    o = s[0],
                    u, a = 0,
                    f, l;
                Hr(o, function(e) {
                    var t = e.children;
                    t && t.length ? (e.x = Nr(t), e.y = Tr(t)) : (e.x = u ? a += n(e, u) : 0, e.y = 0, u = e)
                });
                var c = Cr(o),
                    h = kr(o),
                    p = c.x - n(c, h) / 2,
                    d = h.x + n(h, c) / 2;
                return Hr(o, function(e) {
                    e.x = (e.x - p) / (d - p) * r[0], e.y = (1 - (o.y ? e.y / o.y : 1)) * r[1]
                }), s
            }
            var t = d3.layout.hierarchy().sort(null).value(null),
                n = Lr,
                r = [1, 1];
            return e.separation = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.size = function(t) {
                return arguments.length ? (r = t, e) : r
            }, lr(e, t)
        }, d3.layout.tree = function() {
            function e(e, i) {
                function s(e, t) {
                    var r = e.children,
                        i = e._tree;
                    if (r && (o = r.length)) {
                        var o, a = r[0],
                            f, l = a,
                            c, h = -1;
                        while (++h < o) c = r[h], s(c, f), l = u(c, f, l), f = c;
                        Br(e);
                        var p = .5 * (a._tree.prelim + c._tree.prelim);
                        t ? (i.prelim = t._tree.prelim + n(e, t), i.mod = i.prelim - p) : i.prelim = p
                    } else t && (i.prelim = t._tree.prelim + n(e, t))
                }

                function o(e, t) {
                    e.x = e._tree.prelim + t;
                    var n = e.children;
                    if (n && (i = n.length)) {
                        var r = -1,
                            i;
                        t += e._tree.mod;
                        while (++r < i) o(n[r], t)
                    }
                }

                function u(e, t, r) {
                    if (t) {
                        var i = e,
                            s = e,
                            o = t,
                            u = e.parent.children[0],
                            a = i._tree.mod,
                            f = s._tree.mod,
                            l = o._tree.mod,
                            c = u._tree.mod,
                            h;
                        while (o = Or(o), i = Ar(i), o && i) u = Ar(u), s = Or(s), s._tree.ancestor = e, h = o._tree.prelim + l - i._tree.prelim - a + n(o, i), h > 0 && (jr(Fr(o, e, r), e, h), a += h, f += h), l += o._tree.mod, a += i._tree.mod, c += u._tree.mod, f += s._tree.mod;
                        o && !Or(s) && (s._tree.thread = o, s._tree.mod += l - f), i && !Ar(u) && (u._tree.thread = i, u._tree.mod += a - c, r = e)
                    }
                    return r
                }
                var a = t.call(this, e, i),
                    f = a[0];
                Hr(f, function(e, t) {
                    e._tree = {
                        ancestor: e,
                        prelim: 0,
                        mod: 0,
                        change: 0,
                        shift: 0,
                        number: t ? t._tree.number + 1 : 0
                    }
                }), s(f), o(f, -f._tree.prelim);
                var l = Mr(f, Dr),
                    c = Mr(f, _r),
                    h = Mr(f, Pr),
                    p = l.x - n(l, c) / 2,
                    d = c.x + n(c, l) / 2,
                    v = h.depth || 1;
                return Hr(f, function(e) {
                    e.x = (e.x - p) / (d - p) * r[0], e.y = e.depth / v * r[1], delete e._tree
                }), a
            }
            var t = d3.layout.hierarchy().sort(null).value(null),
                n = Lr,
                r = [1, 1];
            return e.separation = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.size = function(t) {
                return arguments.length ? (r = t, e) : r
            }, lr(e, t)
        }, d3.layout.treemap = function() {
            function e(e, t) {
                var n = -1,
                    r = e.length,
                    i, s;
                while (++n < r) s = (i = e[n]).value * (t < 0 ? 0 : t), i.area = isNaN(s) || s <= 0 ? 0 : s
            }

            function t(n) {
                var s = n.children;
                if (s && s.length) {
                    var o = l(n),
                        u = [],
                        a = s.slice(),
                        f, c = Infinity,
                        h, p = Math.min(o.dx, o.dy),
                        d;
                    e(a, o.dx * o.dy / n.value), u.area = 0;
                    while ((d = a.length) > 0) u.push(f = a[d - 1]), u.area += f.area, (h = r(u, p)) <= c ? (a.pop(), c = h) : (u.area -= u.pop().area, i(u, p, o, !1), p = Math.min(o.dx, o.dy), u.length = u.area = 0, c = Infinity);
                    u.length && (i(u, p, o, !0), u.length = u.area = 0), s.forEach(t)
                }
            }

            function n(t) {
                var r = t.children;
                if (r && r.length) {
                    var s = l(t),
                        o = r.slice(),
                        u, a = [];
                    e(o, s.dx * s.dy / t.value), a.area = 0;
                    while (u = o.pop()) a.push(u), a.area += u.area, u.z != null && (i(a, u.z ? s.dx : s.dy, s, !o.length), a.length = a.area = 0);
                    r.forEach(n)
                }
            }

            function r(e, t) {
                var n = e.area,
                    r, i = 0,
                    s = Infinity,
                    o = -1,
                    u = e.length;
                while (++o < u) {
                    if (!(r = e[o].area)) continue;
                    r < s && (s = r), r > i && (i = r)
                }
                return n *= n, t *= t, n ? Math.max(t * i * p / n, n / (t * s * p)) : Infinity
            }

            function i(e, t, n, r) {
                var i = -1,
                    s = e.length,
                    o = n.x,
                    a = n.y,
                    f = t ? u(e.area / t) : 0,
                    l;
                if (t == n.dx) {
                    if (r || f > n.dy) f = n.dy;
                    while (++i < s) l = e[i], l.x = o, l.y = a, l.dy = f, o += l.dx = Math.min(n.x + n.dx - o, f ? u(l.area / f) : 0);
                    l.z = !0, l.dx += n.x + n.dx - o, n.y += f, n.dy -= f
                } else {
                    if (r || f > n.dx) f = n.dx;
                    while (++i < s) l = e[i], l.x = o, l.y = a, l.dx = f, a += l.dy = Math.min(n.y + n.dy - a, f ? u(l.area / f) : 0);
                    l.z = !1, l.dy += n.y + n.dy - a, n.x += f, n.dx -= f
                }
            }

            function s(r) {
                var i = h || o(r),
                    s = i[0];
                return s.x = 0, s.y = 0, s.dx = a[0], s.dy = a[1], h && o.revalue(s), e([s], s.dx * s.dy / s.value), (h ? n : t)(s), c && (h = i), i
            }
            var o = d3.layout.hierarchy(),
                u = Math.round,
                a = [1, 1],
                f = null,
                l = Ir,
                c = !1,
                h, p = .5 * (1 + Math.sqrt(5));
            return s.size = function(e) {
                return arguments.length ? (a = e, s) : a
            }, s.padding = function(e) {
                function t(t) {
                    var n = e.call(s, t, t.depth);
                    return n == null ? Ir(t) : qr(t, typeof n == "number" ? [n, n, n, n] : n)
                }

                function n(t) {
                    return qr(t, e)
                }
                if (!arguments.length) return f;
                var r;
                return l = (f = e) == null ? Ir : (r = typeof e) === "function" ? t : r === "number" ? (e = [e, e, e, e], n) : n, s
            }, s.round = function(e) {
                return arguments.length ? (u = e ? Math.round : Number, s) : u != Number
            }, s.sticky = function(e) {
                return arguments.length ? (c = e, h = null, s) : c
            }, s.ratio = function(e) {
                return arguments.length ? (p = e, s) : p
            }, lr(s, o)
        }, d3.csv = Rr(",", "text/csv"), d3.tsv = Rr(" ", "text/tab-separated-values"), d3.geo = {};
        var mo = Math.PI / 180;
        d3.geo.azimuthal = function() {
            function e(e) {
                var n = e[0] * mo - s,
                    o = e[1] * mo,
                    f = Math.cos(n),
                    l = Math.sin(n),
                    c = Math.cos(o),
                    h = Math.sin(o),
                    p = t !== "orthographic" ? a * h + u * c * f : null,
                    d, v = t === "stereographic" ? 1 / (1 + p) : t === "gnomonic" ? 1 / p : t === "equidistant" ? (d = Math.acos(p), d ? d / Math.sin(d) : 0) : t === "equalarea" ? Math.sqrt(2 / (1 + p)) : 1,
                    m = v * c * l,
                    g = v * (a * c * f - u * h);
                return [r * m + i[0], r * g + i[1]]
            }
            var t = "orthographic",
                n, r = 200,
                i = [480, 250],
                s, o, u, a;
            return e.invert = function(e) {
                var n = (e[0] - i[0]) / r,
                    o = (e[1] - i[1]) / r,
                    f = Math.sqrt(n * n + o * o),
                    l = t === "stereographic" ? 2 * Math.atan(f) : t === "gnomonic" ? Math.atan(f) : t === "equidistant" ? f : t === "equalarea" ? 2 * Math.asin(.5 * f) : Math.asin(f),
                    c = Math.sin(l),
                    h = Math.cos(l);
                return [(s + Math.atan2(n * c, f * u * h + o * a * c)) / mo, Math.asin(h * a - (f ? o * c * u / f : 0)) / mo]
            }, e.mode = function(n) {
                return arguments.length ? (t = n + "", e) : t
            }, e.origin = function(t) {
                return arguments.length ? (n = t, s = n[0] * mo, o = n[1] * mo, u = Math.cos(o), a = Math.sin(o), e) : n
            }, e.scale = function(t) {
                return arguments.length ? (r = +t, e) : r
            }, e.translate = function(t) {
                return arguments.length ? (i = [+t[0], +t[1]], e) : i
            }, e.origin([0, 0])
        }, d3.geo.albers = function() {
            function e(e) {
                var t = u * (mo * e[0] - o),
                    n = Math.sqrt(a - 2 * u * Math.sin(mo * e[1])) / u;
                return [i * n * Math.sin(t) + s[0], i * (n * Math.cos(t) - f) + s[1]]
            }

            function t() {
                var t = mo * r[0],
                    i = mo * r[1],
                    s = mo * n[1],
                    l = Math.sin(t),
                    c = Math.cos(t);
                return o = mo * n[0], u = .5 * (l + Math.sin(i)), a = c * c + 2 * u * l, f = Math.sqrt(a - 2 * u * Math.sin(s)) / u, e
            }
            var n = [-98, 38],
                r = [29.5, 45.5],
                i = 1e3,
                s = [480, 250],
                o, u, a, f;
            return e.invert = function(e) {
                var t = (e[0] - s[0]) / i,
                    n = (e[1] - s[1]) / i,
                    r = f + n,
                    l = Math.atan2(t, r),
                    c = Math.sqrt(t * t + r * r);
                return [(o + l / u) / mo, Math.asin((a - c * c * u * u) / (2 * u)) / mo]
            }, e.origin = function(e) {
                return arguments.length ? (n = [+e[0], +e[1]], t()) : n
            }, e.parallels = function(e) {
                return arguments.length ? (r = [+e[0], +e[1]], t()) : r
            }, e.scale = function(t) {
                return arguments.length ? (i = +t, e) : i
            }, e.translate = function(t) {
                return arguments.length ? (s = [+t[0], +t[1]], e) : s
            }, t()
        }, d3.geo.albersUsa = function() {
            function e(e) {
                var s = e[0],
                    o = e[1];
                return (o > 50 ? n : s < -140 ? r : o < 21 ? i : t)(e)
            }
            var t = d3.geo.albers(),
                n = d3.geo.albers().origin([-160, 60]).parallels([55, 65]),
                r = d3.geo.albers().origin([-160, 20]).parallels([8, 18]),
                i = d3.geo.albers().origin([-60, 10]).parallels([8, 18]);
            return e.scale = function(s) {
                return arguments.length ? (t.scale(s), n.scale(s * .6), r.scale(s), i.scale(s * 1.5), e.translate(t.translate())) : t.scale()
            }, e.translate = function(s) {
                if (!arguments.length) return t.translate();
                var o = t.scale() / 1e3,
                    u = s[0],
                    a = s[1];
                return t.translate(s), n.translate([u - 400 * o, a + 170 * o]), r.translate([u - 190 * o, a + 200 * o]), i.translate([u + 580 * o, a + 430 * o]), e
            }, e.scale(t.scale())
        }, d3.geo.bonne = function() {
            function e(e) {
                var u = e[0] * mo - r,
                    a = e[1] * mo - i;
                if (s) {
                    var f = o + s - a,
                        l = u * Math.cos(a) / f;
                    u = f * Math.sin(l), a = f * Math.cos(l) - o
                } else u *= Math.cos(a), a *= -1;
                return [t * u + n[0], t * a + n[1]]
            }
            var t = 200,
                n = [480, 250],
                r, i, s, o;
            return e.invert = function(e) {
                var i = (e[0] - n[0]) / t,
                    u = (e[1] - n[1]) / t;
                if (s) {
                    var a = o + u,
                        f = Math.sqrt(i * i + a * a);
                    u = o + s - f, i = r + f * Math.atan2(i, a) / Math.cos(u)
                } else u *= -1, i /= Math.cos(u);
                return [i / mo, u / mo]
            }, e.parallel = function(t) {
                return arguments.length ? (o = 1 / Math.tan(s = t * mo), e) : s / mo
            }, e.origin = function(t) {
                return arguments.length ? (r = t[0] * mo, i = t[1] * mo, e) : [r / mo, i / mo]
            }, e.scale = function(n) {
                return arguments.length ? (t = +n, e) : t
            }, e.translate = function(t) {
                return arguments.length ? (n = [+t[0], +t[1]], e) : n
            }, e.origin([0, 0]).parallel(45)
        }, d3.geo.equirectangular = function() {
            function e(e) {
                var r = e[0] / 360,
                    i = -e[1] / 360;
                return [t * r + n[0], t * i + n[1]]
            }
            var t = 500,
                n = [480, 250];
            return e.invert = function(e) {
                var r = (e[0] - n[0]) / t,
                    i = (e[1] - n[1]) / t;
                return [360 * r, -360 * i]
            }, e.scale = function(n) {
                return arguments.length ? (t = +n, e) : t
            }, e.translate = function(t) {
                return arguments.length ? (n = [+t[0], +t[1]], e) : n
            }, e
        }, d3.geo.mercator = function() {
            function e(e) {
                var r = e[0] / 360,
                    i = -(Math.log(Math.tan(Math.PI / 4 + e[1] * mo / 2)) / mo) / 360;
                return [t * r + n[0], t * Math.max(-0.5, Math.min(.5, i)) + n[1]]
            }
            var t = 500,
                n = [480, 250];
            return e.invert = function(e) {
                var r = (e[0] - n[0]) / t,
                    i = (e[1] - n[1]) / t;
                return [360 * r, 2 * Math.atan(Math.exp(-360 * i * mo)) / mo - 90]
            }, e.scale = function(n) {
                return arguments.length ? (t = +n, e) : t
            }, e.translate = function(t) {
                return arguments.length ? (n = [+t[0], +t[1]], e) : n
            }, e
        }, d3.geo.path = function() {
            function e(e, t) {
                typeof s == "function" && (o = zr(s.apply(this, arguments))), f(e);
                var n = a.length ? a.join("") : null;
                return a = [], n
            }

            function t(e) {
                return u(e).join(",")
            }

            function n(e) {
                var t = i(e[0]),
                    n = 0,
                    r = e.length;
                while (++n < r) t -= i(e[n]);
                return t
            }

            function r(e) {
                var t = d3.geom.polygon(e[0].map(u)),
                    n = t.area(),
                    r = t.centroid(n < 0 ? (n *= -1, 1) : -1),
                    i = r[0],
                    s = r[1],
                    o = n,
                    a = 0,
                    f = e.length;
                while (++a < f) t = d3.geom.polygon(e[a].map(u)), n = t.area(), r = t.centroid(n < 0 ? (n *= -1, 1) : -1), i -= r[0], s -= r[1], o -= n;
                return [i, s, 6 * o]
            }

            function i(e) {
                return Math.abs(d3.geom.polygon(e.map(u)).area())
            }
            var s = 4.5,
                o = zr(s),
                u = d3.geo.albersUsa(),
                a = [],
                f = Ur({
                    FeatureCollection: function(e) {
                        var t = e.features,
                            n = -1,
                            r = t.length;
                        while (++n < r) a.push(f(t[n].geometry))
                    },
                    Feature: function(e) {
                        f(e.geometry)
                    },
                    Point: function(e) {
                        a.push("M", t(e.coordinates), o)
                    },
                    MultiPoint: function(e) {
                        var n = e.coordinates,
                            r = -1,
                            i = n.length;
                        while (++r < i) a.push("M", t(n[r]), o)
                    },
                    LineString: function(e) {
                        var n = e.coordinates,
                            r = -1,
                            i = n.length;
                        a.push("M");
                        while (++r < i) a.push(t(n[r]), "L");
                        a.pop()
                    },
                    MultiLineString: function(e) {
                        var n = e.coordinates,
                            r = -1,
                            i = n.length,
                            s, o, u;
                        while (++r < i) {
                            s = n[r], o = -1, u = s.length, a.push("M");
                            while (++o < u) a.push(t(s[o]), "L");
                            a.pop()
                        }
                    },
                    Polygon: function(e) {
                        var n = e.coordinates,
                            r = -1,
                            i = n.length,
                            s, o, u;
                        while (++r < i) {
                            s = n[r], o = -1;
                            if ((u = s.length - 1) > 0) {
                                a.push("M");
                                while (++o < u) a.push(t(s[o]), "L");
                                a[a.length - 1] = "Z"
                            }
                        }
                    },
                    MultiPolygon: function(e) {
                        var n = e.coordinates,
                            r = -1,
                            i = n.length,
                            s, o, u, f, l, c;
                        while (++r < i) {
                            s = n[r], o = -1, u = s.length;
                            while (++o < u) {
                                f = s[o], l = -1;
                                if ((c = f.length - 1) > 0) {
                                    a.push("M");
                                    while (++l < c) a.push(t(f[l]), "L");
                                    a[a.length - 1] = "Z"
                                }
                            }
                        }
                    },
                    GeometryCollection: function(e) {
                        var t = e.geometries,
                            n = -1,
                            r = t.length;
                        while (++n < r) a.push(f(t[n]))
                    }
                }),
                l = e.area = Ur({
                    FeatureCollection: function(e) {
                        var t = 0,
                            n = e.features,
                            r = -1,
                            i = n.length;
                        while (++r < i) t += l(n[r]);
                        return t
                    },
                    Feature: function(e) {
                        return l(e.geometry)
                    },
                    Polygon: function(e) {
                        return n(e.coordinates)
                    },
                    MultiPolygon: function(e) {
                        var t = 0,
                            r = e.coordinates,
                            i = -1,
                            s = r.length;
                        while (++i < s) t += n(r[i]);
                        return t
                    },
                    GeometryCollection: function(e) {
                        var t = 0,
                            n = e.geometries,
                            r = -1,
                            i = n.length;
                        while (++r < i) t += l(n[r]);
                        return t
                    }
                }, 0),
                c = e.centroid = Ur({
                    Feature: function(e) {
                        return c(e.geometry)
                    },
                    Polygon: function(e) {
                        var t = r(e.coordinates);
                        return [t[0] / t[2], t[1] / t[2]]
                    },
                    MultiPolygon: function(e) {
                        var t = 0,
                            n = e.coordinates,
                            i, s = 0,
                            o = 0,
                            u = 0,
                            a = -1,
                            f = n.length;
                        while (++a < f) i = r(n[a]), s += i[0], o += i[1], u += i[2];
                        return [s / u, o / u]
                    }
                });
            return e.projection = function(t) {
                return u = t, e
            }, e.pointRadius = function(t) {
                return typeof t == "function" ? s = t : (s = +t, o = zr(s)), e
            }, e
        }, d3.geo.bounds = function(e) {
            var t = Infinity,
                n = Infinity,
                r = -Infinity,
                i = -Infinity;
            return Wr(e, function(e, s) {
                e < t && (t = e), e > r && (r = e), s < n && (n = s), s > i && (i = s)
            }), [
                [t, n],
                [r, i]
            ]
        };
        var go = {
            Feature: Xr,
            FeatureCollection: Vr,
            GeometryCollection: $r,
            LineString: Jr,
            MultiLineString: Kr,
            MultiPoint: Jr,
            MultiPolygon: Qr,
            Point: Gr,
            Polygon: Yr
        };
        d3.geo.circle = function() {
            function e() {}

            function t(e) {
                return a.distance(e) < u
            }

            function n(e) {
                var t = -1,
                    n = e.length,
                    i = [],
                    s, o, f, l, c;
                while (++t < n) c = a.distance(f = e[t]), c < u ? (o && i.push(ni(o, f)((l - u) / (l - c))), i.push(f), s = o = null) : (o = f, !s && i.length && (i.push(ni(i[i.length - 1], o)((u - l) / (c - l))), s = o)), l = c;
                return s = e[0], o = i[0], o && f[0] === s[0] && f[1] === s[1] && (f[0] !== o[0] || f[1] !== o[1]) && i.push(o), r(i)
            }

            function r(e) {
                var t = 0,
                    n = e.length,
                    r, i, s = n ? [e[0]] : e,
                    o, u = a.source();
                while (++t < n) {
                    o = a.source(e[t - 1])(e[t]).coordinates;
                    for (r = 0, i = o.length; ++r < i;) s.push(o[r])
                }
                return a.source(u), s
            }
            var s = [0, 0],
                o = 89.99,
                u = o * mo,
                a = d3.geo.greatArc().source(s).target(i);
            e.clip = function(e) {
                return typeof s == "function" && a.source(s.apply(this, arguments)), f(e) || null
            };
            var f = Ur({
                FeatureCollection: function(e) {
                    var t = e.features.map(f).filter(i);
                    return t && (e = Object.create(e), e.features = t, e)
                },
                Feature: function(e) {
                    var t = f(e.geometry);
                    return t && (e = Object.create(e), e.geometry = t, e)
                },
                Point: function(e) {
                    return t(e.coordinates) && e
                },
                MultiPoint: function(e) {
                    var n = e.coordinates.filter(t);
                    return n.length && {
                        type: e.type,
                        coordinates: n
                    }
                },
                LineString: function(e) {
                    var t = n(e.coordinates);
                    return t.length && (e = Object.create(e), e.coordinates = t, e)
                },
                MultiLineString: function(e) {
                    var t = e.coordinates.map(n).filter(function(e) {
                        return e.length
                    });
                    return t.length && (e = Object.create(e), e.coordinates = t, e)
                },
                Polygon: function(e) {
                    var t = e.coordinates.map(n);
                    return t[0].length && (e = Object.create(e), e.coordinates = t, e)
                },
                MultiPolygon: function(e) {
                    var t = e.coordinates.map(function(e) {
                        return e.map(n)
                    }).filter(function(e) {
                        return e[0].length
                    });
                    return t.length && (e = Object.create(e), e.coordinates = t, e)
                },
                GeometryCollection: function(e) {
                    var t = e.geometries.map(f).filter(i);
                    return t.length && (e = Object.create(e), e.geometries = t, e)
                }
            });
            return e.origin = function(t) {
                return arguments.length ? (s = t, typeof s != "function" && a.source(s), e) : s
            }, e.angle = function(t) {
                return arguments.length ? (u = (o = +t) * mo, e) : o
            }, d3.rebind(e, a, "precision")
        }, d3.geo.greatArc = function() {
            function e() {
                var t = e.distance.apply(this, arguments),
                    r = 0,
                    u = s / t,
                    a = [n];
                while ((r += u) < 1) a.push(o(r));
                return a.push(i), {
                    type: "LineString",
                    coordinates: a
                }
            }
            var t = Zr,
                n, r = ei,
                i, s = 6 * mo,
                o = ti();
            return e.distance = function() {
                return typeof t == "function" && o.source(n = t.apply(this, arguments)), typeof r == "function" && o.target(i = r.apply(this, arguments)), o.distance()
            }, e.source = function(r) {
                return arguments.length ? (t = r, typeof t != "function" && o.source(n = t), e) : t
            }, e.target = function(t) {
                return arguments.length ? (r = t, typeof r != "function" && o.target(i = r), e) : r
            }, e.precision = function(t) {
                return arguments.length ? (s = t * mo, e) : s / mo
            }, e
        }, d3.geo.greatCircle = d3.geo.circle, d3.geom = {}, d3.geom.contour = function(e, t) {
            var n = t || ri(e),
                r = [],
                i = n[0],
                s = n[1],
                o = 0,
                u = 0,
                a = NaN,
                f = NaN,
                l = 0;
            do l = 0, e(i - 1, s - 1) && (l += 1), e(i, s - 1) && (l += 2), e(i - 1, s) && (l += 4), e(i, s) && (l += 8), l === 6 ? (o = f === -1 ? -1 : 1, u = 0) : l === 9 ? (o = 0, u = a === 1 ? -1 : 1) : (o = yo[l], u = bo[l]), o != a && u != f && (r.push([i, s]), a = o, f = u), i += o, s += u; while (n[0] != i || n[1] != s);
            return r
        };
        var yo = [1, 0, 1, 1, -1, 0, -1, 1, 0, 0, 0, 0, -1, 0, -1, NaN],
            bo = [0, -1, 0, 0, 0, -1, 0, 0, 1, -1, 1, 1, 0, -1, 0, NaN];
        d3.geom.hull = function(e) {
            if (e.length < 3) return [];
            var t = e.length,
                n = t - 1,
                r = [],
                i = [],
                s, o, u = 0,
                a, f, l, c, h, p, d, v;
            for (s = 1; s < t; ++s) e[s][1] < e[u][1] ? u = s : e[s][1] == e[u][1] && (u = e[s][0] < e[u][0] ? s : u);
            for (s = 0; s < t; ++s) {
                if (s === u) continue;
                f = e[s][1] - e[u][1], a = e[s][0] - e[u][0], r.push({
                    angle: Math.atan2(f, a),
                    index: s
                })
            }
            r.sort(function(e, t) {
                return e.angle - t.angle
            }), d = r[0].angle, p = r[0].index, h = 0;
            for (s = 1; s < n; ++s) o = r[s].index, d == r[s].angle ? (a = e[p][0] - e[u][0], f = e[p][1] - e[u][1], l = e[o][0] - e[u][0], c = e[o][1] - e[u][1], a * a + f * f >= l * l + c * c ? r[s].index = -1 : (r[h].index = -1, d = r[s].angle, h = s, p = o)) : (d = r[s].angle, h = s, p = o);
            i.push(u);
            for (s = 0, o = 0; s < 2; ++o) r[o].index !== -1 && (i.push(r[o].index), s++);
            v = i.length;
            for (; o < n; ++o) {
                if (r[o].index === -1) continue;
                while (!ii(i[v - 2], i[v - 1], r[o].index, e)) --v;
                i[v++] = r[o].index
            }
            var m = [];
            for (s = 0; s < v; ++s) m.push(e[i[s]]);
            return m
        }, d3.geom.polygon = function(e) {
            return e.area = function() {
                var t = 0,
                    n = e.length,
                    r = e[n - 1][0] * e[0][1],
                    i = e[n - 1][1] * e[0][0];
                while (++t < n) r += e[t - 1][0] * e[t][1], i += e[t - 1][1] * e[t][0];
                return (i - r) * .5
            }, e.centroid = function(t) {
                var n = -1,
                    r = e.length,
                    i = 0,
                    s = 0,
                    o, u = e[r - 1],
                    a;
                arguments.length || (t = -1 / (6 * e.area()));
                while (++n < r) o = u, u = e[n], a = o[0] * u[1] - u[0] * o[1], i += (o[0] + u[0]) * a, s += (o[1] + u[1]) * a;
                return [i * t, s * t]
            }, e.clip = function(t) {
                var n, r = -1,
                    i = e.length,
                    s, o, u = e[i - 1],
                    a, f, l;
                while (++r < i) {
                    n = t.slice(), t.length = 0, a = e[r], f = n[(o = n.length) - 1], s = -1;
                    while (++s < o) l = n[s], si(l, u, a) ? (si(f, u, a) || t.push(oi(f, l, u, a)), t.push(l)) : si(f, u, a) && t.push(oi(f, l, u, a)), f = l;
                    u = a
                }
                return t
            }, e
        }, d3.geom.voronoi = function(e) {
            var t = e.map(function() {
                return []
            });
            return ui(e, function(e) {
                var n, r, i, s, o, u;
                e.a === 1 && e.b >= 0 ? (n = e.ep.r, r = e.ep.l) : (n = e.ep.l, r = e.ep.r), e.a === 1 ? (o = n ? n.y : -1e6, i = e.c - e.b * o, u = r ? r.y : 1e6, s = e.c - e.b * u) : (i = n ? n.x : -1e6, o = e.c - e.a * i, s = r ? r.x : 1e6, u = e.c - e.a * s);
                var a = [i, o],
                    f = [s, u];
                t[e.region.l.index].push(a, f), t[e.region.r.index].push(a, f)
            }), t.map(function(t, n) {
                var r = e[n][0],
                    i = e[n][1];
                return t.forEach(function(e) {
                    e.angle = Math.atan2(e[0] - r, e[1] - i)
                }), t.sort(function(e, t) {
                    return e.angle - t.angle
                }).filter(function(e, n) {
                    return !n || e.angle - t[n - 1].angle > 1e-10
                })
            })
        };
        var wo = {
            l: "r",
            r: "l"
        };
        d3.geom.delaunay = function(e) {
            var t = e.map(function() {
                    return []
                }),
                n = [];
            return ui(e, function(n) {
                t[n.region.l.index].push(e[n.region.r.index])
            }), t.forEach(function(t, r) {
                var i = e[r],
                    s = i[0],
                    o = i[1];
                t.forEach(function(e) {
                    e.angle = Math.atan2(e[0] - s, e[1] - o)
                }), t.sort(function(e, t) {
                    return e.angle - t.angle
                });
                for (var u = 0, a = t.length - 1; u < a; u++) n.push([i, t[u], t[u + 1]])
            }), n
        }, d3.geom.quadtree = function(e, t, n, r, i) {
            function s(e, t, n, r, i, s) {
                if (isNaN(t.x) || isNaN(t.y)) return;
                if (e.leaf) {
                    var u = e.point;
                    u ? Math.abs(u.x - t.x) + Math.abs(u.y - t.y) < .01 ? o(e, t, n, r, i, s) : (e.point = null, o(e, u, n, r, i, s), o(e, t, n, r, i, s)) : e.point = t
                } else o(e, t, n, r, i, s)
            }

            function o(e, t, n, r, i, o) {
                var u = (n + i) * .5,
                    a = (r + o) * .5,
                    f = t.x >= u,
                    l = t.y >= a,
                    c = (l << 1) + f;
                e.leaf = !1, e = e.nodes[c] || (e.nodes[c] = ai()), f ? n = u : i = u, l ? r = a : o = a, s(e, t, n, r, i, o)
            }
            var u, a = -1,
                f = e.length;
            f && isNaN(e[0].x) && (e = e.map(li));
            if (arguments.length < 5)
                if (arguments.length === 3) i = r = n, n = t;
                else {
                    t = n = Infinity, r = i = -Infinity;
                    while (++a < f) u = e[a], u.x < t && (t = u.x), u.y < n && (n = u.y), u.x > r && (r = u.x), u.y > i && (i = u.y);
                    var l = r - t,
                        c = i - n;
                    l > c ? i = n + l : r = t + c
                }
            var h = ai();
            return h.add = function(e) {
                s(h, e, t, n, r, i)
            }, h.visit = function(e) {
                fi(e, h, t, n, r, i)
            }, e.forEach(h.add), h
        }, d3.time = {};
        var Eo = Date,
            So = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        ci.prototype = {
            getDate: function() {
                return this._.getUTCDate()
            },
            getDay: function() {
                return this._.getUTCDay()
            },
            getFullYear: function() {
                return this._.getUTCFullYear()
            },
            getHours: function() {
                return this._.getUTCHours()
            },
            getMilliseconds: function() {
                return this._.getUTCMilliseconds()
            },
            getMinutes: function() {
                return this._.getUTCMinutes()
            },
            getMonth: function() {
                return this._.getUTCMonth()
            },
            getSeconds: function() {
                return this._.getUTCSeconds()
            },
            getTime: function() {
                return this._.getTime()
            },
            getTimezoneOffset: function() {
                return 0
            },
            valueOf: function() {
                return this._.valueOf()
            },
            setDate: function() {
                xo.setUTCDate.apply(this._, arguments)
            },
            setDay: function() {
                xo.setUTCDay.apply(this._, arguments)
            },
            setFullYear: function() {
                xo.setUTCFullYear.apply(this._, arguments)
            },
            setHours: function() {
                xo.setUTCHours.apply(this._, arguments)
            },
            setMilliseconds: function() {
                xo.setUTCMilliseconds.apply(this._, arguments)
            },
            setMinutes: function() {
                xo.setUTCMinutes.apply(this._, arguments)
            },
            setMonth: function() {
                xo.setUTCMonth.apply(this._, arguments)
            },
            setSeconds: function() {
                xo.setUTCSeconds.apply(this._, arguments)
            },
            setTime: function() {
                xo.setTime.apply(this._, arguments)
            }
        };
        var xo = Date.prototype,
            To = "%a %b %e %H:%M:%S %Y",
            No = "%m/%d/%y",
            Co = "%H:%M:%S",
            ko = So,
            Lo = ko.map(hi),
            Ao = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            Oo = Ao.map(hi);
        d3.time.format = function(e) {
            function t(t) {
                var r = [],
                    i = -1,
                    s = 0,
                    o, u;
                while (++i < n) e.charCodeAt(i) == 37 && (r.push(e.substring(s, i), (u = Ro[o = e.charAt(++i)]) ? u(t) : o), s = i + 1);
                return r.push(e.substring(s, i)), r.join("")
            }
            var n = e.length;
            return t.parse = function(t) {
                var n = {
                        y: 1900,
                        m: 0,
                        d: 1,
                        H: 0,
                        M: 0,
                        S: 0,
                        L: 0
                    },
                    r = pi(n, e, t, 0);
                if (r != t.length) return null;
                "p" in n && (n.H = n.H % 12 + n.p * 12);
                var i = new Eo;
                return i.setFullYear(n.y, n.m, n.d), i.setHours(n.H, n.M, n.S, n.L), i
            }, t.toString = function() {
                return e
            }, t
        };
        var Mo = d3.format("02d"),
            _o = d3.format("03d"),
            Do = d3.format("04d"),
            Po = d3.format("2d"),
            Ho = di(ko),
            Bo = di(Lo),
            jo = di(Ao),
            Fo = vi(Ao),
            Io = di(Oo),
            qo = vi(Oo),
            Ro = {
                a: function(e) {
                    return Lo[e.getDay()]
                },
                A: function(e) {
                    return ko[e.getDay()]
                },
                b: function(e) {
                    return Oo[e.getMonth()]
                },
                B: function(e) {
                    return Ao[e.getMonth()]
                },
                c: d3.time.format(To),
                d: function(e) {
                    return Mo(e.getDate())
                },
                e: function(e) {
                    return Po(e.getDate())
                },
                H: function(e) {
                    return Mo(e.getHours())
                },
                I: function(e) {
                    return Mo(e.getHours() % 12 || 12)
                },
                j: function(e) {
                    return _o(1 + d3.time.dayOfYear(e))
                },
                L: function(e) {
                    return _o(e.getMilliseconds())
                },
                m: function(e) {
                    return Mo(e.getMonth() + 1)
                },
                M: function(e) {
                    return Mo(e.getMinutes())
                },
                p: function(e) {
                    return e.getHours() >= 12 ? "PM" : "AM"
                },
                S: function(e) {
                    return Mo(e.getSeconds())
                },
                U: function(e) {
                    return Mo(d3.time.sundayOfYear(e))
                },
                w: function(e) {
                    return e.getDay()
                },
                W: function(e) {
                    return Mo(d3.time.mondayOfYear(e))
                },
                x: d3.time.format(No),
                X: d3.time.format(Co),
                y: function(e) {
                    return Mo(e.getFullYear() % 100)
                },
                Y: function(e) {
                    return Do(e.getFullYear() % 1e4)
                },
                Z: Di,
                "%": function(e) {
                    return "%"
                }
            },
            Uo = {
                a: mi,
                A: gi,
                b: yi,
                B: bi,
                c: wi,
                d: ki,
                e: ki,
                H: Li,
                I: Li,
                L: Mi,
                m: Ci,
                M: Ai,
                p: _i,
                S: Oi,
                x: Ei,
                X: Si,
                y: Ti,
                Y: xi
            },
            zo = /^\s*\d+/,
            Wo = d3.map({
                am: 0,
                pm: 1
            });
        d3.time.format.utc = function(e) {
            function t(e) {
                try {
                    Eo = ci;
                    var t = new Eo;
                    return t._ = e, n(t)
                } finally {
                    Eo = Date
                }
            }
            var n = d3.time.format(e);
            return t.parse = function(e) {
                try {
                    Eo = ci;
                    var t = n.parse(e);
                    return t && t._
                } finally {
                    Eo = Date
                }
            }, t.toString = n.toString, t
        };
        var Xo = d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
        d3.time.format.iso = Date.prototype.toISOString ? Pi : Xo, Pi.parse = function(e) {
            var t = new Date(e);
            return isNaN(t) ? null : t
        }, Pi.toString = Xo.toString, d3.time.second = Hi(function(e) {
            return new Eo(Math.floor(e / 1e3) * 1e3)
        }, function(e, t) {
            e.setTime(e.getTime() + Math.floor(t) * 1e3)
        }, function(e) {
            return e.getSeconds()
        }), d3.time.seconds = d3.time.second.range, d3.time.seconds.utc = d3.time.second.utc.range, d3.time.minute = Hi(function(e) {
            return new Eo(Math.floor(e / 6e4) * 6e4)
        }, function(e, t) {
            e.setTime(e.getTime() + Math.floor(t) * 6e4)
        }, function(e) {
            return e.getMinutes()
        }), d3.time.minutes = d3.time.minute.range, d3.time.minutes.utc = d3.time.minute.utc.range, d3.time.hour = Hi(function(e) {
            var t = e.getTimezoneOffset() / 60;
            return new Eo((Math.floor(e / 36e5 - t) + t) * 36e5)
        }, function(e, t) {
            e.setTime(e.getTime() + Math.floor(t) * 36e5)
        }, function(e) {
            return e.getHours()
        }), d3.time.hours = d3.time.hour.range, d3.time.hours.utc = d3.time.hour.utc.range, d3.time.day = Hi(function(e) {
            var t = new Eo(1970, 0);
            return t.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), t
        }, function(e, t) {
            e.setDate(e.getDate() + t)
        }, function(e) {
            return e.getDate() - 1
        }), d3.time.days = d3.time.day.range, d3.time.days.utc = d3.time.day.utc.range, d3.time.dayOfYear = function(e) {
            var t = d3.time.year(e);
            return Math.floor((e - t - (e.getTimezoneOffset() - t.getTimezoneOffset()) * 6e4) / 864e5)
        }, So.forEach(function(e, t) {
            e = e.toLowerCase(), t = 7 - t;
            var n = d3.time[e] = Hi(function(e) {
                return (e = d3.time.day(e)).setDate(e.getDate() - (e.getDay() + t) % 7), e
            }, function(e, t) {
                e.setDate(e.getDate() + Math.floor(t) * 7)
            }, function(e) {
                var n = d3.time.year(e).getDay();
                return Math.floor((d3.time.dayOfYear(e) + (n + t) % 7) / 7) - (n !== t)
            });
            d3.time[e + "s"] = n.range, d3.time[e + "s"].utc = n.utc.range, d3.time[e + "OfYear"] = function(e) {
                var n = d3.time.year(e).getDay();
                return Math.floor((d3.time.dayOfYear(e) + (n + t) % 7) / 7)
            }
        }), d3.time.week = d3.time.sunday, d3.time.weeks = d3.time.sunday.range, d3.time.weeks.utc = d3.time.sunday.utc.range, d3.time.weekOfYear = d3.time.sundayOfYear, d3.time.month = Hi(function(e) {
            return e = d3.time.day(e), e.setDate(1), e
        }, function(e, t) {
            e.setMonth(e.getMonth() + t)
        }, function(e) {
            return e.getMonth()
        }), d3.time.months = d3.time.month.range, d3.time.months.utc = d3.time.month.utc.range, d3.time.year = Hi(function(e) {
            return e = d3.time.day(e), e.setMonth(0, 1), e
        }, function(e, t) {
            e.setFullYear(e.getFullYear() + t)
        }, function(e) {
            return e.getFullYear()
        }), d3.time.years = d3.time.year.range, d3.time.years.utc = d3.time.year.utc.range;
        var Vo = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
            $o = [
                [d3.time.second, 1],
                [d3.time.second, 5],
                [d3.time.second, 15],
                [d3.time.second, 30],
                [d3.time.minute, 1],
                [d3.time.minute, 5],
                [d3.time.minute, 15],
                [d3.time.minute, 30],
                [d3.time.hour, 1],
                [d3.time.hour, 3],
                [d3.time.hour, 6],
                [d3.time.hour, 12],
                [d3.time.day, 1],
                [d3.time.day, 2],
                [d3.time.week, 1],
                [d3.time.month, 1],
                [d3.time.month, 3],
                [d3.time.year, 1]
            ],
            Jo = [
                [d3.time.format("%Y"), function(e) {
                    return !0
                }],
                [d3.time.format("%B"), function(e) {
                    return e.getMonth()
                }],
                [d3.time.format("%b %d"), function(e) {
                    return e.getDate() != 1
                }],
                [d3.time.format("%a %d"), function(e) {
                    return e.getDay() && e.getDate() != 1
                }],
                [d3.time.format("%I %p"), function(e) {
                    return e.getHours()
                }],
                [d3.time.format("%I:%M"), function(e) {
                    return e.getMinutes()
                }],
                [d3.time.format(":%S"), function(e) {
                    return e.getSeconds()
                }],
                [d3.time.format(".%L"), function(e) {
                    return e.getMilliseconds()
                }]
            ],
            Ko = d3.scale.linear(),
            Qo = qi(Jo);
        $o.year = function(e, t) {
            return Ko.domain(e.map(Ui)).ticks(t).map(Ri)
        }, d3.time.scale = function() {
            return ji(d3.scale.linear(), $o, Qo)
        };
        var Go = $o.map(function(e) {
                return [e[0].utc, e[1]]
            }),
            Yo = [
                [d3.time.format.utc("%Y"), function(e) {
                    return !0
                }],
                [d3.time.format.utc("%B"), function(e) {
                    return e.getUTCMonth()
                }],
                [d3.time.format.utc("%b %d"), function(e) {
                    return e.getUTCDate() != 1
                }],
                [d3.time.format.utc("%a %d"), function(e) {
                    return e.getUTCDay() && e.getUTCDate() != 1
                }],
                [d3.time.format.utc("%I %p"), function(e) {
                    return e.getUTCHours()
                }],
                [d3.time.format.utc("%I:%M"), function(e) {
                    return e.getUTCMinutes()
                }],
                [d3.time.format.utc(":%S"), function(e) {
                    return e.getUTCSeconds()
                }],
                [d3.time.format.utc(".%L"), function(e) {
                    return e.getUTCMilliseconds()
                }]
            ],
            Zo = qi(Yo);
        Go.year = function(e, t) {
            return Ko.domain(e.map(Wi)).ticks(t).map(zi)
        }, d3.time.scale.utc = function() {
            return ji(d3.scale.linear(), Go, Zo)
        }
    }(), define("d3", function() {}),
    function(e) {
        define("nv", ["d3"], function() {
            return function() {
                (function() {
                    function t(e, t) {
                        return (new Date(t, e + 1, 0)).getDate()
                    }

                    function n(e, t, n) {
                        return function(r, i, s) {
                            var o = e(r),
                                u = [];
                            o < r && t(o);
                            if (s > 1)
                                while (o < i) {
                                    var a = new Date(+o);
                                    n(a) % s === 0 && u.push(a), t(o)
                                } else
                                    while (o < i) u.push(new Date(+o)), t(o);
                            return u
                        }
                    }
                    var e = {
                        version: "0.0.1a",
                        dev: !1
                    };
                    window.nv = e, e.tooltip = {}, e.utils = {}, e.models = {}, e.charts = {}, e.graphs = [], e.logs = {}, e.dispatch = d3.dispatch("render_start", "render_end"), e.dev && (e.dispatch.on("render_start", function(t) {
                            e.logs.startTime = +(new Date)
                        }), e.dispatch.on("render_end", function(t) {
                            e.logs.endTime = +(new Date), e.logs.totalTime = e.logs.endTime - e.logs.startTime, e.log("total", e.logs.totalTime)
                        })), e.log = function() {
                            return e.dev && console.log && console.log.apply && console.log.apply(console, arguments), arguments[arguments.length - 1]
                        }, e.render = function r(t) {
                            t = t || 1, r.active = !0, e.dispatch.render_start(), setTimeout(function() {
                                var n;
                                for (var i = 0; i < t && (graph = r.queue[i]); i++) n = graph.generate(), typeof graph.callback == typeof Function && graph.callback(n), e.graphs.push(n);
                                r.queue.splice(0, i), r.queue.length ? setTimeout(arguments.callee, 0) : (e.render.active = !1, e.dispatch.render_end())
                            }, 0)
                        }, e.render.active = !1, e.render.queue = [], e.addGraph = function(t) {
                            typeof arguments[0] == typeof Function && (t = {
                                generate: arguments[0],
                                callback: arguments[1]
                            }), e.render.queue.push(t), e.render.active || e.render()
                        }, e.identity = function(e) {
                            return e
                        }, e.strip = function(e) {
                            return e.replace(/(\s|&)/g, "")
                        }, d3.time.monthEnd = function(e) {
                            return new Date(e.getFullYear(), e.getMonth(), 0)
                        }, d3.time.monthEnds = n(d3.time.monthEnd, function(e) {
                            e.setUTCDate(e.getUTCDate() + 1), e.setDate(t(e.getMonth() + 1, e.getFullYear()))
                        }, function(e) {
                            return e.getMonth()
                        }),
                        function() {
                            var t = window.nv.tooltip = {};
                            t.show = function(t, n, r, i, s, o) {
                                var u = document.createElement("div");
                                u.className = "nvtooltip " + (o ? o : "xy-tooltip"), r = r || "s", i = i || 20;
                                var a = s ? s : document.getElementsByTagName("body")[0];
                                u.innerHTML = n, u.style.left = 0, u.style.top = 0, u.style.opacity = 0, a.appendChild(u);
                                var f = parseInt(u.offsetHeight),
                                    l = parseInt(u.offsetWidth),
                                    c = e.utils.windowSize().width,
                                    h = e.utils.windowSize().height,
                                    p = a.scrollTop,
                                    d = a.scrollLeft,
                                    v, m;
                                switch (r) {
                                    case "e":
                                        v = t[0] - l - i, m = t[1] - f / 2, v < d && (v = t[0] + i), m < p && (m = p + 5), m + f > p + h && (m = p - f - 5);
                                        break;
                                    case "w":
                                        v = t[0] + i, m = t[1] - f / 2, v + l > c && (v = t[0] - l - i), m < p && (m = p + 5), m + f > p + h && (m = p - f - 5);
                                        break;
                                    case "n":
                                        v = t[0] - l / 2, m = t[1] + i, v < d && (v = d + 5), v + l > c && (v = c - l - 5), m + f > p + h && (m = t[1] - f - i);
                                        break;
                                    case "s":
                                        v = t[0] - l / 2, m = t[1] - f - i, v < d && (v = d + 5), v + l > c && (v = c - l - 5), p > m && (m = t[1] + 20)
                                }
                                return u.style.left = v + "px", u.style.top = m + "px", u.style.opacity = 1, u.style.position = "absolute", u.style.pointerEvents = "none", u
                            }, t.cleanup = function() {
                                var e = document.getElementsByClassName("nvtooltip"),
                                    t = [];
                                while (e.length) t.push(e[0]), e[0].style.transitionDelay = "0 !important", e[0].style.opacity = 0, e[0].className = "nvtooltip-pending-removal";
                                setTimeout(function() {
                                    while (t.length) {
                                        var e = t.pop();
                                        e.parentNode.removeChild(e)
                                    }
                                }, 500)
                            }
                        }(), e.utils.windowSize = function() {
                            var e = {
                                width: 640,
                                height: 480
                            };
                            return document.body && document.body.offsetWidth && (e.width = document.body.offsetWidth, e.height = document.body.offsetHeight), document.compatMode == "CSS1Compat" && document.documentElement && document.documentElement.offsetWidth && (e.width = document.documentElement.offsetWidth, e.height = document.documentElement.offsetHeight), window.innerWidth && window.innerHeight && (e.width = window.innerWidth, e.height = window.innerHeight), e
                        }, e.utils.windowResize = function(e) {
                            var t = window.onresize;
                            window.onresize = function(n) {
                                typeof t == "function" && t(n), e(n)
                            }
                        }, e.utils.getColor = function(t) {
                            return arguments.length ? Object.prototype.toString.call(t) === "[object Array]" ? function(e, n) {
                                return e.color || t[n % t.length]
                            } : t : e.utils.defaultColor()
                        }, e.utils.defaultColor = function() {
                            var e = d3.scale.category20().range();
                            return function(t, n) {
                                return t.color || e[n % e.length]
                            }
                        }, e.utils.pjax = function(t, n) {
                            function r(r) {
                                d3.html(r, function(r) {
                                    var i = d3.select(n).node();
                                    i.parentNode.replaceChild(d3.select(r).select(n).node(), i), e.utils.pjax(t, n)
                                })
                            }
                            d3.selectAll(t).on("click", function() {
                                history.pushState(this.href, this.textContent, this.href), r(this.href), d3.event.preventDefault()
                            }), d3.select(window).on("popstate", function() {
                                d3.event.state && r(d3.event.state)
                            })
                        }, e.models.axis = function() {
                            function h(n) {
                                return n.each(function(n) {
                                    var h = d3.select(this),
                                        p = h.selectAll("g.nv-wrap.nv-axis").data([n]),
                                        d = p.enter().append("g").attr("class", "nvd3 nv-wrap nv-axis"),
                                        v = d.append("g"),
                                        m = p.select("g");
                                    f !== null ? l.ticks(f) : (l.orient() == "top" || l.orient() == "bottom") && l.ticks(Math.abs(r.range()[1] - r.range()[0]) / 100), d3.transition(m).call(l), c = c || l.scale();
                                    var g = l.tickFormat();
                                    g == null && (g = c.tickFormat());
                                    var y = m.selectAll("text.nv-axislabel").data([i || null]);
                                    y.exit().remove();
                                    switch (l.orient()) {
                                        case "top":
                                            y.enter().append("text").attr("class", "nv-axislabel").attr("text-anchor", "middle").attr("y", 0);
                                            var b = r.range().length == 2 ? r.range()[1] : r.range()[r.range().length - 1] + (r.range()[1] - r.range()[0]);
                                            y.attr("x", b / 2);
                                            if (s) {
                                                var w = p.selectAll("g.nv-axisMaxMin").data(r.domain());
                                                w.enter().append("g").attr("class", "nv-axisMaxMin").append("text"), w.exit().remove(), w.attr("transform", function(e, t) {
                                                    return "translate(" + r(e) + ",0)"
                                                }).select("text").attr("dy", "0em").attr("y", -l.tickPadding()).attr("text-anchor", "middle").text(function(e, t) {
                                                    var n = g(e);
                                                    return ("" + n).match("NaN") ? "" : n
                                                }), d3.transition(w).attr("transform", function(e, t) {
                                                    return "translate(" + r.range()[t] + ",0)"
                                                })
                                            }
                                            break;
                                        case "bottom":
                                            var E = 30,
                                                S = 30;
                                            if (u % 360) {
                                                var x = m.selectAll("g").select("text");
                                                x.each(function(e, t) {
                                                    var n = this.getBBox().width;
                                                    n > S && (S = n)
                                                });
                                                var T = Math.abs(Math.sin(u * Math.PI / 180)),
                                                    E = (T ? T * S : S) + 30;
                                                x.attr("transform", function(e, t, n) {
                                                    return "rotate(" + u + " 0,0)"
                                                }).attr("text-anchor", u % 360 > 0 ? "start" : "end")
                                            }
                                            y.enter().append("text").attr("class", "nv-axislabel").attr("text-anchor", "middle").attr("y", E);
                                            var b = r.range().length == 2 ? r.range()[1] : r.range()[r.range().length - 1] + (r.range()[1] - r.range()[0]);
                                            y.attr("x", b / 2);
                                            if (s) {
                                                var w = p.selectAll("g.nv-axisMaxMin").data(r.domain());
                                                w.enter().append("g").attr("class", "nv-axisMaxMin").append("text"), w.exit().remove(), w.attr("transform", function(e, t) {
                                                    return "translate(" + r(e) + ",0)"
                                                }).select("text").attr("dy", ".71em").attr("y", l.tickPadding()).attr("transform", function(e, t, n) {
                                                    return "rotate(" + u + " 0,0)"
                                                }).attr("text-anchor", u % 360 > 0 ? "start" : "end").text(function(e, t) {
                                                    var n = g(e);
                                                    return ("" + n).match("NaN") ? "" : n
                                                }), d3.transition(w).attr("transform", function(e, t) {
                                                    return "translate(" + r.range()[t] + ",0)"
                                                })
                                            }
                                            break;
                                        case "right":
                                            y.enter().append("text").attr("class", "nv-axislabel").attr("text-anchor", a ? "middle" : "begin").attr("transform", a ? "rotate(90)" : "").attr("y", a ? -Math.max(e.right, t) - 12 : -10), y.attr("x", a ? r.range()[0] / 2 : l.tickPadding());
                                            if (s) {
                                                var w = p.selectAll("g.nv-axisMaxMin").data(r.domain());
                                                w.enter().append("g").attr("class", "nv-axisMaxMin").append("text").style("opacity", 0), w.exit().remove(), w.attr("transform", function(e, t) {
                                                    return "translate(0," + r(e) + ")"
                                                }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", l.tickPadding()).attr("text-anchor", "start").text(function(e, t) {
                                                    var n = g(e);
                                                    return ("" + n).match("NaN") ? "" : n
                                                }), d3.transition(w).attr("transform", function(e, t) {
                                                    return "translate(0," + r.range()[t] + ")"
                                                }).select("text").style("opacity", 1)
                                            }
                                            break;
                                        case "left":
                                            y.enter().append("text").attr("class", "nv-axislabel").attr("text-anchor", a ? "middle" : "end").attr("transform", a ? "rotate(-90)" : "").attr("y", a ? -Math.max(e.left, t) + 12 : -10), y.attr("x", a ? -r.range()[0] / 2 : -l.tickPadding());
                                            if (s) {
                                                var w = p.selectAll("g.nv-axisMaxMin").data(r.domain());
                                                w.enter().append("g").attr("class", "nv-axisMaxMin").append("text").style("opacity", 0), w.exit().remove(), w.attr("transform", function(e, t) {
                                                    return "translate(0," + c(e) + ")"
                                                }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", -l.tickPadding()).attr("text-anchor", "end").text(function(e, t) {
                                                    var n = g(e);
                                                    return ("" + n).match("NaN") ? "" : n
                                                }), d3.transition(w).attr("transform", function(e, t) {
                                                    return "translate(0," + r.range()[t] + ")"
                                                }).select("text").style("opacity", 1)
                                            }
                                    }
                                    y.text(function(e) {
                                        return e
                                    }), s && (l.orient() === "left" || l.orient() === "right") && m.selectAll("g").each(function(e, t) {
                                        if (r(e) < r.range()[1] + 10 || r(e) > r.range()[0] - 10) e > 1e-10 || e < -1e-10 ? d3.select(this).remove() : d3.select(this).select("text").remove()
                                    });
                                    if (s && (l.orient() === "top" || l.orient() === "bottom")) {
                                        var N = [];
                                        p.selectAll("g.nv-axisMaxMin").each(function(e, t) {
                                            t ? N.push(r(e) - this.getBBox().width - 4) : N.push(r(e) + this.getBBox().width + 4)
                                        }), m.selectAll("g").each(function(e, t) {
                                            if (r(e) < N[0] || r(e) > N[1]) e > 1e-10 || e < -1e-10 ? d3.select(this).remove() : d3.select(this).select("text").remove()
                                        })
                                    }
                                    o && m.selectAll("line.tick").filter(function(e) {
                                        return !parseFloat(Math.round(e * 1e5) / 1e6)
                                    }).classed("zero", !0), c = r.copy()
                                }), h
                            }
                            var e = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                t = 60,
                                n = 60,
                                r = d3.scale.linear(),
                                i = null,
                                s = !0,
                                o = !0,
                                u = 0,
                                a = !0,
                                f = null,
                                l = d3.svg.axis().scale(r).orient("bottom"),
                                c;
                            return d3.rebind(h, l, "orient", "tickValues", "tickSubdivide", "tickSize", "tickPadding", "tickFormat"), d3.rebind(h, r, "domain", "range", "rangeBand", "rangeBands"), h.margin = function(t) {
                                return arguments.length ? (e.top = typeof t.top != "undefined" ? t.top : e.top, e.right = typeof t.right != "undefined" ? t.right : e.right, e.bottom = typeof t.bottom != "undefined" ? t.bottom : e.bottom, e.left = typeof t.left != "undefined" ? t.left : e.left, h) : e
                            }, h.width = function(e) {
                                return arguments.length ? (t = e, h) : t
                            }, h.ticks = function(e) {
                                return arguments.length ? (f = e, h) : f
                            }, h.height = function(e) {
                                return arguments.length ? (n = e, h) : n
                            }, h.axisLabel = function(e) {
                                return arguments.length ? (i = e, h) : i
                            }, h.showMaxMin = function(e) {
                                return arguments.length ? (s = e, h) : s
                            }, h.highlightZero = function(e) {
                                return arguments.length ? (o = e, h) : o
                            }, h.scale = function(e) {
                                return arguments.length ? (r = e, l.scale(r), d3.rebind(h, r, "domain", "range", "rangeBand", "rangeBands"), h) : r
                            }, h.rotateYLabel = function(e) {
                                return arguments.length ? (a = e, h) : a
                            }, h.rotateLabels = function(e) {
                                return arguments.length ? (u = e, h) : u
                            }, h
                        }, e.models.historicalBar = function() {
                            function m(e) {
                                return e.each(function(e) {
                                    var m = n - t.left - t.right,
                                        g = r - t.top - t.bottom,
                                        b = d3.select(this);
                                    s.domain(p || d3.extent(e[0].values.map(u).concat(f))).range([0, m]), o.domain(d || d3.extent(e[0].values.map(a).concat(l))).range([g, 0]);
                                    if (s.domain()[0] === s.domain()[1] || o.domain()[0] === o.domain()[1]) singlePoint = !0;
                                    s.domain()[0] === s.domain()[1] && (s.domain()[0] ? s.domain([s.domain()[0] - s.domain()[0] * .01, s.domain()[1] + s.domain()[1] * .01]) : s.domain([-1, 1])), o.domain()[0] === o.domain()[1] && (o.domain()[0] ? o.domain([o.domain()[0] + o.domain()[0] * .01, o.domain()[1] - o.domain()[1] * .01]) : o.domain([-1, 1]));
                                    var w = b.selectAll("g.nv-wrap.nv-bar").data([e[0].values]),
                                        E = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-bar"),
                                        S = E.append("defs"),
                                        T = E.append("g"),
                                        N = w.select("g");
                                    T.append("g").attr("class", "nv-bars"), w.attr("transform", "translate(" + t.left + "," + t.top + ")"), b.on("click", function(e, t) {
                                        v.chartClick({
                                            data: e,
                                            index: t,
                                            pos: d3.event,
                                            id: i
                                        })
                                    }), S.append("clipPath").attr("id", "nv-chart-clip-path-" + i).append("rect"), w.select("#nv-chart-clip-path-" + i + " rect").attr("width", m).attr("height", g), N.attr("clip-path", c ? "url(#nv-chart-clip-path-" + i + ")" : "");
                                    var C = w.select(".nv-bars").selectAll(".nv-bar").data(function(e) {
                                        return e
                                    });
                                    C.exit().remove();
                                    var k = C.enter().append("rect").attr("class", function(e, t, n) {
                                        return (a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive") + " nv-bar-" + n + "-" + t
                                    }).attr("fill", function(e, t) {
                                        return h(e, t)
                                    }).attr("x", 0).attr("y", function(e, t) {
                                        return o(Math.max(0, a(e, t)))
                                    }).attr("height", function(e, t) {
                                        return Math.abs(o(a(e, t)) - o(0))
                                    }).on("mouseover", function(t, n) {
                                        d3.select(this).classed("hover", !0), v.elementMouseover({
                                            point: t,
                                            series: e[0],
                                            pos: [s(u(t, n)), o(a(t, n))],
                                            pointIndex: n,
                                            seriesIndex: 0,
                                            e: d3.event
                                        })
                                    }).on("mouseout", function(t, n) {
                                        d3.select(this).classed("hover", !1), v.elementMouseout({
                                            point: t,
                                            series: e[0],
                                            pointIndex: n,
                                            seriesIndex: 0,
                                            e: d3.event
                                        })
                                    }).on("click", function(e, t) {
                                        v.elementClick({
                                            value: a(e, t),
                                            data: e,
                                            index: t,
                                            pos: [s(u(e, t)), o(a(e, t))],
                                            e: d3.event,
                                            id: i
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(e, t) {
                                        v.elementDblClick({
                                            value: a(e, t),
                                            data: e,
                                            index: t,
                                            pos: [s(u(e, t)), o(a(e, t))],
                                            e: d3.event,
                                            id: i
                                        }), d3.event.stopPropagation()
                                    });
                                    C.attr("class", function(e, t, n) {
                                        return (a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive") + " nv-bar-" + n + "-" + t
                                    }).attr("transform", function(t, n) {
                                        return "translate(" + (s(u(t, n)) - m / e[0].values.length * .5) + ",0)"
                                    }).attr("width", m / e[0].values.length * .9), d3.transition(C).attr("y", function(e, t) {
                                        return o(Math.max(0, a(e, t)))
                                    }).attr("height", function(e, t) {
                                        return Math.abs(o(a(e, t)) - o(0))
                                    })
                                }), m
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = Math.floor(Math.random() * 1e4),
                                s = d3.scale.linear(),
                                o = d3.scale.linear(),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = [],
                                l = [0],
                                c = !0,
                                h = e.utils.defaultColor(),
                                p, d, v = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout");
                            return m.dispatch = v, m.x = function(e) {
                                return arguments.length ? (u = e, m) : u
                            }, m.y = function(e) {
                                return arguments.length ? (a = e, m) : a
                            }, m.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, m) : t
                            }, m.width = function(e) {
                                return arguments.length ? (n = e, m) : n
                            }, m.height = function(e) {
                                return arguments.length ? (r = e, m) : r
                            }, m.xScale = function(e) {
                                return arguments.length ? (s = e, m) : s
                            }, m.yScale = function(e) {
                                return arguments.length ? (o = e, m) : o
                            }, m.xDomain = function(e) {
                                return arguments.length ? (p = e, m) : p
                            }, m.yDomain = function(e) {
                                return arguments.length ? (d = e, m) : d
                            }, m.forceX = function(e) {
                                return arguments.length ? (f = e, m) : f
                            }, m.forceY = function(e) {
                                return arguments.length ? (l = e, m) : l
                            }, m.clipEdge = function(e) {
                                return arguments.length ? (c = e, m) : c
                            }, m.color = function(t) {
                                return arguments.length ? (h = e.utils.getColor(t), m) : h
                            }, m.id = function(e) {
                                return arguments.length ? (i = e, m) : i
                            }, m
                        }, e.models.bullet = function() {
                            function c(t) {
                                return t.each(function(t, o) {
                                    var f = u - e.left - e.right,
                                        c = a - e.top - e.bottom,
                                        h = d3.select(this),
                                        p = r.call(this, t, o).slice().sort(d3.descending),
                                        d = i.call(this, t, o).slice().sort(d3.descending),
                                        v = s.call(this, t, o).slice().sort(d3.descending),
                                        m = d3.scale.linear().domain([0, Math.max(p[0], d[0], v[0])]).range(n ? [f, 0] : [0, f]),
                                        g = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(m.range());
                                    this.__chart__ = m;
                                    var y = h.selectAll("g.nv-wrap.nv-bullet").data([t]),
                                        b = y.enter().append("g").attr("class", "nvd3 nv-wrap nv-bullet"),
                                        w = b.append("g"),
                                        E = y.select("g");
                                    y.attr("transform", "translate(" + e.left + "," + e.top + ")");
                                    var S = function(e) {
                                            return Math.abs(g(e) - g(0))
                                        },
                                        x = function(e) {
                                            return Math.abs(m(e) - m(0))
                                        },
                                        T = E.selectAll("rect.nv-range").data(p);
                                    T.enter().append("rect").attr("class", function(e, t) {
                                        return "nv-range nv-s" + t
                                    }).attr("width", S).attr("height", c).attr("x", n ? g : 0).on("mouseover", function(e, t) {
                                        l.elementMouseover({
                                            value: e,
                                            label: t <= 0 ? "Maximum" : t > 1 ? "Minimum" : "Mean",
                                            pos: [m(e), c / 2]
                                        })
                                    }).on("mouseout", function(e, t) {
                                        l.elementMouseout({
                                            value: e,
                                            label: t <= 0 ? "Minimum" : t >= 1 ? "Maximum" : "Mean"
                                        })
                                    }), d3.transition(T).attr("x", n ? m : 0).attr("width", x).attr("height", c);
                                    var N = E.selectAll("rect.nv-measure").data(v);
                                    N.enter().append("rect").attr("class", function(e, t) {
                                        return "nv-measure nv-s" + t
                                    }).attr("width", S).attr("height", c / 3).attr("x", n ? g : 0).attr("y", c / 3).on("mouseover", function(e) {
                                        l.elementMouseover({
                                            value: e,
                                            label: "Current",
                                            pos: [m(e), c / 2]
                                        })
                                    }).on("mouseout", function(e) {
                                        l.elementMouseout({
                                            value: e,
                                            label: "Current"
                                        })
                                    }), d3.transition(N).attr("width", x).attr("height", c / 3).attr("x", n ? m : 0).attr("y", c / 3);
                                    var C = E.selectAll("path.nv-markerTriangle").data(d),
                                        k = c / 6;
                                    C.enter().append("path").attr("class", "nv-markerTriangle").attr("transform", function(e) {
                                        return "translate(" + g(e) + "," + c / 2 + ")"
                                    }).attr("d", "M0," + k + "L" + k + "," + -k + " " + -k + "," + -k + "Z").on("mouseover", function(e, t) {
                                        l.elementMouseover({
                                            value: e,
                                            label: "Previous",
                                            pos: [m(e), c / 2]
                                        })
                                    }).on("mouseout", function(e, t) {
                                        l.elementMouseout({
                                            value: e,
                                            label: "Previous"
                                        })
                                    }), d3.transition(C).attr("transform", function(e) {
                                        return "translate(" + m(e) + "," + c / 2 + ")"
                                    }), C.exit().remove()
                                }), d3.timer.flush(), c
                            }
                            var e = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                t = "left",
                                n = !1,
                                r = function(e) {
                                    return e.ranges
                                },
                                i = function(e) {
                                    return e.markers
                                },
                                s = function(e) {
                                    return e.measures
                                },
                                o = [0],
                                u = 380,
                                a = 30,
                                f = null,
                                l = d3.dispatch("elementMouseover", "elementMouseout");
                            return c.dispatch = l, c.orient = function(e) {
                                return arguments.length ? (t = e, n = t == "right" || t == "bottom", c) : t
                            }, c.ranges = function(e) {
                                return arguments.length ? (r = e, c) : r
                            }, c.markers = function(e) {
                                return arguments.length ? (i = e, c) : i
                            }, c.measures = function(e) {
                                return arguments.length ? (s = e, c) : s
                            }, c.forceX = function(e) {
                                return arguments.length ? (o = e, c) : o
                            }, c.width = function(e) {
                                return arguments.length ? (u = e, c) : u
                            }, c.height = function(e) {
                                return arguments.length ? (a = e, c) : a
                            }, c.margin = function(t) {
                                return arguments.length ? (e.top = typeof t.top != "undefined" ? t.top : e.top, e.right = typeof t.right != "undefined" ? t.right : e.right, e.bottom = typeof t.bottom != "undefined" ? t.bottom : e.bottom, e.left = typeof t.left != "undefined" ? t.left : e.left, c) : e
                            }, c.tickFormat = function(e) {
                                return arguments.length ? (f = e, c) : f
                            }, c
                        }, e.models.bulletChart = function() {
                            function m(e) {
                                return e.each(function(n, h) {
                                    var p = d3.select(this),
                                        g = (a || parseInt(p.style("width")) || 960) - i.left - i.right,
                                        y = f - i.top - i.bottom,
                                        b = this;
                                    m.update = function() {
                                        m(e)
                                    }, m.container = this;
                                    var w = s.call(this, n, h).slice().sort(d3.descending),
                                        E = o.call(this, n, h).slice().sort(d3.descending),
                                        S = u.call(this, n, h).slice().sort(d3.descending),
                                        x = p.selectAll("g.nv-wrap.nv-bulletChart").data([n]),
                                        T = x.enter().append("g").attr("class", "nvd3 nv-wrap nv-bulletChart"),
                                        N = T.append("g"),
                                        C = x.select("g");
                                    N.append("g").attr("class", "nv-bulletWrap"), N.append("g").attr("class", "nv-titles"), x.attr("transform", "translate(" + i.left + "," + i.top + ")");
                                    var k = d3.scale.linear().domain([0, Math.max(w[0], E[0], S[0])]).range(r ? [g, 0] : [0, g]),
                                        L = this.__chart__ || d3.scale.linear().domain([0, Infinity]).range(k.range());
                                    this.__chart__ = k;
                                    var A = function(e) {
                                            return Math.abs(L(e) - L(0))
                                        },
                                        O = function(e) {
                                            return Math.abs(k(e) - k(0))
                                        },
                                        M = N.select(".nv-titles").append("g").attr("text-anchor", "end").attr("transform", "translate(-6," + (f - i.top - i.bottom) / 2 + ")");
                                    M.append("text").attr("class", "nv-title").text(function(e) {
                                        return e.title
                                    }), M.append("text").attr("class", "nv-subtitle").attr("dy", "1em").text(function(e) {
                                        return e.subtitle
                                    }), t.width(g).height(y);
                                    var _ = C.select(".nv-bulletWrap");
                                    d3.transition(_).call(t);
                                    var D = l || k.tickFormat(8),
                                        P = C.selectAll("g.nv-tick").data(k.ticks(8), function(e) {
                                            return this.textContent || D(e)
                                        }),
                                        H = P.enter().append("g").attr("class", "nv-tick").attr("transform", function(e) {
                                            return "translate(" + L(e) + ",0)"
                                        }).style("opacity", 1e-6);
                                    H.append("line").attr("y1", y).attr("y2", y * 7 / 6), H.append("text").attr("text-anchor", "middle").attr("dy", "1em").attr("y", y * 7 / 6).text(D), d3.transition(H).attr("transform", function(e) {
                                        return "translate(" + k(e) + ",0)"
                                    }).style("opacity", 1);
                                    var B = d3.transition(P).attr("transform", function(e) {
                                        return "translate(" + k(e) + ",0)"
                                    }).style("opacity", 1);
                                    B.select("line").attr("y1", y).attr("y2", y * 7 / 6), B.select("text").attr("y", y * 7 / 6), d3.transition(P.exit()).attr("transform", function(e) {
                                        return "translate(" + k(e) + ",0)"
                                    }).style("opacity", 1e-6).remove(), d.on("tooltipShow", function(e) {
                                        c && v(e, b.parentNode)
                                    })
                                }), d3.timer.flush(), m
                            }
                            var t = e.models.bullet(),
                                n = "left",
                                r = !1,
                                i = {
                                    top: 5,
                                    right: 40,
                                    bottom: 20,
                                    left: 120
                                },
                                s = function(e) {
                                    return e.ranges
                                },
                                o = function(e) {
                                    return e.markers
                                },
                                u = function(e) {
                                    return e.measures
                                },
                                a = null,
                                f = 55,
                                l = null,
                                c = !0,
                                h = function(e, t, n, r, i) {
                                    return "<h3>" + r.label + "</h3>" + "<p>" + r.value + "</p>"
                                },
                                p = "No Data Available.",
                                d = d3.dispatch("tooltipShow", "tooltipHide"),
                                v = function(t, n) {
                                    var n = document.getElementById("chart"),
                                        r = t.pos[0] + n.offsetLeft + i.left,
                                        s = t.pos[1] + n.offsetTop + i.top,
                                        o = "<h3>" + t.label + "</h3>" + "<p>" + t.value + "</p>";
                                    e.tooltip.show([r, s], o, t.value < 0 ? "e" : "w", null, n)
                                };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                d.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                d.tooltipHide(e)
                            }), d.on("tooltipHide", function() {
                                c && e.tooltip.cleanup()
                            }), m.dispatch = d, m.bullet = t, m.orient = function(e) {
                                return arguments.length ? (n = e, r = n == "right" || n == "bottom", m) : n
                            }, m.ranges = function(e) {
                                return arguments.length ? (s = e, m) : s
                            }, m.markers = function(e) {
                                return arguments.length ? (o = e, m) : o
                            }, m.measures = function(e) {
                                return arguments.length ? (u = e, m) : u
                            }, m.width = function(e) {
                                return arguments.length ? (a = e, m) : a
                            }, m.height = function(e) {
                                return arguments.length ? (f = e, m) : f
                            }, m.margin = function(e) {
                                return arguments.length ? (i.top = typeof e.top != "undefined" ? e.top : i.top, i.right = typeof e.right != "undefined" ? e.right : i.right, i.bottom = typeof e.bottom != "undefined" ? e.bottom : i.bottom, i.left = typeof e.left != "undefined" ? e.left : i.left, m) : i
                            }, m.tickFormat = function(e) {
                                return arguments.length ? (l = e, m) : l
                            }, m.tooltips = function(e) {
                                return arguments.length ? (c = e, m) : c
                            }, m.tooltipContent = function(e) {
                                return arguments.length ? (h = e, m) : h
                            }, m.noData = function(e) {
                                return arguments.length ? (p = e, m) : p
                            }, m
                        }, e.models.cumulativeLineChart = function() {
                            function T(e, t) {}

                            function N(e, t) {
                                e.x += d3.event.dx, e.i = Math.round(w.invert(e.x)), d3.select(this).attr("transform", "translate(" + w(e.i) + ",0)")
                            }

                            function C(e, t) {
                                k.update()
                            }

                            function k(e) {
                                return e.each(function(d) {
                                    var T = d3.select(this).classed("nv-chart-" + g, !0),
                                        N = this,
                                        C = (a || parseInt(T.style("width")) || 960) - o.left - o.right,
                                        A = (f || parseInt(T.style("height")) || 400) - o.top - o.bottom;
                                    k.update = function() {
                                        k(e)
                                    }, k.container = this;
                                    if (!d || !d.length || !d.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var O = T.selectAll(".nv-noData").data([y]);
                                        return O.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), O.attr("x", o.left + C / 2).attr("y", o.top + A / 2).text(function(e) {
                                            return e
                                        }), k
                                    }
                                    T.selectAll(".nv-noData").remove(), v = t.xScale(), m = t.yScale();
                                    if (!p) {
                                        var M = d.filter(function(e) {
                                                return !e.disabled
                                            }).map(function(e, n) {
                                                var r = d3.extent(e.values, t.y());
                                                return [(r[0] - r[1]) / (1 + r[1]), (r[1] - r[0]) / (1 + r[0])]
                                            }),
                                            _ = [d3.min(M, function(e) {
                                                return e[0]
                                            }), d3.max(M, function(e) {
                                                return e[1]
                                            })];
                                        t.yDomain(_)
                                    } else t.yDomain(null);
                                    w.domain([0, d[0].values.length - 1]).range([0, C]).clamp(!0);
                                    var d = L(E.i, d),
                                        D = T.selectAll("g.nv-wrap.nv-cumulativeLine").data([d]),
                                        P = D.enter().append("g").attr("class", "nvd3 nv-wrap nv-cumulativeLine").append("g"),
                                        H = D.select("g");
                                    P.append("g").attr("class", "nv-x nv-axis"), P.append("g").attr("class", "nv-y nv-axis"), P.append("g").attr("class", "nv-linesWrap"), P.append("g").attr("class", "nv-legendWrap"), P.append("g").attr("class", "nv-controlsWrap"), l && (i.width(C), H.select(".nv-legendWrap").datum(d).call(i), o.top != i.height() && (o.top = i.height(), A = (f || parseInt(T.style("height")) || 400) - o.top - o.bottom), H.select(".nv-legendWrap").attr("transform", "translate(0," + -o.top + ")"));
                                    if (h) {
                                        var B = [{
                                            key: "Re-scale y-axis",
                                            disabled: !p
                                        }];
                                        s.width(140).color(["#444", "#444", "#444"]), H.select(".nv-controlsWrap").datum(B).attr("transform", "translate(0," + -o.top + ")").call(s)
                                    }
                                    D.attr("transform", "translate(" + o.left + "," + o.top + ")"), t.y(function(e) {
                                        return e.display.y
                                    }).width(C).height(A).color(d.map(function(e, t) {
                                        return e.color || u(e, t)
                                    }).filter(function(e, t) {
                                        return !d[t].disabled
                                    }));
                                    var j = H.select(".nv-linesWrap").datum(d.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(j).call(t);
                                    var F = j.selectAll(".nv-indexLine").data([E]);
                                    F.enter().append("rect").attr("class", "nv-indexLine").attr("width", 3).attr("x", -2).attr("fill", "red").attr("fill-opacity", .5).call(x), F.attr("transform", function(e) {
                                        return "translate(" + w(e.i) + ",0)"
                                    }).attr("height", A), n.scale(v).ticks(C / 100).tickSize(-A, 0), H.select(".nv-x.nv-axis").attr("transform", "translate(0," + m.range()[0] + ")"), d3.transition(H.select(".nv-x.nv-axis")).call(n), r.scale(m).ticks(A / 36).tickSize(-C, 0), d3.transition(H.select(".nv-y.nv-axis")).call(r), s.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, p = !t.disabled, e.transition().call(k)
                                    }), i.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, d.filter(function(e) {
                                            return !e.disabled
                                        }).length || d.map(function(e) {
                                            return e.disabled = !1, D.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(k)
                                    }), b.on("tooltipShow", function(e) {
                                        c && S(e, N.parentNode)
                                    })
                                }), k
                            }

                            function L(e, n) {
                                return n.map(function(n, r) {
                                    var i = t.y()(n.values[e], e);
                                    return n.values = n.values.map(function(e, n) {
                                        return e.display = {
                                            y: (t.y()(e, n) - i) / (1 + i)
                                        }, e
                                    }), n
                                })
                            }
                            var t = e.models.line(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend(),
                                s = e.models.legend(),
                                o = {
                                    top: 30,
                                    right: 30,
                                    bottom: 50,
                                    left: 60
                                },
                                u = e.utils.defaultColor(),
                                a = null,
                                f = null,
                                l = !0,
                                c = !0,
                                h = !0,
                                p = !0,
                                d = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
                                },
                                v, m, g = t.id(),
                                y = "No Data Available.",
                                b = d3.dispatch("tooltipShow", "tooltipHide");
                            n.orient("bottom").tickPadding(5), r.orient("left");
                            var w = d3.scale.linear(),
                                E = {
                                    i: 0,
                                    x: 0
                                },
                                S = function(i, s) {
                                    var o = i.pos[0] + (s.offsetLeft || 0),
                                        u = i.pos[1] + (s.offsetTop || 0),
                                        a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                        f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                        l = d(i.series.key, a, f, i, k);
                                    e.tooltip.show([o, u], l, null, null, s)
                                },
                                x = d3.behavior.drag().on("dragstart", T).on("drag", N).on("dragend", C);
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + o.left, e.pos[1] + o.top], b.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                b.tooltipHide(e)
                            }), b.on("tooltipHide", function() {
                                c && e.tooltip.cleanup()
                            }), k.dispatch = b, k.lines = t, k.legend = i, k.xAxis = n, k.yAxis = r, d3.rebind(k, t, "defined", "isArea", "x", "y", "size", "xDomain", "yDomain", "forceX", "forceY", "interactive", "clipEdge", "clipVoronoi", "id"), k.margin = function(e) {
                                return arguments.length ? (o.top = typeof e.top != "undefined" ? e.top : o.top, o.right = typeof e.right != "undefined" ? e.right : o.right, o.bottom = typeof e.bottom != "undefined" ? e.bottom : o.bottom, o.left = typeof e.left != "undefined" ? e.left : o.left, k) : o
                            }, k.width = function(e) {
                                return arguments.length ? (a = e, k) : a
                            }, k.height = function(e) {
                                return arguments.length ? (f = e, k) : f
                            }, k.color = function(t) {
                                return arguments.length ? (u = e.utils.getColor(t), i.color(u), k) : u
                            }, k.showControls = function(e) {
                                return arguments.length ? (h = e, k) : h
                            }, k.showLegend = function(e) {
                                return arguments.length ? (l = e, k) : l
                            }, k.tooltips = function(e) {
                                return arguments.length ? (c = e, k) : c
                            }, k.tooltipContent = function(e) {
                                return arguments.length ? (d = e, k) : d
                            }, k.noData = function(e) {
                                return arguments.length ? (y = e, k) : y
                            }, k
                        }, e.models.discreteBar = function() {
                            function y(e) {
                                return e.each(function(e) {
                                    var i = n - t.left - t.right,
                                        y = r - t.top - t.bottom,
                                        b = d3.select(this);
                                    e = e.map(function(e, t) {
                                        return e.values = e.values.map(function(e) {
                                            return e.series = t, e
                                        }), e
                                    });
                                    var w = p && d ? [] : e.map(function(e) {
                                        return e.values.map(function(e, t) {
                                            return {
                                                x: u(e, t),
                                                y: a(e, t),
                                                y0: e.y0
                                            }
                                        })
                                    });
                                    s.domain(p || d3.merge(w).map(function(e) {
                                        return e.x
                                    })).rangeBands([0, i], .1), o.domain(d || d3.extent(d3.merge(w).map(function(e) {
                                        return e.y
                                    }).concat(f))), c ? o.range([y - (o.domain()[0] < 0 ? 12 : 0), o.domain()[1] > 0 ? 12 : 0]) : o.range([y, 0]), m = m || s, g = g || o.copy().range([o(0), o(0)]);
                                    var E = b.selectAll("g.nv-wrap.nv-discretebar").data([e]),
                                        S = E.enter().append("g").attr("class", "nvd3 nv-wrap nv-discretebar"),
                                        T = S.append("g"),
                                        N = E.select("g");
                                    T.append("g").attr("class", "nv-groups"), E.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var C = E.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    C.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), d3.transition(C.exit()).style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), C.attr("class", function(e, t) {
                                        return "nv-group nv-series-" + t
                                    }).classed("hover", function(e) {
                                        return e.hover
                                    }), d3.transition(C).style("stroke-opacity", 1).style("fill-opacity", .75);
                                    var k = C.selectAll("g.nv-bar").data(function(e) {
                                        return e.values
                                    });
                                    k.exit().remove();
                                    var L = k.enter().append("g").attr("transform", function(e, t, n) {
                                        return "translate(" + s(u(e, t)) + ", " + o(0) + ")"
                                    }).on("mouseover", function(t, n) {
                                        d3.select(this).classed("hover", !0), v.elementMouseover({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [s(u(t, n)) + s.rangeBand() * (t.series + .5) / e.length, o(a(t, n))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("mouseout", function(t, n) {
                                        d3.select(this).classed("hover", !1), v.elementMouseout({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("click", function(t, n) {
                                        v.elementClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [s(u(t, n)) + s.rangeBand() * (t.series + .5) / e.length, o(a(t, n))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(t, n) {
                                        v.elementDblClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [s(u(t, n)) + s.rangeBand() * (t.series + .5) / e.length, o(a(t, n))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    });
                                    L.append("rect").attr("height", 0).attr("width", s.rangeBand() / e.length), c ? (L.append("text").attr("text-anchor", "middle"), k.select("text").attr("x", s.rangeBand() / 2).attr("y", function(e, t) {
                                        return a(e, t) < 0 ? o(a(e, t)) - o(0) + 12 : -4
                                    }).text(function(e, t) {
                                        return h(a(e, t))
                                    })) : k.selectAll("text").remove(), k.attr("class", function(e, t) {
                                        return a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive"
                                    }).style("fill", function(e, t) {
                                        return e.color || l(e, t)
                                    }).style("stroke", function(e, t) {
                                        return e.color || l(e, t)
                                    }).select("rect").attr("width", s.rangeBand() / e.length), d3.transition(k).attr("transform", function(e, t) {
                                        return "translate(" + s(u(e, t)) + ", " + (a(e, t) < 0 ? o(0) : o(a(e, t))) + ")"
                                    }).select("rect").attr("height", function(e, t) {
                                        return Math.abs(o(a(e, t)) - o(0))
                                    }), m = s.copy(), g = o.copy()
                                }), y
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = Math.floor(Math.random() * 1e4),
                                s = d3.scale.ordinal(),
                                o = d3.scale.linear(),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = [0],
                                l = e.utils.defaultColor(),
                                c = !1,
                                h = d3.format(",.2f"),
                                p, d, v = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout"),
                                m, g;
                            return y.dispatch = v, y.x = function(e) {
                                return arguments.length ? (u = e, y) : u
                            }, y.y = function(e) {
                                return arguments.length ? (a = e, y) : a
                            }, y.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, y) : t
                            }, y.width = function(e) {
                                return arguments.length ? (n = e, y) : n
                            }, y.height = function(e) {
                                return arguments.length ? (r = e, y) : r
                            }, y.xScale = function(e) {
                                return arguments.length ? (s = e, y) : s
                            }, y.yScale = function(e) {
                                return arguments.length ? (o = e, y) : o
                            }, y.xDomain = function(e) {
                                return arguments.length ? (p = e, y) : p
                            }, y.yDomain = function(e) {
                                return arguments.length ? (d = e, y) : d
                            }, y.forceY = function(e) {
                                return arguments.length ? (f = e, y) : f
                            }, y.color = function(t) {
                                return arguments.length ? (l = e.utils.getColor(t), y) : l
                            }, y.id = function(e) {
                                return arguments.length ? (i = e, y) : i
                            }, y.showValues = function(e) {
                                return arguments.length ? (c = e, y) : c
                            }, y.valueFormat = function(e) {
                                return arguments.length ? (h = e, y) : h
                            }, y
                        }, e.models.discreteBarChart = function() {
                            function m(e) {
                                return e.each(function(u) {
                                    var l = d3.select(this),
                                        g = this,
                                        b = (s || parseInt(l.style("width")) || 960) - i.left - i.right,
                                        w = (o || parseInt(l.style("height")) || 400) - i.top - i.bottom;
                                    m.update = function() {
                                        e.transition().call(m)
                                    }, m.container = this;
                                    if (!u || !u.length || !u.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var E = l.selectAll(".nv-noData").data([p]);
                                        return E.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), E.attr("x", i.left + b / 2).attr("y", i.top + w / 2).text(function(e) {
                                            return e
                                        }), m
                                    }
                                    l.selectAll(".nv-noData").remove(), c = t.xScale(), h = t.yScale();
                                    var S = l.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),
                                        T = S.enter().append("g").attr("class", "nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),
                                        N = T.append("defs"),
                                        C = S.select("g");
                                    T.append("g").attr("class", "nv-x nv-axis"), T.append("g").attr("class", "nv-y nv-axis"), T.append("g").attr("class", "nv-barsWrap"), C.attr("transform", "translate(" + i.left + "," + i.top + ")"), t.width(b).height(w);
                                    var k = C.select(".nv-barsWrap").datum(u.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(k).call(t), N.append("clipPath").attr("id", "nv-x-label-clip-" + t.id()).append("rect"), C.select("#nv-x-label-clip-" + t.id() + " rect").attr("width", c.rangeBand() * (a ? 2 : 1)).attr("height", 16).attr("x", -c.rangeBand() / (a ? 1 : 2)), n.scale(c).ticks(b / 100).tickSize(-w, 0), C.select(".nv-x.nv-axis").attr("transform", "translate(0," + (h.range()[0] + (t.showValues() && h.domain()[0] < 0 ? 16 : 0)) + ")"), C.select(".nv-x.nv-axis").transition().duration(0).call(n);
                                    var L = C.select(".nv-x.nv-axis").selectAll("g");
                                    a && L.selectAll("text").attr("transform", function(e, t, n) {
                                        return "translate(0," + (n % 2 == 0 ? "0" : "12") + ")"
                                    }), r.scale(h).ticks(w / 36).tickSize(-b, 0), d3.transition(C.select(".nv-y.nv-axis")).call(r), d.on("tooltipShow", function(e) {
                                        f && v(e, g.parentNode)
                                    })
                                }), m
                            }
                            var t = e.models.discreteBar(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = {
                                    top: 10,
                                    right: 10,
                                    bottom: 50,
                                    left: 60
                                },
                                s = null,
                                o = null,
                                u = e.utils.getColor(),
                                a = !1,
                                f = !0,
                                l = function(e, t, n, r, i) {
                                    return "<h3>" + t + "</h3>" + "<p>" + n + "</p>"
                                },
                                c, h, p = "No Data Available.",
                                d = d3.dispatch("tooltipShow", "tooltipHide");
                            n.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e) {
                                return e
                            }), r.orient("left").tickFormat(d3.format(",.1f"));
                            var v = function(i, s) {
                                var o = i.pos[0] + (s.offsetLeft || 0),
                                    u = i.pos[1] + (s.offsetTop || 0),
                                    a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                    f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                    c = l(i.series.key, a, f, i, m);
                                e.tooltip.show([o, u], c, i.value < 0 ? "n" : "s", null, s)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + i.left, e.pos[1] + i.top], d.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                d.tooltipHide(e)
                            }), d.on("tooltipHide", function() {
                                f && e.tooltip.cleanup()
                            }), m.dispatch = d, m.discretebar = t, m.xAxis = n, m.yAxis = r, d3.rebind(m, t, "x", "y", "xDomain", "yDomain", "forceX", "forceY", "id", "showValues", "valueFormat"), m.margin = function(e) {
                                return arguments.length ? (i.top = typeof e.top != "undefined" ? e.top : i.top, i.right = typeof e.right != "undefined" ? e.right : i.right, i.bottom = typeof e.bottom != "undefined" ? e.bottom : i.bottom, i.left = typeof e.left != "undefined" ? e.left : i.left, m) : i
                            }, m.width = function(e) {
                                return arguments.length ? (s = e, m) : s
                            }, m.height = function(e) {
                                return arguments.length ? (o = e, m) : o
                            }, m.color = function(n) {
                                return arguments.length ? (u = e.utils.getColor(n), t.color(u), m) : u
                            }, m.staggerLabels = function(e) {
                                return arguments.length ? (a = e, m) : a
                            }, m.tooltips = function(e) {
                                return arguments.length ? (f = e, m) : f
                            }, m.tooltipContent = function(e) {
                                return arguments.length ? (l = e, m) : l
                            }, m.noData = function(e) {
                                return arguments.length ? (p = e, m) : p
                            }, m
                        }, e.models.distribution = function() {
                            function l(e) {
                                return e.each(function(e) {
                                    var a = n - (i === "x" ? t.left + t.right : t.top + t.bottom),
                                        l = i == "x" ? "y" : "x",
                                        c = d3.select(this);
                                    f = f || u;
                                    var h = c.selectAll("g.nv-distribution").data([e]),
                                        p = h.enter().append("g").attr("class", "nvd3 nv-distribution"),
                                        d = p.append("g"),
                                        v = h.select("g");
                                    h.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var m = v.selectAll("g.nv-dist").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    m.enter().append("g"), m.attr("class", function(e, t) {
                                        return "nv-dist nv-series-" + t
                                    }).style("stroke", function(e, t) {
                                        return o(e, t)
                                    });
                                    var g = m.selectAll("line.nv-dist" + i).data(function(e) {
                                        return e.values
                                    });
                                    g.enter().append("line").attr(i + "1", function(e, t) {
                                        return f(s(e, t))
                                    }).attr(i + "2", function(e, t) {
                                        return f(s(e, t))
                                    }), d3.transition(m.exit().selectAll("line.nv-dist" + i)).attr(i + "1", function(e, t) {
                                        return u(s(e, t))
                                    }).attr(i + "2", function(e, t) {
                                        return u(s(e, t))
                                    }).style("stroke-opacity", 0).remove(), g.attr("class", function(e, t) {
                                        return "nv-dist" + i + " nv-dist" + i + "-" + t
                                    }).attr(l + "1", 0).attr(l + "2", r), d3.transition(g).attr(i + "1", function(e, t) {
                                        return u(s(e, t))
                                    }).attr(i + "2", function(e, t) {
                                        return u(s(e, t))
                                    }), f = u.copy()
                                }), l
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 400,
                                r = 8,
                                i = "x",
                                s = function(e) {
                                    return e[i]
                                },
                                o = e.utils.defaultColor(),
                                u = d3.scale.linear(),
                                a, f;
                            return l.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, l) : t
                            }, l.width = function(e) {
                                return arguments.length ? (n = e, l) : n
                            }, l.axis = function(e) {
                                return arguments.length ? (i = e, l) : i
                            }, l.size = function(e) {
                                return arguments.length ? (r = e, l) : r
                            }, l.getData = function(e) {
                                return arguments.length ? (s = d3.functor(e), l) : s
                            }, l.scale = function(e) {
                                return arguments.length ? (u = e, l) : u
                            }, l.color = function(t) {
                                return arguments.length ? (o = e.utils.getColor(t), l) : o
                            }, l
                        }, e.models.indentedTree = function() {
                            function d(e) {
                                return e.each(function(t) {
                                    function N(e, t, n) {
                                        d3.event.stopPropagation();
                                        if (d3.event.shiftKey && !n) return d3.event.shiftKey = !1, e.values && e.values.forEach(function(e) {
                                            (e.values || e._values) && N(e, 0, !0)
                                        }), !0;
                                        if (!L(e)) return !0;
                                        e.values ? (e._values = e.values, e.values = null) : (e.values = e._values, e._values = null), d.update()
                                    }

                                    function C(e) {
                                        return e._values && e._values.length ? c : e.values && e.values.length ? h : ""
                                    }

                                    function k(e) {
                                        return e._values && e._values.length
                                    }

                                    function L(e) {
                                        var t = e.values || e._values;
                                        return t && t.length
                                    }
                                    var n = 0,
                                        i = 1,
                                        s = d3.layout.tree().children(function(e) {
                                            return e.values
                                        }).size([r, a]);
                                    d.update = function() {
                                        e.transition().call(d)
                                    }, d.container = this, t[0].key || (t[0].key = u);
                                    var v = s.nodes(t[0]),
                                        m = d3.select(this).selectAll("div").data([
                                            [v]
                                        ]),
                                        g = m.enter().append("div").attr("class", "nvd3 nv-wrap nv-indentedtree"),
                                        y = g.append("table"),
                                        b = m.select("table").attr("width", "100%").attr("class", l);
                                    if (o) {
                                        var w = y.append("thead"),
                                            E = w.append("tr");
                                        f.forEach(function(e) {
                                            E.append("th").attr("width", e.width ? e.width : "10%").style("text-align", e.type == "numeric" ? "right" : "left").append("span").text(e.label)
                                        })
                                    }
                                    var S = b.selectAll("tbody").data(function(e) {
                                        return e
                                    });
                                    S.enter().append("tbody"), i = d3.max(v, function(e) {
                                        return e.depth
                                    }), s.size([r, i * a]);
                                    var x = S.selectAll("tr").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.id || e.id == ++n
                                    });
                                    x.exit().remove(), x.select("img.nv-treeicon").attr("src", C).classed("folded", k);
                                    var T = x.enter().append("tr");
                                    f.forEach(function(e, t) {
                                        var n = T.append("td").style("padding-left", function(e) {
                                            return (t ? 0 : e.depth * a + 12 + (C(e) ? 0 : 16)) + "px"
                                        }, "important").style("text-align", e.type == "numeric" ? "right" : "left");
                                        t == 0 && n.append("img").classed("nv-treeicon", !0).classed("nv-folded", k).attr("src", C).style("width", "14px").style("height", "14px").style("padding", "0 1px").style("display", function(e) {
                                            return C(e) ? "inline-block" : "none"
                                        }).on("click", N), n.append("span").attr("class", d3.functor(e.classes)).text(function(t) {
                                            return e.format ? e.format(t) : t[e.key] || "-"
                                        }), e.showCount && n.append("span").attr("class", "nv-childrenCount").text(function(e) {
                                            return e.values && e.values.length || e._values && e._values.length ? "(" + (e.values && e.values.length || e._values && e._values.length) + ")" : ""
                                        }), e.click && n.select("span").on("click", e.click)
                                    }), x.order().on("click", function(e) {
                                        p.elementClick({
                                            row: this,
                                            data: e,
                                            pos: [e.x, e.y]
                                        })
                                    }).on("dblclick", function(e) {
                                        p.elementDblclick({
                                            row: this,
                                            data: e,
                                            pos: [e.x, e.y]
                                        })
                                    }).on("mouseover", function(e) {
                                        p.elementMouseover({
                                            row: this,
                                            data: e,
                                            pos: [e.x, e.y]
                                        })
                                    }).on("mouseout", function(e) {
                                        p.elementMouseout({
                                            row: this,
                                            data: e,
                                            pos: [e.x, e.y]
                                        })
                                    })
                                }), d
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = e.utils.defaultColor(),
                                s = Math.floor(Math.random() * 1e4),
                                o = !0,
                                u = "No Data Available.",
                                a = 20,
                                f = [{
                                    key: "key",
                                    label: "Name",
                                    type: "text"
                                }],
                                l = null,
                                c = "images/grey-plus.png",
                                h = "images/grey-minus.png",
                                p = d3.dispatch("elementClick", "elementDblclick", "elementMouseover", "elementMouseout");
                            return d.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, d) : t
                            }, d.width = function(e) {
                                return arguments.length ? (n = e, d) : n
                            }, d.height = function(e) {
                                return arguments.length ? (r = e, d) : r
                            }, d.color = function(t) {
                                return arguments.length ? (i = e.utils.getColor(t), scatter.color(i), d) : i
                            }, d.id = function(e) {
                                return arguments.length ? (s = e, d) : s
                            }, d.header = function(e) {
                                return arguments.length ? (o = e, d) : o
                            }, d.noData = function(e) {
                                return arguments.length ? (u = e, d) : u
                            }, d.columns = function(e) {
                                return arguments.length ? (f = e, d) : f
                            }, d.tableClass = function(e) {
                                return arguments.length ? (l = e, d) : l
                            }, d.iconOpen = function(e) {
                                return arguments.length ? (c = e, d) : c
                            }, d.iconClose = function(e) {
                                return arguments.length ? (h = e, d) : h
                            }, d
                        }, e.models.legend = function() {
                            function a(e) {
                                return e.each(function(e) {
                                    var a = n - t.left - t.right,
                                        f = d3.select(this),
                                        l = f.selectAll("g.nv-legend").data([e]),
                                        c = l.enter().append("g").attr("class", "nvd3 nv-legend").append("g"),
                                        h = l.select("g");
                                    l.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var p = h.selectAll(".nv-series").data(function(e) {
                                            return e
                                        }),
                                        d = p.enter().append("g").attr("class", "nv-series").on("mouseover", function(e, t) {
                                            u.legendMouseover(e, t)
                                        }).on("mouseout", function(e, t) {
                                            u.legendMouseout(e, t)
                                        }).on("click", function(e, t) {
                                            u.legendClick(e, t)
                                        }).on("dblclick", function(e, t) {
                                            u.legendDblclick(e, t)
                                        });
                                    d.append("circle").style("stroke-width", 2).attr("r", 5), d.append("text").attr("text-anchor", "start").attr("dy", ".32em").attr("dx", "8"), p.classed("disabled", function(e) {
                                        return e.disabled
                                    }), p.exit().remove(), p.select("circle").style("fill", function(e, t) {
                                        return e.color || s(e, t)
                                    }).style("stroke", function(e, t) {
                                        return e.color || s(e, t)
                                    }), p.select("text").text(i);
                                    if (o) {
                                        var v = [];
                                        p.each(function(e, t) {
                                            v.push(d3.select(this).select("text").node().getComputedTextLength() + 28)
                                        });
                                        var m = 0,
                                            g = 0,
                                            y = [];
                                        while (g < a && m < v.length) y[m] = v[m], g += v[m++];
                                        while (g > a && m > 1) {
                                            y = [], m--;
                                            for (k = 0; k < v.length; k++) v[k] > (y[k % m] || 0) && (y[k % m] = v[k]);
                                            g = y.reduce(function(e, t, n, r) {
                                                return e + t
                                            })
                                        }
                                        var b = [];
                                        for (var w = 0, E = 0; w < m; w++) b[w] = E, E += y[w];
                                        p.attr("transform", function(e, t) {
                                            return "translate(" + b[t % m] + "," + (5 + Math.floor(t / m) * 20) + ")"
                                        }), h.attr("transform", "translate(" + (n - t.right - g) + "," + t.top + ")"), r = t.top + t.bottom + Math.ceil(v.length / m) * 20
                                    } else {
                                        var S = 5,
                                            x = 5,
                                            T = 0,
                                            N;
                                        p.attr("transform", function(e, r) {
                                            var i = d3.select(this).select("text").node().getComputedTextLength() + 28;
                                            return N = x, n < t.left + t.right + N + i && (x = N = 5, S += 20), x += i, x > T && (T = x), "translate(" + N + "," + S + ")"
                                        }), h.attr("transform", "translate(" + (n - t.right - T) + "," + t.top + ")"), r = t.top + t.bottom + S + 15
                                    }
                                }), a
                            }
                            var t = {
                                    top: 5,
                                    right: 0,
                                    bottom: 5,
                                    left: 0
                                },
                                n = 400,
                                r = 20,
                                i = function(e) {
                                    return e.key
                                },
                                s = e.utils.defaultColor(),
                                o = !0,
                                u = d3.dispatch("legendClick", "legendDblclick", "legendMouseover", "legendMouseout");
                            return a.dispatch = u, a.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, a) : t
                            }, a.width = function(e) {
                                return arguments.length ? (n = e, a) : n
                            }, a.height = function(e) {
                                return arguments.length ? (r = e, a) : r
                            }, a.key = function(e) {
                                return arguments.length ? (i = e, a) : i
                            }, a.color = function(t) {
                                return arguments.length ? (s = e.utils.getColor(t), a) : s
                            }, a.align = function(e) {
                                return arguments.length ? (o = e, a) : o
                            }, a
                        }, e.models.line = function() {
                            function g(e) {
                                return e.each(function(e) {
                                    var g = n - t.left - t.right,
                                        b = r - t.top - t.bottom,
                                        w = d3.select(this);
                                    c = d.xScale(), h = d.yScale(), v = v || c, m = m || h;
                                    var E = w.selectAll("g.nv-wrap.nv-line").data([e]),
                                        S = E.enter().append("g").attr("class", "nvd3 nv-wrap nv-line"),
                                        T = S.append("defs"),
                                        N = S.append("g"),
                                        C = E.select("g");
                                    N.append("g").attr("class", "nv-groups"), N.append("g").attr("class", "nv-scatterWrap"), E.attr("transform", "translate(" + t.left + "," + t.top + ")"), d.width(g).height(b);
                                    var k = E.select(".nv-scatterWrap");
                                    d3.transition(k).call(d), T.append("clipPath").attr("id", "nv-edge-clip-" + s).append("rect"), E.select("#nv-edge-clip-" + s + " rect").attr("width", g).attr("height", b), C.attr("clip-path", l ? "url(#nv-edge-clip-" + s + ")" : ""), k.attr("clip-path", l ? "url(#nv-edge-clip-" + s + ")" : "");
                                    var L = E.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    L.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), d3.transition(L.exit()).style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), L.attr("class", function(e, t) {
                                        return "nv-group nv-series-" + t
                                    }).classed("hover", function(e) {
                                        return e.hover
                                    }).style("fill", function(e, t) {
                                        return i(e, t)
                                    }).style("stroke", function(e, t) {
                                        return i(e, t)
                                    }), d3.transition(L).style("stroke-opacity", 1).style("fill-opacity", .5);
                                    var A = L.selectAll("path.nv-area").data(function(e) {
                                        return f(e) ? [e] : []
                                    });
                                    A.enter().append("path").attr("class", "nv-area").attr("d", function(e) {
                                        return d3.svg.area().interpolate(p).defined(a).x(function(e, t) {
                                            return v(o(e, t))
                                        }).y0(function(e, t) {
                                            return m(u(e, t))
                                        }).y1(function(e, t) {
                                            return m(h.domain()[0] <= 0 ? h.domain()[1] >= 0 ? 0 : h.domain()[1] : h.domain()[0])
                                        }).apply(this, [e.values])
                                    }), d3.transition(L.exit().selectAll("path.nv-area")).attr("d", function(e) {
                                        return d3.svg.area().interpolate(p).defined(a).x(function(e, t) {
                                            return v(o(e, t))
                                        }).y0(function(e, t) {
                                            return m(u(e, t))
                                        }).y1(function(e, t) {
                                            return m(h.domain()[0] <= 0 ? h.domain()[1] >= 0 ? 0 : h.domain()[1] : h.domain()[0])
                                        }).apply(this, [e.values])
                                    }), d3.transition(A).attr("d", function(e) {
                                        return d3.svg.area().interpolate(p).defined(a).x(function(e, t) {
                                            return v(o(e, t))
                                        }).y0(function(e, t) {
                                            return m(u(e, t))
                                        }).y1(function(e, t) {
                                            return m(h.domain()[0] <= 0 ? h.domain()[1] >= 0 ? 0 : h.domain()[1] : h.domain()[0])
                                        }).apply(this, [e.values])
                                    });
                                    var O = L.selectAll("path.nv-line").data(function(e) {
                                        return [e.values]
                                    });
                                    O.enter().append("path").attr("class", "nv-line").attr("d", d3.svg.line().interpolate(p).defined(a).x(function(e, t) {
                                        return v(o(e, t))
                                    }).y(function(e, t) {
                                        return m(u(e, t))
                                    })), d3.transition(L.exit().selectAll("path.nv-line")).attr("d", d3.svg.line().interpolate(p).defined(a).x(function(e, t) {
                                        return c(o(e, t))
                                    }).y(function(e, t) {
                                        return h(u(e, t))
                                    })), d3.transition(O).attr("d", d3.svg.line().interpolate(p).defined(a).x(function(e, t) {
                                        return c(o(e, t))
                                    }).y(function(e, t) {
                                        return h(u(e, t))
                                    })), v = c.copy(), m = h.copy()
                                }), g
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = e.utils.defaultColor(),
                                s = Math.floor(Math.random() * 1e4),
                                o = function(e) {
                                    return e.x
                                },
                                u = function(e) {
                                    return e.y
                                },
                                a = function(e, t) {
                                    return !isNaN(u(e, t)) && u(e, t) !== null
                                },
                                f = function(e) {
                                    return e.area
                                },
                                l = !1,
                                c, h, p = "linear",
                                d = e.models.scatter();
                            d.id(s).size(16).sizeDomain([16, 256]);
                            var v, m;
                            return g.dispatch = d.dispatch, g.scatter = d, d3.rebind(g, d, "interactive", "size", "xScale", "yScale", "zScale", "xDomain", "yDomain", "sizeDomain", "forceX", "forceY", "forceSize", "clipVoronoi", "clipRadius"), g.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, g) : t
                            }, g.width = function(e) {
                                return arguments.length ? (n = e, g) : n
                            }, g.height = function(e) {
                                return arguments.length ? (r = e, g) : r
                            }, g.x = function(e) {
                                return arguments.length ? (o = e, d.x(e), g) : o
                            }, g.y = function(e) {
                                return arguments.length ? (u = e, d.y(e), g) : u
                            }, g.clipEdge = function(e) {
                                return arguments.length ? (l = e, g) : l
                            }, g.color = function(t) {
                                return arguments.length ? (i = e.utils.getColor(t), d.color(i), g) : i
                            }, g.id = function(e) {
                                return arguments.length ? (s = e, g) : s
                            }, g.interpolate = function(e) {
                                return arguments.length ? (p = e, g) : p
                            }, g.defined = function(e) {
                                return arguments.length ? (a = e, g) : a
                            }, g.isArea = function(e) {
                                return arguments.length ? (f = d3.functor(e), g) : f
                            }, g
                        }, e.models.lineChart = function() {
                            function g(e) {
                                return e.each(function(c) {
                                    var b = d3.select(this),
                                        w = this,
                                        E = (u || parseInt(b.style("width")) || 960) - s.left - s.right,
                                        S = (a || parseInt(b.style("height")) || 400) - s.top - s.bottom;
                                    g.update = function() {
                                        g(e)
                                    }, g.container = this;
                                    if (!c || !c.length || !c.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var T = b.selectAll(".nv-noData").data([d]);
                                        return T.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), T.attr("x", s.left + E / 2).attr("y", s.top + S / 2).text(function(e) {
                                            return e
                                        }), g
                                    }
                                    b.selectAll(".nv-noData").remove(), h = t.xScale(), p = t.yScale();
                                    var N = b.selectAll("g.nv-wrap.nv-lineChart").data([c]),
                                        C = N.enter().append("g").attr("class", "nvd3 nv-wrap nv-lineChart").append("g"),
                                        k = N.select("g");
                                    C.append("g").attr("class", "nv-x nv-axis"), C.append("g").attr("class", "nv-y nv-axis"), C.append("g").attr("class", "nv-linesWrap"), C.append("g").attr("class", "nv-legendWrap"), f && (i.width(E), k.select(".nv-legendWrap").datum(c).call(i), s.top != i.height() && (s.top = i.height(), S = (a || parseInt(b.style("height")) || 400) - s.top - s.bottom), N.select(".nv-legendWrap").attr("transform", "translate(0," + -s.top + ")")), N.attr("transform", "translate(" + s.left + "," + s.top + ")"), t.width(E).height(S).color(c.map(function(e, t) {
                                        return e.color || o(e, t)
                                    }).filter(function(e, t) {
                                        return !c[t].disabled
                                    }));
                                    var L = k.select(".nv-linesWrap").datum(c.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(L).call(t), n.scale(h).ticks(E / 100).tickSize(-S, 0), k.select(".nv-x.nv-axis").attr("transform", "translate(0," + p.range()[0] + ")"), d3.transition(k.select(".nv-x.nv-axis")).call(n), r.scale(p).ticks(S / 36).tickSize(-E, 0), d3.transition(k.select(".nv-y.nv-axis")).call(r), i.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, c.filter(function(e) {
                                            return !e.disabled
                                        }).length || c.map(function(e) {
                                            return e.disabled = !1, N.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(g)
                                    }), v.on("tooltipShow", function(e) {
                                        l && m(e, w.parentNode)
                                    })
                                }), g
                            }
                            var t = e.models.line(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend(),
                                s = {
                                    top: 30,
                                    right: 20,
                                    bottom: 50,
                                    left: 60
                                },
                                o = e.utils.defaultColor(),
                                u = null,
                                a = null,
                                f = !0,
                                l = !0,
                                c = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
                                },
                                h, p, d = "No Data Available.",
                                v = d3.dispatch("tooltipShow", "tooltipHide");
                            n.orient("bottom").tickPadding(5), r.orient("left");
                            var m = function(i, s) {
                                if (s) {
                                    var o = d3.select(s).select("svg"),
                                        u = o.attr("viewBox");
                                    if (u) {
                                        u = u.split(" ");
                                        var a = parseInt(o.style("width")) / u[2];
                                        i.pos[0] = i.pos[0] * a, i.pos[1] = i.pos[1] * a
                                    }
                                }
                                var f = i.pos[0] + (s.offsetLeft || 0),
                                    l = i.pos[1] + (s.offsetTop || 0),
                                    h = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                    p = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                    d = c(i.series.key, h, p, i, g);
                                e.tooltip.show([f, l], d, null, null, s)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + s.left, e.pos[1] + s.top], v.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                v.tooltipHide(e)
                            }), v.on("tooltipHide", function() {
                                l && e.tooltip.cleanup()
                            }), g.dispatch = v, g.lines = t, g.legend = i, g.xAxis = n, g.yAxis = r, d3.rebind(g, t, "defined", "isArea", "x", "y", "size", "xScale", "yScale", "xDomain", "yDomain", "forceX", "forceY", "interactive", "clipEdge", "clipVoronoi", "id", "interpolate"), g.margin = function(e) {
                                return arguments.length ? (s.top = typeof e.top != "undefined" ? e.top : s.top, s.right = typeof e.right != "undefined" ? e.right : s.right, s.bottom = typeof e.bottom != "undefined" ? e.bottom : s.bottom, s.left = typeof e.left != "undefined" ? e.left : s.left, g) : s
                            }, g.width = function(e) {
                                return arguments.length ? (u = e, g) : u
                            }, g.height = function(e) {
                                return arguments.length ? (a = e, g) : a
                            }, g.color = function(t) {
                                return arguments.length ? (o = e.utils.getColor(t), i.color(o), g) : o
                            }, g.showLegend = function(e) {
                                return arguments.length ? (f = e, g) : f
                            }, g.tooltips = function(e) {
                                return arguments.length ? (l = e, g) : l
                            }, g.tooltipContent = function(e) {
                                return arguments.length ? (c = e, g) : c
                            }, g.noData = function(e) {
                                return arguments.length ? (d = e, g) : d
                            }, g
                        }, e.models.linePlusBarChart = function() {
                            function S(e) {
                                return e.each(function(v) {
                                    var T = d3.select(this),
                                        N = this,
                                        C = (a || parseInt(T.style("width")) || 960) - u.left - u.right,
                                        k = (f || parseInt(T.style("height")) || 400) - u.top - u.bottom;
                                    S.update = function() {
                                        S(e)
                                    }, S.container = this;
                                    if (!v || !v.length || !v.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var L = T.selectAll(".nv-noData").data([b]);
                                        return L.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), L.attr("x", u.left + C / 2).attr("y", u.top + k / 2).text(function(e) {
                                            return e
                                        }), S
                                    }
                                    T.selectAll(".nv-noData").remove(), m = r.scale(), g = n.yScale(), y = t.yScale();
                                    var A = v.filter(function(e) {
                                            return !e.disabled && e.bar
                                        }),
                                        O = v.filter(function(e) {
                                            return !e.disabled && !e.bar
                                        }),
                                        M = v.filter(function(e) {
                                            return !e.disabled && e.bar
                                        }).map(function(e) {
                                            return e.values.map(function(e, t) {
                                                return {
                                                    x: l(e, t),
                                                    y: c(e, t)
                                                }
                                            })
                                        }),
                                        _ = v.filter(function(e) {
                                            return !e.disabled && !e.bar
                                        }).map(function(e) {
                                            return e.values.map(function(e, t) {
                                                return {
                                                    x: l(e, t),
                                                    y: c(e, t)
                                                }
                                            })
                                        });
                                    m.domain(d3.extent(d3.merge(M.concat(_)), function(e) {
                                        return e.x
                                    })).range([0, C]);
                                    var D = d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([v]),
                                        P = D.enter().append("g").attr("class", "nvd3 nv-wrap nv-linePlusBar").append("g"),
                                        H = D.select("g");
                                    P.append("g").attr("class", "nv-x nv-axis"), P.append("g").attr("class", "nv-y1 nv-axis"), P.append("g").attr("class", "nv-y2 nv-axis"), P.append("g").attr("class", "nv-barsWrap"), P.append("g").attr("class", "nv-linesWrap"), P.append("g").attr("class", "nv-legendWrap"), p && (o.width(C / 2), H.select(".nv-legendWrap").datum(v.map(function(e) {
                                        return e.originalKey = e.originalKey === undefined ? e.key : e.originalKey, e.key = e.originalKey + (e.bar ? " (left axis)" : " (right axis)"), e
                                    })).call(o), u.top != o.height() && (u.top = o.height(), k = (f || parseInt(T.style("height")) || 400) - u.top - u.bottom), H.select(".nv-legendWrap").attr("transform", "translate(" + C / 2 + "," + -u.top + ")")), D.attr("transform", "translate(" + u.left + "," + u.top + ")"), t.width(C).height(k).clipEdge(!0).color(v.map(function(e, t) {
                                        return e.color || h(e, t)
                                    }).filter(function(e, t) {
                                        return !v[t].disabled && !v[t].bar
                                    })), n.width(C).height(k).color(v.map(function(e, t) {
                                        return e.color || h(e, t)
                                    }).filter(function(e, t) {
                                        return !v[t].disabled && v[t].bar
                                    }));
                                    var B = H.select(".nv-barsWrap").datum(A.length ? A : [{
                                            values: []
                                        }]),
                                        j = H.select(".nv-linesWrap").datum(O.length ? O : [{
                                            values: []
                                        }]);
                                    d3.transition(B).call(n), d3.transition(j).call(t), r.ticks(C / 100).tickSize(-k, 0), H.select(".nv-x.nv-axis").attr("transform", "translate(0," + g.range()[0] + ")"), d3.transition(H.select(".nv-x.nv-axis")).call(r), i.scale(g).ticks(k / 36).tickSize(-C, 0), d3.transition(H.select(".nv-y1.nv-axis")).style("opacity", A.length ? 1 : 0).call(i), s.scale(y).ticks(k / 36).tickSize(A.length ? 0 : -C, 0), H.select(".nv-y2.nv-axis").style("opacity", O.length ? 1 : 0).attr("transform", "translate(" + m.range()[1] + ",0)"), d3.transition(H.select(".nv-y2.nv-axis")).call(s), o.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, v.filter(function(e) {
                                            return !e.disabled
                                        }).length || v.map(function(e) {
                                            return e.disabled = !1, D.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(S)
                                    }), w.on("tooltipShow", function(e) {
                                        d && E(e, N.parentNode)
                                    })
                                }), S
                            }
                            var t = e.models.line(),
                                n = e.models.historicalBar(),
                                r = e.models.axis(),
                                i = e.models.axis(),
                                s = e.models.axis(),
                                o = e.models.legend(),
                                u = {
                                    top: 30,
                                    right: 60,
                                    bottom: 50,
                                    left: 60
                                },
                                a = null,
                                f = null,
                                l = function(e) {
                                    return e.x
                                },
                                c = function(e) {
                                    return e.y
                                },
                                h = e.utils.defaultColor(),
                                p = !0,
                                d = !0,
                                v = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
                                },
                                m, g, y, b = "No Data Available.",
                                w = d3.dispatch("tooltipShow", "tooltipHide");
                            r.orient("bottom").tickPadding(5), i.orient("left"), s.orient("right");
                            var E = function(n, o) {
                                var u = n.pos[0] + (o.offsetLeft || 0),
                                    a = n.pos[1] + (o.offsetTop || 0),
                                    f = r.tickFormat()(t.x()(n.point, n.pointIndex)),
                                    l = (n.series.bar ? i : s).tickFormat()(t.y()(n.point, n.pointIndex)),
                                    c = v(n.series.key, f, l, n, S);
                                e.tooltip.show([u, a], c, n.value < 0 ? "n" : "s", null, o)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + u.left, e.pos[1] + u.top], w.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                w.tooltipHide(e)
                            }), n.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + u.left, e.pos[1] + u.top], w.tooltipShow(e)
                            }), n.dispatch.on("elementMouseout.tooltip", function(e) {
                                w.tooltipHide(e)
                            }), w.on("tooltipHide", function() {
                                d && e.tooltip.cleanup()
                            }), S.dispatch = w, S.legend = o, S.lines = t, S.bars = n, S.xAxis = r, S.y1Axis = i, S.y2Axis = s, d3.rebind(S, t, "defined", "size", "clipVoronoi", "interpolate"), S.x = function(e) {
                                return arguments.length ? (l = e, t.x(e), n.x(e), S) : l
                            }, S.y = function(e) {
                                return arguments.length ? (c = e, t.y(e), n.y(e), S) : c
                            }, S.margin = function(e) {
                                return arguments.length ? (u.top = typeof e.top != "undefined" ? e.top : u.top, u.right = typeof e.right != "undefined" ? e.right : u.right, u.bottom = typeof e.bottom != "undefined" ? e.bottom : u.bottom, u.left = typeof e.left != "undefined" ? e.left : u.left, S) : u
                            }, S.width = function(e) {
                                return arguments.length ? (a = e, S) : a
                            }, S.height = function(e) {
                                return arguments.length ? (f = e, S) : f
                            }, S.color = function(t) {
                                return arguments.length ? (h = e.utils.getColor(t), o.color(h), S) : h
                            }, S.showLegend = function(e) {
                                return arguments.length ? (p = e, S) : p
                            }, S.tooltips = function(e) {
                                return arguments.length ? (d = e, S) : d
                            }, S.tooltipContent = function(e) {
                                return arguments.length ? (v = e, S) : v
                            }, S.noData = function(e) {
                                return arguments.length ? (b = e, S) : b
                            }, S
                        }, e.models.lineWithFocusChart = function() {
                            function C(e) {
                                return e.each(function(S) {
                                    function R(e) {
                                        var t = +(e == "e"),
                                            n = t ? 1 : -1,
                                            r = M / 3;
                                        return "M" + .5 * n + "," + r + "A6,6 0 0 " + t + " " + 6.5 * n + "," + (r + 6) + "V" + (2 * r - 6) + "A6,6 0 0 " + t + " " + .5 * n + "," + 2 * r + "Z" + "M" + 2.5 * n + "," + (r + 8) + "V" + (2 * r - 8) + "M" + 4.5 * n + "," + (r + 8) + "V" + (2 * r - 8)
                                    }

                                    function U() {
                                        a.empty() || a.extent(w), I.data([a.empty() ? g.domain() : w]).each(function(e, t) {
                                            var n = g(e[0]) - v.range()[0],
                                                r = v.range()[1] - g(e[1]);
                                            d3.select(this).select(".left").attr("width", n < 0 ? 0 : n), d3.select(this).select(".right").attr("x", g(e[1])).attr("width", r < 0 ? 0 : r)
                                        })
                                    }

                                    function z() {
                                        w = a.empty() ? null : a.extent(), extent = a.empty() ? g.domain() : a.extent(), T.brush({
                                            extent: extent,
                                            brush: a
                                        }), U();
                                        var e = H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e) {
                                            return !e.disabled
                                        }).map(function(e, n) {
                                            return {
                                                key: e.key,
                                                values: e.values.filter(function(e, n) {
                                                    return t.x()(e, n) >= extent[0] && t.x()(e, n) <= extent[1]
                                                })
                                            }
                                        }));
                                        d3.transition(e).call(t), d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r), d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)
                                    }
                                    var k = d3.select(this),
                                        L = this,
                                        A = (h || parseInt(k.style("width")) || 960) - f.left - f.right,
                                        O = (p || parseInt(k.style("height")) || 400) - f.top - f.bottom - d,
                                        M = d - l.top - l.bottom;
                                    C.update = function() {
                                        C(e)
                                    }, C.container = this;
                                    if (!S || !S.length || !S.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var _ = k.selectAll(".nv-noData").data([x]);
                                        return _.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), _.attr("x", f.left + A / 2).attr("y", f.top + O / 2).text(function(e) {
                                            return e
                                        }), C
                                    }
                                    k.selectAll(".nv-noData").remove(), v = t.xScale(), m = t.yScale(), g = n.xScale(), y = n.yScale();
                                    var D = k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),
                                        P = D.enter().append("g").attr("class", "nvd3 nv-wrap nv-lineWithFocusChart").append("g"),
                                        H = D.select("g");
                                    P.append("g").attr("class", "nv-legendWrap");
                                    var B = P.append("g").attr("class", "nv-focus");
                                    B.append("g").attr("class", "nv-x nv-axis"), B.append("g").attr("class", "nv-y nv-axis"), B.append("g").attr("class", "nv-linesWrap");
                                    var j = P.append("g").attr("class", "nv-context");
                                    j.append("g").attr("class", "nv-x nv-axis"), j.append("g").attr("class", "nv-y nv-axis"), j.append("g").attr("class", "nv-linesWrap"), j.append("g").attr("class", "nv-brushBackground"), j.append("g").attr("class", "nv-x nv-brush"), b && (u.width(A), H.select(".nv-legendWrap").datum(S).call(u), f.top != u.height() && (f.top = u.height(), O = (p || parseInt(k.style("height")) || 400) - f.top - f.bottom - d), H.select(".nv-legendWrap").attr("transform", "translate(0," + -f.top + ")")), D.attr("transform", "translate(" + f.left + "," + f.top + ")"), t.width(A).height(O).color(S.map(function(e, t) {
                                        return e.color || c(e, t)
                                    }).filter(function(e, t) {
                                        return !S[t].disabled
                                    })), n.defined(t.defined()).width(A).height(M).color(S.map(function(e, t) {
                                        return e.color || c(e, t)
                                    }).filter(function(e, t) {
                                        return !S[t].disabled
                                    })), H.select(".nv-context").attr("transform", "translate(0," + (O + f.bottom + l.top) + ")");
                                    var F = H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(F).call(n), r.scale(v).ticks(A / 100).tickSize(-O, 0), i.scale(m).ticks(O / 36).tickSize(-A, 0), H.select(".nv-focus .nv-x.nv-axis").attr("transform", "translate(0," + O + ")"), a.x(g).on("brush", z), w && a.extent(w);
                                    var I = H.select(".nv-brushBackground").selectAll("g").data([w || a.extent()]),
                                        q = I.enter().append("g");
                                    q.append("rect").attr("class", "left").attr("x", 0).attr("y", 0).attr("height", M), q.append("rect").attr("class", "right").attr("x", 0).attr("y", 0).attr("height", M), gBrush = H.select(".nv-x.nv-brush").call(a), gBrush.selectAll("rect").attr("height", M), gBrush.selectAll(".resize").append("path").attr("d", R), z(), s.scale(g).ticks(A / 100).tickSize(-M, 0), H.select(".nv-context .nv-x.nv-axis").attr("transform", "translate(0," + y.range()[0] + ")"), d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s), o.scale(y).ticks(M / 36).tickSize(-A, 0), d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o), H.select(".nv-context .nv-x.nv-axis").attr("transform", "translate(0," + y.range()[0] + ")"), u.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, S.filter(function(e) {
                                            return !e.disabled
                                        }).length || S.map(function(e) {
                                            return e.disabled = !1, D.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(C)
                                    }), T.on("tooltipShow", function(e) {
                                        E && N(e, L.parentNode)
                                    })
                                }), C
                            }
                            var t = e.models.line(),
                                n = e.models.line(),
                                r = e.models.axis(),
                                i = e.models.axis(),
                                s = e.models.axis(),
                                o = e.models.axis(),
                                u = e.models.legend(),
                                a = d3.svg.brush(),
                                f = {
                                    top: 30,
                                    right: 30,
                                    bottom: 30,
                                    left: 60
                                },
                                l = {
                                    top: 0,
                                    right: 30,
                                    bottom: 20,
                                    left: 60
                                },
                                c = e.utils.defaultColor(),
                                h = null,
                                p = null,
                                d = 100,
                                v, m, g, y, b = !0,
                                w = null,
                                E = !0,
                                S = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
                                },
                                x = "No Data Available.",
                                T = d3.dispatch("tooltipShow", "tooltipHide", "brush");
                            t.clipEdge(!0), n.interactive(!1), r.orient("bottom").tickPadding(5), i.orient("left"), s.orient("bottom").tickPadding(5), o.orient("left");
                            var N = function(n, s) {
                                var o = n.pos[0] + (s.offsetLeft || 0),
                                    u = n.pos[1] + (s.offsetTop || 0),
                                    a = r.tickFormat()(t.x()(n.point, n.pointIndex)),
                                    f = i.tickFormat()(t.y()(n.point, n.pointIndex)),
                                    l = S(n.series.key, a, f, n, C);
                                e.tooltip.show([o, u], l, null, null, s)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + f.left, e.pos[1] + f.top], T.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                T.tooltipHide(e)
                            }), T.on("tooltipHide", function() {
                                E && e.tooltip.cleanup()
                            }), C.dispatch = T, C.legend = u, C.lines = t, C.lines2 = n, C.xAxis = r, C.yAxis = i, C.x2Axis = s, C.y2Axis = o, d3.rebind(C, t, "defined", "isArea", "size", "xDomain", "yDomain", "forceX", "forceY", "interactive", "clipEdge", "clipVoronoi", "id"), C.x = function(e) {
                                return arguments.length ? (t.x(e), n.x(e), C) : t.x
                            }, C.y = function(e) {
                                return arguments.length ? (t.y(e), n.y(e), C) : t.y
                            }, C.margin = function(e) {
                                return arguments.length ? (f.top = typeof e.top != "undefined" ? e.top : f.top, f.right = typeof e.right != "undefined" ? e.right : f.right, f.bottom = typeof e.bottom != "undefined" ? e.bottom : f.bottom, f.left = typeof e.left != "undefined" ? e.left : f.left, C) : f
                            }, C.margin2 = function(e) {
                                return arguments.length ? (l = e, C) : l
                            }, C.width = function(e) {
                                return arguments.length ? (h = e, C) : h
                            }, C.height = function(e) {
                                return arguments.length ? (p = e, C) : p
                            }, C.color = function(t) {
                                return arguments.length ? (c = e.utils.getColor(t), u.color(c), C) : c
                            }, C.showLegend = function(e) {
                                return arguments.length ? (b = e, C) : b
                            }, C.tooltips = function(e) {
                                return arguments.length ? (E = e, C) : E
                            }, C.tooltipContent = function(e) {
                                return arguments.length ? (S = e, C) : S
                            }, C.interpolate = function(e) {
                                return arguments.length ? (t.interpolate(e), n.interpolate(e), C) : t.interpolate()
                            }, C.noData = function(e) {
                                return arguments.length ? (x = e, C) : x
                            }, C.xTickFormat = function(e) {
                                return arguments.length ? (r.tickFormat(e), s.tickFormat(e), C) : r.tickFormat()
                            }, C.yTickFormat = function(e) {
                                return arguments.length ? (i.tickFormat(e), o.tickFormat(e), C) : i.tickFormat()
                            }, C
                        }, e.models.multiBar = function() {
                            function b(e) {
                                return e.each(function(e) {
                                    var b = n - t.left - t.right,
                                        w = r - t.top - t.bottom,
                                        E = d3.select(this);
                                    c && (e = d3.layout.stack().offset("zero").values(function(e) {
                                        return e.values
                                    }).y(a)(e)), e = e.map(function(e, t) {
                                        return e.values = e.values.map(function(e) {
                                            return e.series = t, e
                                        }), e
                                    });
                                    var S = d && v ? [] : e.map(function(e) {
                                        return e.values.map(function(e, t) {
                                            return {
                                                x: u(e, t),
                                                y: a(e, t),
                                                y0: e.y0
                                            }
                                        })
                                    });
                                    i.domain(d3.merge(S).map(function(e) {
                                        return e.x
                                    })).rangeBands([0, b], .1), s.domain(v || d3.extent(d3.merge(S).map(function(e) {
                                        return e.y + (c ? e.y0 : 0)
                                    }).concat(f))).range([w, 0]);
                                    if (i.domain()[0] === i.domain()[1] || s.domain()[0] === s.domain()[1]) singlePoint = !0;
                                    i.domain()[0] === i.domain()[1] && (i.domain()[0] ? i.domain([i.domain()[0] - i.domain()[0] * .01, i.domain()[1] + i.domain()[1] * .01]) : i.domain([-1, 1])), s.domain()[0] === s.domain()[1] && (s.domain()[0] ? s.domain([s.domain()[0] + s.domain()[0] * .01, s.domain()[1] - s.domain()[1] * .01]) : s.domain([-1, 1])), g = g || i, y = y || s;
                                    var T = E.selectAll("g.nv-wrap.nv-multibar").data([e]),
                                        N = T.enter().append("g").attr("class", "nvd3 nv-wrap nv-multibar"),
                                        C = N.append("defs"),
                                        k = N.append("g"),
                                        L = T.select("g");
                                    k.append("g").attr("class", "nv-groups"), T.attr("transform", "translate(" + t.left + "," + t.top + ")"), C.append("clipPath").attr("id", "nv-edge-clip-" + o).append("rect"), T.select("#nv-edge-clip-" + o + " rect").attr("width", b).attr("height", w), L.attr("clip-path", l ? "url(#nv-edge-clip-" + o + ")" : "");
                                    var A = T.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    A.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), d3.transition(A.exit()).selectAll("rect.nv-bar").delay(function(t, n) {
                                        return n * p / e[0].values.length
                                    }).attr("y", function(e) {
                                        return c ? y(e.y0) : y(0)
                                    }).attr("height", 0).remove(), A.attr("class", function(e, t) {
                                        return "nv-group nv-series-" + t
                                    }).classed("hover", function(e) {
                                        return e.hover
                                    }).style("fill", function(e, t) {
                                        return h(e, t)
                                    }).style("stroke", function(e, t) {
                                        return h(e, t)
                                    }), d3.transition(A).style("stroke-opacity", 1).style("fill-opacity", .75);
                                    var O = A.selectAll("rect.nv-bar").data(function(e) {
                                        return e.values
                                    });
                                    O.exit().remove();
                                    var M = O.enter().append("rect").attr("class", function(e, t) {
                                        return a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive"
                                    }).attr("x", function(t, n, r) {
                                        return c ? 0 : r * i.rangeBand() / e.length
                                    }).attr("y", function(e) {
                                        return y(c ? e.y0 : 0)
                                    }).attr("height", 0).attr("width", i.rangeBand() / (c ? 1 : e.length));
                                    O.style("fill", function(e, t, n) {
                                        return h(e, n, t)
                                    }).style("stroke", function(e, t, n) {
                                        return h(e, n, t)
                                    }).on("mouseover", function(t, n) {
                                        d3.select(this).classed("hover", !0), m.elementMouseover({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [i(u(t, n)) + i.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length, s(a(t, n) + (c ? t.y0 : 0))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("mouseout", function(t, n) {
                                        d3.select(this).classed("hover", !1), m.elementMouseout({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("click", function(t, n) {
                                        m.elementClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [i(u(t, n)) + i.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length, s(a(t, n) + (c ? t.y0 : 0))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(t, n) {
                                        m.elementDblClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [i(u(t, n)) + i.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length, s(a(t, n) + (c ? t.y0 : 0))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    }), O.attr("class", function(e, t) {
                                        return a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive"
                                    }).attr("transform", function(e, t) {
                                        return "translate(" + i(u(e, t)) + ",0)"
                                    }), c ? d3.transition(O).delay(function(t, n) {
                                        return n * p / e[0].values.length
                                    }).attr("y", function(e, t) {
                                        return s(a(e, t) + (c ? e.y0 : 0))
                                    }).attr("height", function(e, t) {
                                        return Math.abs(s(e.y + (c ? e.y0 : 0)) - s(c ? e.y0 : 0))
                                    }).each("end", function() {
                                        d3.transition(d3.select(this)).attr("x", function(t, n) {
                                            return c ? 0 : t.series * i.rangeBand() / e.length
                                        }).attr("width", i.rangeBand() / (c ? 1 : e.length))
                                    }) : d3.transition(O).delay(function(t, n) {
                                        return n * p / e[0].values.length
                                    }).attr("x", function(t, n) {
                                        return t.series * i.rangeBand() / e.length
                                    }).attr("width", i.rangeBand() / e.length).each("end", function() {
                                        d3.transition(d3.select(this)).attr("y", function(e, t) {
                                            return a(e, t) < 0 ? s(0) : s(a(e, t))
                                        }).attr("height", function(e, t) {
                                            return Math.abs(s(a(e, t)) - s(0))
                                        })
                                    }), g = i.copy(), y = s.copy()
                                }), b
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = d3.scale.ordinal(),
                                s = d3.scale.linear(),
                                o = Math.floor(Math.random() * 1e4),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = [0],
                                l = !0,
                                c = !1,
                                h = e.utils.defaultColor(),
                                p = 1200,
                                d, v, m = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout"),
                                g, y;
                            return b.dispatch = m, b.x = function(e) {
                                return arguments.length ? (u = e, b) : u
                            }, b.y = function(e) {
                                return arguments.length ? (a = e, b) : a
                            }, b.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, b) : t
                            }, b.width = function(e) {
                                return arguments.length ? (n = e, b) : n
                            }, b.height = function(e) {
                                return arguments.length ? (r = e, b) : r
                            }, b.xScale = function(e) {
                                return arguments.length ? (i = e, b) : i
                            }, b.yScale = function(e) {
                                return arguments.length ? (s = e, b) : s
                            }, b.xDomain = function(e) {
                                return arguments.length ? (d = e, b) : d
                            }, b.yDomain = function(e) {
                                return arguments.length ? (v = e, b) : v
                            }, b.forceY = function(e) {
                                return arguments.length ? (f = e, b) : f
                            }, b.stacked = function(e) {
                                return arguments.length ? (c = e, b) : c
                            }, b.clipEdge = function(e) {
                                return arguments.length ? (l = e, b) : l
                            }, b.color = function(t) {
                                return arguments.length ? (h = e.utils.getColor(t), b) : h
                            }, b.id = function(e) {
                                return arguments.length ? (o = e, b) : o
                            }, b.delay = function(e) {
                                return arguments.length ? (p = e, b) : p
                            }, b
                        }, e.models.multiBarChart = function() {
                            function E(e) {
                                return e.each(function(v) {
                                    var S = d3.select(this),
                                        T = this,
                                        N = (u || parseInt(S.style("width")) || 960) - o.left - o.right,
                                        C = (a || parseInt(S.style("height")) || 400) - o.top - o.bottom;
                                    E.update = function() {
                                        e.transition().call(E)
                                    }, E.container = this;
                                    if (!v || !v.length || !v.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var k = S.selectAll(".nv-noData").data([y]);
                                        return k.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), k.attr("x", o.left + N / 2).attr("y", o.top + C / 2).text(function(e) {
                                            return e
                                        }), E
                                    }
                                    S.selectAll(".nv-noData").remove(), m = t.xScale(), g = t.yScale();
                                    var L = S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([v]),
                                        A = L.enter().append("g").attr("class", "nvd3 nv-wrap nv-multiBarWithLegend").append("g"),
                                        O = L.select("g");
                                    A.append("g").attr("class", "nv-x nv-axis"), A.append("g").attr("class", "nv-y nv-axis"), A.append("g").attr("class", "nv-barsWrap"), A.append("g").attr("class", "nv-legendWrap"), A.append("g").attr("class", "nv-controlsWrap"), c && (i.width(N / 2), O.select(".nv-legendWrap").datum(v).call(i), o.top != i.height() && (o.top = i.height(), C = (a || parseInt(S.style("height")) || 400) - o.top - o.bottom), O.select(".nv-legendWrap").attr("transform", "translate(" + N / 2 + "," + -o.top + ")"));
                                    if (l) {
                                        var M = [{
                                            key: "Grouped",
                                            disabled: t.stacked()
                                        }, {
                                            key: "Stacked",
                                            disabled: !t.stacked()
                                        }];
                                        s.width(180).color(["#444", "#444", "#444"]), O.select(".nv-controlsWrap").datum(M).attr("transform", "translate(0," + -o.top + ")").call(s)
                                    }
                                    L.attr("transform", "translate(" + o.left + "," + o.top + ")"), t.width(N).height(C).color(v.map(function(e, t) {
                                        return e.color || f(e, t)
                                    }).filter(function(e, t) {
                                        return !v[t].disabled
                                    }));
                                    var _ = O.select(".nv-barsWrap").datum(v.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(_).call(t), n.scale(m).ticks(N / 100).tickSize(-C, 0), O.select(".nv-x.nv-axis").attr("transform", "translate(0," + g.range()[0] + ")"), d3.transition(O.select(".nv-x.nv-axis")).call(n);
                                    var D = O.select(".nv-x.nv-axis > g").selectAll("g");
                                    D.selectAll("line, text").style("opacity", 1), h && D.filter(function(e, t) {
                                        return t % Math.ceil(v[0].values.length / (N / 100)) !== 0
                                    }).selectAll("text, line").style("opacity", 0), p && D.selectAll("text").attr("transform", function(e, t, n) {
                                        return "rotate(" + p + " 0,0)"
                                    }).attr("text-transform", p > 0 ? "start" : "end"), r.scale(g).ticks(C / 36).tickSize(-N, 0), d3.transition(O.select(".nv-y.nv-axis")).call(r), i.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, v.filter(function(e) {
                                            return !e.disabled
                                        }).length || v.map(function(e) {
                                            return e.disabled = !1, L.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(E)
                                    }), s.dispatch.on("legendClick", function(n, r) {
                                        if (!n.disabled) return;
                                        M = M.map(function(e) {
                                            return e.disabled = !0, e
                                        }), n.disabled = !1;
                                        switch (n.key) {
                                            case "Grouped":
                                                t.stacked(!1);
                                                break;
                                            case "Stacked":
                                                t.stacked(!0)
                                        }
                                        e.transition().call(E)
                                    }), b.on("tooltipShow", function(e) {
                                        d && w(e, T.parentNode)
                                    })
                                }), E
                            }
                            var t = e.models.multiBar(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend(),
                                s = e.models.legend(),
                                o = {
                                    top: 30,
                                    right: 20,
                                    bottom: 50,
                                    left: 60
                                },
                                u = null,
                                a = null,
                                f = e.utils.defaultColor(),
                                l = !0,
                                c = !0,
                                h = !0,
                                p = 0,
                                d = !0,
                                v = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " on " + t + "</p>"
                                },
                                m, g, y = "No Data Available.",
                                b = d3.dispatch("tooltipShow", "tooltipHide");
                            t.stacked(!1), n.orient("bottom").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e) {
                                return e
                            }), r.orient("left").tickFormat(d3.format(",.1f"));
                            var w = function(i, s) {
                                var o = i.pos[0] + (s.offsetLeft || 0),
                                    u = i.pos[1] + (s.offsetTop || 0),
                                    a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                    f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                    l = v(i.series.key, a, f, i, E);
                                e.tooltip.show([o, u], l, i.value < 0 ? "n" : "s", null, s)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + o.left, e.pos[1] + o.top], b.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                b.tooltipHide(e)
                            }), b.on("tooltipHide", function() {
                                d && e.tooltip.cleanup()
                            }), E.dispatch = b, E.multibar = t, E.legend = i, E.xAxis = n, E.yAxis = r, d3.rebind(E, t, "x", "y", "xDomain", "yDomain", "forceX", "forceY", "clipEdge", "id", "stacked", "delay"), E.margin = function(e) {
                                return arguments.length ? (o.top = typeof e.top != "undefined" ? e.top : o.top, o.right = typeof e.right != "undefined" ? e.right : o.right, o.bottom = typeof e.bottom != "undefined" ? e.bottom : o.bottom, o.left = typeof e.left != "undefined" ? e.left : o.left, E) : o
                            }, E.width = function(e) {
                                return arguments.length ? (u = e, E) : u
                            }, E.height = function(e) {
                                return arguments.length ? (a = e, E) : a
                            }, E.color = function(t) {
                                return arguments.length ? (f = e.utils.getColor(t), i.color(f), E) : f
                            }, E.showControls = function(e) {
                                return arguments.length ? (l = e, E) : l
                            }, E.showLegend = function(e) {
                                return arguments.length ? (c = e, E) : c
                            }, E.reduceXTicks = function(e) {
                                return arguments.length ? (h = e, E) : h
                            }, E.rotateLabels = function(e) {
                                return arguments.length ? (p = e, E) : p
                            }, E.tooltip = function(e) {
                                return arguments.length ? (v = e, E) : v
                            }, E.tooltips = function(e) {
                                return arguments.length ? (d = e, E) : d
                            }, E.tooltipContent = function(e) {
                                return arguments.length ? (v = e, E) : v
                            }, E.noData = function(e) {
                                return arguments.length ? (y = e, E) : y
                            }, E
                        }, e.models.multiBarHorizontal = function() {
                            function E(e) {
                                return e.each(function(e) {
                                    var i = n - t.left - t.right,
                                        v = r - t.top - t.bottom,
                                        E = d3.select(this);
                                    c && (e = d3.layout.stack().offset("zero").values(function(e) {
                                        return e.values
                                    }).y(a)(e)), e = e.map(function(e, t) {
                                        return e.values = e.values.map(function(e) {
                                            return e.series = t, e
                                        }), e
                                    });
                                    var S = m && g ? [] : e.map(function(e) {
                                        return e.values.map(function(e, t) {
                                            return {
                                                x: u(e, t),
                                                y: a(e, t),
                                                y0: e.y0
                                            }
                                        })
                                    });
                                    s.domain(m || d3.merge(S).map(function(e) {
                                        return e.x
                                    })).rangeBands([0, v], .1), o.domain(g || d3.extent(d3.merge(S).map(function(e) {
                                        return e.y + (c ? e.y0 : 0)
                                    }).concat(f))), h && !c ? o.range([o.domain()[0] < 0 ? p : 0, i - (o.domain()[1] > 0 ? p : 0)]) : o.range([0, i]), b = b || s, w = w || d3.scale.linear().domain(o.domain()).range([o(0), o(0)]);
                                    var T = d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),
                                        N = T.enter().append("g").attr("class", "nvd3 nv-wrap nv-multibarHorizontal"),
                                        C = N.append("defs"),
                                        k = N.append("g"),
                                        L = T.select("g");
                                    k.append("g").attr("class", "nv-groups"), T.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var A = T.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    A.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), d3.transition(A.exit()).style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), A.attr("class", function(e, t) {
                                        return "nv-group nv-series-" + t
                                    }).classed("hover", function(e) {
                                        return e.hover
                                    }).style("fill", function(e, t) {
                                        return l(e, t)
                                    }).style("stroke", function(e, t) {
                                        return l(e, t)
                                    }), d3.transition(A).style("stroke-opacity", 1).style("fill-opacity", .75);
                                    var O = A.selectAll("g.nv-bar").data(function(e) {
                                        return e.values
                                    });
                                    O.exit().remove();
                                    var M = O.enter().append("g").attr("transform", function(t, n, r) {
                                        return "translate(" + w(c ? t.y0 : 0) + "," + (c ? 0 : r * s.rangeBand() / e.length + s(u(t, n))) + ")"
                                    });
                                    M.append("rect").attr("width", 0).attr("height", s.rangeBand() / (c ? 1 : e.length)), O.on("mouseover", function(t, n) {
                                        d3.select(this).classed("hover", !0), y.elementMouseover({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [o(a(t, n) + (c ? t.y0 : 0)), s(u(t, n)) + s.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("mouseout", function(t, n) {
                                        d3.select(this).classed("hover", !1), y.elementMouseout({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        })
                                    }).on("click", function(t, n) {
                                        y.elementClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [s(u(t, n)) + s.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length, o(a(t, n) + (c ? t.y0 : 0))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(t, n) {
                                        y.elementDblClick({
                                            value: a(t, n),
                                            point: t,
                                            series: e[t.series],
                                            pos: [s(u(t, n)) + s.rangeBand() * (c ? e.length / 2 : t.series + .5) / e.length, o(a(t, n) + (c ? t.y0 : 0))],
                                            pointIndex: n,
                                            seriesIndex: t.series,
                                            e: d3.event
                                        }), d3.event.stopPropagation()
                                    }), h && !c ? (M.append("text").attr("text-anchor", function(e, t) {
                                        return a(e, t) < 0 ? "end" : "start"
                                    }), O.select("text").attr("y", s.rangeBand() / 2).attr("dy", "-.32em").text(function(e, t) {
                                        return d(a(e, t))
                                    }), d3.transition(O).select("text").attr("x", function(e, t) {
                                        return a(e, t) < 0 ? -4 : o(a(e, t)) - o(0) + 4
                                    })) : O.selectAll("text").remove(), O.attr("class", function(e, t) {
                                        return a(e, t) < 0 ? "nv-bar negative" : "nv-bar positive"
                                    }), c ? d3.transition(O).attr("transform", function(e, t) {
                                        return "translate(" + o(e.y0) + "," + s(u(e, t)) + ")"
                                    }).select("rect").attr("width", function(e, t) {
                                        return Math.abs(o(a(e, t) + e.y0) - o(e.y0))
                                    }).attr("height", s.rangeBand()) : d3.transition(O).attr("transform", function(t, n) {
                                        return "translate(" + (a(t, n) < 0 ? o(a(t, n)) : o(0)) + "," + (t.series * s.rangeBand() / e.length + s(u(t, n))) + ")"
                                    }).select("rect").attr("height", s.rangeBand() / e.length).attr("width", function(e, t) {
                                        return Math.abs(o(a(e, t)) - o(0))
                                    }), b = s.copy(), w = o.copy()
                                }), E
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = Math.floor(Math.random() * 1e4),
                                s = d3.scale.ordinal(),
                                o = d3.scale.linear(),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = [0],
                                l = e.utils.defaultColor(),
                                c = !1,
                                h = !1,
                                p = 60,
                                d = d3.format(",.2f"),
                                v = 1200,
                                m, g, y = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout"),
                                b, w;
                            return E.dispatch = y, E.x = function(e) {
                                return arguments.length ? (u = e, E) : u
                            }, E.y = function(e) {
                                return arguments.length ? (a = e, E) : a
                            }, E.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, E) : t
                            }, E.width = function(e) {
                                return arguments.length ? (n = e, E) : n
                            }, E.height = function(e) {
                                return arguments.length ? (r = e, E) : r
                            }, E.xScale = function(e) {
                                return arguments.length ? (s = e, E) : s
                            }, E.yScale = function(e) {
                                return arguments.length ? (o = e, E) : o
                            }, E.xDomain = function(e) {
                                return arguments.length ? (m = e, E) : m
                            }, E.yDomain = function(e) {
                                return arguments.length ? (g = e, E) : g
                            }, E.forceY = function(e) {
                                return arguments.length ? (f = e, E) : f
                            }, E.stacked = function(e) {
                                return arguments.length ? (c = e, E) : c
                            }, E.color = function(t) {
                                return arguments.length ? (l = e.utils.getColor(t), E) : l
                            }, E.id = function(e) {
                                return arguments.length ? (i = e, E) : i
                            }, E.delay = function(e) {
                                return arguments.length ? (v = e, E) : v
                            }, E.showValues = function(e) {
                                return arguments.length ? (h = e, E) : h
                            }, E.valueFormat = function(e) {
                                return arguments.length ? (d = e, E) : d
                            }, E.valuePadding = function(e) {
                                return arguments.length ? (p = e, E) : p
                            }, E
                        }, e.models.multiBarHorizontalChart = function() {
                            function w(e) {
                                return e.each(function(h) {
                                    var d = d3.select(this),
                                        E = this,
                                        S = (u || parseInt(d.style("width")) || 960) - o.left - o.right,
                                        T = (a || parseInt(d.style("height")) || 400) - o.top - o.bottom;
                                    w.update = function() {
                                        e.transition().call(w)
                                    }, w.container = this;
                                    if (!h || !h.length || !h.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var N = d.selectAll(".nv-noData").data([g]);
                                        return N.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), N.attr("x", o.left + S / 2).attr("y", o.top + T / 2).text(function(e) {
                                            return e
                                        }), w
                                    }
                                    d.selectAll(".nv-noData").remove(), v = t.xScale(), m = t.yScale();
                                    var C = d.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([h]),
                                        k = C.enter().append("g").attr("class", "nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),
                                        L = C.select("g");
                                    k.append("g").attr("class", "nv-x nv-axis"), k.append("g").attr("class", "nv-y nv-axis"), k.append("g").attr("class", "nv-barsWrap"), k.append("g").attr("class", "nv-legendWrap"), k.append("g").attr("class", "nv-controlsWrap"), c && (i.width(S / 2), L.select(".nv-legendWrap").datum(h).call(i), o.top != i.height() && (o.top = i.height(), T = (a || parseInt(d.style("height")) || 400) - o.top - o.bottom), L.select(".nv-legendWrap").attr("transform", "translate(" + S / 2 + "," + -o.top + ")"));
                                    if (l) {
                                        var A = [{
                                            key: "Grouped",
                                            disabled: t.stacked()
                                        }, {
                                            key: "Stacked",
                                            disabled: !t.stacked()
                                        }];
                                        s.width(180).color(["#444", "#444", "#444"]), L.select(".nv-controlsWrap").datum(A).attr("transform", "translate(0," + -o.top + ")").call(s)
                                    }
                                    C.attr("transform", "translate(" + o.left + "," + o.top + ")"), t.width(S).height(T).color(h.map(function(e, t) {
                                        return e.color || f(e, t)
                                    }).filter(function(e, t) {
                                        return !h[t].disabled
                                    }));
                                    var O = L.select(".nv-barsWrap").datum(h.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(O).call(t), n.scale(v).ticks(T / 24).tickSize(-S, 0), d3.transition(L.select(".nv-x.nv-axis")).call(n);
                                    var M = L.select(".nv-x.nv-axis").selectAll("g");
                                    M.selectAll("line, text").style("opacity", 1), r.scale(m).ticks(S / 100).tickSize(-T, 0), L.select(".nv-y.nv-axis").attr("transform", "translate(0," + T + ")"), d3.transition(L.select(".nv-y.nv-axis")).call(r), i.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, h.filter(function(e) {
                                            return !e.disabled
                                        }).length || h.map(function(e) {
                                            return e.disabled = !1, C.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(w)
                                    }), s.dispatch.on("legendClick", function(n, r) {
                                        if (!n.disabled) return;
                                        A = A.map(function(e) {
                                            return e.disabled = !0, e
                                        }), n.disabled = !1;
                                        switch (n.key) {
                                            case "Grouped":
                                                t.stacked(!1);
                                                break;
                                            case "Stacked":
                                                t.stacked(!0)
                                        }
                                        e.transition().call(w)
                                    }), y.on("tooltipShow", function(e) {
                                        p && b(e, E.parentNode)
                                    })
                                }), w
                            }
                            var t = e.models.multiBarHorizontal(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend().height(30),
                                s = e.models.legend().height(30),
                                o = {
                                    top: 30,
                                    right: 20,
                                    bottom: 50,
                                    left: 60
                                },
                                u = null,
                                a = null,
                                f = e.utils.defaultColor(),
                                l = !0,
                                c = !0,
                                h = !1,
                                p = !0,
                                d = function(e, t, n, r, i) {
                                    return "<h3>" + e + " - " + t + "</h3>" + "<p>" + n + "</p>"
                                },
                                v, m, g = "No Data Available.",
                                y = d3.dispatch("tooltipShow", "tooltipHide");
                            t.stacked(h), n.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e) {
                                return e
                            }), r.orient("bottom").tickFormat(d3.format(",.1f"));
                            var b = function(i, s) {
                                var o = i.pos[0] + (s.offsetLeft || 0),
                                    u = i.pos[1] + (s.offsetTop || 0),
                                    a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                    f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                    l = d(i.series.key, a, f, i, w);
                                e.tooltip.show([o, u], l, i.value < 0 ? "e" : "w", null, s)
                            };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + o.left, e.pos[1] + o.top], y.tooltipShow(e)
                            }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                y.tooltipHide(e)
                            }), y.on("tooltipHide", function() {
                                p && e.tooltip.cleanup()
                            }), w.dispatch = y, w.multibar = t, w.legend = i, w.xAxis = n, w.yAxis = r, d3.rebind(w, t, "x", "y", "xDomain", "yDomain", "forceX", "forceY", "clipEdge", "id", "delay", "showValues", "valueFormat", "stacked"), w.margin = function(e) {
                                return arguments.length ? (o.top = typeof e.top != "undefined" ? e.top : o.top, o.right = typeof e.right != "undefined" ? e.right : o.right, o.bottom = typeof e.bottom != "undefined" ? e.bottom : o.bottom, o.left = typeof e.left != "undefined" ? e.left : o.left, w) : o
                            }, w.width = function(e) {
                                return arguments.length ? (u = e, w) : u
                            }, w.height = function(e) {
                                return arguments.length ? (a = e, w) : a
                            }, w.color = function(t) {
                                return arguments.length ? (f = e.utils.getColor(t), i.color(f), w) : f
                            }, w.showControls = function(e) {
                                return arguments.length ? (l = e, w) : l
                            }, w.showLegend = function(e) {
                                return arguments.length ? (c = e, w) : c
                            }, w.tooltip = function(e) {
                                return arguments.length ? (d = e, w) : d
                            }, w.tooltips = function(e) {
                                return arguments.length ? (p = e, w) : p
                            }, w.tooltipContent = function(e) {
                                return arguments.length ? (d = e, w) : d
                            }, w.noData = function(e) {
                                return arguments.length ? (g = e, w) : g
                            }, w
                        }, e.models.multiChart = function() {
                            function T(e) {
                                return e.each(function(u) {
                                    var f = d3.select(this),
                                        N = this,
                                        C = (r || parseInt(f.style("width")) || 960) - t.left - t.right,
                                        k = (i || parseInt(f.style("height")) || 400) - t.top - t.bottom,
                                        L = u.filter(function(e) {
                                            return !e.disabled && e.type == "line" && e.yAxis == 1
                                        }),
                                        A = u.filter(function(e) {
                                            return !e.disabled && e.type == "line" && e.yAxis == 2
                                        }),
                                        O = u.filter(function(e) {
                                            return !e.disabled && e.type == "bar" && e.yAxis == 1
                                        }),
                                        M = u.filter(function(e) {
                                            return !e.disabled && e.type == "bar" && e.yAxis == 2
                                        }),
                                        _ = u.filter(function(e) {
                                            return !e.disabled && e.type == "area" && e.yAxis == 1
                                        }),
                                        D = u.filter(function(e) {
                                            return !e.disabled && e.type == "area" && e.yAxis == 2
                                        }),
                                        P = u.filter(function(e) {
                                            return !e.disabled && e.yAxis == 1
                                        }).map(function(e) {
                                            return e.values.map(function(e, t) {
                                                return {
                                                    x: e.x,
                                                    y: e.y
                                                }
                                            })
                                        }),
                                        H = u.filter(function(e) {
                                            return !e.disabled && e.yAxis == 2
                                        }).map(function(e) {
                                            return e.values.map(function(e, t) {
                                                return {
                                                    x: e.x,
                                                    y: e.y
                                                }
                                            })
                                        });
                                    a.domain(d3.extent(d3.merge(P.concat(H)), function(e) {
                                        return e.x
                                    })).range([0, C]);
                                    var B = f.selectAll("g.wrap.multiChart").data([u]),
                                        j = B.enter().append("g").attr("class", "wrap nvd3 multiChart").append("g");
                                    j.append("g").attr("class", "x axis"), j.append("g").attr("class", "y1 axis"), j.append("g").attr("class", "y2 axis"), j.append("g").attr("class", "lines1Wrap"), j.append("g").attr("class", "lines2Wrap"), j.append("g").attr("class", "bars1Wrap"), j.append("g").attr("class", "bars2Wrap"), j.append("g").attr("class", "stack1Wrap"), j.append("g").attr("class", "stack2Wrap"), j.append("g").attr("class", "legendWrap");
                                    var F = B.select("g");
                                    s && (E.width(C / 2), F.select(".legendWrap").datum(u.map(function(e) {
                                        return e.originalKey = e.originalKey === undefined ? e.key : e.originalKey, e.key = e.originalKey + (e.yAxis == 1 ? "" : " (right axis)"), e
                                    })).call(E), t.top != E.height() && (t.top = E.height(), k = (i || parseInt(f.style("height")) || 400) - t.top - t.bottom), F.select(".legendWrap").attr("transform", "translate(" + C / 2 + "," + -t.top + ")")), h.width(C).height(k).interpolate("monotone").color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 1 && u[t].type == "line"
                                    })), p.width(C).height(k).interpolate("monotone").color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 2 && u[t].type == "line"
                                    })), d.width(C).height(k).color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 1 && u[t].type == "bar"
                                    })), v.width(C).height(k).color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 2 && u[t].type == "bar"
                                    })), m.width(C).height(k).color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 1 && u[t].type == "area"
                                    })), g.width(C).height(k).color(u.map(function(e, t) {
                                        return e.color || n[t % n.length]
                                    }).filter(function(e, t) {
                                        return !u[t].disabled && u[t].yAxis == 2 && u[t].type == "area"
                                    })), F.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var I = F.select(".lines1Wrap").datum(L),
                                        q = F.select(".bars1Wrap").datum(O),
                                        R = F.select(".stack1Wrap").datum(_),
                                        U = F.select(".lines2Wrap").datum(A),
                                        z = F.select(".bars2Wrap").datum(M),
                                        W = F.select(".stack2Wrap").datum(D),
                                        X = _.length ? _.map(function(e) {
                                            return e.values
                                        }).reduce(function(e, t) {
                                            return e.map(function(e, n) {
                                                return {
                                                    x: e.x,
                                                    y: e.y + t[n].y
                                                }
                                            })
                                        }).concat([{
                                            x: 0,
                                            y: 0
                                        }]) : [],
                                        V = D.length ? D.map(function(e) {
                                            return e.values
                                        }).reduce(function(e, t) {
                                            return e.map(function(e, n) {
                                                return {
                                                    x: e.x,
                                                    y: e.y + t[n].y
                                                }
                                            })
                                        }).concat([{
                                            x: 0,
                                            y: 0
                                        }]) : [];
                                    l.domain(d3.extent(d3.merge(P).concat(X), function(e) {
                                        return e.y
                                    })).range([0, k]), c.domain(d3.extent(d3.merge(H).concat(V), function(e) {
                                        return e.y
                                    })).range([0, k]), h.yDomain(l.domain()), d.yDomain(l.domain()), m.yDomain(l.domain()), p.yDomain(c.domain()), v.yDomain(c.domain()), g.yDomain(c.domain()), _.length && d3.transition(R).call(m), D.length && d3.transition(W).call(g), O.length && d3.transition(q).call(d), M.length && d3.transition(z).call(v), L.length && d3.transition(I).call(h), A.length && d3.transition(U).call(p), y.ticks(C / 100).tickSize(-k, 0), F.select(".x.axis").attr("transform", "translate(0," + k + ")"), d3.transition(F.select(".x.axis")).call(y), b.ticks(k / 36).tickSize(-C, 0), d3.transition(F.select(".y1.axis")).call(b), w.ticks(k / 36).tickSize(-C, 0), d3.transition(F.select(".y2.axis")).call(w), F.select(".y2.axis").style("opacity", H.length ? 1 : 0).attr("transform", "translate(" + a.range()[1] + ",0)"), E.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, u.filter(function(e) {
                                            return !e.disabled
                                        }).length || u.map(function(e) {
                                            return e.disabled = !1, B.selectAll(".series").classed("disabled", !1), e
                                        }), e.transition().call(T)
                                    }), S.on("tooltipShow", function(e) {
                                        o && x(e, N.parentNode)
                                    })
                                }), T.update = function() {
                                    T(e)
                                }, T.container = this, T
                            }
                            var t = {
                                    top: 30,
                                    right: 20,
                                    bottom: 50,
                                    left: 60
                                },
                                n = d3.scale.category20().range(),
                                r = null,
                                i = null,
                                s = !0,
                                o = !0,
                                u = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " at " + t + "</p>"
                                },
                                a, f, a = d3.scale.linear(),
                                l = d3.scale.linear(),
                                c = d3.scale.linear(),
                                h = e.models.line().yScale(l),
                                p = e.models.line().yScale(c),
                                d = e.models.multiBar().stacked(!1).yScale(l),
                                v = e.models.multiBar().stacked(!1).yScale(c),
                                m = e.models.stackedArea().yScale(l),
                                g = e.models.stackedArea().yScale(c),
                                y = e.models.axis().scale(a).orient("bottom").tickPadding(5),
                                b = e.models.axis().scale(l).orient("left"),
                                w = e.models.axis().scale(c).orient("right"),
                                E = e.models.legend().height(30),
                                S = d3.dispatch("tooltipShow", "tooltipHide"),
                                x = function(t, n) {
                                    var r = t.pos[0] + (n.offsetLeft || 0),
                                        i = t.pos[1] + (n.offsetTop || 0),
                                        s = y.tickFormat()(h.x()(t.point, t.pointIndex)),
                                        o = (t.series.bar ? b : w).tickFormat()(h.y()(t.point, t.pointIndex)),
                                        a = u(t.series.key, s, o, t, T);
                                    e.tooltip.show([r, i], a, undefined, undefined, n.offsetParent)
                                };
                            return h.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), h.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), p.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), p.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), d.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), d.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), v.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), v.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), m.dispatch.on("tooltipShow", function(e) {
                                if (!Math.round(m.y()(e.point) * 100)) return setTimeout(function() {
                                    d3.selectAll(".point.hover").classed("hover", !1)
                                }, 0), !1;
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), m.dispatch.on("tooltipHide", function(e) {
                                S.tooltipHide(e)
                            }), g.dispatch.on("tooltipShow", function(e) {
                                if (!Math.round(g.y()(e.point) * 100)) return setTimeout(function() {
                                    d3.selectAll(".point.hover").classed("hover", !1)
                                }, 0), !1;
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), g.dispatch.on("tooltipHide", function(e) {
                                S.tooltipHide(e)
                            }), h.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), h.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), p.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], S.tooltipShow(e)
                            }), p.dispatch.on("elementMouseout.tooltip", function(e) {
                                S.tooltipHide(e)
                            }), S.on("tooltipHide", function() {
                                o && e.tooltip.cleanup()
                            }), T.dispatch = S, T.lines1 = h, T.lines2 = p, T.bars1 = d, T.bars2 = v, T.stack1 = m, T.stack2 = g, T.xAxis = y, T.yAxis1 = b, T.yAxis2 = w, T.x = function(e) {
                                return arguments.length ? (getX = e, h.x(e), d.x(e), T) : getX
                            }, T.y = function(e) {
                                return arguments.length ? (getY = e, h.y(e), d.y(e), T) : getY
                            }, T.margin = function(e) {
                                return arguments.length ? (t = e, T) : t
                            }, T.width = function(e) {
                                return arguments.length ? (r = e, T) : r
                            }, T.height = function(e) {
                                return arguments.length ? (i = e, T) : i
                            }, T.color = function(e) {
                                return arguments.length ? (n = e, E.color(e), T) : n
                            }, T.showLegend = function(e) {
                                return arguments.length ? (s = e, T) : s
                            }, T.tooltips = function(e) {
                                return arguments.length ? (o = e, T) : o
                            }, T.tooltipContent = function(e) {
                                return arguments.length ? (u = e, T) : u
                            }, T
                        }, e.models.ohlcBar = function() {
                            function w(e) {
                                return e.each(function(e) {
                                    var m = n - t.left - t.right,
                                        w = r - t.top - t.bottom,
                                        E = d3.select(this);
                                    s.domain(g || d3.extent(e[0].values.map(u).concat(p))).range([0, m]), o.domain(y || [d3.min(e[0].values.map(h).concat(d)), d3.max(e[0].values.map(c).concat(d))]).range([w, 0]);
                                    if (s.domain()[0] === s.domain()[1] || o.domain()[0] === o.domain()[1]) singlePoint = !0;
                                    s.domain()[0] === s.domain()[1] && (s.domain()[0] ? s.domain([s.domain()[0] - s.domain()[0] * .01, s.domain()[1] + s.domain()[1] * .01]) : s.domain([-1, 1])), o.domain()[0] === o.domain()[1] && (o.domain()[0] ? o.domain([o.domain()[0] + o.domain()[0] * .01, o.domain()[1] - o.domain()[1] * .01]) : o.domain([-1, 1]));
                                    var S = d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),
                                        T = S.enter().append("g").attr("class", "nvd3 nv-wrap nv-ohlcBar"),
                                        N = T.append("defs"),
                                        C = T.append("g"),
                                        k = S.select("g");
                                    C.append("g").attr("class", "nv-ticks"), S.attr("transform", "translate(" + t.left + "," + t.top + ")"), E.on("click", function(e, t) {
                                        b.chartClick({
                                            data: e,
                                            index: t,
                                            pos: d3.event,
                                            id: i
                                        })
                                    }), N.append("clipPath").attr("id", "nv-chart-clip-path-" + i).append("rect"), S.select("#nv-chart-clip-path-" + i + " rect").attr("width", m).attr("height", w), k.attr("clip-path", v ? "url(#nv-chart-clip-path-" + i + ")" : "");
                                    var L = S.select(".nv-ticks").selectAll(".nv-tick").data(function(e) {
                                        return e
                                    });
                                    L.exit().remove();
                                    var A = L.enter().append("path").attr("class", function(e, t, n) {
                                        return (f(e, t) > l(e, t) ? "nv-tick negative" : "nv-tick positive") + " nv-tick-" + n + "-" + t
                                    }).attr("d", function(t, n) {
                                        var r = m / e[0].values.length * .9;
                                        return "m0,0l0," + (o(f(t, n)) - o(c(t, n))) + "l" + -r / 2 + ",0l" + r / 2 + ",0l0," + (o(h(t, n)) - o(f(t, n))) + "l0," + (o(l(t, n)) - o(h(t, n))) + "l" + r / 2 + ",0l" + -r / 2 + ",0z"
                                    }).attr("transform", function(e, t) {
                                        return "translate(" + s(u(e, t)) + "," + o(c(e, t)) + ")"
                                    }).on("mouseover", function(t, n) {
                                        d3.select(this).classed("hover", !0), b.elementMouseover({
                                            point: t,
                                            series: e[0],
                                            pos: [s(u(t, n)), o(a(t, n))],
                                            pointIndex: n,
                                            seriesIndex: 0,
                                            e: d3.event
                                        })
                                    }).on("mouseout", function(t, n) {
                                        d3.select(this).classed("hover", !1), b.elementMouseout({
                                            point: t,
                                            series: e[0],
                                            pointIndex: n,
                                            seriesIndex: 0,
                                            e: d3.event
                                        })
                                    }).on("click", function(e, t) {
                                        b.elementClick({
                                            value: a(e, t),
                                            data: e,
                                            index: t,
                                            pos: [s(u(e, t)), o(a(e, t))],
                                            e: d3.event,
                                            id: i
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(e, t) {
                                        b.elementDblClick({
                                            value: a(e, t),
                                            data: e,
                                            index: t,
                                            pos: [s(u(e, t)), o(a(e, t))],
                                            e: d3.event,
                                            id: i
                                        }), d3.event.stopPropagation()
                                    });
                                    L.attr("class", function(e, t, n) {
                                        return (f(e, t) > l(e, t) ? "nv-tick negative" : "nv-tick positive") + " nv-tick-" + n + "-" + t
                                    }), d3.transition(L).attr("transform", function(e, t) {
                                        return "translate(" + s(u(e, t)) + "," + o(c(e, t)) + ")"
                                    }).attr("d", function(t, n) {
                                        var r = m / e[0].values.length * .9;
                                        return "m0,0l0," + (o(f(t, n)) - o(c(t, n))) + "l" + -r / 2 + ",0l" + r / 2 + ",0l0," + (o(h(t, n)) - o(f(t, n))) + "l0," + (o(l(t, n)) - o(h(t, n))) + "l" + r / 2 + ",0l" + -r / 2 + ",0z"
                                    })
                                }), w
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = Math.floor(Math.random() * 1e4),
                                s = d3.scale.linear(),
                                o = d3.scale.linear(),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = function(e) {
                                    return e.open
                                },
                                l = function(e) {
                                    return e.close
                                },
                                c = function(e) {
                                    return e.high
                                },
                                h = function(e) {
                                    return e.low
                                },
                                p = [],
                                d = [],
                                v = !0,
                                m = e.utils.defaultColor(),
                                g, y, b = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout");
                            return w.dispatch = b, w.x = function(e) {
                                return arguments.length ? (u = e, w) : u
                            }, w.y = function(e) {
                                return arguments.length ? (a = e, w) : a
                            }, w.open = function(e) {
                                return arguments.length ? (f = e, w) : f
                            }, w.close = function(e) {
                                return arguments.length ? (l = e, w) : l
                            }, w.high = function(e) {
                                return arguments.length ? (c = e, w) : c
                            }, w.low = function(e) {
                                return arguments.length ? (h = e, w) : h
                            }, w.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, w) : t
                            }, w.width = function(e) {
                                return arguments.length ? (n = e, w) : n
                            }, w.height = function(e) {
                                return arguments.length ? (r = e, w) : r
                            }, w.xScale = function(e) {
                                return arguments.length ? (s = e, w) : s
                            }, w.yScale = function(e) {
                                return arguments.length ? (o = e, w) : o
                            }, w.xDomain = function(e) {
                                return arguments.length ? (g = e, w) : g
                            }, w.yDomain = function(e) {
                                return arguments.length ? (y = e, w) : y
                            }, w.forceX = function(e) {
                                return arguments.length ? (p = e, w) : p
                            }, w.forceY = function(e) {
                                return arguments.length ? (d = e, w) : d
                            }, w.clipEdge = function(e) {
                                return arguments.length ? (v = e, w) : v
                            }, w.color = function(t) {
                                return arguments.length ? (m = e.utils.getColor(t), w) : m
                            }, w.id = function(e) {
                                return arguments.length ? (i = e, w) : i
                            }, w
                        }, e.models.pie = function() {
                            function v(e) {
                                return e.each(function(e) {
                                    function L(e) {
                                        var t = (e.startAngle + e.endAngle) * 90 / Math.PI - 90;
                                        return t > 90 ? t - 180 : t
                                    }

                                    function A(e) {
                                        p || (e.innerRadius = 0);
                                        var t = d3.interpolate(this._current, e);
                                        return this._current = t(0),
                                            function(e) {
                                                return S(t(e))
                                            }
                                    }

                                    function O(e) {
                                        e.innerRadius = 0;
                                        var t = d3.interpolate({
                                            startAngle: 0,
                                            endAngle: 0
                                        }, e);
                                        return function(e) {
                                            return S(t(e))
                                        }
                                    }
                                    var f = n - t.left - t.right,
                                        v = r - t.top - t.bottom,
                                        m = Math.min(f, v) / 2,
                                        g = d3.select(this),
                                        y = g.selectAll(".nv-wrap.nv-pie").data([i(e[0])]),
                                        b = y.enter().append("g").attr("class", "nvd3 nv-wrap nv-pie nv-chart-" + u),
                                        w = b.append("g"),
                                        E = y.select("g");
                                    w.append("g").attr("class", "nv-pie"), y.attr("transform", "translate(" + t.left + "," + t.top + ")"), E.select(".nv-pie").attr("transform", "translate(" + f / 2 + "," + v / 2 + ")"), g.on("click", function(e, t) {
                                        d.chartClick({
                                            data: e,
                                            index: t,
                                            pos: d3.event,
                                            id: u
                                        })
                                    });
                                    var S = d3.svg.arc().outerRadius(m - m / 5);
                                    p && S.innerRadius(m / 2);
                                    var x = d3.layout.pie().sort(null).value(function(e) {
                                            return e.disabled ? 0 : o(e)
                                        }),
                                        T = y.select(".nv-pie").selectAll(".nv-slice").data(x);
                                    T.exit().remove();
                                    var N = T.enter().append("g").attr("class", "nv-slice").on("mouseover", function(e, t) {
                                        d3.select(this).classed("hover", !0), d.elementMouseover({
                                            label: s(e.data),
                                            value: o(e.data),
                                            point: e.data,
                                            pointIndex: t,
                                            pos: [d3.event.pageX, d3.event.pageY],
                                            id: u
                                        })
                                    }).on("mouseout", function(e, t) {
                                        d3.select(this).classed("hover", !1), d.elementMouseout({
                                            label: s(e.data),
                                            value: o(e.data),
                                            point: e.data,
                                            index: t,
                                            id: u
                                        })
                                    }).on("click", function(e, t) {
                                        d.elementClick({
                                            label: s(e.data),
                                            value: o(e.data),
                                            point: e.data,
                                            index: t,
                                            pos: d3.event,
                                            id: u
                                        }), d3.event.stopPropagation()
                                    }).on("dblclick", function(e, t) {
                                        d.elementDblClick({
                                            label: s(e.data),
                                            value: o(e.data),
                                            point: e.data,
                                            index: t,
                                            pos: d3.event,
                                            id: u
                                        }), d3.event.stopPropagation()
                                    });
                                    T.attr("fill", function(e, t) {
                                        return a(e, t)
                                    }).attr("stroke", function(e, t) {
                                        return a(e, t)
                                    });
                                    var C = N.append("path").each(function(e) {
                                        this._current = e
                                    });
                                    d3.transition(T.select("path")).attr("d", S).attrTween("d", A);
                                    if (l) {
                                        var k = S;
                                        c && (k = d3.svg.arc().outerRadius(S.outerRadius())), N.append("g").classed("nv-label", !0).each(function(e, t) {
                                            var n = d3.select(this);
                                            n.attr("transform", function(e) {
                                                return e.outerRadius = m + 10, e.innerRadius = m + 15, "translate(" + k.centroid(e) + ")"
                                            }), n.append("rect").style("stroke", "#fff").style("fill", "#fff").attr("rx", 3).attr("ry", 3), n.append("text").style("text-anchor", "middle").style("fill", "#000")
                                        }), T.select(".nv-label").transition().attr("transform", function(e) {
                                            return e.outerRadius = m + 10, e.innerRadius = m + 15, "translate(" + k.centroid(e) + ")"
                                        }), T.each(function(e, t) {
                                            var n = d3.select(this);
                                            n.select(".nv-label text").text(function(e, t) {
                                                var n = (e.endAngle - e.startAngle) / (2 * Math.PI);
                                                return e.value && n > h ? s(e.data) : ""
                                            });
                                            var r = n.select("text").node().getBBox();
                                            n.select(".nv-label rect").attr("width", r.width + 10).attr("height", r.height + 10).attr("transform", function() {
                                                return "translate(" + [r.x - 5, r.y - 5] + ")"
                                            })
                                        })
                                    }
                                }), v
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 500,
                                r = 500,
                                i = function(e) {
                                    return e.values
                                },
                                s = function(e) {
                                    return e.x
                                },
                                o = function(e) {
                                    return e.y
                                },
                                u = Math.floor(Math.random() * 1e4),
                                a = e.utils.defaultColor(),
                                f = d3.format(",.2f"),
                                l = !0,
                                c = !1,
                                h = .02,
                                p = !1,
                                d = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout");
                            return v.dispatch = d, v.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, v) : t
                            }, v.width = function(e) {
                                return arguments.length ? (n = e, v) : n
                            }, v.height = function(e) {
                                return arguments.length ? (r = e, v) : r
                            }, v.values = function(e) {
                                return arguments.length ? (i = e, v) : i
                            }, v.x = function(e) {
                                return arguments.length ? (s = e, v) : s
                            }, v.y = function(e) {
                                return arguments.length ? (o = d3.functor(e), v) : o
                            }, v.showLabels = function(e) {
                                return arguments.length ? (l = e, v) : l
                            }, v.donutLabelsOutside = function(e) {
                                return arguments.length ? (c = e, v) : c
                            }, v.donut = function(e) {
                                return arguments.length ? (p = e, v) : p
                            }, v.id = function(e) {
                                return arguments.length ? (u = e, v) : u
                            }, v.color = function(t) {
                                return arguments.length ? (a = e.utils.getColor(t), v) : a
                            }, v.valueFormat = function(e) {
                                return arguments.length ? (f = e, v) : f
                            }, v.labelThreshold = function(e) {
                                return arguments.length ? (h = e, v) : h
                            }, v
                        }, e.models.pieChart = function() {
                            function p(e) {
                                return e.each(function(u) {
                                    var a = d3.select(this),
                                        f = this,
                                        h = (i || parseInt(a.style("width")) || 960) - r.left - r.right,
                                        d = (s || parseInt(a.style("height")) || 400) - r.top - r.bottom;
                                    p.update = function() {
                                        p(e)
                                    }, p.container = this;
                                    if (!u || !u.length) {
                                        var v = a.selectAll(".nv-noData").data([l]);
                                        return v.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), v.attr("x", r.left + h / 2).attr("y", r.top + d / 2).text(function(e) {
                                            return e
                                        }), p
                                    }
                                    a.selectAll(".nv-noData").remove();
                                    var m = a.selectAll("g.nv-wrap.nv-pieChart").data([u]),
                                        g = m.enter().append("g").attr("class", "nvd3 nv-wrap nv-pieChart").append("g"),
                                        y = m.select("g");
                                    g.append("g").attr("class", "nv-pieWrap"), g.append("g").attr("class", "nv-legendWrap"), o && (n.width(h).key(t.x()), m.select(".nv-legendWrap").datum(t.values()(u[0])).call(n), r.top != n.height() && (r.top = n.height(), d = (s || parseInt(a.style("height")) || 400) - r.top - r.bottom), m.select(".nv-legendWrap").attr("transform", "translate(0," + -r.top + ")")), m.attr("transform", "translate(" + r.left + "," + r.top + ")"), t.width(h).height(d);
                                    var b = y.select(".nv-pieWrap").datum(u);
                                    d3.transition(b).call(t), n.dispatch.on("legendClick", function(n, r, i) {
                                        n.disabled = !n.disabled, t.values()(u[0]).filter(function(e) {
                                            return !e.disabled
                                        }).length || t.values()(u[0]).map(function(e) {
                                            return e.disabled = !1, m.selectAll(".nv-series").classed("disabled", !1), e
                                        }), e.transition().call(p)
                                    }), t.dispatch.on("elementMouseout.tooltip", function(e) {
                                        c.tooltipHide(e)
                                    })
                                }), p
                            }
                            var t = e.models.pie(),
                                n = e.models.legend(),
                                r = {
                                    top: 30,
                                    right: 20,
                                    bottom: 20,
                                    left: 20
                                },
                                i = null,
                                s = null,
                                o = !0,
                                u = e.utils.defaultColor(),
                                a = !0,
                                f = function(e, t, n, r) {
                                    return "<h3>" + e + "</h3>" + "<p>" + t + "</p>"
                                },
                                l = "No Data Available.",
                                c = d3.dispatch("tooltipShow", "tooltipHide"),
                                h = function(n, r) {
                                    var i = n.pos[0] + (r && r.offsetLeft || 0),
                                        s = n.pos[1] + (r && r.offsetTop || 0),
                                        o = t.valueFormat()(t.y()(n.point)),
                                        u = f(t.x()(n.point), o, n, p);
                                    e.tooltip.show([i, s], u, n.value < 0 ? "n" : "s", null, r)
                                };
                            return t.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + r.left, e.pos[1] + r.top], c.tooltipShow(e)
                            }), c.on("tooltipShow", function(e) {
                                a && h(e)
                            }), c.on("tooltipHide", function() {
                                a && e.tooltip.cleanup()
                            }), p.dispatch = c, p.pie = t, d3.rebind(p, t, "valueFormat", "values", "x", "y", "id", "showLabels", "donutLabelsOutside", "donut", "labelThreshold"), p.margin = function(e) {
                                return arguments.length ? (r.top = typeof e.top != "undefined" ? e.top : r.top, r.right = typeof e.right != "undefined" ? e.right : r.right, r.bottom = typeof e.bottom != "undefined" ? e.bottom : r.bottom, r.left = typeof e.left != "undefined" ? e.left : r.left, p) : r
                            }, p.width = function(e) {
                                return arguments.length ? (i = e, p) : i
                            }, p.height = function(e) {
                                return arguments.length ? (s = e, p) : s
                            }, p.color = function(r) {
                                return arguments.length ? (u = e.utils.getColor(r), n.color(u), t.color(u), p) : u
                            }, p.showLegend = function(e) {
                                return arguments.length ? (o = e, p) : o
                            }, p.tooltips = function(e) {
                                return arguments.length ? (a = e, p) : a
                            }, p.tooltipContent = function(e) {
                                return arguments.length ? (f = e, p) : f
                            }, p.noData = function(e) {
                                return arguments.length ? (l = e, p) : l
                            }, p
                        }, e.models.scatter = function() {
                            function _(e) {
                                return e.each(function(e) {
                                    function R() {
                                        if (!m) return !1;
                                        var n, r = d3.merge(e.map(function(e, t) {
                                            return e.values.filter(g).map(function(e, n) {
                                                return [o(f(e, n)) * (Math.random() / 1e12 + 1), u(l(e, n)) * (Math.random() / 1e12 + 1), t, n]
                                            })
                                        }));
                                        if (b) {
                                            F.append("clipPath").attr("id", "nv-points-clip-" + s);
                                            var i = B.select("#nv-points-clip-" + s).selectAll("circle").data(r);
                                            i.enter().append("circle").attr("r", w), i.exit().remove(), i.attr("cx", function(e) {
                                                return e[0]
                                            }).attr("cy", function(e) {
                                                return e[1]
                                            }), B.select(".nv-point-paths").attr("clip-path", "url(#nv-points-clip-" + s + ")")
                                        }
                                        if (k === !0) {
                                            var a = d3.geom.voronoi(r).map(function(e, t) {
                                                    return {
                                                        data: e,
                                                        series: r[t][2],
                                                        point: r[t][3]
                                                    }
                                                }),
                                                c = B.select(".nv-point-paths").selectAll("path").data(a);
                                            c.enter().append("path").attr("class", function(e, t) {
                                                return "nv-path-" + t
                                            }), c.exit().remove(), c.attr("d", function(e) {
                                                return "M" + e.data.join(",") + "Z"
                                            }), n = c
                                        } else {
                                            var h = r.map(function(e, t) {
                                                return {
                                                    data: e,
                                                    series: r[t][2],
                                                    point: r[t][3]
                                                }
                                            });
                                            n = B.select(".nv-groups").selectAll(".nv-group").selectAll("path.nv-point").data(h).style("pointer-events", "auto")
                                        }
                                        n.on("click", function(n) {
                                            var r = e[n.series],
                                                i = r.values[n.point];
                                            C.elementClick({
                                                point: i,
                                                series: r,
                                                pos: [o(f(i, n.point)) + t.left, u(l(i, n.point)) + t.top],
                                                seriesIndex: n.series,
                                                pointIndex: n.point
                                            })
                                        }).on("mouseover", function(n) {
                                            var r = e[n.series],
                                                i = r.values[n.point];
                                            C.elementMouseover({
                                                point: i,
                                                series: r,
                                                pos: [o(f(i, n.point)) + t.left, u(l(i, n.point)) + t.top],
                                                seriesIndex: n.series,
                                                pointIndex: n.point
                                            })
                                        }).on("mouseout", function(t, n) {
                                            var r = e[t.series],
                                                i = r.values[t.point];
                                            C.elementMouseout({
                                                point: i,
                                                series: r,
                                                seriesIndex: t.series,
                                                pointIndex: t.point
                                            })
                                        })
                                    }
                                    var _ = n - t.left - t.right,
                                        D = r - t.top - t.bottom,
                                        P = d3.select(this);
                                    e = e.map(function(e, t) {
                                        return e.values = e.values.map(function(e) {
                                            return e.series = t, e
                                        }), e
                                    });
                                    var H = E && S && x ? [] : d3.merge(e.map(function(e) {
                                        return e.values.map(function(e, t) {
                                            return {
                                                x: f(e, t),
                                                y: l(e, t),
                                                size: c(e, t)
                                            }
                                        })
                                    }));
                                    o.domain(E || d3.extent(H.map(function(e) {
                                        return e.x
                                    }).concat(p))).range([0, _]), u.domain(S || d3.extent(H.map(function(e) {
                                        return e.y
                                    }).concat(d))).range([D, 0]), a.domain(x || d3.extent(H.map(function(e) {
                                        return e.size
                                    }).concat(v))).range(T || [16, 256]);
                                    if (o.domain()[0] === o.domain()[1] || u.domain()[0] === u.domain()[1]) N = !0;
                                    o.domain()[0] === o.domain()[1] && (o.domain()[0] ? o.domain([o.domain()[0] - o.domain()[0] * .01, o.domain()[1] + o.domain()[1] * .01]) : o.domain([-1, 1])), u.domain()[0] === u.domain()[1] && (u.domain()[0] ? u.domain([u.domain()[0] + u.domain()[0] * .01, u.domain()[1] - u.domain()[1] * .01]) : u.domain([-1, 1])), L = L || o, A = A || u, O = O || a;
                                    var B = P.selectAll("g.nv-wrap.nv-scatter").data([e]),
                                        j = B.enter().append("g").attr("class", "nvd3 nv-wrap nv-scatter nv-chart-" + s + (N ? " nv-single-point" : "")),
                                        F = j.append("defs"),
                                        I = j.append("g"),
                                        q = B.select("g");
                                    I.append("g").attr("class", "nv-groups"), I.append("g").attr("class", "nv-point-paths"), B.attr("transform", "translate(" + t.left + "," + t.top + ")"), F.append("clipPath").attr("id", "nv-edge-clip-" + s).append("rect"), B.select("#nv-edge-clip-" + s + " rect").attr("width", _).attr("height", D), q.attr("clip-path", y ? "url(#nv-edge-clip-" + s + ")" : "");
                                    var U = B.select(".nv-groups").selectAll(".nv-group").data(function(e) {
                                        return e
                                    }, function(e) {
                                        return e.key
                                    });
                                    U.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), d3.transition(U.exit()).style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), U.attr("class", function(e, t) {
                                        return "nv-group nv-series-" + t
                                    }).classed("hover", function(e) {
                                        return e.hover
                                    }), d3.transition(U).style("fill", function(e, t) {
                                        return i(e, t)
                                    }).style("stroke", function(e, t) {
                                        return i(e, t)
                                    }).style("stroke-opacity", 1).style("fill-opacity", .5);
                                    var W = U.selectAll("path.nv-point").data(function(e) {
                                        return e.values
                                    });
                                    W.enter().append("path").attr("transform", function(e, t) {
                                        return "translate(" + L(f(e, t)) + "," + A(l(e, t)) + ")"
                                    }).attr("d", d3.svg.symbol().type(h).size(function(e, t) {
                                        return a(c(e, t))
                                    })), W.exit().remove(), d3.transition(U.exit().selectAll("path.nv-point")).attr("transform", function(e, t) {
                                        return "translate(" + o(f(e, t)) + "," + u(l(e, t)) + ")"
                                    }).remove(), W.attr("class", function(e, t) {
                                        return "nv-point nv-point-" + t
                                    }), d3.transition(W).attr("transform", function(e, t) {
                                        return "translate(" + o(f(e, t)) + "," + u(l(e, t)) + ")"
                                    }).attr("d", d3.svg.symbol().type(h).size(function(e, t) {
                                        return a(c(e, t))
                                    })), clearTimeout(M), M = setTimeout(R, 1e3), L = o.copy(), A = u.copy(), O = a.copy()
                                }), _
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = e.utils.defaultColor(),
                                s = Math.floor(Math.random() * 1e5),
                                o = d3.scale.linear(),
                                u = d3.scale.linear(),
                                a = d3.scale.linear(),
                                f = function(e) {
                                    return e.x
                                },
                                l = function(e) {
                                    return e.y
                                },
                                c = function(e) {
                                    return e.size
                                },
                                h = function(e) {
                                    return e.shape || "circle"
                                },
                                p = [],
                                d = [],
                                v = [],
                                m = !0,
                                g = function(e) {
                                    return !e.notActive
                                },
                                y = !1,
                                b = !0,
                                w = function() {
                                    return 25
                                },
                                E = null,
                                S = null,
                                x = null,
                                T = null,
                                N = !1,
                                C = d3.dispatch("elementClick", "elementMouseover", "elementMouseout"),
                                k = !0,
                                L, A, O, M;
                            return C.on("elementMouseover.point", function(e) {
                                m && d3.select(".nv-chart-" + s + " .nv-series-" + e.seriesIndex + " .nv-point-" + e.pointIndex).classed("hover", !0)
                            }), C.on("elementMouseout.point", function(e) {
                                m && d3.select(".nv-chart-" + s + " .nv-series-" + e.seriesIndex + " .nv-point-" + e.pointIndex).classed("hover", !1)
                            }), _.dispatch = C, _.x = function(e) {
                                return arguments.length ? (f = d3.functor(e), _) : f
                            }, _.y = function(e) {
                                return arguments.length ? (l = d3.functor(e), _) : l
                            }, _.size = function(e) {
                                return arguments.length ? (c = d3.functor(e), _) : c
                            }, _.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, _) : t
                            }, _.width = function(e) {
                                return arguments.length ? (n = e, _) : n
                            }, _.height = function(e) {
                                return arguments.length ? (r = e, _) : r
                            }, _.xScale = function(e) {
                                return arguments.length ? (o = e, _) : o
                            }, _.yScale = function(e) {
                                return arguments.length ? (u = e, _) : u
                            }, _.zScale = function(e) {
                                return arguments.length ? (a = e, _) : a
                            }, _.xDomain = function(e) {
                                return arguments.length ? (E = e, _) : E
                            }, _.yDomain = function(e) {
                                return arguments.length ? (S = e, _) : S
                            }, _.sizeDomain = function(e) {
                                return arguments.length ? (x = e, _) : x
                            }, _.sizeRange = function(e) {
                                return arguments.length ? (T = e, _) : T
                            }, _.forceX = function(e) {
                                return arguments.length ? (p = e, _) : p
                            }, _.forceY = function(e) {
                                return arguments.length ? (d = e, _) : d
                            }, _.forceSize = function(e) {
                                return arguments.length ? (v = e, _) : v
                            }, _.interactive = function(e) {
                                return arguments.length ? (m = e, _) : m
                            }, _.pointActive = function(e) {
                                return arguments.length ? (g = e, _) : g
                            }, _.clipEdge = function(e) {
                                return arguments.length ? (y = e, _) : y
                            }, _.clipVoronoi = function(e) {
                                return arguments.length ? (b = e, _) : b
                            }, _.useVoronoi = function(e) {
                                return arguments.length ? (k = e, k === !1 && (b = !1), _) : k
                            }, _.clipRadius = function(e) {
                                return arguments.length ? (w = e, _) : w
                            }, _.color = function(t) {
                                return arguments.length ? (i = e.utils.getColor(t), _) : i
                            }, _.shape = function(e) {
                                return arguments.length ? (h = e, _) : h
                            }, _.id = function(e) {
                                return arguments.length ? (s = e, _) : s
                            }, _.singlePoint = function(e) {
                                return arguments.length ? (N = e, _) : N
                            }, _
                        }, e.models.scatterChart = function() {
                            function O(e) {
                                return e.each(function(E) {
                                    function F() {
                                        if (b) return j.select(".nv-point-paths").style("pointer-events", "all"), !1;
                                        j.select(".nv-point-paths").style("pointer-events", "none");
                                        var e = d3.mouse(this);
                                        h.distortion(y).focus(e[0]), p.distortion(y).focus(e[1]), j.select(".nv-scatterWrap").datum(E.filter(function(e) {
                                            return !e.disabled
                                        })).call(t), j.select(".nv-x.nv-axis").call(n), j.select(".nv-y.nv-axis").call(r), j.select(".nv-distributionX").datum(E.filter(function(e) {
                                            return !e.disabled
                                        })).call(o), j.select(".nv-distributionY").datum(E.filter(function(e) {
                                            return !e.disabled
                                        })).call(u)
                                    }
                                    var S = d3.select(this),
                                        x = this,
                                        M = (f || parseInt(S.style("width")) || 960) - a.left - a.right,
                                        _ = (l || parseInt(S.style("height")) || 400) - a.top - a.bottom;
                                    O.update = function() {
                                        O(e)
                                    }, O.container = this;
                                    if (!E || !E.length || !E.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var D = S.selectAll(".nv-noData").data([N]);
                                        return D.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), D.attr("x", a.left + M / 2).attr("y", a.top + _ / 2).text(function(e) {
                                            return e
                                        }), O
                                    }
                                    S.selectAll(".nv-noData").remove(), h = t.xScale(), p = t.yScale(), C = C || h, k = k || p;
                                    var P = S.selectAll("g.nv-wrap.nv-scatterChart").data([E]),
                                        H = P.enter().append("g").attr("class", "nvd3 nv-wrap nv-scatterChart nv-chart-" + t.id()),
                                        B = H.append("g"),
                                        j = P.select("g");
                                    B.append("rect").attr("class", "nvd3 nv-background"), B.append("g").attr("class", "nv-x nv-axis"), B.append("g").attr("class", "nv-y nv-axis"), B.append("g").attr("class", "nv-scatterWrap"), B.append("g").attr("class", "nv-distWrap"), B.append("g").attr("class", "nv-legendWrap"), B.append("g").attr("class", "nv-controlsWrap"), P.attr("transform", "translate(" + a.left + "," + a.top + ")"), m && (i.width(M / 2), P.select(".nv-legendWrap").datum(E).call(i), a.top != i.height() && (a.top = i.height(), _ = (l || parseInt(S.style("height")) || 400) - a.top - a.bottom), P.select(".nv-legendWrap").attr("transform", "translate(" + M / 2 + "," + -a.top + ")")), g && (s.width(180).color(["#444"]), j.select(".nv-controlsWrap").datum(A).attr("transform", "translate(0," + -a.top + ")").call(s)), t.width(M).height(_).color(E.map(function(e, t) {
                                        return e.color || c(e, t)
                                    }).filter(function(e, t) {
                                        return !E[t].disabled
                                    })), P.select(".nv-scatterWrap").datum(E.filter(function(e) {
                                        return !e.disabled
                                    })).call(t), n.scale(h).ticks(n.ticks() ? n.ticks() : M / 100).tickSize(-_, 0), j.select(".nv-x.nv-axis").attr("transform", "translate(0," + p.range()[0] + ")").call(n), r.scale(p).ticks(r.ticks() ? r.ticks() : _ / 36).tickSize(-M, 0), j.select(".nv-y.nv-axis").call(r), d && (o.getData(t.x()).scale(h).width(M).color(E.map(function(e, t) {
                                        return e.color || c(e, t)
                                    }).filter(function(e, t) {
                                        return !E[t].disabled
                                    })), B.select(".nv-distWrap").append("g").attr("class", "nv-distributionX"), j.select(".nv-distributionX").attr("transform", "translate(0," + p.range()[0] + ")").datum(E.filter(function(e) {
                                        return !e.disabled
                                    })).call(o)), v && (u.getData(t.y()).scale(p).width(_).color(E.map(function(e, t) {
                                        return e.color || c(e, t)
                                    }).filter(function(e, t) {
                                        return !E[t].disabled
                                    })), B.select(".nv-distWrap").append("g").attr("class", "nv-distributionY"), j.select(".nv-distributionY").attr("transform", "translate(-" + u.size() + ",0)").datum(E.filter(function(e) {
                                        return !e.disabled
                                    })).call(u)), d3.fisheye && (j.select(".nv-background").attr("width", M).attr("height", _), j.select(".nv-background").on("mousemove", F), j.select(".nv-background").on("click", function() {
                                        b = !b
                                    }), t.dispatch.on("elementClick.freezeFisheye", function() {
                                        b = !b
                                    })), s.dispatch.on("legendClick", function(i, s) {
                                        i.disabled = !i.disabled, y = i.disabled ? 0 : 2.5, j.select(".nv-background").style("pointer-events", i.disabled ? "none" : "all"), j.select(".nv-point-paths").style("pointer-events", i.disabled ? "all" : "none"), i.disabled ? (h.distortion(y).focus(0), p.distortion(y).focus(0), j.select(".nv-scatterWrap").call(t), j.select(".nv-x.nv-axis").call(n), j.select(".nv-y.nv-axis").call(r)) : b = !1, O(e)
                                    }), i.dispatch.on("legendClick", function(t, n, r) {
                                        t.disabled = !t.disabled, E.filter(function(e) {
                                            return !e.disabled
                                        }).length || E.map(function(e) {
                                            return e.disabled = !1, P.selectAll(".nv-series").classed("disabled", !1), e
                                        }), O(e)
                                    }), t.dispatch.on("elementMouseover.tooltip", function(e) {
                                        d3.select(".nv-chart-" + t.id() + " .nv-series-" + e.seriesIndex + " .nv-distx-" + e.pointIndex).attr("y1", e.pos[1] - _), d3.select(".nv-chart-" + t.id() + " .nv-series-" + e.seriesIndex + " .nv-disty-" + e.pointIndex).attr("x2", e.pos[0] + o.size()), e.pos = [e.pos[0] + a.left, e.pos[1] + a.top], T.tooltipShow(e)
                                    }), T.on("tooltipShow", function(e) {
                                        w && L(e, x.parentNode)
                                    }), C = h.copy(), k = p.copy()
                                }), O
                            }
                            var t = e.models.scatter(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend(),
                                s = e.models.legend(),
                                o = e.models.distribution(),
                                u = e.models.distribution(),
                                a = {
                                    top: 30,
                                    right: 20,
                                    bottom: 50,
                                    left: 60
                                },
                                f = null,
                                l = null,
                                c = e.utils.defaultColor(),
                                h = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : t.xScale(),
                                p = d3.fisheye ? d3.fisheye.scale(d3.scale.linear).distortion(0) : t.yScale(),
                                d = !1,
                                v = !1,
                                m = !0,
                                g = !!d3.fisheye,
                                y = 0,
                                b = !1,
                                w = !0,
                                E = function(e, t, n) {
                                    return "<strong>" + t + "</strong>"
                                },
                                S = function(e, t, n) {
                                    return "<strong>" + n + "</strong>"
                                },
                                x = null,
                                T = d3.dispatch("tooltipShow", "tooltipHide"),
                                N = "No Data Available.";
                            t.xScale(h).yScale(p), n.orient("bottom").tickPadding(10), r.orient("left").tickPadding(10), o.axis("x"), u.axis("y");
                            var C, k, L = function(i, s) {
                                    var o = i.pos[0] + (s.offsetLeft || 0),
                                        u = i.pos[1] + (s.offsetTop || 0),
                                        f = i.pos[0] + (s.offsetLeft || 0),
                                        l = p.range()[0] + a.top + (s.offsetTop || 0),
                                        c = h.range()[0] + a.left + (s.offsetLeft || 0),
                                        d = i.pos[1] + (s.offsetTop || 0),
                                        v = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                        m = r.tickFormat()(t.y()(i.point, i.pointIndex));
                                    E != null && e.tooltip.show([f, l], E(i.series.key, v, m, i, O), "n", 1, s, "x-nvtooltip"), S != null && e.tooltip.show([c, d], S(i.series.key, v, m, i, O), "e", 1, s, "y-nvtooltip"), x != null && e.tooltip.show([o, u], x(i.series.key, v, m, i, O), i.value < 0 ? "n" : "s", null, s)
                                },
                                A = [{
                                    key: "Magnify",
                                    disabled: !0
                                }];
                            return t.dispatch.on("elementMouseout.tooltip", function(e) {
                                T.tooltipHide(e), d3.select(".nv-chart-" + t.id() + " .nv-series-" + e.seriesIndex + " .nv-distx-" + e.pointIndex).attr("y1", 0), d3.select(".nv-chart-" + t.id() + " .nv-series-" + e.seriesIndex + " .nv-disty-" + e.pointIndex).attr("x2", u.size())
                            }), T.on("tooltipHide", function() {
                                w && e.tooltip.cleanup()
                            }), O.dispatch = T, O.scatter = t, O.legend = i, O.controls = s, O.xAxis = n, O.yAxis = r, O.distX = o, O.distY = u, d3.rebind(O, t, "id", "interactive", "pointActive", "x", "y", "shape", "size", "xScale", "yScale", "zScale", "xDomain", "yDomain", "sizeDomain", "sizeRange", "forceX", "forceY", "forceSize", "clipVoronoi", "clipRadius", "useVoronoi"), O.margin = function(e) {
                                return arguments.length ? (a.top = typeof e.top != "undefined" ? e.top : a.top, a.right = typeof e.right != "undefined" ? e.right : a.right, a.bottom = typeof e.bottom != "undefined" ? e.bottom : a.bottom, a.left = typeof e.left != "undefined" ? e.left : a.left, O) : a
                            }, O.width = function(e) {
                                return arguments.length ? (f = e, O) : f
                            }, O.height = function(e) {
                                return arguments.length ? (l = e, O) : l
                            }, O.color = function(t) {
                                return arguments.length ? (c = e.utils.getColor(t), i.color(c), o.color(c), u.color(c), O) : c
                            }, O.showDistX = function(e) {
                                return arguments.length ? (d = e, O) : d
                            }, O.showDistY = function(e) {
                                return arguments.length ? (v = e, O) : v
                            }, O.showControls = function(e) {
                                return arguments.length ? (g = e, O) : g
                            }, O.showLegend = function(e) {
                                return arguments.length ? (m = e, O) : m
                            }, O.fisheye = function(e) {
                                return arguments.length ? (y = e, O) : y
                            }, O.tooltips = function(e) {
                                return arguments.length ? (w = e, O) : w
                            }, O.tooltipContent = function(e) {
                                return arguments.length ? (x = e, O) : x
                            }, O.tooltipXContent = function(e) {
                                return arguments.length ? (E = e, O) : E
                            }, O.tooltipYContent = function(e) {
                                return arguments.length ? (S = e, O) : S
                            }, O.noData = function(e) {
                                return arguments.length ? (N = e, O) : N
                            }, O
                        }, e.models.sparkline = function() {
                            function h(e) {
                                return e.each(function(e) {
                                    var i = n - t.left - t.right,
                                        h = r - t.top - t.bottom,
                                        p = d3.select(this);
                                    s.domain(l || d3.extent(e, u)).range([0, i]), o.domain(c || d3.extent(e, a)).range([h, 0]);
                                    var d = p.selectAll("g.nv-wrap.nv-sparkline").data([e]),
                                        v = d.enter().append("g").attr("class", "nvd3 nv-wrap nv-sparkline"),
                                        m = v.append("g"),
                                        g = d.select("g");
                                    d.attr("transform", "translate(" + t.left + "," + t.top + ")");
                                    var b = d.selectAll("path").data(function(e) {
                                        return [e]
                                    });
                                    b.enter().append("path"), b.exit().remove(), b.style("stroke", function(e, t) {
                                        return e.color || f(e, t)
                                    }).attr("d", d3.svg.line().x(function(e, t) {
                                        return s(u(e, t))
                                    }).y(function(e, t) {
                                        return o(a(e, t))
                                    }));
                                    var w = d.selectAll("circle.nv-point").data(function(e) {
                                        return e.filter(function(e, t) {
                                            return o.domain().indexOf(a(e, t)) != -1 || u(e, t) == s.domain()[1]
                                        })
                                    });
                                    w.enter().append("circle").attr("class", "nv-point"), w.exit().remove(), w.attr("cx", function(e, t) {
                                        return s(u(e, t))
                                    }).attr("cy", function(e, t) {
                                        return o(a(e, t))
                                    }).attr("r", 2).style("stroke", function(e, t) {
                                        return e.x == s.domain()[1] ? "#444" : e.y == o.domain()[0] ? "#d62728" : "#2ca02c"
                                    }).style("fill", function(e, t) {
                                        return e.x == s.domain()[1] ? "#444" : e.y == o.domain()[0] ? "#d62728" : "#2ca02c"
                                    })
                                }), h
                            }
                            var t = {
                                    top: 2,
                                    right: 0,
                                    bottom: 2,
                                    left: 0
                                },
                                n = 400,
                                r = 32,
                                i = !0,
                                s = d3.scale.linear(),
                                o = d3.scale.linear(),
                                u = function(e) {
                                    return e.x
                                },
                                a = function(e) {
                                    return e.y
                                },
                                f = e.utils.getColor(["#000"]),
                                l, c;
                            return h.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, h) : t
                            }, h.width = function(e) {
                                return arguments.length ? (n = e, h) : n
                            }, h.height = function(e) {
                                return arguments.length ? (r = e, h) : r
                            }, h.x = function(e) {
                                return arguments.length ? (u = d3.functor(e), h) : u
                            }, h.y = function(e) {
                                return arguments.length ? (a = d3.functor(e), h) : a
                            }, h.xScale = function(e) {
                                return arguments.length ? (s = e, h) : s
                            }, h.yScale = function(e) {
                                return arguments.length ? (o = e, h) : o
                            }, h.xDomain = function(e) {
                                return arguments.length ? (l = e, h) : l
                            }, h.yDomain = function(e) {
                                return arguments.length ? (c = e, h) : c
                            }, h.animate = function(e) {
                                return arguments.length ? (i = e, h) : i
                            }, h.color = function(t) {
                                return arguments.length ? (f = e.utils.getColor(t), h) : f
                            }, h
                        }, e.models.sparklinePlus = function() {
                            function p(e) {
                                return e.each(function(d) {
                                    function M() {
                                        if (f) return;
                                        C.data([a]), C.transition().duration(250).style("stroke-opacity", function(e) {
                                            return e === null ? 0 : 1
                                        }).style("fill-opacity", function(e) {
                                            return e === null ? 0 : 1
                                        });
                                        if (a == null) return;
                                        C.attr("transform", function(e) {
                                            return "translate(" + s(t.x()(d[e], e)) + ",0)"
                                        }), C.select(".nv-xValue").text(l(t.x()(d[a], a))), C.select(".nv-yValue").text(c(t.y()(d[a], a)))
                                    }

                                    function _() {
                                        function r(e, n) {
                                            var r = Math.abs(t.x()(e[0], 0) - n),
                                                i = 0;
                                            for (var s = 0; s < e.length; s++) Math.abs(t.x()(e[s], s) - n) < r && (r = Math.abs(t.x()(e[s], s) - n), i = s);
                                            return i
                                        }
                                        if (f) return;
                                        var e = d3.event.offsetX - n.left;
                                        a = r(d, Math.round(s.invert(e))), M()
                                    }
                                    var v = d3.select(this),
                                        m = (r || parseInt(v.style("width")) || 960) - n.left - n.right,
                                        g = (i || parseInt(v.style("height")) || 400) - n.top - n.bottom;
                                    p.update = function() {
                                        p(e)
                                    }, p.container = this;
                                    if (!d || !d.length) {
                                        var b = v.selectAll(".nv-noData").data([h]);
                                        return b.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), b.attr("x", n.left + m / 2).attr("y", n.top + g / 2).text(function(e) {
                                            return e
                                        }), p
                                    }
                                    v.selectAll(".nv-noData").remove(), s = t.xScale(), o = t.yScale();
                                    var w = v.selectAll("g.nv-wrap.nv-sparklineplus").data([d]),
                                        E = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-sparklineplus"),
                                        S = E.append("g"),
                                        T = w.select("g");
                                    S.append("g").attr("class", "nv-sparklineWrap"), S.append("g").attr("class", "nv-hoverArea"), w.attr("transform", "translate(" + n.left + "," + n.top + ")");
                                    var N = T.select(".nv-sparklineWrap");
                                    t.width(m).height(g), N.style("stroke", function(e, t) {
                                        return e.color || u(e, t)
                                    }).call(t), S.select(".nv-hoverArea").append("rect").on("mousemove", _).on("click", function() {
                                        f = !f
                                    }).on("mouseout", function() {
                                        a = null, M()
                                    }), T.select(".nv-hoverArea rect").attr("transform", function(e) {
                                        return "translate(" + -n.left + "," + -n.top + ")"
                                    }).attr("width", m + n.left + n.right).attr("height", g + n.top), a = typeof a == "undefined" ? null : a;
                                    var C = T.selectAll(".nv-hoverValue").data([a]),
                                        k = C.enter().append("g").attr("class", "nv-hoverValue"),
                                        L = k.append("line").attr("x1", 0).attr("y1", -n.top).attr("x2", 0).attr("y2", g),
                                        A = k.append("text").attr("class", "nv-xValue").attr("x", -6).attr("y", -n.top).attr("text-anchor", "end").attr("dy", ".9em"),
                                        O = k.append("text").attr("class", "nv-yValue").attr("x", 6).attr("y", -n.top).attr("text-anchor", "start").attr("dy", ".9em");
                                    M()
                                }), p
                            }
                            var t = e.models.sparkline(),
                                n = {
                                    top: 15,
                                    right: 40,
                                    bottom: 3,
                                    left: 40
                                },
                                r = null,
                                i = null,
                                s, o, u = e.utils.defaultColor(),
                                a, f = !1,
                                l = d3.format(",r"),
                                c = d3.format(",.2f"),
                                h = "No Data Available.";
                            return p.sparkline = t, d3.rebind(p, t, "x", "y", "xScale", "yScale"), p.margin = function(e) {
                                return arguments.length ? (n.top = typeof e.top != "undefined" ? e.top : n.top, n.right = typeof e.right != "undefined" ? e.right : n.right, n.bottom = typeof e.bottom != "undefined" ? e.bottom : n.bottom, n.left = typeof e.left != "undefined" ? e.left : n.left, p) : n
                            }, p.width = function(e) {
                                return arguments.length ? (r = e, p) : r
                            }, p.height = function(e) {
                                return arguments.length ? (i = e, p) : i
                            }, p.xTickFormat = function(e) {
                                return arguments.length ? (l = e, p) : l
                            }, p.yTickFormat = function(e) {
                                return arguments.length ? (c = e, p) : c
                            }, p.noData = function(e) {
                                return arguments.length ? (h = e, p) : h
                            }, p
                        }, e.models.stackedArea = function() {
                            function g(e) {
                                return e.each(function(e) {
                                    var a = n - t.left - t.right,
                                        g = r - t.top - t.bottom,
                                        b = d3.select(this);
                                    p = v.xScale(), d = v.yScale(), e = e.map(function(e, t) {
                                        return e.values = e.values.map(function(t, n) {
                                            return t.index = n, t.stackedY = e.disabled ? 0 : u(t, n), t
                                        }), e
                                    }), e = d3.layout.stack().order(l).offset(f).values(function(e) {
                                        return e.values
                                    }).x(o).y(function(e) {
                                        return e.stackedY
                                    }).out(function(e, t, n) {
                                        e.display = {
                                            y: n,
                                            y0: t
                                        }
                                    })(e);
                                    var w = b.selectAll("g.nv-wrap.nv-stackedarea").data([e]),
                                        E = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-stackedarea"),
                                        S = E.append("defs"),
                                        T = E.append("g"),
                                        N = w.select("g");
                                    T.append("g").attr("class", "nv-areaWrap"), T.append("g").attr("class", "nv-scatterWrap"), w.attr("transform", "translate(" + t.left + "," + t.top + ")"), v.width(a).height(g).x(o).y(function(e) {
                                        return e.display.y + e.display.y0
                                    }).forceY([0]).color(e.map(function(e, t) {
                                        return e.color || i(e, t)
                                    }).filter(function(t, n) {
                                        return !e[n].disabled
                                    }));
                                    var C = N.select(".nv-scatterWrap").datum(e.filter(function(e) {
                                        return !e.disabled
                                    }));
                                    d3.transition(C).call(v), S.append("clipPath").attr("id", "nv-edge-clip-" + s).append("rect"), w.select("#nv-edge-clip-" + s + " rect").attr("width", a).attr("height", g), N.attr("clip-path", h ? "url(#nv-edge-clip-" + s + ")" : "");
                                    var k = d3.svg.area().x(function(e, t) {
                                            return p(o(e, t))
                                        }).y0(function(e) {
                                            return d(e.display.y0)
                                        }).y1(function(e) {
                                            return d(e.display.y + e.display.y0)
                                        }).interpolate(c),
                                        L = d3.svg.area().x(function(e, t) {
                                            return p(o(e, t))
                                        }).y0(function(e) {
                                            return d(e.display.y0)
                                        }).y1(function(e) {
                                            return d(e.display.y0)
                                        }),
                                        A = N.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e) {
                                            return e
                                        });
                                    A.enter().append("path").attr("class", function(e, t) {
                                        return "nv-area nv-area-" + t
                                    }).on("mouseover", function(e, t) {
                                        d3.select(this).classed("hover", !0), m.areaMouseover({
                                            point: e,
                                            series: e.key,
                                            pos: [d3.event.pageX, d3.event.pageY],
                                            seriesIndex: t
                                        })
                                    }).on("mouseout", function(e, t) {
                                        d3.select(this).classed("hover", !1), m.areaMouseout({
                                            point: e,
                                            series: e.key,
                                            pos: [d3.event.pageX, d3.event.pageY],
                                            seriesIndex: t
                                        })
                                    }).on("click", function(e, t) {
                                        d3.select(this).classed("hover", !1), m.areaClick({
                                            point: e,
                                            series: e.key,
                                            pos: [d3.event.pageX, d3.event.pageY],
                                            seriesIndex: t
                                        })
                                    }), d3.transition(A.exit()).attr("d", function(e, t) {
                                        return L(e.values, t)
                                    }).remove(), A.style("fill", function(e, t) {
                                        return e.color || i(e, t)
                                    }).style("stroke", function(e, t) {
                                        return e.color || i(e, t)
                                    }), d3.transition(A).attr("d", function(e, t) {
                                        return k(e.values, t)
                                    }), v.dispatch.on("elementMouseover.area", function(e) {
                                        N.select(".nv-chart-" + s + " .nv-area-" + e.seriesIndex).classed("hover", !0)
                                    }), v.dispatch.on("elementMouseout.area", function(e) {
                                        N.select(".nv-chart-" + s + " .nv-area-" + e.seriesIndex).classed("hover", !1)
                                    })
                                }), g
                            }
                            var t = {
                                    top: 0,
                                    right: 0,
                                    bottom: 0,
                                    left: 0
                                },
                                n = 960,
                                r = 500,
                                i = e.utils.defaultColor(),
                                s = Math.floor(Math.random() * 1e5),
                                o = function(e) {
                                    return e.x
                                },
                                u = function(e) {
                                    return e.y
                                },
                                a = "stack",
                                f = "zero",
                                l = "default",
                                c = "linear",
                                h = !1,
                                p, d, v = e.models.scatter(),
                                m = d3.dispatch("tooltipShow", "tooltipHide", "areaClick", "areaMouseover", "areaMouseout");
                            return v.size(2.2).sizeDomain([2.2]), v.dispatch.on("elementClick.area", function(e) {
                                m.areaClick(e)
                            }), v.dispatch.on("elementMouseover.tooltip", function(e) {
                                e.pos = [e.pos[0] + t.left, e.pos[1] + t.top], m.tooltipShow(e)
                            }), v.dispatch.on("elementMouseout.tooltip", function(e) {
                                m.tooltipHide(e)
                            }), g.dispatch = m, g.scatter = v, d3.rebind(g, v, "interactive", "size", "xScale", "yScale", "zScale", "xDomain", "yDomain", "sizeDomain", "forceX", "forceY", "forceSize", "clipVoronoi", "clipRadius"), g.x = function(e) {
                                return arguments.length ? (o = d3.functor(e), g) : o
                            }, g.y = function(e) {
                                return arguments.length ? (u = d3.functor(e), g) : u
                            }, g.margin = function(e) {
                                return arguments.length ? (t.top = typeof e.top != "undefined" ? e.top : t.top, t.right = typeof e.right != "undefined" ? e.right : t.right, t.bottom = typeof e.bottom != "undefined" ? e.bottom : t.bottom, t.left = typeof e.left != "undefined" ? e.left : t.left, g) : t
                            }, g.width = function(e) {
                                return arguments.length ? (n = e, g) : n
                            }, g.height = function(e) {
                                return arguments.length ? (r = e, g) : r
                            }, g.clipEdge = function(e) {
                                return arguments.length ? (h = e, g) : h
                            }, g.color = function(t) {
                                return arguments.length ? (i = e.utils.getColor(t), g) : i
                            }, g.offset = function(e) {
                                return arguments.length ? (f = e, g) : f
                            }, g.order = function(e) {
                                return arguments.length ? (l = e, g) : l
                            }, g.style = function(e) {
                                if (!arguments.length) return a;
                                a = e;
                                switch (a) {
                                    case "stack":
                                        g.offset("zero"), g.order("default");
                                        break;
                                    case "stream":
                                        g.offset("wiggle"), g.order("inside-out");
                                        break;
                                    case "stream-center":
                                        g.offset("silhouette"), g.order("inside-out");
                                        break;
                                    case "expand":
                                        g.offset("expand"), g.order("default")
                                }
                                return g
                            }, g.interpolate = function(e) {
                                return arguments.length ? (c = e, c) : c
                            }, g
                        }, e.models.stackedAreaChart = function() {
                            function w(e) {
                                return e.each(function(f) {
                                    var p = d3.select(this),
                                        E = this,
                                        S = (u || parseInt(p.style("width")) || 960) - o.left - o.right,
                                        T = (a || parseInt(p.style("height")) || 400) - o.top - o.bottom;
                                    w.update = function() {
                                        w(e)
                                    }, w.container = this;
                                    if (!f || !f.length || !f.filter(function(e) {
                                            return e.values.length
                                        }).length) {
                                        var N = p.selectAll(".nv-noData").data([g]);
                                        return N.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), N.attr("x", o.left + S / 2).attr("y", o.top + T / 2).text(function(e) {
                                            return e
                                        }), w
                                    }
                                    p.selectAll(".nv-noData").remove(), d = t.xScale(), v = t.yScale();
                                    var C = p.selectAll("g.nv-wrap.nv-stackedAreaChart").data([f]),
                                        k = C.enter().append("g").attr("class", "nvd3 nv-wrap nv-stackedAreaChart").append("g"),
                                        L = C.select("g");
                                    k.append("g").attr("class", "nv-x nv-axis"), k.append("g").attr("class", "nv-y nv-axis"), k.append("g").attr("class", "nv-stackedWrap"), k.append("g").attr("class", "nv-legendWrap"), k.append("g").attr("class", "nv-controlsWrap"), c && (i.width(S / 2), L.select(".nv-legendWrap").datum(f).call(i), o.top != i.height() && (o.top = i.height(), T = (a || parseInt(p.style("height")) || 400) - o.top - o.bottom), L.select(".nv-legendWrap").attr("transform", "translate(" + S / 2 + "," + -o.top + ")"));
                                    if (l) {
                                        var A = [{
                                            key: "Stacked",
                                            disabled: t.offset() != "zero"
                                        }, {
                                            key: "Stream",
                                            disabled: t.offset() != "wiggle"
                                        }, {
                                            key: "Expanded",
                                            disabled: t.offset() != "expand"
                                        }];
                                        s.width(280).color(["#444", "#444", "#444"]), L.select(".nv-controlsWrap").datum(A).attr("transform", "translate(0," + -o.top + ")").call(s)
                                    }
                                    C.attr("transform", "translate(" + o.left + "," + o.top + ")"), t.width(S).height(T);
                                    var O = L.select(".nv-stackedWrap").datum(f);
                                    d3.transition(O).call(t), n.scale(d).ticks(S / 100).tickSize(-T, 0), L.select(".nv-x.nv-axis").attr("transform", "translate(0," + T + ")"), d3.transition(L.select(".nv-x.nv-axis")).call(n), r.scale(v).ticks(t.offset() == "wiggle" ? 0 : T / 36).tickSize(-S, 0).setTickFormat(t.offset() == "expand" ? d3.format("%") : m), d3.transition(L.select(".nv-y.nv-axis")).call(r), t.dispatch.on("areaClick.toggle", function(t) {
                                        f.filter(function(e) {
                                            return !e.disabled
                                        }).length === 1 ? f = f.map(function(e) {
                                            return e.disabled = !1, e
                                        }) : f = f.map(function(e, n) {
                                            return e.disabled = n != t.seriesIndex, e
                                        }), e.transition().call(w)
                                    }), i.dispatch.on("legendClick", function(t, n) {
                                        t.disabled = !t.disabled, f.filter(function(e) {
                                            return !e.disabled
                                        }).length || f.map(function(e) {
                                            return e.disabled = !1, e
                                        }), e.transition().call(w)
                                    }), s.dispatch.on("legendClick", function(n, r) {
                                        if (!n.disabled) return;
                                        A = A.map(function(e) {
                                            return e.disabled = !0, e
                                        }), n.disabled = !1;
                                        switch (n.key) {
                                            case "Stacked":
                                                t.style("stack");
                                                break;
                                            case "Stream":
                                                t.style("stream");
                                                break;
                                            case "Expanded":
                                                t.style("expand")
                                        }
                                        e.transition().call(w)
                                    }), y.on("tooltipShow", function(e) {
                                        h && b(e, E.parentNode)
                                    })
                                }), w
                            }
                            var t = e.models.stackedArea(),
                                n = e.models.axis(),
                                r = e.models.axis(),
                                i = e.models.legend(),
                                s = e.models.legend(),
                                o = {
                                    top: 30,
                                    right: 25,
                                    bottom: 50,
                                    left: 60
                                },
                                u = null,
                                a = null,
                                f = e.utils.defaultColor(),
                                l = !0,
                                c = !0,
                                h = !0,
                                p = function(e, t, n, r, i) {
                                    return "<h3>" + e + "</h3>" + "<p>" + n + " on " + t + "</p>"
                                },
                                d, v, m = d3.format(",.2f"),
                                g = "No Data Available.",
                                y = d3.dispatch("tooltipShow", "tooltipHide");
                            n.orient("bottom").tickPadding(5), r.orient("left");
                            var b = function(i, s) {
                                var o = i.pos[0] + (s.offsetLeft || 0),
                                    u = i.pos[1] + (s.offsetTop || 0),
                                    a = n.tickFormat()(t.x()(i.point, i.pointIndex)),
                                    f = r.tickFormat()(t.y()(i.point, i.pointIndex)),
                                    l = p(i.series.key, a, f, i, w);
                                e.tooltip.show([o, u], l, i.value < 0 ? "n" : "s", null, s)
                            };
                            return t.dispatch.on("tooltipShow", function(e) {
                                if (!Math.round(t.y()(e.point) * 100)) return setTimeout(function() {
                                    d3.selectAll(".point.hover").classed("hover", !1)
                                }, 0), !1;
                                e.pos = [e.pos[0] + o.left, e.pos[1] + o.top], y.tooltipShow(e)
                            }), t.dispatch.on("tooltipHide", function(e) {
                                y.tooltipHide(e)
                            }), y.on("tooltipHide", function() {
                                h && e.tooltip.cleanup()
                            }), w.dispatch = y, w.stacked = t, w.legend = i, w.controls = s, w.xAxis = n, w.yAxis = r, d3.rebind(w, t, "x", "y", "size", "xScale", "yScale", "xDomain", "yDomain", "sizeDomain", "interactive", "offset", "order", "style", "clipEdge", "forceX", "forceY", "forceSize", "interpolate"), w.margin = function(e) {
                                return arguments.length ? (o.top = typeof e.top != "undefined" ? e.top : o.top, o.right = typeof e.right != "undefined" ? e.right : o.right, o.bottom = typeof e.bottom != "undefined" ? e.bottom : o.bottom, o.left = typeof e.left != "undefined" ? e.left : o.left, w) : o
                            }, w.width = function(e) {
                                return arguments.length ? (u = e, w) : getWidth
                            }, w.height = function(e) {
                                return arguments.length ? (a = e, w) : getHeight
                            }, w.color = function(n) {
                                return arguments.length ? (f = e.utils.getColor(n), i.color(f), t.color(f), w) : f
                            }, w.showControls = function(e) {
                                return arguments.length ? (l = e, w) : l
                            }, w.showLegend = function(e) {
                                return arguments.length ? (c = e, w) : c
                            }, w.tooltip = function(e) {
                                return arguments.length ? (p = e, w) : p
                            }, w.tooltips = function(e) {
                                return arguments.length ? (h = e, w) : h
                            }, w.tooltipContent = function(e) {
                                return arguments.length ? (p = e, w) : p
                            }, w.noData = function(e) {
                                return arguments.length ? (g = e, w) : g
                            }, r.setTickFormat = r.tickFormat, r.tickFormat = function(e) {
                                return arguments.length ? (m = e, r) : m
                            }, w
                        }
                })()
            }.apply(e, arguments)
        })
    }(this), define("common/csrf", ["jquery", "underscore"], function(e, t) {
        var n = ["POST", "PUT", "PATCH", "DELETE"];
        e.ajaxPrefilter(function(r, i, s) {
            var o = e('meta[name="csrf-token"]').attr("content");
            t.contains(n, r.type) && s.setRequestHeader("X-CSRF-Token", o)
        })
    }),
    function(e) {
        "use strict";
        typeof define == "function" && define.amd ? define("iframeTransport", ["jquery"], e) : e(window.jQuery)
    }(function(e) {
        "use strict";
        var t = 0;
        e.ajaxTransport("iframe", function(n) {
            if (n.async) {
                var r = n.initialIframeSrc || "javascript:false;",
                    i, s, o;
                return {
                    send: function(u, a) {
                        i = e('<form style="display:none;"></form>'), i.attr("accept-charset", n.formAcceptCharset), o = /\?/.test(n.url) ? "&" : "?", n.type === "DELETE" ? (n.url = n.url + o + "_method=DELETE", n.type = "POST") : n.type === "PUT" ? (n.url = n.url + o + "_method=PUT", n.type = "POST") : n.type === "PATCH" && (n.url = n.url + o + "_method=PATCH", n.type = "POST"), t += 1, s = e('<iframe src="' + r + '" name="iframe-transport-' + t + '"></iframe>').bind("load", function() {
                            var t, o = e.isArray(n.paramName) ? n.paramName : [n.paramName];
                            s.unbind("load").bind("load", function() {
                                var t;
                                try {
                                    t = s.contents();
                                    if (!t.length || !t[0].firstChild) throw new Error
                                } catch (n) {
                                    t = undefined
                                }
                                a(200, "success", {
                                    iframe: t
                                }), e('<iframe src="' + r + '"></iframe>').appendTo(i), window.setTimeout(function() {
                                    i.remove()
                                }, 0)
                            }), i.prop("target", s.prop("name")).prop("action", n.url).prop("method", n.type), n.formData && e.each(n.formData, function(t, n) {
                                e('<input type="hidden"/>').prop("name", n.name).val(n.value).appendTo(i)
                            }), n.fileInput && n.fileInput.length && n.type === "POST" && (t = n.fileInput.clone(), n.fileInput.after(function(e) {
                                return t[e]
                            }), n.paramName && n.fileInput.each(function(t) {
                                e(this).prop("name", o[t] || n.paramName)
                            }), i.append(n.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data"), n.fileInput.removeAttr("form")), i.submit(), t && t.length && n.fileInput.each(function(n, r) {
                                var i = e(t[n]);
                                e(r).prop("name", i.prop("name")).attr("form", i.attr("form")), i.replaceWith(r)
                            })
                        }), i.append(s).appendTo(document.body)
                    },
                    abort: function() {
                        s && s.unbind("load").prop("src", r), i && i.remove()
                    }
                }
            }
        }), e.ajaxSetup({
            converters: {
                "iframe text": function(t) {
                    return t && e(t[0].body).text()
                },
                "iframe json": function(t) {
                    return t && e.parseJSON(e(t[0].body).text())
                },
                "iframe html": function(t) {
                    return t && e(t[0].body).html()
                },
                "iframe xml": function(t) {
                    var n = t && t[0];
                    return n && e.isXMLDoc(n) ? n : e.parseXML(n.XMLDocument && n.XMLDocument.xml || e(n.body).html())
                },
                "iframe script": function(t) {
                    return t && e.globalEval(e(t[0].body).text())
                }
            }
        })
    }), define("jquery.ui.widget", function() {}),
    function(e) {
        "use strict";
        typeof define == "function" && define.amd ? define("fileUpload", ["jquery", "jquery.ui.widget"], e) : e(window.jQuery)
    }(function(e) {
        "use strict";
        e.support.fileInput = !(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))")).test(window.navigator.userAgent) && !e('<input type="file">').prop("disabled"), e.support.xhrFileUpload = !!window.ProgressEvent && !!window.FileReader, e.support.xhrFormDataFileUpload = !!window.FormData, e.support.blobSlice = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice), e.widget("blueimp.fileupload", {
            options: {
                dropZone: e(document),
                pasteZone: e(document),
                fileInput: undefined,
                replaceFileInput: !0,
                paramName: undefined,
                singleFileUploads: !0,
                limitMultiFileUploads: undefined,
                limitMultiFileUploadSize: undefined,
                limitMultiFileUploadSizeOverhead: 512,
                sequentialUploads: !1,
                limitConcurrentUploads: undefined,
                forceIframeTransport: !1,
                redirect: undefined,
                redirectParamName: undefined,
                postMessage: undefined,
                multipart: !0,
                maxChunkSize: undefined,
                uploadedBytes: undefined,
                recalculateProgress: !0,
                progressInterval: 100,
                bitrateInterval: 500,
                autoUpload: !0,
                messages: {
                    uploadedBytes: "Uploaded bytes exceed file size"
                },
                i18n: function(t, n) {
                    return t = this.messages[t] || t.toString(), n && e.each(n, function(e, n) {
                        t = t.replace("{" + e + "}", n)
                    }), t
                },
                formData: function(e) {
                    return e.serializeArray()
                },
                add: function(t, n) {
                    if (t.isDefaultPrevented()) return !1;
                    (n.autoUpload || n.autoUpload !== !1 && e(this).fileupload("option", "autoUpload")) && n.process().done(function() {
                        n.submit()
                    })
                },
                processData: !1,
                contentType: !1,
                cache: !1
            },
            _specialOptions: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"],
            _blobSlice: e.support.blobSlice && function() {
                var e = this.slice || this.webkitSlice || this.mozSlice;
                return e.apply(this, arguments)
            },
            _BitrateTimer: function() {
                this.timestamp = Date.now ? Date.now() : (new Date).getTime(), this.loaded = 0, this.bitrate = 0, this.getBitrate = function(e, t, n) {
                    var r = e - this.timestamp;
                    if (!this.bitrate || !n || r > n) this.bitrate = (t - this.loaded) * (1e3 / r) * 8, this.loaded = t, this.timestamp = e;
                    return this.bitrate
                }
            },
            _isXHRUpload: function(t) {
                return !t.forceIframeTransport && (!t.multipart && e.support.xhrFileUpload || e.support.xhrFormDataFileUpload)
            },
            _getFormData: function(t) {
                var n;
                return e.type(t.formData) === "function" ? t.formData(t.form) : e.isArray(t.formData) ? t.formData : e.type(t.formData) === "object" ? (n = [], e.each(t.formData, function(e, t) {
                    n.push({
                        name: e,
                        value: t
                    })
                }), n) : []
            },
            _getTotal: function(t) {
                var n = 0;
                return e.each(t, function(e, t) {
                    n += t.size || 1
                }), n
            },
            _initProgressObject: function(t) {
                var n = {
                    loaded: 0,
                    total: 0,
                    bitrate: 0
                };
                t._progress ? e.extend(t._progress, n) : t._progress = n
            },
            _initResponseObject: function(e) {
                var t;
                if (e._response)
                    for (t in e._response) e._response.hasOwnProperty(t) && delete e._response[t];
                else e._response = {}
            },
            _onProgress: function(t, n) {
                if (t.lengthComputable) {
                    var r = Date.now ? Date.now() : (new Date).getTime(),
                        i;
                    if (n._time && n.progressInterval && r - n._time < n.progressInterval && t.loaded !== t.total) return;
                    n._time = r, i = Math.floor(t.loaded / t.total * (n.chunkSize || n._progress.total)) + (n.uploadedBytes || 0), this._progress.loaded += i - n._progress.loaded, this._progress.bitrate = this._bitrateTimer.getBitrate(r, this._progress.loaded, n.bitrateInterval), n._progress.loaded = n.loaded = i, n._progress.bitrate = n.bitrate = n._bitrateTimer.getBitrate(r, i, n.bitrateInterval), this._trigger("progress", e.Event("progress", {
                        delegatedEvent: t
                    }), n), this._trigger("progressall", e.Event("progressall", {
                        delegatedEvent: t
                    }), this._progress)
                }
            },
            _initProgressListener: function(t) {
                var n = this,
                    r = t.xhr ? t.xhr() : e.ajaxSettings.xhr();
                r.upload && (e(r.upload).bind("progress", function(e) {
                    var r = e.originalEvent;
                    e.lengthComputable = r.lengthComputable, e.loaded = r.loaded, e.total = r.total, n._onProgress(e, t)
                }), t.xhr = function() {
                    return r
                })
            },
            _isInstanceOf: function(e, t) {
                return Object.prototype.toString.call(t) === "[object " + e + "]"
            },
            _initXHRData: function(t) {
                var n = this,
                    r, i = t.files[0],
                    s = t.multipart || !e.support.xhrFileUpload,
                    o = e.type(t.paramName) === "array" ? t.paramName[0] : t.paramName;
                t.headers = e.extend({}, t.headers), t.contentRange && (t.headers["Content-Range"] = t.contentRange);
                if (!s || t.blob || !this._isInstanceOf("File", i)) t.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(i.name) + '"';
                s ? e.support.xhrFormDataFileUpload && (t.postMessage ? (r = this._getFormData(t), t.blob ? r.push({
                    name: o,
                    value: t.blob
                }) : e.each(t.files, function(n, i) {
                    r.push({
                        name: e.type(t.paramName) === "array" && t.paramName[n] || o,
                        value: i
                    })
                })) : (n._isInstanceOf("FormData", t.formData) ? r = t.formData : (r = new FormData, e.each(this._getFormData(t), function(e, t) {
                    r.append(t.name, t.value)
                })), t.blob ? r.append(o, t.blob, i.name) : e.each(t.files, function(i, s) {
                    (n._isInstanceOf("File", s) || n._isInstanceOf("Blob", s)) && r.append(e.type(t.paramName) === "array" && t.paramName[i] || o, s, s.uploadName || s.name)
                })), t.data = r) : (t.contentType = i.type || "application/octet-stream", t.data = t.blob || i), t.blob = null
            },
            _initIframeSettings: function(t) {
                var n = e("<a></a>").prop("href", t.url).prop("host");
                t.dataType = "iframe " + (t.dataType || ""), t.formData = this._getFormData(t), t.redirect && n && n !== location.host && t.formData.push({
                    name: t.redirectParamName || "redirect",
                    value: t.redirect
                })
            },
            _initDataSettings: function(e) {
                this._isXHRUpload(e) ? (this._chunkedUpload(e, !0) || (e.data || this._initXHRData(e), this._initProgressListener(e)), e.postMessage && (e.dataType = "postmessage " + (e.dataType || ""))) : this._initIframeSettings(e)
            },
            _getParamName: function(t) {
                var n = e(t.fileInput),
                    r = t.paramName;
                return r ? e.isArray(r) || (r = [r]) : (r = [], n.each(function() {
                    var t = e(this),
                        n = t.prop("name") || "files[]",
                        i = (t.prop("files") || [1]).length;
                    while (i) r.push(n), i -= 1
                }), r.length || (r = [n.prop("name") || "files[]"])), r
            },
            _initFormSettings: function(t) {
                if (!t.form || !t.form.length) t.form = e(t.fileInput.prop("form")), t.form.length || (t.form = e(this.options.fileInput.prop("form")));
                t.paramName = this._getParamName(t), t.url || (t.url = t.form.prop("action") || location.href), t.type = (t.type || e.type(t.form.prop("method")) === "string" && t.form.prop("method") || "").toUpperCase(), t.type !== "POST" && t.type !== "PUT" && t.type !== "PATCH" && (t.type = "POST"), t.formAcceptCharset || (t.formAcceptCharset = t.form.attr("accept-charset"))
            },
            _getAJAXSettings: function(t) {
                var n = e.extend({}, this.options, t);
                return this._initFormSettings(n), this._initDataSettings(n), n
            },
            _getDeferredState: function(e) {
                return e.state ? e.state() : e.isResolved() ? "resolved" : e.isRejected() ? "rejected" : "pending"
            },
            _enhancePromise: function(e) {
                return e.success = e.done, e.error = e.fail, e.complete = e.always, e
            },
            _getXHRPromise: function(t, n, r) {
                var i = e.Deferred(),
                    s = i.promise();
                return n = n || this.options.context || s, t === !0 ? i.resolveWith(n, r) : t === !1 && i.rejectWith(n, r), s.abort = i.promise, this._enhancePromise(s)
            },
            _addConvenienceMethods: function(t, n) {
                var r = this,
                    i = function(t) {
                        return e.Deferred().resolveWith(r, t).promise()
                    };
                n.process = function(t, s) {
                    if (t || s) n._processQueue = this._processQueue = (this._processQueue || i([this])).pipe(function() {
                        return n.errorThrown ? e.Deferred().rejectWith(r, [n]).promise() : i(arguments)
                    }).pipe(t, s);
                    return this._processQueue || i([this])
                }, n.submit = function() {
                    return this.state() !== "pending" && (n.jqXHR = this.jqXHR = r._trigger("submit", e.Event("submit", {
                        delegatedEvent: t
                    }), this) !== !1 && r._onSend(t, this)), this.jqXHR || r._getXHRPromise()
                }, n.abort = function() {
                    return this.jqXHR ? this.jqXHR.abort() : (this.errorThrown = "abort", r._trigger("fail", null, this), r._getXHRPromise(!1))
                }, n.state = function() {
                    if (this.jqXHR) return r._getDeferredState(this.jqXHR);
                    if (this._processQueue) return r._getDeferredState(this._processQueue)
                }, n.processing = function() {
                    return !this.jqXHR && this._processQueue && r._getDeferredState(this._processQueue) === "pending"
                }, n.progress = function() {
                    return this._progress
                }, n.response = function() {
                    return this._response
                }
            },
            _getUploadedBytes: function(e) {
                var t = e.getResponseHeader("Range"),
                    n = t && t.split("-"),
                    r = n && n.length > 1 && parseInt(n[1], 10);
                return r && r + 1
            },
            _chunkedUpload: function(t, n) {
                t.uploadedBytes = t.uploadedBytes || 0;
                var r = this,
                    i = t.files[0],
                    s = i.size,
                    o = t.uploadedBytes,
                    u = t.maxChunkSize || s,
                    a = this._blobSlice,
                    f = e.Deferred(),
                    l = f.promise(),
                    c, h;
                return !(this._isXHRUpload(t) && a && (o || u < s)) || t.data ? !1 : n ? !0 : o >= s ? (i.error = t.i18n("uploadedBytes"), this._getXHRPromise(!1, t.context, [null, "error", i.error])) : (h = function() {
                    var n = e.extend({}, t),
                        l = n._progress.loaded;
                    n.blob = a.call(i, o, o + u, i.type), n.chunkSize = n.blob.size, n.contentRange = "bytes " + o + "-" + (o + n.chunkSize - 1) + "/" + s, r._initXHRData(n), r._initProgressListener(n), c = (r._trigger("chunksend", null, n) !== !1 && e.ajax(n) || r._getXHRPromise(!1, n.context)).done(function(i, u, a) {
                        o = r._getUploadedBytes(a) || o + n.chunkSize, l + n.chunkSize - n._progress.loaded && r._onProgress(e.Event("progress", {
                            lengthComputable: !0,
                            loaded: o - n.uploadedBytes,
                            total: o - n.uploadedBytes
                        }), n), t.uploadedBytes = n.uploadedBytes = o, n.result = i, n.textStatus = u, n.jqXHR = a, r._trigger("chunkdone", null, n), r._trigger("chunkalways", null, n), o < s ? h() : f.resolveWith(n.context, [i, u, a])
                    }).fail(function(e, t, i) {
                        n.jqXHR = e, n.textStatus = t, n.errorThrown = i, r._trigger("chunkfail", null, n), r._trigger("chunkalways", null, n), f.rejectWith(n.context, [e, t, i])
                    })
                }, this._enhancePromise(l), l.abort = function() {
                    return c.abort()
                }, h(), l)
            },
            _beforeSend: function(e, t) {
                this._active === 0 && (this._trigger("start"), this._bitrateTimer = new this._BitrateTimer, this._progress.loaded = this._progress.total = 0, this._progress.bitrate = 0), this._initResponseObject(t), this._initProgressObject(t), t._progress.loaded = t.loaded = t.uploadedBytes || 0, t._progress.total = t.total = this._getTotal(t.files) || 1, t._progress.bitrate = t.bitrate = 0, this._active += 1, this._progress.loaded += t.loaded, this._progress.total += t.total
            },
            _onDone: function(t, n, r, i) {
                var s = i._progress.total,
                    o = i._response;
                i._progress.loaded < s && this._onProgress(e.Event("progress", {
                    lengthComputable: !0,
                    loaded: s,
                    total: s
                }), i), o.result = i.result = t, o.textStatus = i.textStatus = n, o.jqXHR = i.jqXHR = r, this._trigger("done", null, i)
            },
            _onFail: function(e, t, n, r) {
                var i = r._response;
                r.recalculateProgress && (this._progress.loaded -= r._progress.loaded, this._progress.total -= r._progress.total), i.jqXHR = r.jqXHR = e, i.textStatus = r.textStatus = t, i.errorThrown = r.errorThrown = n, this._trigger("fail", null, r)
            },
            _onAlways: function(e, t, n, r) {
                this._trigger("always", null, r)
            },
            _onSend: function(t, n) {
                n.submit || this._addConvenienceMethods(t, n);
                var r = this,
                    i, s, o, u, a = r._getAJAXSettings(n),
                    f = function() {
                        return r._sending += 1, a._bitrateTimer = new r._BitrateTimer, i = i || ((s || r._trigger("send", e.Event("send", {
                            delegatedEvent: t
                        }), a) === !1) && r._getXHRPromise(!1, a.context, s) || r._chunkedUpload(a) || e.ajax(a)).done(function(e, t, n) {
                            r._onDone(e, t, n, a)
                        }).fail(function(e, t, n) {
                            r._onFail(e, t, n, a)
                        }).always(function(e, t, n) {
                            r._onAlways(e, t, n, a), r._sending -= 1, r._active -= 1;
                            if (a.limitConcurrentUploads && a.limitConcurrentUploads > r._sending) {
                                var i = r._slots.shift();
                                while (i) {
                                    if (r._getDeferredState(i) === "pending") {
                                        i.resolve();
                                        break
                                    }
                                    i = r._slots.shift()
                                }
                            }
                            r._active === 0 && r._trigger("stop")
                        }), i
                    };
                return this._beforeSend(t, a), this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending ? (this.options.limitConcurrentUploads > 1 ? (o = e.Deferred(), this._slots.push(o), u = o.pipe(f)) : (this._sequence = this._sequence.pipe(f, f), u = this._sequence), u.abort = function() {
                    return s = [undefined, "abort", "abort"], i ? i.abort() : (o && o.rejectWith(a.context, s), f())
                }, this._enhancePromise(u)) : f()
            },
            _onAdd: function(t, n) {
                var r = this,
                    i = !0,
                    s = e.extend({}, this.options, n),
                    o = n.files,
                    u = o.length,
                    a = s.limitMultiFileUploads,
                    f = s.limitMultiFileUploadSize,
                    l = s.limitMultiFileUploadSizeOverhead,
                    c = 0,
                    h = this._getParamName(s),
                    p, d, v, m, g = 0;
                f && (!u || o[0].size === undefined) && (f = undefined);
                if (!(s.singleFileUploads || a || f) || !this._isXHRUpload(s)) v = [o], p = [h];
                else if (!s.singleFileUploads && !f && a) {
                    v = [], p = [];
                    for (m = 0; m < u; m += a) v.push(o.slice(m, m + a)), d = h.slice(m, m + a), d.length || (d = h), p.push(d)
                } else if (!s.singleFileUploads && f) {
                    v = [], p = [];
                    for (m = 0; m < u; m += 1) {
                        c += o[m].size + l;
                        if (m + 1 === u || c + o[m + 1].size + l > f || a && m + 1 - g >= a) v.push(o.slice(g, m + 1)), d = h.slice(g, m + 1), d.length || (d = h), p.push(d), g = m + 1, c = 0
                    }
                } else p = h;
                return n.originalFiles = o, e.each(v || o, function(s, o) {
                    var u = e.extend({}, n);
                    return u.files = v ? o : [o], u.paramName = p[s], r._initResponseObject(u), r._initProgressObject(u), r._addConvenienceMethods(t, u), i = r._trigger("add", e.Event("add", {
                        delegatedEvent: t
                    }), u), i
                }), i
            },
            _replaceFileInput: function(t) {
                var n = t.clone(!0);
                e("<form></form>").append(n)[0].reset(), t.after(n).detach(), e.cleanData(t.unbind("remove")), this.options.fileInput = this.options.fileInput.map(function(e, r) {
                    return r === t[0] ? n[0] : r
                }), t[0] === this.element[0] && (this.element = n)
            },
            _handleFileTreeEntry: function(t, n) {
                var r = this,
                    i = e.Deferred(),
                    s = function(e) {
                        e && !e.entry && (e.entry = t), i.resolve([e])
                    },
                    o = function(e) {
                        r._handleFileTreeEntries(e, n + t.name + "/").done(function(e) {
                            i.resolve(e)
                        }).fail(s)
                    },
                    u = function() {
                        a.readEntries(function(e) {
                            e.length ? (f = f.concat(e), u()) : o(f)
                        }, s)
                    },
                    a, f = [];
                return n = n || "", t.isFile ? t._file ? (t._file.relativePath = n, i.resolve(t._file)) : t.file(function(e) {
                    e.relativePath = n, i.resolve(e)
                }, s) : t.isDirectory ? (a = t.createReader(), u()) : i.resolve([]), i.promise()
            },
            _handleFileTreeEntries: function(t, n) {
                var r = this;
                return e.when.apply(e, e.map(t, function(e) {
                    return r._handleFileTreeEntry(e, n)
                })).pipe(function() {
                    return Array.prototype.concat.apply([], arguments)
                })
            },
            _getDroppedFiles: function(t) {
                t = t || {};
                var n = t.items;
                return n && n.length && (n[0].webkitGetAsEntry || n[0].getAsEntry) ? this._handleFileTreeEntries(e.map(n, function(e) {
                    var t;
                    return e.webkitGetAsEntry ? (t = e.webkitGetAsEntry(), t && (t._file = e.getAsFile()), t) : e.getAsEntry()
                })) : e.Deferred().resolve(e.makeArray(t.files)).promise()
            },
            _getSingleFileInputFiles: function(t) {
                t = e(t);
                var n = t.prop("webkitEntries") || t.prop("entries"),
                    r, i;
                if (n && n.length) return this._handleFileTreeEntries(n);
                r = e.makeArray(t.prop("files"));
                if (!r.length) {
                    i = t.prop("value");
                    if (!i) return e.Deferred().resolve([]).promise();
                    r = [{
                        name: i.replace(/^.*\\/, "")
                    }]
                } else r[0].name === undefined && r[0].fileName && e.each(r, function(e, t) {
                    t.name = t.fileName, t.size = t.fileSize
                });
                return e.Deferred().resolve(r).promise()
            },
            _getFileInputFiles: function(t) {
                return t instanceof e && t.length !== 1 ? e.when.apply(e, e.map(t, this._getSingleFileInputFiles)).pipe(function() {
                    return Array.prototype.concat.apply([], arguments)
                }) : this._getSingleFileInputFiles(t)
            },
            _onChange: function(t) {
                var n = this,
                    r = {
                        fileInput: e(t.target),
                        form: e(t.target.form)
                    };
                this._getFileInputFiles(r.fileInput).always(function(i) {
                    r.files = i, n.options.replaceFileInput && n._replaceFileInput(r.fileInput), n._trigger("change", e.Event("change", {
                        delegatedEvent: t
                    }), r) !== !1 && n._onAdd(t, r)
                })
            },
            _onPaste: function(t) {
                var n = t.originalEvent && t.originalEvent.clipboardData && t.originalEvent.clipboardData.items,
                    r = {
                        files: []
                    };
                n && n.length && (e.each(n, function(e, t) {
                    var n = t.getAsFile && t.getAsFile();
                    n && r.files.push(n)
                }), this._trigger("paste", e.Event("paste", {
                    delegatedEvent: t
                }), r) !== !1 && this._onAdd(t, r))
            },
            _onDrop: function(t) {
                t.dataTransfer = t.originalEvent && t.originalEvent.dataTransfer;
                var n = this,
                    r = t.dataTransfer,
                    i = {};
                r && r.files && r.files.length && (t.preventDefault(), this._getDroppedFiles(r).always(function(r) {
                    i.files = r, n._trigger("drop", e.Event("drop", {
                        delegatedEvent: t
                    }), i) !== !1 && n._onAdd(t, i)
                }))
            },
            _onDragOver: function(t) {
                t.dataTransfer = t.originalEvent && t.originalEvent.dataTransfer;
                var n = t.dataTransfer;
                n && e.inArray("Files", n.types) !== -1 && this._trigger("dragover", e.Event("dragover", {
                    delegatedEvent: t
                })) !== !1 && (t.preventDefault(), n.dropEffect = "copy")
            },
            _initEventHandlers: function() {
                this._isXHRUpload(this.options) && (this._on(this.options.dropZone, {
                    dragover: this._onDragOver,
                    drop: this._onDrop
                }), this._on(this.options.pasteZone, {
                    paste: this._onPaste
                })), e.support.fileInput && this._on(this.options.fileInput, {
                    change: this._onChange
                })
            },
            _destroyEventHandlers: function() {
                this._off(this.options.dropZone, "dragover drop"), this._off(this.options.pasteZone, "paste"), this._off(this.options.fileInput, "change")
            },
            _setOption: function(t, n) {
                var r = e.inArray(t, this._specialOptions) !== -1;
                r && this._destroyEventHandlers(), this._super(t, n), r && (this._initSpecialOptions(), this._initEventHandlers())
            },
            _initSpecialOptions: function() {
                var t = this.options;
                t.fileInput === undefined ? t.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]') : t.fileInput instanceof e || (t.fileInput = e(t.fileInput)), t.dropZone instanceof e || (t.dropZone = e(t.dropZone)), t.pasteZone instanceof e || (t.pasteZone = e(t.pasteZone))
            },
            _getRegExp: function(e) {
                var t = e.split("/"),
                    n = t.pop();
                return t.shift(), new RegExp(t.join("/"), n)
            },
            _isRegExpOption: function(t, n) {
                return t !== "url" && e.type(n) === "string" && /^\/.*\/[igm]{0,3}$/.test(n)
            },
            _initDataAttributes: function() {
                var t = this,
                    n = this.options,
                    r = e(this.element[0].cloneNode(!1));
                e.each(r.data(), function(e, i) {
                    var s = "data-" + e.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
                    r.attr(s) && (t._isRegExpOption(e, i) && (i = t._getRegExp(i)), n[e] = i)
                })
            },
            _create: function() {
                this._initDataAttributes(), this._initSpecialOptions(), this._slots = [], this._sequence = this._getXHRPromise(!0), this._sending = this._active = 0, this._initProgressObject(this), this._initEventHandlers()
            },
            active: function() {
                return this._active
            },
            progress: function() {
                return this._progress
            },
            add: function(t) {
                var n = this;
                if (!t || this.options.disabled) return;
                t.fileInput && !t.files ? this._getFileInputFiles(t.fileInput).always(function(e) {
                    t.files = e, n._onAdd(null, t)
                }) : (t.files = e.makeArray(t.files), this._onAdd(null, t))
            },
            send: function(t) {
                if (t && !this.options.disabled) {
                    if (t.fileInput && !t.files) {
                        var n = this,
                            r = e.Deferred(),
                            i = r.promise(),
                            s, o;
                        return i.abort = function() {
                            return o = !0, s ? s.abort() : (r.reject(null, "abort", "abort"), i)
                        }, this._getFileInputFiles(t.fileInput).always(function(e) {
                            if (o) return;
                            if (!e.length) {
                                r.reject();
                                return
                            }
                            t.files = e, s = n._onSend(null, t), s.then(function(e, t, n) {
                                r.resolve(e, t, n)
                            }, function(e, t, n) {
                                r.reject(e, t, n)
                            })
                        }), this._enhancePromise(i)
                    }
                    t.files = e.makeArray(t.files);
                    if (t.files.length) return this._onSend(null, t)
                }
                return this._getXHRPromise(!1, t && t.context)
            }
        })
    }), define("components/common/scripts/backboneValidationOverrides", ["underscore", "backbone", "backboneValidation"], function(e, t) {
        e.extend(t.Validation.patterns, {
            alpha: /^[a-zA-Z]+$/,
            alphaPlus: /^[a-zA-Z\ \'-]+$/,
            POBox: /(post|p[\.o])\.?(\s*o(ffice)?)?\.?(\s*box)?/i,
            ascii: /^[\u0000-\u007e]+$/
        }), t.Validation.configure({
            labelFormatter: "label"
        })
    }), define("rails/formRefreshBehavior", ["jquery", "underscore"], function(e, t) {
        e(function() {
            var n = function() {
                var t = e(this).closest("form"),
                    n = setTimeout(function() {
                        t.showSpinner()
                    }, 500);
                e.ajax({
                    url: t.data("refresh-path"),
                    method: "GET",
                    data: t.serialize(),
                    complete: function() {
                        clearTimeout(n), t.hideSpinner()
                    }
                })
            };
            e(document).on("change", "[data-behavior-refresh-form]", n), e(document).on("keyup", "[data-behavior-refresh-form]", t.debounce(n, 500))
        })
    }), define("rails/includes", ["rails/formRefreshBehavior"], function() {}), require.config({
        shim: {
            nv: ["d3"],
            jqueryMaskedInput: ["jquery"],
            jqueryUI: ["jquery"],
            jqueryNumeric: ["jquery"],
            jqueryBlockUI: ["jquery", "jqueryUI", "jqueryBrowserMobile"],
            jqueryUITouchPunch: ["jquery", "jqueryUI"],
            jqueryCaret: ["jquery", "jqueryBrowserMobile"],
            jqueryBrowserMobile: ["jquery"],
            jqueryCookie: ["jquery"],
            jqueryMask: ["jquery"],
            jqueryTransit: ["jquery"],
            jqueryOutside: ["jquery"],
            jqueryPlaceholder: ["jquery"],
            jqueryQtip: ["jquery", "jqueryBrowserMobile"],
            jqueryUjs: ["jquery"],
            bootstrap: ["jquery", "jqueryBrowserMobile"],
            jSignature: ["jquery"],
            fileUpload: ["iframeTransport", "jqueryUI"],
            underscore: {
                exports: "_"
            },
            backbone: {
                deps: ["underscore", "jquery"],
                exports: "Backbone"
            },
            backboneMemento: ["backbone"]
        },
        paths: {
            components: "../../../components",
            jquery: "bower_components/jquery/dist/jquery",
            jqueryCookie: "../../../components/common/scripts/libs/jquery.cookie",
            jqueryBlockUI: "libs/jquery.blockUI",
            jqueryQtip: "../../../components/common/scripts/libs/jquery.qtip",
            jqueryTransit: "../../../components/common/scripts/libs/jquery.transit",
            jqueryMask: "../../../components/common/scripts/libs/jquery.mask",
            jqueryUI: "../../../components/common/scripts/libs/jquery.ui",
            jqueryNumeric: "libs/jquery.numeric",
            jqueryUITouchPunch: "libs/jquery.ui.touchPunch",
            jqueryCaret: "../../../components/common/scripts/libs/jquery.caret",
            jqueryBrowserMobile: "../../../components/common/scripts/libs/jquery.browser.mobile",
            jqueryOutside: "libs/jquery.outside",
            jqueryPlaceholder: "libs/jquery.placeholder",
            jqueryUjs: "bower_components/jquery-ujs/src/rails",
            jSignature: "libs/jSignature",
            accounting: "../../../components/common/scripts/libs/accounting",
            bootstrap: "libs/bootstrap",
            underscore: "bower_components/underscore/underscore",
            backbone: "bower_components/backbone/backbone",
            backboneMemento: "bower_components/backbone.memento/backbone.memento",
            backboneSyphon: "bower_components/backbone.syphon/lib/amd/backbone.syphon",
            backboneRelational: "bower_components/backbone-relational/backbone-relational",
            backboneValidation: "bower_components/backbone-validation/dist/backbone-validation-amd",
            marionette: "bower_components/backbone.marionette/lib/backbone.marionette",
            rivets: "libs/rivets",
            bmt: "app",
            datejs: "../../../components/common/scripts/libs/date",
            d3: "../../../components/common/scripts/libs/d3",
            nv: "../../../components/common/scripts/libs/nv.d3",
            stacktrace: "libs/stacktrace",
            projector: "bower_components/projector-js/dist/projector",
            "jquery.ui.widget": "libs/jquery.ui.widget",
            iframeTransport: "bower_components/blueimp-file-upload/js/jquery.iframe-transport",
            fileUpload: "bower_components/blueimp-file-upload/js/jquery.fileupload",
            hbs: "bower_components/require-handlebars-plugin/hbs"
        },
        hbs: {
            helperDirectory: "components/common/scripts/templateHelpers/"
        }
    }), require(["jquery", "underscore", "backbone", "bmt", "components/common/scripts/util/templates", "overrides", "components/common/scripts/libs/es5-shim", "jqueryCookie", "jqueryTransit", "jqueryUI", "jqueryQtip", "jqueryMask", "jqueryNumeric", "jqueryUITouchPunch", "jqueryCaret", "jqueryBrowserMobile", "jqueryOutside", "jqueryPlaceholder", "jqueryUjs", "bootstrap", "jSignature", "d3", "nv", "common/csrf", "fileUpload", "components/common/scripts/backboneValidationOverrides", "rails/includes"], function(e, t, n, r, i, s) {
        e(function() {
            i.setup().done(function() {
                r.start()
            })
        })
    }), define("main", function() {});
